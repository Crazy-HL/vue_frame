{"ast":null,"code":"import _toSetter from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/toSetter.js\";import _defineProperty from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classPrivateGetter from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateGetter.js\";import _classPrivateMethodInitSpec from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";import _classPrivateFieldInitSpec from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";import _assertClassBrand from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/assertClassBrand.js\";import _classPrivateFieldSet from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";import _classPrivateFieldGet from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.array-buffer.detached.js\";import\"core-js/modules/es.array-buffer.transfer.js\";import\"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";import\"core-js/modules/es.promise.with-resolvers.js\";import\"core-js/modules/es.set.difference.v2.js\";import\"core-js/modules/es.set.intersection.v2.js\";import\"core-js/modules/es.set.is-disjoint-from.v2.js\";import\"core-js/modules/es.set.is-subset-of.v2.js\";import\"core-js/modules/es.set.is-superset-of.v2.js\";import\"core-js/modules/es.set.symmetric-difference.v2.js\";import\"core-js/modules/es.set.union.v2.js\";import\"core-js/modules/es.typed-array.to-reversed.js\";import\"core-js/modules/es.typed-array.to-sorted.js\";import\"core-js/modules/es.typed-array.with.js\";import\"core-js/modules/web.dom-exception.stack.js\";import\"core-js/modules/web.structured-clone.js\";import\"core-js/modules/web.url-search-params.delete.js\";import\"core-js/modules/web.url-search-params.has.js\";import\"core-js/modules/web.url-search-params.size.js\";/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */ /******/var __webpack_modules__={/***/976:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{// EXPORTS\n__webpack_require__.d(__webpack_exports__,{AnnotationLayer:()=>(/* binding */AnnotationLayer),FreeTextAnnotationElement:()=>(/* binding */FreeTextAnnotationElement),InkAnnotationElement:()=>(/* binding */InkAnnotationElement),StampAnnotationElement:()=>(/* binding */StampAnnotationElement)});// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);// EXTERNAL MODULE: ./src/display/annotation_storage.js\nvar annotation_storage=__webpack_require__(792);;// CONCATENATED MODULE: ./src/shared/scripting_utils.js\nfunction makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,\"0\");}function scaleAndClamp(x){return Math.max(0,Math.min(255,255*x));}class ColorConverters{static CMYK_G(_ref){let[c,y,m,k]=_ref;return[\"G\",1-Math.min(1,0.3*c+0.59*m+0.11*y+k)];}static G_CMYK(_ref2){let[g]=_ref2;return[\"CMYK\",0,0,0,1-g];}static G_RGB(_ref3){let[g]=_ref3;return[\"RGB\",g,g,g];}static G_rgb(_ref4){let[g]=_ref4;g=scaleAndClamp(g);return[g,g,g];}static G_HTML(_ref5){let[g]=_ref5;const G=makeColorComp(g);return`#${G}${G}${G}`;}static RGB_G(_ref6){let[r,g,b]=_ref6;return[\"G\",0.3*r+0.59*g+0.11*b];}static RGB_rgb(color){return color.map(scaleAndClamp);}static RGB_HTML(color){return`#${color.map(makeColorComp).join(\"\")}`;}static T_HTML(){return\"#00000000\";}static T_rgb(){return[null];}static CMYK_RGB(_ref7){let[c,y,m,k]=_ref7;return[\"RGB\",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)];}static CMYK_rgb(_ref8){let[c,y,m,k]=_ref8;return[scaleAndClamp(1-Math.min(1,c+k)),scaleAndClamp(1-Math.min(1,m+k)),scaleAndClamp(1-Math.min(1,y+k))];}static CMYK_HTML(components){const rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb);}static RGB_CMYK(_ref9){let[r,g,b]=_ref9;const c=1-r;const m=1-g;const y=1-b;const k=Math.min(c,m,y);return[\"CMYK\",c,m,y,k];}}// EXTERNAL MODULE: ./src/display/xfa_layer.js\nvar xfa_layer=__webpack_require__(284);;// CONCATENATED MODULE: ./src/display/annotation_layer.js\nconst DEFAULT_TAB_INDEX=1000;const DEFAULT_FONT_SIZE=9;const GetElementsByNameSet=new WeakSet();function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]};}class AnnotationElementFactory{static create(parameters){const subtype=parameters.data.annotationType;switch(subtype){case util.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case util.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case util.AnnotationType.WIDGET:const fieldType=parameters.data.fieldType;switch(fieldType){case\"Tx\":return new TextWidgetAnnotationElement(parameters);case\"Btn\":if(parameters.data.radioButton){return new RadioButtonWidgetAnnotationElement(parameters);}else if(parameters.data.checkBox){return new CheckboxWidgetAnnotationElement(parameters);}return new PushButtonWidgetAnnotationElement(parameters);case\"Ch\":return new ChoiceWidgetAnnotationElement(parameters);case\"Sig\":return new SignatureWidgetAnnotationElement(parameters);}return new WidgetAnnotationElement(parameters);case util.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case util.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case util.AnnotationType.LINE:return new LineAnnotationElement(parameters);case util.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case util.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case util.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case util.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case util.AnnotationType.INK:return new InkAnnotationElement(parameters);case util.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case util.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case util.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case util.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case util.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case util.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case util.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters);}}}var _updates=/*#__PURE__*/new WeakMap();var _hasBorder=/*#__PURE__*/new WeakMap();var _AnnotationElement_brand=/*#__PURE__*/new WeakSet();class AnnotationElement{constructor(parameters){let{isRenderable=false,ignoreBorder=false,createQuadrilaterals=false}=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classPrivateMethodInitSpec(this,_AnnotationElement_brand);_classPrivateFieldInitSpec(this,_updates,null);_classPrivateFieldInitSpec(this,_hasBorder,false);this.isRenderable=isRenderable;this.data=parameters.data;this.layer=parameters.layer;this.linkService=parameters.linkService;this.downloadManager=parameters.downloadManager;this.imageResourcesPath=parameters.imageResourcesPath;this.renderForms=parameters.renderForms;this.svgFactory=parameters.svgFactory;this.annotationStorage=parameters.annotationStorage;this.enableScripting=parameters.enableScripting;this.hasJSActions=parameters.hasJSActions;this._fieldObjects=parameters.fieldObjects;this.parent=parameters.parent;if(isRenderable){this.container=this._createContainer(ignoreBorder);}if(createQuadrilaterals){this._createQuadrilaterals();}}static _hasPopupData(_ref10){let{titleObj,contentsObj,richText}=_ref10;return!!(titleObj?.str||contentsObj?.str||richText?.str);}get hasPopupData(){return AnnotationElement._hasPopupData(this.data);}updateEdited(params){if(!this.container){return;}_classPrivateFieldGet(_updates,this)||_classPrivateFieldSet(_updates,this,{rect:this.data.rect.slice(0)});const{rect}=params;if(rect){_assertClassBrand(_AnnotationElement_brand,this,_setRectEdited).call(this,rect);}}resetEdited(){if(!_classPrivateFieldGet(_updates,this)){return;}_assertClassBrand(_AnnotationElement_brand,this,_setRectEdited).call(this,_classPrivateFieldGet(_updates,this).rect);_classPrivateFieldSet(_updates,this,null);}_createContainer(ignoreBorder){const{data,parent:{page,viewport}}=this;const container=document.createElement(\"section\");container.setAttribute(\"data-annotation-id\",data.id);if(!(this instanceof WidgetAnnotationElement)){container.tabIndex=DEFAULT_TAB_INDEX;}const{style}=container;style.zIndex=this.parent.zIndex++;if(data.popupRef){container.setAttribute(\"aria-haspopup\",\"dialog\");}if(data.alternativeText){container.title=data.alternativeText;}if(data.noRotate){container.classList.add(\"norotate\");}if(!data.rect||this instanceof PopupAnnotationElement){const{rotation}=data;if(!data.hasOwnCanvas&&rotation!==0){this.setRotation(rotation,container);}return container;}const{width,height}=getRectDims(data.rect);if(!ignoreBorder&&data.borderStyle.width>0){style.borderWidth=`${data.borderStyle.width}px`;const horizontalRadius=data.borderStyle.horizontalCornerRadius;const verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){const radius=`calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;style.borderRadius=radius;}else if(this instanceof RadioButtonWidgetAnnotationElement){const radius=`calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;style.borderRadius=radius;}switch(data.borderStyle.style){case util.AnnotationBorderStyleType.SOLID:style.borderStyle=\"solid\";break;case util.AnnotationBorderStyleType.DASHED:style.borderStyle=\"dashed\";break;case util.AnnotationBorderStyleType.BEVELED:(0,util.warn)(\"Unimplemented border style: beveled\");break;case util.AnnotationBorderStyleType.INSET:(0,util.warn)(\"Unimplemented border style: inset\");break;case util.AnnotationBorderStyleType.UNDERLINE:style.borderBottomStyle=\"solid\";break;default:break;}const borderColor=data.borderColor||null;if(borderColor){_classPrivateFieldSet(_hasBorder,this,true);style.borderColor=util.Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0);}else{style.borderWidth=0;}}const rect=util.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);const{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;style.left=`${100*(rect[0]-pageX)/pageWidth}%`;style.top=`${100*(rect[1]-pageY)/pageHeight}%`;const{rotation}=data;if(data.hasOwnCanvas||rotation===0){style.width=`${100*width/pageWidth}%`;style.height=`${100*height/pageHeight}%`;}else{this.setRotation(rotation,container);}return container;}setRotation(angle){let container=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.container;if(!this.data.rect){return;}const{pageWidth,pageHeight}=this.parent.viewport.rawDims;const{width,height}=getRectDims(this.data.rect);let elementWidth,elementHeight;if(angle%180===0){elementWidth=100*width/pageWidth;elementHeight=100*height/pageHeight;}else{elementWidth=100*height/pageWidth;elementHeight=100*width/pageHeight;}container.style.width=`${elementWidth}%`;container.style.height=`${elementHeight}%`;container.setAttribute(\"data-main-rotation\",(360-angle)%360);}get _commonActions(){const setColor=(jsName,styleName,event)=>{const color=event.detail[jsName];const colorType=color[0];const colorArray=color.slice(1);event.target.style[styleName]=ColorConverters[`${colorType}_HTML`](colorArray);this.annotationStorage.setValue(this.data.id,{[styleName]:ColorConverters[`${colorType}_rgb`](colorArray)});};return(0,util.shadow)(this,\"_commonActions\",{display:event=>{const{display}=event.detail;const hidden=display%2===1;this.container.style.visibility=hidden?\"hidden\":\"visible\";this.annotationStorage.setValue(this.data.id,{noView:hidden,noPrint:display===1||display===2});},print:event=>{this.annotationStorage.setValue(this.data.id,{noPrint:!event.detail.print});},hidden:event=>{const{hidden}=event.detail;this.container.style.visibility=hidden?\"hidden\":\"visible\";this.annotationStorage.setValue(this.data.id,{noPrint:hidden,noView:hidden});},focus:event=>{setTimeout(()=>event.target.focus({preventScroll:false}),0);},userName:event=>{event.target.title=event.detail.userName;},readonly:event=>{event.target.disabled=event.detail.readonly;},required:event=>{this._setRequired(event.target,event.detail.required);},bgColor:event=>{setColor(\"bgColor\",\"backgroundColor\",event);},fillColor:event=>{setColor(\"fillColor\",\"backgroundColor\",event);},fgColor:event=>{setColor(\"fgColor\",\"color\",event);},textColor:event=>{setColor(\"textColor\",\"color\",event);},borderColor:event=>{setColor(\"borderColor\",\"borderColor\",event);},strokeColor:event=>{setColor(\"strokeColor\",\"borderColor\",event);},rotation:event=>{const angle=event.detail.rotation;this.setRotation(angle);this.annotationStorage.setValue(this.data.id,{rotation:angle});}});}_dispatchEventFromSandbox(actions,jsEvent){const commonActions=this._commonActions;for(const name of Object.keys(jsEvent.detail)){const action=actions[name]||commonActions[name];action?.(jsEvent);}}_setDefaultPropertiesFromJS(element){if(!this.enableScripting){return;}const storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData){return;}const commonActions=this._commonActions;for(const[actionName,detail]of Object.entries(storedData)){const action=commonActions[actionName];if(action){const eventProxy={detail:{[actionName]:detail},target:element};action(eventProxy);delete storedData[actionName];}}}_createQuadrilaterals(){if(!this.container){return;}const{quadPoints}=this.data;if(!quadPoints){return;}const[rectBlX,rectBlY,rectTrX,rectTrY]=this.data.rect;if(quadPoints.length===1){const[,{x:trX,y:trY},{x:blX,y:blY}]=quadPoints[0];if(rectTrX===trX&&rectTrY===trY&&rectBlX===blX&&rectBlY===blY){return;}}const{style}=this.container;let svgBuffer;if(_classPrivateFieldGet(_hasBorder,this)){const{borderColor,borderWidth}=style;style.borderWidth=0;svgBuffer=[\"url('data:image/svg+xml;utf8,\",`<svg xmlns=\"http://www.w3.org/2000/svg\"`,` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`,`<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];this.container.classList.add(\"hasBorder\");}const width=rectTrX-rectBlX;const height=rectTrY-rectBlY;const{svgFactory}=this;const svg=svgFactory.createElement(\"svg\");svg.classList.add(\"quadrilateralsContainer\");svg.setAttribute(\"width\",0);svg.setAttribute(\"height\",0);const defs=svgFactory.createElement(\"defs\");svg.append(defs);const clipPath=svgFactory.createElement(\"clipPath\");const id=`clippath_${this.data.id}`;clipPath.setAttribute(\"id\",id);clipPath.setAttribute(\"clipPathUnits\",\"objectBoundingBox\");defs.append(clipPath);for(const[,{x:trX,y:trY},{x:blX,y:blY}]of quadPoints){const rect=svgFactory.createElement(\"rect\");const x=(blX-rectBlX)/width;const y=(rectTrY-trY)/height;const rectWidth=(trX-blX)/width;const rectHeight=(trY-blY)/height;rect.setAttribute(\"x\",x);rect.setAttribute(\"y\",y);rect.setAttribute(\"width\",rectWidth);rect.setAttribute(\"height\",rectHeight);clipPath.append(rect);svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);}if(_classPrivateFieldGet(_hasBorder,this)){svgBuffer.push(`</g></svg>')`);style.backgroundImage=svgBuffer.join(\"\");}this.container.append(svg);this.container.style.clipPath=`url(#${id})`;}_createPopup(){const{container,data}=this;container.setAttribute(\"aria-haspopup\",\"dialog\");const popup=new PopupAnnotationElement({data:{color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,parentRect:data.rect,borderStyle:0,id:`popup_${data.id}`,rotation:data.rotation},parent:this.parent,elements:[this]});this.parent.div.append(popup.render());}render(){(0,util.unreachable)(\"Abstract method `AnnotationElement.render` called\");}_getElementsByName(name){let skipId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const fields=[];if(this._fieldObjects){const fieldObj=this._fieldObjects[name];if(fieldObj){for(const{page,id,exportValues}of fieldObj){if(page===-1){continue;}if(id===skipId){continue;}const exportValue=typeof exportValues===\"string\"?exportValues:null;const domElement=document.querySelector(`[data-element-id=\"${id}\"]`);if(domElement&&!GetElementsByNameSet.has(domElement)){(0,util.warn)(`_getElementsByName - element not allowed: ${id}`);continue;}fields.push({id,exportValue,domElement});}}return fields;}for(const domElement of document.getElementsByName(name)){const{exportValue}=domElement;const id=domElement.getAttribute(\"data-element-id\");if(id===skipId){continue;}if(!GetElementsByNameSet.has(domElement)){continue;}fields.push({id,exportValue,domElement});}return fields;}show(){if(this.container){this.container.hidden=false;}this.popup?.maybeShow();}hide(){if(this.container){this.container.hidden=true;}this.popup?.forceHide();}getElementsToTriggerPopup(){return this.container;}addHighlightArea(){const triggers=this.getElementsToTriggerPopup();if(Array.isArray(triggers)){for(const element of triggers){element.classList.add(\"highlightArea\");}}else{triggers.classList.add(\"highlightArea\");}}get _isEditable(){return false;}_editOnDoubleClick(){if(!this._isEditable){return;}const{annotationEditorType:mode,data:{id:editId}}=this;this.container.addEventListener(\"dblclick\",()=>{this.linkService.eventBus?.dispatch(\"switchannotationeditormode\",{source:this,mode,editId});});}}function _setRectEdited(rect){const{container:{style},data:{rect:currentRect,rotation},parent:{viewport:{rawDims:{pageWidth,pageHeight,pageX,pageY}}}}=this;currentRect?.splice(0,4,...rect);const{width,height}=getRectDims(rect);style.left=`${100*(rect[0]-pageX)/pageWidth}%`;style.top=`${100*(pageHeight-rect[3]+pageY)/pageHeight}%`;if(rotation===0){style.width=`${100*width/pageWidth}%`;style.height=`${100*height/pageHeight}%`;}else{this.setRotation(rotation);}}var _LinkAnnotationElement_brand=/*#__PURE__*/new WeakSet();class LinkAnnotationElement extends AnnotationElement{constructor(parameters){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;super(parameters,{isRenderable:true,ignoreBorder:!!options?.ignoreBorder,createQuadrilaterals:true});_classPrivateMethodInitSpec(this,_LinkAnnotationElement_brand);this.isTooltipOnly=parameters.data.isTooltipOnly;}render(){const{data,linkService}=this;const link=document.createElement(\"a\");link.setAttribute(\"data-element-id\",data.id);let isBound=false;if(data.url){linkService.addLinkAttributes(link,data.url,data.newWindow);isBound=true;}else if(data.action){this._bindNamedAction(link,data.action);isBound=true;}else if(data.attachment){_assertClassBrand(_LinkAnnotationElement_brand,this,_bindAttachment).call(this,link,data.attachment,data.attachmentDest);isBound=true;}else if(data.setOCGState){_assertClassBrand(_LinkAnnotationElement_brand,this,_bindSetOCGState).call(this,link,data.setOCGState);isBound=true;}else if(data.dest){this._bindLink(link,data.dest);isBound=true;}else{if(data.actions&&(data.actions.Action||data.actions[\"Mouse Up\"]||data.actions[\"Mouse Down\"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(link,data);isBound=true;}if(data.resetForm){this._bindResetFormAction(link,data.resetForm);isBound=true;}else if(this.isTooltipOnly&&!isBound){this._bindLink(link,\"\");isBound=true;}}this.container.classList.add(\"linkAnnotation\");if(isBound){this.container.append(link);}return this.container;}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination);link.onclick=()=>{if(destination){this.linkService.goToDestination(destination);}return false;};if(destination||destination===\"\"){_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.linkService.executeNamedAction(action);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}_bindJSAction(link,data){link.href=this.linkService.getAnchorUrl(\"\");const map=new Map([[\"Action\",\"onclick\"],[\"Mouse Up\",\"onmouseup\"],[\"Mouse Down\",\"onmousedown\"]]);for(const name of Object.keys(data.actions)){const jsName=map.get(name);if(!jsName){continue;}link[jsName]=()=>{this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:data.id,name}});return false;};}if(!link.onclick){link.onclick=()=>false;}_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}_bindResetFormAction(link,resetForm){const otherClickAction=link.onclick;if(!otherClickAction){link.href=this.linkService.getAnchorUrl(\"\");}_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);if(!this._fieldObjects){(0,util.warn)(`_bindResetFormAction - \"resetForm\" action not supported, `+\"ensure that the `fieldObjects` parameter is provided.\");if(!otherClickAction){link.onclick=()=>false;}return;}link.onclick=()=>{otherClickAction?.();const{fields:resetFormFields,refs:resetFormRefs,include}=resetForm;const allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){const fieldIds=new Set(resetFormRefs);for(const fieldName of resetFormFields){const fields=this._fieldObjects[fieldName]||[];for(const{id}of fields){fieldIds.add(id);}}for(const fields of Object.values(this._fieldObjects)){for(const field of fields){if(fieldIds.has(field.id)===include){allFields.push(field);}}}}else{for(const fields of Object.values(this._fieldObjects)){allFields.push(...fields);}}const storage=this.annotationStorage;const allIds=[];for(const field of allFields){const{id}=field;allIds.push(id);switch(field.type){case\"text\":{const value=field.defaultValue||\"\";storage.setValue(id,{value});break;}case\"checkbox\":case\"radiobutton\":{const value=field.defaultValue===field.exportValues;storage.setValue(id,{value});break;}case\"combobox\":case\"listbox\":{const value=field.defaultValue||\"\";storage.setValue(id,{value});break;}default:continue;}const domElement=document.querySelector(`[data-element-id=\"${id}\"]`);if(!domElement){continue;}else if(!GetElementsByNameSet.has(domElement)){(0,util.warn)(`_bindResetFormAction - element not allowed: ${id}`);continue;}domElement.dispatchEvent(new Event(\"resetform\"));}if(this.enableScripting){this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:\"app\",ids:allIds,name:\"ResetForm\"}});}return false;};}}function _setInternalLink(){this.container.setAttribute(\"data-internal-link\",\"\");}function _bindAttachment(link,attachment){let dest=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.downloadManager?.openOrDownloadData(attachment.content,attachment.filename,dest);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}function _bindSetOCGState(link,action){link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.linkService.executeSetOCGState(action);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}class TextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true});}render(){this.container.classList.add(\"textAnnotation\");const image=document.createElement(\"img\");image.src=this.imageResourcesPath+\"annotation-\"+this.data.name.toLowerCase()+\".svg\";image.setAttribute(\"data-l10n-id\",\"pdfjs-text-annotation-type\");image.setAttribute(\"data-l10n-args\",JSON.stringify({type:this.data.name}));if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.append(image);return this.container;}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container;}showElementAndHideCanvas(element){if(this.data.hasOwnCanvas){if(element.previousSibling?.nodeName===\"CANVAS\"){element.previousSibling.hidden=true;}element.hidden=false;}}_getKeyModifier(event){return util.FeatureTest.platform.isMac?event.metaKey:event.ctrlKey;}_setEventListener(element,elementData,baseName,eventName,valueGetter){if(baseName.includes(\"mouse\")){element.addEventListener(baseName,event=>{this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:this._getKeyModifier(event)}});});}else{element.addEventListener(baseName,event=>{if(baseName===\"blur\"){if(!elementData.focused||!event.relatedTarget){return;}elementData.focused=false;}else if(baseName===\"focus\"){if(elementData.focused){return;}elementData.focused=true;}if(!valueGetter){return;}this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event)}});});}}_setEventListeners(element,elementData,names,getter){for(const[baseName,eventName]of names){if(eventName===\"Action\"||this.data.actions?.[eventName]){if(eventName===\"Focus\"||eventName===\"Blur\"){elementData||={focused:false};}this._setEventListener(element,elementData,baseName,eventName,getter);if(eventName===\"Focus\"&&!this.data.actions?.Blur){this._setEventListener(element,elementData,\"blur\",\"Blur\",null);}else if(eventName===\"Blur\"&&!this.data.actions?.Focus){this._setEventListener(element,elementData,\"focus\",\"Focus\",null);}}}}_setBackgroundColor(element){const color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?\"transparent\":util.Util.makeHexColor(color[0],color[1],color[2]);}_setTextStyle(element){const TEXT_ALIGNMENT=[\"left\",\"center\",\"right\"];const{fontColor}=this.data.defaultAppearanceData;const fontSize=this.data.defaultAppearanceData.fontSize||DEFAULT_FONT_SIZE;const style=element.style;let computedFontSize;const BORDER_SIZE=2;const roundToOneDecimal=x=>Math.round(10*x)/10;if(this.data.multiLine){const height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);const numberOfLines=Math.round(height/(util.LINE_FACTOR*fontSize))||1;const lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,roundToOneDecimal(lineHeight/util.LINE_FACTOR));}else{const height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);computedFontSize=Math.min(fontSize,roundToOneDecimal(height/util.LINE_FACTOR));}style.fontSize=`calc(${computedFontSize}px * var(--scale-factor))`;style.color=util.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]);if(this.data.textAlignment!==null){style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment];}}_setRequired(element,isRequired){if(isRequired){element.setAttribute(\"required\",true);}else{element.removeAttribute(\"required\");}element.setAttribute(\"aria-required\",isRequired);}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){const isRenderable=parameters.renderForms||parameters.data.hasOwnCanvas||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;super(parameters,{isRenderable});}setPropertyOnSiblings(base,key,value,keyInStorage){const storage=this.annotationStorage;for(const element of this._getElementsByName(base.name,base.id)){if(element.domElement){element.domElement[key]=value;}storage.setValue(element.id,{[keyInStorage]:value});}}render(){const storage=this.annotationStorage;const id=this.data.id;this.container.classList.add(\"textWidgetAnnotation\");let element=null;if(this.renderForms){const storedData=storage.getValue(id,{value:this.data.fieldValue});let textContent=storedData.value||\"\";const maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;if(maxLen&&textContent.length>maxLen){textContent=textContent.slice(0,maxLen);}let fieldFormattedValues=storedData.formattedValue||this.data.textContent?.join(\"\\n\")||null;if(fieldFormattedValues&&this.data.comb){fieldFormattedValues=fieldFormattedValues.replaceAll(/\\s+/g,\"\");}const elementData={userValue:textContent,formattedValue:fieldFormattedValues,lastCommittedValue:null,commitKey:1,focused:false};if(this.data.multiLine){element=document.createElement(\"textarea\");element.textContent=fieldFormattedValues??textContent;if(this.data.doNotScroll){element.style.overflowY=\"hidden\";}}else{element=document.createElement(\"input\");element.type=\"text\";element.setAttribute(\"value\",fieldFormattedValues??textContent);if(this.data.doNotScroll){element.style.overflowX=\"hidden\";}}if(this.data.hasOwnCanvas){element.hidden=true;}GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=this.data.readOnly;element.name=this.data.fieldName;element.tabIndex=DEFAULT_TAB_INDEX;this._setRequired(element,this.data.required);if(maxLen){element.maxLength=maxLen;}element.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});this.setPropertyOnSiblings(element,\"value\",event.target.value,\"value\");elementData.formattedValue=null;});element.addEventListener(\"resetform\",event=>{const defaultValue=this.data.defaultFieldValue??\"\";element.value=elementData.userValue=defaultValue;elementData.formattedValue=null;});let blurListener=event=>{const{formattedValue}=elementData;if(formattedValue!==null&&formattedValue!==undefined){event.target.value=formattedValue;}event.target.scrollLeft=0;};if(this.enableScripting&&this.hasJSActions){element.addEventListener(\"focus\",event=>{if(elementData.focused){return;}const{target}=event;if(elementData.userValue){target.value=elementData.userValue;}elementData.lastCommittedValue=target.value;elementData.commitKey=1;if(!this.data.actions?.Focus){elementData.focused=true;}});element.addEventListener(\"updatefromsandbox\",jsEvent=>{this.showElementAndHideCanvas(jsEvent.target);const actions={value(event){elementData.userValue=event.detail.value??\"\";storage.setValue(id,{value:elementData.userValue.toString()});event.target.value=elementData.userValue;},formattedValue(event){const{formattedValue}=event.detail;elementData.formattedValue=formattedValue;if(formattedValue!==null&&formattedValue!==undefined&&event.target!==document.activeElement){event.target.value=formattedValue;}storage.setValue(id,{formattedValue});},selRange(event){event.target.setSelectionRange(...event.detail.selRange);},charLimit:event=>{const{charLimit}=event.detail;const{target}=event;if(charLimit===0){target.removeAttribute(\"maxLength\");return;}target.setAttribute(\"maxLength\",charLimit);let value=elementData.userValue;if(!value||value.length<=charLimit){return;}value=value.slice(0,charLimit);target.value=elementData.userValue=value;storage.setValue(id,{value});this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}});}};this._dispatchEventFromSandbox(actions,jsEvent);});element.addEventListener(\"keydown\",event=>{elementData.commitKey=1;let commitKey=-1;if(event.key===\"Escape\"){commitKey=0;}else if(event.key===\"Enter\"&&!this.data.multiLine){commitKey=2;}else if(event.key===\"Tab\"){elementData.commitKey=3;}if(commitKey===-1){return;}const{value}=event.target;if(elementData.lastCommittedValue===value){return;}elementData.lastCommittedValue=value;elementData.userValue=value;this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});});const _blurListener=blurListener;blurListener=null;element.addEventListener(\"blur\",event=>{if(!elementData.focused||!event.relatedTarget){return;}if(!this.data.actions?.Blur){elementData.focused=false;}const{value}=event.target;elementData.userValue=value;if(elementData.lastCommittedValue!==value){this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey:elementData.commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});}_blurListener(event);});if(this.data.actions?.Keystroke){element.addEventListener(\"beforeinput\",event=>{elementData.lastCommittedValue=null;const{data,target}=event;const{value,selectionStart,selectionEnd}=target;let selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case\"deleteWordBackward\":{const match=value.substring(0,selectionStart).match(/\\w*[^\\w]*$/);if(match){selStart-=match[0].length;}break;}case\"deleteWordForward\":{const match=value.substring(selectionStart).match(/^[^\\w]*\\w*/);if(match){selEnd+=match[0].length;}break;}case\"deleteContentBackward\":if(selectionStart===selectionEnd){selStart-=1;}break;case\"deleteContentForward\":if(selectionStart===selectionEnd){selEnd+=1;}break;}event.preventDefault();this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,change:data||\"\",willCommit:false,selStart,selEnd}});});}this._setEventListeners(element,elementData,[[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.value);}if(blurListener){element.addEventListener(\"blur\",blurListener);}if(this.data.comb){const fieldWidth=this.data.rect[2]-this.data.rect[0];const combWidth=fieldWidth/maxLen;element.classList.add(\"comb\");element.style.letterSpacing=`calc(${combWidth}px * var(--scale-factor) - 1ch)`;}}else{element=document.createElement(\"div\");element.textContent=this.data.fieldValue;element.style.verticalAlign=\"middle\";element.style.display=\"table-cell\";if(this.data.hasOwnCanvas){element.hidden=true;}}this._setTextStyle(element);this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!parameters.data.hasOwnCanvas});}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){const storage=this.annotationStorage;const data=this.data;const id=data.id;let value=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;if(typeof value===\"string\"){value=value!==\"Off\";storage.setValue(id,{value});}this.container.classList.add(\"buttonWidgetAnnotation\",\"checkBox\");const element=document.createElement(\"input\");GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type=\"checkbox\";element.name=data.fieldName;if(value){element.setAttribute(\"checked\",true);}element.setAttribute(\"exportValue\",data.exportValue);element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener(\"change\",event=>{const{name,checked}=event.target;for(const checkbox of this._getElementsByName(name,id)){const curChecked=checked&&checkbox.exportValue===data.exportValue;if(checkbox.domElement){checkbox.domElement.checked=curChecked;}storage.setValue(checkbox.id,{value:curChecked});}storage.setValue(id,{value:checked});});element.addEventListener(\"resetform\",event=>{const defaultValue=data.defaultFieldValue||\"Off\";event.target.checked=defaultValue===data.exportValue;});if(this.enableScripting&&this.hasJSActions){element.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value(event){event.target.checked=event.detail.value!==\"Off\";storage.setValue(id,{value:event.target.checked});}};this._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,null,[[\"change\",\"Validate\"],[\"change\",\"Action\"],[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.checked);}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){this.container.classList.add(\"buttonWidgetAnnotation\",\"radioButton\");const storage=this.annotationStorage;const data=this.data;const id=data.id;let value=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;if(typeof value===\"string\"){value=value!==data.buttonValue;storage.setValue(id,{value});}if(value){for(const radio of this._getElementsByName(data.fieldName,id)){storage.setValue(radio.id,{value:false});}}const element=document.createElement(\"input\");GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type=\"radio\";element.name=data.fieldName;if(value){element.setAttribute(\"checked\",true);}element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener(\"change\",event=>{const{name,checked}=event.target;for(const radio of this._getElementsByName(name,id)){storage.setValue(radio.id,{value:false});}storage.setValue(id,{value:checked});});element.addEventListener(\"resetform\",event=>{const defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!==null&&defaultValue!==undefined&&defaultValue===data.buttonValue;});if(this.enableScripting&&this.hasJSActions){const pdfButtonValue=data.buttonValue;element.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value:event=>{const checked=pdfButtonValue===event.detail.value;for(const radio of this._getElementsByName(event.target.name)){const curChecked=checked&&radio.id===id;if(radio.domElement){radio.domElement.checked=curChecked;}storage.setValue(radio.id,{value:curChecked});}}};this._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,null,[[\"change\",\"Validate\"],[\"change\",\"Action\"],[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.checked);}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(parameters){super(parameters,{ignoreBorder:parameters.data.hasAppearance});}render(){const container=super.render();container.classList.add(\"buttonWidgetAnnotation\",\"pushButton\");const linkElement=container.lastChild;if(this.enableScripting&&this.hasJSActions&&linkElement){this._setDefaultPropertiesFromJS(linkElement);linkElement.addEventListener(\"updatefromsandbox\",jsEvent=>{this._dispatchEventFromSandbox({},jsEvent);});}return container;}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){this.container.classList.add(\"choiceWidgetAnnotation\");const storage=this.annotationStorage;const id=this.data.id;const storedData=storage.getValue(id,{value:this.data.fieldValue});const selectElement=document.createElement(\"select\");GetElementsByNameSet.add(selectElement);selectElement.setAttribute(\"data-element-id\",id);selectElement.disabled=this.data.readOnly;this._setRequired(selectElement,this.data.required);selectElement.name=this.data.fieldName;selectElement.tabIndex=DEFAULT_TAB_INDEX;let addAnEmptyEntry=this.data.combo&&this.data.options.length>0;if(!this.data.combo){selectElement.size=this.data.options.length;if(this.data.multiSelect){selectElement.multiple=true;}}selectElement.addEventListener(\"resetform\",event=>{const defaultValue=this.data.defaultFieldValue;for(const option of selectElement.options){option.selected=option.value===defaultValue;}});for(const option of this.data.options){const optionElement=document.createElement(\"option\");optionElement.textContent=option.displayValue;optionElement.value=option.exportValue;if(storedData.value.includes(option.exportValue)){optionElement.setAttribute(\"selected\",true);addAnEmptyEntry=false;}selectElement.append(optionElement);}let removeEmptyEntry=null;if(addAnEmptyEntry){const noneOptionElement=document.createElement(\"option\");noneOptionElement.value=\" \";noneOptionElement.setAttribute(\"hidden\",true);noneOptionElement.setAttribute(\"selected\",true);selectElement.prepend(noneOptionElement);removeEmptyEntry=()=>{noneOptionElement.remove();selectElement.removeEventListener(\"input\",removeEmptyEntry);removeEmptyEntry=null;};selectElement.addEventListener(\"input\",removeEmptyEntry);}const getValue=isExport=>{const name=isExport?\"value\":\"textContent\";const{options,multiple}=selectElement;if(!multiple){return options.selectedIndex===-1?null:options[options.selectedIndex][name];}return Array.prototype.filter.call(options,option=>option.selected).map(option=>option[name]);};let selectedValues=getValue(false);const getItems=event=>{const options=event.target.options;return Array.prototype.map.call(options,option=>({displayValue:option.textContent,exportValue:option.value}));};if(this.enableScripting&&this.hasJSActions){selectElement.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value(event){removeEmptyEntry?.();const value=event.detail.value;const values=new Set(Array.isArray(value)?value:[value]);for(const option of selectElement.options){option.selected=values.has(option.value);}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);},multipleSelection(event){selectElement.multiple=true;},remove(event){const options=selectElement.options;const index=event.detail.remove;options[index].selected=false;selectElement.remove(index);if(options.length>0){const i=Array.prototype.findIndex.call(options,option=>option.selected);if(i===-1){options[0].selected=true;}}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},clear(event){while(selectElement.length!==0){selectElement.remove(0);}storage.setValue(id,{value:null,items:[]});selectedValues=getValue(false);},insert(event){const{index,displayValue,exportValue}=event.detail.insert;const selectChild=selectElement.children[index];const optionElement=document.createElement(\"option\");optionElement.textContent=displayValue;optionElement.value=exportValue;if(selectChild){selectChild.before(optionElement);}else{selectElement.append(optionElement);}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},items(event){const{items}=event.detail;while(selectElement.length!==0){selectElement.remove(0);}for(const item of items){const{displayValue,exportValue}=item;const optionElement=document.createElement(\"option\");optionElement.textContent=displayValue;optionElement.value=exportValue;selectElement.append(optionElement);}if(selectElement.options.length>0){selectElement.options[0].selected=true;}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},indices(event){const indices=new Set(event.detail.indices);for(const option of event.target.options){option.selected=indices.has(option.index);}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);},editable(event){event.target.disabled=!event.detail.editable;}};this._dispatchEventFromSandbox(actions,jsEvent);});selectElement.addEventListener(\"input\",event=>{const exportValue=getValue(true);const change=getValue(false);storage.setValue(id,{value:exportValue});event.preventDefault();this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value:selectedValues,change,changeEx:exportValue,willCommit:false,commitKey:1,keyDown:false}});});this._setEventListeners(selectElement,null,[[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"],[\"input\",\"Action\"],[\"input\",\"Validate\"]],event=>event.target.value);}else{selectElement.addEventListener(\"input\",function(event){storage.setValue(id,{value:getValue(true)});});}if(this.data.combo){this._setTextStyle(selectElement);}else{}this._setBackgroundColor(selectElement);this._setDefaultPropertiesFromJS(selectElement);this.container.append(selectElement);return this.container;}}class PopupAnnotationElement extends AnnotationElement{constructor(parameters){const{data,elements}=parameters;super(parameters,{isRenderable:AnnotationElement._hasPopupData(data)});this.elements=elements;}render(){this.container.classList.add(\"popupAnnotation\");const popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open});const elementIds=[];for(const element of this.elements){element.popup=popup;elementIds.push(element.data.id);element.addHighlightArea();}this.container.setAttribute(\"aria-controls\",elementIds.map(id=>`${util.AnnotationPrefix}${id}`).join(\",\"));return this.container;}}var _boundKeyDown=/*#__PURE__*/new WeakMap();var _boundHide=/*#__PURE__*/new WeakMap();var _boundShow=/*#__PURE__*/new WeakMap();var _boundToggle=/*#__PURE__*/new WeakMap();var _color=/*#__PURE__*/new WeakMap();var _container=/*#__PURE__*/new WeakMap();var _contentsObj=/*#__PURE__*/new WeakMap();var _dateObj=/*#__PURE__*/new WeakMap();var _elements=/*#__PURE__*/new WeakMap();var _parent=/*#__PURE__*/new WeakMap();var _parentRect=/*#__PURE__*/new WeakMap();var _pinned=/*#__PURE__*/new WeakMap();var _popup=/*#__PURE__*/new WeakMap();var _rect=/*#__PURE__*/new WeakMap();var _richText=/*#__PURE__*/new WeakMap();var _titleObj=/*#__PURE__*/new WeakMap();var _wasVisible=/*#__PURE__*/new WeakMap();var _PopupElement_brand=/*#__PURE__*/new WeakSet();class PopupElement{constructor(_ref11){let{container,color,elements,titleObj,modificationDate,contentsObj,richText,parent,rect,parentRect,open}=_ref11;_classPrivateMethodInitSpec(this,_PopupElement_brand);_classPrivateFieldInitSpec(this,_boundKeyDown,_assertClassBrand(_PopupElement_brand,this,_keyDown).bind(this));_classPrivateFieldInitSpec(this,_boundHide,_assertClassBrand(_PopupElement_brand,this,_hide).bind(this));_classPrivateFieldInitSpec(this,_boundShow,_assertClassBrand(_PopupElement_brand,this,_show).bind(this));_classPrivateFieldInitSpec(this,_boundToggle,_assertClassBrand(_PopupElement_brand,this,_toggle).bind(this));_classPrivateFieldInitSpec(this,_color,null);_classPrivateFieldInitSpec(this,_container,null);_classPrivateFieldInitSpec(this,_contentsObj,null);_classPrivateFieldInitSpec(this,_dateObj,null);_classPrivateFieldInitSpec(this,_elements,null);_classPrivateFieldInitSpec(this,_parent,null);_classPrivateFieldInitSpec(this,_parentRect,null);_classPrivateFieldInitSpec(this,_pinned,false);_classPrivateFieldInitSpec(this,_popup,null);_classPrivateFieldInitSpec(this,_rect,null);_classPrivateFieldInitSpec(this,_richText,null);_classPrivateFieldInitSpec(this,_titleObj,null);_classPrivateFieldInitSpec(this,_wasVisible,false);_classPrivateFieldSet(_container,this,container);_classPrivateFieldSet(_titleObj,this,titleObj);_classPrivateFieldSet(_contentsObj,this,contentsObj);_classPrivateFieldSet(_richText,this,richText);_classPrivateFieldSet(_parent,this,parent);_classPrivateFieldSet(_color,this,color);_classPrivateFieldSet(_rect,this,rect);_classPrivateFieldSet(_parentRect,this,parentRect);_classPrivateFieldSet(_elements,this,elements);_classPrivateFieldSet(_dateObj,this,display_utils.PDFDateString.toDateObject(modificationDate));this.trigger=elements.flatMap(e=>e.getElementsToTriggerPopup());for(const element of this.trigger){element.addEventListener(\"click\",_classPrivateFieldGet(_boundToggle,this));element.addEventListener(\"mouseenter\",_classPrivateFieldGet(_boundShow,this));element.addEventListener(\"mouseleave\",_classPrivateFieldGet(_boundHide,this));element.classList.add(\"popupTriggerArea\");}for(const element of elements){element.container?.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown,this));}_classPrivateFieldGet(_container,this).hidden=true;if(open){_assertClassBrand(_PopupElement_brand,this,_toggle).call(this);}}render(){if(_classPrivateFieldGet(_popup,this)){return;}const{page:{view},viewport:{rawDims:{pageWidth,pageHeight,pageX,pageY}}}=_classPrivateFieldGet(_parent,this);const popup=_classPrivateFieldSet(_popup,this,document.createElement(\"div\"));popup.className=\"popup\";if(_classPrivateFieldGet(_color,this)){const baseColor=popup.style.outlineColor=util.Util.makeHexColor(..._classPrivateFieldGet(_color,this));if(CSS.supports(\"background-color\",\"color-mix(in srgb, red 30%, white)\")){popup.style.backgroundColor=`color-mix(in srgb, ${baseColor} 30%, white)`;}else{const BACKGROUND_ENLIGHT=0.7;popup.style.backgroundColor=util.Util.makeHexColor(..._classPrivateFieldGet(_color,this).map(c=>Math.floor(BACKGROUND_ENLIGHT*(255-c)+c)));}}const header=document.createElement(\"span\");header.className=\"header\";const title=document.createElement(\"h1\");header.append(title);({dir:title.dir,str:title.textContent}=_classPrivateFieldGet(_titleObj,this));popup.append(header);if(_classPrivateFieldGet(_dateObj,this)){const modificationDate=document.createElement(\"span\");modificationDate.classList.add(\"popupDate\");modificationDate.setAttribute(\"data-l10n-id\",\"pdfjs-annotation-date-string\");modificationDate.setAttribute(\"data-l10n-args\",JSON.stringify({date:_classPrivateFieldGet(_dateObj,this).toLocaleDateString(),time:_classPrivateFieldGet(_dateObj,this).toLocaleTimeString()}));header.append(modificationDate);}const contentsObj=_classPrivateFieldGet(_contentsObj,this);const richText=_classPrivateFieldGet(_richText,this);if(richText?.str&&(!contentsObj?.str||contentsObj.str===richText.str)){xfa_layer.XfaLayer.render({xfaHtml:richText.html,intent:\"richText\",div:popup});popup.lastChild.classList.add(\"richText\",\"popupContent\");}else{const contents=this._formatContents(contentsObj);popup.append(contents);}let useParentRect=!!_classPrivateFieldGet(_parentRect,this);let rect=useParentRect?_classPrivateFieldGet(_parentRect,this):_classPrivateFieldGet(_rect,this);for(const element of _classPrivateFieldGet(_elements,this)){if(!rect||util.Util.intersect(element.data.rect,rect)!==null){rect=element.data.rect;useParentRect=true;break;}}const normalizedRect=util.Util.normalizeRect([rect[0],view[3]-rect[1]+view[1],rect[2],view[3]-rect[3]+view[1]]);const HORIZONTAL_SPACE_AFTER_ANNOTATION=5;const parentWidth=useParentRect?rect[2]-rect[0]+HORIZONTAL_SPACE_AFTER_ANNOTATION:0;const popupLeft=normalizedRect[0]+parentWidth;const popupTop=normalizedRect[1];const{style}=_classPrivateFieldGet(_container,this);style.left=`${100*(popupLeft-pageX)/pageWidth}%`;style.top=`${100*(popupTop-pageY)/pageHeight}%`;_classPrivateFieldGet(_container,this).append(popup);}_formatContents(_ref12){let{str,dir}=_ref12;const p=document.createElement(\"p\");p.classList.add(\"popupContent\");p.dir=dir;const lines=str.split(/(?:\\r\\n?|\\n)/);for(let i=0,ii=lines.length;i<ii;++i){const line=lines[i];p.append(document.createTextNode(line));if(i<ii-1){p.append(document.createElement(\"br\"));}}return p;}forceHide(){_classPrivateFieldSet(_wasVisible,this,this.isVisible);if(!_classPrivateFieldGet(_wasVisible,this)){return;}_classPrivateFieldGet(_container,this).hidden=true;}maybeShow(){if(!_classPrivateFieldGet(_wasVisible,this)){return;}_classPrivateFieldSet(_wasVisible,this,false);_classPrivateFieldGet(_container,this).hidden=false;}get isVisible(){return _classPrivateFieldGet(_container,this).hidden===false;}}function _keyDown(event){if(event.altKey||event.shiftKey||event.ctrlKey||event.metaKey){return;}if(event.key===\"Enter\"||event.key===\"Escape\"&&_classPrivateFieldGet(_pinned,this)){_assertClassBrand(_PopupElement_brand,this,_toggle).call(this);}}function _toggle(){_classPrivateFieldSet(_pinned,this,!_classPrivateFieldGet(_pinned,this));if(_classPrivateFieldGet(_pinned,this)){_assertClassBrand(_PopupElement_brand,this,_show).call(this);_classPrivateFieldGet(_container,this).addEventListener(\"click\",_classPrivateFieldGet(_boundToggle,this));_classPrivateFieldGet(_container,this).addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown,this));}else{_assertClassBrand(_PopupElement_brand,this,_hide).call(this);_classPrivateFieldGet(_container,this).removeEventListener(\"click\",_classPrivateFieldGet(_boundToggle,this));_classPrivateFieldGet(_container,this).removeEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown,this));}}function _show(){if(!_classPrivateFieldGet(_popup,this)){this.render();}if(!this.isVisible){_classPrivateFieldGet(_container,this).hidden=false;_classPrivateFieldGet(_container,this).style.zIndex=parseInt(_classPrivateFieldGet(_container,this).style.zIndex)+1000;}else if(_classPrivateFieldGet(_pinned,this)){_classPrivateFieldGet(_container,this).classList.add(\"focused\");}}function _hide(){_classPrivateFieldGet(_container,this).classList.remove(\"focused\");if(_classPrivateFieldGet(_pinned,this)||!this.isVisible){return;}_classPrivateFieldGet(_container,this).hidden=true;_classPrivateFieldGet(_container,this).style.zIndex=parseInt(_classPrivateFieldGet(_container,this).style.zIndex)-1000;}class FreeTextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});this.textContent=parameters.data.textContent;this.textPosition=parameters.data.textPosition;this.annotationEditorType=util.AnnotationEditorType.FREETEXT;}render(){this.container.classList.add(\"freeTextAnnotation\");if(this.textContent){const content=document.createElement(\"div\");content.classList.add(\"annotationTextContent\");content.setAttribute(\"role\",\"comment\");for(const line of this.textContent){const lineSpan=document.createElement(\"span\");lineSpan.textContent=line;content.append(lineSpan);}this.container.append(content);}if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this._editOnDoubleClick();return this.container;}get _isEditable(){return this.data.hasOwnCanvas;}}var _line=/*#__PURE__*/new WeakMap();class LineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_line,null);}render(){this.container.classList.add(\"lineAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const line=_classPrivateFieldSet(_line,this,this.svgFactory.createElement(\"svg:line\"));line.setAttribute(\"x1\",data.rect[2]-data.lineCoordinates[0]);line.setAttribute(\"y1\",data.rect[3]-data.lineCoordinates[1]);line.setAttribute(\"x2\",data.rect[2]-data.lineCoordinates[2]);line.setAttribute(\"y2\",data.rect[3]-data.lineCoordinates[3]);line.setAttribute(\"stroke-width\",data.borderStyle.width||1);line.setAttribute(\"stroke\",\"transparent\");line.setAttribute(\"fill\",\"transparent\");svg.append(line);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_line,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}var _square=/*#__PURE__*/new WeakMap();class SquareAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_square,null);}render(){this.container.classList.add(\"squareAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const borderWidth=data.borderStyle.width;const square=_classPrivateFieldSet(_square,this,this.svgFactory.createElement(\"svg:rect\"));square.setAttribute(\"x\",borderWidth/2);square.setAttribute(\"y\",borderWidth/2);square.setAttribute(\"width\",width-borderWidth);square.setAttribute(\"height\",height-borderWidth);square.setAttribute(\"stroke-width\",borderWidth||1);square.setAttribute(\"stroke\",\"transparent\");square.setAttribute(\"fill\",\"transparent\");svg.append(square);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_square,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}var _circle=/*#__PURE__*/new WeakMap();class CircleAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_circle,null);}render(){this.container.classList.add(\"circleAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const borderWidth=data.borderStyle.width;const circle=_classPrivateFieldSet(_circle,this,this.svgFactory.createElement(\"svg:ellipse\"));circle.setAttribute(\"cx\",width/2);circle.setAttribute(\"cy\",height/2);circle.setAttribute(\"rx\",width/2-borderWidth/2);circle.setAttribute(\"ry\",height/2-borderWidth/2);circle.setAttribute(\"stroke-width\",borderWidth||1);circle.setAttribute(\"stroke\",\"transparent\");circle.setAttribute(\"fill\",\"transparent\");svg.append(circle);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_circle,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}var _polyline=/*#__PURE__*/new WeakMap();class PolylineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_polyline,null);this.containerClassName=\"polylineAnnotation\";this.svgElementName=\"svg:polyline\";}render(){this.container.classList.add(this.containerClassName);const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);let points=[];for(const coordinate of data.vertices){const x=coordinate.x-data.rect[0];const y=data.rect[3]-coordinate.y;points.push(x+\",\"+y);}points=points.join(\" \");const polyline=_classPrivateFieldSet(_polyline,this,this.svgFactory.createElement(this.svgElementName));polyline.setAttribute(\"points\",points);polyline.setAttribute(\"stroke-width\",data.borderStyle.width||1);polyline.setAttribute(\"stroke\",\"transparent\");polyline.setAttribute(\"fill\",\"transparent\");svg.append(polyline);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_polyline,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(parameters){super(parameters);this.containerClassName=\"polygonAnnotation\";this.svgElementName=\"svg:polygon\";}}class CaretAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});}render(){this.container.classList.add(\"caretAnnotation\");if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}}var _polylines=/*#__PURE__*/new WeakMap();class InkAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_polylines,[]);this.containerClassName=\"inkAnnotation\";this.svgElementName=\"svg:polyline\";this.annotationEditorType=util.AnnotationEditorType.INK;}render(){this.container.classList.add(this.containerClassName);const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);for(const inkList of data.inkLists){let points=[];for(const coordinate of inkList){const x=coordinate.x-data.rect[0];const y=data.rect[3]-coordinate.y;points.push(`${x},${y}`);}points=points.join(\" \");const polyline=this.svgFactory.createElement(this.svgElementName);_classPrivateFieldGet(_polylines,this).push(polyline);polyline.setAttribute(\"points\",points);polyline.setAttribute(\"stroke-width\",data.borderStyle.width||1);polyline.setAttribute(\"stroke\",\"transparent\");polyline.setAttribute(\"fill\",\"transparent\");if(!data.popupRef&&this.hasPopupData){this._createPopup();}svg.append(polyline);}this.container.append(svg);return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_polylines,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}class HighlightAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add(\"highlightAnnotation\");return this.container;}}class UnderlineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add(\"underlineAnnotation\");return this.container;}}class SquigglyAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add(\"squigglyAnnotation\");return this.container;}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add(\"strikeoutAnnotation\");return this.container;}}class StampAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});}render(){this.container.classList.add(\"stampAnnotation\");if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}}var _trigger=/*#__PURE__*/new WeakMap();var _FileAttachmentAnnotationElement_brand=/*#__PURE__*/new WeakSet();class FileAttachmentAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true});_classPrivateMethodInitSpec(this,_FileAttachmentAnnotationElement_brand);_classPrivateFieldInitSpec(this,_trigger,null);const{filename,content}=this.data.file;this.filename=(0,display_utils.getFilenameFromUrl)(filename,true);this.content=content;this.linkService.eventBus?.dispatch(\"fileattachmentannotation\",{source:this,filename,content});}render(){this.container.classList.add(\"fileAttachmentAnnotation\");const{container,data}=this;let trigger;if(data.hasAppearance||data.fillAlpha===0){trigger=document.createElement(\"div\");}else{trigger=document.createElement(\"img\");trigger.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name)?\"paperclip\":\"pushpin\"}.svg`;if(data.fillAlpha&&data.fillAlpha<1){trigger.style=`filter: opacity(${Math.round(data.fillAlpha*100)}%);`;}}trigger.addEventListener(\"dblclick\",_assertClassBrand(_FileAttachmentAnnotationElement_brand,this,_download).bind(this));_classPrivateFieldSet(_trigger,this,trigger);const{isMac}=util.FeatureTest.platform;container.addEventListener(\"keydown\",evt=>{if(evt.key===\"Enter\"&&(isMac?evt.metaKey:evt.ctrlKey)){_assertClassBrand(_FileAttachmentAnnotationElement_brand,this,_download).call(this);}});if(!data.popupRef&&this.hasPopupData){this._createPopup();}else{trigger.classList.add(\"popupTriggerArea\");}container.append(trigger);return container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_trigger,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}function _download(){this.downloadManager?.openOrDownloadData(this.content,this.filename);}var _accessibilityManager=/*#__PURE__*/new WeakMap();var _annotationCanvasMap=/*#__PURE__*/new WeakMap();var _editableAnnotations=/*#__PURE__*/new WeakMap();var _AnnotationLayer_brand=/*#__PURE__*/new WeakSet();class AnnotationLayer{constructor(_ref13){let{div,accessibilityManager,annotationCanvasMap,annotationEditorUIManager,page,viewport}=_ref13;_classPrivateMethodInitSpec(this,_AnnotationLayer_brand);_classPrivateFieldInitSpec(this,_accessibilityManager,null);_classPrivateFieldInitSpec(this,_annotationCanvasMap,null);_classPrivateFieldInitSpec(this,_editableAnnotations,new Map());this.div=div;_classPrivateFieldSet(_accessibilityManager,this,accessibilityManager);_classPrivateFieldSet(_annotationCanvasMap,this,annotationCanvasMap);this.page=page;this.viewport=viewport;this.zIndex=0;this._annotationEditorUIManager=annotationEditorUIManager;}async render(params){const{annotations}=params;const layer=this.div;(0,display_utils.setLayerDimensions)(layer,this.viewport);const popupToElements=new Map();const elementParams={data:null,layer,linkService:params.linkService,downloadManager:params.downloadManager,imageResourcesPath:params.imageResourcesPath||\"\",renderForms:params.renderForms!==false,svgFactory:new display_utils.DOMSVGFactory(),annotationStorage:params.annotationStorage||new annotation_storage.AnnotationStorage(),enableScripting:params.enableScripting===true,hasJSActions:params.hasJSActions,fieldObjects:params.fieldObjects,parent:this,elements:null};for(const data of annotations){if(data.noHTML){continue;}const isPopupAnnotation=data.annotationType===util.AnnotationType.POPUP;if(!isPopupAnnotation){const{width,height}=getRectDims(data.rect);if(width<=0||height<=0){continue;}}else{const elements=popupToElements.get(data.id);if(!elements){continue;}elementParams.elements=elements;}elementParams.data=data;const element=AnnotationElementFactory.create(elementParams);if(!element.isRenderable){continue;}if(!isPopupAnnotation&&data.popupRef){const elements=popupToElements.get(data.popupRef);if(!elements){popupToElements.set(data.popupRef,[element]);}else{elements.push(element);}}const rendered=element.render();if(data.hidden){rendered.style.visibility=\"hidden\";}_assertClassBrand(_AnnotationLayer_brand,this,_appendElement).call(this,rendered,data.id);if(element.annotationEditorType>0){_classPrivateFieldGet(_editableAnnotations,this).set(element.data.id,element);this._annotationEditorUIManager?.renderAnnotationElement(element);}}_assertClassBrand(_AnnotationLayer_brand,this,_setAnnotationCanvasMap).call(this);}update(_ref14){let{viewport}=_ref14;const layer=this.div;this.viewport=viewport;(0,display_utils.setLayerDimensions)(layer,{rotation:viewport.rotation});_assertClassBrand(_AnnotationLayer_brand,this,_setAnnotationCanvasMap).call(this);layer.hidden=false;}getEditableAnnotations(){return Array.from(_classPrivateFieldGet(_editableAnnotations,this).values());}getEditableAnnotation(id){return _classPrivateFieldGet(_editableAnnotations,this).get(id);}}/***/function _appendElement(element,id){const contentElement=element.firstChild||element;contentElement.id=`${util.AnnotationPrefix}${id}`;this.div.append(element);_classPrivateFieldGet(_accessibilityManager,this)?.moveElementInDOM(this.div,element,contentElement,false);}function _setAnnotationCanvasMap(){if(!_classPrivateFieldGet(_annotationCanvasMap,this)){return;}const layer=this.div;for(const[id,canvas]of _classPrivateFieldGet(_annotationCanvasMap,this)){const element=layer.querySelector(`[data-annotation-id=\"${id}\"]`);if(!element){continue;}canvas.className=\"annotationContent\";const{firstChild}=element;if(!firstChild){element.append(canvas);}else if(firstChild.nodeName===\"CANVAS\"){firstChild.replaceWith(canvas);}else if(!firstChild.classList.contains(\"annotationContent\")){firstChild.before(canvas);}else{firstChild.after(canvas);}}_classPrivateFieldGet(_annotationCanvasMap,this).clear();}}),/***/792:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */AnnotationStorage:()=>(/* binding */AnnotationStorage),/* harmony export */PrintAnnotationStorage:()=>(/* binding */PrintAnnotationStorage),/* harmony export */SerializableEmpty:()=>(/* binding */SerializableEmpty)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(310);/* harmony import */var _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(651);const SerializableEmpty=Object.freeze({map:null,hash:\"\",transfer:undefined});var _modified=/*#__PURE__*/new WeakMap();var _storage=/*#__PURE__*/new WeakMap();var _AnnotationStorage_brand=/*#__PURE__*/new WeakSet();class AnnotationStorage{constructor(){_classPrivateMethodInitSpec(this,_AnnotationStorage_brand);_classPrivateFieldInitSpec(this,_modified,false);_classPrivateFieldInitSpec(this,_storage,new Map());this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null;}getValue(key,defaultValue){const value=_classPrivateFieldGet(_storage,this).get(key);if(value===undefined){return defaultValue;}return Object.assign(defaultValue,value);}getRawValue(key){return _classPrivateFieldGet(_storage,this).get(key);}remove(key){_classPrivateFieldGet(_storage,this).delete(key);if(_classPrivateFieldGet(_storage,this).size===0){this.resetModified();}if(typeof this.onAnnotationEditor===\"function\"){for(const value of _classPrivateFieldGet(_storage,this).values()){if(value instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor){return;}}this.onAnnotationEditor(null);}}setValue(key,value){const obj=_classPrivateFieldGet(_storage,this).get(key);let modified=false;if(obj!==undefined){for(const[entry,val]of Object.entries(value)){if(obj[entry]!==val){modified=true;obj[entry]=val;}}}else{modified=true;_classPrivateFieldGet(_storage,this).set(key,value);}if(modified){_assertClassBrand(_AnnotationStorage_brand,this,_setModified).call(this);}if(value instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor&&typeof this.onAnnotationEditor===\"function\"){this.onAnnotationEditor(value.constructor._type);}}has(key){return _classPrivateFieldGet(_storage,this).has(key);}getAll(){return _classPrivateFieldGet(_storage,this).size>0?(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(_storage,this)):null;}setAll(obj){for(const[key,val]of Object.entries(obj)){this.setValue(key,val);}}get size(){return _classPrivateFieldGet(_storage,this).size;}resetModified(){if(_classPrivateFieldGet(_modified,this)){_classPrivateFieldSet(_modified,this,false);if(typeof this.onResetModified===\"function\"){this.onResetModified();}}}get print(){return new PrintAnnotationStorage(this);}get serializable(){if(_classPrivateFieldGet(_storage,this).size===0){return SerializableEmpty;}const map=new Map(),hash=new _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__.MurmurHash3_64(),transfer=[];const context=Object.create(null);let hasBitmap=false;for(const[key,val]of _classPrivateFieldGet(_storage,this)){const serialized=val instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor?val.serialize(false,context):val;if(serialized){map.set(key,serialized);hash.update(`${key}:${JSON.stringify(serialized)}`);hasBitmap||=!!serialized.bitmap;}}if(hasBitmap){for(const value of map.values()){if(value.bitmap){transfer.push(value.bitmap);}}}return map.size>0?{map,hash:hash.hexdigest(),transfer}:SerializableEmpty;}get editorStats(){let stats=null;const typeToEditor=new Map();for(const value of _classPrivateFieldGet(_storage,this).values()){if(!(value instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor)){continue;}const editorStats=value.telemetryFinalData;if(!editorStats){continue;}const{type}=editorStats;if(!typeToEditor.has(type)){typeToEditor.set(type,Object.getPrototypeOf(value).constructor);}stats||=Object.create(null);const map=stats[type]||=new Map();for(const[key,val]of Object.entries(editorStats)){if(key===\"type\"){continue;}let counters=map.get(key);if(!counters){counters=new Map();map.set(key,counters);}const count=counters.get(val)??0;counters.set(val,count+1);}}for(const[type,editor]of typeToEditor){stats[type]=editor.computeTelemetryFinalData(stats[type]);}return stats;}}function _setModified(){if(!_classPrivateFieldGet(_modified,this)){_classPrivateFieldSet(_modified,this,true);if(typeof this.onSetModified===\"function\"){this.onSetModified();}}}var _serializable=/*#__PURE__*/new WeakMap();class PrintAnnotationStorage extends AnnotationStorage{constructor(parent){super();_classPrivateFieldInitSpec(this,_serializable,void 0);const{map,hash,transfer}=parent.serializable;const clone=structuredClone(map,transfer?{transfer}:null);_classPrivateFieldSet(_serializable,this,{map:clone,hash,transfer});}get print(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Should not call PrintAnnotationStorage.print\");}get serializable(){return _classPrivateFieldGet(_serializable,this);}}/***/}),/***/831:(/***/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFDataRangeTransport:()=>(/* binding */PDFDataRangeTransport),/* harmony export */PDFWorker:()=>(/* binding */PDFWorker),/* harmony export */build:()=>(/* binding */build),/* harmony export */getDocument:()=>(/* binding */getDocument),/* harmony export */version:()=>(/* binding */version)/* harmony export */});/* unused harmony exports DefaultCanvasFactory, DefaultCMapReaderFactory, DefaultFilterFactory, DefaultStandardFontDataFactory, LoopbackPort, PDFDocumentLoadingTask, PDFDocumentProxy, PDFPageProxy, PDFWorkerUtil, RenderTask */ /* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(792);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(419);/* harmony import */var _font_loader_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10);/* harmony import */var display_node_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(573);/* harmony import */var _canvas_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(923);/* harmony import */var _text_layer_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(814);/* harmony import */var _worker_options_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(164);/* harmony import */var _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(178);/* harmony import */var _metadata_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(62);/* harmony import */var _optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(626);/* harmony import */var _transport_stream_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(585);/* harmony import */var display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(94);/* harmony import */var display_network__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(457);/* harmony import */var display_node_stream__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(786);/* harmony import */var _xfa_text_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(50);var __webpack_async_dependencies__=__webpack_handle_async_dependencies__([display_node_utils__WEBPACK_IMPORTED_MODULE_4__,display_node_stream__WEBPACK_IMPORTED_MODULE_13__]);[display_node_utils__WEBPACK_IMPORTED_MODULE_4__,display_node_stream__WEBPACK_IMPORTED_MODULE_13__]=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;const DEFAULT_RANGE_CHUNK_SIZE=65536;const RENDERING_CANCELLED_TIMEOUT=100;const DELAYED_CLEANUP_TIMEOUT=5000;const DefaultCanvasFactory=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS?display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeCanvasFactory:_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCanvasFactory;const DefaultCMapReaderFactory=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS?display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeCMapReaderFactory:_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCMapReaderFactory;const DefaultFilterFactory=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS?display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeFilterFactory:_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMFilterFactory;const DefaultStandardFontDataFactory=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS?display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeStandardFontDataFactory:_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMStandardFontDataFactory;function getDocument(src){if(typeof src===\"string\"||src instanceof URL){src={url:src};}else if(src instanceof ArrayBuffer||ArrayBuffer.isView(src)){src={data:src};}if(typeof src!==\"object\"){throw new Error(\"Invalid parameter in getDocument, need parameter object.\");}if(!src.url&&!src.data&&!src.range){throw new Error(\"Invalid parameter object: need either .data, .range or .url\");}const task=new PDFDocumentLoadingTask();const{docId}=task;const url=src.url?getUrlProp(src.url):null;const data=src.data?getDataProp(src.data):null;const httpHeaders=src.httpHeaders||null;const withCredentials=src.withCredentials===true;const password=src.password??null;const rangeTransport=src.range instanceof PDFDataRangeTransport?src.range:null;const rangeChunkSize=Number.isInteger(src.rangeChunkSize)&&src.rangeChunkSize>0?src.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let worker=src.worker instanceof PDFWorker?src.worker:null;const verbosity=src.verbosity;const docBaseUrl=typeof src.docBaseUrl===\"string\"&&!(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isDataScheme)(src.docBaseUrl)?src.docBaseUrl:null;const cMapUrl=typeof src.cMapUrl===\"string\"?src.cMapUrl:null;const cMapPacked=src.cMapPacked!==false;const CMapReaderFactory=src.CMapReaderFactory||DefaultCMapReaderFactory;const standardFontDataUrl=typeof src.standardFontDataUrl===\"string\"?src.standardFontDataUrl:null;const StandardFontDataFactory=src.StandardFontDataFactory||DefaultStandardFontDataFactory;const ignoreErrors=src.stopAtErrors!==true;const maxImageSize=Number.isInteger(src.maxImageSize)&&src.maxImageSize>-1?src.maxImageSize:-1;const isEvalSupported=src.isEvalSupported!==false;const isOffscreenCanvasSupported=typeof src.isOffscreenCanvasSupported===\"boolean\"?src.isOffscreenCanvasSupported:!_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS;const canvasMaxAreaInBytes=Number.isInteger(src.canvasMaxAreaInBytes)?src.canvasMaxAreaInBytes:-1;const disableFontFace=typeof src.disableFontFace===\"boolean\"?src.disableFontFace:_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS;const fontExtraProperties=src.fontExtraProperties===true;const enableXfa=src.enableXfa===true;const ownerDocument=src.ownerDocument||globalThis.document;const disableRange=src.disableRange===true;const disableStream=src.disableStream===true;const disableAutoFetch=src.disableAutoFetch===true;const pdfBug=src.pdfBug===true;const length=rangeTransport?rangeTransport.length:src.length??NaN;const useSystemFonts=typeof src.useSystemFonts===\"boolean\"?src.useSystemFonts:!_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS&&!disableFontFace;const useWorkerFetch=typeof src.useWorkerFetch===\"boolean\"?src.useWorkerFetch:CMapReaderFactory===_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCMapReaderFactory&&StandardFontDataFactory===_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMStandardFontDataFactory&&cMapUrl&&standardFontDataUrl&&(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(cMapUrl,document.baseURI)&&(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(standardFontDataUrl,document.baseURI);const canvasFactory=src.canvasFactory||new DefaultCanvasFactory({ownerDocument});const filterFactory=src.filterFactory||new DefaultFilterFactory({docId,ownerDocument});const styleElement=null;(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.setVerbosityLevel)(verbosity);const transportFactory={canvasFactory,filterFactory};if(!useWorkerFetch){transportFactory.cMapReaderFactory=new CMapReaderFactory({baseUrl:cMapUrl,isCompressed:cMapPacked});transportFactory.standardFontDataFactory=new StandardFontDataFactory({baseUrl:standardFontDataUrl});}if(!worker){const workerParams={verbosity,port:_worker_options_js__WEBPACK_IMPORTED_MODULE_14__.GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams);task._worker=worker;}const fetchDocParams={docId,apiVersion:\"4.2.67\",data,password,disableAutoFetch,rangeChunkSize,length,docBaseUrl,enableXfa,evaluatorOptions:{maxImageSize,disableFontFace,ignoreErrors,isEvalSupported,isOffscreenCanvasSupported,canvasMaxAreaInBytes,fontExtraProperties,useSystemFonts,cMapUrl:useWorkerFetch?cMapUrl:null,standardFontDataUrl:useWorkerFetch?standardFontDataUrl:null}};const transportParams={ignoreErrors,disableFontFace,fontExtraProperties,enableXfa,ownerDocument,disableAutoFetch,pdfBug,styleElement};worker.promise.then(function(){if(task.destroyed){throw new Error(\"Loading aborted\");}const workerIdPromise=_fetchDocument(worker,fetchDocParams);const networkStreamPromise=new Promise(function(resolve){let networkStream;if(rangeTransport){networkStream=new _transport_stream_js__WEBPACK_IMPORTED_MODULE_10__.PDFDataTransportStream(rangeTransport,{disableRange,disableStream});}else if(!data){const createPDFNetworkStream=params=>{if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS){const isFetchSupported=function(){return typeof fetch!==\"undefined\"&&typeof Response!==\"undefined\"&&\"body\"in Response.prototype;};return isFetchSupported()&&(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(params.url)?new display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__.PDFFetchStream(params):new display_node_stream__WEBPACK_IMPORTED_MODULE_13__.PDFNodeStream(params);}return(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(params.url)?new display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__.PDFFetchStream(params):new display_network__WEBPACK_IMPORTED_MODULE_12__.PDFNetworkStream(params);};networkStream=createPDFNetworkStream({url,length,httpHeaders,withCredentials,rangeChunkSize,disableRange,disableStream});}resolve(networkStream);});return Promise.all([workerIdPromise,networkStreamPromise]).then(function(_ref15){let[workerId,networkStream]=_ref15;if(task.destroyed){throw new Error(\"Loading aborted\");}const messageHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(docId,workerId,worker.port);const transport=new WorkerTransport(messageHandler,task,networkStream,transportParams,transportFactory);task._transport=transport;messageHandler.send(\"Ready\",null);});}).catch(task._capability.reject);return task;}async function _fetchDocument(worker,source){if(worker.destroyed){throw new Error(\"Worker was destroyed\");}const workerId=await worker.messageHandler.sendWithPromise(\"GetDocRequest\",source,source.data?[source.data.buffer]:null);if(worker.destroyed){throw new Error(\"Worker was destroyed\");}return workerId;}function getUrlProp(val){if(val instanceof URL){return val.href;}try{return new URL(val,window.location).href;}catch{if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS&&typeof val===\"string\"){return val;}}throw new Error(\"Invalid PDF url data: \"+\"either string or URL-object is expected in the url property.\");}function getDataProp(val){if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS&&typeof Buffer!==\"undefined\"&&val instanceof Buffer){throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");}if(val instanceof Uint8Array&&val.byteLength===val.buffer.byteLength){return val;}if(typeof val===\"string\"){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.stringToBytes)(val);}if(val instanceof ArrayBuffer||ArrayBuffer.isView(val)||typeof val===\"object\"&&!isNaN(val?.length)){return new Uint8Array(val);}throw new Error(\"Invalid PDF binary data: either TypedArray, \"+\"string, or array-like object is expected in the data property.\");}function isRefProxy(ref){return typeof ref===\"object\"&&Number.isInteger(ref?.num)&&ref.num>=0&&Number.isInteger(ref?.gen)&&ref.gen>=0;}class PDFDocumentLoadingTask{constructor(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;this._capability=Promise.withResolvers();this._transport=null;this._worker=null;this.docId=`d${(_docId._=(_PDFDocumentLoadingTa=_docId._,_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa),_PDFDocumentLoadingTa2)}`;this.destroyed=false;this.onPassword=null;this.onProgress=null;}get promise(){return this._capability.promise;}async destroy(){this.destroyed=true;try{if(this._worker?.port){this._worker._pendingDestroy=true;}await this._transport?.destroy();}catch(ex){if(this._worker?.port){delete this._worker._pendingDestroy;}throw ex;}this._transport=null;if(this._worker){this._worker.destroy();this._worker=null;}}}var _docId={_:0};class PDFDataRangeTransport{constructor(length,initialData){let progressiveDone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let contentDispositionFilename=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;this.length=length;this.initialData=initialData;this.progressiveDone=progressiveDone;this.contentDispositionFilename=contentDispositionFilename;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=Promise.withResolvers();}addRangeListener(listener){this._rangeListeners.push(listener);}addProgressListener(listener){this._progressListeners.push(listener);}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener);}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener);}onDataRange(begin,chunk){for(const listener of this._rangeListeners){listener(begin,chunk);}}onDataProgress(loaded,total){this._readyCapability.promise.then(()=>{for(const listener of this._progressListeners){listener(loaded,total);}});}onDataProgressiveRead(chunk){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveReadListeners){listener(chunk);}});}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveDoneListeners){listener();}});}transportReady(){this._readyCapability.resolve();}requestDataRange(begin,end){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method PDFDataRangeTransport.requestDataRange\");}abort(){}}class PDFDocumentProxy{constructor(pdfInfo,transport){this._pdfInfo=pdfInfo;this._transport=transport;}get annotationStorage(){return this._transport.annotationStorage;}get filterFactory(){return this._transport.filterFactory;}get numPages(){return this._pdfInfo.numPages;}get fingerprints(){return this._pdfInfo.fingerprints;}get isPureXfa(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"isPureXfa\",!!this._transport._htmlForXfa);}get allXfaHtml(){return this._transport._htmlForXfa;}getPage(pageNumber){return this._transport.getPage(pageNumber);}getPageIndex(ref){return this._transport.getPageIndex(ref);}getDestinations(){return this._transport.getDestinations();}getDestination(id){return this._transport.getDestination(id);}getPageLabels(){return this._transport.getPageLabels();}getPageLayout(){return this._transport.getPageLayout();}getPageMode(){return this._transport.getPageMode();}getViewerPreferences(){return this._transport.getViewerPreferences();}getOpenAction(){return this._transport.getOpenAction();}getAttachments(){return this._transport.getAttachments();}getJSActions(){return this._transport.getDocJSActions();}getOutline(){return this._transport.getOutline();}getOptionalContentConfig(){let{intent=\"display\"}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const{renderingIntent}=this._transport.getRenderingIntent(intent);return this._transport.getOptionalContentConfig(renderingIntent);}getPermissions(){return this._transport.getPermissions();}getMetadata(){return this._transport.getMetadata();}getMarkInfo(){return this._transport.getMarkInfo();}getData(){return this._transport.getData();}saveDocument(){return this._transport.saveDocument();}getDownloadInfo(){return this._transport.downloadInfoCapability.promise;}cleanup(){let keepLoadedFonts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa);}destroy(){return this.loadingTask.destroy();}cachedPageNumber(ref){return this._transport.cachedPageNumber(ref);}get loadingParams(){return this._transport.loadingParams;}get loadingTask(){return this._transport.loadingTask;}getFieldObjects(){return this._transport.getFieldObjects();}hasJSActions(){return this._transport.hasJSActions();}getCalculationOrderIds(){return this._transport.getCalculationOrderIds();}}var _delayedCleanupTimeout=/*#__PURE__*/new WeakMap();var _pendingCleanup=/*#__PURE__*/new WeakMap();var _PDFPageProxy_brand=/*#__PURE__*/new WeakSet();class PDFPageProxy{constructor(pageIndex,pageInfo,transport){let pdfBug=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;_classPrivateMethodInitSpec(this,_PDFPageProxy_brand);_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,null);_classPrivateFieldInitSpec(this,_pendingCleanup,false);this._pageIndex=pageIndex;this._pageInfo=pageInfo;this._transport=transport;this._stats=pdfBug?new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.StatTimer():null;this._pdfBug=pdfBug;this.commonObjs=transport.commonObjs;this.objs=new PDFObjects();this._maybeCleanupAfterRender=false;this._intentStates=new Map();this.destroyed=false;}get pageNumber(){return this._pageIndex+1;}get rotate(){return this._pageInfo.rotate;}get ref(){return this._pageInfo.ref;}get userUnit(){return this._pageInfo.userUnit;}get view(){return this._pageInfo.view;}getViewport(){let{scale,rotation=this.rotate,offsetX=0,offsetY=0,dontFlip=false}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PageViewport({viewBox:this.view,scale,rotation,offsetX,offsetY,dontFlip});}getAnnotations(){let{intent=\"display\"}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const{renderingIntent}=this._transport.getRenderingIntent(intent);return this._transport.getAnnotations(this._pageIndex,renderingIntent);}getJSActions(){return this._transport.getPageJSActions(this._pageIndex);}get filterFactory(){return this._transport.filterFactory;}get isPureXfa(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"isPureXfa\",!!this._transport._htmlForXfa);}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null;}render(_ref16){let{canvasContext,viewport,intent=\"display\",annotationMode=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE,transform=null,background=null,optionalContentConfigPromise=null,annotationCanvasMap=null,pageColors=null,printAnnotationStorage=null}=_ref16;this._stats?.time(\"Overall\");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);const{renderingIntent,cacheKey}=intentArgs;_classPrivateFieldSet(_pendingCleanup,this,false);_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);optionalContentConfigPromise||=this._transport.getOptionalContentConfig(renderingIntent);let intentState=this._intentStates.get(cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(cacheKey,intentState);}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}const intentPrint=!!(renderingIntent&_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT);if(!intentState.displayReadyCapability){intentState.displayReadyCapability=Promise.withResolvers();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};this._stats?.time(\"Page Request\");this._pumpOperatorList(intentArgs);}const complete=error=>{intentState.renderTasks.delete(internalRenderTask);if(this._maybeCleanupAfterRender||intentPrint){_classPrivateFieldSet(_pendingCleanup,this,true);}_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!intentPrint);if(error){internalRenderTask.capability.reject(error);this._abortOperatorList({intentState,reason:error instanceof Error?error:new Error(error)});}else{internalRenderTask.capability.resolve();}this._stats?.timeEnd(\"Rendering\");this._stats?.timeEnd(\"Overall\");};const internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext,viewport,transform,background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors});(intentState.renderTasks||=new Set()).add(internalRenderTask);const renderTask=internalRenderTask.task;Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(_ref17=>{let[transparency,optionalContentConfig]=_ref17;if(this.destroyed){complete();return;}this._stats?.time(\"Rendering\");if(!(optionalContentConfig.renderingIntent&renderingIntent)){throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \"+\"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");}internalRenderTask.initializeGraphics({transparency,optionalContentConfig});internalRenderTask.operatorListChanged();}).catch(complete);return renderTask;}getOperatorList(){let{intent=\"display\",annotationMode=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE,printAnnotationStorage=null}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);intentState.renderTasks.delete(opListTask);}}const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,true);let intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}let opListTask;if(!intentState.opListReadCapability){opListTask=Object.create(null);opListTask.operatorListChanged=operatorListChanged;intentState.opListReadCapability=Promise.withResolvers();(intentState.renderTasks||=new Set()).add(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};this._stats?.time(\"Page Request\");this._pumpOperatorList(intentArgs);}return intentState.opListReadCapability.promise;}streamTextContent(){let{includeMarkedContent=false,disableNormalization=false}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream(\"GetTextContent\",{pageIndex:this._pageIndex,includeMarkedContent:includeMarkedContent===true,disableNormalization:disableNormalization===true},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size(textContent){return textContent.items.length;}});}getTextContent(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._transport._htmlForXfa){return this.getXfa().then(xfa=>_xfa_text_js__WEBPACK_IMPORTED_MODULE_15__.XfaText.textContent(xfa));}const readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function(_ref18){let{value,done}=_ref18;if(done){resolve(textContent);return;}Object.assign(textContent.styles,value.styles);textContent.items.push(...value.items);pump();},reject);}const reader=readableStream.getReader();const textContent={items:[],styles:Object.create(null)};pump();});}getStructTree(){return this._transport.getStructTree(this._pageIndex);}_destroy(){this.destroyed=true;const waitOn=[];for(const intentState of this._intentStates.values()){this._abortOperatorList({intentState,reason:new Error(\"Page was destroyed.\"),force:true});if(intentState.opListReadCapability){continue;}for(const internalRenderTask of intentState.renderTasks){waitOn.push(internalRenderTask.completed);internalRenderTask.cancel();}}this.objs.clear();_classPrivateFieldSet(_pendingCleanup,this,false);_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);return Promise.all(waitOn);}cleanup(){let resetStats=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classPrivateFieldSet(_pendingCleanup,this,true);const success=_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,false);if(resetStats&&success){this._stats&&=new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.StatTimer();}return success;}_startRenderPage(transparency,cacheKey){const intentState=this._intentStates.get(cacheKey);if(!intentState){return;}this._stats?.timeEnd(\"Page Request\");intentState.displayReadyCapability?.resolve(transparency);}_renderPageChunk(operatorListChunk,intentState){for(let i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);}intentState.operatorList.lastChunk=operatorListChunk.lastChunk;intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;for(const internalRenderTask of intentState.renderTasks){internalRenderTask.operatorListChanged();}if(operatorListChunk.lastChunk){_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,true);}}_pumpOperatorList(_ref19){let{renderingIntent,cacheKey,annotationStorageSerializable}=_ref19;const{map,transfer}=annotationStorageSerializable;const readableStream=this._transport.messageHandler.sendWithStream(\"GetOperatorList\",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey,annotationStorage:map},transfer);const reader=readableStream.getReader();const intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;const pump=()=>{reader.read().then(_ref20=>{let{value,done}=_ref20;if(done){intentState.streamReader=null;return;}if(this._transport.destroyed){return;}this._renderPageChunk(value,intentState);pump();},reason=>{intentState.streamReader=null;if(this._transport.destroyed){return;}if(intentState.operatorList){intentState.operatorList.lastChunk=true;for(const internalRenderTask of intentState.renderTasks){internalRenderTask.operatorListChanged();}_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,true);}if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(reason);}else if(intentState.opListReadCapability){intentState.opListReadCapability.reject(reason);}else{throw reason;}});};pump();}_abortOperatorList(_ref21){let{intentState,reason,force=false}=_ref21;if(!intentState.streamReader){return;}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}if(!force){if(intentState.renderTasks.size>0){return;}if(reason instanceof _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException){let delay=RENDERING_CANCELLED_TIMEOUT;if(reason.extraDelay>0&&reason.extraDelay<1000){delay+=reason.extraDelay;}intentState.streamReaderCancelTimeout=setTimeout(()=>{intentState.streamReaderCancelTimeout=null;this._abortOperatorList({intentState,reason,force:true});},delay);return;}}intentState.streamReader.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(reason.message)).catch(()=>{});intentState.streamReader=null;if(this._transport.destroyed){return;}for(const[curCacheKey,curIntentState]of this._intentStates){if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break;}}this.cleanup();}get stats(){return this._stats;}}function _tryCleanup(){let delayed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);if(!_classPrivateFieldGet(_pendingCleanup,this)||this.destroyed){return false;}if(delayed){_classPrivateFieldSet(_delayedCleanupTimeout,this,setTimeout(()=>{_classPrivateFieldSet(_delayedCleanupTimeout,this,null);_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,false);},DELAYED_CLEANUP_TIMEOUT));return false;}for(const{renderTasks,operatorList}of this._intentStates.values()){if(renderTasks.size>0||!operatorList.lastChunk){return false;}}this._intentStates.clear();this.objs.clear();_classPrivateFieldSet(_pendingCleanup,this,false);return true;}function _abortDelayedCleanup(){if(_classPrivateFieldGet(_delayedCleanupTimeout,this)){clearTimeout(_classPrivateFieldGet(_delayedCleanupTimeout,this));_classPrivateFieldSet(_delayedCleanupTimeout,this,null);}}var _listeners=/*#__PURE__*/new WeakMap();var _deferred=/*#__PURE__*/new WeakMap();class LoopbackPort{constructor(){_classPrivateFieldInitSpec(this,_listeners,new Set());_classPrivateFieldInitSpec(this,_deferred,Promise.resolve());}postMessage(obj,transfer){const event={data:structuredClone(obj,transfer?{transfer}:null)};_classPrivateFieldGet(_deferred,this).then(()=>{for(const listener of _classPrivateFieldGet(_listeners,this)){listener.call(this,event);}});}addEventListener(name,listener){_classPrivateFieldGet(_listeners,this).add(listener);}removeEventListener(name,listener){_classPrivateFieldGet(_listeners,this).delete(listener);}terminate(){_classPrivateFieldGet(_listeners,this).clear();}}const PDFWorkerUtil={isWorkerDisabled:false,fakeWorkerId:0};{if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS){PDFWorkerUtil.isWorkerDisabled=true;_worker_options_js__WEBPACK_IMPORTED_MODULE_14__.GlobalWorkerOptions.workerSrc||=\"./pdf.worker.mjs\";}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){let base;try{base=new URL(baseUrl);if(!base.origin||base.origin===\"null\"){return false;}}catch{return false;}const other=new URL(otherUrl,base);return base.origin===other.origin;};PDFWorkerUtil.createCDNWrapper=function(url){const wrapper=`await import(\"${url}\");`;return URL.createObjectURL(new Blob([wrapper],{type:\"text/javascript\"}));};}class PDFWorker{constructor(){let{name=null,port=null,verbosity=(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.name=name;this.destroyed=false;this.verbosity=verbosity;this._readyCapability=Promise.withResolvers();this._port=null;this._webWorker=null;this._messageHandler=null;if(port){if(_workerPorts._?.has(port)){throw new Error(\"Cannot use more than one PDFWorker per port.\");}(_workerPorts._||(_workerPorts._=new WeakMap())).set(port,this);this._initializeFromPort(port);return;}this._initialize();}get promise(){return this._readyCapability.promise;}get port(){return this._port;}get messageHandler(){return this._messageHandler;}_initializeFromPort(port){this._port=port;this._messageHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(\"main\",\"worker\",port);this._messageHandler.on(\"ready\",function(){});this._readyCapability.resolve();this._messageHandler.send(\"configure\",{verbosity:this.verbosity});}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_get_mainThreadWorkerMessageHandler(PDFWorker)){let{workerSrc}=PDFWorker;try{if(!PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)){workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href);}const worker=new Worker(workerSrc,{type:\"module\"});const messageHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(\"main\",\"worker\",worker);const terminateEarly=()=>{worker.removeEventListener(\"error\",onWorkerError);messageHandler.destroy();worker.terminate();if(this.destroyed){this._readyCapability.reject(new Error(\"Worker was destroyed\"));}else{this._setupFakeWorker();}};const onWorkerError=()=>{if(!this._webWorker){terminateEarly();}};worker.addEventListener(\"error\",onWorkerError);messageHandler.on(\"test\",data=>{worker.removeEventListener(\"error\",onWorkerError);if(this.destroyed){terminateEarly();return;}if(data){this._messageHandler=messageHandler;this._port=worker;this._webWorker=worker;this._readyCapability.resolve();messageHandler.send(\"configure\",{verbosity:this.verbosity});}else{this._setupFakeWorker();messageHandler.destroy();worker.terminate();}});messageHandler.on(\"ready\",data=>{worker.removeEventListener(\"error\",onWorkerError);if(this.destroyed){terminateEarly();return;}try{sendTest();}catch{this._setupFakeWorker();}});const sendTest=()=>{const testObj=new Uint8Array();messageHandler.send(\"test\",testObj,[testObj.buffer]);};sendTest();return;}catch{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.info)(\"The worker has been disabled.\");}}this._setupFakeWorker();}_setupFakeWorker(){if(!PDFWorkerUtil.isWorkerDisabled){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Setting up fake worker.\");PDFWorkerUtil.isWorkerDisabled=true;}PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler=>{if(this.destroyed){this._readyCapability.reject(new Error(\"Worker was destroyed\"));return;}const port=new LoopbackPort();this._port=port;const id=`fake${PDFWorkerUtil.fakeWorkerId++}`;const workerHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(id+\"_worker\",id,port);WorkerMessageHandler.setup(workerHandler,port);const messageHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(id,id+\"_worker\",port);this._messageHandler=messageHandler;this._readyCapability.resolve();messageHandler.send(\"configure\",{verbosity:this.verbosity});}).catch(reason=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));});}destroy(){this.destroyed=true;if(this._webWorker){this._webWorker.terminate();this._webWorker=null;}_workerPorts._?.delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null;}}static fromPort(params){if(!params?.port){throw new Error(\"PDFWorker.fromPort - invalid method signature.\");}const cachedPort=_assertClassBrand(PDFWorker,this,_workerPorts)._?.get(params.port);if(cachedPort){if(cachedPort._pendingDestroy){throw new Error(\"PDFWorker.fromPort - the worker is being destroyed.\\n\"+\"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");}return cachedPort;}return new PDFWorker(params);}static get workerSrc(){if(_worker_options_js__WEBPACK_IMPORTED_MODULE_14__.GlobalWorkerOptions.workerSrc){return _worker_options_js__WEBPACK_IMPORTED_MODULE_14__.GlobalWorkerOptions.workerSrc;}throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');}static get _setupFakeWorkerGlobal(){const loader=async()=>{if(_classPrivateGetter(PDFWorker,this,_get_mainThreadWorkerMessageHandler)){return _classPrivateGetter(PDFWorker,this,_get_mainThreadWorkerMessageHandler);}const worker=await import(/*webpackIgnore: true*/this.workerSrc);return worker.WorkerMessageHandler;};return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_setupFakeWorkerGlobal\",loader());}}function _get_mainThreadWorkerMessageHandler(_this){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null;}catch{return null;}}var _workerPorts={_:void 0};var _methodPromises=/*#__PURE__*/new WeakMap();var _pageCache=/*#__PURE__*/new WeakMap();var _pagePromises=/*#__PURE__*/new WeakMap();var _pageRefCache=/*#__PURE__*/new WeakMap();var _passwordCapability=/*#__PURE__*/new WeakMap();var _WorkerTransport_brand=/*#__PURE__*/new WeakSet();class WorkerTransport{constructor(messageHandler,loadingTask,networkStream,params,factory){_classPrivateMethodInitSpec(this,_WorkerTransport_brand);_classPrivateFieldInitSpec(this,_methodPromises,new Map());_classPrivateFieldInitSpec(this,_pageCache,new Map());_classPrivateFieldInitSpec(this,_pagePromises,new Map());_classPrivateFieldInitSpec(this,_pageRefCache,new Map());_classPrivateFieldInitSpec(this,_passwordCapability,null);this.messageHandler=messageHandler;this.loadingTask=loadingTask;this.commonObjs=new PDFObjects();this.fontLoader=new _font_loader_js__WEBPACK_IMPORTED_MODULE_3__.FontLoader({ownerDocument:params.ownerDocument,styleElement:params.styleElement});this._params=params;this.canvasFactory=factory.canvasFactory;this.filterFactory=factory.filterFactory;this.cMapReaderFactory=factory.cMapReaderFactory;this.standardFontDataFactory=factory.standardFontDataFactory;this.destroyed=false;this.destroyCapability=null;this._networkStream=networkStream;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=Promise.withResolvers();this.setupMessageHandler();}get annotationStorage(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"annotationStorage\",new _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationStorage());}getRenderingIntent(intent){let annotationMode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE;let printAnnotationStorage=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let isOpList=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let renderingIntent=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.DISPLAY;let annotationStorageSerializable=_annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.SerializableEmpty;switch(intent){case\"any\":renderingIntent=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANY;break;case\"display\":break;case\"print\":renderingIntent=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT;break;default:(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`getRenderingIntent - invalid intent: ${intent}`);}switch(annotationMode){case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.DISABLE:renderingIntent+=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE:break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS:renderingIntent+=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_STORAGE;const annotationStorage=renderingIntent&_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage;annotationStorageSerializable=annotationStorage.serializable;break;default:(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);}if(isOpList){renderingIntent+=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.OPLIST;}return{renderingIntent,cacheKey:`${renderingIntent}_${annotationStorageSerializable.hash}`,annotationStorageSerializable};}destroy(){if(this.destroyCapability){return this.destroyCapability.promise;}this.destroyed=true;this.destroyCapability=Promise.withResolvers();_classPrivateFieldGet(_passwordCapability,this)?.reject(new Error(\"Worker was destroyed during onPassword callback\"));const waitOn=[];for(const page of _classPrivateFieldGet(_pageCache,this).values()){waitOn.push(page._destroy());}_classPrivateFieldGet(_pageCache,this).clear();_classPrivateFieldGet(_pagePromises,this).clear();_classPrivateFieldGet(_pageRefCache,this).clear();if(this.hasOwnProperty(\"annotationStorage\")){this.annotationStorage.resetModified();}const terminated=this.messageHandler.sendWithPromise(\"Terminate\",null);waitOn.push(terminated);Promise.all(waitOn).then(()=>{this.commonObjs.clear();this.fontLoader.clear();_classPrivateFieldGet(_methodPromises,this).clear();this.filterFactory.destroy();(0,_text_layer_js__WEBPACK_IMPORTED_MODULE_6__.cleanupTextLayer)();this._networkStream?.cancelAllRequests(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"Worker was terminated.\"));if(this.messageHandler){this.messageHandler.destroy();this.messageHandler=null;}this.destroyCapability.resolve();},this.destroyCapability.reject);return this.destroyCapability.promise;}setupMessageHandler(){const{messageHandler,loadingTask}=this;messageHandler.on(\"GetReader\",(data,sink)=>{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._networkStream,\"GetReader - no `IPDFStream` instance available.\");this._fullReader=this._networkStream.getFullReader();this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total};};sink.onPull=()=>{this._fullReader.read().then(function(_ref22){let{value,done}=_ref22;if(done){sink.close();return;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(value instanceof ArrayBuffer,\"GetReader - expected an ArrayBuffer.\");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(reason=>{sink.error(reason);});};sink.onCancel=reason=>{this._fullReader.cancel(reason);sink.ready.catch(readyReason=>{if(this.destroyed){return;}throw readyReason;});};});messageHandler.on(\"ReaderHeadersReady\",data=>{const headersCapability=Promise.withResolvers();const fullReader=this._fullReader;fullReader.headersReady.then(()=>{if(!fullReader.isStreamingSupported||!fullReader.isRangeSupported){if(this._lastProgress){loadingTask.onProgress?.(this._lastProgress);}fullReader.onProgress=evt=>{loadingTask.onProgress?.({loaded:evt.loaded,total:evt.total});};}headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength});},headersCapability.reject);return headersCapability.promise;});messageHandler.on(\"GetRangeReader\",(data,sink)=>{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._networkStream,\"GetRangeReader - no `IPDFStream` instance available.\");const rangeReader=this._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return;}sink.onPull=()=>{rangeReader.read().then(function(_ref23){let{value,done}=_ref23;if(done){sink.close();return;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(value instanceof ArrayBuffer,\"GetRangeReader - expected an ArrayBuffer.\");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(reason=>{sink.error(reason);});};sink.onCancel=reason=>{rangeReader.cancel(reason);sink.ready.catch(readyReason=>{if(this.destroyed){return;}throw readyReason;});};});messageHandler.on(\"GetDoc\",_ref24=>{let{pdfInfo}=_ref24;this._numPages=pdfInfo.numPages;this._htmlForXfa=pdfInfo.htmlForXfa;delete pdfInfo.htmlForXfa;loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this));});messageHandler.on(\"DocException\",function(ex){let reason;switch(ex.name){case\"PasswordException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(ex.message,ex.code);break;case\"InvalidPDFException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.InvalidPDFException(ex.message);break;case\"MissingPDFException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(ex.message);break;case\"UnexpectedResponseException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException(ex.message,ex.status);break;case\"UnknownErrorException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(ex.message,ex.details);break;default:(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"DocException - expected a valid Error.\");}loadingTask._capability.reject(reason);});messageHandler.on(\"PasswordRequest\",exception=>{_classPrivateFieldSet(_passwordCapability,this,Promise.withResolvers());if(loadingTask.onPassword){const updatePassword=password=>{if(password instanceof Error){_classPrivateFieldGet(_passwordCapability,this).reject(password);}else{_classPrivateFieldGet(_passwordCapability,this).resolve({password});}};try{loadingTask.onPassword(updatePassword,exception.code);}catch(ex){_classPrivateFieldGet(_passwordCapability,this).reject(ex);}}else{_classPrivateFieldGet(_passwordCapability,this).reject(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(exception.message,exception.code));}return _classPrivateFieldGet(_passwordCapability,this).promise;});messageHandler.on(\"DataLoaded\",data=>{loadingTask.onProgress?.({loaded:data.length,total:data.length});this.downloadInfoCapability.resolve(data);});messageHandler.on(\"StartRenderPage\",data=>{if(this.destroyed){return;}const page=_classPrivateFieldGet(_pageCache,this).get(data.pageIndex);page._startRenderPage(data.transparency,data.cacheKey);});messageHandler.on(\"commonobj\",_ref25=>{let[id,type,exportedData]=_ref25;if(this.destroyed){return null;}if(this.commonObjs.has(id)){return null;}switch(type){case\"Font\":const params=this._params;if(\"error\"in exportedData){const exportedError=exportedData.error;(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Error during font loading: ${exportedError}`);this.commonObjs.resolve(id,exportedError);break;}const inspectFont=params.pdfBug&&globalThis.FontInspector?.enabled?(font,url)=>globalThis.FontInspector.fontAdded(font,url):null;const font=new _font_loader_js__WEBPACK_IMPORTED_MODULE_3__.FontFaceObject(exportedData,{disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,inspectFont});this.fontLoader.bind(font).catch(()=>messageHandler.sendWithPromise(\"FontFallback\",{id})).finally(()=>{if(!params.fontExtraProperties&&font.data){font.data=null;}this.commonObjs.resolve(id,font);});break;case\"CopyLocalImage\":const{imageRef}=exportedData;(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(imageRef,\"The imageRef must be defined.\");for(const pageProxy of _classPrivateFieldGet(_pageCache,this).values()){for(const[,data]of pageProxy.objs){if(data.ref!==imageRef){continue;}if(!data.dataLen){return null;}this.commonObjs.resolve(id,structuredClone(data));return data.dataLen;}}break;case\"FontPath\":case\"Image\":case\"Pattern\":this.commonObjs.resolve(id,exportedData);break;default:throw new Error(`Got unknown common object type ${type}`);}return null;});messageHandler.on(\"obj\",_ref26=>{let[id,pageIndex,type,imageData]=_ref26;if(this.destroyed){return;}const pageProxy=_classPrivateFieldGet(_pageCache,this).get(pageIndex);if(pageProxy.objs.has(id)){return;}if(pageProxy._intentStates.size===0){imageData?.bitmap?.close();return;}switch(type){case\"Image\":pageProxy.objs.resolve(id,imageData);if(imageData?.dataLen>_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MAX_IMAGE_SIZE_TO_CACHE){pageProxy._maybeCleanupAfterRender=true;}break;case\"Pattern\":pageProxy.objs.resolve(id,imageData);break;default:throw new Error(`Got unknown object type ${type}`);}});messageHandler.on(\"DocProgress\",data=>{if(this.destroyed){return;}loadingTask.onProgress?.({loaded:data.loaded,total:data.total});});messageHandler.on(\"FetchBuiltInCMap\",data=>{if(this.destroyed){return Promise.reject(new Error(\"Worker was destroyed.\"));}if(!this.cMapReaderFactory){return Promise.reject(new Error(\"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"));}return this.cMapReaderFactory.fetch(data);});messageHandler.on(\"FetchStandardFontData\",data=>{if(this.destroyed){return Promise.reject(new Error(\"Worker was destroyed.\"));}if(!this.standardFontDataFactory){return Promise.reject(new Error(\"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"));}return this.standardFontDataFactory.fetch(data);});}getData(){return this.messageHandler.sendWithPromise(\"GetData\",null);}saveDocument(){if(this.annotationStorage.size<=0){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"saveDocument called while `annotationStorage` is empty, \"+\"please use the getData-method instead.\");}const{map,transfer}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise(\"SaveDocument\",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:map,filename:this._fullReader?.filename??null},transfer).finally(()=>{this.annotationStorage.resetModified();});}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages){return Promise.reject(new Error(\"Invalid page request.\"));}const pageIndex=pageNumber-1,cachedPromise=_classPrivateFieldGet(_pagePromises,this).get(pageIndex);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(\"GetPage\",{pageIndex}).then(pageInfo=>{if(this.destroyed){throw new Error(\"Transport destroyed\");}if(pageInfo.refStr){_classPrivateFieldGet(_pageRefCache,this).set(pageInfo.refStr,pageNumber);}const page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.pdfBug);_classPrivateFieldGet(_pageCache,this).set(pageIndex,page);return page;});_classPrivateFieldGet(_pagePromises,this).set(pageIndex,promise);return promise;}getPageIndex(ref){if(!isRefProxy(ref)){return Promise.reject(new Error(\"Invalid pageIndex request.\"));}return this.messageHandler.sendWithPromise(\"GetPageIndex\",{num:ref.num,gen:ref.gen});}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise(\"GetAnnotations\",{pageIndex,intent});}getFieldObjects(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,\"GetFieldObjects\");}hasJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,\"HasJSActions\");}getCalculationOrderIds(){return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\",null);}getDestinations(){return this.messageHandler.sendWithPromise(\"GetDestinations\",null);}getDestination(id){if(typeof id!==\"string\"){return Promise.reject(new Error(\"Invalid destination request.\"));}return this.messageHandler.sendWithPromise(\"GetDestination\",{id});}getPageLabels(){return this.messageHandler.sendWithPromise(\"GetPageLabels\",null);}getPageLayout(){return this.messageHandler.sendWithPromise(\"GetPageLayout\",null);}getPageMode(){return this.messageHandler.sendWithPromise(\"GetPageMode\",null);}getViewerPreferences(){return this.messageHandler.sendWithPromise(\"GetViewerPreferences\",null);}getOpenAction(){return this.messageHandler.sendWithPromise(\"GetOpenAction\",null);}getAttachments(){return this.messageHandler.sendWithPromise(\"GetAttachments\",null);}getDocJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,\"GetDocJSActions\");}getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise(\"GetPageJSActions\",{pageIndex});}getStructTree(pageIndex){return this.messageHandler.sendWithPromise(\"GetStructTree\",{pageIndex});}getOutline(){return this.messageHandler.sendWithPromise(\"GetOutline\",null);}getOptionalContentConfig(renderingIntent){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,\"GetOptionalContentConfig\").then(data=>new _optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__.OptionalContentConfig(data,renderingIntent));}getPermissions(){return this.messageHandler.sendWithPromise(\"GetPermissions\",null);}getMetadata(){const name=\"GetMetadata\",cachedPromise=_classPrivateFieldGet(_methodPromises,this).get(name);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(name,null).then(results=>({info:results[0],metadata:results[1]?new _metadata_js__WEBPACK_IMPORTED_MODULE_8__.Metadata(results[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));_classPrivateFieldGet(_methodPromises,this).set(name,promise);return promise;}getMarkInfo(){return this.messageHandler.sendWithPromise(\"GetMarkInfo\",null);}async startCleanup(){let keepLoadedFonts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.destroyed){return;}await this.messageHandler.sendWithPromise(\"Cleanup\",null);for(const page of _classPrivateFieldGet(_pageCache,this).values()){const cleanupSuccessful=page.cleanup();if(!cleanupSuccessful){throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);}}this.commonObjs.clear();if(!keepLoadedFonts){this.fontLoader.clear();}_classPrivateFieldGet(_methodPromises,this).clear();this.filterFactory.destroy(true);(0,_text_layer_js__WEBPACK_IMPORTED_MODULE_6__.cleanupTextLayer)();}cachedPageNumber(ref){if(!isRefProxy(ref)){return null;}const refStr=ref.gen===0?`${ref.num}R`:`${ref.num}R${ref.gen}`;return _classPrivateFieldGet(_pageRefCache,this).get(refStr)??null;}get loadingParams(){const{disableAutoFetch,enableXfa}=this._params;return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"loadingParams\",{disableAutoFetch,enableXfa});}}function _cacheSimpleMethod(name){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const cachedPromise=_classPrivateFieldGet(_methodPromises,this).get(name);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(name,data);_classPrivateFieldGet(_methodPromises,this).set(name,promise);return promise;}const INITIAL_DATA=Symbol(\"INITIAL_DATA\");var _objs=/*#__PURE__*/new WeakMap();var _PDFObjects_brand=/*#__PURE__*/new WeakSet();class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_PDFObjects_brand);_classPrivateFieldInitSpec(this,_objs,Object.create(null));}get(objId){let callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(callback){const obj=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,objId);obj.promise.then(()=>callback(obj.data));return null;}const obj=_classPrivateFieldGet(_objs,this)[objId];if(!obj||obj.data===INITIAL_DATA){throw new Error(`Requesting object that isn't resolved yet ${objId}.`);}return obj.data;}has(objId){const obj=_classPrivateFieldGet(_objs,this)[objId];return!!obj&&obj.data!==INITIAL_DATA;}resolve(objId){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const obj=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,objId);obj.data=data;obj.resolve();}clear(){for(const objId in _classPrivateFieldGet(_objs,this)){const{data}=_classPrivateFieldGet(_objs,this)[objId];data?.bitmap?.close();}_classPrivateFieldSet(_objs,this,Object.create(null));}*[Symbol.iterator](){for(const objId in _classPrivateFieldGet(_objs,this)){const{data}=_classPrivateFieldGet(_objs,this)[objId];if(data===INITIAL_DATA){continue;}yield[objId,data];}}}function _ensureObj(objId){return _classPrivateFieldGet(_objs,this)[objId]||={...Promise.withResolvers(),data:INITIAL_DATA};}var _internalRenderTask=/*#__PURE__*/new WeakMap();class RenderTask{constructor(internalRenderTask){_classPrivateFieldInitSpec(this,_internalRenderTask,null);_classPrivateFieldSet(_internalRenderTask,this,internalRenderTask);this.onContinue=null;}get promise(){return _classPrivateFieldGet(_internalRenderTask,this).capability.promise;}cancel(){let extraDelay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;_classPrivateFieldGet(_internalRenderTask,this).cancel(null,extraDelay);}get separateAnnots(){const{separateAnnots}=_classPrivateFieldGet(_internalRenderTask,this).operatorList;if(!separateAnnots){return false;}const{annotationCanvasMap}=_classPrivateFieldGet(_internalRenderTask,this);return separateAnnots.form||separateAnnots.canvas&&annotationCanvasMap?.size>0;}}class InternalRenderTask{constructor(_ref27){let{callback,params,objs,commonObjs,annotationCanvasMap,operatorList,pageIndex,canvasFactory,filterFactory,useRequestAnimationFrame=false,pdfBug=false,pageColors=null}=_ref27;this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.annotationCanvasMap=annotationCanvasMap;this.operatorListIdx=null;this.operatorList=operatorList;this._pageIndex=pageIndex;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this._pdfBug=pdfBug;this.pageColors=pageColors;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this._useRequestAnimationFrame=useRequestAnimationFrame===true&&typeof window!==\"undefined\";this.cancelled=false;this.capability=Promise.withResolvers();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=params.canvasContext.canvas;}get completed(){return this.capability.promise.catch(function(){});}initializeGraphics(_ref28){let{transparency=false,optionalContentConfig}=_ref28;if(this.cancelled){return;}if(this._canvas){if(_canvasInUse._.has(this._canvas)){throw new Error(\"Cannot use the same canvas during multiple render() operations. \"+\"Use different canvas or ensure previous operations were \"+\"cancelled or completed.\");}_canvasInUse._.add(this._canvas);}if(this._pdfBug&&globalThis.StepperManager?.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint();}const{canvasContext,viewport,transform,background}=this.params;this.gfx=new _canvas_js__WEBPACK_IMPORTED_MODULE_5__.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig},this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform,viewport,transparency,background});this.operatorListIdx=0;this.graphicsReady=true;this.graphicsReadyCallback?.();}cancel(){let error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let extraDelay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.running=false;this.cancelled=true;this.gfx?.endDrawing();_canvasInUse._.delete(this._canvas);this.callback(error||new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,extraDelay));}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return;}this.stepper?.updateOperatorList(this.operatorList);if(this.running){return;}this._continue();}_continue(){this.running=true;if(this.cancelled){return;}if(this.task.onContinue){this.task.onContinue(this._scheduleNextBound);}else{this._scheduleNext();}}_scheduleNext(){if(this._useRequestAnimationFrame){window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound);});}else{Promise.resolve().then(this._nextBound).catch(this._cancelBound);}}async _next(){if(this.cancelled){return;}this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing();_canvasInUse._.delete(this._canvas);this.callback();}}}}var _canvasInUse={_:new WeakSet()};const version=\"4.2.67\";const build=\"49b388101\";__webpack_async_result__();}catch(e){__webpack_async_result__(e);}});/***/}),/***/583:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */BaseCMapReaderFactory:()=>(/* binding */BaseCMapReaderFactory),/* harmony export */BaseCanvasFactory:()=>(/* binding */BaseCanvasFactory),/* harmony export */BaseFilterFactory:()=>(/* binding */BaseFilterFactory),/* harmony export */BaseSVGFactory:()=>(/* binding */BaseSVGFactory),/* harmony export */BaseStandardFontDataFactory:()=>(/* binding */BaseStandardFontDataFactory)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);class BaseFilterFactory{constructor(){if(this.constructor===BaseFilterFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseFilterFactory.\");}}addFilter(maps){return\"none\";}addHCMFilter(fgColor,bgColor){return\"none\";}addHighlightHCMFilter(filterName,fgColor,bgColor,newFgColor,newBgColor){return\"none\";}destroy(){let keepHCM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;}}class BaseCanvasFactory{constructor(){if(this.constructor===BaseCanvasFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseCanvasFactory.\");}}create(width,height){if(width<=0||height<=0){throw new Error(\"Invalid canvas size\");}const canvas=this._createCanvas(width,height);return{canvas,context:canvas.getContext(\"2d\")};}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas){throw new Error(\"Canvas is not specified\");}if(width<=0||height<=0){throw new Error(\"Invalid canvas size\");}canvasAndContext.canvas.width=width;canvasAndContext.canvas.height=height;}destroy(canvasAndContext){if(!canvasAndContext.canvas){throw new Error(\"Canvas is not specified\");}canvasAndContext.canvas.width=0;canvasAndContext.canvas.height=0;canvasAndContext.canvas=null;canvasAndContext.context=null;}_createCanvas(width,height){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_createCanvas` called.\");}}class BaseCMapReaderFactory{constructor(_ref29){let{baseUrl=null,isCompressed=true}=_ref29;if(this.constructor===BaseCMapReaderFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseCMapReaderFactory.\");}this.baseUrl=baseUrl;this.isCompressed=isCompressed;}async fetch(_ref30){let{name}=_ref30;if(!this.baseUrl){throw new Error('The CMap \"baseUrl\" parameter must be specified, ensure that '+'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.');}if(!name){throw new Error(\"CMap name must be specified.\");}const url=this.baseUrl+name+(this.isCompressed?\".bcmap\":\"\");const compressionType=this.isCompressed?_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType.BINARY:_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType.NONE;return this._fetchData(url,compressionType).catch(reason=>{throw new Error(`Unable to load ${this.isCompressed?\"binary \":\"\"}CMap at: ${url}`);});}_fetchData(url,compressionType){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_fetchData` called.\");}}class BaseStandardFontDataFactory{constructor(_ref31){let{baseUrl=null}=_ref31;if(this.constructor===BaseStandardFontDataFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseStandardFontDataFactory.\");}this.baseUrl=baseUrl;}async fetch(_ref32){let{filename}=_ref32;if(!this.baseUrl){throw new Error('The standard font \"baseUrl\" parameter must be specified, ensure that '+'the \"standardFontDataUrl\" API parameter is provided.');}if(!filename){throw new Error(\"Font filename must be specified.\");}const url=`${this.baseUrl}${filename}`;return this._fetchData(url).catch(reason=>{throw new Error(`Unable to load font data at: ${url}`);});}_fetchData(url){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_fetchData` called.\");}}class BaseSVGFactory{constructor(){if(this.constructor===BaseSVGFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseSVGFactory.\");}}create(width,height){let skipDimensions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(width<=0||height<=0){throw new Error(\"Invalid SVG dimensions\");}const svg=this._createSVG(\"svg:svg\");svg.setAttribute(\"version\",\"1.1\");if(!skipDimensions){svg.setAttribute(\"width\",`${width}px`);svg.setAttribute(\"height\",`${height}px`);}svg.setAttribute(\"preserveAspectRatio\",\"none\");svg.setAttribute(\"viewBox\",`0 0 ${width} ${height}`);return svg;}createElement(type){if(typeof type!==\"string\"){throw new Error(\"Invalid SVG element type\");}return this._createSVG(type);}_createSVG(type){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_createSVG` called.\");}}/***/}),/***/923:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{// EXPORTS\n__webpack_require__.d(__webpack_exports__,{CanvasGraphics:()=>(/* binding */CanvasGraphics)});// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);;// CONCATENATED MODULE: ./src/display/pattern_helper.js\nconst PathType={FILL:\"Fill\",STROKE:\"Stroke\",SHADING:\"Shading\"};function applyBoundingBox(ctx,bbox){if(!bbox){return;}const width=bbox[2]-bbox[0];const height=bbox[3]-bbox[1];const region=new Path2D();region.rect(bbox[0],bbox[1],width,height);ctx.clip(region);}class BaseShadingPattern{constructor(){if(this.constructor===BaseShadingPattern){(0,util.unreachable)(\"Cannot initialize BaseShadingPattern.\");}}getPattern(){(0,util.unreachable)(\"Abstract method `getPattern` called.\");}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(IR){super();this._type=IR[1];this._bbox=IR[2];this._colorStops=IR[3];this._p0=IR[4];this._p1=IR[5];this._r0=IR[6];this._r1=IR[7];this.matrix=null;}_createGradient(ctx){let grad;if(this._type===\"axial\"){grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]);}else if(this._type===\"radial\"){grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1);}for(const colorStop of this._colorStops){grad.addColorStop(colorStop[0],colorStop[1]);}return grad;}getPattern(ctx,owner,inverse,pathType){let pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){const ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,display_utils.getCurrentTransform)(ctx))||[0,0,0,0];const width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1;const height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1;const tmpCanvas=owner.cachedCanvases.getCanvas(\"pattern\",width,height,true);const tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.beginPath();tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]);inverse=util.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]);tmpCtx.transform(...owner.baseTransform);if(this.matrix){tmpCtx.transform(...this.matrix);}applyBoundingBox(tmpCtx,this._bbox);tmpCtx.fillStyle=this._createGradient(tmpCtx);tmpCtx.fill();pattern=ctx.createPattern(tmpCanvas.canvas,\"no-repeat\");const domMatrix=new DOMMatrix(inverse);pattern.setTransform(domMatrix);}else{applyBoundingBox(ctx,this._bbox);pattern=this._createGradient(ctx);}return pattern;}}function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){const coords=context.coords,colors=context.colors;const bytes=data.data,rowSize=data.width*4;let tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp;}if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}const x1=(coords[p1]+context.offsetX)*context.scaleX;const y1=(coords[p1+1]+context.offsetY)*context.scaleY;const x2=(coords[p2]+context.offsetX)*context.scaleX;const y2=(coords[p2+1]+context.offsetY)*context.scaleY;const x3=(coords[p3]+context.offsetX)*context.scaleX;const y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return;}const c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];const c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];const c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];const minY=Math.round(y1),maxY=Math.round(y3);let xa,car,cag,cab;let xb,cbr,cbg,cbb;for(let y=minY;y<=maxY;y++){if(y<y2){const k=y<y1?0:(y1-y)/(y1-y2);xa=x1-(x1-x2)*k;car=c1r-(c1r-c2r)*k;cag=c1g-(c1g-c2g)*k;cab=c1b-(c1b-c2b)*k;}else{let k;if(y>y3){k=1;}else if(y2===y3){k=0;}else{k=(y2-y)/(y2-y3);}xa=x2-(x2-x3)*k;car=c2r-(c2r-c3r)*k;cag=c2g-(c2g-c3g)*k;cab=c2b-(c2b-c3b)*k;}let k;if(y<y1){k=0;}else if(y>y3){k=1;}else{k=(y1-y)/(y1-y3);}xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;const x1_=Math.round(Math.min(xa,xb));const x2_=Math.round(Math.max(xa,xb));let j=rowSize*y+x1_*4;for(let x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);if(k<0){k=0;}else if(k>1){k=1;}bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255;}}}function drawFigure(data,figure,context){const ps=figure.coords;const cs=figure.colors;let i,ii;switch(figure.type){case\"lattice\":const verticesPerRow=figure.verticesPerRow;const rows=Math.floor(ps.length/verticesPerRow)-1;const cols=verticesPerRow-1;for(i=0;i<rows;i++){let q=i*verticesPerRow;for(let j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);}}break;case\"triangles\":for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);}break;default:throw new Error(\"illegal figure\");}}class MeshShadingPattern extends BaseShadingPattern{constructor(IR){super();this._coords=IR[2];this._colors=IR[3];this._figures=IR[4];this._bounds=IR[5];this._bbox=IR[7];this._background=IR[8];this.matrix=null;}_createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){const EXPECTED_SCALE=1.1;const MAX_PATTERN_SIZE=3000;const BORDER_SIZE=2;const offsetX=Math.floor(this._bounds[0]);const offsetY=Math.floor(this._bounds[1]);const boundsWidth=Math.ceil(this._bounds[2])-offsetX;const boundsHeight=Math.ceil(this._bounds[3])-offsetY;const width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);const height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);const scaleX=boundsWidth/width;const scaleY=boundsHeight/height;const context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY};const paddedWidth=width+BORDER_SIZE*2;const paddedHeight=height+BORDER_SIZE*2;const tmpCanvas=cachedCanvases.getCanvas(\"mesh\",paddedWidth,paddedHeight,false);const tmpCtx=tmpCanvas.context;const data=tmpCtx.createImageData(width,height);if(backgroundColor){const bytes=data.data;for(let i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255;}}for(const figure of this._figures){drawFigure(data,figure,context);}tmpCtx.putImageData(data,BORDER_SIZE,BORDER_SIZE);const canvas=tmpCanvas.canvas;return{canvas,offsetX:offsetX-BORDER_SIZE*scaleX,offsetY:offsetY-BORDER_SIZE*scaleY,scaleX,scaleY};}getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);let scale;if(pathType===PathType.SHADING){scale=util.Util.singularValueDecompose2dScale((0,display_utils.getCurrentTransform)(ctx));}else{scale=util.Util.singularValueDecompose2dScale(owner.baseTransform);if(this.matrix){const matrixScale=util.Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]];}}const temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);if(pathType!==PathType.SHADING){ctx.setTransform(...owner.baseTransform);if(this.matrix){ctx.transform(...this.matrix);}}ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,\"no-repeat\");}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return\"hotpink\";}}function getShadingPattern(IR){switch(IR[0]){case\"RadialAxial\":return new RadialAxialShadingPattern(IR);case\"Mesh\":return new MeshShadingPattern(IR);case\"Dummy\":return new DummyShadingPattern();}throw new Error(`Unknown IR type: ${IR[0]}`);}const PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{constructor(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2];this.matrix=IR[3]||[1,0,0,1,0,0];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.ctx=ctx;this.canvasGraphicsFactory=canvasGraphicsFactory;this.baseTransform=baseTransform;}createPatternCanvas(owner){const operatorList=this.operatorList;const bbox=this.bbox;const xstep=this.xstep;const ystep=this.ystep;const paintType=this.paintType;const tilingType=this.tilingType;const color=this.color;const canvasGraphicsFactory=this.canvasGraphicsFactory;(0,util.info)(\"TilingType: \"+tilingType);const x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];const matrixScale=util.Util.singularValueDecompose2dScale(this.matrix);const curMatrixScale=util.Util.singularValueDecompose2dScale(this.baseTransform);const combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]];const dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]);const dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]);const tmpCanvas=owner.cachedCanvases.getCanvas(\"pattern\",dimx.size,dimy.size,true);const tmpCtx=tmpCanvas.context;const graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(graphics,paintType,color);let adjustedX0=x0;let adjustedY0=y0;let adjustedX1=x1;let adjustedY1=y1;if(x0<0){adjustedX0=0;adjustedX1+=Math.abs(x0);}if(y0<0){adjustedY0=0;adjustedY1+=Math.abs(y0);}tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0));graphics.transform(dimx.scale,0,0,dimy.scale,0,0);tmpCtx.save();this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1);graphics.baseTransform=(0,display_utils.getCurrentTransform)(graphics.ctx);graphics.executeOperatorList(operatorList);graphics.endDrawing();return{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0};}getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);const maxSize=Math.max(TilingPattern.MAX_PATTERN_SIZE,realOutputSize);let size=Math.ceil(step*scale);if(size>=maxSize){size=maxSize;}else{scale=size/step;}return{scale,size};}clipBbox(graphics,x0,y0,x1,y1){const bboxWidth=x1-x0;const bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.current.updateRectMinMax((0,display_utils.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]);graphics.clip();graphics.endPath();}setFillAndStrokeStyleToContext(graphics,paintType,color){const context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:const ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;current.fillColor=ctx.fillStyle;current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:const cssColor=util.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor;context.strokeStyle=cssColor;current.fillColor=cssColor;current.strokeColor=cssColor;break;default:throw new util.FormatError(`Unsupported paint type: ${paintType}`);}}getPattern(ctx,owner,inverse,pathType){let matrix=inverse;if(pathType!==PathType.SHADING){matrix=util.Util.transform(matrix,owner.baseTransform);if(this.matrix){matrix=util.Util.transform(matrix,this.matrix);}}const temporaryPatternCanvas=this.createPatternCanvas(owner);let domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);const pattern=ctx.createPattern(temporaryPatternCanvas.canvas,\"repeat\");pattern.setTransform(domMatrix);return pattern;}}_defineProperty(TilingPattern,\"MAX_PATTERN_SIZE\",3000);;// CONCATENATED MODULE: ./src/shared/image_utils.js\nfunction convertToRGBA(params){switch(params.kind){case ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case ImageKind.RGB_24BPP:return convertRGBToRGBA(params);}return null;}function convertBlackAndWhiteToRGBA(_ref33){let{src,srcPos=0,dest,width,height,nonBlackColor=0xffffffff,inverseDecode=false}=_ref33;const black=util.FeatureTest.isLittleEndian?0xff000000:0x000000ff;const[zeroMapping,oneMapping]=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor];const widthInSource=width>>3;const widthRemainder=width&7;const srcLength=src.length;dest=new Uint32Array(dest.buffer);let destPos=0;for(let i=0;i<height;i++){for(const max=srcPos+widthInSource;srcPos<max;srcPos++){const elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=elem&0b10000000?oneMapping:zeroMapping;dest[destPos++]=elem&0b1000000?oneMapping:zeroMapping;dest[destPos++]=elem&0b100000?oneMapping:zeroMapping;dest[destPos++]=elem&0b10000?oneMapping:zeroMapping;dest[destPos++]=elem&0b1000?oneMapping:zeroMapping;dest[destPos++]=elem&0b100?oneMapping:zeroMapping;dest[destPos++]=elem&0b10?oneMapping:zeroMapping;dest[destPos++]=elem&0b1?oneMapping:zeroMapping;}if(widthRemainder===0){continue;}const elem=srcPos<srcLength?src[srcPos++]:255;for(let j=0;j<widthRemainder;j++){dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping;}}return{srcPos,destPos};}function convertRGBToRGBA(_ref34){let{src,srcPos=0,dest,destPos=0,width,height}=_ref34;let i=0;const len32=src.length>>2;const src32=new Uint32Array(src.buffer,srcPos,len32);if(FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){const s1=src32[i];const s2=src32[i+1];const s3=src32[i+2];dest[destPos]=s1|0xff000000;dest[destPos+1]=s1>>>24|s2<<8|0xff000000;dest[destPos+2]=s2>>>16|s3<<16|0xff000000;dest[destPos+3]=s3>>>8|0xff000000;}for(let j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|0xff000000;}}else{for(;i<len32-2;i+=3,destPos+=4){const s1=src32[i];const s2=src32[i+1];const s3=src32[i+2];dest[destPos]=s1|0xff;dest[destPos+1]=s1<<24|s2>>>8|0xff;dest[destPos+2]=s2<<16|s3>>>16|0xff;dest[destPos+3]=s3<<8|0xff;}for(let j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]<<24|src[j+1]<<16|src[j+2]<<8|0xff;}}return{srcPos,destPos};}function grayToRGBA(src,dest){if(FeatureTest.isLittleEndian){for(let i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x10101|0xff000000;}}else{for(let i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x1010100|0x000000ff;}}};// CONCATENATED MODULE: ./src/display/canvas.js\nconst MIN_FONT_SIZE=16;const MAX_FONT_SIZE=100;const MAX_GROUP_SIZE=4096;const EXECUTION_TIME=15;const EXECUTION_STEPS=10;const MAX_SIZE_TO_COMPILE=1000;const FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring){throw new Error(\"Context is already forwarding operations.\");}ctx.__originalSave=ctx.save;ctx.__originalRestore=ctx.restore;ctx.__originalRotate=ctx.rotate;ctx.__originalScale=ctx.scale;ctx.__originalTranslate=ctx.translate;ctx.__originalTransform=ctx.transform;ctx.__originalSetTransform=ctx.setTransform;ctx.__originalResetTransform=ctx.resetTransform;ctx.__originalClip=ctx.clip;ctx.__originalMoveTo=ctx.moveTo;ctx.__originalLineTo=ctx.lineTo;ctx.__originalBezierCurveTo=ctx.bezierCurveTo;ctx.__originalRect=ctx.rect;ctx.__originalClosePath=ctx.closePath;ctx.__originalBeginPath=ctx.beginPath;ctx._removeMirroring=()=>{ctx.save=ctx.__originalSave;ctx.restore=ctx.__originalRestore;ctx.rotate=ctx.__originalRotate;ctx.scale=ctx.__originalScale;ctx.translate=ctx.__originalTranslate;ctx.transform=ctx.__originalTransform;ctx.setTransform=ctx.__originalSetTransform;ctx.resetTransform=ctx.__originalResetTransform;ctx.clip=ctx.__originalClip;ctx.moveTo=ctx.__originalMoveTo;ctx.lineTo=ctx.__originalLineTo;ctx.bezierCurveTo=ctx.__originalBezierCurveTo;ctx.rect=ctx.__originalRect;ctx.closePath=ctx.__originalClosePath;ctx.beginPath=ctx.__originalBeginPath;delete ctx._removeMirroring;};ctx.save=function ctxSave(){destCtx.save();this.__originalSave();};ctx.restore=function ctxRestore(){destCtx.restore();this.__originalRestore();};ctx.translate=function ctxTranslate(x,y){destCtx.translate(x,y);this.__originalTranslate(x,y);};ctx.scale=function ctxScale(x,y){destCtx.scale(x,y);this.__originalScale(x,y);};ctx.transform=function ctxTransform(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f);this.__originalTransform(a,b,c,d,e,f);};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f);this.__originalSetTransform(a,b,c,d,e,f);};ctx.resetTransform=function ctxResetTransform(){destCtx.resetTransform();this.__originalResetTransform();};ctx.rotate=function ctxRotate(angle){destCtx.rotate(angle);this.__originalRotate(angle);};ctx.clip=function ctxRotate(rule){destCtx.clip(rule);this.__originalClip(rule);};ctx.moveTo=function(x,y){destCtx.moveTo(x,y);this.__originalMoveTo(x,y);};ctx.lineTo=function(x,y){destCtx.lineTo(x,y);this.__originalLineTo(x,y);};ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);};ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height);this.__originalRect(x,y,width,height);};ctx.closePath=function(){destCtx.closePath();this.__originalClosePath();};ctx.beginPath=function(){destCtx.beginPath();this.__originalBeginPath();};}class CachedCanvases{constructor(canvasFactory){this.canvasFactory=canvasFactory;this.cache=Object.create(null);}getCanvas(id,width,height){let canvasEntry;if(this.cache[id]!==undefined){canvasEntry=this.cache[id];this.canvasFactory.reset(canvasEntry,width,height);}else{canvasEntry=this.canvasFactory.create(width,height);this.cache[id]=canvasEntry;}return canvasEntry;}delete(id){delete this.cache[id];}clear(){for(const id in this.cache){const canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry);delete this.cache[id];}}}function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){const[a,b,c,d,tx,ty]=(0,display_utils.getCurrentTransform)(ctx);if(b===0&&c===0){const tlX=destX*a+tx;const rTlX=Math.round(tlX);const tlY=destY*d+ty;const rTlY=Math.round(tlY);const brX=(destX+destW)*a+tx;const rWidth=Math.abs(Math.round(brX)-rTlX)||1;const brY=(destY+destH)*d+ty;const rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight);ctx.setTransform(a,b,c,d,tx,ty);return[rWidth,rHeight];}if(a===0&&d===0){const tlX=destY*c+tx;const rTlX=Math.round(tlX);const tlY=destX*b+ty;const rTlY=Math.round(tlY);const brX=(destY+destH)*c+tx;const rWidth=Math.abs(Math.round(brX)-rTlX)||1;const brY=(destX+destW)*b+ty;const rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(0,Math.sign(b),Math.sign(c),0,rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rHeight,rWidth);ctx.setTransform(a,b,c,d,tx,ty);return[rHeight,rWidth];}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);const scaleX=Math.hypot(a,b);const scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH];}function compileType3Glyph(imgData){const{width,height}=imgData;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE){return null;}const POINT_TO_PROCESS_LIMIT=1000;const POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);const width1=width+1;let points=new Uint8Array(width1*(height+1));let i,j,j0;const lineSize=width+7&~7;let data=new Uint8Array(lineSize*height),pos=0;for(const elem of imgData.data){let mask=128;while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1;}}let count=0;pos=0;if(data[pos]!==0){points[0]=1;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count;}pos++;}if(data[pos]!==0){points[j]=2;++count;}for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count;}let sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count;}pos++;}if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}}pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count;}pos++;}if(data[pos]!==0){points[j0+j]=4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}const steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);const path=new Path2D();for(i=0;count&&i<=height;i++){let p=i*width1;const end=p+width;while(p<end&&!points[p]){p++;}if(p===end){continue;}path.moveTo(p%width1,i);const p0=p;let type=points[p];do{const step=steps[type];do{p+=step;}while(!points[p]);const pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0;}else{type=pp&0x33*type>>4;points[p]&=type>>2|type<<2;}path.lineTo(p%width1,p/width1|0);if(!points[p]){--count;}}while(p0!==p);--i;}data=null;points=null;const drawOutline=function(c){c.save();c.scale(1/width,-1/height);c.translate(0,-height);c.fill(path);c.beginPath();c.restore();};return drawOutline;}class CanvasExtraState{constructor(width,height){this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=util.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=util.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=util.TextRenderingMode.FILL;this.textRise=0;this.fillColor=\"#000000\";this.strokeColor=\"#000000\";this.patternFill=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps=\"none\";this.startNewPathAndClipBox([0,0,width,height]);}clone(){const clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone;}setCurrentPoint(x,y){this.x=x;this.y=y;}updatePathMinMax(transform,x,y){[x,y]=util.Util.applyTransform([x,y],transform);this.minX=Math.min(this.minX,x);this.minY=Math.min(this.minY,y);this.maxX=Math.max(this.maxX,x);this.maxY=Math.max(this.maxY,y);}updateRectMinMax(transform,rect){const p1=util.Util.applyTransform(rect,transform);const p2=util.Util.applyTransform(rect.slice(2),transform);const p3=util.Util.applyTransform([rect[0],rect[3]],transform);const p4=util.Util.applyTransform([rect[2],rect[1]],transform);this.minX=Math.min(this.minX,p1[0],p2[0],p3[0],p4[0]);this.minY=Math.min(this.minY,p1[1],p2[1],p3[1],p4[1]);this.maxX=Math.max(this.maxX,p1[0],p2[0],p3[0],p4[0]);this.maxY=Math.max(this.maxY,p1[1],p2[1],p3[1],p4[1]);}updateScalingPathMinMax(transform,minMax){util.Util.scaleMinMax(transform,minMax);this.minX=Math.min(this.minX,minMax[0]);this.minY=Math.min(this.minY,minMax[1]);this.maxX=Math.max(this.maxX,minMax[2]);this.maxY=Math.max(this.maxY,minMax[3]);}updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){const box=util.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3,minMax);if(minMax){return;}this.updateRectMinMax(transform,box);}getPathBoundingBox(){let pathType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:PathType.FILL;let transform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===PathType.STROKE){if(!transform){(0,util.unreachable)(\"Stroke bounding box must include transform.\");}const scale=util.Util.singularValueDecompose2dScale(transform);const xStrokePad=scale[0]*this.lineWidth/2;const yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad;box[1]-=yStrokePad;box[2]+=xStrokePad;box[3]+=yStrokePad;}return box;}updateClipFromPath(){const intersect=util.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0]);}isEmptyClip(){return this.minX===Infinity;}startNewPathAndClipBox(box){this.clipBox=box;this.minX=Infinity;this.minY=Infinity;this.maxX=0;this.maxY=0;}getClippedPathBoundingBox(){let pathType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:PathType.FILL;let transform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return util.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform));}}function putBinaryImageData(ctx,imgData){if(typeof ImageData!==\"undefined\"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return;}const height=imgData.height,width=imgData.width;const partialChunkHeight=height%FULL_CHUNK_HEIGHT;const fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;const totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;const chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0,destPos;const src=imgData.data;const dest=chunkImgData.data;let i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===util.ImageKind.GRAYSCALE_1BPP){const srcLength=src.byteLength;const dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2);const dest32DataLength=dest32.length;const fullSrcDiff=width+7>>3;const white=0xffffffff;const black=util.FeatureTest.isLittleEndian?0xff000000:0x000000ff;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){const srcDiff=srcLength-srcPos;let k=0;const kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;const kEndUnrolled=kEnd&~7;let mask=0;let srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black;}for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128;}dest32[destPos++]=srcByte&mask?white:black;mask>>=1;}}while(destPos<dest32DataLength){dest32[destPos++]=0;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else if(imgData.kind===util.ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=FULL_CHUNK_HEIGHT;}if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j);}}else if(imgData.kind===util.ImageKind.RGB_24BPP){thisChunkHeight=FULL_CHUNK_HEIGHT;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight;}destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else{throw new Error(`bad image kind: ${imgData.kind}`);}}function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return;}const height=imgData.height,width=imgData.width;const partialChunkHeight=height%FULL_CHUNK_HEIGHT;const fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;const totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;const chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0;const src=imgData.data;const dest=chunkImgData.data;for(let i=0;i<totalChunks;i++){const thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;({srcPos}=convertBlackAndWhiteToRGBA({src,srcPos,dest,width,height:thisChunkHeight,nonBlackColor:0}));ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}function copyCtxState(sourceCtx,destCtx){const properties=[\"strokeStyle\",\"fillStyle\",\"fillRule\",\"globalAlpha\",\"lineWidth\",\"lineCap\",\"lineJoin\",\"miterLimit\",\"globalCompositeOperation\",\"font\",\"filter\"];for(const property of properties){if(sourceCtx[property]!==undefined){destCtx[property]=sourceCtx[property];}}if(sourceCtx.setLineDash!==undefined){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset;}}function resetCtxToDefault(ctx){ctx.strokeStyle=ctx.fillStyle=\"#000000\";ctx.fillRule=\"nonzero\";ctx.globalAlpha=1;ctx.lineWidth=1;ctx.lineCap=\"butt\";ctx.lineJoin=\"miter\";ctx.miterLimit=10;ctx.globalCompositeOperation=\"source-over\";ctx.font=\"10px sans-serif\";if(ctx.setLineDash!==undefined){ctx.setLineDash([]);ctx.lineDashOffset=0;}if(!util.isNodeJS){const{filter}=ctx;if(filter!==\"none\"&&filter!==\"\"){ctx.filter=\"none\";}}}function composeSMaskBackdrop(bytes,r0,g0,b0){const length=bytes.length;for(let i=3;i<length;i+=4){const alpha=bytes[i];if(alpha===0){bytes[i-3]=r0;bytes[i-2]=g0;bytes[i-1]=b0;}else if(alpha<255){const alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8;bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8;bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8;}}}function composeSMaskAlpha(maskData,layerData,transferMap){const length=maskData.length;const scale=1/255;for(let i=3;i<length;i+=4){const alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0;}}function composeSMaskLuminosity(maskData,layerData,transferMap){const length=maskData.length;for(let i=3;i<length;i+=4){const y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16;}}function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){const hasBackdrop=!!backdrop;const r0=hasBackdrop?backdrop[0]:0;const g0=hasBackdrop?backdrop[1]:0;const b0=hasBackdrop?backdrop[2]:0;const composeFn=subtype===\"Luminosity\"?composeSMaskLuminosity:composeSMaskAlpha;const PIXELS_TO_PROCESS=1048576;const chunkSize=Math.min(height,Math.ceil(PIXELS_TO_PROCESS/width));for(let row=0;row<height;row+=chunkSize){const chunkHeight=Math.min(chunkSize,height-row);const maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight);const layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);if(hasBackdrop){composeSMaskBackdrop(maskData.data,r0,g0,b0);}composeFn(maskData.data,layerData.data,transferMap);layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY);}}function composeSMask(ctx,smask,layerCtx,layerBox){const layerOffsetX=layerBox[0];const layerOffsetY=layerBox[1];const layerWidth=layerBox[2]-layerOffsetX;const layerHeight=layerBox[3]-layerOffsetY;if(layerWidth===0||layerHeight===0){return;}genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY);ctx.save();ctx.globalAlpha=1;ctx.globalCompositeOperation=\"source-over\";ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(layerCtx.canvas,0,0);ctx.restore();}function getImageSmoothingEnabled(transform,interpolate){if(interpolate){return true;}const scale=util.Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]);scale[1]=Math.fround(scale[1]);const actualScale=Math.fround((globalThis.devicePixelRatio||1)*display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);return scale[0]<=actualScale&&scale[1]<=actualScale;}const LINE_CAP_STYLES=[\"butt\",\"round\",\"square\"];const LINE_JOIN_STYLES=[\"miter\",\"round\",\"bevel\"];const NORMAL_CLIP={};const EO_CLIP={};var _CanvasGraphics_brand=/*#__PURE__*/new WeakSet();class CanvasGraphics{constructor(canvasCtx,commonObjs,objs,canvasFactory,filterFactory,_ref35,annotationCanvasMap,pageColors){let{optionalContentConfig,markedContentStack=null}=_ref35;_classPrivateMethodInitSpec(this,_CanvasGraphics_brand);this.ctx=canvasCtx;this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=true;this.markedContentStack=markedContentStack||[];this.optionalContentConfig=optionalContentConfig;this.cachedCanvases=new CachedCanvases(this.canvasFactory);this.cachedPatterns=new Map();this.annotationCanvasMap=annotationCanvasMap;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.pageColors=pageColors;this._cachedScaleForStroking=[-1,0];this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map();}getObject(data){let fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof data===\"string\"){return data.startsWith(\"g_\")?this.commonObjs.get(data):this.objs.get(data);}return fallback;}beginDrawing(_ref36){let{transform,viewport,transparency=false,background=null}=_ref36;const width=this.ctx.canvas.width;const height=this.ctx.canvas.height;const savedFillStyle=this.ctx.fillStyle;this.ctx.fillStyle=background||\"#ffffff\";this.ctx.fillRect(0,0,width,height);this.ctx.fillStyle=savedFillStyle;if(transparency){const transparentCanvas=this.cachedCanvases.getCanvas(\"transparent\",width,height);this.compositeCtx=this.ctx;this.transparentCanvas=transparentCanvas.canvas;this.ctx=transparentCanvas.context;this.ctx.save();this.ctx.transform(...(0,display_utils.getCurrentTransform)(this.compositeCtx));}this.ctx.save();resetCtxToDefault(this.ctx);if(transform){this.ctx.transform(...transform);this.outputScaleX=transform[0];this.outputScaleY=transform[0];}this.ctx.transform(...viewport.transform);this.viewportScale=viewport.scale;this.baseTransform=(0,display_utils.getCurrentTransform)(this.ctx);}executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){const argsArray=operatorList.argsArray;const fnArray=operatorList.fnArray;let i=executionStartIdx||0;const argsArrayLen=argsArray.length;if(argsArrayLen===i){return i;}const chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback===\"function\";const endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;let steps=0;const commonObjs=this.commonObjs;const objs=this.objs;let fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i;}fnId=fnArray[i];if(fnId!==util.OPS.dependency){this[fnId].apply(this,argsArray[i]);}else{for(const depObjId of argsArray[i]){const objsPool=depObjId.startsWith(\"g_\")?commonObjs:objs;if(!objsPool.has(depObjId)){objsPool.get(depObjId,continueCallback);return i;}}}i++;if(i===argsArrayLen){return i;}if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i;}steps=0;}}}endDrawing(){_assertClassBrand(_CanvasGraphics_brand,this,_restoreInitialState).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();for(const cache of this._cachedBitmapsMap.values()){for(const canvas of cache.values()){if(typeof HTMLCanvasElement!==\"undefined\"&&canvas instanceof HTMLCanvasElement){canvas.width=canvas.height=0;}}cache.clear();}this._cachedBitmapsMap.clear();_assertClassBrand(_CanvasGraphics_brand,this,_drawFilter).call(this);}_scaleImage(img,inverseTransform){const width=img.width;const height=img.height;let widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1);let heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1);let paintWidth=width,paintHeight=height;let tmpCanvasId=\"prescale1\";let tmpCanvas,tmpCtx;while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){let newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=paintWidth>=16384?Math.floor(paintWidth/2)-1||1:Math.ceil(paintWidth/2);widthScale/=paintWidth/newWidth;}if(heightScale>2&&paintHeight>1){newHeight=paintHeight>=16384?Math.floor(paintHeight/2)-1||1:Math.ceil(paintHeight)/2;heightScale/=paintHeight/newHeight;}tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);img=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId===\"prescale1\"?\"prescale2\":\"prescale1\";}return{img,paintWidth,paintHeight};}_createMaskCanvas(img){const ctx=this.ctx;const{width,height}=img;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;const currentTransform=(0,display_utils.getCurrentTransform)(ctx);let cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){const mainKey=img.bitmap||img.data.buffer;cacheKey=JSON.stringify(isPatternFill?currentTransform:[currentTransform.slice(0,4),fillColor]);cache=this._cachedBitmapsMap.get(mainKey);if(!cache){cache=new Map();this._cachedBitmapsMap.set(mainKey,cache);}const cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){const offsetX=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]);const offsetY=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX,offsetY};}scaled=cachedImage;}if(!scaled){maskCanvas=this.cachedCanvases.getCanvas(\"maskCanvas\",width,height);putBinaryImageMask(maskCanvas.context,img);}let maskToCanvas=util.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=util.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);const[minX,minY,maxX,maxY]=util.Util.getAxialAlignedBoundingBox([0,0,width,height],maskToCanvas);const drawnWidth=Math.round(maxX-minX)||1;const drawnHeight=Math.round(maxY-minY)||1;const fillCanvas=this.cachedCanvases.getCanvas(\"fillCanvas\",drawnWidth,drawnHeight);const fillCtx=fillCanvas.context;const offsetX=minX;const offsetY=minY;fillCtx.translate(-offsetX,-offsetY);fillCtx.transform(...maskToCanvas);if(!scaled){scaled=this._scaleImage(maskCanvas.canvas,(0,display_utils.getCurrentTransformInverse)(fillCtx));scaled=scaled.img;if(cache&&isPatternFill){cache.set(cacheKey,scaled);}}fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,display_utils.getCurrentTransform)(fillCtx),img.interpolate);drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height);fillCtx.globalCompositeOperation=\"source-in\";const inverse=util.Util.transform((0,display_utils.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,PathType.FILL):fillColor;fillCtx.fillRect(0,0,width,height);if(cache&&!isPatternFill){this.cachedCanvases.delete(\"fillCanvas\");cache.set(cacheKey,fillCanvas.canvas);}return{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)};}setLineWidth(width){if(width!==this.current.lineWidth){this._cachedScaleForStroking[0]=-1;}this.current.lineWidth=width;this.ctx.lineWidth=width;}setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style];}setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style];}setMiterLimit(limit){this.ctx.miterLimit=limit;}setDash(dashArray,dashPhase){const ctx=this.ctx;if(ctx.setLineDash!==undefined){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase;}}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states){switch(key){case\"LW\":this.setLineWidth(value);break;case\"LC\":this.setLineCap(value);break;case\"LJ\":this.setLineJoin(value);break;case\"ML\":this.setMiterLimit(value);break;case\"D\":this.setDash(value[0],value[1]);break;case\"RI\":this.setRenderingIntent(value);break;case\"FL\":this.setFlatness(value);break;case\"Font\":this.setFont(value[0],value[1]);break;case\"CA\":this.current.strokeAlpha=value;break;case\"ca\":this.current.fillAlpha=value;this.ctx.globalAlpha=value;break;case\"BM\":this.ctx.globalCompositeOperation=value;break;case\"SMask\":this.current.activeSMask=value?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case\"TR\":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(value);break;}}}get inSMaskMode(){return!!this.suspendedCtx;}checkSMaskState(){const inSMaskMode=this.inSMaskMode;if(this.current.activeSMask&&!inSMaskMode){this.beginSMaskMode();}else if(!this.current.activeSMask&&inSMaskMode){this.endSMaskMode();}}beginSMaskMode(){if(this.inSMaskMode){throw new Error(\"beginSMaskMode called while already in smask mode\");}const drawnWidth=this.ctx.canvas.width;const drawnHeight=this.ctx.canvas.height;const cacheId=\"smaskGroupAt\"+this.groupLevel;const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx;this.ctx=scratchCanvas.context;const ctx=this.ctx;ctx.setTransform(...(0,display_utils.getCurrentTransform)(this.suspendedCtx));copyCtxState(this.suspendedCtx,ctx);mirrorContextOperations(ctx,this.suspendedCtx);this.setGState([[\"BM\",\"source-over\"],[\"ca\",1],[\"CA\",1]]);}endSMaskMode(){if(!this.inSMaskMode){throw new Error(\"endSMaskMode called while not in smask mode\");}this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null;}compose(dirtyBox){if(!this.current.activeSMask){return;}if(!dirtyBox){dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];}else{dirtyBox[0]=Math.floor(dirtyBox[0]);dirtyBox[1]=Math.floor(dirtyBox[1]);dirtyBox[2]=Math.ceil(dirtyBox[2]);dirtyBox[3]=Math.ceil(dirtyBox[3]);}const smask=this.current.activeSMask;const suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore();}save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save();}else{this.ctx.save();}const old=this.current;this.stateStack.push(old);this.current=old.clone();}restore(){if(this.stateStack.length===0&&this.inSMaskMode){this.endSMaskMode();}if(this.stateStack.length!==0){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx);}else{this.ctx.restore();}this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}}transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}constructPath(ops,args,minMax){const ctx=this.ctx;const current=this.current;let x=current.x,y=current.y;let startX,startY;const currentTransform=(0,display_utils.getCurrentTransform)(ctx);const isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0;const minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(let i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case util.OPS.rectangle:x=args[j++];y=args[j++];const width=args[j++];const height=args[j++];const xw=x+width;const yh=y+height;ctx.moveTo(x,y);if(width===0||height===0){ctx.lineTo(xw,yh);}else{ctx.lineTo(xw,y);ctx.lineTo(xw,yh);ctx.lineTo(x,yh);}if(!isScalingMatrix){current.updateRectMinMax(currentTransform,[x,y,xw,yh]);}ctx.closePath();break;case util.OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case util.OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case util.OPS.curveTo:startX=x;startY=y;x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier);j+=6;break;case util.OPS.curveTo2:startX=x;startY=y;ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier);x=args[j+2];y=args[j+3];j+=4;break;case util.OPS.curveTo3:startX=x;startY=y;x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier);j+=4;break;case util.OPS.closePath:ctx.closePath();break;}}if(isScalingMatrix){current.updateScalingPathMinMax(currentTransform,minMaxForBezier);}current.setCurrentPoint(x,y);}closePath(){this.ctx.closePath();}stroke(){let consumePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;const ctx=this.ctx;const strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha;if(this.contentVisible){if(typeof strokeColor===\"object\"&&strokeColor?.getPattern){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.STROKE);this.rescaleAndStroke(false);ctx.restore();}else{this.rescaleAndStroke(true);}}if(consumePath){this.consumePath(this.current.getClippedPathBoundingBox());}ctx.globalAlpha=this.current.fillAlpha;}closeStroke(){this.closePath();this.stroke();}fill(){let consumePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;const ctx=this.ctx;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;let needRestore=false;if(isPatternFill){ctx.save();ctx.fillStyle=fillColor.getPattern(ctx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.FILL);needRestore=true;}const intersect=this.current.getClippedPathBoundingBox();if(this.contentVisible&&intersect!==null){if(this.pendingEOFill){ctx.fill(\"evenodd\");this.pendingEOFill=false;}else{ctx.fill();}}if(needRestore){ctx.restore();}if(consumePath){this.consumePath(intersect);}}eoFill(){this.pendingEOFill=true;this.fill();}fillStroke(){this.fill(false);this.stroke(false);this.consumePath();}eoFillStroke(){this.pendingEOFill=true;this.fillStroke();}closeFillStroke(){this.closePath();this.fillStroke();}closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke();}endPath(){this.consumePath();}clip(){this.pendingClip=NORMAL_CLIP;}eoClip(){this.pendingClip=EO_CLIP;}beginText(){this.current.textMatrix=util.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}endText(){const paths=this.pendingTextPaths;const ctx=this.ctx;if(paths===undefined){ctx.beginPath();return;}ctx.save();ctx.beginPath();for(const path of paths){ctx.setTransform(...path.transform);ctx.translate(path.x,path.y);path.addToPath(ctx,path.fontSize);}ctx.restore();ctx.clip();ctx.beginPath();delete this.pendingTextPaths;}setCharSpacing(spacing){this.current.charSpacing=spacing;}setWordSpacing(spacing){this.current.wordSpacing=spacing;}setHScale(scale){this.current.textHScale=scale/100;}setLeading(leading){this.current.leading=-leading;}setFont(fontRefName,size){const fontObj=this.commonObjs.get(fontRefName);const current=this.current;if(!fontObj){throw new Error(`Can't find font for ${fontRefName}`);}current.fontMatrix=fontObj.fontMatrix||util.FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){(0,util.warn)(\"Invalid font matrix for font \"+fontRefName);}if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return;}const name=fontObj.loadedName||\"sans-serif\";const typeface=fontObj.systemFontInfo?.css||`\"${name}\", ${fontObj.fallbackName}`;let bold=\"normal\";if(fontObj.black){bold=\"900\";}else if(fontObj.bold){bold=\"bold\";}const italic=fontObj.italic?\"italic\":\"normal\";let browserFontSize=size;if(size<MIN_FONT_SIZE){browserFontSize=MIN_FONT_SIZE;}else if(size>MAX_FONT_SIZE){browserFontSize=MAX_FONT_SIZE;}this.current.fontSizeScale=size/browserFontSize;this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`;}setTextRenderingMode(mode){this.current.textRenderingMode=mode;}setTextRise(rise){this.current.textRise=rise;}moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;}setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);}setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.hypot(a,b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}nextLine(){this.moveText(0,this.current.leading);}paintChar(character,x,y,patternTransform){const ctx=this.ctx;const current=this.current;const font=current.font;const textRenderingMode=current.textRenderingMode;const fontSize=current.fontSize/current.fontSizeScale;const fillStrokeMode=textRenderingMode&util.TextRenderingMode.FILL_STROKE_MASK;const isAddToPathSet=!!(textRenderingMode&util.TextRenderingMode.ADD_TO_PATH_FLAG);const patternFill=current.patternFill&&!font.missingFile;let addToPath;if(font.disableFontFace||isAddToPathSet||patternFill){addToPath=font.getPathGenerator(this.commonObjs,character);}if(font.disableFontFace||patternFill){ctx.save();ctx.translate(x,y);ctx.beginPath();addToPath(ctx,fontSize);if(patternTransform){ctx.setTransform(...patternTransform);}if(fillStrokeMode===util.TextRenderingMode.FILL||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){ctx.fill();}if(fillStrokeMode===util.TextRenderingMode.STROKE||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){ctx.stroke();}ctx.restore();}else{if(fillStrokeMode===util.TextRenderingMode.FILL||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y);}if(fillStrokeMode===util.TextRenderingMode.STROKE||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y);}}if(isAddToPathSet){const paths=this.pendingTextPaths||=[];paths.push({transform:(0,display_utils.getCurrentTransform)(ctx),x,y,fontSize,addToPath});}}get isFontSubpixelAAEnabled(){const{context:ctx}=this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\",10,10);ctx.scale(1.5,1);ctx.fillText(\"I\",0,10);const data=ctx.getImageData(0,0,10,10).data;let enabled=false;for(let i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break;}}return(0,util.shadow)(this,\"isFontSubpixelAAEnabled\",enabled);}showText(glyphs){const current=this.current;const font=current.font;if(font.isType3Font){return this.showType3Text(glyphs);}const fontSize=current.fontSize;if(fontSize===0){return undefined;}const ctx=this.ctx;const fontSizeScale=current.fontSizeScale;const charSpacing=current.charSpacing;const wordSpacing=current.wordSpacing;const fontDirection=current.fontDirection;const textHScale=current.textHScale*fontDirection;const glyphsLength=glyphs.length;const vertical=font.vertical;const spacingDir=vertical?1:-1;const defaultVMetrics=font.defaultVMetrics;const widthAdvanceScale=fontSize*current.fontMatrix[0];const simpleFillText=current.textRenderingMode===util.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save();ctx.transform(...current.textMatrix);ctx.translate(current.x,current.y+current.textRise);if(fontDirection>0){ctx.scale(textHScale,-1);}else{ctx.scale(textHScale,1);}let patternTransform;if(current.patternFill){ctx.save();const pattern=current.fillColor.getPattern(ctx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.FILL);patternTransform=(0,display_utils.getCurrentTransform)(ctx);ctx.restore();ctx.fillStyle=pattern;}let lineWidth=current.lineWidth;const scale=current.textMatrixScale;if(scale===0||lineWidth===0){const fillStrokeMode=current.textRenderingMode&util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===util.TextRenderingMode.STROKE||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){lineWidth=this.getSinglePixelWidth();}}else{lineWidth/=scale;}if(fontSizeScale!==1.0){ctx.scale(fontSizeScale,fontSizeScale);lineWidth/=fontSizeScale;}ctx.lineWidth=lineWidth;if(font.isInvalidPDFjsFont){const chars=[];let width=0;for(const glyph of glyphs){chars.push(glyph.unicode);width+=glyph.width;}ctx.fillText(chars.join(\"\"),0,0);current.x+=width*widthAdvanceScale*textHScale;ctx.restore();this.compose();return undefined;}let x=0,i;for(i=0;i<glyphsLength;++i){const glyph=glyphs[i];if(typeof glyph===\"number\"){x+=spacingDir*glyph*fontSize/1000;continue;}let restoreNeeded=false;const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;const character=glyph.fontChar;const accent=glyph.accent;let scaledX,scaledY;let width=glyph.width;if(vertical){const vmetric=glyph.vmetric||defaultVMetrics;const vx=-(glyph.vmetric?vmetric[1]:width*0.5)*widthAdvanceScale;const vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale;}else{scaledX=x/fontSizeScale;scaledY=0;}if(font.remeasure&&width>0){const measuredWidth=ctx.measureText(character).width*1000/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){const characterScaleX=width/measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX/=characterScaleX;}else if(width!==measuredWidth){scaledX+=(width-measuredWidth)/2000*fontSize/fontSizeScale;}}if(this.contentVisible&&(glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY);}else{this.paintChar(character,scaledX,scaledY,patternTransform);if(accent){const scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale;const scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform);}}}const charWidth=vertical?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection;x+=charWidth;if(restoreNeeded){ctx.restore();}}if(vertical){current.y-=x;}else{current.x+=x*textHScale;}ctx.restore();this.compose();return undefined;}showType3Text(glyphs){const ctx=this.ctx;const current=this.current;const font=current.font;const fontSize=current.fontSize;const fontDirection=current.fontDirection;const spacingDir=font.vertical?1:-1;const charSpacing=current.charSpacing;const wordSpacing=current.wordSpacing;const textHScale=current.textHScale*fontDirection;const fontMatrix=current.fontMatrix||util.FONT_IDENTITY_MATRIX;const glyphsLength=glyphs.length;const isTextInvisible=current.textRenderingMode===util.TextRenderingMode.INVISIBLE;let i,glyph,width,spacingLength;if(isTextInvisible||fontSize===0){return;}this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;ctx.save();ctx.transform(...current.textMatrix);ctx.translate(current.x,current.y);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(typeof glyph===\"number\"){spacingLength=spacingDir*glyph*fontSize/1000;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue;}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;const operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,util.warn)(`Type3 character \"${glyph.operatorListId}\" is not available.`);continue;}if(this.contentVisible){this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform(...fontMatrix);this.executeOperatorList(operatorList);this.restore();}const transformed=util.Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+spacing;ctx.translate(width,0);current.x+=width*textHScale;}ctx.restore();this.processingType3=null;}setCharWidth(xWidth,yWidth){}setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.ctx.clip();this.endPath();}getColorN_Pattern(IR){let pattern;if(IR[0]===\"TilingPattern\"){const color=IR[1];const baseTransform=this.baseTransform||(0,display_utils.getCurrentTransform)(this.ctx);const canvasGraphicsFactory={createCanvasGraphics:ctx=>new CanvasGraphics(ctx,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};pattern=new TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform);}else{pattern=this._getPattern(IR[1],IR[2]);}return pattern;}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments);}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true;}setStrokeRGBColor(r,g,b){const color=util.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color;this.current.strokeColor=color;}setFillRGBColor(r,g,b){const color=util.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color;this.current.fillColor=color;this.current.patternFill=false;}_getPattern(objId){let matrix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let pattern;if(this.cachedPatterns.has(objId)){pattern=this.cachedPatterns.get(objId);}else{pattern=getShadingPattern(this.getObject(objId));this.cachedPatterns.set(objId,pattern);}if(matrix){pattern.matrix=matrix;}return pattern;}shadingFill(objId){if(!this.contentVisible){return;}const ctx=this.ctx;this.save();const pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.SHADING);const inv=(0,display_utils.getCurrentTransformInverse)(ctx);if(inv){const{width,height}=ctx.canvas;const[x0,y0,x1,y1]=util.Util.getAxialAlignedBoundingBox([0,0,width,height],inv);this.ctx.fillRect(x0,y0,x1-x0,y1-y0);}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10);}this.compose(this.current.getClippedPathBoundingBox());this.restore();}beginInlineImage(){(0,util.unreachable)(\"Should not call beginInlineImage\");}beginImageData(){(0,util.unreachable)(\"Should not call beginImageData\");}paintFormXObjectBegin(matrix,bbox){if(!this.contentVisible){return;}this.save();this.baseTransformStack.push(this.baseTransform);if(Array.isArray(matrix)&&matrix.length===6){this.transform(...matrix);}this.baseTransform=(0,display_utils.getCurrentTransform)(this.ctx);if(bbox){const width=bbox[2]-bbox[0];const height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.current.updateRectMinMax((0,display_utils.getCurrentTransform)(this.ctx),bbox);this.clip();this.endPath();}}paintFormXObjectEnd(){if(!this.contentVisible){return;}this.restore();this.baseTransform=this.baseTransformStack.pop();}beginGroup(group){if(!this.contentVisible){return;}this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null;}const currentCtx=this.ctx;if(!group.isolated){(0,util.info)(\"TODO: Support non-isolated groups.\");}if(group.knockout){(0,util.warn)(\"Knockout groups not supported.\");}const currentTransform=(0,display_utils.getCurrentTransform)(currentCtx);if(group.matrix){currentCtx.transform(...group.matrix);}if(!group.bbox){throw new Error(\"Bounding box is required.\");}let bounds=util.Util.getAxialAlignedBoundingBox(group.bbox,(0,display_utils.getCurrentTransform)(currentCtx));const canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=util.Util.intersect(bounds,canvasBounds)||[0,0,0,0];const offsetX=Math.floor(bounds[0]);const offsetY=Math.floor(bounds[1]);let drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);let drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);let scaleX=1,scaleY=1;if(drawnWidth>MAX_GROUP_SIZE){scaleX=drawnWidth/MAX_GROUP_SIZE;drawnWidth=MAX_GROUP_SIZE;}if(drawnHeight>MAX_GROUP_SIZE){scaleY=drawnHeight/MAX_GROUP_SIZE;drawnHeight=MAX_GROUP_SIZE;}this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);let cacheId=\"groupAt\"+this.groupLevel;if(group.smask){cacheId+=\"_smask_\"+this.smaskCounter++%2;}const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);const groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY);groupCtx.translate(-offsetX,-offsetY);groupCtx.transform(...currentTransform);if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX,offsetY,scaleX,scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null});}else{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.scale(scaleX,scaleY);currentCtx.save();}copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([[\"BM\",\"source-over\"],[\"ca\",1],[\"CA\",1]]);this.groupStack.push(currentCtx);this.groupLevel++;}endGroup(group){if(!this.contentVisible){return;}this.groupLevel--;const groupCtx=this.ctx;const ctx=this.groupStack.pop();this.ctx=ctx;this.ctx.imageSmoothingEnabled=false;if(group.smask){this.tempSMask=this.smaskStack.pop();this.restore();}else{this.ctx.restore();const currentMtx=(0,display_utils.getCurrentTransform)(this.ctx);this.restore();this.ctx.save();this.ctx.setTransform(...currentMtx);const dirtyBox=util.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0);this.ctx.restore();this.compose(dirtyBox);}}beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){_assertClassBrand(_CanvasGraphics_brand,this,_restoreInitialState).call(this);resetCtxToDefault(this.ctx);this.ctx.save();this.save();if(this.baseTransform){this.ctx.setTransform(...this.baseTransform);}if(Array.isArray(rect)&&rect.length===4){const width=rect[2]-rect[0];const height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice();transform[4]-=rect[0];transform[5]-=rect[1];rect=rect.slice();rect[0]=rect[1]=0;rect[2]=width;rect[3]=height;const[scaleX,scaleY]=util.Util.singularValueDecompose2dScale((0,display_utils.getCurrentTransform)(this.ctx));const{viewportScale}=this;const canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale);const canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);const{canvas,context}=this.annotationCanvas;this.annotationCanvasMap.set(id,canvas);this.annotationCanvas.savedCtx=this.ctx;this.ctx=context;this.ctx.save();this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY);resetCtxToDefault(this.ctx);}else{resetCtxToDefault(this.ctx);this.ctx.rect(rect[0],rect[1],width,height);this.ctx.clip();this.endPath();}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform(...transform);this.transform(...matrix);}endAnnotation(){if(this.annotationCanvas){this.ctx.restore();_assertClassBrand(_CanvasGraphics_brand,this,_drawFilter).call(this);this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas;}}paintImageMaskXObject(img){if(!this.contentVisible){return;}const count=img.count;img=this.getObject(img.data,img);img.count=count;const ctx=this.ctx;const glyph=this.processingType3;if(glyph){if(glyph.compiled===undefined){glyph.compiled=compileType3Glyph(img);}if(glyph.compiled){glyph.compiled(ctx);return;}}const mask=this._createMaskCanvas(img);const maskCanvas=mask.canvas;ctx.save();ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY);ctx.restore();this.compose();}paintImageMaskXObjectRepeat(img,scaleX){let skewX=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let skewY=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;let scaleY=arguments.length>4?arguments[4]:undefined;let positions=arguments.length>5?arguments[5]:undefined;if(!this.contentVisible){return;}img=this.getObject(img.data,img);const ctx=this.ctx;ctx.save();const currentTransform=(0,display_utils.getCurrentTransform)(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);const mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,mask.offsetX-currentTransform[4],mask.offsetY-currentTransform[5]);for(let i=0,ii=positions.length;i<ii;i+=2){const trans=util.Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]);const[x,y]=util.Util.applyTransform([0,0],trans);ctx.drawImage(mask.canvas,x,y);}ctx.restore();this.compose();}paintImageMaskXObjectGroup(images){if(!this.contentVisible){return;}const ctx=this.ctx;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;for(const image of images){const{data,width,height,transform}=image;const maskCanvas=this.cachedCanvases.getCanvas(\"maskCanvas\",width,height);const maskCtx=maskCanvas.context;maskCtx.save();const img=this.getObject(data,image);putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation=\"source-in\";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.FILL):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform(...transform);ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore();}this.compose();}paintImageXObject(objId){if(!this.contentVisible){return;}const imgData=this.getObject(objId);if(!imgData){(0,util.warn)(\"Dependent image isn't ready yet\");return;}this.paintInlineImageXObject(imgData);}paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible){return;}const imgData=this.getObject(objId);if(!imgData){(0,util.warn)(\"Dependent image isn't ready yet\");return;}const width=imgData.width;const height=imgData.height;const map=[];for(let i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});}this.paintInlineImageXObjectGroup(imgData,map);}applyTransferMapsToCanvas(ctx){if(this.current.transferMaps!==\"none\"){ctx.filter=this.current.transferMaps;ctx.drawImage(ctx.canvas,0,0);ctx.filter=\"none\";}return ctx.canvas;}applyTransferMapsToBitmap(imgData){if(this.current.transferMaps===\"none\"){return imgData.bitmap;}const{bitmap,width,height}=imgData;const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",width,height);const tmpCtx=tmpCanvas.context;tmpCtx.filter=this.current.transferMaps;tmpCtx.drawImage(bitmap,0,0);tmpCtx.filter=\"none\";return tmpCanvas.canvas;}paintInlineImageXObject(imgData){if(!this.contentVisible){return;}const width=imgData.width;const height=imgData.height;const ctx=this.ctx;this.save();if(!util.isNodeJS){const{filter}=ctx;if(filter!==\"none\"&&filter!==\"\"){ctx.filter=\"none\";}}ctx.scale(1/width,-1/height);let imgToPaint;if(imgData.bitmap){imgToPaint=this.applyTransferMapsToBitmap(imgData);}else if(typeof HTMLElement===\"function\"&&imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData;}else{const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",width,height);const tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}const scaled=this._scaleImage(imgToPaint,(0,display_utils.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,display_utils.getCurrentTransform)(ctx),imgData.interpolate);drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);this.compose();this.restore();}paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible){return;}const ctx=this.ctx;let imgToPaint;if(imgData.bitmap){imgToPaint=imgData.bitmap;}else{const w=imgData.width;const h=imgData.height;const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",w,h);const tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}for(const entry of map){ctx.save();ctx.transform(...entry.transform);ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,imgToPaint,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);ctx.restore();}this.compose();}paintSolidColorImageMask(){if(!this.contentVisible){return;}this.ctx.fillRect(0,0,1,1);this.compose();}markPoint(tag){}markPointProps(tag,properties){}beginMarkedContent(tag){this.markedContentStack.push({visible:true});}beginMarkedContentProps(tag,properties){if(tag===\"OC\"){this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)});}else{this.markedContentStack.push({visible:true});}this.contentVisible=this.isContentVisible();}endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible();}beginCompat(){}endCompat(){}consumePath(clipBox){const isEmpty=this.current.isEmptyClip();if(this.pendingClip){this.current.updateClipFromPath();}if(!this.pendingClip){this.compose(clipBox);}const ctx=this.ctx;if(this.pendingClip){if(!isEmpty){if(this.pendingClip===EO_CLIP){ctx.clip(\"evenodd\");}else{ctx.clip();}}this.pendingClip=null;}this.current.startNewPathAndClipBox(this.current.clipBox);ctx.beginPath();}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,display_utils.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0){this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));}else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]);const normX=Math.hypot(m[0],m[2]);const normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet;}}return this._cachedGetSinglePixelWidth;}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth}=this.current;const{a,b,c,d}=this.ctx.getTransform();let scaleX,scaleY;if(b===0&&c===0){const normX=Math.abs(a);const normY=Math.abs(d);if(normX===normY){if(lineWidth===0){scaleX=scaleY=1/normX;}else{const scaledLineWidth=normX*lineWidth;scaleX=scaleY=scaledLineWidth<1?1/scaledLineWidth:1;}}else if(lineWidth===0){scaleX=1/normX;scaleY=1/normY;}else{const scaledXLineWidth=normX*lineWidth;const scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1;scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1;}}else{const absDet=Math.abs(a*d-b*c);const normX=Math.hypot(a,b);const normY=Math.hypot(c,d);if(lineWidth===0){scaleX=normY/absDet;scaleY=normX/absDet;}else{const baseArea=lineWidth*absDet;scaleX=normY>baseArea?normY/baseArea:1;scaleY=normX>baseArea?normX/baseArea:1;}}this._cachedScaleForStroking[0]=scaleX;this._cachedScaleForStroking[1]=scaleY;}return this._cachedScaleForStroking;}rescaleAndStroke(saveRestore){const{ctx}=this;const{lineWidth}=this.current;const[scaleX,scaleY]=this.getScaleForStroking();ctx.lineWidth=lineWidth||1;if(scaleX===1&&scaleY===1){ctx.stroke();return;}const dashes=ctx.getLineDash();if(saveRestore){ctx.save();}ctx.scale(scaleX,scaleY);if(dashes.length>0){const scale=Math.max(scaleX,scaleY);ctx.setLineDash(dashes.map(x=>x/scale));ctx.lineDashOffset/=scale;}ctx.stroke();if(saveRestore){ctx.restore();}}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--){if(!this.markedContentStack[i].visible){return false;}}return true;}}function _restoreInitialState(){while(this.stateStack.length||this.inSMaskMode){this.restore();}this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null;}}function _drawFilter(){if(this.pageColors){const hcmFilterId=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(hcmFilterId!==\"none\"){const savedFilter=this.ctx.filter;this.ctx.filter=hcmFilterId;this.ctx.drawImage(this.ctx.canvas,0,0);this.ctx.filter=savedFilter;}}}for(const op in util.OPS){if(CanvasGraphics.prototype[op]!==undefined){CanvasGraphics.prototype[util.OPS[op]]=CanvasGraphics.prototype[op];}}/***/}),/***/419:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _PixelsPerInch;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */DOMCMapReaderFactory:()=>(/* binding */DOMCMapReaderFactory),/* harmony export */DOMCanvasFactory:()=>(/* binding */DOMCanvasFactory),/* harmony export */DOMFilterFactory:()=>(/* binding */DOMFilterFactory),/* harmony export */DOMSVGFactory:()=>(/* binding */DOMSVGFactory),/* harmony export */DOMStandardFontDataFactory:()=>(/* binding */DOMStandardFontDataFactory),/* harmony export */PDFDateString:()=>(/* binding */PDFDateString),/* harmony export */PageViewport:()=>(/* binding */PageViewport),/* harmony export */PixelsPerInch:()=>(/* binding */PixelsPerInch),/* harmony export */RenderingCancelledException:()=>(/* binding */RenderingCancelledException),/* harmony export */StatTimer:()=>(/* binding */StatTimer),/* harmony export */fetchData:()=>(/* binding */fetchData),/* harmony export */getColorValues:()=>(/* binding */getColorValues),/* harmony export */getCurrentTransform:()=>(/* binding */getCurrentTransform),/* harmony export */getCurrentTransformInverse:()=>(/* binding */getCurrentTransformInverse),/* harmony export */getFilenameFromUrl:()=>(/* binding */getFilenameFromUrl),/* harmony export */getPdfFilenameFromUrl:()=>(/* binding */getPdfFilenameFromUrl),/* harmony export */getRGB:()=>(/* binding */getRGB),/* harmony export */getXfaPageViewport:()=>(/* binding */getXfaPageViewport),/* harmony export */isDataScheme:()=>(/* binding */isDataScheme),/* harmony export */isPdfFile:()=>(/* binding */isPdfFile),/* harmony export */isValidFetchUrl:()=>(/* binding */isValidFetchUrl),/* harmony export */noContextMenu:()=>(/* binding */noContextMenu),/* harmony export */setLayerDimensions:()=>(/* binding */setLayerDimensions)/* harmony export */});/* unused harmony export deprecated */ /* harmony import */var _base_factory_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(583);/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(292);const SVG_NS=\"http://www.w3.org/2000/svg\";class PixelsPerInch{}_PixelsPerInch=PixelsPerInch;_defineProperty(PixelsPerInch,\"CSS\",96.0);_defineProperty(PixelsPerInch,\"PDF\",72.0);_defineProperty(PixelsPerInch,\"PDF_TO_CSS_UNITS\",_PixelsPerInch.CSS/_PixelsPerInch.PDF);var _cache=/*#__PURE__*/new WeakMap();var _defs=/*#__PURE__*/new WeakMap();var _docId2=/*#__PURE__*/new WeakMap();var _document=/*#__PURE__*/new WeakMap();var _hcmCache=/*#__PURE__*/new WeakMap();var _id=/*#__PURE__*/new WeakMap();var _DOMFilterFactory_brand=/*#__PURE__*/new WeakSet();class DOMFilterFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseFilterFactory{constructor(){let{docId,ownerDocument=globalThis.document}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super();_classPrivateMethodInitSpec(this,_DOMFilterFactory_brand);_classPrivateFieldInitSpec(this,_cache,void 0);_classPrivateFieldInitSpec(this,_defs,void 0);_classPrivateFieldInitSpec(this,_docId2,void 0);_classPrivateFieldInitSpec(this,_document,void 0);_classPrivateFieldInitSpec(this,_hcmCache,void 0);_classPrivateFieldInitSpec(this,_id,0);_classPrivateFieldSet(_docId2,this,docId);_classPrivateFieldSet(_document,this,ownerDocument);}addFilter(maps){var _this$id,_this$id2;if(!maps){return\"none\";}let value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(maps);if(value){return value;}let tableR,tableG,tableB,key;if(maps.length===1){const mapR=maps[0];const buffer=new Array(256);for(let i=0;i<256;i++){buffer[i]=mapR[i]/255;}key=tableR=tableG=tableB=buffer.join(\",\");}else{const[mapR,mapG,mapB]=maps;const bufferR=new Array(256);const bufferG=new Array(256);const bufferB=new Array(256);for(let i=0;i<256;i++){bufferR[i]=mapR[i]/255;bufferG[i]=mapG[i]/255;bufferB[i]=mapB[i]/255;}tableR=bufferR.join(\",\");tableG=bufferG.join(\",\");tableB=bufferB.join(\",\");key=`${tableR}${tableG}${tableB}`;}value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(key);if(value){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(maps,value);return value;}const id=`g_${_classPrivateFieldGet(_docId2,this)}_transfer_map_${(_classPrivateFieldSet(_id,this,(_this$id=_classPrivateFieldGet(_id,this),_this$id2=_this$id++,_this$id)),_this$id2)}`;const url=`url(#${id})`;_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(maps,url);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(key,url);const filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,tableR,tableG,tableB,filter);return url;}addHCMFilter(fgColor,bgColor){const key=`${fgColor}-${bgColor}`;const filterName=\"base\";let info=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).get(filterName);if(info?.key===key){return info.url;}if(info){info.filter?.remove();info.key=key;info.url=\"none\";info.filter=null;}else{info={key,url:\"none\",filter:null};_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).set(filterName,info);}if(!fgColor||!bgColor){return info.url;}const fgRGB=_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).call(this,fgColor);fgColor=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.makeHexColor(...fgRGB);const bgRGB=_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).call(this,bgColor);bgColor=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.makeHexColor(...bgRGB);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color=\"\";if(fgColor===\"#000000\"&&bgColor===\"#ffffff\"||fgColor===bgColor){return info.url;}const map=new Array(256);for(let i=0;i<=255;i++){const x=i/255;map[i]=x<=0.03928?x/12.92:((x+0.055)/1.055)**2.4;}const table=map.join(\",\");const id=`g_${_classPrivateFieldGet(_docId2,this)}_hcm_filter`;const filter=info.filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,table,table,table,filter);_assertClassBrand(_DOMFilterFactory_brand,this,_addGrayConversion).call(this,filter);const getSteps=(c,n)=>{const start=fgRGB[c]/255;const end=bgRGB[c]/255;const arr=new Array(n+1);for(let i=0;i<=n;i++){arr[i]=start+i/n*(end-start);}return arr.join(\",\");};_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,getSteps(0,5),getSteps(1,5),getSteps(2,5),filter);info.url=`url(#${id})`;return info.url;}addHighlightHCMFilter(filterName,fgColor,bgColor,newFgColor,newBgColor){const key=`${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;let info=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).get(filterName);if(info?.key===key){return info.url;}if(info){info.filter?.remove();info.key=key;info.url=\"none\";info.filter=null;}else{info={key,url:\"none\",filter:null};_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).set(filterName,info);}if(!fgColor||!bgColor){return info.url;}const[fgRGB,bgRGB]=[fgColor,bgColor].map(_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).bind(this));let fgGray=Math.round(0.2126*fgRGB[0]+0.7152*fgRGB[1]+0.0722*fgRGB[2]);let bgGray=Math.round(0.2126*bgRGB[0]+0.7152*bgRGB[1]+0.0722*bgRGB[2]);let[newFgRGB,newBgRGB]=[newFgColor,newBgColor].map(_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).bind(this));if(bgGray<fgGray){[fgGray,bgGray,newFgRGB,newBgRGB]=[bgGray,fgGray,newBgRGB,newFgRGB];}_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color=\"\";const getSteps=(fg,bg,n)=>{const arr=new Array(256);const step=(bgGray-fgGray)/n;const newStart=fg/255;const newStep=(bg-fg)/(255*n);let prev=0;for(let i=0;i<=n;i++){const k=Math.round(fgGray+i*step);const value=newStart+i*newStep;for(let j=prev;j<=k;j++){arr[j]=value;}prev=k+1;}for(let i=prev;i<256;i++){arr[i]=arr[prev-1];}return arr.join(\",\");};const id=`g_${_classPrivateFieldGet(_docId2,this)}_hcm_${filterName}_filter`;const filter=info.filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addGrayConversion).call(this,filter);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,getSteps(newFgRGB[0],newBgRGB[0],5),getSteps(newFgRGB[1],newBgRGB[1],5),getSteps(newFgRGB[2],newBgRGB[2],5),filter);info.url=`url(#${id})`;return info.url;}destroy(){let keepHCM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(keepHCM&&_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).size!==0){return;}if(_classPrivateFieldGet(_defs,this)){_classPrivateFieldGet(_defs,this).parentNode.parentNode.remove();_classPrivateFieldSet(_defs,this,null);}if(_classPrivateFieldGet(_cache,this)){_classPrivateFieldGet(_cache,this).clear();_classPrivateFieldSet(_cache,this,null);}_classPrivateFieldSet(_id,this,0);}}function _get_cache(_this2){return _classPrivateFieldGet(_cache,_this2)||_classPrivateFieldSet(_cache,_this2,new Map());}function _get_hcmCache(_this3){return _classPrivateFieldGet(_hcmCache,_this3)||_classPrivateFieldSet(_hcmCache,_this3,new Map());}function _get_defs(_this4){if(!_classPrivateFieldGet(_defs,_this4)){const div=_classPrivateFieldGet(_document,_this4).createElement(\"div\");const{style}=div;style.visibility=\"hidden\";style.contain=\"strict\";style.width=style.height=0;style.position=\"absolute\";style.top=style.left=0;style.zIndex=-1;const svg=_classPrivateFieldGet(_document,_this4).createElementNS(SVG_NS,\"svg\");svg.setAttribute(\"width\",0);svg.setAttribute(\"height\",0);_classPrivateFieldSet(_defs,_this4,_classPrivateFieldGet(_document,_this4).createElementNS(SVG_NS,\"defs\"));div.append(svg);svg.append(_classPrivateFieldGet(_defs,_this4));_classPrivateFieldGet(_document,_this4).body.append(div);}return _classPrivateFieldGet(_defs,_this4);}function _addGrayConversion(filter){const feColorMatrix=_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,\"feColorMatrix\");feColorMatrix.setAttribute(\"type\",\"matrix\");feColorMatrix.setAttribute(\"values\",\"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");filter.append(feColorMatrix);}function _createFilter(id){const filter=_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,\"filter\");filter.setAttribute(\"color-interpolation-filters\",\"sRGB\");filter.setAttribute(\"id\",id);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).append(filter);return filter;}function _appendFeFunc(feComponentTransfer,func,table){const feFunc=_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,func);feFunc.setAttribute(\"type\",\"discrete\");feFunc.setAttribute(\"tableValues\",table);feComponentTransfer.append(feFunc);}function _addTransferMapConversion(rTable,gTable,bTable,filter){const feComponentTransfer=_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,\"feComponentTransfer\");filter.append(feComponentTransfer);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,\"feFuncR\",rTable);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,\"feFuncG\",gTable);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,\"feFuncB\",bTable);}function _getRGB(color){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color=color;return getRGB(getComputedStyle(_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs)).getPropertyValue(\"color\"));}class DOMCanvasFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCanvasFactory{constructor(){let{ownerDocument=globalThis.document}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super();this._document=ownerDocument;}_createCanvas(width,height){const canvas=this._document.createElement(\"canvas\");canvas.width=width;canvas.height=height;return canvas;}}async function fetchData(url){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"text\";if(isValidFetchUrl(url,document.baseURI)){const response=await fetch(url);if(!response.ok){throw new Error(response.statusText);}switch(type){case\"arraybuffer\":return response.arrayBuffer();case\"blob\":return response.blob();case\"json\":return response.json();}return response.text();}return new Promise((resolve,reject)=>{const request=new XMLHttpRequest();request.open(\"GET\",url,true);request.responseType=type;request.onreadystatechange=()=>{if(request.readyState!==XMLHttpRequest.DONE){return;}if(request.status===200||request.status===0){switch(type){case\"arraybuffer\":case\"blob\":case\"json\":resolve(request.response);return;}resolve(request.responseText);return;}reject(new Error(request.statusText));};request.send(null);});}class DOMCMapReaderFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url,this.isCompressed?\"arraybuffer\":\"text\").then(data=>({cMapData:data instanceof ArrayBuffer?new Uint8Array(data):(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.stringToBytes)(data),compressionType}));}}class DOMStandardFontDataFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url,\"arraybuffer\").then(data=>new Uint8Array(data));}}class DOMSVGFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseSVGFactory{_createSVG(type){return document.createElementNS(SVG_NS,type);}}class PageViewport{constructor(_ref37){let{viewBox,scale,rotation,offsetX=0,offsetY=0,dontFlip=false}=_ref37;this.viewBox=viewBox;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;const centerX=(viewBox[2]+viewBox[0])/2;const centerY=(viewBox[3]+viewBox[1])/2;let rotateA,rotateB,rotateC,rotateD;rotation%=360;if(rotation<0){rotation+=360;}switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;case 0:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break;default:throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");}if(dontFlip){rotateC=-rotateC;rotateD=-rotateD;}let offsetCanvasX,offsetCanvasY;let width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=(viewBox[3]-viewBox[1])*scale;height=(viewBox[2]-viewBox[0])*scale;}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=(viewBox[2]-viewBox[0])*scale;height=(viewBox[3]-viewBox[1])*scale;}this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;}get rawDims(){const{viewBox}=this;return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.shadow)(this,\"rawDims\",{pageWidth:viewBox[2]-viewBox[0],pageHeight:viewBox[3]-viewBox[1],pageX:viewBox[0],pageY:viewBox[1]});}clone(){let{scale=this.scale,rotation=this.rotation,offsetX=this.offsetX,offsetY=this.offsetY,dontFlip=false}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new PageViewport({viewBox:this.viewBox.slice(),scale,rotation,offsetX,offsetY,dontFlip});}convertToViewportPoint(x,y){return _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([x,y],this.transform);}convertToViewportRectangle(rect){const topLeft=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([rect[0],rect[1]],this.transform);const bottomRight=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]];}convertToPdfPoint(x,y){return _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyInverseTransform([x,y],this.transform);}}class RenderingCancelledException extends _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.BaseException{constructor(msg){let extraDelay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;super(msg,\"RenderingCancelledException\");this.extraDelay=extraDelay;}}function isDataScheme(url){const ii=url.length;let i=0;while(i<ii&&url[i].trim()===\"\"){i++;}return url.substring(i,i+5).toLowerCase()===\"data:\";}function isPdfFile(filename){return typeof filename===\"string\"&&/\\.pdf$/i.test(filename);}function getFilenameFromUrl(url){let onlyStripPath=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!onlyStripPath){[url]=url.split(/[#?]/,1);}return url.substring(url.lastIndexOf(\"/\")+1);}function getPdfFilenameFromUrl(url){let defaultFilename=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"document.pdf\";if(typeof url!==\"string\"){return defaultFilename;}if(isDataScheme(url)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');return defaultFilename;}const reURI=/^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;const reFilename=/[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;const splitURI=reURI.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.includes(\"%\")){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0];}catch{}}}return suggestedFilename||defaultFilename;}class StatTimer{constructor(){_defineProperty(this,\"started\",Object.create(null));_defineProperty(this,\"times\",[]);}time(name){if(name in this.started){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(`Timer is already running for ${name}`);}this.started[name]=Date.now();}timeEnd(name){if(!(name in this.started)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(`Timer has not been started for ${name}`);}this.times.push({name,start:this.started[name],end:Date.now()});delete this.started[name];}toString(){const outBuf=[];let longest=0;for(const{name}of this.times){longest=Math.max(name.length,longest);}for(const{name,start,end}of this.times){outBuf.push(`${name.padEnd(longest)} ${end-start}ms\\n`);}return outBuf.join(\"\");}}function isValidFetchUrl(url,baseUrl){try{const{protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return protocol===\"http:\"||protocol===\"https:\";}catch{return false;}}function noContextMenu(e){e.preventDefault();}function deprecated(details){console.log(\"Deprecated API usage: \"+details);}let pdfDateStringRegex;class PDFDateString{static toDateObject(input){if(!input||typeof input!==\"string\"){return null;}pdfDateStringRegex||=new RegExp(\"^D:\"+\"(\\\\d{4})\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"([Z|+|-])?\"+\"(\\\\d{2})?\"+\"'?\"+\"(\\\\d{2})?\"+\"'?\");const matches=pdfDateStringRegex.exec(input);if(!matches){return null;}const year=parseInt(matches[1],10);let month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;const universalTimeRelation=matches[7]||\"Z\";let offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0;if(universalTimeRelation===\"-\"){hour+=offsetHour;minute+=offsetMinute;}else if(universalTimeRelation===\"+\"){hour-=offsetHour;minute-=offsetMinute;}return new Date(Date.UTC(year,month,day,hour,minute,second));}}function getXfaPageViewport(xfaPage,_ref38){let{scale=1,rotation=0}=_ref38;const{width,height}=xfaPage.attributes.style;const viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox,scale,rotation});}function getRGB(color){if(color.startsWith(\"#\")){const colorRGB=parseInt(color.slice(1),16);return[(colorRGB&0xff0000)>>16,(colorRGB&0x00ff00)>>8,colorRGB&0x0000ff];}if(color.startsWith(\"rgb(\")){return color.slice(4,-1).split(\",\").map(x=>parseInt(x));}if(color.startsWith(\"rgba(\")){return color.slice(5,-1).split(\",\").map(x=>parseInt(x)).slice(0,3);}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(`Not a valid color format: \"${color}\"`);return[0,0,0];}function getColorValues(colors){const span=document.createElement(\"span\");span.style.visibility=\"hidden\";document.body.append(span);for(const name of colors.keys()){span.style.color=name;const computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor));}span.remove();}function getCurrentTransform(ctx){const{a,b,c,d,e,f}=ctx.getTransform();return[a,b,c,d,e,f];}function getCurrentTransformInverse(ctx){const{a,b,c,d,e,f}=ctx.getTransform().invertSelf();return[a,b,c,d,e,f];}function setLayerDimensions(div,viewport){let mustFlip=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let mustRotate=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(viewport instanceof PageViewport){const{pageWidth,pageHeight}=viewport.rawDims;const{style}=div;const useRound=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.FeatureTest.isCSSRoundSupported;const w=`var(--scale-factor) * ${pageWidth}px`,h=`var(--scale-factor) * ${pageHeight}px`;const widthStr=useRound?`round(${w}, 1px)`:`calc(${w})`,heightStr=useRound?`round(${h}, 1px)`:`calc(${h})`;if(!mustFlip||viewport.rotation%180===0){style.width=widthStr;style.height=heightStr;}else{style.width=heightStr;style.height=widthStr;}}if(mustRotate){div.setAttribute(\"data-main-rotation\",viewport.rotation);}}/***/}),/***/47:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _DrawLayer;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */DrawLayer:()=>(/* binding */DrawLayer)/* harmony export */});/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(419);/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(292);var _parent2=/*#__PURE__*/new WeakMap();var _id2=/*#__PURE__*/new WeakMap();var _mapping=/*#__PURE__*/new WeakMap();var _toUpdate=/*#__PURE__*/new WeakMap();var _DrawLayer_brand=/*#__PURE__*/new WeakSet();class DrawLayer{constructor(_ref39){let{pageIndex}=_ref39;_classPrivateMethodInitSpec(this,_DrawLayer_brand);_classPrivateFieldInitSpec(this,_parent2,null);_classPrivateFieldInitSpec(this,_id2,0);_classPrivateFieldInitSpec(this,_mapping,new Map());_classPrivateFieldInitSpec(this,_toUpdate,new Map());this.pageIndex=pageIndex;}setParent(parent){if(!_classPrivateFieldGet(_parent2,this)){_classPrivateFieldSet(_parent2,this,parent);return;}if(_classPrivateFieldGet(_parent2,this)!==parent){if(_classPrivateFieldGet(_mapping,this).size>0){for(const root of _classPrivateFieldGet(_mapping,this).values()){root.remove();parent.append(root);}}_classPrivateFieldSet(_parent2,this,parent);}}static get _svgFactory(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.shadow)(this,\"_svgFactory\",new _display_utils_js__WEBPACK_IMPORTED_MODULE_0__.DOMSVGFactory());}highlight(outlines,color,opacity){var _this$id3,_this$id4;let isPathUpdatable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const id=(_classPrivateFieldSet(_id2,this,(_this$id3=_classPrivateFieldGet(_id2,this),_this$id4=_this$id3++,_this$id3)),_this$id4);const root=_assertClassBrand(_DrawLayer_brand,this,_createSVG).call(this,outlines.box);root.classList.add(\"highlight\");if(outlines.free){root.classList.add(\"free\");}const defs=DrawLayer._svgFactory.createElement(\"defs\");root.append(defs);const path=DrawLayer._svgFactory.createElement(\"path\");defs.append(path);const pathId=`path_p${this.pageIndex}_${id}`;path.setAttribute(\"id\",pathId);path.setAttribute(\"d\",outlines.toSVGPath());if(isPathUpdatable){_classPrivateFieldGet(_toUpdate,this).set(id,path);}const clipPathId=_assertClassBrand(_DrawLayer_brand,this,_createClipPath).call(this,defs,pathId);const use=DrawLayer._svgFactory.createElement(\"use\");root.append(use);root.setAttribute(\"fill\",color);root.setAttribute(\"fill-opacity\",opacity);use.setAttribute(\"href\",`#${pathId}`);_classPrivateFieldGet(_mapping,this).set(id,root);return{id,clipPathId:`url(#${clipPathId})`};}highlightOutline(outlines){var _this$id5,_this$id6;const id=(_classPrivateFieldSet(_id2,this,(_this$id5=_classPrivateFieldGet(_id2,this),_this$id6=_this$id5++,_this$id5)),_this$id6);const root=_assertClassBrand(_DrawLayer_brand,this,_createSVG).call(this,outlines.box);root.classList.add(\"highlightOutline\");const defs=DrawLayer._svgFactory.createElement(\"defs\");root.append(defs);const path=DrawLayer._svgFactory.createElement(\"path\");defs.append(path);const pathId=`path_p${this.pageIndex}_${id}`;path.setAttribute(\"id\",pathId);path.setAttribute(\"d\",outlines.toSVGPath());path.setAttribute(\"vector-effect\",\"non-scaling-stroke\");let maskId;if(outlines.free){root.classList.add(\"free\");const mask=DrawLayer._svgFactory.createElement(\"mask\");defs.append(mask);maskId=`mask_p${this.pageIndex}_${id}`;mask.setAttribute(\"id\",maskId);mask.setAttribute(\"maskUnits\",\"objectBoundingBox\");const rect=DrawLayer._svgFactory.createElement(\"rect\");mask.append(rect);rect.setAttribute(\"width\",\"1\");rect.setAttribute(\"height\",\"1\");rect.setAttribute(\"fill\",\"white\");const use=DrawLayer._svgFactory.createElement(\"use\");mask.append(use);use.setAttribute(\"href\",`#${pathId}`);use.setAttribute(\"stroke\",\"none\");use.setAttribute(\"fill\",\"black\");use.setAttribute(\"fill-rule\",\"nonzero\");use.classList.add(\"mask\");}const use1=DrawLayer._svgFactory.createElement(\"use\");root.append(use1);use1.setAttribute(\"href\",`#${pathId}`);if(maskId){use1.setAttribute(\"mask\",`url(#${maskId})`);}const use2=use1.cloneNode();root.append(use2);use1.classList.add(\"mainOutline\");use2.classList.add(\"secondaryOutline\");_classPrivateFieldGet(_mapping,this).set(id,root);return id;}finalizeLine(id,line){const path=_classPrivateFieldGet(_toUpdate,this).get(id);_classPrivateFieldGet(_toUpdate,this).delete(id);this.updateBox(id,line.box);path.setAttribute(\"d\",line.toSVGPath());}updateLine(id,line){const root=_classPrivateFieldGet(_mapping,this).get(id);const defs=root.firstChild;const path=defs.firstChild;path.setAttribute(\"d\",line.toSVGPath());}removeFreeHighlight(id){this.remove(id);_classPrivateFieldGet(_toUpdate,this).delete(id);}updatePath(id,line){_classPrivateFieldGet(_toUpdate,this).get(id).setAttribute(\"d\",line.toSVGPath());}updateBox(id,box){_setBox.call(DrawLayer,_classPrivateFieldGet(_mapping,this).get(id),box);}show(id,visible){_classPrivateFieldGet(_mapping,this).get(id).classList.toggle(\"hidden\",!visible);}rotate(id,angle){_classPrivateFieldGet(_mapping,this).get(id).setAttribute(\"data-main-rotation\",angle);}changeColor(id,color){_classPrivateFieldGet(_mapping,this).get(id).setAttribute(\"fill\",color);}changeOpacity(id,opacity){_classPrivateFieldGet(_mapping,this).get(id).setAttribute(\"fill-opacity\",opacity);}addClass(id,className){_classPrivateFieldGet(_mapping,this).get(id).classList.add(className);}removeClass(id,className){_classPrivateFieldGet(_mapping,this).get(id).classList.remove(className);}remove(id){if(_classPrivateFieldGet(_parent2,this)===null){return;}_classPrivateFieldGet(_mapping,this).get(id).remove();_classPrivateFieldGet(_mapping,this).delete(id);}destroy(){_classPrivateFieldSet(_parent2,this,null);for(const root of _classPrivateFieldGet(_mapping,this).values()){root.remove();}_classPrivateFieldGet(_mapping,this).clear();}}/***/_DrawLayer=DrawLayer;function _setBox(element){let{x=0,y=0,width=1,height=1}=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const{style}=element;style.top=`${100*y}%`;style.left=`${100*x}%`;style.width=`${100*width}%`;style.height=`${100*height}%`;}function _createSVG(box){const svg=_DrawLayer._svgFactory.create(1,1,true);_classPrivateFieldGet(_parent2,this).append(svg);svg.setAttribute(\"aria-hidden\",true);_setBox.call(_DrawLayer,svg,box);return svg;}function _createClipPath(defs,pathId){const clipPath=_DrawLayer._svgFactory.createElement(\"clipPath\");defs.append(clipPath);const clipPathId=`clip_${pathId}`;clipPath.setAttribute(\"id\",clipPathId);clipPath.setAttribute(\"clipPathUnits\",\"objectBoundingBox\");const clipPathUse=_DrawLayer._svgFactory.createElement(\"use\");clipPath.append(clipPathUse);clipPathUse.setAttribute(\"href\",`#${pathId}`);clipPathUse.classList.add(\"clip\");return clipPathId;}}),/***/731:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _FreeTextEditor,_HighlightEditor,_InkEditor,_StampEditor;// EXPORTS\n__webpack_require__.d(__webpack_exports__,{AnnotationEditorLayer:()=>(/* binding */AnnotationEditorLayer)});// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);// EXTERNAL MODULE: ./src/display/editor/editor.js + 1 modules\nvar editor_editor=__webpack_require__(310);// EXTERNAL MODULE: ./src/display/editor/tools.js\nvar tools=__webpack_require__(830);// EXTERNAL MODULE: ./src/display/annotation_layer.js + 1 modules\nvar annotation_layer=__webpack_require__(976);;// CONCATENATED MODULE: ./src/display/editor/freetext.js\nconst EOL_PATTERN=/\\r\\n?|\\n/g;var _boundEditorDivBlur=/*#__PURE__*/new WeakMap();var _boundEditorDivFocus=/*#__PURE__*/new WeakMap();var _boundEditorDivInput=/*#__PURE__*/new WeakMap();var _boundEditorDivKeydown=/*#__PURE__*/new WeakMap();var _boundEditorDivPaste=/*#__PURE__*/new WeakMap();var _color2=/*#__PURE__*/new WeakMap();var _content=/*#__PURE__*/new WeakMap();var _editorDivId=/*#__PURE__*/new WeakMap();var _fontSize=/*#__PURE__*/new WeakMap();var _initialData=/*#__PURE__*/new WeakMap();var _FreeTextEditor_brand=/*#__PURE__*/new WeakSet();class FreeTextEditor extends editor_editor.AnnotationEditor{static get _keyboardManager(){const proto=FreeTextEditor.prototype;const arrowChecker=self=>self.isEmpty();const small=tools.AnnotationEditorUIManager.TRANSLATE_SMALL;const big=tools.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,util.shadow)(this,\"_keyboardManager\",new tools.KeyboardManager([[[\"ctrl+s\",\"mac+meta+s\",\"ctrl+p\",\"mac+meta+p\"],proto.commitOrRemove,{bubbles:true}],[[\"ctrl+Enter\",\"mac+meta+Enter\",\"Escape\",\"mac+Escape\"],proto.commitOrRemove],[[\"ArrowLeft\",\"mac+ArrowLeft\"],proto._translateEmpty,{args:[-small,0],checker:arrowChecker}],[[\"ctrl+ArrowLeft\",\"mac+shift+ArrowLeft\"],proto._translateEmpty,{args:[-big,0],checker:arrowChecker}],[[\"ArrowRight\",\"mac+ArrowRight\"],proto._translateEmpty,{args:[small,0],checker:arrowChecker}],[[\"ctrl+ArrowRight\",\"mac+shift+ArrowRight\"],proto._translateEmpty,{args:[big,0],checker:arrowChecker}],[[\"ArrowUp\",\"mac+ArrowUp\"],proto._translateEmpty,{args:[0,-small],checker:arrowChecker}],[[\"ctrl+ArrowUp\",\"mac+shift+ArrowUp\"],proto._translateEmpty,{args:[0,-big],checker:arrowChecker}],[[\"ArrowDown\",\"mac+ArrowDown\"],proto._translateEmpty,{args:[0,small],checker:arrowChecker}],[[\"ctrl+ArrowDown\",\"mac+shift+ArrowDown\"],proto._translateEmpty,{args:[0,big],checker:arrowChecker}]]));}constructor(params){super({...params,name:\"freeTextEditor\"});_classPrivateMethodInitSpec(this,_FreeTextEditor_brand);_classPrivateFieldInitSpec(this,_boundEditorDivBlur,this.editorDivBlur.bind(this));_classPrivateFieldInitSpec(this,_boundEditorDivFocus,this.editorDivFocus.bind(this));_classPrivateFieldInitSpec(this,_boundEditorDivInput,this.editorDivInput.bind(this));_classPrivateFieldInitSpec(this,_boundEditorDivKeydown,this.editorDivKeydown.bind(this));_classPrivateFieldInitSpec(this,_boundEditorDivPaste,this.editorDivPaste.bind(this));_classPrivateFieldInitSpec(this,_color2,void 0);_classPrivateFieldInitSpec(this,_content,\"\");_classPrivateFieldInitSpec(this,_editorDivId,`${this.id}-editor`);_classPrivateFieldInitSpec(this,_fontSize,void 0);_classPrivateFieldInitSpec(this,_initialData,null);_classPrivateFieldSet(_color2,this,params.color||FreeTextEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor);_classPrivateFieldSet(_fontSize,this,params.fontSize||FreeTextEditor._defaultFontSize);}static initialize(l10n,uiManager){editor_editor.AnnotationEditor.initialize(l10n,uiManager,{strings:[\"pdfjs-free-text-default-content\"]});const style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue(\"--freetext-padding\"));}static updateDefaultParams(type,value){switch(type){case util.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=value;break;case util.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=value;break;}}updateParams(type,value){switch(type){case util.AnnotationEditorParamsType.FREETEXT_SIZE:_assertClassBrand(_FreeTextEditor_brand,this,_updateFontSize).call(this,value);break;case util.AnnotationEditorParamsType.FREETEXT_COLOR:_assertClassBrand(_FreeTextEditor_brand,this,_updateColor).call(this,value);break;}}static get defaultPropertiesToUpdate(){return[[util.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[util.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor]];}get propertiesToUpdate(){return[[util.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(_fontSize,this)],[util.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(_color2,this)]];}_translateEmpty(x,y){this._uiManager.translateSelectedEditors(x,y,true);}getInitialTranslation(){const scale=this.parentScale;return[-FreeTextEditor._internalPadding*scale,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(_fontSize,this))*scale];}rebuild(){if(!this.parent){return;}super.rebuild();if(this.div===null){return;}if(!this.isAttachedToDOM){this.parent.add(this);}}enableEditMode(){if(this.isInEditMode()){return;}this.parent.setEditingState(false);this.parent.updateToolbar(util.AnnotationEditorType.FREETEXT);super.enableEditMode();this.overlayDiv.classList.remove(\"enabled\");this.editorDiv.contentEditable=true;this._isDraggable=false;this.div.removeAttribute(\"aria-activedescendant\");this.editorDiv.addEventListener(\"keydown\",_classPrivateFieldGet(_boundEditorDivKeydown,this));this.editorDiv.addEventListener(\"focus\",_classPrivateFieldGet(_boundEditorDivFocus,this));this.editorDiv.addEventListener(\"blur\",_classPrivateFieldGet(_boundEditorDivBlur,this));this.editorDiv.addEventListener(\"input\",_classPrivateFieldGet(_boundEditorDivInput,this));this.editorDiv.addEventListener(\"paste\",_classPrivateFieldGet(_boundEditorDivPaste,this));}disableEditMode(){if(!this.isInEditMode()){return;}this.parent.setEditingState(true);super.disableEditMode();this.overlayDiv.classList.add(\"enabled\");this.editorDiv.contentEditable=false;this.div.setAttribute(\"aria-activedescendant\",_classPrivateFieldGet(_editorDivId,this));this._isDraggable=true;this.editorDiv.removeEventListener(\"keydown\",_classPrivateFieldGet(_boundEditorDivKeydown,this));this.editorDiv.removeEventListener(\"focus\",_classPrivateFieldGet(_boundEditorDivFocus,this));this.editorDiv.removeEventListener(\"blur\",_classPrivateFieldGet(_boundEditorDivBlur,this));this.editorDiv.removeEventListener(\"input\",_classPrivateFieldGet(_boundEditorDivInput,this));this.editorDiv.removeEventListener(\"paste\",_classPrivateFieldGet(_boundEditorDivPaste,this));this.div.focus({preventScroll:true});this.isEditing=false;this.parent.div.classList.add(\"freetextEditing\");}focusin(event){if(!this._focusEventsAllowed){return;}super.focusin(event);if(event.target!==this.editorDiv){this.editorDiv.focus();}}onceAdded(){if(this.width){return;}this.enableEditMode();this.editorDiv.focus();if(this._initialOptions?.isCentered){this.center();}this._initialOptions=null;}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===\"\";}remove(){this.isEditing=false;if(this.parent){this.parent.setEditingState(true);this.parent.div.classList.add(\"freetextEditing\");}super.remove();}commit(){if(!this.isInEditMode()){return;}super.commit();this.disableEditMode();const savedText=_classPrivateFieldGet(_content,this);const newText=_classPrivateFieldSet(_content,this,_assertClassBrand(_FreeTextEditor_brand,this,_extractText).call(this).trimEnd());if(savedText===newText){return;}const setText=text=>{_classPrivateFieldSet(_content,this,text);if(!text){this.remove();return;}_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);this._uiManager.rebuild(this);_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);};this.addCommands({cmd:()=>{setText(newText);},undo:()=>{setText(savedText);},mustExec:false});_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);}shouldGetKeyboardEvents(){return this.isInEditMode();}enterInEditMode(){this.enableEditMode();this.editorDiv.focus();}dblclick(event){this.enterInEditMode();}keydown(event){if(event.target===this.div&&event.key===\"Enter\"){this.enterInEditMode();event.preventDefault();}}editorDivKeydown(event){FreeTextEditor._keyboardManager.exec(this,event);}editorDivFocus(event){this.isEditing=true;}editorDivBlur(event){this.isEditing=false;}editorDivInput(event){this.parent.div.classList.toggle(\"freetextEditing\",this.isEmpty());}disableEditing(){this.editorDiv.setAttribute(\"role\",\"comment\");this.editorDiv.removeAttribute(\"aria-multiline\");}enableEditing(){this.editorDiv.setAttribute(\"role\",\"textbox\");this.editorDiv.setAttribute(\"aria-multiline\",true);}render(){if(this.div){return this.div;}let baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}super.render();this.editorDiv=document.createElement(\"div\");this.editorDiv.className=\"internal\";this.editorDiv.setAttribute(\"id\",_classPrivateFieldGet(_editorDivId,this));this.editorDiv.setAttribute(\"data-l10n-id\",\"pdfjs-free-text\");this.enableEditing();editor_editor.AnnotationEditor._l10nPromise.get(\"pdfjs-free-text-default-content\").then(msg=>this.editorDiv?.setAttribute(\"default-content\",msg));this.editorDiv.contentEditable=true;const{style}=this.editorDiv;style.fontSize=`calc(${_classPrivateFieldGet(_fontSize,this)}px * var(--scale-factor))`;style.color=_classPrivateFieldGet(_color2,this);this.div.append(this.editorDiv);this.overlayDiv=document.createElement(\"div\");this.overlayDiv.classList.add(\"overlay\",\"enabled\");this.div.append(this.overlayDiv);(0,tools.bindEvents)(this,this.div,[\"dblclick\",\"keydown\"]);if(this.width){const[parentWidth,parentHeight]=this.parentDimensions;if(this.annotationElementId){const{position}=_classPrivateFieldGet(_initialData,this);let[tx,ty]=this.getInitialTranslation();[tx,ty]=this.pageTranslationToScreen(tx,ty);const[pageWidth,pageHeight]=this.pageDimensions;const[pageX,pageY]=this.pageTranslation;let posX,posY;switch(this.rotation){case 0:posX=baseX+(position[0]-pageX)/pageWidth;posY=baseY+this.height-(position[1]-pageY)/pageHeight;break;case 90:posX=baseX+(position[0]-pageX)/pageWidth;posY=baseY-(position[1]-pageY)/pageHeight;[tx,ty]=[ty,-tx];break;case 180:posX=baseX-this.width+(position[0]-pageX)/pageWidth;posY=baseY-(position[1]-pageY)/pageHeight;[tx,ty]=[-tx,-ty];break;case 270:posX=baseX+(position[0]-pageX-this.height*pageHeight)/pageWidth;posY=baseY+(position[1]-pageY-this.width*pageWidth)/pageHeight;[tx,ty]=[-ty,tx];break;}this.setAt(posX*parentWidth,posY*parentHeight,tx,ty);}else{this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);}_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);this._isDraggable=true;this.editorDiv.contentEditable=false;}else{this._isDraggable=false;this.editorDiv.contentEditable=true;}return this.div;}editorDivPaste(event){const clipboardData=event.clipboardData||window.clipboardData;const{types}=clipboardData;if(types.length===1&&types[0]===\"text/plain\"){return;}event.preventDefault();const paste=_deserializeContent.call(FreeTextEditor,clipboardData.getData(\"text\")||\"\").replaceAll(EOL_PATTERN,\"\\n\");if(!paste){return;}const selection=window.getSelection();if(!selection.rangeCount){return;}this.editorDiv.normalize();selection.deleteFromDocument();const range=selection.getRangeAt(0);if(!paste.includes(\"\\n\")){range.insertNode(document.createTextNode(paste));this.editorDiv.normalize();selection.collapseToStart();return;}const{startContainer,startOffset}=range;const bufferBefore=[];const bufferAfter=[];if(startContainer.nodeType===Node.TEXT_NODE){const parent=startContainer.parentElement;bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN,\"\"));if(parent!==this.editorDiv){let buffer=bufferBefore;for(const child of this.editorDiv.childNodes){if(child===parent){buffer=bufferAfter;continue;}buffer.push(_getNodeContent.call(FreeTextEditor,child));}}bufferBefore.push(startContainer.nodeValue.slice(0,startOffset).replaceAll(EOL_PATTERN,\"\"));}else if(startContainer===this.editorDiv){let buffer=bufferBefore;let i=0;for(const child of this.editorDiv.childNodes){if(i++===startOffset){buffer=bufferAfter;}buffer.push(_getNodeContent.call(FreeTextEditor,child));}}_classPrivateFieldSet(_content,this,`${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`);_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);const newRange=new Range();let beforeLength=bufferBefore.reduce((acc,line)=>acc+line.length,0);for(const{firstChild}of this.editorDiv.childNodes){if(firstChild.nodeType===Node.TEXT_NODE){const length=firstChild.nodeValue.length;if(beforeLength<=length){newRange.setStart(firstChild,beforeLength);newRange.setEnd(firstChild,beforeLength);break;}beforeLength-=length;}}selection.removeAllRanges();selection.addRange(newRange);}get contentDiv(){return this.editorDiv;}static deserialize(data,parent,uiManager){let initialData=null;if(data instanceof annotation_layer.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize,fontColor},rect,rotation,id},textContent,textPosition,parent:{page:{pageNumber}}}=data;if(!textContent||textContent.length===0){return null;}initialData=data={annotationType:util.AnnotationEditorType.FREETEXT,color:Array.from(fontColor),fontSize,value:textContent.join(\"\\n\"),position:textPosition,pageIndex:pageNumber-1,rect:rect.slice(0),rotation,id,deleted:false};}const editor=super.deserialize(data,parent,uiManager);_classPrivateFieldSet(_fontSize,editor,data.fontSize);_classPrivateFieldSet(_color2,editor,util.Util.makeHexColor(...data.color));_classPrivateFieldSet(_content,editor,_deserializeContent.call(FreeTextEditor,data.value));editor.annotationElementId=data.id||null;_classPrivateFieldSet(_initialData,editor,initialData);return editor;}serialize(){let isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return null;}if(this.deleted){return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:true};}const padding=FreeTextEditor._internalPadding*this.parentScale;const rect=this.getRect(padding,padding);const color=editor_editor.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(_color2,this));const serialized={annotationType:util.AnnotationEditorType.FREETEXT,color,fontSize:_classPrivateFieldGet(_fontSize,this),value:_assertClassBrand(_FreeTextEditor_brand,this,_serializeContent).call(this),pageIndex:this.pageIndex,rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(isForCopying){return serialized;}if(this.annotationElementId&&!_assertClassBrand(_FreeTextEditor_brand,this,_hasElementChanged).call(this,serialized)){return null;}serialized.id=this.annotationElementId;return serialized;}renderAnnotationElement(annotation){const content=super.renderAnnotationElement(annotation);if(this.deleted){return content;}const{style}=content;style.fontSize=`calc(${_classPrivateFieldGet(_fontSize,this)}px * var(--scale-factor))`;style.color=_classPrivateFieldGet(_color2,this);content.replaceChildren();for(const line of _classPrivateFieldGet(_content,this).split(\"\\n\")){const div=document.createElement(\"div\");div.append(line?document.createTextNode(line):document.createElement(\"br\"));content.append(div);}const padding=FreeTextEditor._internalPadding*this.parentScale;annotation.updateEdited({rect:this.getRect(padding,padding)});return content;}resetAnnotationElement(annotation){super.resetAnnotationElement(annotation);annotation.resetEdited();}}// EXTERNAL MODULE: ./src/display/editor/outliner.js\n_FreeTextEditor=FreeTextEditor;function _updateFontSize(fontSize){const setFontsize=size=>{this.editorDiv.style.fontSize=`calc(${size}px * var(--scale-factor))`;this.translate(0,-(size-_classPrivateFieldGet(_fontSize,this))*this.parentScale);_classPrivateFieldSet(_fontSize,this,size);_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);};const savedFontsize=_classPrivateFieldGet(_fontSize,this);this.addCommands({cmd:setFontsize.bind(this,fontSize),undo:setFontsize.bind(this,savedFontsize),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:true,keepUndo:true});}function _updateColor(color){const setColor=col=>{_classPrivateFieldSet(_color2,this,this.editorDiv.style.color=col);};const savedColor=_classPrivateFieldGet(_color2,this);this.addCommands({cmd:setColor.bind(this,color),undo:setColor.bind(this,savedColor),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:true,keepUndo:true});}function _extractText(){const buffer=[];this.editorDiv.normalize();for(const child of this.editorDiv.childNodes){buffer.push(_getNodeContent.call(_FreeTextEditor,child));}return buffer.join(\"\\n\");}function _setEditorDimensions(){const[parentWidth,parentHeight]=this.parentDimensions;let rect;if(this.isAttachedToDOM){rect=this.div.getBoundingClientRect();}else{const{currentLayer,div}=this;const savedDisplay=div.style.display;const savedVisibility=div.classList.contains(\"hidden\");div.classList.remove(\"hidden\");div.style.display=\"hidden\";currentLayer.div.append(this.div);rect=div.getBoundingClientRect();div.remove();div.style.display=savedDisplay;div.classList.toggle(\"hidden\",savedVisibility);}if(this.rotation%180===this.parentRotation%180){this.width=rect.width/parentWidth;this.height=rect.height/parentHeight;}else{this.width=rect.height/parentWidth;this.height=rect.width/parentHeight;}this.fixAndSetPosition();}function _getNodeContent(node){return(node.nodeType===Node.TEXT_NODE?node.nodeValue:node.innerText).replaceAll(EOL_PATTERN,\"\");}function _setContent(){this.editorDiv.replaceChildren();if(!_classPrivateFieldGet(_content,this)){return;}for(const line of _classPrivateFieldGet(_content,this).split(\"\\n\")){const div=document.createElement(\"div\");div.append(line?document.createTextNode(line):document.createElement(\"br\"));this.editorDiv.append(div);}}function _serializeContent(){return _classPrivateFieldGet(_content,this).replaceAll(\"\\xa0\",\" \");}function _deserializeContent(content){return content.replaceAll(\" \",\"\\xa0\");}function _hasElementChanged(serialized){const{value,fontSize,color,pageIndex}=_classPrivateFieldGet(_initialData,this);return this._hasBeenMoved||serialized.value!==value||serialized.fontSize!==fontSize||serialized.color.some((c,i)=>c!==color[i])||serialized.pageIndex!==pageIndex;}_defineProperty(FreeTextEditor,\"_freeTextDefaultContent\",\"\");_defineProperty(FreeTextEditor,\"_internalPadding\",0);_defineProperty(FreeTextEditor,\"_defaultColor\",null);_defineProperty(FreeTextEditor,\"_defaultFontSize\",10);_defineProperty(FreeTextEditor,\"_type\",\"freetext\");_defineProperty(FreeTextEditor,\"_editorType\",util.AnnotationEditorType.FREETEXT);var editor_outliner=__webpack_require__(61);// EXTERNAL MODULE: ./src/display/editor/color_picker.js\nvar color_picker=__webpack_require__(259);// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);;// CONCATENATED MODULE: ./src/display/editor/highlight.js\nvar _anchorNode=/*#__PURE__*/new WeakMap();var _anchorOffset=/*#__PURE__*/new WeakMap();var _boxes=/*#__PURE__*/new WeakMap();var _clipPathId=/*#__PURE__*/new WeakMap();var _colorPicker=/*#__PURE__*/new WeakMap();var _focusOutlines=/*#__PURE__*/new WeakMap();var _focusNode=/*#__PURE__*/new WeakMap();var _focusOffset=/*#__PURE__*/new WeakMap();var _highlightDiv=/*#__PURE__*/new WeakMap();var _highlightOutlines=/*#__PURE__*/new WeakMap();var _id3=/*#__PURE__*/new WeakMap();var _isFreeHighlight=/*#__PURE__*/new WeakMap();var _boundKeydown=/*#__PURE__*/new WeakMap();var _lastPoint=/*#__PURE__*/new WeakMap();var _opacity=/*#__PURE__*/new WeakMap();var _outlineId=/*#__PURE__*/new WeakMap();var _text=/*#__PURE__*/new WeakMap();var _thickness=/*#__PURE__*/new WeakMap();var _methodOfCreation=/*#__PURE__*/new WeakMap();var _HighlightEditor_brand=/*#__PURE__*/new WeakSet();class HighlightEditor extends editor_editor.AnnotationEditor{static get _keyboardManager(){const proto=HighlightEditor.prototype;return(0,util.shadow)(this,\"_keyboardManager\",new tools.KeyboardManager([[[\"ArrowLeft\",\"mac+ArrowLeft\"],proto._moveCaret,{args:[0]}],[[\"ArrowRight\",\"mac+ArrowRight\"],proto._moveCaret,{args:[1]}],[[\"ArrowUp\",\"mac+ArrowUp\"],proto._moveCaret,{args:[2]}],[[\"ArrowDown\",\"mac+ArrowDown\"],proto._moveCaret,{args:[3]}]]));}constructor(params){super({...params,name:\"highlightEditor\"});_classPrivateMethodInitSpec(this,_HighlightEditor_brand);_classPrivateFieldInitSpec(this,_anchorNode,null);_classPrivateFieldInitSpec(this,_anchorOffset,0);_classPrivateFieldInitSpec(this,_boxes,void 0);_classPrivateFieldInitSpec(this,_clipPathId,null);_classPrivateFieldInitSpec(this,_colorPicker,null);_classPrivateFieldInitSpec(this,_focusOutlines,null);_classPrivateFieldInitSpec(this,_focusNode,null);_classPrivateFieldInitSpec(this,_focusOffset,0);_classPrivateFieldInitSpec(this,_highlightDiv,null);_classPrivateFieldInitSpec(this,_highlightOutlines,null);_classPrivateFieldInitSpec(this,_id3,null);_classPrivateFieldInitSpec(this,_isFreeHighlight,false);_classPrivateFieldInitSpec(this,_boundKeydown,_assertClassBrand(_HighlightEditor_brand,this,_keydown).bind(this));_classPrivateFieldInitSpec(this,_lastPoint,null);_classPrivateFieldInitSpec(this,_opacity,void 0);_classPrivateFieldInitSpec(this,_outlineId,null);_classPrivateFieldInitSpec(this,_text,\"\");_classPrivateFieldInitSpec(this,_thickness,void 0);_classPrivateFieldInitSpec(this,_methodOfCreation,\"\");this.color=params.color||HighlightEditor._defaultColor;_classPrivateFieldSet(_thickness,this,params.thickness||HighlightEditor._defaultThickness);_classPrivateFieldSet(_opacity,this,params.opacity||HighlightEditor._defaultOpacity);_classPrivateFieldSet(_boxes,this,params.boxes||null);_classPrivateFieldSet(_methodOfCreation,this,params.methodOfCreation||\"\");_classPrivateFieldSet(_text,this,params.text||\"\");this._isDraggable=false;if(params.highlightId>-1){_classPrivateFieldSet(_isFreeHighlight,this,true);_assertClassBrand(_HighlightEditor_brand,this,_createFreeOutlines).call(this,params);_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this);}else{_classPrivateFieldSet(_anchorNode,this,params.anchorNode);_classPrivateFieldSet(_anchorOffset,this,params.anchorOffset);_classPrivateFieldSet(_focusNode,this,params.focusNode);_classPrivateFieldSet(_focusOffset,this,params.focusOffset);_assertClassBrand(_HighlightEditor_brand,this,_createOutlines).call(this);_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this);this.rotate(this.rotation);}}get telemetryInitialData(){return{action:\"added\",type:_classPrivateFieldGet(_isFreeHighlight,this)?\"free_highlight\":\"highlight\",color:this._uiManager.highlightColorNames.get(this.color),thickness:_classPrivateFieldGet(_thickness,this),methodOfCreation:_classPrivateFieldGet(_methodOfCreation,this)};}get telemetryFinalData(){return{type:\"highlight\",color:this._uiManager.highlightColorNames.get(this.color)};}static computeTelemetryFinalData(data){return{numberOfColors:data.get(\"color\").size};}static initialize(l10n,uiManager){editor_editor.AnnotationEditor.initialize(l10n,uiManager);HighlightEditor._defaultColor||=uiManager.highlightColors?.values().next().value||\"#fff066\";}static updateDefaultParams(type,value){switch(type){case util.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:HighlightEditor._defaultColor=value;break;case util.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:HighlightEditor._defaultThickness=value;break;}}translateInPage(x,y){}get toolbarPosition(){return _classPrivateFieldGet(_lastPoint,this);}updateParams(type,value){switch(type){case util.AnnotationEditorParamsType.HIGHLIGHT_COLOR:_assertClassBrand(_HighlightEditor_brand,this,_updateColor2).call(this,value);break;case util.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:_assertClassBrand(_HighlightEditor_brand,this,_updateThickness).call(this,value);break;}}static get defaultPropertiesToUpdate(){return[[util.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,HighlightEditor._defaultColor],[util.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,HighlightEditor._defaultThickness]];}get propertiesToUpdate(){return[[util.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor],[util.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,_classPrivateFieldGet(_thickness,this)||HighlightEditor._defaultThickness],[util.AnnotationEditorParamsType.HIGHLIGHT_FREE,_classPrivateFieldGet(_isFreeHighlight,this)]];}async addEditToolbar(){const toolbar=await super.addEditToolbar();if(!toolbar){return null;}if(this._uiManager.highlightColors){_classPrivateFieldSet(_colorPicker,this,new color_picker.ColorPicker({editor:this}));toolbar.addColorPicker(_classPrivateFieldGet(_colorPicker,this));}return toolbar;}disableEditing(){super.disableEditing();this.div.classList.toggle(\"disabled\",true);}enableEditing(){super.enableEditing();this.div.classList.toggle(\"disabled\",false);}fixAndSetPosition(){return super.fixAndSetPosition(_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this));}getBaseTranslation(){return[0,0];}getRect(tx,ty){return super.getRect(tx,ty,_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this));}onceAdded(){this.parent.addUndoableEditor(this);this.div.focus();}remove(){_assertClassBrand(_HighlightEditor_brand,this,_cleanDrawLayer).call(this);this._reportTelemetry({action:\"deleted\"});super.remove();}rebuild(){if(!this.parent){return;}super.rebuild();if(this.div===null){return;}_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this);if(!this.isAttachedToDOM){this.parent.add(this);}}setParent(parent){let mustBeSelected=false;if(this.parent&&!parent){_assertClassBrand(_HighlightEditor_brand,this,_cleanDrawLayer).call(this);}else if(parent){_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this,parent);mustBeSelected=!this.parent&&this.div?.classList.contains(\"selectedEditor\");}super.setParent(parent);this.show(this._isVisible);if(mustBeSelected){this.select();}}rotate(angle){const{drawLayer}=this.parent;let box;if(_classPrivateFieldGet(_isFreeHighlight,this)){angle=(angle-this.rotation+360)%360;box=_rotateBbox.call(HighlightEditor,_classPrivateFieldGet(_highlightOutlines,this).box,angle);}else{box=_rotateBbox.call(HighlightEditor,this,angle);}drawLayer.rotate(_classPrivateFieldGet(_id3,this),angle);drawLayer.rotate(_classPrivateFieldGet(_outlineId,this),angle);drawLayer.updateBox(_classPrivateFieldGet(_id3,this),box);drawLayer.updateBox(_classPrivateFieldGet(_outlineId,this),_rotateBbox.call(HighlightEditor,_classPrivateFieldGet(_focusOutlines,this).box,angle));}render(){if(this.div){return this.div;}const div=super.render();if(_classPrivateFieldGet(_text,this)){div.setAttribute(\"aria-label\",_classPrivateFieldGet(_text,this));div.setAttribute(\"role\",\"mark\");}if(_classPrivateFieldGet(_isFreeHighlight,this)){div.classList.add(\"free\");}else{this.div.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeydown,this));}const highlightDiv=_classPrivateFieldSet(_highlightDiv,this,document.createElement(\"div\"));div.append(highlightDiv);highlightDiv.setAttribute(\"aria-hidden\",\"true\");highlightDiv.className=\"internal\";highlightDiv.style.clipPath=_classPrivateFieldGet(_clipPathId,this);const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(this.width*parentWidth,this.height*parentHeight);(0,tools.bindEvents)(this,_classPrivateFieldGet(_highlightDiv,this),[\"pointerover\",\"pointerleave\"]);this.enableEditing();return div;}pointerover(){this.parent.drawLayer.addClass(_classPrivateFieldGet(_outlineId,this),\"hovered\");}pointerleave(){this.parent.drawLayer.removeClass(_classPrivateFieldGet(_outlineId,this),\"hovered\");}_moveCaret(direction){this.parent.unselect(this);switch(direction){case 0:case 2:_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,true);break;case 1:case 3:_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,false);break;}}select(){super.select();if(!_classPrivateFieldGet(_outlineId,this)){return;}this.parent?.drawLayer.removeClass(_classPrivateFieldGet(_outlineId,this),\"hovered\");this.parent?.drawLayer.addClass(_classPrivateFieldGet(_outlineId,this),\"selected\");}unselect(){super.unselect();if(!_classPrivateFieldGet(_outlineId,this)){return;}this.parent?.drawLayer.removeClass(_classPrivateFieldGet(_outlineId,this),\"selected\");if(!_classPrivateFieldGet(_isFreeHighlight,this)){_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,false);}}get _mustFixPosition(){return!_classPrivateFieldGet(_isFreeHighlight,this);}show(){let visible=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._isVisible;super.show(visible);if(this.parent){this.parent.drawLayer.show(_classPrivateFieldGet(_id3,this),visible);this.parent.drawLayer.show(_classPrivateFieldGet(_outlineId,this),visible);}}static startHighlighting(parent,isLTR,_ref40){let{target:textLayer,x,y}=_ref40;const{x:layerX,y:layerY,width:parentWidth,height:parentHeight}=textLayer.getBoundingClientRect();const pointerMove=e=>{_assertClassBrand(HighlightEditor,this,_highlightMove).call(this,parent,e);};const pointerDownOptions={capture:true,passive:false};const pointerDown=e=>{e.preventDefault();e.stopPropagation();};const pointerUpCallback=e=>{textLayer.removeEventListener(\"pointermove\",pointerMove);window.removeEventListener(\"blur\",pointerUpCallback);window.removeEventListener(\"pointerup\",pointerUpCallback);window.removeEventListener(\"pointerdown\",pointerDown,pointerDownOptions);window.removeEventListener(\"contextmenu\",display_utils.noContextMenu);_assertClassBrand(HighlightEditor,this,_endHighlight).call(this,parent,e);};window.addEventListener(\"blur\",pointerUpCallback);window.addEventListener(\"pointerup\",pointerUpCallback);window.addEventListener(\"pointerdown\",pointerDown,pointerDownOptions);window.addEventListener(\"contextmenu\",display_utils.noContextMenu);textLayer.addEventListener(\"pointermove\",pointerMove);this._freeHighlight=new editor_outliner.FreeOutliner({x,y},[layerX,layerY,parentWidth,parentHeight],parent.scale,this._defaultThickness/2,isLTR,0.001);({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=parent.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,true));}static deserialize(data,parent,uiManager){const editor=super.deserialize(data,parent,uiManager);const{rect:[blX,blY,trX,trY],color,quadPoints}=data;editor.color=util.Util.makeHexColor(...color);_classPrivateFieldSet(_opacity,editor,data.opacity);const[pageWidth,pageHeight]=editor.pageDimensions;editor.width=(trX-blX)/pageWidth;editor.height=(trY-blY)/pageHeight;const boxes=_classPrivateFieldSet(_boxes,editor,[]);for(let i=0;i<quadPoints.length;i+=8){boxes.push({x:(quadPoints[4]-trX)/pageWidth,y:(trY-(1-quadPoints[i+5]))/pageHeight,width:(quadPoints[i+2]-quadPoints[i])/pageWidth,height:(quadPoints[i+5]-quadPoints[i+1])/pageHeight});}_assertClassBrand(_HighlightEditor_brand,editor,_createOutlines).call(editor);return editor;}serialize(){let isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()||isForCopying){return null;}const rect=this.getRect(0,0);const color=editor_editor.AnnotationEditor._colorManager.convert(this.color);return{annotationType:util.AnnotationEditorType.HIGHLIGHT,color,opacity:_classPrivateFieldGet(_opacity,this),thickness:_classPrivateFieldGet(_thickness,this),quadPoints:_assertClassBrand(_HighlightEditor_brand,this,_serializeBoxes).call(this),outlines:_assertClassBrand(_HighlightEditor_brand,this,_serializeOutlines).call(this,rect),pageIndex:this.pageIndex,rect,rotation:_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this),structTreeParentId:this._structTreeParentId};}static canCreateNewEmptyEditor(){return false;}}_HighlightEditor=HighlightEditor;function _createOutlines(){const outliner=new editor_outliner.Outliner(_classPrivateFieldGet(_boxes,this),0.001);_classPrivateFieldSet(_highlightOutlines,this,outliner.getOutlines());({x:this.x,y:this.y,width:this.width,height:this.height}=_classPrivateFieldGet(_highlightOutlines,this).box);const outlinerForOutline=new editor_outliner.Outliner(_classPrivateFieldGet(_boxes,this),0.0025,0.001,this._uiManager.direction===\"ltr\");_classPrivateFieldSet(_focusOutlines,this,outlinerForOutline.getOutlines());const{lastPoint}=_classPrivateFieldGet(_focusOutlines,this).box;_classPrivateFieldSet(_lastPoint,this,[(lastPoint[0]-this.x)/this.width,(lastPoint[1]-this.y)/this.height]);}function _createFreeOutlines(_ref44){let{highlightOutlines,highlightId,clipPathId}=_ref44;_classPrivateFieldSet(_highlightOutlines,this,highlightOutlines);const extraThickness=1.5;_classPrivateFieldSet(_focusOutlines,this,highlightOutlines.getNewOutline(_classPrivateFieldGet(_thickness,this)/2+extraThickness,0.0025));if(highlightId>=0){_classPrivateFieldSet(_id3,this,highlightId);_classPrivateFieldSet(_clipPathId,this,clipPathId);this.parent.drawLayer.finalizeLine(highlightId,highlightOutlines);_classPrivateFieldSet(_outlineId,this,this.parent.drawLayer.highlightOutline(_classPrivateFieldGet(_focusOutlines,this)));}else if(this.parent){const angle=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(_classPrivateFieldGet(_id3,this),highlightOutlines);this.parent.drawLayer.updateBox(_classPrivateFieldGet(_id3,this),_rotateBbox.call(_HighlightEditor,_classPrivateFieldGet(_highlightOutlines,this).box,(angle-this.rotation+360)%360));this.parent.drawLayer.updateLine(_classPrivateFieldGet(_outlineId,this),_classPrivateFieldGet(_focusOutlines,this));this.parent.drawLayer.updateBox(_classPrivateFieldGet(_outlineId,this),_rotateBbox.call(_HighlightEditor,_classPrivateFieldGet(_focusOutlines,this).box,angle));}const{x,y,width,height}=highlightOutlines.box;switch(this.rotation){case 0:this.x=x;this.y=y;this.width=width;this.height=height;break;case 90:{const[pageWidth,pageHeight]=this.parentDimensions;this.x=y;this.y=1-x;this.width=width*pageHeight/pageWidth;this.height=height*pageWidth/pageHeight;break;}case 180:this.x=1-x;this.y=1-y;this.width=width;this.height=height;break;case 270:{const[pageWidth,pageHeight]=this.parentDimensions;this.x=1-y;this.y=x;this.width=width*pageHeight/pageWidth;this.height=height*pageWidth/pageHeight;break;}}const{lastPoint}=_classPrivateFieldGet(_focusOutlines,this).box;_classPrivateFieldSet(_lastPoint,this,[(lastPoint[0]-x)/width,(lastPoint[1]-y)/height]);}function _updateColor2(color){const setColor=col=>{this.color=col;this.parent?.drawLayer.changeColor(_classPrivateFieldGet(_id3,this),col);_classPrivateFieldGet(_colorPicker,this)?.updateColor(col);};const savedColor=this.color;this.addCommands({cmd:setColor.bind(this,color),undo:setColor.bind(this,savedColor),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:true,keepUndo:true});this._reportTelemetry({action:\"color_changed\",color:this._uiManager.highlightColorNames.get(color)},true);}function _updateThickness(thickness){const savedThickness=_classPrivateFieldGet(_thickness,this);const setThickness=th=>{_classPrivateFieldSet(_thickness,this,th);_assertClassBrand(_HighlightEditor_brand,this,_changeThickness).call(this,th);};this.addCommands({cmd:setThickness.bind(this,thickness),undo:setThickness.bind(this,savedThickness),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true});this._reportTelemetry({action:\"thickness_changed\",thickness},true);}function _changeThickness(thickness){if(!_classPrivateFieldGet(_isFreeHighlight,this)){return;}_assertClassBrand(_HighlightEditor_brand,this,_createFreeOutlines).call(this,{highlightOutlines:_classPrivateFieldGet(_highlightOutlines,this).getNewOutline(thickness/2)});this.fixAndSetPosition();const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(this.width*parentWidth,this.height*parentHeight);}function _cleanDrawLayer(){if(_classPrivateFieldGet(_id3,this)===null||!this.parent){return;}this.parent.drawLayer.remove(_classPrivateFieldGet(_id3,this));_classPrivateFieldSet(_id3,this,null);this.parent.drawLayer.remove(_classPrivateFieldGet(_outlineId,this));_classPrivateFieldSet(_outlineId,this,null);}function _addToDrawLayer(){let parent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.parent;if(_classPrivateFieldGet(_id3,this)!==null){return;}({id:_toSetter(_classPrivateFieldSet,[_id3,this])._,clipPathId:_toSetter(_classPrivateFieldSet,[_clipPathId,this])._}=parent.drawLayer.highlight(_classPrivateFieldGet(_highlightOutlines,this),this.color,_classPrivateFieldGet(_opacity,this)));_classPrivateFieldSet(_outlineId,this,parent.drawLayer.highlightOutline(_classPrivateFieldGet(_focusOutlines,this)));if(_classPrivateFieldGet(_highlightDiv,this)){_classPrivateFieldGet(_highlightDiv,this).style.clipPath=_classPrivateFieldGet(_clipPathId,this);}}function _rotateBbox(_ref45,angle){let{x,y,width,height}=_ref45;switch(angle){case 90:return{x:1-y-height,y:x,width:height,height:width};case 180:return{x:1-x-width,y:1-y-height,width,height};case 270:return{x:y,y:1-x-width,width:height,height:width};}return{x,y,width,height};}function _keydown(event){_HighlightEditor._keyboardManager.exec(this,event);}function _setCaret(start){if(!_classPrivateFieldGet(_anchorNode,this)){return;}const selection=window.getSelection();if(start){selection.setPosition(_classPrivateFieldGet(_anchorNode,this),_classPrivateFieldGet(_anchorOffset,this));}else{selection.setPosition(_classPrivateFieldGet(_focusNode,this),_classPrivateFieldGet(_focusOffset,this));}}function _getRotation(){return _classPrivateFieldGet(_isFreeHighlight,this)?this.rotation:0;}function _serializeBoxes(){if(_classPrivateFieldGet(_isFreeHighlight,this)){return null;}const[pageWidth,pageHeight]=this.pageDimensions;const boxes=_classPrivateFieldGet(_boxes,this);const quadPoints=new Array(boxes.length*8);let i=0;for(const{x,y,width,height}of boxes){const sx=x*pageWidth;const sy=(1-y-height)*pageHeight;quadPoints[i]=quadPoints[i+4]=sx;quadPoints[i+1]=quadPoints[i+3]=sy;quadPoints[i+2]=quadPoints[i+6]=sx+width*pageWidth;quadPoints[i+5]=quadPoints[i+7]=sy+height*pageHeight;i+=8;}return quadPoints;}function _serializeOutlines(rect){return _classPrivateFieldGet(_highlightOutlines,this).serialize(rect,_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this));}function _highlightMove(parent,event){if(this._freeHighlight.add(event)){parent.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight);}}function _endHighlight(parent,event){if(!this._freeHighlight.isEmpty()){parent.createAndAddNewEditor(event,false,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:\"main_toolbar\"});}else{parent.drawLayer.removeFreeHighlight(this._freeHighlightId);}this._freeHighlightId=-1;this._freeHighlight=null;this._freeHighlightClipId=\"\";}_defineProperty(HighlightEditor,\"_defaultColor\",null);_defineProperty(HighlightEditor,\"_defaultOpacity\",1);_defineProperty(HighlightEditor,\"_defaultThickness\",12);_defineProperty(HighlightEditor,\"_l10nPromise\",void 0);_defineProperty(HighlightEditor,\"_type\",\"highlight\");_defineProperty(HighlightEditor,\"_editorType\",util.AnnotationEditorType.HIGHLIGHT);_defineProperty(HighlightEditor,\"_freeHighlightId\",-1);_defineProperty(HighlightEditor,\"_freeHighlight\",null);_defineProperty(HighlightEditor,\"_freeHighlightClipId\",\"\");;// CONCATENATED MODULE: ./src/display/editor/ink.js\nvar _baseHeight=/*#__PURE__*/new WeakMap();var _baseWidth=/*#__PURE__*/new WeakMap();var _boundCanvasPointermove=/*#__PURE__*/new WeakMap();var _boundCanvasPointerleave=/*#__PURE__*/new WeakMap();var _boundCanvasPointerup=/*#__PURE__*/new WeakMap();var _boundCanvasPointerdown=/*#__PURE__*/new WeakMap();var _canvasContextMenuTimeoutId=/*#__PURE__*/new WeakMap();var _currentPath2D=/*#__PURE__*/new WeakMap();var _disableEditing=/*#__PURE__*/new WeakMap();var _hasSomethingToDraw=/*#__PURE__*/new WeakMap();var _isCanvasInitialized=/*#__PURE__*/new WeakMap();var _observer=/*#__PURE__*/new WeakMap();var _realWidth=/*#__PURE__*/new WeakMap();var _realHeight=/*#__PURE__*/new WeakMap();var _requestFrameCallback=/*#__PURE__*/new WeakMap();var _InkEditor_brand=/*#__PURE__*/new WeakSet();class InkEditor extends editor_editor.AnnotationEditor{constructor(params){super({...params,name:\"inkEditor\"});_classPrivateMethodInitSpec(this,_InkEditor_brand);_classPrivateFieldInitSpec(this,_baseHeight,0);_classPrivateFieldInitSpec(this,_baseWidth,0);_classPrivateFieldInitSpec(this,_boundCanvasPointermove,this.canvasPointermove.bind(this));_classPrivateFieldInitSpec(this,_boundCanvasPointerleave,this.canvasPointerleave.bind(this));_classPrivateFieldInitSpec(this,_boundCanvasPointerup,this.canvasPointerup.bind(this));_classPrivateFieldInitSpec(this,_boundCanvasPointerdown,this.canvasPointerdown.bind(this));_classPrivateFieldInitSpec(this,_canvasContextMenuTimeoutId,null);_classPrivateFieldInitSpec(this,_currentPath2D,new Path2D());_classPrivateFieldInitSpec(this,_disableEditing,false);_classPrivateFieldInitSpec(this,_hasSomethingToDraw,false);_classPrivateFieldInitSpec(this,_isCanvasInitialized,false);_classPrivateFieldInitSpec(this,_observer,null);_classPrivateFieldInitSpec(this,_realWidth,0);_classPrivateFieldInitSpec(this,_realHeight,0);_classPrivateFieldInitSpec(this,_requestFrameCallback,null);this.color=params.color||null;this.thickness=params.thickness||null;this.opacity=params.opacity||null;this.paths=[];this.bezierPath2D=[];this.allRawPaths=[];this.currentPath=[];this.scaleFactor=1;this.translationX=this.translationY=0;this.x=0;this.y=0;this._willKeepAspectRatio=true;}static initialize(l10n,uiManager){editor_editor.AnnotationEditor.initialize(l10n,uiManager);}static updateDefaultParams(type,value){switch(type){case util.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=value;break;case util.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=value;break;case util.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=value/100;break;}}updateParams(type,value){switch(type){case util.AnnotationEditorParamsType.INK_THICKNESS:_assertClassBrand(_InkEditor_brand,this,_updateThickness2).call(this,value);break;case util.AnnotationEditorParamsType.INK_COLOR:_assertClassBrand(_InkEditor_brand,this,_updateColor3).call(this,value);break;case util.AnnotationEditorParamsType.INK_OPACITY:_assertClassBrand(_InkEditor_brand,this,_updateOpacity).call(this,value);break;}}static get defaultPropertiesToUpdate(){return[[util.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[util.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor],[util.AnnotationEditorParamsType.INK_OPACITY,Math.round(InkEditor._defaultOpacity*100)]];}get propertiesToUpdate(){return[[util.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[util.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor],[util.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??InkEditor._defaultOpacity))]];}rebuild(){if(!this.parent){return;}super.rebuild();if(this.div===null){return;}if(!this.canvas){_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this);_assertClassBrand(_InkEditor_brand,this,_createObserver).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);}_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this);}remove(){if(this.canvas===null){return;}if(!this.isEmpty()){this.commit();}this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;if(_classPrivateFieldGet(_canvasContextMenuTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_canvasContextMenuTimeoutId,this));_classPrivateFieldSet(_canvasContextMenuTimeoutId,this,null);}_classPrivateFieldGet(_observer,this).disconnect();_classPrivateFieldSet(_observer,this,null);super.remove();}setParent(parent){if(!this.parent&&parent){this._uiManager.removeShouldRescale(this);}else if(this.parent&&parent===null){this._uiManager.addShouldRescale(this);}super.setParent(parent);}onScaleChanging(){const[parentWidth,parentHeight]=this.parentDimensions;const width=this.width*parentWidth;const height=this.height*parentHeight;this.setDimensions(width,height);}enableEditMode(){if(_classPrivateFieldGet(_disableEditing,this)||this.canvas===null){return;}super.enableEditMode();this._isDraggable=false;this.canvas.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundCanvasPointerdown,this));}disableEditMode(){if(!this.isInEditMode()||this.canvas===null){return;}super.disableEditMode();this._isDraggable=!this.isEmpty();this.div.classList.remove(\"editing\");this.canvas.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundCanvasPointerdown,this));}onceAdded(){this._isDraggable=!this.isEmpty();}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0;}commit(){if(_classPrivateFieldGet(_disableEditing,this)){return;}super.commit();this.isEditing=false;this.disableEditMode();this.setInForeground();_classPrivateFieldSet(_disableEditing,this,true);this.div.classList.add(\"disabled\");_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this,true);this.select();this.parent.addInkEditorIfNeeded(true);this.moveInDOM();this.div.focus({preventScroll:true});}focusin(event){if(!this._focusEventsAllowed){return;}super.focusin(event);this.enableEditMode();}canvasPointerdown(event){if(event.button!==0||!this.isInEditMode()||_classPrivateFieldGet(_disableEditing,this)){return;}this.setInForeground();event.preventDefault();if(!this.div.contains(document.activeElement)){this.div.focus({preventScroll:true});}_assertClassBrand(_InkEditor_brand,this,_startDrawing).call(this,event.offsetX,event.offsetY);}canvasPointermove(event){event.preventDefault();_assertClassBrand(_InkEditor_brand,this,_draw).call(this,event.offsetX,event.offsetY);}canvasPointerup(event){event.preventDefault();_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,event);}canvasPointerleave(event){_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,event);}get isResizable(){return!this.isEmpty()&&_classPrivateFieldGet(_disableEditing,this);}render(){if(this.div){return this.div;}let baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}super.render();this.div.setAttribute(\"data-l10n-id\",\"pdfjs-ink\");const[x,y,w,h]=_assertClassBrand(_InkEditor_brand,this,_getInitialBBox).call(this);this.setAt(x,y,0,0);this.setDims(w,h);_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this);if(this.width){const[parentWidth,parentHeight]=this.parentDimensions;this.setAspectRatio(this.width*parentWidth,this.height*parentHeight);this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);_classPrivateFieldSet(_isCanvasInitialized,this,true);_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);this.setDims(this.width*parentWidth,this.height*parentHeight);_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);this.div.classList.add(\"disabled\");}else{this.div.classList.add(\"editing\");this.enableEditMode();}_assertClassBrand(_InkEditor_brand,this,_createObserver).call(this);return this.div;}setDimensions(width,height){const roundedWidth=Math.round(width);const roundedHeight=Math.round(height);if(_classPrivateFieldGet(_realWidth,this)===roundedWidth&&_classPrivateFieldGet(_realHeight,this)===roundedHeight){return;}_classPrivateFieldSet(_realWidth,this,roundedWidth);_classPrivateFieldSet(_realHeight,this,roundedHeight);this.canvas.style.visibility=\"hidden\";const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth;this.height=height/parentHeight;this.fixAndSetPosition();if(_classPrivateFieldGet(_disableEditing,this)){_assertClassBrand(_InkEditor_brand,this,_setScaleFactor).call(this,width,height);}_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);this.canvas.style.visibility=\"visible\";this.fixDims();}static deserialize(data,parent,uiManager){if(data instanceof annotation_layer.InkAnnotationElement){return null;}const editor=super.deserialize(data,parent,uiManager);editor.thickness=data.thickness;editor.color=util.Util.makeHexColor(...data.color);editor.opacity=data.opacity;const[pageWidth,pageHeight]=editor.pageDimensions;const width=editor.width*pageWidth;const height=editor.height*pageHeight;const scaleFactor=editor.parentScale;const padding=data.thickness/2;_classPrivateFieldSet(_disableEditing,editor,true);_classPrivateFieldSet(_realWidth,editor,Math.round(width));_classPrivateFieldSet(_realHeight,editor,Math.round(height));const{paths,rect,rotation}=data;for(let{bezier}of paths){bezier=_fromPDFCoordinates.call(InkEditor,bezier,rect,rotation);const path=[];editor.paths.push(path);let p0=scaleFactor*(bezier[0]-padding);let p1=scaleFactor*(bezier[1]-padding);for(let i=2,ii=bezier.length;i<ii;i+=6){const p10=scaleFactor*(bezier[i]-padding);const p11=scaleFactor*(bezier[i+1]-padding);const p20=scaleFactor*(bezier[i+2]-padding);const p21=scaleFactor*(bezier[i+3]-padding);const p30=scaleFactor*(bezier[i+4]-padding);const p31=scaleFactor*(bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]);p0=p30;p1=p31;}const path2D=_assertClassBrand(InkEditor,this,_buildPath2D).call(this,path);editor.bezierPath2D.push(path2D);}const bbox=_assertClassBrand(_InkEditor_brand,editor,_getBbox).call(editor);_classPrivateFieldSet(_baseWidth,editor,Math.max(editor_editor.AnnotationEditor.MIN_SIZE,bbox[2]-bbox[0]));_classPrivateFieldSet(_baseHeight,editor,Math.max(editor_editor.AnnotationEditor.MIN_SIZE,bbox[3]-bbox[1]));_assertClassBrand(_InkEditor_brand,editor,_setScaleFactor).call(editor,width,height);return editor;}serialize(){if(this.isEmpty()){return null;}const rect=this.getRect(0,0);const color=editor_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:util.AnnotationEditorType.INK,color,thickness:this.thickness,opacity:this.opacity,paths:_assertClassBrand(_InkEditor_brand,this,_serializePaths).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,rect),pageIndex:this.pageIndex,rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};}}_InkEditor=InkEditor;function _updateThickness2(thickness){const setThickness=th=>{this.thickness=th;_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this);};const savedThickness=this.thickness;this.addCommands({cmd:setThickness.bind(this,thickness),undo:setThickness.bind(this,savedThickness),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true});}function _updateColor3(color){const setColor=col=>{this.color=col;_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);};const savedColor=this.color;this.addCommands({cmd:setColor.bind(this,color),undo:setColor.bind(this,savedColor),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:true,keepUndo:true});}function _updateOpacity(opacity){const setOpacity=op=>{this.opacity=op;_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);};opacity/=100;const savedOpacity=this.opacity;this.addCommands({cmd:setOpacity.bind(this,opacity),undo:setOpacity.bind(this,savedOpacity),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:true,keepUndo:true});}function _getInitialBBox(){const{parentRotation,parentDimensions:[width,height]}=this;switch(parentRotation){case 90:return[0,height,height,width];case 180:return[width,height,width,height];case 270:return[width,0,height,width];default:return[0,0,width,height];}}function _setStroke(){const{ctx,color,opacity,thickness,parentScale,scaleFactor}=this;ctx.lineWidth=thickness*parentScale/scaleFactor;ctx.lineCap=\"round\";ctx.lineJoin=\"round\";ctx.miterLimit=10;ctx.strokeStyle=`${color}${(0,tools.opacityToHex)(opacity)}`;}function _startDrawing(x,y){this.canvas.addEventListener(\"contextmenu\",display_utils.noContextMenu);this.canvas.addEventListener(\"pointerleave\",_classPrivateFieldGet(_boundCanvasPointerleave,this));this.canvas.addEventListener(\"pointermove\",_classPrivateFieldGet(_boundCanvasPointermove,this));this.canvas.addEventListener(\"pointerup\",_classPrivateFieldGet(_boundCanvasPointerup,this));this.canvas.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundCanvasPointerdown,this));this.isEditing=true;if(!_classPrivateFieldGet(_isCanvasInitialized,this)){_classPrivateFieldSet(_isCanvasInitialized,this,true);_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);this.thickness||=_InkEditor._defaultThickness;this.color||=_InkEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor;this.opacity??=_InkEditor._defaultOpacity;}this.currentPath.push([x,y]);_classPrivateFieldSet(_hasSomethingToDraw,this,false);_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this);_classPrivateFieldSet(_requestFrameCallback,this,()=>{_assertClassBrand(_InkEditor_brand,this,_drawPoints).call(this);if(_classPrivateFieldGet(_requestFrameCallback,this)){window.requestAnimationFrame(_classPrivateFieldGet(_requestFrameCallback,this));}});window.requestAnimationFrame(_classPrivateFieldGet(_requestFrameCallback,this));}function _draw(x,y){const[lastX,lastY]=this.currentPath.at(-1);if(this.currentPath.length>1&&x===lastX&&y===lastY){return;}const currentPath=this.currentPath;let path2D=_classPrivateFieldGet(_currentPath2D,this);currentPath.push([x,y]);_classPrivateFieldSet(_hasSomethingToDraw,this,true);if(currentPath.length<=2){path2D.moveTo(...currentPath[0]);path2D.lineTo(x,y);return;}if(currentPath.length===3){_classPrivateFieldSet(_currentPath2D,this,path2D=new Path2D());path2D.moveTo(...currentPath[0]);}_assertClassBrand(_InkEditor_brand,this,_makeBezierCurve).call(this,path2D,...currentPath.at(-3),...currentPath.at(-2),x,y);}function _endPath(){if(this.currentPath.length===0){return;}const lastPoint=this.currentPath.at(-1);_classPrivateFieldGet(_currentPath2D,this).lineTo(...lastPoint);}function _stopDrawing(x,y){_classPrivateFieldSet(_requestFrameCallback,this,null);x=Math.min(Math.max(x,0),this.canvas.width);y=Math.min(Math.max(y,0),this.canvas.height);_assertClassBrand(_InkEditor_brand,this,_draw).call(this,x,y);_assertClassBrand(_InkEditor_brand,this,_endPath).call(this);let bezier;if(this.currentPath.length!==1){bezier=_assertClassBrand(_InkEditor_brand,this,_generateBezierPoints).call(this);}else{const xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]];}const path2D=_classPrivateFieldGet(_currentPath2D,this);const currentPath=this.currentPath;this.currentPath=[];_classPrivateFieldSet(_currentPath2D,this,new Path2D());const cmd=()=>{this.allRawPaths.push(currentPath);this.paths.push(bezier);this.bezierPath2D.push(path2D);this._uiManager.rebuild(this);};const undo=()=>{this.allRawPaths.pop();this.paths.pop();this.bezierPath2D.pop();if(this.paths.length===0){this.remove();}else{if(!this.canvas){_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this);_assertClassBrand(_InkEditor_brand,this,_createObserver).call(this);}_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this);}};this.addCommands({cmd,undo,mustExec:true});}function _drawPoints(){if(!_classPrivateFieldGet(_hasSomethingToDraw,this)){return;}_classPrivateFieldSet(_hasSomethingToDraw,this,false);const thickness=Math.ceil(this.thickness*this.parentScale);const lastPoints=this.currentPath.slice(-3);const x=lastPoints.map(xy=>xy[0]);const y=lastPoints.map(xy=>xy[1]);const xMin=Math.min(...x)-thickness;const xMax=Math.max(...x)+thickness;const yMin=Math.min(...y)-thickness;const yMax=Math.max(...y)+thickness;const{ctx}=this;ctx.save();ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(const path of this.bezierPath2D){ctx.stroke(path);}ctx.stroke(_classPrivateFieldGet(_currentPath2D,this));ctx.restore();}function _makeBezierCurve(path2D,x0,y0,x1,y1,x2,y2){const prevX=(x0+x1)/2;const prevY=(y0+y1)/2;const x3=(x1+x2)/2;const y3=(y1+y2)/2;path2D.bezierCurveTo(prevX+2*(x1-prevX)/3,prevY+2*(y1-prevY)/3,x3+2*(x1-x3)/3,y3+2*(y1-y3)/3,x3,y3);}function _generateBezierPoints(){const path=this.currentPath;if(path.length<=2){return[[path[0],path[0],path.at(-1),path.at(-1)]];}const bezierPoints=[];let i;let[x0,y0]=path[0];for(i=1;i<path.length-2;i++){const[x1,y1]=path[i];const[x2,y2]=path[i+1];const x3=(x1+x2)/2;const y3=(y1+y2)/2;const control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3];const control2=[x3+2*(x1-x3)/3,y3+2*(y1-y3)/3];bezierPoints.push([[x0,y0],control1,control2,[x3,y3]]);[x0,y0]=[x3,y3];}const[x1,y1]=path[i];const[x2,y2]=path[i+1];const control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3];const control2=[x2+2*(x1-x2)/3,y2+2*(y1-y2)/3];bezierPoints.push([[x0,y0],control1,control2,[x2,y2]]);return bezierPoints;}function _redraw(){if(this.isEmpty()){_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);return;}_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this);const{canvas,ctx}=this;ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,canvas.width,canvas.height);_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);for(const path of this.bezierPath2D){ctx.stroke(path);}}function _endDrawing(event){this.canvas.removeEventListener(\"pointerleave\",_classPrivateFieldGet(_boundCanvasPointerleave,this));this.canvas.removeEventListener(\"pointermove\",_classPrivateFieldGet(_boundCanvasPointermove,this));this.canvas.removeEventListener(\"pointerup\",_classPrivateFieldGet(_boundCanvasPointerup,this));this.canvas.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundCanvasPointerdown,this));if(_classPrivateFieldGet(_canvasContextMenuTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_canvasContextMenuTimeoutId,this));}_classPrivateFieldSet(_canvasContextMenuTimeoutId,this,setTimeout(()=>{_classPrivateFieldSet(_canvasContextMenuTimeoutId,this,null);this.canvas.removeEventListener(\"contextmenu\",display_utils.noContextMenu);},10));_assertClassBrand(_InkEditor_brand,this,_stopDrawing).call(this,event.offsetX,event.offsetY);this.addToAnnotationStorage();this.setInBackground();}function _createCanvas(){this.canvas=document.createElement(\"canvas\");this.canvas.width=this.canvas.height=0;this.canvas.className=\"inkEditorCanvas\";this.canvas.setAttribute(\"data-l10n-id\",\"pdfjs-ink-canvas\");this.div.append(this.canvas);this.ctx=this.canvas.getContext(\"2d\");}function _createObserver(){_classPrivateFieldSet(_observer,this,new ResizeObserver(entries=>{const rect=entries[0].contentRect;if(rect.width&&rect.height){this.setDimensions(rect.width,rect.height);}}));_classPrivateFieldGet(_observer,this).observe(this.div);}function _setCanvasDims(){if(!_classPrivateFieldGet(_isCanvasInitialized,this)){return;}const[parentWidth,parentHeight]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*parentWidth);this.canvas.height=Math.ceil(this.height*parentHeight);_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);}function _setScaleFactor(width,height){const padding=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this);const scaleFactorW=(width-padding)/_classPrivateFieldGet(_baseWidth,this);const scaleFactorH=(height-padding)/_classPrivateFieldGet(_baseHeight,this);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH);}function _updateTransform(){const padding=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding);}function _buildPath2D(bezier){const path2D=new Path2D();for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i];if(i===0){path2D.moveTo(...first);}path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1]);}return path2D;}function _toPDFCoordinates(points,rect,rotation){const[blX,blY,trX,trY]=rect;switch(rotation){case 0:for(let i=0,ii=points.length;i<ii;i+=2){points[i]+=blX;points[i+1]=trY-points[i+1];}break;case 90:for(let i=0,ii=points.length;i<ii;i+=2){const x=points[i];points[i]=points[i+1]+blX;points[i+1]=x+blY;}break;case 180:for(let i=0,ii=points.length;i<ii;i+=2){points[i]=trX-points[i];points[i+1]+=blY;}break;case 270:for(let i=0,ii=points.length;i<ii;i+=2){const x=points[i];points[i]=trX-points[i+1];points[i+1]=trY-x;}break;default:throw new Error(\"Invalid rotation\");}return points;}function _fromPDFCoordinates(points,rect,rotation){const[blX,blY,trX,trY]=rect;switch(rotation){case 0:for(let i=0,ii=points.length;i<ii;i+=2){points[i]-=blX;points[i+1]=trY-points[i+1];}break;case 90:for(let i=0,ii=points.length;i<ii;i+=2){const x=points[i];points[i]=points[i+1]-blY;points[i+1]=x-blX;}break;case 180:for(let i=0,ii=points.length;i<ii;i+=2){points[i]=trX-points[i];points[i+1]-=blY;}break;case 270:for(let i=0,ii=points.length;i<ii;i+=2){const x=points[i];points[i]=trY-points[i+1];points[i+1]=trX-x;}break;default:throw new Error(\"Invalid rotation\");}return points;}function _serializePaths(s,tx,ty,rect){const paths=[];const padding=this.thickness/2;const shiftX=s*tx+padding;const shiftY=s*ty+padding;for(const bezier of this.paths){const buffer=[];const points=[];for(let j=0,jj=bezier.length;j<jj;j++){const[first,control1,control2,second]=bezier[j];if(first[0]===second[0]&&first[1]===second[1]&&jj===1){const p0=s*first[0]+shiftX;const p1=s*first[1]+shiftY;buffer.push(p0,p1);points.push(p0,p1);break;}const p10=s*first[0]+shiftX;const p11=s*first[1]+shiftY;const p20=s*control1[0]+shiftX;const p21=s*control1[1]+shiftY;const p30=s*control2[0]+shiftX;const p31=s*control2[1]+shiftY;const p40=s*second[0]+shiftX;const p41=s*second[1]+shiftY;if(j===0){buffer.push(p10,p11);points.push(p10,p11);}buffer.push(p20,p21,p30,p31,p40,p41);points.push(p20,p21);if(j===jj-1){points.push(p40,p41);}}paths.push({bezier:_toPDFCoordinates.call(_InkEditor,buffer,rect,this.rotation),points:_toPDFCoordinates.call(_InkEditor,points,rect,this.rotation)});}return paths;}function _getBbox(){let xMin=Infinity;let xMax=-Infinity;let yMin=Infinity;let yMax=-Infinity;for(const path of this.paths){for(const[first,control1,control2,second]of path){const bbox=util.Util.bezierBoundingBox(...first,...control1,...control2,...second);xMin=Math.min(xMin,bbox[0]);yMin=Math.min(yMin,bbox[1]);xMax=Math.max(xMax,bbox[2]);yMax=Math.max(yMax,bbox[3]);}}return[xMin,yMin,xMax,yMax];}function _getPadding(){return _classPrivateFieldGet(_disableEditing,this)?Math.ceil(this.thickness*this.parentScale):0;}function _fitToContent(){let firstTime=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return;}if(!_classPrivateFieldGet(_disableEditing,this)){_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);return;}const bbox=_assertClassBrand(_InkEditor_brand,this,_getBbox).call(this);const padding=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this);_classPrivateFieldSet(_baseWidth,this,Math.max(editor_editor.AnnotationEditor.MIN_SIZE,bbox[2]-bbox[0]));_classPrivateFieldSet(_baseHeight,this,Math.max(editor_editor.AnnotationEditor.MIN_SIZE,bbox[3]-bbox[1]));const width=Math.ceil(padding+_classPrivateFieldGet(_baseWidth,this)*this.scaleFactor);const height=Math.ceil(padding+_classPrivateFieldGet(_baseHeight,this)*this.scaleFactor);const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth;this.height=height/parentHeight;this.setAspectRatio(width,height);const prevTranslationX=this.translationX;const prevTranslationY=this.translationY;this.translationX=-bbox[0];this.translationY=-bbox[1];_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);_classPrivateFieldSet(_realWidth,this,width);_classPrivateFieldSet(_realHeight,this,height);this.setDims(width,height);const unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding);}_defineProperty(InkEditor,\"_defaultColor\",null);_defineProperty(InkEditor,\"_defaultOpacity\",1);_defineProperty(InkEditor,\"_defaultThickness\",1);_defineProperty(InkEditor,\"_type\",\"ink\");_defineProperty(InkEditor,\"_editorType\",util.AnnotationEditorType.INK);;// CONCATENATED MODULE: ./src/display/editor/stamp.js\nvar _bitmap=/*#__PURE__*/new WeakMap();var _bitmapId=/*#__PURE__*/new WeakMap();var _bitmapPromise=/*#__PURE__*/new WeakMap();var _bitmapUrl=/*#__PURE__*/new WeakMap();var _bitmapFile=/*#__PURE__*/new WeakMap();var _bitmapFileName=/*#__PURE__*/new WeakMap();var _canvas=/*#__PURE__*/new WeakMap();var _observer2=/*#__PURE__*/new WeakMap();var _resizeTimeoutId=/*#__PURE__*/new WeakMap();var _isSvg=/*#__PURE__*/new WeakMap();var _hasBeenAddedInUndoStack=/*#__PURE__*/new WeakMap();var _StampEditor_brand=/*#__PURE__*/new WeakSet();class StampEditor extends editor_editor.AnnotationEditor{constructor(params){super({...params,name:\"stampEditor\"});_classPrivateMethodInitSpec(this,_StampEditor_brand);_classPrivateFieldInitSpec(this,_bitmap,null);_classPrivateFieldInitSpec(this,_bitmapId,null);_classPrivateFieldInitSpec(this,_bitmapPromise,null);_classPrivateFieldInitSpec(this,_bitmapUrl,null);_classPrivateFieldInitSpec(this,_bitmapFile,null);_classPrivateFieldInitSpec(this,_bitmapFileName,\"\");_classPrivateFieldInitSpec(this,_canvas,null);_classPrivateFieldInitSpec(this,_observer2,null);_classPrivateFieldInitSpec(this,_resizeTimeoutId,null);_classPrivateFieldInitSpec(this,_isSvg,false);_classPrivateFieldInitSpec(this,_hasBeenAddedInUndoStack,false);_classPrivateFieldSet(_bitmapUrl,this,params.bitmapUrl);_classPrivateFieldSet(_bitmapFile,this,params.bitmapFile);}static initialize(l10n,uiManager){editor_editor.AnnotationEditor.initialize(l10n,uiManager);}static get supportedTypes(){const types=[\"apng\",\"avif\",\"bmp\",\"gif\",\"jpeg\",\"png\",\"svg+xml\",\"webp\",\"x-icon\"];return(0,util.shadow)(this,\"supportedTypes\",types.map(type=>`image/${type}`));}static get supportedTypesStr(){return(0,util.shadow)(this,\"supportedTypesStr\",this.supportedTypes.join(\",\"));}static isHandlingMimeForPasting(mime){return this.supportedTypes.includes(mime);}static paste(item,parent){parent.pasteEditor(util.AnnotationEditorType.STAMP,{bitmapFile:item.getAsFile()});}remove(){if(_classPrivateFieldGet(_bitmapId,this)){_classPrivateFieldSet(_bitmap,this,null);this._uiManager.imageManager.deleteId(_classPrivateFieldGet(_bitmapId,this));_classPrivateFieldGet(_canvas,this)?.remove();_classPrivateFieldSet(_canvas,this,null);_classPrivateFieldGet(_observer2,this)?.disconnect();_classPrivateFieldSet(_observer2,this,null);if(_classPrivateFieldGet(_resizeTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_resizeTimeoutId,this));_classPrivateFieldSet(_resizeTimeoutId,this,null);}}super.remove();}rebuild(){if(!this.parent){if(_classPrivateFieldGet(_bitmapId,this)){_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}return;}super.rebuild();if(this.div===null){return;}if(_classPrivateFieldGet(_bitmapId,this)&&_classPrivateFieldGet(_canvas,this)===null){_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);}}onceAdded(){this._isDraggable=true;this.div.focus();}isEmpty(){return!(_classPrivateFieldGet(_bitmapPromise,this)||_classPrivateFieldGet(_bitmap,this)||_classPrivateFieldGet(_bitmapUrl,this)||_classPrivateFieldGet(_bitmapFile,this)||_classPrivateFieldGet(_bitmapId,this));}get isResizable(){return true;}render(){if(this.div){return this.div;}let baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}super.render();this.div.hidden=true;this.addAltTextButton();if(_classPrivateFieldGet(_bitmap,this)){_assertClassBrand(_StampEditor_brand,this,_createCanvas2).call(this);}else{_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}if(this.width){const[parentWidth,parentHeight]=this.parentDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);}return this.div;}getImageForAltText(){return _classPrivateFieldGet(_canvas,this);}static deserialize(data,parent,uiManager){if(data instanceof annotation_layer.StampAnnotationElement){return null;}const editor=super.deserialize(data,parent,uiManager);const{rect,bitmapUrl,bitmapId,isSvg,accessibilityData}=data;if(bitmapId&&uiManager.imageManager.isValidId(bitmapId)){_classPrivateFieldSet(_bitmapId,editor,bitmapId);}else{_classPrivateFieldSet(_bitmapUrl,editor,bitmapUrl);}_classPrivateFieldSet(_isSvg,editor,isSvg);const[parentWidth,parentHeight]=editor.pageDimensions;editor.width=(rect[2]-rect[0])/parentWidth;editor.height=(rect[3]-rect[1])/parentHeight;if(accessibilityData){editor.altTextData=accessibilityData;}return editor;}serialize(){let isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(this.isEmpty()){return null;}const serialized={annotationType:util.AnnotationEditorType.STAMP,bitmapId:_classPrivateFieldGet(_bitmapId,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:_classPrivateFieldGet(_isSvg,this),structTreeParentId:this._structTreeParentId};if(isForCopying){serialized.bitmapUrl=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,true);serialized.accessibilityData=this.altTextData;return serialized;}const{decorative,altText}=this.altTextData;if(!decorative&&altText){serialized.accessibilityData={type:\"Figure\",alt:altText};}if(context===null){return serialized;}context.stamps||=new Map();const area=_classPrivateFieldGet(_isSvg,this)?(serialized.rect[2]-serialized.rect[0])*(serialized.rect[3]-serialized.rect[1]):null;if(!context.stamps.has(_classPrivateFieldGet(_bitmapId,this))){context.stamps.set(_classPrivateFieldGet(_bitmapId,this),{area,serialized});serialized.bitmap=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,false);}else if(_classPrivateFieldGet(_isSvg,this)){const prevData=context.stamps.get(_classPrivateFieldGet(_bitmapId,this));if(area>prevData.area){prevData.area=area;prevData.serialized.bitmap.close();prevData.serialized.bitmap=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,false);}}return serialized;}}_StampEditor=StampEditor;function _getBitmapFetched(data){let fromId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!data){this.remove();return;}_classPrivateFieldSet(_bitmap,this,data.bitmap);if(!fromId){_classPrivateFieldSet(_bitmapId,this,data.id);_classPrivateFieldSet(_isSvg,this,data.isSvg);}if(data.file){_classPrivateFieldSet(_bitmapFileName,this,data.file.name);}_assertClassBrand(_StampEditor_brand,this,_createCanvas2).call(this);}function _getBitmapDone(){_classPrivateFieldSet(_bitmapPromise,this,null);this._uiManager.enableWaiting(false);if(_classPrivateFieldGet(_canvas,this)){this.div.focus();}}function _getBitmap(){if(_classPrivateFieldGet(_bitmapId,this)){this._uiManager.enableWaiting(true);this._uiManager.imageManager.getFromId(_classPrivateFieldGet(_bitmapId,this)).then(data=>_assertClassBrand(_StampEditor_brand,this,_getBitmapFetched).call(this,data,true)).finally(()=>_assertClassBrand(_StampEditor_brand,this,_getBitmapDone).call(this));return;}if(_classPrivateFieldGet(_bitmapUrl,this)){const url=_classPrivateFieldGet(_bitmapUrl,this);_classPrivateFieldSet(_bitmapUrl,this,null);this._uiManager.enableWaiting(true);_classPrivateFieldSet(_bitmapPromise,this,this._uiManager.imageManager.getFromUrl(url).then(data=>_assertClassBrand(_StampEditor_brand,this,_getBitmapFetched).call(this,data)).finally(()=>_assertClassBrand(_StampEditor_brand,this,_getBitmapDone).call(this)));return;}if(_classPrivateFieldGet(_bitmapFile,this)){const file=_classPrivateFieldGet(_bitmapFile,this);_classPrivateFieldSet(_bitmapFile,this,null);this._uiManager.enableWaiting(true);_classPrivateFieldSet(_bitmapPromise,this,this._uiManager.imageManager.getFromFile(file).then(data=>_assertClassBrand(_StampEditor_brand,this,_getBitmapFetched).call(this,data)).finally(()=>_assertClassBrand(_StampEditor_brand,this,_getBitmapDone).call(this)));return;}const input=document.createElement(\"input\");input.type=\"file\";input.accept=_StampEditor.supportedTypesStr;_classPrivateFieldSet(_bitmapPromise,this,new Promise(resolve=>{input.addEventListener(\"change\",async()=>{if(!input.files||input.files.length===0){this.remove();}else{this._uiManager.enableWaiting(true);const data=await this._uiManager.imageManager.getFromFile(input.files[0]);_assertClassBrand(_StampEditor_brand,this,_getBitmapFetched).call(this,data);}resolve();});input.addEventListener(\"cancel\",()=>{this.remove();resolve();});}).finally(()=>_assertClassBrand(_StampEditor_brand,this,_getBitmapDone).call(this)));input.click();}function _createCanvas2(){const{div}=this;let{width,height}=_classPrivateFieldGet(_bitmap,this);const[pageWidth,pageHeight]=this.pageDimensions;const MAX_RATIO=0.75;if(this.width){width=this.width*pageWidth;height=this.height*pageHeight;}else if(width>MAX_RATIO*pageWidth||height>MAX_RATIO*pageHeight){const factor=Math.min(MAX_RATIO*pageWidth/width,MAX_RATIO*pageHeight/height);width*=factor;height*=factor;}const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(width*parentWidth/pageWidth,height*parentHeight/pageHeight);this._uiManager.enableWaiting(false);const canvas=_classPrivateFieldSet(_canvas,this,document.createElement(\"canvas\"));div.append(canvas);div.hidden=false;_assertClassBrand(_StampEditor_brand,this,_drawBitmap).call(this,width,height);_assertClassBrand(_StampEditor_brand,this,_createObserver2).call(this);if(!_classPrivateFieldGet(_hasBeenAddedInUndoStack,this)){this.parent.addUndoableEditor(this);_classPrivateFieldSet(_hasBeenAddedInUndoStack,this,true);}this._reportTelemetry({action:\"inserted_image\"});if(_classPrivateFieldGet(_bitmapFileName,this)){canvas.setAttribute(\"aria-label\",_classPrivateFieldGet(_bitmapFileName,this));}}function _setDimensions(width,height){const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth;this.height=height/parentHeight;this.setDims(width,height);if(this._initialOptions?.isCentered){this.center();}else{this.fixAndSetPosition();}this._initialOptions=null;if(_classPrivateFieldGet(_resizeTimeoutId,this)!==null){clearTimeout(_classPrivateFieldGet(_resizeTimeoutId,this));}const TIME_TO_WAIT=200;_classPrivateFieldSet(_resizeTimeoutId,this,setTimeout(()=>{_classPrivateFieldSet(_resizeTimeoutId,this,null);_assertClassBrand(_StampEditor_brand,this,_drawBitmap).call(this,width,height);},TIME_TO_WAIT));}function _scaleBitmap(width,height){const{width:bitmapWidth,height:bitmapHeight}=_classPrivateFieldGet(_bitmap,this);let newWidth=bitmapWidth;let newHeight=bitmapHeight;let bitmap=_classPrivateFieldGet(_bitmap,this);while(newWidth>2*width||newHeight>2*height){const prevWidth=newWidth;const prevHeight=newHeight;if(newWidth>2*width){newWidth=newWidth>=16384?Math.floor(newWidth/2)-1:Math.ceil(newWidth/2);}if(newHeight>2*height){newHeight=newHeight>=16384?Math.floor(newHeight/2)-1:Math.ceil(newHeight/2);}const offscreen=new OffscreenCanvas(newWidth,newHeight);const ctx=offscreen.getContext(\"2d\");ctx.drawImage(bitmap,0,0,prevWidth,prevHeight,0,0,newWidth,newHeight);bitmap=offscreen.transferToImageBitmap();}return bitmap;}function _drawBitmap(width,height){width=Math.ceil(width);height=Math.ceil(height);const canvas=_classPrivateFieldGet(_canvas,this);if(!canvas||canvas.width===width&&canvas.height===height){return;}canvas.width=width;canvas.height=height;const bitmap=_classPrivateFieldGet(_isSvg,this)?_classPrivateFieldGet(_bitmap,this):_assertClassBrand(_StampEditor_brand,this,_scaleBitmap).call(this,width,height);if(this._uiManager.hasMLManager&&!this.hasAltText()){const offscreen=new OffscreenCanvas(width,height);const ctx=offscreen.getContext(\"2d\");ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,width,height);offscreen.convertToBlob().then(blob=>{const fileReader=new FileReader();fileReader.onload=()=>{const url=fileReader.result;this._uiManager.mlGuess({service:\"image-to-text\",request:{imageData:url}}).then(response=>{const altText=response?.output||\"\";if(this.parent&&altText&&!this.hasAltText()){this.altTextData={altText,decorative:false};}});};fileReader.readAsDataURL(blob);});}const ctx=canvas.getContext(\"2d\");ctx.filter=this._uiManager.hcmFilter;ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,width,height);}function _serializeBitmap(toUrl){if(toUrl){if(_classPrivateFieldGet(_isSvg,this)){const url=this._uiManager.imageManager.getSvgUrl(_classPrivateFieldGet(_bitmapId,this));if(url){return url;}}const canvas=document.createElement(\"canvas\");({width:canvas.width,height:canvas.height}=_classPrivateFieldGet(_bitmap,this));const ctx=canvas.getContext(\"2d\");ctx.drawImage(_classPrivateFieldGet(_bitmap,this),0,0);return canvas.toDataURL();}if(_classPrivateFieldGet(_isSvg,this)){const[pageWidth,pageHeight]=this.pageDimensions;const width=Math.round(this.width*pageWidth*display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);const height=Math.round(this.height*pageHeight*display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);const offscreen=new OffscreenCanvas(width,height);const ctx=offscreen.getContext(\"2d\");ctx.drawImage(_classPrivateFieldGet(_bitmap,this),0,0,_classPrivateFieldGet(_bitmap,this).width,_classPrivateFieldGet(_bitmap,this).height,0,0,width,height);return offscreen.transferToImageBitmap();}return structuredClone(_classPrivateFieldGet(_bitmap,this));}function _createObserver2(){_classPrivateFieldSet(_observer2,this,new ResizeObserver(entries=>{const rect=entries[0].contentRect;if(rect.width&&rect.height){_assertClassBrand(_StampEditor_brand,this,_setDimensions).call(this,rect.width,rect.height);}}));_classPrivateFieldGet(_observer2,this).observe(this.div);}_defineProperty(StampEditor,\"_type\",\"stamp\");_defineProperty(StampEditor,\"_editorType\",util.AnnotationEditorType.STAMP);;// CONCATENATED MODULE: ./src/display/editor/annotation_editor_layer.js\nvar _accessibilityManager2=/*#__PURE__*/new WeakMap();var _allowClick=/*#__PURE__*/new WeakMap();var _annotationLayer=/*#__PURE__*/new WeakMap();var _boundPointerup=/*#__PURE__*/new WeakMap();var _boundPointerdown=/*#__PURE__*/new WeakMap();var _boundTextLayerPointerDown=/*#__PURE__*/new WeakMap();var _editorFocusTimeoutId=/*#__PURE__*/new WeakMap();var _editors=/*#__PURE__*/new WeakMap();var _hadPointerDown=/*#__PURE__*/new WeakMap();var _isCleaningUp=/*#__PURE__*/new WeakMap();var _isDisabling=/*#__PURE__*/new WeakMap();var _textLayer=/*#__PURE__*/new WeakMap();var _uiManager2=/*#__PURE__*/new WeakMap();var _AnnotationEditorLayer_brand=/*#__PURE__*/new WeakSet();class AnnotationEditorLayer{constructor(_ref41){let{uiManager,pageIndex,div,accessibilityManager,annotationLayer,drawLayer,textLayer,viewport,l10n}=_ref41;_classPrivateMethodInitSpec(this,_AnnotationEditorLayer_brand);_classPrivateFieldInitSpec(this,_accessibilityManager2,void 0);_classPrivateFieldInitSpec(this,_allowClick,false);_classPrivateFieldInitSpec(this,_annotationLayer,null);_classPrivateFieldInitSpec(this,_boundPointerup,null);_classPrivateFieldInitSpec(this,_boundPointerdown,null);_classPrivateFieldInitSpec(this,_boundTextLayerPointerDown,null);_classPrivateFieldInitSpec(this,_editorFocusTimeoutId,null);_classPrivateFieldInitSpec(this,_editors,new Map());_classPrivateFieldInitSpec(this,_hadPointerDown,false);_classPrivateFieldInitSpec(this,_isCleaningUp,false);_classPrivateFieldInitSpec(this,_isDisabling,false);_classPrivateFieldInitSpec(this,_textLayer,null);_classPrivateFieldInitSpec(this,_uiManager2,void 0);const editorTypes=[..._editorTypes._.values()];if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=true;for(const editorType of editorTypes){editorType.initialize(l10n,uiManager);}}uiManager.registerEditorTypes(editorTypes);_classPrivateFieldSet(_uiManager2,this,uiManager);this.pageIndex=pageIndex;this.div=div;_classPrivateFieldSet(_accessibilityManager2,this,accessibilityManager);_classPrivateFieldSet(_annotationLayer,this,annotationLayer);this.viewport=viewport;_classPrivateFieldSet(_textLayer,this,textLayer);this.drawLayer=drawLayer;_classPrivateFieldGet(_uiManager2,this).addLayer(this);}get isEmpty(){return _classPrivateFieldGet(_editors,this).size===0;}get isInvisible(){return this.isEmpty&&_classPrivateFieldGet(_uiManager2,this).getMode()===util.AnnotationEditorType.NONE;}updateToolbar(mode){_classPrivateFieldGet(_uiManager2,this).updateToolbar(mode);}updateMode(){let mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_classPrivateFieldGet(_uiManager2,this).getMode();_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup).call(this);switch(mode){case util.AnnotationEditorType.NONE:this.disableTextSelection();this.togglePointerEvents(false);this.toggleAnnotationLayerPointerEvents(true);this.disableClick();return;case util.AnnotationEditorType.INK:this.addInkEditorIfNeeded(false);this.disableTextSelection();this.togglePointerEvents(true);this.disableClick();break;case util.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection();this.togglePointerEvents(false);this.disableClick();break;default:this.disableTextSelection();this.togglePointerEvents(true);this.enableClick();}this.toggleAnnotationLayerPointerEvents(false);const{classList}=this.div;for(const editorType of _editorTypes._.values()){classList.toggle(`${editorType._type}Editing`,mode===editorType._editorType);}this.div.hidden=false;}hasTextLayer(textLayer){return textLayer===_classPrivateFieldGet(_textLayer,this)?.div;}addInkEditorIfNeeded(isCommitting){if(_classPrivateFieldGet(_uiManager2,this).getMode()!==util.AnnotationEditorType.INK){return;}if(!isCommitting){for(const editor of _classPrivateFieldGet(_editors,this).values()){if(editor.isEmpty()){editor.setInBackground();return;}}}const editor=this.createAndAddNewEditor({offsetX:0,offsetY:0},false);editor.setInBackground();}setEditingState(isEditing){_classPrivateFieldGet(_uiManager2,this).setEditingState(isEditing);}addCommands(params){_classPrivateFieldGet(_uiManager2,this).addCommands(params);}togglePointerEvents(){let enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.div.classList.toggle(\"disabled\",!enabled);}toggleAnnotationLayerPointerEvents(){let enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classPrivateFieldGet(_annotationLayer,this)?.div.classList.toggle(\"disabled\",!enabled);}enable(){this.div.tabIndex=0;this.togglePointerEvents(true);const annotationElementIds=new Set();for(const editor of _classPrivateFieldGet(_editors,this).values()){editor.enableEditing();editor.show(true);if(editor.annotationElementId){_classPrivateFieldGet(_uiManager2,this).removeChangedExistingAnnotation(editor);annotationElementIds.add(editor.annotationElementId);}}if(!_classPrivateFieldGet(_annotationLayer,this)){return;}const editables=_classPrivateFieldGet(_annotationLayer,this).getEditableAnnotations();for(const editable of editables){editable.hide();if(_classPrivateFieldGet(_uiManager2,this).isDeletedAnnotationElement(editable.data.id)){continue;}if(annotationElementIds.has(editable.data.id)){continue;}const editor=this.deserialize(editable);if(!editor){continue;}this.addOrRebuild(editor);editor.enableEditing();}}disable(){_classPrivateFieldSet(_isDisabling,this,true);this.div.tabIndex=-1;this.togglePointerEvents(false);const changedAnnotations=new Map();const resetAnnotations=new Map();for(const editor of _classPrivateFieldGet(_editors,this).values()){editor.disableEditing();if(!editor.annotationElementId){continue;}if(editor.serialize()!==null){changedAnnotations.set(editor.annotationElementId,editor);continue;}else{resetAnnotations.set(editor.annotationElementId,editor);}this.getEditableAnnotation(editor.annotationElementId)?.show();editor.remove();}if(_classPrivateFieldGet(_annotationLayer,this)){const editables=_classPrivateFieldGet(_annotationLayer,this).getEditableAnnotations();for(const editable of editables){const{id}=editable.data;if(_classPrivateFieldGet(_uiManager2,this).isDeletedAnnotationElement(id)){continue;}let editor=resetAnnotations.get(id);if(editor){editor.resetAnnotationElement(editable);editor.show(false);editable.show();continue;}editor=changedAnnotations.get(id);if(editor){_classPrivateFieldGet(_uiManager2,this).addChangedExistingAnnotation(editor);editor.renderAnnotationElement(editable);editor.show(false);}editable.show();}}_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup).call(this);if(this.isEmpty){this.div.hidden=true;}const{classList}=this.div;for(const editorType of _editorTypes._.values()){classList.remove(`${editorType._type}Editing`);}this.disableTextSelection();this.toggleAnnotationLayerPointerEvents(true);_classPrivateFieldSet(_isDisabling,this,false);}getEditableAnnotation(id){return _classPrivateFieldGet(_annotationLayer,this)?.getEditableAnnotation(id)||null;}setActiveEditor(editor){const currentActive=_classPrivateFieldGet(_uiManager2,this).getActive();if(currentActive===editor){return;}_classPrivateFieldGet(_uiManager2,this).setActiveEditor(editor);}enableTextSelection(){this.div.tabIndex=-1;if(_classPrivateFieldGet(_textLayer,this)?.div&&!_classPrivateFieldGet(_boundTextLayerPointerDown,this)){_classPrivateFieldSet(_boundTextLayerPointerDown,this,_assertClassBrand(_AnnotationEditorLayer_brand,this,_textLayerPointerDown).bind(this));_classPrivateFieldGet(_textLayer,this).div.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundTextLayerPointerDown,this));_classPrivateFieldGet(_textLayer,this).div.classList.add(\"highlighting\");}}disableTextSelection(){this.div.tabIndex=0;if(_classPrivateFieldGet(_textLayer,this)?.div&&_classPrivateFieldGet(_boundTextLayerPointerDown,this)){_classPrivateFieldGet(_textLayer,this).div.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundTextLayerPointerDown,this));_classPrivateFieldSet(_boundTextLayerPointerDown,this,null);_classPrivateFieldGet(_textLayer,this).div.classList.remove(\"highlighting\");}}enableClick(){if(_classPrivateFieldGet(_boundPointerdown,this)){return;}_classPrivateFieldSet(_boundPointerdown,this,this.pointerdown.bind(this));_classPrivateFieldSet(_boundPointerup,this,this.pointerup.bind(this));this.div.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundPointerdown,this));this.div.addEventListener(\"pointerup\",_classPrivateFieldGet(_boundPointerup,this));}disableClick(){if(!_classPrivateFieldGet(_boundPointerdown,this)){return;}this.div.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundPointerdown,this));this.div.removeEventListener(\"pointerup\",_classPrivateFieldGet(_boundPointerup,this));_classPrivateFieldSet(_boundPointerdown,this,null);_classPrivateFieldSet(_boundPointerup,this,null);}attach(editor){_classPrivateFieldGet(_editors,this).set(editor.id,editor);const{annotationElementId}=editor;if(annotationElementId&&_classPrivateFieldGet(_uiManager2,this).isDeletedAnnotationElement(annotationElementId)){_classPrivateFieldGet(_uiManager2,this).removeDeletedAnnotationElement(editor);}}detach(editor){_classPrivateFieldGet(_editors,this).delete(editor.id);_classPrivateFieldGet(_accessibilityManager2,this)?.removePointerInTextLayer(editor.contentDiv);if(!_classPrivateFieldGet(_isDisabling,this)&&editor.annotationElementId){_classPrivateFieldGet(_uiManager2,this).addDeletedAnnotationElement(editor);}}remove(editor){this.detach(editor);_classPrivateFieldGet(_uiManager2,this).removeEditor(editor);editor.div.remove();editor.isAttachedToDOM=false;if(!_classPrivateFieldGet(_isCleaningUp,this)){this.addInkEditorIfNeeded(false);}}changeParent(editor){if(editor.parent===this){return;}if(editor.parent&&editor.annotationElementId){_classPrivateFieldGet(_uiManager2,this).addDeletedAnnotationElement(editor.annotationElementId);editor_editor.AnnotationEditor.deleteAnnotationElement(editor);editor.annotationElementId=null;}this.attach(editor);editor.parent?.detach(editor);editor.setParent(this);if(editor.div&&editor.isAttachedToDOM){editor.div.remove();this.div.append(editor.div);}}add(editor){if(editor.parent===this&&editor.isAttachedToDOM){return;}this.changeParent(editor);_classPrivateFieldGet(_uiManager2,this).addEditor(editor);this.attach(editor);if(!editor.isAttachedToDOM){const div=editor.render();this.div.append(div);editor.isAttachedToDOM=true;}editor.fixAndSetPosition();editor.onceAdded();_classPrivateFieldGet(_uiManager2,this).addToAnnotationStorage(editor);editor._reportTelemetry(editor.telemetryInitialData);}moveEditorInDOM(editor){if(!editor.isAttachedToDOM){return;}const{activeElement}=document;if(editor.div.contains(activeElement)&&!_classPrivateFieldGet(_editorFocusTimeoutId,this)){editor._focusEventsAllowed=false;_classPrivateFieldSet(_editorFocusTimeoutId,this,setTimeout(()=>{_classPrivateFieldSet(_editorFocusTimeoutId,this,null);if(!editor.div.contains(document.activeElement)){editor.div.addEventListener(\"focusin\",()=>{editor._focusEventsAllowed=true;},{once:true});activeElement.focus();}else{editor._focusEventsAllowed=true;}},0));}editor._structTreeParentId=_classPrivateFieldGet(_accessibilityManager2,this)?.moveElementInDOM(this.div,editor.div,editor.contentDiv,true);}addOrRebuild(editor){if(editor.needsToBeRebuilt()){editor.parent||=this;editor.rebuild();editor.show();}else{this.add(editor);}}addUndoableEditor(editor){const cmd=()=>editor._uiManager.rebuild(editor);const undo=()=>{editor.remove();};this.addCommands({cmd,undo,mustExec:false});}getNextId(){return _classPrivateFieldGet(_uiManager2,this).getId();}canCreateNewEmptyEditor(){return _classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType)?.canCreateNewEmptyEditor();}pasteEditor(mode,params){_classPrivateFieldGet(_uiManager2,this).updateToolbar(mode);_classPrivateFieldGet(_uiManager2,this).updateMode(mode);const{offsetX,offsetY}=_assertClassBrand(_AnnotationEditorLayer_brand,this,_getCenterPoint).call(this);const id=this.getNextId();const editor=_assertClassBrand(_AnnotationEditorLayer_brand,this,_createNewEditor).call(this,{parent:this,id,x:offsetX,y:offsetY,uiManager:_classPrivateFieldGet(_uiManager2,this),isCentered:true,...params});if(editor){this.add(editor);}}deserialize(data){return _editorTypes._.get(data.annotationType??data.annotationEditorType)?.deserialize(data,this,_classPrivateFieldGet(_uiManager2,this))||null;}createAndAddNewEditor(event,isCentered){let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const id=this.getNextId();const editor=_assertClassBrand(_AnnotationEditorLayer_brand,this,_createNewEditor).call(this,{parent:this,id,x:event.offsetX,y:event.offsetY,uiManager:_classPrivateFieldGet(_uiManager2,this),isCentered,...data});if(editor){this.add(editor);}return editor;}addNewEditor(){this.createAndAddNewEditor(_assertClassBrand(_AnnotationEditorLayer_brand,this,_getCenterPoint).call(this),true);}setSelected(editor){_classPrivateFieldGet(_uiManager2,this).setSelected(editor);}toggleSelected(editor){_classPrivateFieldGet(_uiManager2,this).toggleSelected(editor);}isSelected(editor){return _classPrivateFieldGet(_uiManager2,this).isSelected(editor);}unselect(editor){_classPrivateFieldGet(_uiManager2,this).unselect(editor);}pointerup(event){const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}if(!_classPrivateFieldGet(_hadPointerDown,this)){return;}_classPrivateFieldSet(_hadPointerDown,this,false);if(!_classPrivateFieldGet(_allowClick,this)){_classPrivateFieldSet(_allowClick,this,true);return;}if(_classPrivateFieldGet(_uiManager2,this).getMode()===util.AnnotationEditorType.STAMP){_classPrivateFieldGet(_uiManager2,this).unselectAll();return;}this.createAndAddNewEditor(event,false);}pointerdown(event){if(_classPrivateFieldGet(_uiManager2,this).getMode()===util.AnnotationEditorType.HIGHLIGHT){this.enableTextSelection();}if(_classPrivateFieldGet(_hadPointerDown,this)){_classPrivateFieldSet(_hadPointerDown,this,false);return;}const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}_classPrivateFieldSet(_hadPointerDown,this,true);const editor=_classPrivateFieldGet(_uiManager2,this).getActive();_classPrivateFieldSet(_allowClick,this,!editor||editor.isEmpty());}findNewParent(editor,x,y){const layer=_classPrivateFieldGet(_uiManager2,this).findParent(x,y);if(layer===null||layer===this){return false;}layer.changeParent(editor);return true;}destroy(){if(_classPrivateFieldGet(_uiManager2,this).getActive()?.parent===this){_classPrivateFieldGet(_uiManager2,this).commitOrRemove();_classPrivateFieldGet(_uiManager2,this).setActiveEditor(null);}if(_classPrivateFieldGet(_editorFocusTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_editorFocusTimeoutId,this));_classPrivateFieldSet(_editorFocusTimeoutId,this,null);}for(const editor of _classPrivateFieldGet(_editors,this).values()){_classPrivateFieldGet(_accessibilityManager2,this)?.removePointerInTextLayer(editor.contentDiv);editor.setParent(null);editor.isAttachedToDOM=false;editor.div.remove();}this.div=null;_classPrivateFieldGet(_editors,this).clear();_classPrivateFieldGet(_uiManager2,this).removeLayer(this);}render(_ref42){let{viewport}=_ref42;this.viewport=viewport;(0,display_utils.setLayerDimensions)(this.div,viewport);for(const editor of _classPrivateFieldGet(_uiManager2,this).getEditors(this.pageIndex)){this.add(editor);editor.rebuild();}this.updateMode();}update(_ref43){let{viewport}=_ref43;_classPrivateFieldGet(_uiManager2,this).commitOrRemove();_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup).call(this);const oldRotation=this.viewport.rotation;const rotation=viewport.rotation;this.viewport=viewport;(0,display_utils.setLayerDimensions)(this.div,{rotation});if(oldRotation!==rotation){for(const editor of _classPrivateFieldGet(_editors,this).values()){editor.rotate(rotation);}}this.addInkEditorIfNeeded(false);}get pageDimensions(){const{pageWidth,pageHeight}=this.viewport.rawDims;return[pageWidth,pageHeight];}get scale(){return _classPrivateFieldGet(_uiManager2,this).viewParameters.realScale;}}/***/function _textLayerPointerDown(event){_classPrivateFieldGet(_uiManager2,this).unselectAll();if(event.target===_classPrivateFieldGet(_textLayer,this).div){const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}_classPrivateFieldGet(_uiManager2,this).showAllEditors(\"highlight\",true,true);_classPrivateFieldGet(_textLayer,this).div.classList.add(\"free\");HighlightEditor.startHighlighting(this,_classPrivateFieldGet(_uiManager2,this).direction===\"ltr\",event);_classPrivateFieldGet(_textLayer,this).div.addEventListener(\"pointerup\",()=>{_classPrivateFieldGet(_textLayer,this).div.classList.remove(\"free\");},{once:true});event.preventDefault();}}function _get_currentEditorType(_this5){return _editorTypes._.get(_classPrivateFieldGet(_uiManager2,_this5).getMode());}function _createNewEditor(params){const editorType=_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType);return editorType?new editorType.prototype.constructor(params):null;}function _getCenterPoint(){const{x,y,width,height}=this.div.getBoundingClientRect();const tlX=Math.max(0,x);const tlY=Math.max(0,y);const brX=Math.min(window.innerWidth,x+width);const brY=Math.min(window.innerHeight,y+height);const centerX=(tlX+brX)/2-x;const centerY=(tlY+brY)/2-y;const[offsetX,offsetY]=this.viewport.rotation%180===0?[centerX,centerY]:[centerY,centerX];return{offsetX,offsetY};}function _cleanup(){_classPrivateFieldSet(_isCleaningUp,this,true);for(const editor of _classPrivateFieldGet(_editors,this).values()){if(editor.isEmpty()){editor.remove();}}_classPrivateFieldSet(_isCleaningUp,this,false);}_defineProperty(AnnotationEditorLayer,\"_initialized\",false);var _editorTypes={_:new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map(type=>[type._editorType,type]))};}),/***/259:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _ColorPicker;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */ColorPicker:()=>(/* binding */ColorPicker)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _tools_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(830);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(419);var _boundKeyDown2=/*#__PURE__*/new WeakMap();var _boundPointerDown=/*#__PURE__*/new WeakMap();var _button=/*#__PURE__*/new WeakMap();var _buttonSwatch=/*#__PURE__*/new WeakMap();var _defaultColor=/*#__PURE__*/new WeakMap();var _dropdown=/*#__PURE__*/new WeakMap();var _dropdownWasFromKeyboard=/*#__PURE__*/new WeakMap();var _isMainColorPicker=/*#__PURE__*/new WeakMap();var _editor=/*#__PURE__*/new WeakMap();var _eventBus=/*#__PURE__*/new WeakMap();var _uiManager3=/*#__PURE__*/new WeakMap();var _type2=/*#__PURE__*/new WeakMap();var _ColorPicker_brand=/*#__PURE__*/new WeakSet();class ColorPicker{static get _keyboardManager(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_keyboardManager\",new _tools_js__WEBPACK_IMPORTED_MODULE_1__.KeyboardManager([[[\"Escape\",\"mac+Escape\"],ColorPicker.prototype._hideDropdownFromKeyboard],[[\" \",\"mac+ \"],ColorPicker.prototype._colorSelectFromKeyboard],[[\"ArrowDown\",\"ArrowRight\",\"mac+ArrowDown\",\"mac+ArrowRight\"],ColorPicker.prototype._moveToNext],[[\"ArrowUp\",\"ArrowLeft\",\"mac+ArrowUp\",\"mac+ArrowLeft\"],ColorPicker.prototype._moveToPrevious],[[\"Home\",\"mac+Home\"],ColorPicker.prototype._moveToBeginning],[[\"End\",\"mac+End\"],ColorPicker.prototype._moveToEnd]]));}constructor(_ref46){let{editor=null,uiManager=null}=_ref46;_classPrivateMethodInitSpec(this,_ColorPicker_brand);_classPrivateFieldInitSpec(this,_boundKeyDown2,_assertClassBrand(_ColorPicker_brand,this,_keyDown2).bind(this));_classPrivateFieldInitSpec(this,_boundPointerDown,_assertClassBrand(_ColorPicker_brand,this,_pointerDown).bind(this));_classPrivateFieldInitSpec(this,_button,null);_classPrivateFieldInitSpec(this,_buttonSwatch,null);_classPrivateFieldInitSpec(this,_defaultColor,void 0);_classPrivateFieldInitSpec(this,_dropdown,null);_classPrivateFieldInitSpec(this,_dropdownWasFromKeyboard,false);_classPrivateFieldInitSpec(this,_isMainColorPicker,false);_classPrivateFieldInitSpec(this,_editor,null);_classPrivateFieldInitSpec(this,_eventBus,void 0);_classPrivateFieldInitSpec(this,_uiManager3,null);_classPrivateFieldInitSpec(this,_type2,void 0);if(editor){_classPrivateFieldSet(_isMainColorPicker,this,false);_classPrivateFieldSet(_type2,this,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_COLOR);_classPrivateFieldSet(_editor,this,editor);}else{_classPrivateFieldSet(_isMainColorPicker,this,true);_classPrivateFieldSet(_type2,this,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR);}_classPrivateFieldSet(_uiManager3,this,editor?._uiManager||uiManager);_classPrivateFieldSet(_eventBus,this,_classPrivateFieldGet(_uiManager3,this)._eventBus);_classPrivateFieldSet(_defaultColor,this,editor?.color||_classPrivateFieldGet(_uiManager3,this)?.highlightColors.values().next().value||\"#FFFF98\");}renderButton(){const button=_classPrivateFieldSet(_button,this,document.createElement(\"button\"));button.className=\"colorPicker\";button.tabIndex=\"0\";button.setAttribute(\"data-l10n-id\",\"pdfjs-editor-colorpicker-button\");button.setAttribute(\"aria-haspopup\",true);button.addEventListener(\"click\",_assertClassBrand(_ColorPicker_brand,this,_openDropdown).bind(this));button.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown2,this));const swatch=_classPrivateFieldSet(_buttonSwatch,this,document.createElement(\"span\"));swatch.className=\"swatch\";swatch.setAttribute(\"aria-hidden\",true);swatch.style.backgroundColor=_classPrivateFieldGet(_defaultColor,this);button.append(swatch);return button;}renderMainDropdown(){const dropdown=_classPrivateFieldSet(_dropdown,this,_assertClassBrand(_ColorPicker_brand,this,_getDropdownRoot).call(this));dropdown.setAttribute(\"aria-orientation\",\"horizontal\");dropdown.setAttribute(\"aria-labelledby\",\"highlightColorPickerLabel\");return dropdown;}_colorSelectFromKeyboard(event){if(event.target===_classPrivateFieldGet(_button,this)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}const color=event.target.getAttribute(\"data-color\");if(!color){return;}_assertClassBrand(_ColorPicker_brand,this,_colorSelect).call(this,color,event);}_moveToNext(event){if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}if(event.target===_classPrivateFieldGet(_button,this)){_classPrivateFieldGet(_dropdown,this).firstChild?.focus();return;}event.target.nextSibling?.focus();}_moveToPrevious(event){if(event.target===_classPrivateFieldGet(_dropdown,this)?.firstChild||event.target===_classPrivateFieldGet(_button,this)){if(_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){this._hideDropdownFromKeyboard();}return;}if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);}event.target.previousSibling?.focus();}_moveToBeginning(event){if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}_classPrivateFieldGet(_dropdown,this).firstChild?.focus();}_moveToEnd(event){if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}_classPrivateFieldGet(_dropdown,this).lastChild?.focus();}hideDropdown(){_classPrivateFieldGet(_dropdown,this)?.classList.add(\"hidden\");window.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundPointerDown,this));}_hideDropdownFromKeyboard(){if(_classPrivateFieldGet(_isMainColorPicker,this)){return;}if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_classPrivateFieldGet(_editor,this)?.unselect();return;}this.hideDropdown();_classPrivateFieldGet(_button,this).focus({preventScroll:true,focusVisible:_classPrivateFieldGet(_dropdownWasFromKeyboard,this)});}updateColor(color){if(_classPrivateFieldGet(_buttonSwatch,this)){_classPrivateFieldGet(_buttonSwatch,this).style.backgroundColor=color;}if(!_classPrivateFieldGet(_dropdown,this)){return;}const i=_classPrivateFieldGet(_uiManager3,this).highlightColors.values();for(const child of _classPrivateFieldGet(_dropdown,this).children){child.setAttribute(\"aria-selected\",i.next().value===color);}}destroy(){_classPrivateFieldGet(_button,this)?.remove();_classPrivateFieldSet(_button,this,null);_classPrivateFieldSet(_buttonSwatch,this,null);_classPrivateFieldGet(_dropdown,this)?.remove();_classPrivateFieldSet(_dropdown,this,null);}}/***/_ColorPicker=ColorPicker;function _getDropdownRoot(){const div=document.createElement(\"div\");div.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.noContextMenu);div.className=\"dropdown\";div.role=\"listbox\";div.setAttribute(\"aria-multiselectable\",false);div.setAttribute(\"aria-orientation\",\"vertical\");div.setAttribute(\"data-l10n-id\",\"pdfjs-editor-colorpicker-dropdown\");for(const[name,color]of _classPrivateFieldGet(_uiManager3,this).highlightColors){const button=document.createElement(\"button\");button.tabIndex=\"0\";button.role=\"option\";button.setAttribute(\"data-color\",color);button.title=name;button.setAttribute(\"data-l10n-id\",`pdfjs-editor-colorpicker-${name}`);const swatch=document.createElement(\"span\");button.append(swatch);swatch.className=\"swatch\";swatch.style.backgroundColor=color;button.setAttribute(\"aria-selected\",color===_classPrivateFieldGet(_defaultColor,this));button.addEventListener(\"click\",_assertClassBrand(_ColorPicker_brand,this,_colorSelect).bind(this,color));div.append(button);}div.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown2,this));return div;}function _colorSelect(color,event){event.stopPropagation();_classPrivateFieldGet(_eventBus,this).dispatch(\"switchannotationeditorparams\",{source:this,type:_classPrivateFieldGet(_type2,this),value:color});}function _keyDown2(event){_ColorPicker._keyboardManager.exec(this,event);}function _openDropdown(event){if(_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){this.hideDropdown();return;}_classPrivateFieldSet(_dropdownWasFromKeyboard,this,event.detail===0);window.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundPointerDown,this));if(_classPrivateFieldGet(_dropdown,this)){_classPrivateFieldGet(_dropdown,this).classList.remove(\"hidden\");return;}const root=_classPrivateFieldSet(_dropdown,this,_assertClassBrand(_ColorPicker_brand,this,_getDropdownRoot).call(this));_classPrivateFieldGet(_button,this).append(root);}function _pointerDown(event){if(_classPrivateFieldGet(_dropdown,this)?.contains(event.target)){return;}this.hideDropdown();}function _get_isDropdownVisible(_this6){return _classPrivateFieldGet(_dropdown,_this6)&&!_classPrivateFieldGet(_dropdown,_this6).classList.contains(\"hidden\");}}),/***/310:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _AltText,_AnnotationEditor;// EXPORTS\n__webpack_require__.d(__webpack_exports__,{AnnotationEditor:()=>(/* binding */AnnotationEditor)});// EXTERNAL MODULE: ./src/display/editor/tools.js\nvar tools=__webpack_require__(830);// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);;// CONCATENATED MODULE: ./src/display/editor/alt_text.js\nvar _altText=/*#__PURE__*/new WeakMap();var _altTextDecorative=/*#__PURE__*/new WeakMap();var _altTextButton=/*#__PURE__*/new WeakMap();var _altTextTooltip=/*#__PURE__*/new WeakMap();var _altTextTooltipTimeout=/*#__PURE__*/new WeakMap();var _altTextWasFromKeyBoard=/*#__PURE__*/new WeakMap();var _editor2=/*#__PURE__*/new WeakMap();var _AltText_brand=/*#__PURE__*/new WeakSet();class AltText{constructor(editor){_classPrivateMethodInitSpec(this,_AltText_brand);_classPrivateFieldInitSpec(this,_altText,\"\");_classPrivateFieldInitSpec(this,_altTextDecorative,false);_classPrivateFieldInitSpec(this,_altTextButton,null);_classPrivateFieldInitSpec(this,_altTextTooltip,null);_classPrivateFieldInitSpec(this,_altTextTooltipTimeout,null);_classPrivateFieldInitSpec(this,_altTextWasFromKeyBoard,false);_classPrivateFieldInitSpec(this,_editor2,null);_classPrivateFieldSet(_editor2,this,editor);}static initialize(l10nPromise){AltText._l10nPromise||=l10nPromise;}async render(){const altText=_classPrivateFieldSet(_altTextButton,this,document.createElement(\"button\"));altText.className=\"altText\";const msg=await AltText._l10nPromise.get(\"pdfjs-editor-alt-text-button-label\");altText.textContent=msg;altText.setAttribute(\"aria-label\",msg);altText.tabIndex=\"0\";altText.addEventListener(\"contextmenu\",display_utils.noContextMenu);altText.addEventListener(\"pointerdown\",event=>event.stopPropagation());const onClick=event=>{event.preventDefault();_classPrivateFieldGet(_editor2,this)._uiManager.editAltText(_classPrivateFieldGet(_editor2,this));};altText.addEventListener(\"click\",onClick,{capture:true});altText.addEventListener(\"keydown\",event=>{if(event.target===altText&&event.key===\"Enter\"){_classPrivateFieldSet(_altTextWasFromKeyBoard,this,true);onClick(event);}});await _assertClassBrand(_AltText_brand,this,_setState).call(this);return altText;}finish(){if(!_classPrivateFieldGet(_altTextButton,this)){return;}_classPrivateFieldGet(_altTextButton,this).focus({focusVisible:_classPrivateFieldGet(_altTextWasFromKeyBoard,this)});_classPrivateFieldSet(_altTextWasFromKeyBoard,this,false);}isEmpty(){return!_classPrivateFieldGet(_altText,this)&&!_classPrivateFieldGet(_altTextDecorative,this);}get data(){return{altText:_classPrivateFieldGet(_altText,this),decorative:_classPrivateFieldGet(_altTextDecorative,this)};}set data(_ref47){let{altText,decorative}=_ref47;if(_classPrivateFieldGet(_altText,this)===altText&&_classPrivateFieldGet(_altTextDecorative,this)===decorative){return;}_classPrivateFieldSet(_altText,this,altText);_classPrivateFieldSet(_altTextDecorative,this,decorative);_assertClassBrand(_AltText_brand,this,_setState).call(this);}toggle(){let enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!_classPrivateFieldGet(_altTextButton,this)){return;}if(!enabled&&_classPrivateFieldGet(_altTextTooltipTimeout,this)){clearTimeout(_classPrivateFieldGet(_altTextTooltipTimeout,this));_classPrivateFieldSet(_altTextTooltipTimeout,this,null);}_classPrivateFieldGet(_altTextButton,this).disabled=!enabled;}destroy(){_classPrivateFieldGet(_altTextButton,this)?.remove();_classPrivateFieldSet(_altTextButton,this,null);_classPrivateFieldSet(_altTextTooltip,this,null);}}// EXTERNAL MODULE: ./src/display/editor/toolbar.js\n_AltText=AltText;async function _setState(){const button=_classPrivateFieldGet(_altTextButton,this);if(!button){return;}if(!_classPrivateFieldGet(_altText,this)&&!_classPrivateFieldGet(_altTextDecorative,this)){button.classList.remove(\"done\");_classPrivateFieldGet(_altTextTooltip,this)?.remove();return;}button.classList.add(\"done\");_AltText._l10nPromise.get(\"pdfjs-editor-alt-text-edit-button-label\").then(msg=>{button.setAttribute(\"aria-label\",msg);});let tooltip=_classPrivateFieldGet(_altTextTooltip,this);if(!tooltip){_classPrivateFieldSet(_altTextTooltip,this,tooltip=document.createElement(\"span\"));tooltip.className=\"tooltip\";tooltip.setAttribute(\"role\",\"tooltip\");const id=tooltip.id=`alt-text-tooltip-${_classPrivateFieldGet(_editor2,this).id}`;button.setAttribute(\"aria-describedby\",id);const DELAY_TO_SHOW_TOOLTIP=100;button.addEventListener(\"mouseenter\",()=>{_classPrivateFieldSet(_altTextTooltipTimeout,this,setTimeout(()=>{_classPrivateFieldSet(_altTextTooltipTimeout,this,null);_classPrivateFieldGet(_altTextTooltip,this).classList.add(\"show\");_classPrivateFieldGet(_editor2,this)._reportTelemetry({action:\"alt_text_tooltip\"});},DELAY_TO_SHOW_TOOLTIP));});button.addEventListener(\"mouseleave\",()=>{if(_classPrivateFieldGet(_altTextTooltipTimeout,this)){clearTimeout(_classPrivateFieldGet(_altTextTooltipTimeout,this));_classPrivateFieldSet(_altTextTooltipTimeout,this,null);}_classPrivateFieldGet(_altTextTooltip,this)?.classList.remove(\"show\");});}tooltip.innerText=_classPrivateFieldGet(_altTextDecorative,this)?await _AltText._l10nPromise.get(\"pdfjs-editor-alt-text-decorative-tooltip\"):_classPrivateFieldGet(_altText,this);if(!tooltip.parentNode){button.append(tooltip);}const element=_classPrivateFieldGet(_editor2,this).getImageForAltText();element?.setAttribute(\"aria-describedby\",tooltip.id);}_defineProperty(AltText,\"_l10nPromise\",null);var toolbar=__webpack_require__(362);;// CONCATENATED MODULE: ./src/display/editor/editor.js\nvar _allResizerDivs=/*#__PURE__*/new WeakMap();var _altText2=/*#__PURE__*/new WeakMap();var _disabled=/*#__PURE__*/new WeakMap();var _keepAspectRatio=/*#__PURE__*/new WeakMap();var _resizersDiv=/*#__PURE__*/new WeakMap();var _savedDimensions=/*#__PURE__*/new WeakMap();var _boundFocusin=/*#__PURE__*/new WeakMap();var _boundFocusout=/*#__PURE__*/new WeakMap();var _editToolbar=/*#__PURE__*/new WeakMap();var _focusedResizerName=/*#__PURE__*/new WeakMap();var _hasBeenClicked=/*#__PURE__*/new WeakMap();var _initialPosition=/*#__PURE__*/new WeakMap();var _isEditing=/*#__PURE__*/new WeakMap();var _isInEditMode=/*#__PURE__*/new WeakMap();var _isResizerEnabledForKeyboard=/*#__PURE__*/new WeakMap();var _moveInDOMTimeout=/*#__PURE__*/new WeakMap();var _prevDragX=/*#__PURE__*/new WeakMap();var _prevDragY=/*#__PURE__*/new WeakMap();var _telemetryTimeouts=/*#__PURE__*/new WeakMap();var _isDraggable=/*#__PURE__*/new WeakMap();var _zIndex=/*#__PURE__*/new WeakMap();var _AnnotationEditor_brand=/*#__PURE__*/new WeakSet();class AnnotationEditor{static get _resizerKeyboardManager(){const resize=AnnotationEditor.prototype._resizeWithKeyboard;const small=tools.AnnotationEditorUIManager.TRANSLATE_SMALL;const big=tools.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,util.shadow)(this,\"_resizerKeyboardManager\",new tools.KeyboardManager([[[\"ArrowLeft\",\"mac+ArrowLeft\"],resize,{args:[-small,0]}],[[\"ctrl+ArrowLeft\",\"mac+shift+ArrowLeft\"],resize,{args:[-big,0]}],[[\"ArrowRight\",\"mac+ArrowRight\"],resize,{args:[small,0]}],[[\"ctrl+ArrowRight\",\"mac+shift+ArrowRight\"],resize,{args:[big,0]}],[[\"ArrowUp\",\"mac+ArrowUp\"],resize,{args:[0,-small]}],[[\"ctrl+ArrowUp\",\"mac+shift+ArrowUp\"],resize,{args:[0,-big]}],[[\"ArrowDown\",\"mac+ArrowDown\"],resize,{args:[0,small]}],[[\"ctrl+ArrowDown\",\"mac+shift+ArrowDown\"],resize,{args:[0,big]}],[[\"Escape\",\"mac+Escape\"],AnnotationEditor.prototype._stopResizingWithKeyboard]]));}constructor(parameters){_classPrivateMethodInitSpec(this,_AnnotationEditor_brand);_classPrivateFieldInitSpec(this,_allResizerDivs,null);_classPrivateFieldInitSpec(this,_altText2,null);_classPrivateFieldInitSpec(this,_disabled,false);_classPrivateFieldInitSpec(this,_keepAspectRatio,false);_classPrivateFieldInitSpec(this,_resizersDiv,null);_classPrivateFieldInitSpec(this,_savedDimensions,null);_classPrivateFieldInitSpec(this,_boundFocusin,this.focusin.bind(this));_classPrivateFieldInitSpec(this,_boundFocusout,this.focusout.bind(this));_classPrivateFieldInitSpec(this,_editToolbar,null);_classPrivateFieldInitSpec(this,_focusedResizerName,\"\");_classPrivateFieldInitSpec(this,_hasBeenClicked,false);_classPrivateFieldInitSpec(this,_initialPosition,null);_classPrivateFieldInitSpec(this,_isEditing,false);_classPrivateFieldInitSpec(this,_isInEditMode,false);_classPrivateFieldInitSpec(this,_isResizerEnabledForKeyboard,false);_classPrivateFieldInitSpec(this,_moveInDOMTimeout,null);_classPrivateFieldInitSpec(this,_prevDragX,0);_classPrivateFieldInitSpec(this,_prevDragY,0);_classPrivateFieldInitSpec(this,_telemetryTimeouts,null);_defineProperty(this,\"_initialOptions\",Object.create(null));_defineProperty(this,\"_isVisible\",true);_defineProperty(this,\"_uiManager\",null);_defineProperty(this,\"_focusEventsAllowed\",true);_defineProperty(this,\"_l10nPromise\",null);_classPrivateFieldInitSpec(this,_isDraggable,false);_classPrivateFieldInitSpec(this,_zIndex,AnnotationEditor._zIndex++);if(this.constructor===AnnotationEditor){(0,util.unreachable)(\"Cannot initialize AnnotationEditor.\");}this.parent=parameters.parent;this.id=parameters.id;this.width=this.height=null;this.pageIndex=parameters.parent.pageIndex;this.name=parameters.name;this.div=null;this._uiManager=parameters.uiManager;this.annotationElementId=null;this._willKeepAspectRatio=false;this._initialOptions.isCentered=parameters.isCentered;this._structTreeParentId=null;const{rotation:_rotation2,rawDims:{pageWidth:_pageWidth,pageHeight:_pageHeight,pageX,pageY}}=this.parent.viewport;this.rotation=_rotation2;this.pageRotation=(360+_rotation2-this._uiManager.viewParameters.rotation)%360;this.pageDimensions=[_pageWidth,_pageHeight];this.pageTranslation=[pageX,pageY];const[_width,_height]=this.parentDimensions;this.x=parameters.x/_width;this.y=parameters.y/_height;this.isAttachedToDOM=false;this.deleted=false;}get editorType(){return Object.getPrototypeOf(this).constructor._type;}static get _defaultLineColor(){return(0,util.shadow)(this,\"_defaultLineColor\",this._colorManager.getHexCode(\"CanvasText\"));}static deleteAnnotationElement(editor){const fakeEditor=new FakeEditor({id:editor.parent.getNextId(),parent:editor.parent,uiManager:editor._uiManager});fakeEditor.annotationElementId=editor.annotationElementId;fakeEditor.deleted=true;fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);}static initialize(l10n,_uiManager,options){AnnotationEditor._l10nPromise||=new Map([\"pdfjs-editor-alt-text-button-label\",\"pdfjs-editor-alt-text-edit-button-label\",\"pdfjs-editor-alt-text-decorative-tooltip\",\"pdfjs-editor-resizer-label-topLeft\",\"pdfjs-editor-resizer-label-topMiddle\",\"pdfjs-editor-resizer-label-topRight\",\"pdfjs-editor-resizer-label-middleRight\",\"pdfjs-editor-resizer-label-bottomRight\",\"pdfjs-editor-resizer-label-bottomMiddle\",\"pdfjs-editor-resizer-label-bottomLeft\",\"pdfjs-editor-resizer-label-middleLeft\"].map(str=>[str,l10n.get(str.replaceAll(/([A-Z])/g,c=>`-${c.toLowerCase()}`))]));if(options?.strings){for(const str of options.strings){AnnotationEditor._l10nPromise.set(str,l10n.get(str));}}if(AnnotationEditor._borderLineWidth!==-1){return;}const style=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(style.getPropertyValue(\"--outline-width\"))||0;}static updateDefaultParams(_type,_value){}static get defaultPropertiesToUpdate(){return[];}static isHandlingMimeForPasting(mime){return false;}static paste(item,parent){(0,util.unreachable)(\"Not implemented\");}get propertiesToUpdate(){return[];}get _isDraggable(){return _classPrivateFieldGet(_isDraggable,this);}set _isDraggable(value){_classPrivateFieldSet(_isDraggable,this,value);this.div?.classList.toggle(\"draggable\",value);}get isEnterHandled(){return true;}center(){const[pageWidth,pageHeight]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*pageHeight/(pageWidth*2);this.y+=this.width*pageWidth/(pageHeight*2);break;case 180:this.x+=this.width/2;this.y+=this.height/2;break;case 270:this.x+=this.height*pageHeight/(pageWidth*2);this.y-=this.width*pageWidth/(pageHeight*2);break;default:this.x-=this.width/2;this.y-=this.height/2;break;}this.fixAndSetPosition();}addCommands(params){this._uiManager.addCommands(params);}get currentLayer(){return this._uiManager.currentLayer;}setInBackground(){this.div.style.zIndex=0;}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(_zIndex,this);}setParent(parent){if(parent!==null){this.pageIndex=parent.pageIndex;this.pageDimensions=parent.pageDimensions;}else{_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);}this.parent=parent;}focusin(event){if(!this._focusEventsAllowed){return;}if(!_classPrivateFieldGet(_hasBeenClicked,this)){this.parent.setSelected(this);}else{_classPrivateFieldSet(_hasBeenClicked,this,false);}}focusout(event){if(!this._focusEventsAllowed){return;}if(!this.isAttachedToDOM){return;}const target=event.relatedTarget;if(target?.closest(`#${this.id}`)){return;}event.preventDefault();if(!this.parent?.isMultipleSelection){this.commitOrRemove();}}commitOrRemove(){if(this.isEmpty()){this.remove();}else{this.commit();}}commit(){this.addToAnnotationStorage();}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this);}setAt(x,y,tx,ty){const[width,height]=this.parentDimensions;[tx,ty]=this.screenToPageTranslation(tx,ty);this.x=(x+tx)/width;this.y=(y+ty)/height;this.fixAndSetPosition();}translate(x,y){_assertClassBrand(_AnnotationEditor_brand,this,_translate).call(this,this.parentDimensions,x,y);}translateInPage(x,y){_classPrivateFieldGet(_initialPosition,this)||_classPrivateFieldSet(_initialPosition,this,[this.x,this.y]);_assertClassBrand(_AnnotationEditor_brand,this,_translate).call(this,this.pageDimensions,x,y);this.div.scrollIntoView({block:\"nearest\"});}drag(tx,ty){_classPrivateFieldGet(_initialPosition,this)||_classPrivateFieldSet(_initialPosition,this,[this.x,this.y]);const[parentWidth,parentHeight]=this.parentDimensions;this.x+=tx/parentWidth;this.y+=ty/parentHeight;if(this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x,y}=this.div.getBoundingClientRect();if(this.parent.findNewParent(this,x,y)){this.x-=Math.floor(this.x);this.y-=Math.floor(this.y);}}let{x,y}=this;const[bx,by]=this.getBaseTranslation();x+=bx;y+=by;this.div.style.left=`${(100*x).toFixed(2)}%`;this.div.style.top=`${(100*y).toFixed(2)}%`;this.div.scrollIntoView({block:\"nearest\"});}get _hasBeenMoved(){return!!_classPrivateFieldGet(_initialPosition,this)&&(_classPrivateFieldGet(_initialPosition,this)[0]!==this.x||_classPrivateFieldGet(_initialPosition,this)[1]!==this.y);}getBaseTranslation(){const[parentWidth,parentHeight]=this.parentDimensions;const{_borderLineWidth}=AnnotationEditor;const x=_borderLineWidth/parentWidth;const y=_borderLineWidth/parentHeight;switch(this.rotation){case 90:return[-x,y];case 180:return[x,y];case 270:return[x,-y];default:return[-x,-y];}}get _mustFixPosition(){return true;}fixAndSetPosition(){let rotation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.rotation;const[pageWidth,pageHeight]=this.pageDimensions;let{x,y,width,height}=this;width*=pageWidth;height*=pageHeight;x*=pageWidth;y*=pageHeight;if(this._mustFixPosition){switch(rotation){case 0:x=Math.max(0,Math.min(pageWidth-width,x));y=Math.max(0,Math.min(pageHeight-height,y));break;case 90:x=Math.max(0,Math.min(pageWidth-height,x));y=Math.min(pageHeight,Math.max(width,y));break;case 180:x=Math.min(pageWidth,Math.max(width,x));y=Math.min(pageHeight,Math.max(height,y));break;case 270:x=Math.min(pageWidth,Math.max(height,x));y=Math.max(0,Math.min(pageHeight-width,y));break;}}this.x=x/=pageWidth;this.y=y/=pageHeight;const[bx,by]=this.getBaseTranslation();x+=bx;y+=by;const{style}=this.div;style.left=`${(100*x).toFixed(2)}%`;style.top=`${(100*y).toFixed(2)}%`;this.moveInDOM();}screenToPageTranslation(x,y){return _rotatePoint.call(AnnotationEditor,x,y,this.parentRotation);}pageTranslationToScreen(x,y){return _rotatePoint.call(AnnotationEditor,x,y,360-this.parentRotation);}get parentScale(){return this._uiManager.viewParameters.realScale;}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360;}get parentDimensions(){const{parentScale,pageDimensions:[pageWidth,pageHeight]}=this;const scaledWidth=pageWidth*parentScale;const scaledHeight=pageHeight*parentScale;return util.FeatureTest.isCSSRoundSupported?[Math.round(scaledWidth),Math.round(scaledHeight)]:[scaledWidth,scaledHeight];}setDims(width,height){const[parentWidth,parentHeight]=this.parentDimensions;this.div.style.width=`${(100*width/parentWidth).toFixed(2)}%`;if(!_classPrivateFieldGet(_keepAspectRatio,this)){this.div.style.height=`${(100*height/parentHeight).toFixed(2)}%`;}}fixDims(){const{style}=this.div;const{height,width}=style;const widthPercent=width.endsWith(\"%\");const heightPercent=!_classPrivateFieldGet(_keepAspectRatio,this)&&height.endsWith(\"%\");if(widthPercent&&heightPercent){return;}const[parentWidth,parentHeight]=this.parentDimensions;if(!widthPercent){style.width=`${(100*parseFloat(width)/parentWidth).toFixed(2)}%`;}if(!_classPrivateFieldGet(_keepAspectRatio,this)&&!heightPercent){style.height=`${(100*parseFloat(height)/parentHeight).toFixed(2)}%`;}}getInitialTranslation(){return[0,0];}altTextFinish(){_classPrivateFieldGet(_altText2,this)?.finish();}async addEditToolbar(){if(_classPrivateFieldGet(_editToolbar,this)||_classPrivateFieldGet(_isInEditMode,this)){return _classPrivateFieldGet(_editToolbar,this);}_classPrivateFieldSet(_editToolbar,this,new toolbar.EditorToolbar(this));this.div.append(_classPrivateFieldGet(_editToolbar,this).render());if(_classPrivateFieldGet(_altText2,this)){_classPrivateFieldGet(_editToolbar,this).addAltTextButton(await _classPrivateFieldGet(_altText2,this).render());}return _classPrivateFieldGet(_editToolbar,this);}removeEditToolbar(){if(!_classPrivateFieldGet(_editToolbar,this)){return;}_classPrivateFieldGet(_editToolbar,this).remove();_classPrivateFieldSet(_editToolbar,this,null);_classPrivateFieldGet(_altText2,this)?.destroy();}getClientDimensions(){return this.div.getBoundingClientRect();}async addAltTextButton(){if(_classPrivateFieldGet(_altText2,this)){return;}AltText.initialize(AnnotationEditor._l10nPromise);_classPrivateFieldSet(_altText2,this,new AltText(this));await this.addEditToolbar();}get altTextData(){return _classPrivateFieldGet(_altText2,this)?.data;}set altTextData(data){if(!_classPrivateFieldGet(_altText2,this)){return;}_classPrivateFieldGet(_altText2,this).data=data;}hasAltText(){return!_classPrivateFieldGet(_altText2,this)?.isEmpty();}render(){this.div=document.createElement(\"div\");this.div.setAttribute(\"data-editor-rotation\",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute(\"id\",this.id);this.div.tabIndex=_classPrivateFieldGet(_disabled,this)?-1:0;if(!this._isVisible){this.div.classList.add(\"hidden\");}this.setInForeground();this.div.addEventListener(\"focusin\",_classPrivateFieldGet(_boundFocusin,this));this.div.addEventListener(\"focusout\",_classPrivateFieldGet(_boundFocusout,this));const[parentWidth,parentHeight]=this.parentDimensions;if(this.parentRotation%180!==0){this.div.style.maxWidth=`${(100*parentHeight/parentWidth).toFixed(2)}%`;this.div.style.maxHeight=`${(100*parentWidth/parentHeight).toFixed(2)}%`;}const[tx,ty]=this.getInitialTranslation();this.translate(tx,ty);(0,tools.bindEvents)(this,this.div,[\"pointerdown\"]);return this.div;}pointerdown(event){const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return;}_classPrivateFieldSet(_hasBeenClicked,this,true);if(this._isDraggable){_assertClassBrand(_AnnotationEditor_brand,this,_setUpDragSession).call(this,event);return;}_assertClassBrand(_AnnotationEditor_brand,this,_selectOnPointerEvent).call(this,event);}moveInDOM(){if(_classPrivateFieldGet(_moveInDOMTimeout,this)){clearTimeout(_classPrivateFieldGet(_moveInDOMTimeout,this));}_classPrivateFieldSet(_moveInDOMTimeout,this,setTimeout(()=>{_classPrivateFieldSet(_moveInDOMTimeout,this,null);this.parent?.moveEditorInDOM(this);},0));}_setParentAndPosition(parent,x,y){parent.changeParent(this);this.x=x;this.y=y;this.fixAndSetPosition();}getRect(tx,ty){let rotation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.rotation;const scale=this.parentScale;const[pageWidth,pageHeight]=this.pageDimensions;const[pageX,pageY]=this.pageTranslation;const shiftX=tx/scale;const shiftY=ty/scale;const x=this.x*pageWidth;const y=this.y*pageHeight;const width=this.width*pageWidth;const height=this.height*pageHeight;switch(rotation){case 0:return[x+shiftX+pageX,pageHeight-y-shiftY-height+pageY,x+shiftX+width+pageX,pageHeight-y-shiftY+pageY];case 90:return[x+shiftY+pageX,pageHeight-y+shiftX+pageY,x+shiftY+height+pageX,pageHeight-y+shiftX+width+pageY];case 180:return[x-shiftX-width+pageX,pageHeight-y+shiftY+pageY,x-shiftX+pageX,pageHeight-y+shiftY+height+pageY];case 270:return[x-shiftY-height+pageX,pageHeight-y-shiftX-width+pageY,x-shiftY+pageX,pageHeight-y-shiftX+pageY];default:throw new Error(\"Invalid rotation\");}}getRectInCurrentCoords(rect,pageHeight){const[x1,y1,x2,y2]=rect;const width=x2-x1;const height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error(\"Invalid rotation\");}}onceAdded(){}isEmpty(){return false;}enableEditMode(){_classPrivateFieldSet(_isInEditMode,this,true);}disableEditMode(){_classPrivateFieldSet(_isInEditMode,this,false);}isInEditMode(){return _classPrivateFieldGet(_isInEditMode,this);}shouldGetKeyboardEvents(){return _classPrivateFieldGet(_isResizerEnabledForKeyboard,this);}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM;}rebuild(){this.div?.addEventListener(\"focusin\",_classPrivateFieldGet(_boundFocusin,this));this.div?.addEventListener(\"focusout\",_classPrivateFieldGet(_boundFocusout,this));}rotate(_angle){}serialize(){let isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;(0,util.unreachable)(\"An editor must be serializable\");}static deserialize(data,parent,uiManager){const editor=new this.prototype.constructor({parent,id:parent.getNextId(),uiManager});editor.rotation=data.rotation;const[pageWidth,pageHeight]=editor.pageDimensions;const[x,y,width,height]=editor.getRectInCurrentCoords(data.rect,pageHeight);editor.x=x/pageWidth;editor.y=y/pageHeight;editor.width=width/pageWidth;editor.height=height/pageHeight;return editor;}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null);}remove(){this.div.removeEventListener(\"focusin\",_classPrivateFieldGet(_boundFocusin,this));this.div.removeEventListener(\"focusout\",_classPrivateFieldGet(_boundFocusout,this));if(!this.isEmpty()){this.commit();}if(this.parent){this.parent.remove(this);}else{this._uiManager.removeEditor(this);}if(_classPrivateFieldGet(_moveInDOMTimeout,this)){clearTimeout(_classPrivateFieldGet(_moveInDOMTimeout,this));_classPrivateFieldSet(_moveInDOMTimeout,this,null);}_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);this.removeEditToolbar();if(_classPrivateFieldGet(_telemetryTimeouts,this)){for(const timeout of _classPrivateFieldGet(_telemetryTimeouts,this).values()){clearTimeout(timeout);}_classPrivateFieldSet(_telemetryTimeouts,this,null);}this.parent=null;}get isResizable(){return false;}makeResizable(){if(this.isResizable){_assertClassBrand(_AnnotationEditor_brand,this,_createResizers).call(this);_classPrivateFieldGet(_resizersDiv,this).classList.remove(\"hidden\");(0,tools.bindEvents)(this,this.div,[\"keydown\"]);}}get toolbarPosition(){return null;}keydown(event){if(!this.isResizable||event.target!==this.div||event.key!==\"Enter\"){return;}this._uiManager.setSelected(this);_classPrivateFieldSet(_savedDimensions,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const children=_classPrivateFieldGet(_resizersDiv,this).children;if(!_classPrivateFieldGet(_allResizerDivs,this)){_classPrivateFieldSet(_allResizerDivs,this,Array.from(children));const boundResizerKeydown=_assertClassBrand(_AnnotationEditor_brand,this,_resizerKeydown).bind(this);const boundResizerBlur=_assertClassBrand(_AnnotationEditor_brand,this,_resizerBlur).bind(this);for(const div of _classPrivateFieldGet(_allResizerDivs,this)){const name=div.getAttribute(\"data-resizer-name\");div.setAttribute(\"role\",\"spinbutton\");div.addEventListener(\"keydown\",boundResizerKeydown);div.addEventListener(\"blur\",boundResizerBlur);div.addEventListener(\"focus\",_assertClassBrand(_AnnotationEditor_brand,this,_resizerFocus).bind(this,name));AnnotationEditor._l10nPromise.get(`pdfjs-editor-resizer-label-${name}`).then(msg=>div.setAttribute(\"aria-label\",msg));}}const first=_classPrivateFieldGet(_allResizerDivs,this)[0];let firstPosition=0;for(const div of children){if(div===first){break;}firstPosition++;}const nextFirstPosition=(360-this.rotation+this.parentRotation)%360/90*(_classPrivateFieldGet(_allResizerDivs,this).length/4);if(nextFirstPosition!==firstPosition){if(nextFirstPosition<firstPosition){for(let i=0;i<firstPosition-nextFirstPosition;i++){_classPrivateFieldGet(_resizersDiv,this).append(_classPrivateFieldGet(_resizersDiv,this).firstChild);}}else if(nextFirstPosition>firstPosition){for(let i=0;i<nextFirstPosition-firstPosition;i++){_classPrivateFieldGet(_resizersDiv,this).firstChild.before(_classPrivateFieldGet(_resizersDiv,this).lastChild);}}let i=0;for(const child of children){const div=_classPrivateFieldGet(_allResizerDivs,this)[i++];const name=div.getAttribute(\"data-resizer-name\");AnnotationEditor._l10nPromise.get(`pdfjs-editor-resizer-label-${name}`).then(msg=>child.setAttribute(\"aria-label\",msg));}}_assertClassBrand(_AnnotationEditor_brand,this,_setResizerTabIndex).call(this,0);_classPrivateFieldSet(_isResizerEnabledForKeyboard,this,true);_classPrivateFieldGet(_resizersDiv,this).firstChild.focus({focusVisible:true});event.preventDefault();event.stopImmediatePropagation();}_resizeWithKeyboard(x,y){if(!_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)){return;}_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointermove).call(this,_classPrivateFieldGet(_focusedResizerName,this),{movementX:x,movementY:y});}_stopResizingWithKeyboard(){_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);this.div.focus();}select(){this.makeResizable();this.div?.classList.add(\"selectedEditor\");if(!_classPrivateFieldGet(_editToolbar,this)){this.addEditToolbar().then(()=>{if(this.div?.classList.contains(\"selectedEditor\")){_classPrivateFieldGet(_editToolbar,this)?.show();}});return;}_classPrivateFieldGet(_editToolbar,this)?.show();}unselect(){_classPrivateFieldGet(_resizersDiv,this)?.classList.add(\"hidden\");this.div?.classList.remove(\"selectedEditor\");if(this.div?.contains(document.activeElement)){this._uiManager.currentLayer.div.focus({preventScroll:true});}_classPrivateFieldGet(_editToolbar,this)?.hide();}updateParams(type,value){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null;}get contentDiv(){return this.div;}get isEditing(){return _classPrivateFieldGet(_isEditing,this);}set isEditing(value){_classPrivateFieldSet(_isEditing,this,value);if(!this.parent){return;}if(value){this.parent.setSelected(this);this.parent.setActiveEditor(this);}else{this.parent.setActiveEditor(null);}}setAspectRatio(width,height){_classPrivateFieldSet(_keepAspectRatio,this,true);const aspectRatio=width/height;const{style}=this.div;style.aspectRatio=aspectRatio;style.height=\"auto\";}static get MIN_SIZE(){return 16;}static canCreateNewEmptyEditor(){return true;}get telemetryInitialData(){return{action:\"added\"};}get telemetryFinalData(){return null;}_reportTelemetry(data){let mustWait=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(mustWait){_classPrivateFieldGet(_telemetryTimeouts,this)||_classPrivateFieldSet(_telemetryTimeouts,this,new Map());const{action}=data;let timeout=_classPrivateFieldGet(_telemetryTimeouts,this).get(action);if(timeout){clearTimeout(timeout);}timeout=setTimeout(()=>{this._reportTelemetry(data);_classPrivateFieldGet(_telemetryTimeouts,this).delete(action);if(_classPrivateFieldGet(_telemetryTimeouts,this).size===0){_classPrivateFieldSet(_telemetryTimeouts,this,null);}},AnnotationEditor._telemetryTimeout);_classPrivateFieldGet(_telemetryTimeouts,this).set(action,timeout);return;}data.type||=this.editorType;this._uiManager._eventBus.dispatch(\"reporttelemetry\",{source:this,details:{type:\"editing\",data}});}show(){let visible=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._isVisible;this.div.classList.toggle(\"hidden\",!visible);this._isVisible=visible;}enable(){if(this.div){this.div.tabIndex=0;}_classPrivateFieldSet(_disabled,this,false);}disable(){if(this.div){this.div.tabIndex=-1;}_classPrivateFieldSet(_disabled,this,true);}renderAnnotationElement(annotation){let content=annotation.container.querySelector(\".annotationContent\");if(!content){content=document.createElement(\"div\");content.classList.add(\"annotationContent\",this.editorType);annotation.container.prepend(content);}else if(content.nodeName===\"CANVAS\"){const canvas=content;content=document.createElement(\"div\");content.classList.add(\"annotationContent\",this.editorType);canvas.before(content);}return content;}resetAnnotationElement(annotation){const{firstChild}=annotation.container;if(firstChild.nodeName===\"DIV\"&&firstChild.classList.contains(\"annotationContent\")){firstChild.remove();}}}_AnnotationEditor=AnnotationEditor;function _translate(_ref48,x,y){let[width,height]=_ref48;[x,y]=this.screenToPageTranslation(x,y);this.x+=x/width;this.y+=y/height;this.fixAndSetPosition();}function _rotatePoint(x,y,angle){switch(angle){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y];}}function _getRotationMatrix(rotation){switch(rotation){case 90:{const[pageWidth,pageHeight]=this.pageDimensions;return[0,-pageWidth/pageHeight,pageHeight/pageWidth,0];}case 180:return[-1,0,0,-1];case 270:{const[pageWidth,pageHeight]=this.pageDimensions;return[0,pageWidth/pageHeight,-pageHeight/pageWidth,0];}default:return[1,0,0,1];}}function _createResizers(){if(_classPrivateFieldGet(_resizersDiv,this)){return;}_classPrivateFieldSet(_resizersDiv,this,document.createElement(\"div\"));_classPrivateFieldGet(_resizersDiv,this).classList.add(\"resizers\");const classes=this._willKeepAspectRatio?[\"topLeft\",\"topRight\",\"bottomRight\",\"bottomLeft\"]:[\"topLeft\",\"topMiddle\",\"topRight\",\"middleRight\",\"bottomRight\",\"bottomMiddle\",\"bottomLeft\",\"middleLeft\"];for(const name of classes){const div=document.createElement(\"div\");_classPrivateFieldGet(_resizersDiv,this).append(div);div.classList.add(\"resizer\",name);div.setAttribute(\"data-resizer-name\",name);div.addEventListener(\"pointerdown\",_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointerdown).bind(this,name));div.addEventListener(\"contextmenu\",display_utils.noContextMenu);div.tabIndex=-1;}this.div.prepend(_classPrivateFieldGet(_resizersDiv,this));}function _resizerPointerdown(name,event){event.preventDefault();const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}_classPrivateFieldGet(_altText2,this)?.toggle(false);const boundResizerPointermove=_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointermove).bind(this,name);const savedDraggable=this._isDraggable;this._isDraggable=false;const pointerMoveOptions={passive:true,capture:true};this.parent.togglePointerEvents(false);window.addEventListener(\"pointermove\",boundResizerPointermove,pointerMoveOptions);window.addEventListener(\"contextmenu\",display_utils.noContextMenu);const savedX=this.x;const savedY=this.y;const savedWidth=this.width;const savedHeight=this.height;const savedParentCursor=this.parent.div.style.cursor;const savedCursor=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(event.target).cursor;const pointerUpCallback=()=>{this.parent.togglePointerEvents(true);_classPrivateFieldGet(_altText2,this)?.toggle(true);this._isDraggable=savedDraggable;window.removeEventListener(\"pointerup\",pointerUpCallback);window.removeEventListener(\"blur\",pointerUpCallback);window.removeEventListener(\"pointermove\",boundResizerPointermove,pointerMoveOptions);window.removeEventListener(\"contextmenu\",display_utils.noContextMenu);this.parent.div.style.cursor=savedParentCursor;this.div.style.cursor=savedCursor;_assertClassBrand(_AnnotationEditor_brand,this,_addResizeToUndoStack).call(this,savedX,savedY,savedWidth,savedHeight);};window.addEventListener(\"pointerup\",pointerUpCallback);window.addEventListener(\"blur\",pointerUpCallback);}function _addResizeToUndoStack(savedX,savedY,savedWidth,savedHeight){const newX=this.x;const newY=this.y;const newWidth=this.width;const newHeight=this.height;if(newX===savedX&&newY===savedY&&newWidth===savedWidth&&newHeight===savedHeight){return;}this.addCommands({cmd:()=>{this.width=newWidth;this.height=newHeight;this.x=newX;this.y=newY;const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(parentWidth*newWidth,parentHeight*newHeight);this.fixAndSetPosition();},undo:()=>{this.width=savedWidth;this.height=savedHeight;this.x=savedX;this.y=savedY;const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(parentWidth*savedWidth,parentHeight*savedHeight);this.fixAndSetPosition();},mustExec:true});}function _resizerPointermove(name,event){const[parentWidth,parentHeight]=this.parentDimensions;const savedX=this.x;const savedY=this.y;const savedWidth=this.width;const savedHeight=this.height;const minWidth=_AnnotationEditor.MIN_SIZE/parentWidth;const minHeight=_AnnotationEditor.MIN_SIZE/parentHeight;const round=x=>Math.round(x*10000)/10000;const rotationMatrix=_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,this.rotation);const transf=(x,y)=>[rotationMatrix[0]*x+rotationMatrix[2]*y,rotationMatrix[1]*x+rotationMatrix[3]*y];const invRotationMatrix=_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,360-this.rotation);const invTransf=(x,y)=>[invRotationMatrix[0]*x+invRotationMatrix[2]*y,invRotationMatrix[1]*x+invRotationMatrix[3]*y];let getPoint;let getOpposite;let isDiagonal=false;let isHorizontal=false;switch(name){case\"topLeft\":isDiagonal=true;getPoint=(w,h)=>[0,0];getOpposite=(w,h)=>[w,h];break;case\"topMiddle\":getPoint=(w,h)=>[w/2,0];getOpposite=(w,h)=>[w/2,h];break;case\"topRight\":isDiagonal=true;getPoint=(w,h)=>[w,0];getOpposite=(w,h)=>[0,h];break;case\"middleRight\":isHorizontal=true;getPoint=(w,h)=>[w,h/2];getOpposite=(w,h)=>[0,h/2];break;case\"bottomRight\":isDiagonal=true;getPoint=(w,h)=>[w,h];getOpposite=(w,h)=>[0,0];break;case\"bottomMiddle\":getPoint=(w,h)=>[w/2,h];getOpposite=(w,h)=>[w/2,0];break;case\"bottomLeft\":isDiagonal=true;getPoint=(w,h)=>[0,h];getOpposite=(w,h)=>[w,0];break;case\"middleLeft\":isHorizontal=true;getPoint=(w,h)=>[0,h/2];getOpposite=(w,h)=>[w,h/2];break;}const point=getPoint(savedWidth,savedHeight);const oppositePoint=getOpposite(savedWidth,savedHeight);let transfOppositePoint=transf(...oppositePoint);const oppositeX=round(savedX+transfOppositePoint[0]);const oppositeY=round(savedY+transfOppositePoint[1]);let ratioX=1;let ratioY=1;let[deltaX,deltaY]=this.screenToPageTranslation(event.movementX,event.movementY);[deltaX,deltaY]=invTransf(deltaX/parentWidth,deltaY/parentHeight);if(isDiagonal){const oldDiag=Math.hypot(savedWidth,savedHeight);ratioX=ratioY=Math.max(Math.min(Math.hypot(oppositePoint[0]-point[0]-deltaX,oppositePoint[1]-point[1]-deltaY)/oldDiag,1/savedWidth,1/savedHeight),minWidth/savedWidth,minHeight/savedHeight);}else if(isHorizontal){ratioX=Math.max(minWidth,Math.min(1,Math.abs(oppositePoint[0]-point[0]-deltaX)))/savedWidth;}else{ratioY=Math.max(minHeight,Math.min(1,Math.abs(oppositePoint[1]-point[1]-deltaY)))/savedHeight;}const newWidth=round(savedWidth*ratioX);const newHeight=round(savedHeight*ratioY);transfOppositePoint=transf(...getOpposite(newWidth,newHeight));const newX=oppositeX-transfOppositePoint[0];const newY=oppositeY-transfOppositePoint[1];this.width=newWidth;this.height=newHeight;this.x=newX;this.y=newY;this.setDims(parentWidth*newWidth,parentHeight*newHeight);this.fixAndSetPosition();}function _selectOnPointerEvent(event){const{isMac}=util.FeatureTest.platform;if(event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac){this.parent.toggleSelected(this);}else{this.parent.setSelected(this);}}function _setUpDragSession(event){const isSelected=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let pointerMoveOptions,pointerMoveCallback;if(isSelected){this.div.classList.add(\"moving\");pointerMoveOptions={passive:true,capture:true};_classPrivateFieldSet(_prevDragX,this,event.clientX);_classPrivateFieldSet(_prevDragY,this,event.clientY);pointerMoveCallback=e=>{const{clientX:x,clientY:y}=e;const[tx,ty]=this.screenToPageTranslation(x-_classPrivateFieldGet(_prevDragX,this),y-_classPrivateFieldGet(_prevDragY,this));_classPrivateFieldSet(_prevDragX,this,x);_classPrivateFieldSet(_prevDragY,this,y);this._uiManager.dragSelectedEditors(tx,ty);};window.addEventListener(\"pointermove\",pointerMoveCallback,pointerMoveOptions);}const pointerUpCallback=()=>{window.removeEventListener(\"pointerup\",pointerUpCallback);window.removeEventListener(\"blur\",pointerUpCallback);if(isSelected){this.div.classList.remove(\"moving\");window.removeEventListener(\"pointermove\",pointerMoveCallback,pointerMoveOptions);}_classPrivateFieldSet(_hasBeenClicked,this,false);if(!this._uiManager.endDragSession()){_assertClassBrand(_AnnotationEditor_brand,this,_selectOnPointerEvent).call(this,event);}};window.addEventListener(\"pointerup\",pointerUpCallback);window.addEventListener(\"blur\",pointerUpCallback);}function _resizerKeydown(event){_AnnotationEditor._resizerKeyboardManager.exec(this,event);}function _resizerBlur(event){if(_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)&&event.relatedTarget?.parentNode!==_classPrivateFieldGet(_resizersDiv,this)){_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);}}function _resizerFocus(name){_classPrivateFieldSet(_focusedResizerName,this,_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)?name:\"\");}function _setResizerTabIndex(value){if(!_classPrivateFieldGet(_allResizerDivs,this)){return;}for(const div of _classPrivateFieldGet(_allResizerDivs,this)){div.tabIndex=value;}}function _stopResizing(){_classPrivateFieldSet(_isResizerEnabledForKeyboard,this,false);_assertClassBrand(_AnnotationEditor_brand,this,_setResizerTabIndex).call(this,-1);if(_classPrivateFieldGet(_savedDimensions,this)){const{savedX,savedY,savedWidth,savedHeight}=_classPrivateFieldGet(_savedDimensions,this);_assertClassBrand(_AnnotationEditor_brand,this,_addResizeToUndoStack).call(this,savedX,savedY,savedWidth,savedHeight);_classPrivateFieldSet(_savedDimensions,this,null);}}_defineProperty(AnnotationEditor,\"_borderLineWidth\",-1);_defineProperty(AnnotationEditor,\"_colorManager\",new tools.ColorManager());_defineProperty(AnnotationEditor,\"_zIndex\",1);_defineProperty(AnnotationEditor,\"_telemetryTimeout\",1000);class FakeEditor extends AnnotationEditor{constructor(params){super(params);this.annotationElementId=params.annotationElementId;this.deleted=true;}serialize(){return{id:this.annotationElementId,deleted:true,pageIndex:this.pageIndex};}}/***/}),/***/61:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */FreeOutliner:()=>(/* binding */FreeOutliner),/* harmony export */Outliner:()=>(/* binding */Outliner)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);var _box=/*#__PURE__*/new WeakMap();var _verticalEdges=/*#__PURE__*/new WeakMap();var _intervals=/*#__PURE__*/new WeakMap();var _Outliner_brand=/*#__PURE__*/new WeakSet();class Outliner{constructor(boxes){let borderWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let innerMargin=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let isLTR=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;_classPrivateMethodInitSpec(this,_Outliner_brand);_classPrivateFieldInitSpec(this,_box,void 0);_classPrivateFieldInitSpec(this,_verticalEdges,[]);_classPrivateFieldInitSpec(this,_intervals,[]);let minX=Infinity;let maxX=-Infinity;let minY=Infinity;let maxY=-Infinity;const NUMBER_OF_DIGITS=4;const EPSILON=10**-NUMBER_OF_DIGITS;for(const{x,y,width,height}of boxes){const x1=Math.floor((x-borderWidth)/EPSILON)*EPSILON;const x2=Math.ceil((x+width+borderWidth)/EPSILON)*EPSILON;const y1=Math.floor((y-borderWidth)/EPSILON)*EPSILON;const y2=Math.ceil((y+height+borderWidth)/EPSILON)*EPSILON;const left=[x1,y1,y2,true];const right=[x2,y1,y2,false];_classPrivateFieldGet(_verticalEdges,this).push(left,right);minX=Math.min(minX,x1);maxX=Math.max(maxX,x2);minY=Math.min(minY,y1);maxY=Math.max(maxY,y2);}const bboxWidth=maxX-minX+2*innerMargin;const bboxHeight=maxY-minY+2*innerMargin;const shiftedMinX=minX-innerMargin;const shiftedMinY=minY-innerMargin;const lastEdge=_classPrivateFieldGet(_verticalEdges,this).at(isLTR?-1:-2);const lastPoint=[lastEdge[0],lastEdge[2]];for(const edge of _classPrivateFieldGet(_verticalEdges,this)){const[x,y1,y2]=edge;edge[0]=(x-shiftedMinX)/bboxWidth;edge[1]=(y1-shiftedMinY)/bboxHeight;edge[2]=(y2-shiftedMinY)/bboxHeight;}_classPrivateFieldSet(_box,this,{x:shiftedMinX,y:shiftedMinY,width:bboxWidth,height:bboxHeight,lastPoint});}getOutlines(){_classPrivateFieldGet(_verticalEdges,this).sort((a,b)=>a[0]-b[0]||a[1]-b[1]||a[2]-b[2]);const outlineVerticalEdges=[];for(const edge of _classPrivateFieldGet(_verticalEdges,this)){if(edge[3]){outlineVerticalEdges.push(..._assertClassBrand(_Outliner_brand,this,_breakEdge).call(this,edge));_assertClassBrand(_Outliner_brand,this,_insert).call(this,edge);}else{_assertClassBrand(_Outliner_brand,this,_remove).call(this,edge);outlineVerticalEdges.push(..._assertClassBrand(_Outliner_brand,this,_breakEdge).call(this,edge));}}return _assertClassBrand(_Outliner_brand,this,_getOutlines).call(this,outlineVerticalEdges);}}function _getOutlines(outlineVerticalEdges){const edges=[];const allEdges=new Set();for(const edge of outlineVerticalEdges){const[x,y1,y2]=edge;edges.push([x,y1,edge],[x,y2,edge]);}edges.sort((a,b)=>a[1]-b[1]||a[0]-b[0]);for(let i=0,ii=edges.length;i<ii;i+=2){const edge1=edges[i][2];const edge2=edges[i+1][2];edge1.push(edge2);edge2.push(edge1);allEdges.add(edge1);allEdges.add(edge2);}const outlines=[];let outline;while(allEdges.size>0){const edge=allEdges.values().next().value;let[x,y1,y2,edge1,edge2]=edge;allEdges.delete(edge);let lastPointX=x;let lastPointY=y1;outline=[x,y2];outlines.push(outline);while(true){let e;if(allEdges.has(edge1)){e=edge1;}else if(allEdges.has(edge2)){e=edge2;}else{break;}allEdges.delete(e);[x,y1,y2,edge1,edge2]=e;if(lastPointX!==x){outline.push(lastPointX,lastPointY,x,lastPointY===y1?y1:y2);lastPointX=x;}lastPointY=lastPointY===y1?y2:y1;}outline.push(lastPointX,lastPointY);}return new HighlightOutline(outlines,_classPrivateFieldGet(_box,this));}function _binarySearch(y){const array=_classPrivateFieldGet(_intervals,this);let start=0;let end=array.length-1;while(start<=end){const middle=start+end>>1;const y1=array[middle][0];if(y1===y){return middle;}if(y1<y){start=middle+1;}else{end=middle-1;}}return end+1;}function _insert(_ref53){let[,y1,y2]=_ref53;const index=_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y1);_classPrivateFieldGet(_intervals,this).splice(index,0,[y1,y2]);}function _remove(_ref54){let[,y1,y2]=_ref54;const index=_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y1);for(let i=index;i<_classPrivateFieldGet(_intervals,this).length;i++){const[start,end]=_classPrivateFieldGet(_intervals,this)[i];if(start!==y1){break;}if(start===y1&&end===y2){_classPrivateFieldGet(_intervals,this).splice(i,1);return;}}for(let i=index-1;i>=0;i--){const[start,end]=_classPrivateFieldGet(_intervals,this)[i];if(start!==y1){break;}if(start===y1&&end===y2){_classPrivateFieldGet(_intervals,this).splice(i,1);return;}}}function _breakEdge(edge){const[x,y1,y2]=edge;const results=[[x,y1,y2]];const index=_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y2);for(let i=0;i<index;i++){const[start,end]=_classPrivateFieldGet(_intervals,this)[i];for(let j=0,jj=results.length;j<jj;j++){const[,y3,y4]=results[j];if(end<=y3||y4<=start){continue;}if(y3>=start){if(y4>end){results[j][1]=end;}else{if(jj===1){return[];}results.splice(j,1);j--;jj--;}continue;}results[j][2]=start;if(y4>end){results.push([x,end,y4]);}}}return results;}class Outline{toSVGPath(){throw new Error(\"Abstract method `toSVGPath` must be implemented.\");}get box(){throw new Error(\"Abstract getter `box` must be implemented.\");}serialize(_bbox,_rotation){throw new Error(\"Abstract method `serialize` must be implemented.\");}get free(){return this instanceof FreeHighlightOutline;}}var _box2=/*#__PURE__*/new WeakMap();var _outlines=/*#__PURE__*/new WeakMap();class HighlightOutline extends Outline{constructor(outlines,box){super();_classPrivateFieldInitSpec(this,_box2,void 0);_classPrivateFieldInitSpec(this,_outlines,void 0);_classPrivateFieldSet(_outlines,this,outlines);_classPrivateFieldSet(_box2,this,box);}toSVGPath(){const buffer=[];for(const polygon of _classPrivateFieldGet(_outlines,this)){let[prevX,prevY]=polygon;buffer.push(`M${prevX} ${prevY}`);for(let i=2;i<polygon.length;i+=2){const x=polygon[i];const y=polygon[i+1];if(x===prevX){buffer.push(`V${y}`);prevY=y;}else if(y===prevY){buffer.push(`H${x}`);prevX=x;}}buffer.push(\"Z\");}return buffer.join(\" \");}serialize(_ref49,_rotation){let[blX,blY,trX,trY]=_ref49;const outlines=[];const width=trX-blX;const height=trY-blY;for(const outline of _classPrivateFieldGet(_outlines,this)){const points=new Array(outline.length);for(let i=0;i<outline.length;i+=2){points[i]=blX+outline[i]*width;points[i+1]=trY-outline[i+1]*height;}outlines.push(points);}return outlines;}get box(){return _classPrivateFieldGet(_box2,this);}}var _box3=/*#__PURE__*/new WeakMap();var _bottom=/*#__PURE__*/new WeakMap();var _innerMargin=/*#__PURE__*/new WeakMap();var _isLTR=/*#__PURE__*/new WeakMap();var _top=/*#__PURE__*/new WeakMap();var _last=/*#__PURE__*/new WeakMap();var _lastX=/*#__PURE__*/new WeakMap();var _lastY=/*#__PURE__*/new WeakMap();var _min=/*#__PURE__*/new WeakMap();var _min_dist=/*#__PURE__*/new WeakMap();var _scaleFactor=/*#__PURE__*/new WeakMap();var _thickness2=/*#__PURE__*/new WeakMap();var _points=/*#__PURE__*/new WeakMap();var _FreeOutliner_brand=/*#__PURE__*/new WeakSet();class FreeOutliner{constructor(_ref50,box,scaleFactor,thickness,isLTR){let{x:_x,y:_y}=_ref50;let innerMargin=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;_classPrivateMethodInitSpec(this,_FreeOutliner_brand);_classPrivateFieldInitSpec(this,_box3,void 0);_classPrivateFieldInitSpec(this,_bottom,[]);_classPrivateFieldInitSpec(this,_innerMargin,void 0);_classPrivateFieldInitSpec(this,_isLTR,void 0);_classPrivateFieldInitSpec(this,_top,[]);_classPrivateFieldInitSpec(this,_last,new Float64Array(18));_classPrivateFieldInitSpec(this,_lastX,void 0);_classPrivateFieldInitSpec(this,_lastY,void 0);_classPrivateFieldInitSpec(this,_min,void 0);_classPrivateFieldInitSpec(this,_min_dist,void 0);_classPrivateFieldInitSpec(this,_scaleFactor,void 0);_classPrivateFieldInitSpec(this,_thickness2,void 0);_classPrivateFieldInitSpec(this,_points,[]);_classPrivateFieldSet(_box3,this,box);_classPrivateFieldSet(_thickness2,this,thickness*scaleFactor);_classPrivateFieldSet(_isLTR,this,isLTR);_classPrivateFieldGet(_last,this).set([NaN,NaN,NaN,NaN,_x,_y],6);_classPrivateFieldSet(_innerMargin,this,innerMargin);_classPrivateFieldSet(_min_dist,this,_MIN_DIST._*scaleFactor);_classPrivateFieldSet(_min,this,_MIN._*scaleFactor);_classPrivateFieldSet(_scaleFactor,this,scaleFactor);_classPrivateFieldGet(_points,this).push(_x,_y);}get free(){return true;}isEmpty(){return isNaN(_classPrivateFieldGet(_last,this)[8]);}add(_ref51){let{x,y}=_ref51;_classPrivateFieldSet(_lastX,this,x);_classPrivateFieldSet(_lastY,this,y);const[layerX,layerY,layerWidth,layerHeight]=_classPrivateFieldGet(_box3,this);let[x1,y1,x2,y2]=_classPrivateFieldGet(_last,this).subarray(8,12);const diffX=x-x2;const diffY=y-y2;const d=Math.hypot(diffX,diffY);if(d<_classPrivateFieldGet(_min,this)){return false;}const diffD=d-_classPrivateFieldGet(_min_dist,this);const K=diffD/d;const shiftX=K*diffX;const shiftY=K*diffY;let x0=x1;let y0=y1;x1=x2;y1=y2;x2+=shiftX;y2+=shiftY;_classPrivateFieldGet(_points,this)?.push(x,y);const nX=-shiftY/diffD;const nY=shiftX/diffD;const thX=nX*_classPrivateFieldGet(_thickness2,this);const thY=nY*_classPrivateFieldGet(_thickness2,this);_classPrivateFieldGet(_last,this).set(_classPrivateFieldGet(_last,this).subarray(2,8),0);_classPrivateFieldGet(_last,this).set([x2+thX,y2+thY],4);_classPrivateFieldGet(_last,this).set(_classPrivateFieldGet(_last,this).subarray(14,18),12);_classPrivateFieldGet(_last,this).set([x2-thX,y2-thY],16);if(isNaN(_classPrivateFieldGet(_last,this)[6])){if(_classPrivateFieldGet(_top,this).length===0){_classPrivateFieldGet(_last,this).set([x1+thX,y1+thY],2);_classPrivateFieldGet(_top,this).push(NaN,NaN,NaN,NaN,(x1+thX-layerX)/layerWidth,(y1+thY-layerY)/layerHeight);_classPrivateFieldGet(_last,this).set([x1-thX,y1-thY],14);_classPrivateFieldGet(_bottom,this).push(NaN,NaN,NaN,NaN,(x1-thX-layerX)/layerWidth,(y1-thY-layerY)/layerHeight);}_classPrivateFieldGet(_last,this).set([x0,y0,x1,y1,x2,y2],6);return!this.isEmpty();}_classPrivateFieldGet(_last,this).set([x0,y0,x1,y1,x2,y2],6);const angle=Math.abs(Math.atan2(y0-y1,x0-x1)-Math.atan2(shiftY,shiftX));if(angle<Math.PI/2){[x1,y1,x2,y2]=_classPrivateFieldGet(_last,this).subarray(2,6);_classPrivateFieldGet(_top,this).push(NaN,NaN,NaN,NaN,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);[x1,y1,x0,y0]=_classPrivateFieldGet(_last,this).subarray(14,18);_classPrivateFieldGet(_bottom,this).push(NaN,NaN,NaN,NaN,((x0+x1)/2-layerX)/layerWidth,((y0+y1)/2-layerY)/layerHeight);return true;}[x0,y0,x1,y1,x2,y2]=_classPrivateFieldGet(_last,this).subarray(0,6);_classPrivateFieldGet(_top,this).push(((x0+5*x1)/6-layerX)/layerWidth,((y0+5*y1)/6-layerY)/layerHeight,((5*x1+x2)/6-layerX)/layerWidth,((5*y1+y2)/6-layerY)/layerHeight,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);[x2,y2,x1,y1,x0,y0]=_classPrivateFieldGet(_last,this).subarray(12,18);_classPrivateFieldGet(_bottom,this).push(((x0+5*x1)/6-layerX)/layerWidth,((y0+5*y1)/6-layerY)/layerHeight,((5*x1+x2)/6-layerX)/layerWidth,((5*y1+y2)/6-layerY)/layerHeight,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);return true;}toSVGPath(){if(this.isEmpty()){return\"\";}const top=_classPrivateFieldGet(_top,this);const bottom=_classPrivateFieldGet(_bottom,this);const lastTop=_classPrivateFieldGet(_last,this).subarray(4,6);const lastBottom=_classPrivateFieldGet(_last,this).subarray(16,18);const[x,y,width,height]=_classPrivateFieldGet(_box3,this);const[lastTopX,lastTopY,lastBottomX,lastBottomY]=_assertClassBrand(_FreeOutliner_brand,this,_getLastCoords).call(this);if(isNaN(_classPrivateFieldGet(_last,this)[6])&&!this.isEmpty()){return`M${(_classPrivateFieldGet(_last,this)[2]-x)/width} ${(_classPrivateFieldGet(_last,this)[3]-y)/height} L${(_classPrivateFieldGet(_last,this)[4]-x)/width} ${(_classPrivateFieldGet(_last,this)[5]-y)/height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(_classPrivateFieldGet(_last,this)[16]-x)/width} ${(_classPrivateFieldGet(_last,this)[17]-y)/height} L${(_classPrivateFieldGet(_last,this)[14]-x)/width} ${(_classPrivateFieldGet(_last,this)[15]-y)/height} Z`;}const buffer=[];buffer.push(`M${top[4]} ${top[5]}`);for(let i=6;i<top.length;i+=6){if(isNaN(top[i])){buffer.push(`L${top[i+4]} ${top[i+5]}`);}else{buffer.push(`C${top[i]} ${top[i+1]} ${top[i+2]} ${top[i+3]} ${top[i+4]} ${top[i+5]}`);}}buffer.push(`L${(lastTop[0]-x)/width} ${(lastTop[1]-y)/height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0]-x)/width} ${(lastBottom[1]-y)/height}`);for(let i=bottom.length-6;i>=6;i-=6){if(isNaN(bottom[i])){buffer.push(`L${bottom[i+4]} ${bottom[i+5]}`);}else{buffer.push(`C${bottom[i]} ${bottom[i+1]} ${bottom[i+2]} ${bottom[i+3]} ${bottom[i+4]} ${bottom[i+5]}`);}}buffer.push(`L${bottom[4]} ${bottom[5]} Z`);return buffer.join(\" \");}getOutlines(){const top=_classPrivateFieldGet(_top,this);const bottom=_classPrivateFieldGet(_bottom,this);const last=_classPrivateFieldGet(_last,this);const lastTop=last.subarray(4,6);const lastBottom=last.subarray(16,18);const[layerX,layerY,layerWidth,layerHeight]=_classPrivateFieldGet(_box3,this);const points=new Float64Array((_classPrivateFieldGet(_points,this)?.length??0)+2);for(let i=0,ii=points.length-2;i<ii;i+=2){points[i]=(_classPrivateFieldGet(_points,this)[i]-layerX)/layerWidth;points[i+1]=(_classPrivateFieldGet(_points,this)[i+1]-layerY)/layerHeight;}points[points.length-2]=(_classPrivateFieldGet(_lastX,this)-layerX)/layerWidth;points[points.length-1]=(_classPrivateFieldGet(_lastY,this)-layerY)/layerHeight;const[lastTopX,lastTopY,lastBottomX,lastBottomY]=_assertClassBrand(_FreeOutliner_brand,this,_getLastCoords).call(this);if(isNaN(last[6])&&!this.isEmpty()){const outline=new Float64Array(36);outline.set([NaN,NaN,NaN,NaN,(last[2]-layerX)/layerWidth,(last[3]-layerY)/layerHeight,NaN,NaN,NaN,NaN,(last[4]-layerX)/layerWidth,(last[5]-layerY)/layerHeight,NaN,NaN,NaN,NaN,lastTopX,lastTopY,NaN,NaN,NaN,NaN,lastBottomX,lastBottomY,NaN,NaN,NaN,NaN,(last[16]-layerX)/layerWidth,(last[17]-layerY)/layerHeight,NaN,NaN,NaN,NaN,(last[14]-layerX)/layerWidth,(last[15]-layerY)/layerHeight],0);return new FreeHighlightOutline(outline,points,_classPrivateFieldGet(_box3,this),_classPrivateFieldGet(_scaleFactor,this),_classPrivateFieldGet(_innerMargin,this),_classPrivateFieldGet(_isLTR,this));}const outline=new Float64Array(_classPrivateFieldGet(_top,this).length+24+_classPrivateFieldGet(_bottom,this).length);let N=top.length;for(let i=0;i<N;i+=2){if(isNaN(top[i])){outline[i]=outline[i+1]=NaN;continue;}outline[i]=top[i];outline[i+1]=top[i+1];}outline.set([NaN,NaN,NaN,NaN,(lastTop[0]-layerX)/layerWidth,(lastTop[1]-layerY)/layerHeight,NaN,NaN,NaN,NaN,lastTopX,lastTopY,NaN,NaN,NaN,NaN,lastBottomX,lastBottomY,NaN,NaN,NaN,NaN,(lastBottom[0]-layerX)/layerWidth,(lastBottom[1]-layerY)/layerHeight],N);N+=24;for(let i=bottom.length-6;i>=6;i-=6){for(let j=0;j<6;j+=2){if(isNaN(bottom[i+j])){outline[N]=outline[N+1]=NaN;N+=2;continue;}outline[N]=bottom[i+j];outline[N+1]=bottom[i+j+1];N+=2;}}outline.set([NaN,NaN,NaN,NaN,bottom[4],bottom[5]],N);return new FreeHighlightOutline(outline,points,_classPrivateFieldGet(_box3,this),_classPrivateFieldGet(_scaleFactor,this),_classPrivateFieldGet(_innerMargin,this),_classPrivateFieldGet(_isLTR,this));}}function _getLastCoords(){const lastTop=_classPrivateFieldGet(_last,this).subarray(4,6);const lastBottom=_classPrivateFieldGet(_last,this).subarray(16,18);const[x,y,width,height]=_classPrivateFieldGet(_box3,this);return[(_classPrivateFieldGet(_lastX,this)+(lastTop[0]-lastBottom[0])/2-x)/width,(_classPrivateFieldGet(_lastY,this)+(lastTop[1]-lastBottom[1])/2-y)/height,(_classPrivateFieldGet(_lastX,this)+(lastBottom[0]-lastTop[0])/2-x)/width,(_classPrivateFieldGet(_lastY,this)+(lastBottom[1]-lastTop[1])/2-y)/height];}var _MIN_DIST={_:8};var _MIN_DIFF={_:2};var _MIN={_:_MIN_DIST._+_MIN_DIFF._};var _box4=/*#__PURE__*/new WeakMap();var _bbox2=/*#__PURE__*/new WeakMap();var _innerMargin2=/*#__PURE__*/new WeakMap();var _isLTR2=/*#__PURE__*/new WeakMap();var _points2=/*#__PURE__*/new WeakMap();var _scaleFactor2=/*#__PURE__*/new WeakMap();var _outline=/*#__PURE__*/new WeakMap();var _FreeHighlightOutline_brand=/*#__PURE__*/new WeakSet();class FreeHighlightOutline extends Outline{constructor(_outline2,points,box,scaleFactor,innerMargin,_isLTR3){super();_classPrivateMethodInitSpec(this,_FreeHighlightOutline_brand);_classPrivateFieldInitSpec(this,_box4,void 0);_classPrivateFieldInitSpec(this,_bbox2,null);_classPrivateFieldInitSpec(this,_innerMargin2,void 0);_classPrivateFieldInitSpec(this,_isLTR2,void 0);_classPrivateFieldInitSpec(this,_points2,void 0);_classPrivateFieldInitSpec(this,_scaleFactor2,void 0);_classPrivateFieldInitSpec(this,_outline,void 0);_classPrivateFieldSet(_outline,this,_outline2);_classPrivateFieldSet(_points2,this,points);_classPrivateFieldSet(_box4,this,box);_classPrivateFieldSet(_scaleFactor2,this,scaleFactor);_classPrivateFieldSet(_innerMargin2,this,innerMargin);_classPrivateFieldSet(_isLTR2,this,_isLTR3);_assertClassBrand(_FreeHighlightOutline_brand,this,_computeMinMax).call(this,_isLTR3);const{x:_x2,y:_y2,width:_width2,height:_height2}=_classPrivateFieldGet(_bbox2,this);for(let i=0,ii=_outline2.length;i<ii;i+=2){_outline2[i]=(_outline2[i]-_x2)/_width2;_outline2[i+1]=(_outline2[i+1]-_y2)/_height2;}for(let i=0,ii=points.length;i<ii;i+=2){points[i]=(points[i]-_x2)/_width2;points[i+1]=(points[i+1]-_y2)/_height2;}}toSVGPath(){const buffer=[`M${_classPrivateFieldGet(_outline,this)[4]} ${_classPrivateFieldGet(_outline,this)[5]}`];for(let i=6,ii=_classPrivateFieldGet(_outline,this).length;i<ii;i+=6){if(isNaN(_classPrivateFieldGet(_outline,this)[i])){buffer.push(`L${_classPrivateFieldGet(_outline,this)[i+4]} ${_classPrivateFieldGet(_outline,this)[i+5]}`);continue;}buffer.push(`C${_classPrivateFieldGet(_outline,this)[i]} ${_classPrivateFieldGet(_outline,this)[i+1]} ${_classPrivateFieldGet(_outline,this)[i+2]} ${_classPrivateFieldGet(_outline,this)[i+3]} ${_classPrivateFieldGet(_outline,this)[i+4]} ${_classPrivateFieldGet(_outline,this)[i+5]}`);}buffer.push(\"Z\");return buffer.join(\" \");}serialize(_ref52,rotation){let[blX,blY,trX,trY]=_ref52;const width=trX-blX;const height=trY-blY;let outline;let points;switch(rotation){case 0:outline=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescale).call(this,_classPrivateFieldGet(_outline,this),blX,trY,width,-height);points=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescale).call(this,_classPrivateFieldGet(_points2,this),blX,trY,width,-height);break;case 90:outline=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescaleAndSwap).call(this,_classPrivateFieldGet(_outline,this),blX,blY,width,height);points=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescaleAndSwap).call(this,_classPrivateFieldGet(_points2,this),blX,blY,width,height);break;case 180:outline=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescale).call(this,_classPrivateFieldGet(_outline,this),trX,blY,-width,height);points=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescale).call(this,_classPrivateFieldGet(_points2,this),trX,blY,-width,height);break;case 270:outline=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescaleAndSwap).call(this,_classPrivateFieldGet(_outline,this),trX,trY,-width,-height);points=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescaleAndSwap).call(this,_classPrivateFieldGet(_points2,this),trX,trY,-width,-height);break;}return{outline:Array.from(outline),points:[Array.from(points)]};}get box(){return _classPrivateFieldGet(_bbox2,this);}getNewOutline(thickness,innerMargin){const{x,y,width,height}=_classPrivateFieldGet(_bbox2,this);const[layerX,layerY,layerWidth,layerHeight]=_classPrivateFieldGet(_box4,this);const sx=width*layerWidth;const sy=height*layerHeight;const tx=x*layerWidth+layerX;const ty=y*layerHeight+layerY;const outliner=new FreeOutliner({x:_classPrivateFieldGet(_points2,this)[0]*sx+tx,y:_classPrivateFieldGet(_points2,this)[1]*sy+ty},_classPrivateFieldGet(_box4,this),_classPrivateFieldGet(_scaleFactor2,this),thickness,_classPrivateFieldGet(_isLTR2,this),innerMargin??_classPrivateFieldGet(_innerMargin2,this));for(let i=2;i<_classPrivateFieldGet(_points2,this).length;i+=2){outliner.add({x:_classPrivateFieldGet(_points2,this)[i]*sx+tx,y:_classPrivateFieldGet(_points2,this)[i+1]*sy+ty});}return outliner.getOutlines();}}/***/function _rescale(src,tx,ty,sx,sy){const dest=new Float64Array(src.length);for(let i=0,ii=src.length;i<ii;i+=2){dest[i]=tx+src[i]*sx;dest[i+1]=ty+src[i+1]*sy;}return dest;}function _rescaleAndSwap(src,tx,ty,sx,sy){const dest=new Float64Array(src.length);for(let i=0,ii=src.length;i<ii;i+=2){dest[i]=tx+src[i+1]*sx;dest[i+1]=ty+src[i]*sy;}return dest;}function _computeMinMax(isLTR){const outline=_classPrivateFieldGet(_outline,this);let lastX=outline[4];let lastY=outline[5];let minX=lastX;let minY=lastY;let maxX=lastX;let maxY=lastY;let lastPointX=lastX;let lastPointY=lastY;const ltrCallback=isLTR?Math.max:Math.min;for(let i=6,ii=outline.length;i<ii;i+=6){if(isNaN(outline[i])){minX=Math.min(minX,outline[i+4]);minY=Math.min(minY,outline[i+5]);maxX=Math.max(maxX,outline[i+4]);maxY=Math.max(maxY,outline[i+5]);if(lastPointY<outline[i+5]){lastPointX=outline[i+4];lastPointY=outline[i+5];}else if(lastPointY===outline[i+5]){lastPointX=ltrCallback(lastPointX,outline[i+4]);}}else{const bbox=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util.bezierBoundingBox(lastX,lastY,...outline.slice(i,i+6));minX=Math.min(minX,bbox[0]);minY=Math.min(minY,bbox[1]);maxX=Math.max(maxX,bbox[2]);maxY=Math.max(maxY,bbox[3]);if(lastPointY<bbox[3]){lastPointX=bbox[2];lastPointY=bbox[3];}else if(lastPointY===bbox[3]){lastPointX=ltrCallback(lastPointX,bbox[2]);}}lastX=outline[i+4];lastY=outline[i+5];}const x=minX-_classPrivateFieldGet(_innerMargin2,this),y=minY-_classPrivateFieldGet(_innerMargin2,this),width=maxX-minX+2*_classPrivateFieldGet(_innerMargin2,this),height=maxY-minY+2*_classPrivateFieldGet(_innerMargin2,this);_classPrivateFieldSet(_bbox2,this,{x,y,width,height,lastPoint:[lastPointX,lastPointY]});}}),/***/362:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */EditorToolbar:()=>(/* binding */EditorToolbar),/* harmony export */HighlightToolbar:()=>(/* binding */HighlightToolbar)/* harmony export */});/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(419);var _toolbar=/*#__PURE__*/new WeakMap();var _colorPicker2=/*#__PURE__*/new WeakMap();var _editor3=/*#__PURE__*/new WeakMap();var _buttons=/*#__PURE__*/new WeakMap();var _EditorToolbar_brand=/*#__PURE__*/new WeakSet();class EditorToolbar{constructor(editor){_classPrivateMethodInitSpec(this,_EditorToolbar_brand);_classPrivateFieldInitSpec(this,_toolbar,null);_classPrivateFieldInitSpec(this,_colorPicker2,null);_classPrivateFieldInitSpec(this,_editor3,void 0);_classPrivateFieldInitSpec(this,_buttons,null);_classPrivateFieldSet(_editor3,this,editor);}render(){const editToolbar=_classPrivateFieldSet(_toolbar,this,document.createElement(\"div\"));editToolbar.className=\"editToolbar\";editToolbar.setAttribute(\"role\",\"toolbar\");editToolbar.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_0__.noContextMenu);editToolbar.addEventListener(\"pointerdown\",_pointerDown2);const buttons=_classPrivateFieldSet(_buttons,this,document.createElement(\"div\"));buttons.className=\"buttons\";editToolbar.append(buttons);const position=_classPrivateFieldGet(_editor3,this).toolbarPosition;if(position){const{style}=editToolbar;const x=_classPrivateFieldGet(_editor3,this)._uiManager.direction===\"ltr\"?1-position[0]:position[0];style.insetInlineEnd=`${100*x}%`;style.top=`calc(${100*position[1]}% + var(--editor-toolbar-vert-offset))`;}_assertClassBrand(_EditorToolbar_brand,this,_addDeleteButton).call(this);return editToolbar;}hide(){_classPrivateFieldGet(_toolbar,this).classList.add(\"hidden\");_classPrivateFieldGet(_colorPicker2,this)?.hideDropdown();}show(){_classPrivateFieldGet(_toolbar,this).classList.remove(\"hidden\");}addAltTextButton(button){_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);_classPrivateFieldGet(_buttons,this).prepend(button,_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));}addColorPicker(colorPicker){_classPrivateFieldSet(_colorPicker2,this,colorPicker);const button=colorPicker.renderButton();_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);_classPrivateFieldGet(_buttons,this).prepend(button,_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));}remove(){_classPrivateFieldGet(_toolbar,this).remove();_classPrivateFieldGet(_colorPicker2,this)?.destroy();_classPrivateFieldSet(_colorPicker2,this,null);}}function _pointerDown2(e){e.stopPropagation();}function _focusIn(e){_classPrivateFieldGet(_editor3,this)._focusEventsAllowed=false;e.preventDefault();e.stopPropagation();}function _focusOut(e){_classPrivateFieldGet(_editor3,this)._focusEventsAllowed=true;e.preventDefault();e.stopPropagation();}function _addListenersToElement(element){element.addEventListener(\"focusin\",_assertClassBrand(_EditorToolbar_brand,this,_focusIn).bind(this),{capture:true});element.addEventListener(\"focusout\",_assertClassBrand(_EditorToolbar_brand,this,_focusOut).bind(this),{capture:true});element.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_0__.noContextMenu);}function _addDeleteButton(){const button=document.createElement(\"button\");button.className=\"delete\";button.tabIndex=0;button.setAttribute(\"data-l10n-id\",`pdfjs-editor-remove-${_classPrivateFieldGet(_editor3,this).editorType}-button`);_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);button.addEventListener(\"click\",e=>{_classPrivateFieldGet(_editor3,this)._uiManager.delete();});_classPrivateFieldGet(_buttons,this).append(button);}function _get_divider(_this7){const divider=document.createElement(\"div\");divider.className=\"divider\";return divider;}var _buttons2=/*#__PURE__*/new WeakMap();var _toolbar2=/*#__PURE__*/new WeakMap();var _uiManager4=/*#__PURE__*/new WeakMap();var _HighlightToolbar_brand=/*#__PURE__*/new WeakSet();class HighlightToolbar{constructor(uiManager){_classPrivateMethodInitSpec(this,_HighlightToolbar_brand);_classPrivateFieldInitSpec(this,_buttons2,null);_classPrivateFieldInitSpec(this,_toolbar2,null);_classPrivateFieldInitSpec(this,_uiManager4,void 0);_classPrivateFieldSet(_uiManager4,this,uiManager);}show(parent,boxes,isLTR){const[x,y]=_assertClassBrand(_HighlightToolbar_brand,this,_getLastPoint).call(this,boxes,isLTR);const{style}=_classPrivateFieldGet(_toolbar2,this)||_classPrivateFieldSet(_toolbar2,this,_assertClassBrand(_HighlightToolbar_brand,this,_render).call(this));parent.append(_classPrivateFieldGet(_toolbar2,this));style.insetInlineEnd=`${100*x}%`;style.top=`calc(${100*y}% + var(--editor-toolbar-vert-offset))`;}hide(){_classPrivateFieldGet(_toolbar2,this).remove();}}/***/function _render(){const editToolbar=_classPrivateFieldSet(_toolbar2,this,document.createElement(\"div\"));editToolbar.className=\"editToolbar\";editToolbar.setAttribute(\"role\",\"toolbar\");editToolbar.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_0__.noContextMenu);const buttons=_classPrivateFieldSet(_buttons2,this,document.createElement(\"div\"));buttons.className=\"buttons\";editToolbar.append(buttons);_assertClassBrand(_HighlightToolbar_brand,this,_addHighlightButton).call(this);return editToolbar;}function _getLastPoint(boxes,isLTR){let lastY=0;let lastX=0;for(const box of boxes){const y=box.y+box.height;if(y<lastY){continue;}const x=box.x+(isLTR?box.width:0);if(y>lastY){lastX=x;lastY=y;continue;}if(isLTR){if(x>lastX){lastX=x;}}else if(x<lastX){lastX=x;}}return[isLTR?1-lastX:lastX,lastY];}function _addHighlightButton(){const button=document.createElement(\"button\");button.className=\"highlightButton\";button.tabIndex=0;button.setAttribute(\"data-l10n-id\",`pdfjs-highlight-floating-button1`);const span=document.createElement(\"span\");button.append(span);span.className=\"visuallyHidden\";span.setAttribute(\"data-l10n-id\",\"pdfjs-highlight-floating-button-label\");button.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_0__.noContextMenu);button.addEventListener(\"click\",()=>{_classPrivateFieldGet(_uiManager4,this).highlightSelection(\"floating_button\");});_classPrivateFieldGet(_buttons2,this).append(button);}}),/***/830:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _ImageManager;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */AnnotationEditorUIManager:()=>(/* binding */AnnotationEditorUIManager),/* harmony export */ColorManager:()=>(/* binding */ColorManager),/* harmony export */KeyboardManager:()=>(/* binding */KeyboardManager),/* harmony export */bindEvents:()=>(/* binding */bindEvents),/* harmony export */opacityToHex:()=>(/* binding */opacityToHex)/* harmony export */});/* unused harmony export CommandManager */ /* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(419);/* harmony import */var _toolbar_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(362);function bindEvents(obj,element,names){for(const name of names){element.addEventListener(name,obj[name].bind(obj));}}function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,\"0\");}var _id4=/*#__PURE__*/new WeakMap();class IdManager{constructor(){_classPrivateFieldInitSpec(this,_id4,0);}get id(){var _this$id7,_this$id8;return`${_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorPrefix}${(_classPrivateFieldSet(_id4,this,(_this$id7=_classPrivateFieldGet(_id4,this),_this$id8=_this$id7++,_this$id7)),_this$id8)}`;}}var _baseId=/*#__PURE__*/new WeakMap();var _id5=/*#__PURE__*/new WeakMap();var _cache2=/*#__PURE__*/new WeakMap();var _ImageManager_brand=/*#__PURE__*/new WeakSet();class ImageManager{constructor(){_classPrivateMethodInitSpec(this,_ImageManager_brand);_classPrivateFieldInitSpec(this,_baseId,(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.getUuid)());_classPrivateFieldInitSpec(this,_id5,0);_classPrivateFieldInitSpec(this,_cache2,null);}static get _isSVGFittingCanvas(){const svg=`data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;const canvas=new OffscreenCanvas(1,3);const ctx=canvas.getContext(\"2d\");const image=new Image();image.src=svg;const promise=image.decode().then(()=>{ctx.drawImage(image,0,0,1,1,0,0,1,3);return new Uint32Array(ctx.getImageData(0,0,1,1).data.buffer)[0]===0;});return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_isSVGFittingCanvas\",promise);}async getFromFile(file){const{lastModified,name,size,type}=file;return _assertClassBrand(_ImageManager_brand,this,_get).call(this,`${lastModified}_${name}_${size}_${type}`,file);}async getFromUrl(url){return _assertClassBrand(_ImageManager_brand,this,_get).call(this,url,url);}async getFromId(id){_classPrivateFieldGet(_cache2,this)||_classPrivateFieldSet(_cache2,this,new Map());const data=_classPrivateFieldGet(_cache2,this).get(id);if(!data){return null;}if(data.bitmap){data.refCounter+=1;return data;}if(data.file){return this.getFromFile(data.file);}return this.getFromUrl(data.url);}getSvgUrl(id){const data=_classPrivateFieldGet(_cache2,this).get(id);if(!data?.isSvg){return null;}return data.svgUrl;}deleteId(id){_classPrivateFieldGet(_cache2,this)||_classPrivateFieldSet(_cache2,this,new Map());const data=_classPrivateFieldGet(_cache2,this).get(id);if(!data){return;}data.refCounter-=1;if(data.refCounter!==0){return;}data.bitmap=null;}isValidId(id){return id.startsWith(`image_${_classPrivateFieldGet(_baseId,this)}_`);}}_ImageManager=ImageManager;async function _get(key,rawData){_classPrivateFieldGet(_cache2,this)||_classPrivateFieldSet(_cache2,this,new Map());let data=_classPrivateFieldGet(_cache2,this).get(key);if(data===null){return null;}if(data?.bitmap){data.refCounter+=1;return data;}try{var _this$id9,_this$id10;data||={bitmap:null,id:`image_${_classPrivateFieldGet(_baseId,this)}_${(_classPrivateFieldSet(_id5,this,(_this$id9=_classPrivateFieldGet(_id5,this),_this$id10=_this$id9++,_this$id9)),_this$id10)}`,refCounter:0,isSvg:false};let image;if(typeof rawData===\"string\"){data.url=rawData;image=await(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.fetchData)(rawData,\"blob\");}else{image=data.file=rawData;}if(image.type===\"image/svg+xml\"){const mustRemoveAspectRatioPromise=_ImageManager._isSVGFittingCanvas;const fileReader=new FileReader();const imageElement=new Image();const imagePromise=new Promise((resolve,reject)=>{imageElement.onload=()=>{data.bitmap=imageElement;data.isSvg=true;resolve();};fileReader.onload=async()=>{const url=data.svgUrl=fileReader.result;imageElement.src=(await mustRemoveAspectRatioPromise)?`${url}#svgView(preserveAspectRatio(none))`:url;};imageElement.onerror=fileReader.onerror=reject;});fileReader.readAsDataURL(image);await imagePromise;}else{data.bitmap=await createImageBitmap(image);}data.refCounter=1;}catch(e){console.error(e);data=null;}_classPrivateFieldGet(_cache2,this).set(key,data);if(data){_classPrivateFieldGet(_cache2,this).set(data.id,data);}return data;}var _commands=/*#__PURE__*/new WeakMap();var _locked=/*#__PURE__*/new WeakMap();var _maxSize=/*#__PURE__*/new WeakMap();var _position=/*#__PURE__*/new WeakMap();class CommandManager{constructor(){let maxSize=arguments.length>0&&arguments[0]!==undefined?arguments[0]:128;_classPrivateFieldInitSpec(this,_commands,[]);_classPrivateFieldInitSpec(this,_locked,false);_classPrivateFieldInitSpec(this,_maxSize,void 0);_classPrivateFieldInitSpec(this,_position,-1);_classPrivateFieldSet(_maxSize,this,maxSize);}add(_ref55){let{cmd,undo,post,mustExec,type=NaN,overwriteIfSameType=false,keepUndo=false}=_ref55;if(mustExec){cmd();}if(_classPrivateFieldGet(_locked,this)){return;}const save={cmd,undo,post,type};if(_classPrivateFieldGet(_position,this)===-1){if(_classPrivateFieldGet(_commands,this).length>0){_classPrivateFieldGet(_commands,this).length=0;}_classPrivateFieldSet(_position,this,0);_classPrivateFieldGet(_commands,this).push(save);return;}if(overwriteIfSameType&&_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)].type===type){if(keepUndo){save.undo=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)].undo;}_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)]=save;return;}const next=_classPrivateFieldGet(_position,this)+1;if(next===_classPrivateFieldGet(_maxSize,this)){_classPrivateFieldGet(_commands,this).splice(0,1);}else{_classPrivateFieldSet(_position,this,next);if(next<_classPrivateFieldGet(_commands,this).length){_classPrivateFieldGet(_commands,this).splice(next);}}_classPrivateFieldGet(_commands,this).push(save);}undo(){if(_classPrivateFieldGet(_position,this)===-1){return;}_classPrivateFieldSet(_locked,this,true);const{undo,post}=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)];undo();post?.();_classPrivateFieldSet(_locked,this,false);_classPrivateFieldSet(_position,this,_classPrivateFieldGet(_position,this)-1);}redo(){if(_classPrivateFieldGet(_position,this)<_classPrivateFieldGet(_commands,this).length-1){_classPrivateFieldSet(_position,this,_classPrivateFieldGet(_position,this)+1);_classPrivateFieldSet(_locked,this,true);const{cmd,post}=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)];cmd();post?.();_classPrivateFieldSet(_locked,this,false);}}hasSomethingToUndo(){return _classPrivateFieldGet(_position,this)!==-1;}hasSomethingToRedo(){return _classPrivateFieldGet(_position,this)<_classPrivateFieldGet(_commands,this).length-1;}destroy(){_classPrivateFieldSet(_commands,this,null);}}var _KeyboardManager_brand=/*#__PURE__*/new WeakSet();class KeyboardManager{constructor(callbacks){_classPrivateMethodInitSpec(this,_KeyboardManager_brand);this.buffer=[];this.callbacks=new Map();this.allKeys=new Set();const{isMac}=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FeatureTest.platform;for(const[keys,callback,options={}]of callbacks){for(const key of keys){const isMacKey=key.startsWith(\"mac+\");if(isMac&&isMacKey){this.callbacks.set(key.slice(4),{callback,options});this.allKeys.add(key.split(\"+\").at(-1));}else if(!isMac&&!isMacKey){this.callbacks.set(key,{callback,options});this.allKeys.add(key.split(\"+\").at(-1));}}}}exec(self,event){if(!this.allKeys.has(event.key)){return;}const info=this.callbacks.get(_assertClassBrand(_KeyboardManager_brand,this,_serialize).call(this,event));if(!info){return;}const{callback,options:{bubbles=false,args=[],checker=null}}=info;if(checker&&!checker(self,event)){return;}callback.bind(self,...args,event)();if(!bubbles){event.stopPropagation();event.preventDefault();}}}function _serialize(event){if(event.altKey){this.buffer.push(\"alt\");}if(event.ctrlKey){this.buffer.push(\"ctrl\");}if(event.metaKey){this.buffer.push(\"meta\");}if(event.shiftKey){this.buffer.push(\"shift\");}this.buffer.push(event.key);const str=this.buffer.join(\"+\");this.buffer.length=0;return str;}class ColorManager{get _colors(){const colors=new Map([[\"CanvasText\",null],[\"Canvas\",null]]);(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.getColorValues)(colors);return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_colors\",colors);}convert(color){const rgb=(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.getRGB)(color);if(!window.matchMedia(\"(forced-colors: active)\").matches){return rgb;}for(const[name,RGB]of this._colors){if(RGB.every((x,i)=>x===rgb[i])){return ColorManager._colorsMapping.get(name);}}return rgb;}getHexCode(name){const rgb=this._colors.get(name);if(!rgb){return name;}return _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util.makeHexColor(...rgb);}}_defineProperty(ColorManager,\"_colorsMapping\",new Map([[\"CanvasText\",[0,0,0]],[\"Canvas\",[255,255,255]]]));var _activeEditor=/*#__PURE__*/new WeakMap();var _allEditors=/*#__PURE__*/new WeakMap();var _allLayers=/*#__PURE__*/new WeakMap();var _altTextManager=/*#__PURE__*/new WeakMap();var _annotationStorage=/*#__PURE__*/new WeakMap();var _changedExistingAnnotations=/*#__PURE__*/new WeakMap();var _commandManager=/*#__PURE__*/new WeakMap();var _currentPageIndex=/*#__PURE__*/new WeakMap();var _deletedAnnotationsElementIds=/*#__PURE__*/new WeakMap();var _draggingEditors=/*#__PURE__*/new WeakMap();var _editorTypes2=/*#__PURE__*/new WeakMap();var _editorsToRescale=/*#__PURE__*/new WeakMap();var _enableHighlightFloatingButton=/*#__PURE__*/new WeakMap();var _filterFactory=/*#__PURE__*/new WeakMap();var _focusMainContainerTimeoutId=/*#__PURE__*/new WeakMap();var _highlightColors=/*#__PURE__*/new WeakMap();var _highlightWhenShiftUp=/*#__PURE__*/new WeakMap();var _highlightToolbar=/*#__PURE__*/new WeakMap();var _idManager=/*#__PURE__*/new WeakMap();var _isEnabled=/*#__PURE__*/new WeakMap();var _isWaiting=/*#__PURE__*/new WeakMap();var _lastActiveElement=/*#__PURE__*/new WeakMap();var _mainHighlightColorPicker=/*#__PURE__*/new WeakMap();var _mlManager=/*#__PURE__*/new WeakMap();var _mode=/*#__PURE__*/new WeakMap();var _selectedEditors=/*#__PURE__*/new WeakMap();var _selectedTextNode=/*#__PURE__*/new WeakMap();var _pageColors=/*#__PURE__*/new WeakMap();var _showAllStates=/*#__PURE__*/new WeakMap();var _boundBlur=/*#__PURE__*/new WeakMap();var _boundFocus=/*#__PURE__*/new WeakMap();var _boundCopy=/*#__PURE__*/new WeakMap();var _boundCut=/*#__PURE__*/new WeakMap();var _boundPaste=/*#__PURE__*/new WeakMap();var _boundKeydown2=/*#__PURE__*/new WeakMap();var _boundKeyup=/*#__PURE__*/new WeakMap();var _boundOnEditingAction=/*#__PURE__*/new WeakMap();var _boundOnPageChanging=/*#__PURE__*/new WeakMap();var _boundOnScaleChanging=/*#__PURE__*/new WeakMap();var _boundSelectionChange=/*#__PURE__*/new WeakMap();var _boundOnRotationChanging=/*#__PURE__*/new WeakMap();var _previousStates=/*#__PURE__*/new WeakMap();var _translation=/*#__PURE__*/new WeakMap();var _translationTimeoutId=/*#__PURE__*/new WeakMap();var _container2=/*#__PURE__*/new WeakMap();var _viewer=/*#__PURE__*/new WeakMap();var _AnnotationEditorUIManager_brand=/*#__PURE__*/new WeakSet();class AnnotationEditorUIManager{static get _keyboardManager(){const proto=AnnotationEditorUIManager.prototype;const arrowChecker=self=>_classPrivateFieldGet(_container2,self).contains(document.activeElement)&&document.activeElement.tagName!==\"BUTTON\"&&self.hasSomethingToControl();const textInputChecker=(_self,_ref56)=>{let{target:el}=_ref56;if(el instanceof HTMLInputElement){const{type}=el;return type!==\"text\"&&type!==\"number\";}return true;};const small=this.TRANSLATE_SMALL;const big=this.TRANSLATE_BIG;return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_keyboardManager\",new KeyboardManager([[[\"ctrl+a\",\"mac+meta+a\"],proto.selectAll,{checker:textInputChecker}],[[\"ctrl+z\",\"mac+meta+z\"],proto.undo,{checker:textInputChecker}],[[\"ctrl+y\",\"ctrl+shift+z\",\"mac+meta+shift+z\",\"ctrl+shift+Z\",\"mac+meta+shift+Z\"],proto.redo,{checker:textInputChecker}],[[\"Backspace\",\"alt+Backspace\",\"ctrl+Backspace\",\"shift+Backspace\",\"mac+Backspace\",\"mac+alt+Backspace\",\"mac+ctrl+Backspace\",\"Delete\",\"ctrl+Delete\",\"shift+Delete\",\"mac+Delete\"],proto.delete,{checker:textInputChecker}],[[\"Enter\",\"mac+Enter\"],proto.addNewEditorFromKeyboard,{checker:(self,_ref57)=>{let{target:el}=_ref57;return!(el instanceof HTMLButtonElement)&&_classPrivateFieldGet(_container2,self).contains(el)&&!self.isEnterHandled;}}],[[\" \",\"mac+ \"],proto.addNewEditorFromKeyboard,{checker:(self,_ref58)=>{let{target:el}=_ref58;return!(el instanceof HTMLButtonElement)&&_classPrivateFieldGet(_container2,self).contains(document.activeElement);}}],[[\"Escape\",\"mac+Escape\"],proto.unselectAll],[[\"ArrowLeft\",\"mac+ArrowLeft\"],proto.translateSelectedEditors,{args:[-small,0],checker:arrowChecker}],[[\"ctrl+ArrowLeft\",\"mac+shift+ArrowLeft\"],proto.translateSelectedEditors,{args:[-big,0],checker:arrowChecker}],[[\"ArrowRight\",\"mac+ArrowRight\"],proto.translateSelectedEditors,{args:[small,0],checker:arrowChecker}],[[\"ctrl+ArrowRight\",\"mac+shift+ArrowRight\"],proto.translateSelectedEditors,{args:[big,0],checker:arrowChecker}],[[\"ArrowUp\",\"mac+ArrowUp\"],proto.translateSelectedEditors,{args:[0,-small],checker:arrowChecker}],[[\"ctrl+ArrowUp\",\"mac+shift+ArrowUp\"],proto.translateSelectedEditors,{args:[0,-big],checker:arrowChecker}],[[\"ArrowDown\",\"mac+ArrowDown\"],proto.translateSelectedEditors,{args:[0,small],checker:arrowChecker}],[[\"ctrl+ArrowDown\",\"mac+shift+ArrowDown\"],proto.translateSelectedEditors,{args:[0,big],checker:arrowChecker}]]));}constructor(container,viewer,altTextManager,eventBus,pdfDocument,pageColors,highlightColors,enableHighlightFloatingButton,mlManager){_classPrivateMethodInitSpec(this,_AnnotationEditorUIManager_brand);_classPrivateFieldInitSpec(this,_activeEditor,null);_classPrivateFieldInitSpec(this,_allEditors,new Map());_classPrivateFieldInitSpec(this,_allLayers,new Map());_classPrivateFieldInitSpec(this,_altTextManager,null);_classPrivateFieldInitSpec(this,_annotationStorage,null);_classPrivateFieldInitSpec(this,_changedExistingAnnotations,null);_classPrivateFieldInitSpec(this,_commandManager,new CommandManager());_classPrivateFieldInitSpec(this,_currentPageIndex,0);_classPrivateFieldInitSpec(this,_deletedAnnotationsElementIds,new Set());_classPrivateFieldInitSpec(this,_draggingEditors,null);_classPrivateFieldInitSpec(this,_editorTypes2,null);_classPrivateFieldInitSpec(this,_editorsToRescale,new Set());_classPrivateFieldInitSpec(this,_enableHighlightFloatingButton,false);_classPrivateFieldInitSpec(this,_filterFactory,null);_classPrivateFieldInitSpec(this,_focusMainContainerTimeoutId,null);_classPrivateFieldInitSpec(this,_highlightColors,null);_classPrivateFieldInitSpec(this,_highlightWhenShiftUp,false);_classPrivateFieldInitSpec(this,_highlightToolbar,null);_classPrivateFieldInitSpec(this,_idManager,new IdManager());_classPrivateFieldInitSpec(this,_isEnabled,false);_classPrivateFieldInitSpec(this,_isWaiting,false);_classPrivateFieldInitSpec(this,_lastActiveElement,null);_classPrivateFieldInitSpec(this,_mainHighlightColorPicker,null);_classPrivateFieldInitSpec(this,_mlManager,null);_classPrivateFieldInitSpec(this,_mode,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE);_classPrivateFieldInitSpec(this,_selectedEditors,new Set());_classPrivateFieldInitSpec(this,_selectedTextNode,null);_classPrivateFieldInitSpec(this,_pageColors,null);_classPrivateFieldInitSpec(this,_showAllStates,null);_classPrivateFieldInitSpec(this,_boundBlur,this.blur.bind(this));_classPrivateFieldInitSpec(this,_boundFocus,this.focus.bind(this));_classPrivateFieldInitSpec(this,_boundCopy,this.copy.bind(this));_classPrivateFieldInitSpec(this,_boundCut,this.cut.bind(this));_classPrivateFieldInitSpec(this,_boundPaste,this.paste.bind(this));_classPrivateFieldInitSpec(this,_boundKeydown2,this.keydown.bind(this));_classPrivateFieldInitSpec(this,_boundKeyup,this.keyup.bind(this));_classPrivateFieldInitSpec(this,_boundOnEditingAction,this.onEditingAction.bind(this));_classPrivateFieldInitSpec(this,_boundOnPageChanging,this.onPageChanging.bind(this));_classPrivateFieldInitSpec(this,_boundOnScaleChanging,this.onScaleChanging.bind(this));_classPrivateFieldInitSpec(this,_boundSelectionChange,_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectionChange).bind(this));_classPrivateFieldInitSpec(this,_boundOnRotationChanging,this.onRotationChanging.bind(this));_classPrivateFieldInitSpec(this,_previousStates,{isEditing:false,isEmpty:true,hasSomethingToUndo:false,hasSomethingToRedo:false,hasSelectedEditor:false,hasSelectedText:false});_classPrivateFieldInitSpec(this,_translation,[0,0]);_classPrivateFieldInitSpec(this,_translationTimeoutId,null);_classPrivateFieldInitSpec(this,_container2,null);_classPrivateFieldInitSpec(this,_viewer,null);_classPrivateFieldSet(_container2,this,container);_classPrivateFieldSet(_viewer,this,viewer);_classPrivateFieldSet(_altTextManager,this,altTextManager);this._eventBus=eventBus;this._eventBus._on(\"editingaction\",_classPrivateFieldGet(_boundOnEditingAction,this));this._eventBus._on(\"pagechanging\",_classPrivateFieldGet(_boundOnPageChanging,this));this._eventBus._on(\"scalechanging\",_classPrivateFieldGet(_boundOnScaleChanging,this));this._eventBus._on(\"rotationchanging\",_classPrivateFieldGet(_boundOnRotationChanging,this));_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addSelectionListener).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addKeyboardManager).call(this);_classPrivateFieldSet(_annotationStorage,this,pdfDocument.annotationStorage);_classPrivateFieldSet(_filterFactory,this,pdfDocument.filterFactory);_classPrivateFieldSet(_pageColors,this,pageColors);_classPrivateFieldSet(_highlightColors,this,highlightColors||null);_classPrivateFieldSet(_enableHighlightFloatingButton,this,enableHighlightFloatingButton);_classPrivateFieldSet(_mlManager,this,mlManager||null);this.viewParameters={realScale:_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0};this.isShiftKeyDown=false;}destroy(){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeKeyboardManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeFocusManager).call(this);this._eventBus._off(\"editingaction\",_classPrivateFieldGet(_boundOnEditingAction,this));this._eventBus._off(\"pagechanging\",_classPrivateFieldGet(_boundOnPageChanging,this));this._eventBus._off(\"scalechanging\",_classPrivateFieldGet(_boundOnScaleChanging,this));this._eventBus._off(\"rotationchanging\",_classPrivateFieldGet(_boundOnRotationChanging,this));for(const layer of _classPrivateFieldGet(_allLayers,this).values()){layer.destroy();}_classPrivateFieldGet(_allLayers,this).clear();_classPrivateFieldGet(_allEditors,this).clear();_classPrivateFieldGet(_editorsToRescale,this).clear();_classPrivateFieldSet(_activeEditor,this,null);_classPrivateFieldGet(_selectedEditors,this).clear();_classPrivateFieldGet(_commandManager,this).destroy();_classPrivateFieldGet(_altTextManager,this)?.destroy();_classPrivateFieldGet(_highlightToolbar,this)?.hide();_classPrivateFieldSet(_highlightToolbar,this,null);if(_classPrivateFieldGet(_focusMainContainerTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_focusMainContainerTimeoutId,this));_classPrivateFieldSet(_focusMainContainerTimeoutId,this,null);}if(_classPrivateFieldGet(_translationTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_translationTimeoutId,this));_classPrivateFieldSet(_translationTimeoutId,this,null);}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeSelectionListener).call(this);}async mlGuess(data){return _classPrivateFieldGet(_mlManager,this)?.guess(data)||null;}get hasMLManager(){return!!_classPrivateFieldGet(_mlManager,this);}get hcmFilter(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"hcmFilter\",_classPrivateFieldGet(_pageColors,this)?_classPrivateFieldGet(_filterFactory,this).addHCMFilter(_classPrivateFieldGet(_pageColors,this).foreground,_classPrivateFieldGet(_pageColors,this).background):\"none\");}get direction(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"direction\",getComputedStyle(_classPrivateFieldGet(_container2,this)).direction);}get highlightColors(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"highlightColors\",_classPrivateFieldGet(_highlightColors,this)?new Map(_classPrivateFieldGet(_highlightColors,this).split(\",\").map(pair=>pair.split(\"=\").map(x=>x.trim()))):null);}get highlightColorNames(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"highlightColorNames\",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null);}setMainHighlightColorPicker(colorPicker){_classPrivateFieldSet(_mainHighlightColorPicker,this,colorPicker);}editAltText(editor){_classPrivateFieldGet(_altTextManager,this)?.editAltText(this,editor);}onPageChanging(_ref59){let{pageNumber}=_ref59;_classPrivateFieldSet(_currentPageIndex,this,pageNumber-1);}focusMainContainer(){_classPrivateFieldGet(_container2,this).focus();}findParent(x,y){for(const layer of _classPrivateFieldGet(_allLayers,this).values()){const{x:layerX,y:layerY,width,height}=layer.div.getBoundingClientRect();if(x>=layerX&&x<=layerX+width&&y>=layerY&&y<=layerY+height){return layer;}}return null;}disableUserSelect(){let value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classPrivateFieldGet(_viewer,this).classList.toggle(\"noUserSelect\",value);}addShouldRescale(editor){_classPrivateFieldGet(_editorsToRescale,this).add(editor);}removeShouldRescale(editor){_classPrivateFieldGet(_editorsToRescale,this).delete(editor);}onScaleChanging(_ref60){let{scale}=_ref60;this.commitOrRemove();this.viewParameters.realScale=scale*_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.PixelsPerInch.PDF_TO_CSS_UNITS;for(const editor of _classPrivateFieldGet(_editorsToRescale,this)){editor.onScaleChanging();}}onRotationChanging(_ref61){let{pagesRotation}=_ref61;this.commitOrRemove();this.viewParameters.rotation=pagesRotation;}highlightSelection(){let methodOfCreation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";const selection=document.getSelection();if(!selection||selection.isCollapsed){return;}const{anchorNode,anchorOffset,focusNode,focusOffset}=selection;const text=selection.toString();const anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);const textLayer=anchorElement.closest(\".textLayer\");const boxes=this.getSelectionBoxes(textLayer);if(!boxes){return;}selection.empty();if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE){this._eventBus.dispatch(\"showannotationeditorui\",{source:this,mode:_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT});this.showAllEditors(\"highlight\",true,true);}for(const layer of _classPrivateFieldGet(_allLayers,this).values()){if(layer.hasTextLayer(textLayer)){layer.createAndAddNewEditor({x:0,y:0},false,{methodOfCreation,boxes,anchorNode,anchorOffset,focusNode,focusOffset,text});break;}}}addToAnnotationStorage(editor){if(!editor.isEmpty()&&_classPrivateFieldGet(_annotationStorage,this)&&!_classPrivateFieldGet(_annotationStorage,this).has(editor.id)){_classPrivateFieldGet(_annotationStorage,this).setValue(editor.id,editor);}}blur(){this.isShiftKeyDown=false;if(_classPrivateFieldGet(_highlightWhenShiftUp,this)){_classPrivateFieldSet(_highlightWhenShiftUp,this,false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_onSelectEnd).call(this,\"main_toolbar\");}if(!this.hasSelection){return;}const{activeElement}=document;for(const editor of _classPrivateFieldGet(_selectedEditors,this)){if(editor.div.contains(activeElement)){_classPrivateFieldSet(_lastActiveElement,this,[editor,activeElement]);editor._focusEventsAllowed=false;break;}}}focus(){if(!_classPrivateFieldGet(_lastActiveElement,this)){return;}const[lastEditor,lastActiveElement]=_classPrivateFieldGet(_lastActiveElement,this);_classPrivateFieldSet(_lastActiveElement,this,null);lastActiveElement.addEventListener(\"focusin\",()=>{lastEditor._focusEventsAllowed=true;},{once:true});lastActiveElement.focus();}addEditListeners(){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addKeyboardManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addCopyPasteListeners).call(this);}removeEditListeners(){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeKeyboardManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeCopyPasteListeners).call(this);}copy(event){event.preventDefault();_classPrivateFieldGet(_activeEditor,this)?.commitOrRemove();if(!this.hasSelection){return;}const editors=[];for(const editor of _classPrivateFieldGet(_selectedEditors,this)){const serialized=editor.serialize(true);if(serialized){editors.push(serialized);}}if(editors.length===0){return;}event.clipboardData.setData(\"application/pdfjs\",JSON.stringify(editors));}cut(event){this.copy(event);this.delete();}paste(event){event.preventDefault();const{clipboardData}=event;for(const item of clipboardData.items){for(const editorType of _classPrivateFieldGet(_editorTypes2,this)){if(editorType.isHandlingMimeForPasting(item.type)){editorType.paste(item,this.currentLayer);return;}}}let data=clipboardData.getData(\"application/pdfjs\");if(!data){return;}try{data=JSON.parse(data);}catch(ex){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`paste: \"${ex.message}\".`);return;}if(!Array.isArray(data)){return;}this.unselectAll();const layer=this.currentLayer;try{const newEditors=[];for(const editor of data){const deserializedEditor=layer.deserialize(editor);if(!deserializedEditor){return;}newEditors.push(deserializedEditor);}const cmd=()=>{for(const editor of newEditors){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addEditorToLayer).call(this,editor);}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectEditors).call(this,newEditors);};const undo=()=>{for(const editor of newEditors){editor.remove();}};this.addCommands({cmd,undo,mustExec:true});}catch(ex){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`paste: \"${ex.message}\".`);}}keydown(event){if(!this.isShiftKeyDown&&event.key===\"Shift\"){this.isShiftKeyDown=true;}if(_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard){AnnotationEditorUIManager._keyboardManager.exec(this,event);}}keyup(event){if(this.isShiftKeyDown&&event.key===\"Shift\"){this.isShiftKeyDown=false;if(_classPrivateFieldGet(_highlightWhenShiftUp,this)){_classPrivateFieldSet(_highlightWhenShiftUp,this,false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_onSelectEnd).call(this,\"main_toolbar\");}}}onEditingAction(_ref62){let{name}=_ref62;switch(name){case\"undo\":case\"redo\":case\"delete\":case\"selectAll\":this[name]();break;case\"highlightSelection\":this.highlightSelection(\"context_menu\");break;}}setEditingState(isEditing){if(isEditing){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addFocusManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addCopyPasteListeners).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{isEditing:_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this),hasSomethingToUndo:_classPrivateFieldGet(_commandManager,this).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(_commandManager,this).hasSomethingToRedo(),hasSelectedEditor:false});}else{_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeFocusManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeCopyPasteListeners).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{isEditing:false});this.disableUserSelect(false);}}registerEditorTypes(types){if(_classPrivateFieldGet(_editorTypes2,this)){return;}_classPrivateFieldSet(_editorTypes2,this,types);for(const editorType of _classPrivateFieldGet(_editorTypes2,this)){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editorType.defaultPropertiesToUpdate);}}getId(){return _classPrivateFieldGet(_idManager,this).id;}get currentLayer(){return _classPrivateFieldGet(_allLayers,this).get(_classPrivateFieldGet(_currentPageIndex,this));}getLayer(pageIndex){return _classPrivateFieldGet(_allLayers,this).get(pageIndex);}get currentPageIndex(){return _classPrivateFieldGet(_currentPageIndex,this);}addLayer(layer){_classPrivateFieldGet(_allLayers,this).set(layer.pageIndex,layer);if(_classPrivateFieldGet(_isEnabled,this)){layer.enable();}else{layer.disable();}}removeLayer(layer){_classPrivateFieldGet(_allLayers,this).delete(layer.pageIndex);}updateMode(mode){let editId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let isFromKeyboard=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(_classPrivateFieldGet(_mode,this)===mode){return;}_classPrivateFieldSet(_mode,this,mode);if(mode===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE){this.setEditingState(false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_disableAll).call(this);return;}this.setEditingState(true);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_enableAll).call(this);this.unselectAll();for(const layer of _classPrivateFieldGet(_allLayers,this).values()){layer.updateMode(mode);}if(!editId&&isFromKeyboard){this.addNewEditorFromKeyboard();return;}if(!editId){return;}for(const editor of _classPrivateFieldGet(_allEditors,this).values()){if(editor.annotationElementId===editId){this.setSelected(editor);editor.enterInEditMode();break;}}}addNewEditorFromKeyboard(){if(this.currentLayer.canCreateNewEmptyEditor()){this.currentLayer.addNewEditor();}}updateToolbar(mode){if(mode===_classPrivateFieldGet(_mode,this)){return;}this._eventBus.dispatch(\"switchannotationeditormode\",{source:this,mode});}updateParams(type,value){if(!_classPrivateFieldGet(_editorTypes2,this)){return;}switch(type){case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:_classPrivateFieldGet(_mainHighlightColorPicker,this)?.updateColor(value);break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch(\"reporttelemetry\",{source:this,details:{type:\"editing\",data:{type:\"highlight\",action:\"toggle_visibility\"}}});(_classPrivateFieldGet(_showAllStates,this)||_classPrivateFieldSet(_showAllStates,this,new Map())).set(type,value);this.showAllEditors(\"highlight\",value);break;}for(const editor of _classPrivateFieldGet(_selectedEditors,this)){editor.updateParams(type,value);}for(const editorType of _classPrivateFieldGet(_editorTypes2,this)){editorType.updateDefaultParams(type,value);}}showAllEditors(type,visible){let updateButton=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;for(const editor of _classPrivateFieldGet(_allEditors,this).values()){if(editor.editorType===type){editor.show(visible);}}const state=_classPrivateFieldGet(_showAllStates,this)?.get(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL)??true;if(state!==visible){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,[[_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,visible]]);}}enableWaiting(){let mustWait=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(_classPrivateFieldGet(_isWaiting,this)===mustWait){return;}_classPrivateFieldSet(_isWaiting,this,mustWait);for(const layer of _classPrivateFieldGet(_allLayers,this).values()){if(mustWait){layer.disableClick();}else{layer.enableClick();}layer.div.classList.toggle(\"waiting\",mustWait);}}getEditors(pageIndex){const editors=[];for(const editor of _classPrivateFieldGet(_allEditors,this).values()){if(editor.pageIndex===pageIndex){editors.push(editor);}}return editors;}getEditor(id){return _classPrivateFieldGet(_allEditors,this).get(id);}addEditor(editor){_classPrivateFieldGet(_allEditors,this).set(editor.id,editor);}removeEditor(editor){if(editor.div.contains(document.activeElement)){if(_classPrivateFieldGet(_focusMainContainerTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_focusMainContainerTimeoutId,this));}_classPrivateFieldSet(_focusMainContainerTimeoutId,this,setTimeout(()=>{this.focusMainContainer();_classPrivateFieldSet(_focusMainContainerTimeoutId,this,null);},0));}_classPrivateFieldGet(_allEditors,this).delete(editor.id);this.unselect(editor);if(!editor.annotationElementId||!_classPrivateFieldGet(_deletedAnnotationsElementIds,this).has(editor.annotationElementId)){_classPrivateFieldGet(_annotationStorage,this)?.remove(editor.id);}}addDeletedAnnotationElement(editor){_classPrivateFieldGet(_deletedAnnotationsElementIds,this).add(editor.annotationElementId);this.addChangedExistingAnnotation(editor);editor.deleted=true;}isDeletedAnnotationElement(annotationElementId){return _classPrivateFieldGet(_deletedAnnotationsElementIds,this).has(annotationElementId);}removeDeletedAnnotationElement(editor){_classPrivateFieldGet(_deletedAnnotationsElementIds,this).delete(editor.annotationElementId);this.removeChangedExistingAnnotation(editor);editor.deleted=false;}setActiveEditor(editor){if(_classPrivateFieldGet(_activeEditor,this)===editor){return;}_classPrivateFieldSet(_activeEditor,this,editor);if(editor){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);}}updateUI(editor){if(_classPrivateGetter(_AnnotationEditorUIManager_brand,this,_get_lastSelectedEditor)===editor){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);}}toggleSelected(editor){if(_classPrivateFieldGet(_selectedEditors,this).has(editor)){_classPrivateFieldGet(_selectedEditors,this).delete(editor);editor.unselect();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});return;}_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}setSelected(editor){for(const ed of _classPrivateFieldGet(_selectedEditors,this)){if(ed!==editor){ed.unselect();}}_classPrivateFieldGet(_selectedEditors,this).clear();_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}isSelected(editor){return _classPrivateFieldGet(_selectedEditors,this).has(editor);}get firstSelectedEditor(){return _classPrivateFieldGet(_selectedEditors,this).values().next().value;}unselect(editor){editor.unselect();_classPrivateFieldGet(_selectedEditors,this).delete(editor);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});}get hasSelection(){return _classPrivateFieldGet(_selectedEditors,this).size!==0;}get isEnterHandled(){return _classPrivateFieldGet(_selectedEditors,this).size===1&&this.firstSelectedEditor.isEnterHandled;}undo(){_classPrivateFieldGet(_commandManager,this).undo();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:_classPrivateFieldGet(_commandManager,this).hasSomethingToUndo(),hasSomethingToRedo:true,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}redo(){_classPrivateFieldGet(_commandManager,this).redo();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:_classPrivateFieldGet(_commandManager,this).hasSomethingToRedo(),isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}addCommands(params){_classPrivateFieldGet(_commandManager,this).add(params);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:false,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}delete(){this.commitOrRemove();if(!this.hasSelection){return;}const editors=[..._classPrivateFieldGet(_selectedEditors,this)];const cmd=()=>{for(const editor of editors){editor.remove();}};const undo=()=>{for(const editor of editors){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addEditorToLayer).call(this,editor);}};this.addCommands({cmd,undo,mustExec:true});}commitOrRemove(){_classPrivateFieldGet(_activeEditor,this)?.commitOrRemove();}hasSomethingToControl(){return _classPrivateFieldGet(_activeEditor,this)||this.hasSelection;}selectAll(){for(const editor of _classPrivateFieldGet(_selectedEditors,this)){editor.commit();}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectEditors).call(this,_classPrivateFieldGet(_allEditors,this).values());}unselectAll(){if(_classPrivateFieldGet(_activeEditor,this)){_classPrivateFieldGet(_activeEditor,this).commitOrRemove();if(_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE){return;}}if(!this.hasSelection){return;}for(const editor of _classPrivateFieldGet(_selectedEditors,this)){editor.unselect();}_classPrivateFieldGet(_selectedEditors,this).clear();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:false});}translateSelectedEditors(x,y){let noCommit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!noCommit){this.commitOrRemove();}if(!this.hasSelection){return;}_classPrivateFieldGet(_translation,this)[0]+=x;_classPrivateFieldGet(_translation,this)[1]+=y;const[totalX,totalY]=_classPrivateFieldGet(_translation,this);const editors=[..._classPrivateFieldGet(_selectedEditors,this)];const TIME_TO_WAIT=1000;if(_classPrivateFieldGet(_translationTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_translationTimeoutId,this));}_classPrivateFieldSet(_translationTimeoutId,this,setTimeout(()=>{_classPrivateFieldSet(_translationTimeoutId,this,null);_classPrivateFieldGet(_translation,this)[0]=_classPrivateFieldGet(_translation,this)[1]=0;this.addCommands({cmd:()=>{for(const editor of editors){if(_classPrivateFieldGet(_allEditors,this).has(editor.id)){editor.translateInPage(totalX,totalY);}}},undo:()=>{for(const editor of editors){if(_classPrivateFieldGet(_allEditors,this).has(editor.id)){editor.translateInPage(-totalX,-totalY);}}},mustExec:false});},TIME_TO_WAIT));for(const editor of editors){editor.translateInPage(x,y);}}setUpDragSession(){if(!this.hasSelection){return;}this.disableUserSelect(true);_classPrivateFieldSet(_draggingEditors,this,new Map());for(const editor of _classPrivateFieldGet(_selectedEditors,this)){_classPrivateFieldGet(_draggingEditors,this).set(editor,{savedX:editor.x,savedY:editor.y,savedPageIndex:editor.pageIndex,newX:0,newY:0,newPageIndex:-1});}}endDragSession(){if(!_classPrivateFieldGet(_draggingEditors,this)){return false;}this.disableUserSelect(false);const map=_classPrivateFieldGet(_draggingEditors,this);_classPrivateFieldSet(_draggingEditors,this,null);let mustBeAddedInUndoStack=false;for(const[{x,y,pageIndex},value]of map){value.newX=x;value.newY=y;value.newPageIndex=pageIndex;mustBeAddedInUndoStack||=x!==value.savedX||y!==value.savedY||pageIndex!==value.savedPageIndex;}if(!mustBeAddedInUndoStack){return false;}const move=(editor,x,y,pageIndex)=>{if(_classPrivateFieldGet(_allEditors,this).has(editor.id)){const parent=_classPrivateFieldGet(_allLayers,this).get(pageIndex);if(parent){editor._setParentAndPosition(parent,x,y);}else{editor.pageIndex=pageIndex;editor.x=x;editor.y=y;}}};this.addCommands({cmd:()=>{for(const[editor,{newX,newY,newPageIndex}]of map){move(editor,newX,newY,newPageIndex);}},undo:()=>{for(const[editor,{savedX,savedY,savedPageIndex}]of map){move(editor,savedX,savedY,savedPageIndex);}},mustExec:true});return true;}dragSelectedEditors(tx,ty){if(!_classPrivateFieldGet(_draggingEditors,this)){return;}for(const editor of _classPrivateFieldGet(_draggingEditors,this).keys()){editor.drag(tx,ty);}}rebuild(editor){if(editor.parent===null){const parent=this.getLayer(editor.pageIndex);if(parent){parent.changeParent(editor);parent.addOrRebuild(editor);}else{this.addEditor(editor);this.addToAnnotationStorage(editor);editor.rebuild();}}else{editor.parent.addOrRebuild(editor);}}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||_classPrivateFieldGet(_selectedEditors,this).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents();}isActive(editor){return _classPrivateFieldGet(_activeEditor,this)===editor;}getActive(){return _classPrivateFieldGet(_activeEditor,this);}getMode(){return _classPrivateFieldGet(_mode,this);}get imageManager(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"imageManager\",new ImageManager());}getSelectionBoxes(textLayer){if(!textLayer){return null;}const selection=document.getSelection();for(let i=0,ii=selection.rangeCount;i<ii;i++){if(!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)){return null;}}const{x:layerX,y:layerY,width:parentWidth,height:parentHeight}=textLayer.getBoundingClientRect();let rotator;switch(textLayer.getAttribute(\"data-main-rotation\")){case\"90\":rotator=(x,y,w,h)=>({x:(y-layerY)/parentHeight,y:1-(x+w-layerX)/parentWidth,width:h/parentHeight,height:w/parentWidth});break;case\"180\":rotator=(x,y,w,h)=>({x:1-(x+w-layerX)/parentWidth,y:1-(y+h-layerY)/parentHeight,width:w/parentWidth,height:h/parentHeight});break;case\"270\":rotator=(x,y,w,h)=>({x:1-(y+h-layerY)/parentHeight,y:(x-layerX)/parentWidth,width:h/parentHeight,height:w/parentWidth});break;default:rotator=(x,y,w,h)=>({x:(x-layerX)/parentWidth,y:(y-layerY)/parentHeight,width:w/parentWidth,height:h/parentHeight});break;}const boxes=[];for(let i=0,ii=selection.rangeCount;i<ii;i++){const range=selection.getRangeAt(i);if(range.collapsed){continue;}for(const{x,y,width,height}of range.getClientRects()){if(width===0||height===0){continue;}boxes.push(rotator(x,y,width,height));}}return boxes.length===0?null:boxes;}addChangedExistingAnnotation(_ref63){let{annotationElementId,id}=_ref63;(_classPrivateFieldGet(_changedExistingAnnotations,this)||_classPrivateFieldSet(_changedExistingAnnotations,this,new Map())).set(annotationElementId,id);}removeChangedExistingAnnotation(_ref64){let{annotationElementId}=_ref64;_classPrivateFieldGet(_changedExistingAnnotations,this)?.delete(annotationElementId);}renderAnnotationElement(annotation){const editorId=_classPrivateFieldGet(_changedExistingAnnotations,this)?.get(annotation.data.id);if(!editorId){return;}const editor=_classPrivateFieldGet(_annotationStorage,this).getRawValue(editorId);if(!editor){return;}if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE&&!editor.hasBeenModified){return;}editor.renderAnnotationElement(annotation);}}/***/function _getAnchorElementForSelection(_ref65){let{anchorNode}=_ref65;return anchorNode.nodeType===Node.TEXT_NODE?anchorNode.parentElement:anchorNode;}function _displayHighlightToolbar(){const selection=document.getSelection();if(!selection||selection.isCollapsed){return;}const anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);const textLayer=anchorElement.closest(\".textLayer\");const boxes=this.getSelectionBoxes(textLayer);if(!boxes){return;}_classPrivateFieldGet(_highlightToolbar,this)||_classPrivateFieldSet(_highlightToolbar,this,new _toolbar_js__WEBPACK_IMPORTED_MODULE_2__.HighlightToolbar(this));_classPrivateFieldGet(_highlightToolbar,this).show(textLayer,boxes,this.direction===\"ltr\");}function _selectionChange(){const selection=document.getSelection();if(!selection||selection.isCollapsed){if(_classPrivateFieldGet(_selectedTextNode,this)){_classPrivateFieldGet(_highlightToolbar,this)?.hide();_classPrivateFieldSet(_selectedTextNode,this,null);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:false});}return;}const{anchorNode}=selection;if(anchorNode===_classPrivateFieldGet(_selectedTextNode,this)){return;}const anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);const textLayer=anchorElement.closest(\".textLayer\");if(!textLayer){if(_classPrivateFieldGet(_selectedTextNode,this)){_classPrivateFieldGet(_highlightToolbar,this)?.hide();_classPrivateFieldSet(_selectedTextNode,this,null);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:false});}return;}_classPrivateFieldGet(_highlightToolbar,this)?.hide();_classPrivateFieldSet(_selectedTextNode,this,anchorNode);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:true});if(_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT&&_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE){return;}if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT){this.showAllEditors(\"highlight\",true,true);}_classPrivateFieldSet(_highlightWhenShiftUp,this,this.isShiftKeyDown);if(!this.isShiftKeyDown){const pointerup=e=>{if(e.type===\"pointerup\"&&e.button!==0){return;}window.removeEventListener(\"pointerup\",pointerup);window.removeEventListener(\"blur\",pointerup);if(e.type===\"pointerup\"){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_onSelectEnd).call(this,\"main_toolbar\");}};window.addEventListener(\"pointerup\",pointerup);window.addEventListener(\"blur\",pointerup);}}function _onSelectEnd(){let methodOfCreation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT){this.highlightSelection(methodOfCreation);}else if(_classPrivateFieldGet(_enableHighlightFloatingButton,this)){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_displayHighlightToolbar).call(this);}}function _addSelectionListener(){document.addEventListener(\"selectionchange\",_classPrivateFieldGet(_boundSelectionChange,this));}function _removeSelectionListener(){document.removeEventListener(\"selectionchange\",_classPrivateFieldGet(_boundSelectionChange,this));}function _addFocusManager(){window.addEventListener(\"focus\",_classPrivateFieldGet(_boundFocus,this));window.addEventListener(\"blur\",_classPrivateFieldGet(_boundBlur,this));}function _removeFocusManager(){window.removeEventListener(\"focus\",_classPrivateFieldGet(_boundFocus,this));window.removeEventListener(\"blur\",_classPrivateFieldGet(_boundBlur,this));}function _addKeyboardManager(){window.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeydown2,this));window.addEventListener(\"keyup\",_classPrivateFieldGet(_boundKeyup,this));}function _removeKeyboardManager(){window.removeEventListener(\"keydown\",_classPrivateFieldGet(_boundKeydown2,this));window.removeEventListener(\"keyup\",_classPrivateFieldGet(_boundKeyup,this));}function _addCopyPasteListeners(){document.addEventListener(\"copy\",_classPrivateFieldGet(_boundCopy,this));document.addEventListener(\"cut\",_classPrivateFieldGet(_boundCut,this));document.addEventListener(\"paste\",_classPrivateFieldGet(_boundPaste,this));}function _removeCopyPasteListeners(){document.removeEventListener(\"copy\",_classPrivateFieldGet(_boundCopy,this));document.removeEventListener(\"cut\",_classPrivateFieldGet(_boundCut,this));document.removeEventListener(\"paste\",_classPrivateFieldGet(_boundPaste,this));}function _dispatchUpdateStates(details){const hasChanged=Object.entries(details).some(_ref66=>{let[key,value]=_ref66;return _classPrivateFieldGet(_previousStates,this)[key]!==value;});if(hasChanged){this._eventBus.dispatch(\"annotationeditorstateschanged\",{source:this,details:Object.assign(_classPrivateFieldGet(_previousStates,this),details)});if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT&&details.hasSelectedEditor===false){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,[[_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_FREE,true]]);}}}function _dispatchUpdateUI(details){this._eventBus.dispatch(\"annotationeditorparamschanged\",{source:this,details});}function _enableAll(){if(!_classPrivateFieldGet(_isEnabled,this)){_classPrivateFieldSet(_isEnabled,this,true);for(const layer of _classPrivateFieldGet(_allLayers,this).values()){layer.enable();}for(const editor of _classPrivateFieldGet(_allEditors,this).values()){editor.enable();}}}function _disableAll(){this.unselectAll();if(_classPrivateFieldGet(_isEnabled,this)){_classPrivateFieldSet(_isEnabled,this,false);for(const layer of _classPrivateFieldGet(_allLayers,this).values()){layer.disable();}for(const editor of _classPrivateFieldGet(_allEditors,this).values()){editor.disable();}}}function _addEditorToLayer(editor){const layer=_classPrivateFieldGet(_allLayers,this).get(editor.pageIndex);if(layer){layer.addOrRebuild(editor);}else{this.addEditor(editor);this.addToAnnotationStorage(editor);}}function _get_lastSelectedEditor(_this8){let ed=null;for(ed of _classPrivateFieldGet(_selectedEditors,_this8)){}return ed;}function _isEmpty(){if(_classPrivateFieldGet(_allEditors,this).size===0){return true;}if(_classPrivateFieldGet(_allEditors,this).size===1){for(const editor of _classPrivateFieldGet(_allEditors,this).values()){return editor.isEmpty();}}return false;}function _selectEditors(editors){for(const editor of _classPrivateFieldGet(_selectedEditors,this)){editor.unselect();}_classPrivateFieldGet(_selectedEditors,this).clear();for(const editor of editors){if(editor.isEmpty()){continue;}_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});}_defineProperty(AnnotationEditorUIManager,\"TRANSLATE_SMALL\",1);_defineProperty(AnnotationEditorUIManager,\"TRANSLATE_BIG\",10);}),/***/94:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFFetchStream:()=>(/* binding */PDFFetchStream)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(490);function createFetchOptions(headers,withCredentials,abortController){return{method:\"GET\",headers,signal:abortController.signal,mode:\"cors\",credentials:withCredentials?\"include\":\"same-origin\",redirect:\"follow\"};}function createHeaders(httpHeaders){const headers=new Headers();for(const property in httpHeaders){const value=httpHeaders[property];if(value===undefined){continue;}headers.append(property,value);}return headers;}function getArrayBuffer(val){if(val instanceof Uint8Array){return val.buffer;}if(val instanceof ArrayBuffer){return val;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`getArrayBuffer - unexpected data format: ${val}`);return new Uint8Array(val).buffer;}class PDFFetchStream{constructor(source){this.source=source;this.isHttp=/^https?:/i.test(source.url);this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}getFullReader(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader,\"PDFFetchStream.getFullReader can only be called once.\");this._fullRequestReader=new PDFFetchStreamReader(this);return this._fullRequestReader;}getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}const reader=new PDFFetchStreamRangeReader(this,begin,end);this._rangeRequestReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}class PDFFetchStreamReader{constructor(stream){this._stream=stream;this._reader=null;this._loaded=0;this._filename=null;const source=stream.source;this._withCredentials=source.withCredentials||false;this._contentLength=source.length;this._headersCapability=Promise.withResolvers();this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._abortController=new AbortController();this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._headers=createHeaders(this._stream.httpHeaders);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateResponseStatus)(response.status)){throw(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(response.status,url);}this._reader=response.body.getReader();this._headersCapability.resolve();const getResponseHeader=name=>response.headers.get(name);const{allowRangeRequests,suggestedLength}=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests;this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);if(!this._isStreamingSupported&&this._isRangeSupported){this.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"Streaming is disabled.\"));}}).catch(this._headersCapability.reject);this.onProgress=null;}get headersReady(){return this._headersCapability.promise;}get filename(){return this._filename;}get contentLength(){return this._contentLength;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._headersCapability.promise;const{value,done}=await this._reader.read();if(done){return{value,done};}this._loaded+=value.byteLength;this.onProgress?.({loaded:this._loaded,total:this._contentLength});return{value:getArrayBuffer(value),done:false};}cancel(reason){this._reader?.cancel(reason);this._abortController.abort();}}class PDFFetchStreamRangeReader{constructor(stream,begin,end){this._stream=stream;this._reader=null;this._loaded=0;const source=stream.source;this._withCredentials=source.withCredentials||false;this._readCapability=Promise.withResolvers();this._isStreamingSupported=!source.disableStream;this._abortController=new AbortController();this._headers=createHeaders(this._stream.httpHeaders);this._headers.append(\"Range\",`bytes=${begin}-${end-1}`);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateResponseStatus)(response.status)){throw(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(response.status,url);}this._readCapability.resolve();this._reader=response.body.getReader();}).catch(this._readCapability.reject);this.onProgress=null;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;const{value,done}=await this._reader.read();if(done){return{value,done};}this._loaded+=value.byteLength;this.onProgress?.({loaded:this._loaded});return{value:getArrayBuffer(value),done:false};}cancel(reason){this._reader?.cancel(reason);this._abortController.abort();}}/***/}),/***/10:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */FontFaceObject:()=>(/* binding */FontFaceObject),/* harmony export */FontLoader:()=>(/* binding */FontLoader)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);var _systemFonts=/*#__PURE__*/new WeakMap();class FontLoader{constructor(_ref67){let{ownerDocument=globalThis.document,styleElement=null}=_ref67;_classPrivateFieldInitSpec(this,_systemFonts,new Set());this._document=ownerDocument;this.nativeFontFaces=new Set();this.styleElement=null;this.loadingRequests=[];this.loadTestFontId=0;}addNativeFontFace(nativeFontFace){this.nativeFontFaces.add(nativeFontFace);this._document.fonts.add(nativeFontFace);}removeNativeFontFace(nativeFontFace){this.nativeFontFaces.delete(nativeFontFace);this._document.fonts.delete(nativeFontFace);}insertRule(rule){if(!this.styleElement){this.styleElement=this._document.createElement(\"style\");this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);}const styleSheet=this.styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length);}clear(){for(const nativeFontFace of this.nativeFontFaces){this._document.fonts.delete(nativeFontFace);}this.nativeFontFaces.clear();_classPrivateFieldGet(_systemFonts,this).clear();if(this.styleElement){this.styleElement.remove();this.styleElement=null;}}async loadSystemFont(_ref68){let{systemFontInfo:info,_inspectFont}=_ref68;if(!info||_classPrivateFieldGet(_systemFonts,this).has(info.loadedName)){return;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this.disableFontFace,\"loadSystemFont shouldn't be called when `disableFontFace` is set.\");if(this.isFontLoadingAPISupported){const{loadedName,src,style}=info;const fontFace=new FontFace(loadedName,src,style);this.addNativeFontFace(fontFace);try{await fontFace.load();_classPrivateFieldGet(_systemFonts,this).add(loadedName);_inspectFont?.(info);}catch{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);this.removeNativeFontFace(fontFace);}return;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Not implemented: loadSystemFont without the Font Loading API.\");}async bind(font){if(font.attached||font.missingFile&&!font.systemFontInfo){return;}font.attached=true;if(font.systemFontInfo){await this.loadSystemFont(font);return;}if(this.isFontLoadingAPISupported){const nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);try{await nativeFontFace.loaded;}catch(ex){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);font.disableFontFace=true;throw ex;}}return;}const rule=font.createFontFaceRule();if(rule){this.insertRule(rule);if(this.isSyncFontLoadingSupported){return;}await new Promise(resolve=>{const request=this._queueLoadingCallback(resolve);this._prepareFontLoadEvent(font,request);});}}get isFontLoadingAPISupported(){const hasFonts=!!this._document?.fonts;return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"isFontLoadingAPISupported\",hasFonts);}get isSyncFontLoadingSupported(){let supported=false;if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS){supported=true;}else if(typeof navigator!==\"undefined\"&&typeof navigator?.userAgent===\"string\"&&/Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)){supported=true;}return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"isSyncFontLoadingSupported\",supported);}_queueLoadingCallback(callback){function completeRequest(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!request.done,\"completeRequest() cannot be called twice.\");request.done=true;while(loadingRequests.length>0&&loadingRequests[0].done){const otherRequest=loadingRequests.shift();setTimeout(otherRequest.callback,0);}}const{loadingRequests}=this;const request={done:false,complete:completeRequest,callback};loadingRequests.push(request);return request;}get _loadTestFont(){const testFont=atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\"+\"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\"+\"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\"+\"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\"+\"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\"+\"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\"+\"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\"+\"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\"+\"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\"+\"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\"+\"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\"+\"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\"+\"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\"+\"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\"+\"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\"+\"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\"+\"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_loadTestFont\",testFont);}_prepareFontLoadEvent(font,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&0xff;}function spliceString(s,offset,remove,insert){const chunk1=s.substring(0,offset);const chunk2=s.substring(offset+remove);return chunk1+insert+chunk2;}let i,ii;const canvas=this._document.createElement(\"canvas\");canvas.width=1;canvas.height=1;const ctx=canvas.getContext(\"2d\");let called=0;function isFontReady(name,callback){if(++called>30){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Load test font never loaded.\");callback();return;}ctx.font=\"30px \"+name;ctx.fillText(\".\",0,20);const imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return;}setTimeout(isFontReady.bind(null,name,callback));}const loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`;let data=this._loadTestFont;const COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);const CFF_CHECKSUM_OFFSET=16;const XXXX_VALUE=0x58585858;let checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;}if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+\"XXX\",i)|0;}data=spliceString(data,CFF_CHECKSUM_OFFSET,4,(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.string32)(checksum));const url=`url(data:font/opentype;base64,${btoa(data)});`;const rule=`@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;this.insertRule(rule);const div=this._document.createElement(\"div\");div.style.visibility=\"hidden\";div.style.width=div.style.height=\"10px\";div.style.position=\"absolute\";div.style.top=div.style.left=\"0px\";for(const name of[font.loadedName,loadTestFontId]){const span=this._document.createElement(\"span\");span.textContent=\"Hi\";span.style.fontFamily=name;div.append(span);}this._document.body.append(div);isFontReady(loadTestFontId,()=>{div.remove();request.complete();});}}class FontFaceObject{constructor(translatedData,_ref69){let{disableFontFace=false,ignoreErrors=false,inspectFont=null}=_ref69;this.compiledGlyphs=Object.create(null);for(const i in translatedData){this[i]=translatedData[i];}this.disableFontFace=disableFontFace===true;this.ignoreErrors=ignoreErrors===true;this._inspectFont=inspectFont;}createNativeFontFace(){if(!this.data||this.disableFontFace){return null;}let nativeFontFace;if(!this.cssFontInfo){nativeFontFace=new FontFace(this.loadedName,this.data,{});}else{const css={weight:this.cssFontInfo.fontWeight};if(this.cssFontInfo.italicAngle){css.style=`oblique ${this.cssFontInfo.italicAngle}deg`;}nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css);}this._inspectFont?.(this);return nativeFontFace;}createFontFaceRule(){if(!this.data||this.disableFontFace){return null;}const data=(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.bytesToString)(this.data);const url=`url(data:${this.mimetype};base64,${btoa(data)});`;let rule;if(!this.cssFontInfo){rule=`@font-face {font-family:\"${this.loadedName}\";src:${url}}`;}else{let css=`font-weight: ${this.cssFontInfo.fontWeight};`;if(this.cssFontInfo.italicAngle){css+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;}rule=`@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;}this._inspectFont?.(this,url);return rule;}getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==undefined){return this.compiledGlyphs[character];}let cmds;try{cmds=objs.get(this.loadedName+\"_path_\"+character);}catch(ex){if(!this.ignoreErrors){throw ex;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`getPathGenerator - ignoring character: \"${ex}\".`);}if(!Array.isArray(cmds)||cmds.length===0){return this.compiledGlyphs[character]=function(c,size){};}const commands=[];for(let i=0,ii=cmds.length;i<ii;){switch(cmds[i++]){case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.BEZIER_CURVE_TO:{const[a,b,c,d,e,f]=cmds.slice(i,i+6);commands.push(ctx=>ctx.bezierCurveTo(a,b,c,d,e,f));i+=6;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.MOVE_TO:{const[a,b]=cmds.slice(i,i+2);commands.push(ctx=>ctx.moveTo(a,b));i+=2;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.LINE_TO:{const[a,b]=cmds.slice(i,i+2);commands.push(ctx=>ctx.lineTo(a,b));i+=2;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.QUADRATIC_CURVE_TO:{const[a,b,c,d]=cmds.slice(i,i+4);commands.push(ctx=>ctx.quadraticCurveTo(a,b,c,d));i+=4;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.RESTORE:commands.push(ctx=>ctx.restore());break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.SAVE:commands.push(ctx=>ctx.save());break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.SCALE:(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(commands.length===2,\"Scale command is only valid at the third position.\");break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.TRANSFORM:{const[a,b,c,d,e,f]=cmds.slice(i,i+6);commands.push(ctx=>ctx.transform(a,b,c,d,e,f));i+=6;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.TRANSLATE:{const[a,b]=cmds.slice(i,i+2);commands.push(ctx=>ctx.translate(a,b));i+=2;}break;}}return this.compiledGlyphs[character]=function glyphDrawer(ctx,size){commands[0](ctx);commands[1](ctx);ctx.scale(size,-size);for(let i=2,ii=commands.length;i<ii;i++){commands[i](ctx);}};}}/***/}),/***/62:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */Metadata:()=>(/* binding */Metadata)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);var _metadataMap=/*#__PURE__*/new WeakMap();var _data=/*#__PURE__*/new WeakMap();class Metadata{constructor(_ref70){let{parsedData,rawData}=_ref70;_classPrivateFieldInitSpec(this,_metadataMap,void 0);_classPrivateFieldInitSpec(this,_data,void 0);_classPrivateFieldSet(_metadataMap,this,parsedData);_classPrivateFieldSet(_data,this,rawData);}getRaw(){return _classPrivateFieldGet(_data,this);}get(name){return _classPrivateFieldGet(_metadataMap,this).get(name)??null;}getAll(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(_metadataMap,this));}has(name){return _classPrivateFieldGet(_metadataMap,this).has(name);}}/***/}),/***/457:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFNetworkStream:()=>(/* binding */PDFNetworkStream)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(490);const OK_RESPONSE=200;const PARTIAL_CONTENT_RESPONSE=206;function getArrayBuffer(xhr){const data=xhr.response;if(typeof data!==\"string\"){return data;}return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.stringToBytes)(data).buffer;}class NetworkManager{constructor(url){let args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.url=url;this.isHttp=/^https?:/i.test(url);this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null);this.withCredentials=args.withCredentials||false;this.currXhrId=0;this.pendingRequests=Object.create(null);}requestRange(begin,end,listeners){const args={begin,end};for(const prop in listeners){args[prop]=listeners[prop];}return this.request(args);}requestFull(listeners){return this.request(listeners);}request(args){const xhr=new XMLHttpRequest();const xhrId=this.currXhrId++;const pendingRequest=this.pendingRequests[xhrId]={xhr};xhr.open(\"GET\",this.url);xhr.withCredentials=this.withCredentials;for(const property in this.httpHeaders){const value=this.httpHeaders[property];if(value===undefined){continue;}xhr.setRequestHeader(property,value);}if(this.isHttp&&\"begin\"in args&&\"end\"in args){xhr.setRequestHeader(\"Range\",`bytes=${args.begin}-${args.end-1}`);pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE;}else{pendingRequest.expectedStatus=OK_RESPONSE;}xhr.responseType=\"arraybuffer\";if(args.onError){xhr.onerror=function(evt){args.onError(xhr.status);};}xhr.onreadystatechange=this.onStateChange.bind(this,xhrId);xhr.onprogress=this.onProgress.bind(this,xhrId);pendingRequest.onHeadersReceived=args.onHeadersReceived;pendingRequest.onDone=args.onDone;pendingRequest.onError=args.onError;pendingRequest.onProgress=args.onProgress;xhr.send(null);return xhrId;}onProgress(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}pendingRequest.onProgress?.(evt);}onStateChange(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}const xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived){pendingRequest.onHeadersReceived();delete pendingRequest.onHeadersReceived;}if(xhr.readyState!==4){return;}if(!(xhrId in this.pendingRequests)){return;}delete this.pendingRequests[xhrId];if(xhr.status===0&&this.isHttp){pendingRequest.onError?.(xhr.status);return;}const xhrStatus=xhr.status||OK_RESPONSE;const ok_response_on_range_request=xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE;if(!ok_response_on_range_request&&xhrStatus!==pendingRequest.expectedStatus){pendingRequest.onError?.(xhr.status);return;}const chunk=getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){const rangeHeader=xhr.getResponseHeader(\"Content-Range\");const matches=/bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk});}else if(chunk){pendingRequest.onDone({begin:0,chunk});}else{pendingRequest.onError?.(xhr.status);}}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr;}isPendingRequest(xhrId){return xhrId in this.pendingRequests;}abortRequest(xhrId){const xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId];xhr.abort();}}class PDFNetworkStream{constructor(source){this._source=source;this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials});this._rangeChunkSize=source.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[];}_onRangeRequestReaderClosed(reader){const i=this._rangeRequestReaders.indexOf(reader);if(i>=0){this._rangeRequestReaders.splice(i,1);}}getFullReader(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader,\"PDFNetworkStream.getFullReader can only be called once.\");this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source);return this._fullRequestReader;}getRangeReader(begin,end){const reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);reader.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}class PDFNetworkStreamFullRequestReader{constructor(manager,source){this._manager=manager;const args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url;this._fullRequestId=manager.requestFull(args);this._headersReceivedCapability=Promise.withResolvers();this._disableRange=source.disableRange||false;this._contentLength=source.length;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=false;this._isRangeSupported=false;this._cachedChunks=[];this._requests=[];this._done=false;this._storedError=undefined;this._filename=null;this.onProgress=null;}_onHeadersReceived(){const fullRequestXhrId=this._fullRequestId;const fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId);const getResponseHeader=name=>fullRequestXhr.getResponseHeader(name);const{allowRangeRequests,suggestedLength}=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});if(allowRangeRequests){this._isRangeSupported=true;}this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);if(this._isRangeSupported){this._manager.abortRequest(fullRequestXhrId);}this._headersReceivedCapability.resolve();}_onDone(data){if(data){if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:data.chunk,done:false});}else{this._cachedChunks.push(data.chunk);}}this._done=true;if(this._cachedChunks.length>0){return;}for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}_onError(status){this._storedError=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(status,this._url);this._headersReceivedCapability.reject(this._storedError);for(const requestCapability of this._requests){requestCapability.reject(this._storedError);}this._requests.length=0;this._cachedChunks.length=0;}_onProgress(evt){this.onProgress?.({loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength});}get filename(){return this._filename;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}get contentLength(){return this._contentLength;}get headersReady(){return this._headersReceivedCapability.promise;}async read(){if(this._storedError){throw this._storedError;}if(this._cachedChunks.length>0){const chunk=this._cachedChunks.shift();return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;this._headersReceivedCapability.reject(reason);for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;if(this._manager.isPendingRequest(this._fullRequestId)){this._manager.abortRequest(this._fullRequestId);}this._fullRequestReader=null;}}class PDFNetworkStreamRangeRequestReader{constructor(manager,begin,end){this._manager=manager;const args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url;this._requestId=manager.requestRange(begin,end,args);this._requests=[];this._queuedChunk=null;this._done=false;this._storedError=undefined;this.onProgress=null;this.onClosed=null;}_close(){this.onClosed?.(this);}_onDone(data){const chunk=data.chunk;if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunk=chunk;}this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;this._close();}_onError(status){this._storedError=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(status,this._url);for(const requestCapability of this._requests){requestCapability.reject(this._storedError);}this._requests.length=0;this._queuedChunk=null;}_onProgress(evt){if(!this.isStreamingSupported){this.onProgress?.({loaded:evt.loaded});}}get isStreamingSupported(){return false;}async read(){if(this._storedError){throw this._storedError;}if(this._queuedChunk!==null){const chunk=this._queuedChunk;this._queuedChunk=null;return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;if(this._manager.isPendingRequest(this._requestId)){this._manager.abortRequest(this._requestId);}this._close();}}/***/}),/***/490:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{// EXPORTS\n__webpack_require__.d(__webpack_exports__,{createResponseStatusError:()=>(/* binding */createResponseStatusError),extractFilenameFromHeader:()=>(/* binding */extractFilenameFromHeader),validateRangeRequestCapabilities:()=>(/* binding */validateRangeRequestCapabilities),validateResponseStatus:()=>(/* binding */validateResponseStatus)});// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);;// CONCATENATED MODULE: ./src/display/content_disposition.js\nfunction getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=true;let tmp=toParamRegExp(\"filename\\\\*\",\"i\").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);filename=unescape(filename);filename=rfc5987decode(filename);filename=rfc2047decode(filename);return fixupEncoding(filename);}tmp=rfc2231getparam(contentDisposition);if(tmp){const filename=rfc2047decode(tmp);return fixupEncoding(filename);}tmp=toParamRegExp(\"filename\",\"i\").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);filename=rfc2047decode(filename);return fixupEncoding(filename);}function toParamRegExp(attributePattern,flags){return new RegExp(\"(?:^|;)\\\\s*\"+attributePattern+\"\\\\s*=\\\\s*\"+\"(\"+'[^\";\\\\s][^;\\\\s]*'+\"|\"+'\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?'+\")\",flags);}function textdecode(encoding,value){if(encoding){if(!/^[\\x00-\\xFF]+$/.test(value)){return value;}try{const decoder=new TextDecoder(encoding,{fatal:true});const buffer=(0,util.stringToBytes)(value);value=decoder.decode(buffer);needsEncodingFixup=false;}catch{}}return value;}function fixupEncoding(value){if(needsEncodingFixup&&/[\\x80-\\xff]/.test(value)){value=textdecode(\"utf-8\",value);if(needsEncodingFixup){value=textdecode(\"iso-8859-1\",value);}}return value;}function rfc2231getparam(contentDispositionStr){const matches=[];let match;const iter=toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\",\"ig\");while((match=iter.exec(contentDispositionStr))!==null){let[,n,quot,part]=match;n=parseInt(n,10);if(n in matches){if(n===0){break;}continue;}matches[n]=[quot,part];}const parts=[];for(let n=0;n<matches.length;++n){if(!(n in matches)){break;}let[quot,part]=matches[n];part=rfc2616unquote(part);if(quot){part=unescape(part);if(n===0){part=rfc5987decode(part);}}parts.push(part);}return parts.join(\"\");}function rfc2616unquote(value){if(value.startsWith('\"')){const parts=value.slice(1).split('\\\\\"');for(let i=0;i<parts.length;++i){const quotindex=parts[i].indexOf('\"');if(quotindex!==-1){parts[i]=parts[i].slice(0,quotindex);parts.length=i+1;}parts[i]=parts[i].replaceAll(/\\\\(.)/g,\"$1\");}value=parts.join('\"');}return value;}function rfc5987decode(extvalue){const encodingend=extvalue.indexOf(\"'\");if(encodingend===-1){return extvalue;}const encoding=extvalue.slice(0,encodingend);const langvalue=extvalue.slice(encodingend+1);const value=langvalue.replace(/^[^']*'/,\"\");return textdecode(encoding,value);}function rfc2047decode(value){if(!value.startsWith(\"=?\")||/[\\x00-\\x19\\x80-\\xff]/.test(value)){return value;}return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,function(matches,charset,encoding,text){if(encoding===\"q\"||encoding===\"Q\"){text=text.replaceAll(\"_\",\" \");text=text.replaceAll(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16));});return textdecode(charset,text);}try{text=atob(text);}catch{}return textdecode(charset,text);});}return\"\";}// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);;// CONCATENATED MODULE: ./src/display/network_utils.js\nfunction validateRangeRequestCapabilities(_ref71){let{getResponseHeader,isHttp,rangeChunkSize,disableRange}=_ref71;const returnValues={allowRangeRequests:false,suggestedLength:undefined};const length=parseInt(getResponseHeader(\"Content-Length\"),10);if(!Number.isInteger(length)){return returnValues;}returnValues.suggestedLength=length;if(length<=2*rangeChunkSize){return returnValues;}if(disableRange||!isHttp){return returnValues;}if(getResponseHeader(\"Accept-Ranges\")!==\"bytes\"){return returnValues;}const contentEncoding=getResponseHeader(\"Content-Encoding\")||\"identity\";if(contentEncoding!==\"identity\"){return returnValues;}returnValues.allowRangeRequests=true;return returnValues;}function extractFilenameFromHeader(getResponseHeader){const contentDisposition=getResponseHeader(\"Content-Disposition\");if(contentDisposition){let filename=getFilenameFromContentDispositionHeader(contentDisposition);if(filename.includes(\"%\")){try{filename=decodeURIComponent(filename);}catch{}}if((0,display_utils.isPdfFile)(filename)){return filename;}}return null;}function createResponseStatusError(status,url){if(status===404||status===0&&url.startsWith(\"file:\")){return new util.MissingPDFException('Missing PDF \"'+url+'\".');}return new util.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`,status);}function validateResponseStatus(status){return status===200||status===206;}/***/}),/***/786:(/***/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFNodeStream:()=>(/* binding */PDFNodeStream)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(490);let fs,http,https,url;if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS){fs=await import(/*webpackIgnore: true*/\"fs\");http=await import(/*webpackIgnore: true*/\"http\");https=await import(/*webpackIgnore: true*/\"https\");url=await import(/*webpackIgnore: true*/\"url\");}const fileUriRegex=/^file:\\/\\/\\/[a-zA-Z]:\\//;function parseUrl(sourceUrl){const parsedUrl=url.parse(sourceUrl);if(parsedUrl.protocol===\"file:\"||parsedUrl.host){return parsedUrl;}if(/^[a-z]:[/\\\\]/i.test(sourceUrl)){return url.parse(`file:///${sourceUrl}`);}if(!parsedUrl.host){parsedUrl.protocol=\"file:\";}return parsedUrl;}class PDFNodeStream{constructor(source){this.source=source;this.url=parseUrl(source.url);this.isHttp=this.url.protocol===\"http:\"||this.url.protocol===\"https:\";this.isFsUrl=this.url.protocol===\"file:\";this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}getFullReader(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader,\"PDFNodeStream.getFullReader can only be called once.\");this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this);return this._fullRequestReader;}getRangeReader(start,end){if(end<=this._progressiveDataLength){return null;}const rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);this._rangeRequestReaders.push(rangeReader);return rangeReader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}class BaseFullReader{constructor(stream){this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;const source=stream.source;this._contentLength=source.length;this._loaded=0;this._filename=null;this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._readableStream=null;this._readCapability=Promise.withResolvers();this._headersCapability=Promise.withResolvers();}get headersReady(){return this._headersCapability.promise;}get filename(){return this._filename;}get contentLength(){return this._contentLength;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;if(this._done){return{value:undefined,done:true};}if(this._storedError){throw this._storedError;}const chunk=this._readableStream.read();if(chunk===null){this._readCapability=Promise.withResolvers();return this.read();}this._loaded+=chunk.length;this.onProgress?.({loaded:this._loaded,total:this._contentLength});const buffer=new Uint8Array(chunk).buffer;return{value:buffer,done:false};}cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}_error(reason){this._storedError=reason;this._readCapability.resolve();}_setReadableStream(readableStream){this._readableStream=readableStream;readableStream.on(\"readable\",()=>{this._readCapability.resolve();});readableStream.on(\"end\",()=>{readableStream.destroy();this._done=true;this._readCapability.resolve();});readableStream.on(\"error\",reason=>{this._error(reason);});if(!this._isStreamingSupported&&this._isRangeSupported){this._error(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"streaming is disabled\"));}if(this._storedError){this._readableStream.destroy(this._storedError);}}}class BaseRangeReader{constructor(stream){this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=Promise.withResolvers();const source=stream.source;this._isStreamingSupported=!source.disableStream;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;if(this._done){return{value:undefined,done:true};}if(this._storedError){throw this._storedError;}const chunk=this._readableStream.read();if(chunk===null){this._readCapability=Promise.withResolvers();return this.read();}this._loaded+=chunk.length;this.onProgress?.({loaded:this._loaded});const buffer=new Uint8Array(chunk).buffer;return{value:buffer,done:false};}cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}_error(reason){this._storedError=reason;this._readCapability.resolve();}_setReadableStream(readableStream){this._readableStream=readableStream;readableStream.on(\"readable\",()=>{this._readCapability.resolve();});readableStream.on(\"end\",()=>{readableStream.destroy();this._done=true;this._readCapability.resolve();});readableStream.on(\"error\",reason=>{this._error(reason);});if(this._storedError){this._readableStream.destroy(this._storedError);}}}function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:\"GET\",headers};}class PDFNodeStreamFullReader extends BaseFullReader{constructor(stream){super(stream);const handleResponse=response=>{if(response.statusCode===404){const error=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(`Missing PDF \"${this._url}\".`);this._storedError=error;this._headersCapability.reject(error);return;}this._headersCapability.resolve();this._setReadableStream(response);const getResponseHeader=name=>this._readableStream.headers[name.toLowerCase()];const{allowRangeRequests,suggestedLength}=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests;this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);};this._request=null;if(this._url.protocol===\"http:\"){this._request=http.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse);}else{this._request=https.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse);}this._request.on(\"error\",reason=>{this._storedError=reason;this._headersCapability.reject(reason);});this._request.end();}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream);this._httpHeaders={};for(const property in stream.httpHeaders){const value=stream.httpHeaders[property];if(value===undefined){continue;}this._httpHeaders[property]=value;}this._httpHeaders.Range=`bytes=${start}-${end-1}`;const handleResponse=response=>{if(response.statusCode===404){const error=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(`Missing PDF \"${this._url}\".`);this._storedError=error;return;}this._setReadableStream(response);};this._request=null;if(this._url.protocol===\"http:\"){this._request=http.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);}else{this._request=https.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);}this._request.on(\"error\",reason=>{this._storedError=reason;});this._request.end();}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);if(fileUriRegex.test(this._url.href)){path=path.replace(/^\\//,\"\");}fs.promises.lstat(path).then(stat=>{this._contentLength=stat.size;this._setReadableStream(fs.createReadStream(path));this._headersCapability.resolve();},error=>{if(error.code===\"ENOENT\"){error=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(`Missing PDF \"${path}\".`);}this._storedError=error;this._headersCapability.reject(error);});}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream);let path=decodeURIComponent(this._url.path);if(fileUriRegex.test(this._url.href)){path=path.replace(/^\\//,\"\");}this._setReadableStream(fs.createReadStream(path,{start,end:end-1}));}}__webpack_async_result__();}catch(e){__webpack_async_result__(e);}},1);/***/}),/***/573:(/***/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */NodeCMapReaderFactory:()=>(/* binding */NodeCMapReaderFactory),/* harmony export */NodeCanvasFactory:()=>(/* binding */NodeCanvasFactory),/* harmony export */NodeFilterFactory:()=>(/* binding */NodeFilterFactory),/* harmony export */NodeStandardFontDataFactory:()=>(/* binding */NodeStandardFontDataFactory)/* harmony export */});/* harmony import */var _base_factory_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(583);/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(292);let fs,canvas,path2d;if(_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.isNodeJS){fs=await import(/*webpackIgnore: true*/\"fs\");try{canvas=await import(/*webpackIgnore: true*/\"canvas\");}catch{}try{path2d=await import(/*webpackIgnore: true*/\"path2d\");}catch{}}const fetchData=function(url){return fs.promises.readFile(url).then(data=>new Uint8Array(data));};class NodeFilterFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseFilterFactory{}class NodeCanvasFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCanvasFactory{_createCanvas(width,height){return canvas.createCanvas(width,height);}}class NodeCMapReaderFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url).then(data=>({cMapData:data,compressionType}));}}class NodeStandardFontDataFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url);}}__webpack_async_result__();}catch(e){__webpack_async_result__(e);}},1);/***/}),/***/626:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */OptionalContentConfig:()=>(/* binding */OptionalContentConfig)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(651);const INTERNAL=Symbol(\"INTERNAL\");var _isDisplay=/*#__PURE__*/new WeakMap();var _isPrint=/*#__PURE__*/new WeakMap();var _userSet=/*#__PURE__*/new WeakMap();var _visible=/*#__PURE__*/new WeakMap();class OptionalContentGroup{constructor(renderingIntent,_ref72){let{name,intent,usage}=_ref72;_classPrivateFieldInitSpec(this,_isDisplay,false);_classPrivateFieldInitSpec(this,_isPrint,false);_classPrivateFieldInitSpec(this,_userSet,false);_classPrivateFieldInitSpec(this,_visible,true);_classPrivateFieldSet(_isDisplay,this,!!(renderingIntent&_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.DISPLAY));_classPrivateFieldSet(_isPrint,this,!!(renderingIntent&_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT));this.name=name;this.intent=intent;this.usage=usage;}get visible(){if(_classPrivateFieldGet(_userSet,this)){return _classPrivateFieldGet(_visible,this);}if(!_classPrivateFieldGet(_visible,this)){return false;}const{print,view}=this.usage;if(_classPrivateFieldGet(_isDisplay,this)){return view?.viewState!==\"OFF\";}else if(_classPrivateFieldGet(_isPrint,this)){return print?.printState!==\"OFF\";}return true;}_setVisible(internal,visible){let userSet=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(internal!==INTERNAL){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Internal method `_setVisible` called.\");}_classPrivateFieldSet(_userSet,this,userSet);_classPrivateFieldSet(_visible,this,visible);}}var _cachedGetHash=/*#__PURE__*/new WeakMap();var _groups=/*#__PURE__*/new WeakMap();var _initialHash=/*#__PURE__*/new WeakMap();var _order=/*#__PURE__*/new WeakMap();var _OptionalContentConfig_brand=/*#__PURE__*/new WeakSet();class OptionalContentConfig{constructor(data){let renderingIntent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.DISPLAY;_classPrivateMethodInitSpec(this,_OptionalContentConfig_brand);_classPrivateFieldInitSpec(this,_cachedGetHash,null);_classPrivateFieldInitSpec(this,_groups,new Map());_classPrivateFieldInitSpec(this,_initialHash,null);_classPrivateFieldInitSpec(this,_order,null);this.renderingIntent=renderingIntent;this.name=null;this.creator=null;if(data===null){return;}this.name=data.name;this.creator=data.creator;_classPrivateFieldSet(_order,this,data.order);for(const group of data.groups){_classPrivateFieldGet(_groups,this).set(group.id,new OptionalContentGroup(renderingIntent,group));}if(data.baseState===\"OFF\"){for(const group of _classPrivateFieldGet(_groups,this).values()){group._setVisible(INTERNAL,false);}}for(const on of data.on){_classPrivateFieldGet(_groups,this).get(on)._setVisible(INTERNAL,true);}for(const off of data.off){_classPrivateFieldGet(_groups,this).get(off)._setVisible(INTERNAL,false);}_classPrivateFieldSet(_initialHash,this,this.getHash());}isVisible(group){if(_classPrivateFieldGet(_groups,this).size===0){return true;}if(!group){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.info)(\"Optional content group not defined.\");return true;}if(group.type===\"OCG\"){if(!_classPrivateFieldGet(_groups,this).has(group.id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${group.id}`);return true;}return _classPrivateFieldGet(_groups,this).get(group.id).visible;}else if(group.type===\"OCMD\"){if(group.expression){return _assertClassBrand(_OptionalContentConfig_brand,this,_evaluateVisibilityExpression).call(this,group.expression);}if(!group.policy||group.policy===\"AnyOn\"){for(const id of group.ids){if(!_classPrivateFieldGet(_groups,this).has(id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return true;}if(_classPrivateFieldGet(_groups,this).get(id).visible){return true;}}return false;}else if(group.policy===\"AllOn\"){for(const id of group.ids){if(!_classPrivateFieldGet(_groups,this).has(id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return true;}if(!_classPrivateFieldGet(_groups,this).get(id).visible){return false;}}return true;}else if(group.policy===\"AnyOff\"){for(const id of group.ids){if(!_classPrivateFieldGet(_groups,this).has(id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return true;}if(!_classPrivateFieldGet(_groups,this).get(id).visible){return true;}}return false;}else if(group.policy===\"AllOff\"){for(const id of group.ids){if(!_classPrivateFieldGet(_groups,this).has(id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return true;}if(_classPrivateFieldGet(_groups,this).get(id).visible){return false;}}return true;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Unknown optional content policy ${group.policy}.`);return true;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Unknown group type ${group.type}.`);return true;}setVisibility(id){let visible=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const group=_classPrivateFieldGet(_groups,this).get(id);if(!group){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return;}group._setVisible(INTERNAL,!!visible,true);_classPrivateFieldSet(_cachedGetHash,this,null);}setOCGState(_ref73){let{state,preserveRB}=_ref73;let operator;for(const elem of state){switch(elem){case\"ON\":case\"OFF\":case\"Toggle\":operator=elem;continue;}const group=_classPrivateFieldGet(_groups,this).get(elem);if(!group){continue;}switch(operator){case\"ON\":group._setVisible(INTERNAL,true);break;case\"OFF\":group._setVisible(INTERNAL,false);break;case\"Toggle\":group._setVisible(INTERNAL,!group.visible);break;}}_classPrivateFieldSet(_cachedGetHash,this,null);}get hasInitialVisibility(){return _classPrivateFieldGet(_initialHash,this)===null||this.getHash()===_classPrivateFieldGet(_initialHash,this);}getOrder(){if(!_classPrivateFieldGet(_groups,this).size){return null;}if(_classPrivateFieldGet(_order,this)){return _classPrivateFieldGet(_order,this).slice();}return[..._classPrivateFieldGet(_groups,this).keys()];}getGroups(){return _classPrivateFieldGet(_groups,this).size>0?(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(_groups,this)):null;}getGroup(id){return _classPrivateFieldGet(_groups,this).get(id)||null;}getHash(){if(_classPrivateFieldGet(_cachedGetHash,this)!==null){return _classPrivateFieldGet(_cachedGetHash,this);}const hash=new _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__.MurmurHash3_64();for(const[id,group]of _classPrivateFieldGet(_groups,this)){hash.update(`${id}:${group.visible}`);}return _classPrivateFieldSet(_cachedGetHash,this,hash.hexdigest());}}/***/function _evaluateVisibilityExpression(array){const length=array.length;if(length<2){return true;}const operator=array[0];for(let i=1;i<length;i++){const element=array[i];let state;if(Array.isArray(element)){state=_assertClassBrand(_OptionalContentConfig_brand,this,_evaluateVisibilityExpression).call(this,element);}else if(_classPrivateFieldGet(_groups,this).has(element)){state=_classPrivateFieldGet(_groups,this).get(element).visible;}else{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${element}`);return true;}switch(operator){case\"And\":if(!state){return false;}break;case\"Or\":if(state){return true;}break;case\"Not\":return!state;default:return true;}}return operator===\"And\";}}),/***/814:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */cleanupTextLayer:()=>(/* binding */cleanupTextLayer),/* harmony export */renderTextLayer:()=>(/* binding */renderTextLayer),/* harmony export */updateTextLayer:()=>(/* binding */updateTextLayer)/* harmony export */});/* unused harmony export TextLayerRenderTask */ /* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(419);const MAX_TEXT_DIVS_TO_RENDER=100000;const DEFAULT_FONT_SIZE=30;const DEFAULT_FONT_ASCENT=0.8;const ascentCache=new Map();let _canvasContext=null;function getCtx(){if(!_canvasContext){const canvas=document.createElement(\"canvas\");canvas.className=\"hiddenCanvasElement\";document.body.append(canvas);_canvasContext=canvas.getContext(\"2d\",{alpha:false});}return _canvasContext;}function cleanupTextLayer(){_canvasContext?.canvas.remove();_canvasContext=null;}function getAscent(fontFamily){const cachedAscent=ascentCache.get(fontFamily);if(cachedAscent){return cachedAscent;}const ctx=getCtx();const savedFont=ctx.font;ctx.canvas.width=ctx.canvas.height=DEFAULT_FONT_SIZE;ctx.font=`${DEFAULT_FONT_SIZE}px ${fontFamily}`;const metrics=ctx.measureText(\"\");let ascent=metrics.fontBoundingBoxAscent;let descent=Math.abs(metrics.fontBoundingBoxDescent);if(ascent){const ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,ratio);ctx.canvas.width=ctx.canvas.height=0;ctx.font=savedFont;return ratio;}ctx.strokeStyle=\"red\";ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText(\"g\",0,0);let pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(let i=pixels.length-1-3;i>=0;i-=4){if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break;}}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText(\"A\",0,DEFAULT_FONT_SIZE);pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;ascent=0;for(let i=0,ii=pixels.length;i<ii;i+=4){if(pixels[i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(i/4/DEFAULT_FONT_SIZE);break;}}ctx.canvas.width=ctx.canvas.height=0;ctx.font=savedFont;if(ascent){const ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,ratio);return ratio;}ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT);return DEFAULT_FONT_ASCENT;}function appendText(task,geom,styles){const textDiv=document.createElement(\"span\");const textDivProperties={angle:0,canvasWidth:0,hasText:geom.str!==\"\",hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);const tx=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util.transform(task._transform,geom.transform);let angle=Math.atan2(tx[1],tx[0]);const style=styles[geom.fontName];if(style.vertical){angle+=Math.PI/2;}const fontFamily=task._fontInspectorEnabled&&style.fontSubstitution||style.fontFamily;const fontHeight=Math.hypot(tx[2],tx[3]);const fontAscent=fontHeight*getAscent(fontFamily);let left,top;if(angle===0){left=tx[4];top=tx[5]-fontAscent;}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle);}const scaleFactorStr=\"calc(var(--scale-factor)*\";const divStyle=textDiv.style;if(task._container===task._rootContainer){divStyle.left=`${(100*left/task._pageWidth).toFixed(2)}%`;divStyle.top=`${(100*top/task._pageHeight).toFixed(2)}%`;}else{divStyle.left=`${scaleFactorStr}${left.toFixed(2)}px)`;divStyle.top=`${scaleFactorStr}${top.toFixed(2)}px)`;}divStyle.fontSize=`${scaleFactorStr}${fontHeight.toFixed(2)}px)`;divStyle.fontFamily=fontFamily;textDivProperties.fontSize=fontHeight;textDiv.setAttribute(\"role\",\"presentation\");textDiv.textContent=geom.str;textDiv.dir=geom.dir;if(task._fontInspectorEnabled){textDiv.dataset.fontName=style.fontSubstitutionLoadedName||geom.fontName;}if(angle!==0){textDivProperties.angle=angle*(180/Math.PI);}let shouldScaleText=false;if(geom.str.length>1){shouldScaleText=true;}else if(geom.str!==\" \"&&geom.transform[0]!==geom.transform[3]){const absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);if(absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5){shouldScaleText=true;}}if(shouldScaleText){textDivProperties.canvasWidth=style.vertical?geom.height:geom.width;}task._textDivProperties.set(textDiv,textDivProperties);if(task._isReadableStream){task._layoutText(textDiv);}}function layout(params){const{div,scale,properties,ctx,prevFontSize,prevFontFamily}=params;const{style}=div;let transform=\"\";if(properties.canvasWidth!==0&&properties.hasText){const{fontFamily}=style;const{canvasWidth,fontSize}=properties;if(prevFontSize!==fontSize||prevFontFamily!==fontFamily){ctx.font=`${fontSize*scale}px ${fontFamily}`;params.prevFontSize=fontSize;params.prevFontFamily=fontFamily;}const{width}=ctx.measureText(div.textContent);if(width>0){transform=`scaleX(${canvasWidth*scale/width})`;}}if(properties.angle!==0){transform=`rotate(${properties.angle}deg) ${transform}`;}if(transform.length>0){style.transform=transform;}}function render(task){if(task._canceled){return;}const textDivs=task._textDivs;const capability=task._capability;const textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){capability.resolve();return;}if(!task._isReadableStream){for(const textDiv of textDivs){task._layoutText(textDiv);}}capability.resolve();}class TextLayerRenderTask{constructor(_ref74){let{textContentSource,container,viewport,textDivs,textDivProperties,textContentItemsStr}=_ref74;this._textContentSource=textContentSource;this._isReadableStream=textContentSource instanceof ReadableStream;this._container=this._rootContainer=container;this._textDivs=textDivs||[];this._textContentItemsStr=textContentItemsStr||[];this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled;this._reader=null;this._textDivProperties=textDivProperties||new WeakMap();this._canceled=false;this._capability=Promise.withResolvers();this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:getCtx()};const{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;this._transform=[1,0,0,-1,-pageX,pageY+pageHeight];this._pageWidth=pageWidth;this._pageHeight=pageHeight;(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.setLayerDimensions)(container,viewport);this._capability.promise.finally(()=>{this._layoutTextParams=null;}).catch(()=>{});}get promise(){return this._capability.promise;}cancel(){this._canceled=true;if(this._reader){this._reader.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"TextLayer task cancelled.\")).catch(()=>{});this._reader=null;}this._capability.reject(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"TextLayer task cancelled.\"));}_processItems(items,styleCache){for(const item of items){if(item.str===undefined){if(item.type===\"beginMarkedContentProps\"||item.type===\"beginMarkedContent\"){const parent=this._container;this._container=document.createElement(\"span\");this._container.classList.add(\"markedContent\");if(item.id!==null){this._container.setAttribute(\"id\",`${item.id}`);}parent.append(this._container);}else if(item.type===\"endMarkedContent\"){this._container=this._container.parentNode;}continue;}this._textContentItemsStr.push(item.str);appendText(this,item,styleCache);}}_layoutText(textDiv){const textDivProperties=this._layoutTextParams.properties=this._textDivProperties.get(textDiv);this._layoutTextParams.div=textDiv;layout(this._layoutTextParams);if(textDivProperties.hasText){this._container.append(textDiv);}if(textDivProperties.hasEOL){const br=document.createElement(\"br\");br.setAttribute(\"role\",\"presentation\");this._container.append(br);}}_render(){const{promise,resolve,reject}=Promise.withResolvers();let styleCache=Object.create(null);if(this._isReadableStream){const pump=()=>{this._reader.read().then(_ref75=>{let{value,done}=_ref75;if(done){resolve();return;}Object.assign(styleCache,value.styles);this._processItems(value.items,styleCache);pump();},reject);};this._reader=this._textContentSource.getReader();pump();}else if(this._textContentSource){const{items,styles}=this._textContentSource;this._processItems(items,styles);resolve();}else{throw new Error('No \"textContentSource\" parameter specified.');}promise.then(()=>{styleCache=null;render(this);},this._capability.reject);}}function renderTextLayer(params){const task=new TextLayerRenderTask(params);task._render();return task;}function updateTextLayer(_ref76){let{container,viewport,textDivs,textDivProperties,mustRotate=true,mustRescale=true}=_ref76;if(mustRotate){(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.setLayerDimensions)(container,{rotation:viewport.rotation});}if(mustRescale){const ctx=getCtx();const scale=viewport.scale*(globalThis.devicePixelRatio||1);const params={prevFontSize:null,prevFontFamily:null,div:null,scale,properties:null,ctx};for(const div of textDivs){params.properties=textDivProperties.get(div);params.div=div;layout(params);}}}/***/}),/***/585:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFDataTransportStream:()=>(/* binding */PDFDataTransportStream)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(419);class PDFDataTransportStream{constructor(pdfDataRangeTransport,_ref77){let{disableRange=false,disableStream=false}=_ref77;(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');const{length,initialData,progressiveDone,contentDispositionFilename}=pdfDataRangeTransport;this._queuedChunks=[];this._progressiveDone=progressiveDone;this._contentDispositionFilename=contentDispositionFilename;if(initialData?.length>0){const buffer=initialData instanceof Uint8Array&&initialData.byteLength===initialData.buffer.byteLength?initialData.buffer:new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer);}this._pdfDataRangeTransport=pdfDataRangeTransport;this._isStreamingSupported=!disableStream;this._isRangeSupported=!disableRange;this._contentLength=length;this._fullRequestReader=null;this._rangeReaders=[];pdfDataRangeTransport.addRangeListener((begin,chunk)=>{this._onReceiveData({begin,chunk});});pdfDataRangeTransport.addProgressListener((loaded,total)=>{this._onProgress({loaded,total});});pdfDataRangeTransport.addProgressiveReadListener(chunk=>{this._onReceiveData({chunk});});pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone();});pdfDataRangeTransport.transportReady();}_onReceiveData(_ref78){let{begin,chunk}=_ref78;const buffer=chunk instanceof Uint8Array&&chunk.byteLength===chunk.buffer.byteLength?chunk.buffer:new Uint8Array(chunk).buffer;if(begin===undefined){if(this._fullRequestReader){this._fullRequestReader._enqueue(buffer);}else{this._queuedChunks.push(buffer);}}else{const found=this._rangeReaders.some(function(rangeReader){if(rangeReader._begin!==begin){return false;}rangeReader._enqueue(buffer);return true;});(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(found,\"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}_onProgress(evt){if(evt.total===undefined){this._rangeReaders[0]?.onProgress?.({loaded:evt.loaded});}else{this._fullRequestReader?.onProgress?.({loaded:evt.loaded,total:evt.total});}}_onProgressiveDone(){this._fullRequestReader?.progressiveDone();this._progressiveDone=true;}_removeRangeReader(reader){const i=this._rangeReaders.indexOf(reader);if(i>=0){this._rangeReaders.splice(i,1);}}getFullReader(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader,\"PDFDataTransportStream.getFullReader can only be called once.\");const queuedChunks=this._queuedChunks;this._queuedChunks=null;return new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename);}getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}const reader=new PDFDataTransportStreamRangeReader(this,begin,end);this._pdfDataRangeTransport.requestDataRange(begin,end);this._rangeReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeReaders.slice(0)){reader.cancel(reason);}this._pdfDataRangeTransport.abort();}}class PDFDataTransportStreamReader{constructor(stream,queuedChunks){let progressiveDone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let contentDispositionFilename=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;this._stream=stream;this._done=progressiveDone||false;this._filename=(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null;this._queuedChunks=queuedChunks||[];this._loaded=0;for(const chunk of this._queuedChunks){this._loaded+=chunk.byteLength;}this._requests=[];this._headersReady=Promise.resolve();stream._fullRequestReader=this;this.onProgress=null;}_enqueue(chunk){if(this._done){return;}if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunks.push(chunk);}this._loaded+=chunk.byteLength;}get headersReady(){return this._headersReady;}get filename(){return this._filename;}get isRangeSupported(){return this._stream._isRangeSupported;}get isStreamingSupported(){return this._stream._isStreamingSupported;}get contentLength(){return this._stream._contentLength;}async read(){if(this._queuedChunks.length>0){const chunk=this._queuedChunks.shift();return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}progressiveDone(){if(this._done){return;}this._done=true;}}class PDFDataTransportStreamRangeReader{constructor(stream,begin,end){this._stream=stream;this._begin=begin;this._end=end;this._queuedChunk=null;this._requests=[];this._done=false;this.onProgress=null;}_enqueue(chunk){if(this._done){return;}if(this._requests.length===0){this._queuedChunk=chunk;}else{const requestsCapability=this._requests.shift();requestsCapability.resolve({value:chunk,done:false});for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}this._done=true;this._stream._removeRangeReader(this);}get isStreamingSupported(){return false;}async read(){if(this._queuedChunk){const chunk=this._queuedChunk;this._queuedChunk=null;return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;this._stream._removeRangeReader(this);}}/***/}),/***/164:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */GlobalWorkerOptions:()=>(/* binding */GlobalWorkerOptions)/* harmony export */});class GlobalWorkerOptions{static get workerPort(){return _assertClassBrand(GlobalWorkerOptions,this,_port)._;}static set workerPort(val){if(!(typeof Worker!==\"undefined\"&&val instanceof Worker)&&val!==null){throw new Error(\"Invalid `workerPort` type.\");}_port._=_assertClassBrand(GlobalWorkerOptions,this,val);}static get workerSrc(){return _assertClassBrand(GlobalWorkerOptions,this,_src)._;}static set workerSrc(val){if(typeof val!==\"string\"){throw new Error(\"Invalid `workerSrc` type.\");}_src._=_assertClassBrand(GlobalWorkerOptions,this,val);}}/***/var _port={_:null};var _src={_:\"\"};}),/***/284:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */XfaLayer:()=>(/* binding */XfaLayer)/* harmony export */});/* harmony import */var _xfa_text_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(50);class XfaLayer{static setupStorage(html,id,element,storage,intent){const storedData=storage.getValue(id,{value:null});switch(element.name){case\"textarea\":if(storedData.value!==null){html.textContent=storedData.value;}if(intent===\"print\"){break;}html.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});});break;case\"input\":if(element.attributes.type===\"radio\"||element.attributes.type===\"checkbox\"){if(storedData.value===element.attributes.xfaOn){html.setAttribute(\"checked\",true);}else if(storedData.value===element.attributes.xfaOff){html.removeAttribute(\"checked\");}if(intent===\"print\"){break;}html.addEventListener(\"change\",event=>{storage.setValue(id,{value:event.target.checked?event.target.getAttribute(\"xfaOn\"):event.target.getAttribute(\"xfaOff\")});});}else{if(storedData.value!==null){html.setAttribute(\"value\",storedData.value);}if(intent===\"print\"){break;}html.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});});}break;case\"select\":if(storedData.value!==null){html.setAttribute(\"value\",storedData.value);for(const option of element.children){if(option.attributes.value===storedData.value){option.attributes.selected=true;}else if(option.attributes.hasOwnProperty(\"selected\")){delete option.attributes.selected;}}}html.addEventListener(\"input\",event=>{const options=event.target.options;const value=options.selectedIndex===-1?\"\":options[options.selectedIndex].value;storage.setValue(id,{value});});break;}}static setAttributes(_ref79){let{html,element,storage=null,intent,linkService}=_ref79;const{attributes}=element;const isHTMLAnchorElement=html instanceof HTMLAnchorElement;if(attributes.type===\"radio\"){attributes.name=`${attributes.name}-${intent}`;}for(const[key,value]of Object.entries(attributes)){if(value===null||value===undefined){continue;}switch(key){case\"class\":if(value.length){html.setAttribute(key,value.join(\" \"));}break;case\"dataId\":break;case\"id\":html.setAttribute(\"data-element-id\",value);break;case\"style\":Object.assign(html.style,value);break;case\"textContent\":html.textContent=value;break;default:if(!isHTMLAnchorElement||key!==\"href\"&&key!==\"newWindow\"){html.setAttribute(key,value);}}}if(isHTMLAnchorElement){linkService.addLinkAttributes(html,attributes.href,attributes.newWindow);}if(storage&&attributes.dataId){this.setupStorage(html,attributes.dataId,element,storage);}}static render(parameters){const storage=parameters.annotationStorage;const linkService=parameters.linkService;const root=parameters.xfaHtml;const intent=parameters.intent||\"display\";const rootHtml=document.createElement(root.name);if(root.attributes){this.setAttributes({html:rootHtml,element:root,intent,linkService});}const isNotForRichText=intent!==\"richText\";const rootDiv=parameters.div;rootDiv.append(rootHtml);if(parameters.viewport){const transform=`matrix(${parameters.viewport.transform.join(\",\")})`;rootDiv.style.transform=transform;}if(isNotForRichText){rootDiv.setAttribute(\"class\",\"xfaLayer xfaFont\");}const textDivs=[];if(root.children.length===0){if(root.value){const node=document.createTextNode(root.value);rootHtml.append(node);if(isNotForRichText&&_xfa_text_js__WEBPACK_IMPORTED_MODULE_0__.XfaText.shouldBuildText(root.name)){textDivs.push(node);}}return{textDivs};}const stack=[[root,-1,rootHtml]];while(stack.length>0){const[parent,i,html]=stack.at(-1);if(i+1===parent.children.length){stack.pop();continue;}const child=parent.children[++stack.at(-1)[1]];if(child===null){continue;}const{name}=child;if(name===\"#text\"){const node=document.createTextNode(child.value);textDivs.push(node);html.append(node);continue;}const childHtml=child?.attributes?.xmlns?document.createElementNS(child.attributes.xmlns,name):document.createElement(name);html.append(childHtml);if(child.attributes){this.setAttributes({html:childHtml,element:child,storage,intent,linkService});}if(child.children?.length>0){stack.push([child,-1,childHtml]);}else if(child.value){const node=document.createTextNode(child.value);if(isNotForRichText&&_xfa_text_js__WEBPACK_IMPORTED_MODULE_0__.XfaText.shouldBuildText(name)){textDivs.push(node);}childHtml.append(node);}}for(const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")){el.setAttribute(\"readOnly\",true);}return{textDivs};}static update(parameters){const transform=`matrix(${parameters.viewport.transform.join(\",\")})`;parameters.div.style.transform=transform;parameters.div.hidden=false;}}/***/}),/***/50:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */XfaText:()=>(/* binding */XfaText)/* harmony export */});class XfaText{static textContent(xfa){const items=[];const output={items,styles:Object.create(null)};function walk(node){if(!node){return;}let str=null;const name=node.name;if(name===\"#text\"){str=node.value;}else if(!XfaText.shouldBuildText(name)){return;}else if(node?.attributes?.textContent){str=node.attributes.textContent;}else if(node.value){str=node.value;}if(str!==null){items.push({str});}if(!node.children){return;}for(const child of node.children){walk(child);}}walk(xfa);return output;}static shouldBuildText(name){return!(name===\"textarea\"||name===\"input\"||name===\"option\"||name===\"select\");}}/***/}),/***/228:(/***/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */AbortException:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException),/* harmony export */AnnotationEditorLayer:()=>(/* reexport safe */_display_editor_annotation_editor_layer_js__WEBPACK_IMPORTED_MODULE_4__.AnnotationEditorLayer),/* harmony export */AnnotationEditorParamsType:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType),/* harmony export */AnnotationEditorType:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType),/* harmony export */AnnotationEditorUIManager:()=>(/* reexport safe */_display_editor_tools_js__WEBPACK_IMPORTED_MODULE_5__.AnnotationEditorUIManager),/* harmony export */AnnotationLayer:()=>(/* reexport safe */_display_annotation_layer_js__WEBPACK_IMPORTED_MODULE_6__.AnnotationLayer),/* harmony export */AnnotationMode:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode),/* harmony export */CMapCompressionType:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType),/* harmony export */ColorPicker:()=>(/* reexport safe */_display_editor_color_picker_js__WEBPACK_IMPORTED_MODULE_7__.ColorPicker),/* harmony export */DOMSVGFactory:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMSVGFactory),/* harmony export */DrawLayer:()=>(/* reexport safe */_display_draw_layer_js__WEBPACK_IMPORTED_MODULE_8__.DrawLayer),/* harmony export */FeatureTest:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FeatureTest),/* harmony export */GlobalWorkerOptions:()=>(/* reexport safe */_display_worker_options_js__WEBPACK_IMPORTED_MODULE_10__.GlobalWorkerOptions),/* harmony export */ImageKind:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.ImageKind),/* harmony export */InvalidPDFException:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.InvalidPDFException),/* harmony export */MissingPDFException:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException),/* harmony export */OPS:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.OPS),/* harmony export */Outliner:()=>(/* reexport safe */_display_editor_outliner_js__WEBPACK_IMPORTED_MODULE_9__.Outliner),/* harmony export */PDFDataRangeTransport:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.PDFDataRangeTransport),/* harmony export */PDFDateString:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PDFDateString),/* harmony export */PDFWorker:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.PDFWorker),/* harmony export */PasswordResponses:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordResponses),/* harmony export */PermissionFlag:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PermissionFlag),/* harmony export */PixelsPerInch:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PixelsPerInch),/* harmony export */RenderingCancelledException:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException),/* harmony export */UnexpectedResponseException:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException),/* harmony export */Util:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util),/* harmony export */VerbosityLevel:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.VerbosityLevel),/* harmony export */XfaLayer:()=>(/* reexport safe */_display_xfa_layer_js__WEBPACK_IMPORTED_MODULE_11__.XfaLayer),/* harmony export */build:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.build),/* harmony export */createValidAbsoluteUrl:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.createValidAbsoluteUrl),/* harmony export */fetchData:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.fetchData),/* harmony export */getDocument:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.getDocument),/* harmony export */getFilenameFromUrl:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getFilenameFromUrl),/* harmony export */getPdfFilenameFromUrl:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getPdfFilenameFromUrl),/* harmony export */getXfaPageViewport:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getXfaPageViewport),/* harmony export */isDataScheme:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isDataScheme),/* harmony export */isPdfFile:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isPdfFile),/* harmony export */noContextMenu:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.noContextMenu),/* harmony export */normalizeUnicode:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeUnicode),/* harmony export */renderTextLayer:()=>(/* reexport safe */_display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__.renderTextLayer),/* harmony export */setLayerDimensions:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.setLayerDimensions),/* harmony export */shadow:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow),/* harmony export */updateTextLayer:()=>(/* reexport safe */_display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__.updateTextLayer),/* harmony export */version:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.version)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _display_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(831);/* harmony import */var _display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(419);/* harmony import */var _display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(814);/* harmony import */var _display_editor_annotation_editor_layer_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(731);/* harmony import */var _display_editor_tools_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(830);/* harmony import */var _display_annotation_layer_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(976);/* harmony import */var _display_editor_color_picker_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(259);/* harmony import */var _display_draw_layer_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(47);/* harmony import */var _display_worker_options_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(164);/* harmony import */var _display_editor_outliner_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(61);/* harmony import */var _display_xfa_layer_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(284);var __webpack_async_dependencies__=__webpack_handle_async_dependencies__([_display_api_js__WEBPACK_IMPORTED_MODULE_1__]);_display_api_js__WEBPACK_IMPORTED_MODULE_1__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];const pdfjsVersion=\"4.2.67\";const pdfjsBuild=\"49b388101\";__webpack_async_result__();}catch(e){__webpack_async_result__(e);}});/***/}),/***/178:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */MessageHandler:()=>(/* binding */MessageHandler)/* harmony export */});/* harmony import */var _util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2};const StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){if(!(reason instanceof Error||typeof reason===\"object\"&&reason!==null)){(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');}switch(reason.name){case\"AbortException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(reason.message);case\"MissingPDFException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(reason.message);case\"PasswordException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(reason.message,reason.code);case\"UnexpectedResponseException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException(reason.message,reason.status);case\"UnknownErrorException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(reason.message,reason.details);default:return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(reason.message,reason.toString());}}var _MessageHandler_brand=/*#__PURE__*/new WeakSet();class MessageHandler{constructor(_sourceName,_targetName,_comObj){_classPrivateMethodInitSpec(this,_MessageHandler_brand);this.sourceName=_sourceName;this.targetName=_targetName;this.comObj=_comObj;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName){return;}if(data.stream){_assertClassBrand(_MessageHandler_brand,this,_processStreamMessage).call(this,data);return;}if(data.callback){const callbackId=data.callbackId;const capability=this.callbackCapabilities[callbackId];if(!capability){throw new Error(`Cannot resolve callback ${callbackId}`);}delete this.callbackCapabilities[callbackId];if(data.callback===CallbackKind.DATA){capability.resolve(data.data);}else if(data.callback===CallbackKind.ERROR){capability.reject(wrapReason(data.reason));}else{throw new Error(\"Unexpected callback case\");}return;}const action=this.actionHandler[data.action];if(!action){throw new Error(`Unknown action from worker: ${data.action}`);}if(data.callbackId){const cbSourceName=this.sourceName;const cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data));}).then(function(result){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result});},function(reason){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)});});return;}if(data.streamId){_assertClassBrand(_MessageHandler_brand,this,_createStreamSink).call(this,data);return;}action(data.data);};_comObj.addEventListener(\"message\",this._onComObjOnMessage);}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName]){throw new Error(`There is already an actionName called \"${actionName}\"`);}ah[actionName]=handler;}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers);}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++;const capability=Promise.withResolvers();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers);}catch(ex){capability.reject(ex);}return capability.promise;}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=Promise.withResolvers();this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:false};comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers);return startCapability.promise;},pull:controller=>{const pullCapability=Promise.withResolvers();this.streamControllers[streamId].pullCall=pullCapability;comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize});return pullCapability.promise;},cancel:reason=>{(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(reason instanceof Error,\"cancel must have a valid reason\");const cancelCapability=Promise.withResolvers();this.streamControllers[streamId].cancelCall=cancelCapability;this.streamControllers[streamId].isClosed=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)});return cancelCapability.promise;}},queueingStrategy);}destroy(){this.comObj.removeEventListener(\"message\",this._onComObjOnMessage);}}/***/function _createStreamSink(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;const self=this,action=this.actionHandler[data.action];const streamSink={enqueue(chunk){let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;let transfers=arguments.length>2?arguments[2]:undefined;if(this.isCancelled){return;}const lastDesiredSize=this.desiredSize;this.desiredSize-=size;if(lastDesiredSize>0&&this.desiredSize<=0){this.sinkCapability=Promise.withResolvers();this.ready=this.sinkCapability.promise;}comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers);},close(){if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId});delete self.streamSinks[streamId];},error(reason){(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(reason instanceof Error,\"error must have a valid reason\");if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)});},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:false,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve();streamSink.ready=streamSink.sinkCapability.promise;this.streamSinks[streamId]=streamSink;new Promise(function(resolve){resolve(action(data.data,streamSink));}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)});});}function _processStreamMessage(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;const streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:if(data.success){streamController.startCall.resolve();}else{streamController.startCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL_COMPLETE:if(data.success){streamController.pullCall.resolve();}else{streamController.pullCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:true});break;}if(streamSink.desiredSize<=0&&data.desiredSize>0){streamSink.sinkCapability.resolve();}streamSink.desiredSize=data.desiredSize;new Promise(function(resolve){resolve(streamSink.onPull?.());}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)});});break;case StreamKind.ENQUEUE:(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController,\"enqueue should have stream controller\");if(streamController.isClosed){break;}streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController,\"close should have stream controller\");if(streamController.isClosed){break;}streamController.isClosed=true;streamController.controller.close();_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.ERROR:(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController,\"error should have stream controller\");streamController.controller.error(wrapReason(data.reason));_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:if(data.success){streamController.cancelCall.resolve();}else{streamController.cancelCall.reject(wrapReason(data.reason));}_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink){break;}new Promise(function(resolve){resolve(streamSink.onCancel?.(wrapReason(data.reason)));}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)});});streamSink.sinkCapability.reject(wrapReason(data.reason));streamSink.isCancelled=true;delete this.streamSinks[streamId];break;default:throw new Error(\"Unexpected stream case\");}}async function _deleteStreamController(streamController,streamId){await Promise.allSettled([streamController.startCall?.promise,streamController.pullCall?.promise,streamController.cancelCall?.promise]);delete this.streamControllers[streamId];}}),/***/651:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */MurmurHash3_64:()=>(/* binding */MurmurHash3_64)/* harmony export */});const SEED=0xc3d2e1f0;const MASK_HIGH=0xffff0000;const MASK_LOW=0xffff;class MurmurHash3_64{constructor(seed){this.h1=seed?seed&0xffffffff:SEED;this.h2=seed?seed&0xffffffff:SEED;}update(input){let data,length;if(typeof input===\"string\"){data=new Uint8Array(input.length*2);length=0;for(let i=0,ii=input.length;i<ii;i++){const code=input.charCodeAt(i);if(code<=0xff){data[length++]=code;}else{data[length++]=code>>>8;data[length++]=code&0xff;}}}else if(ArrayBuffer.isView(input)){data=input.slice();length=data.byteLength;}else{throw new Error(\"Invalid data format, must be a string or TypedArray.\");}const blockCounts=length>>2;const tailLength=length-blockCounts*4;const dataUint32=new Uint32Array(data.buffer,0,blockCounts);let k1=0,k2=0;let h1=this.h1,h2=this.h2;const C1=0xcc9e2d51,C2=0x1b873593;const C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(let i=0;i<blockCounts;i++){if(i&1){k1=dataUint32[i];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;h1^=k1;h1=h1<<13|h1>>>19;h1=h1*5+0xe6546b64;}else{k2=dataUint32[i];k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW;k2=k2<<15|k2>>>17;k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW;h2^=k2;h2=h2<<13|h2>>>19;h2=h2*5+0xe6546b64;}}k1=0;switch(tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;if(blockCounts&1){h1^=k1;}else{h2^=k1;}}this.h1=h1;this.h2=h2;}hexdigest(){let h1=this.h1,h2=this.h2;h1^=h2>>>1;h1=h1*0xed558ccd&MASK_HIGH|h1*0x8ccd&MASK_LOW;h2=h2*0xff51afd7&MASK_HIGH|((h2<<16|h1>>>16)*0xafd7ed55&MASK_HIGH)>>>16;h1^=h2>>>1;h1=h1*0x1a85ec53&MASK_HIGH|h1*0xec53&MASK_LOW;h2=h2*0xc4ceb9fe&MASK_HIGH|((h2<<16|h1>>>16)*0xb9fe1a85&MASK_HIGH)>>>16;h1^=h2>>>1;return(h1>>>0).toString(16).padStart(8,\"0\")+(h2>>>0).toString(16).padStart(8,\"0\");}}/***/}),/***/292:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _Util;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */AbortException:()=>(/* binding */AbortException),/* harmony export */AnnotationBorderStyleType:()=>(/* binding */AnnotationBorderStyleType),/* harmony export */AnnotationEditorParamsType:()=>(/* binding */AnnotationEditorParamsType),/* harmony export */AnnotationEditorPrefix:()=>(/* binding */AnnotationEditorPrefix),/* harmony export */AnnotationEditorType:()=>(/* binding */AnnotationEditorType),/* harmony export */AnnotationMode:()=>(/* binding */AnnotationMode),/* harmony export */AnnotationPrefix:()=>(/* binding */AnnotationPrefix),/* harmony export */AnnotationType:()=>(/* binding */AnnotationType),/* harmony export */BaseException:()=>(/* binding */BaseException),/* harmony export */CMapCompressionType:()=>(/* binding */CMapCompressionType),/* harmony export */FONT_IDENTITY_MATRIX:()=>(/* binding */FONT_IDENTITY_MATRIX),/* harmony export */FeatureTest:()=>(/* binding */FeatureTest),/* harmony export */FontRenderOps:()=>(/* binding */FontRenderOps),/* harmony export */FormatError:()=>(/* binding */FormatError),/* harmony export */IDENTITY_MATRIX:()=>(/* binding */IDENTITY_MATRIX),/* harmony export */ImageKind:()=>(/* binding */ImageKind),/* harmony export */InvalidPDFException:()=>(/* binding */InvalidPDFException),/* harmony export */LINE_FACTOR:()=>(/* binding */LINE_FACTOR),/* harmony export */MAX_IMAGE_SIZE_TO_CACHE:()=>(/* binding */MAX_IMAGE_SIZE_TO_CACHE),/* harmony export */MissingPDFException:()=>(/* binding */MissingPDFException),/* harmony export */OPS:()=>(/* binding */OPS),/* harmony export */PasswordException:()=>(/* binding */PasswordException),/* harmony export */PasswordResponses:()=>(/* binding */PasswordResponses),/* harmony export */PermissionFlag:()=>(/* binding */PermissionFlag),/* harmony export */RenderingIntentFlag:()=>(/* binding */RenderingIntentFlag),/* harmony export */TextRenderingMode:()=>(/* binding */TextRenderingMode),/* harmony export */UnexpectedResponseException:()=>(/* binding */UnexpectedResponseException),/* harmony export */UnknownErrorException:()=>(/* binding */UnknownErrorException),/* harmony export */Util:()=>(/* binding */Util),/* harmony export */VerbosityLevel:()=>(/* binding */VerbosityLevel),/* harmony export */assert:()=>(/* binding */assert),/* harmony export */bytesToString:()=>(/* binding */bytesToString),/* harmony export */createValidAbsoluteUrl:()=>(/* binding */createValidAbsoluteUrl),/* harmony export */getUuid:()=>(/* binding */getUuid),/* harmony export */getVerbosityLevel:()=>(/* binding */getVerbosityLevel),/* harmony export */info:()=>(/* binding */info),/* harmony export */isNodeJS:()=>(/* binding */isNodeJS),/* harmony export */normalizeUnicode:()=>(/* binding */normalizeUnicode),/* harmony export */objectFromMap:()=>(/* binding */objectFromMap),/* harmony export */setVerbosityLevel:()=>(/* binding */setVerbosityLevel),/* harmony export */shadow:()=>(/* binding */shadow),/* harmony export */string32:()=>(/* binding */string32),/* harmony export */stringToBytes:()=>(/* binding */stringToBytes),/* harmony export */unreachable:()=>(/* binding */unreachable),/* harmony export */warn:()=>(/* binding */warn)/* harmony export */});/* unused harmony exports AnnotationActionEventType, AnnotationFieldFlag, AnnotationFlag, AnnotationReplyType, BASELINE_FACTOR, DocumentActionEventType, getModificationDate, isArrayEqual, LINE_DESCENT_FACTOR, objectSize, PageActionEventType, stringToPDFString, stringToUTF8String, utf8StringToString */const isNodeJS=typeof process===\"object\"&&process+\"\"===\"[object process]\"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!==\"browser\");const IDENTITY_MATRIX=[1,0,0,1,0,0];const FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];const MAX_IMAGE_SIZE_TO_CACHE=10e6;const LINE_FACTOR=1.35;const LINE_DESCENT_FACTOR=0.35;const BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR;const RenderingIntentFlag={ANY:0x01,DISPLAY:0x02,PRINT:0x04,SAVE:0x08,ANNOTATIONS_FORMS:0x10,ANNOTATIONS_STORAGE:0x20,ANNOTATIONS_DISABLE:0x40,OPLIST:0x100};const AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};const AnnotationEditorPrefix=\"pdfjs_internal_editor_\";const AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15};const AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35};const PermissionFlag={PRINT:0x04,MODIFY_CONTENTS:0x08,COPY:0x10,MODIFY_ANNOTATIONS:0x20,FILL_INTERACTIVE_FORMS:0x100,COPY_FOR_ACCESSIBILITY:0x200,ASSEMBLE:0x400,PRINT_HIGH_QUALITY:0x800};const TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};const ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};const AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};const AnnotationReplyType={GROUP:\"Group\",REPLY:\"R\"};const AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};const AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};const AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};const AnnotationActionEventType={E:\"Mouse Enter\",X:\"Mouse Exit\",D:\"Mouse Down\",U:\"Mouse Up\",Fo:\"Focus\",Bl:\"Blur\",PO:\"PageOpen\",PC:\"PageClose\",PV:\"PageVisible\",PI:\"PageInvisible\",K:\"Keystroke\",F:\"Format\",V:\"Validate\",C:\"Calculate\"};const DocumentActionEventType={WC:\"WillClose\",WS:\"WillSave\",DS:\"DidSave\",WP:\"WillPrint\",DP:\"DidPrint\"};const PageActionEventType={O:\"PageOpen\",C:\"PageClose\"};const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};const CMapCompressionType={NONE:0,BINARY:1};const OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){if(Number.isInteger(level)){verbosity=level;}}function getVerbosityLevel(){return verbosity;}function info(msg){if(verbosity>=VerbosityLevel.INFOS){console.log(`Info: ${msg}`);}}function warn(msg){if(verbosity>=VerbosityLevel.WARNINGS){console.log(`Warning: ${msg}`);}}function unreachable(msg){throw new Error(msg);}function assert(cond,msg){if(!cond){unreachable(msg);}}function _isValidProtocol(url){switch(url?.protocol){case\"http:\":case\"https:\":case\"ftp:\":case\"mailto:\":case\"tel:\":return true;default:return false;}}function createValidAbsoluteUrl(url){let baseUrl=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!url){return null;}try{if(options&&typeof url===\"string\"){if(options.addDefaultProtocol&&url.startsWith(\"www.\")){const dots=url.match(/\\./g);if(dots?.length>=2){url=`http://${url}`;}}if(options.tryConvertEncoding){try{url=stringToUTF8String(url);}catch{}}}const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl)){return absoluteUrl;}}catch{}return null;}function shadow(obj,prop,value){let nonSerializable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;Object.defineProperty(obj,prop,{value,enumerable:!nonSerializable,configurable:true,writable:false});return value;}const BaseException=function BaseExceptionClosure(){function BaseException(message,name){if(this.constructor===BaseException){unreachable(\"Cannot initialize BaseException.\");}this.message=message;this.name=name;}BaseException.prototype=new Error();BaseException.constructor=BaseException;return BaseException;}();class PasswordException extends BaseException{constructor(msg,code){super(msg,\"PasswordException\");this.code=code;}}class UnknownErrorException extends BaseException{constructor(msg,details){super(msg,\"UnknownErrorException\");this.details=details;}}class InvalidPDFException extends BaseException{constructor(msg){super(msg,\"InvalidPDFException\");}}class MissingPDFException extends BaseException{constructor(msg){super(msg,\"MissingPDFException\");}}class UnexpectedResponseException extends BaseException{constructor(msg,status){super(msg,\"UnexpectedResponseException\");this.status=status;}}class FormatError extends BaseException{constructor(msg){super(msg,\"FormatError\");}}class AbortException extends BaseException{constructor(msg){super(msg,\"AbortException\");}}function bytesToString(bytes){if(typeof bytes!==\"object\"||bytes?.length===undefined){unreachable(\"Invalid argument for bytesToString\");}const length=bytes.length;const MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}const strBuf=[];for(let i=0;i<length;i+=MAX_ARGUMENT_COUNT){const chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);const chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}return strBuf.join(\"\");}function stringToBytes(str){if(typeof str!==\"string\"){unreachable(\"Invalid argument for stringToBytes\");}const length=str.length;const bytes=new Uint8Array(length);for(let i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xff;}return bytes;}function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}function objectSize(obj){return Object.keys(obj).length;}function objectFromMap(map){const obj=Object.create(null);for(const[key,value]of map){obj[key]=value;}return obj;}function isLittleEndian(){const buffer8=new Uint8Array(4);buffer8[0]=1;const view32=new Uint32Array(buffer8.buffer,0,1);return view32[0]===1;}function isEvalSupported(){try{new Function(\"\");return true;}catch{return false;}}class FeatureTest{static get isLittleEndian(){return shadow(this,\"isLittleEndian\",isLittleEndian());}static get isEvalSupported(){return shadow(this,\"isEvalSupported\",isEvalSupported());}static get isOffscreenCanvasSupported(){return shadow(this,\"isOffscreenCanvasSupported\",typeof OffscreenCanvas!==\"undefined\");}static get platform(){if(typeof navigator!==\"undefined\"&&typeof navigator?.platform===\"string\"){return shadow(this,\"platform\",{isMac:navigator.platform.includes(\"Mac\")});}return shadow(this,\"platform\",{isMac:false});}static get isCSSRoundSupported(){return shadow(this,\"isCSSRoundSupported\",globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));}}const hexNumbers=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,\"0\"));class Util{static makeHexColor(r,g,b){return`#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;}static scaleMinMax(transform,minMax){let temp;if(transform[0]){if(transform[0]<0){temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;}minMax[0]*=transform[0];minMax[2]*=transform[0];if(transform[3]<0){temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;}minMax[1]*=transform[3];minMax[3]*=transform[3];}else{temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;if(transform[1]<0){temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;}minMax[1]*=transform[1];minMax[3]*=transform[1];if(transform[2]<0){temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;}minMax[0]*=transform[2];minMax[2]*=transform[2];}minMax[0]+=transform[4];minMax[1]+=transform[5];minMax[2]+=transform[4];minMax[3]+=transform[5];}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];}static applyTransform(p,m){const xt=p[0]*m[0]+p[1]*m[2]+m[4];const yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2];const xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;const yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt];}static getAxialAlignedBoundingBox(r,m){const p1=this.applyTransform(r,m);const p2=this.applyTransform(r.slice(2,4),m);const p3=this.applyTransform([r[0],r[3]],m);const p4=this.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d];}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]];const a=m[0]*transpose[0]+m[1]*transpose[2];const b=m[0]*transpose[1]+m[1]*transpose[3];const c=m[2]*transpose[0]+m[3]*transpose[2];const d=m[2]*transpose[1]+m[3]*transpose[3];const first=(a+d)/2;const second=Math.sqrt((a+d)**2-4*(a*d-c*b))/2;const sx=first+second||1;const sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];}static normalizeRect(rect){const r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}return r;}static intersect(rect1,rect2){const xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2]));const xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh){return null;}const yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3]));const yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));if(yLow>yHigh){return null;}return[xLow,yLow,xHigh,yHigh];}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3,minMax){if(minMax){minMax[0]=Math.min(minMax[0],x0,x3);minMax[1]=Math.min(minMax[1],y0,y3);minMax[2]=Math.max(minMax[2],x0,x3);minMax[3]=Math.max(minMax[3],y0,y3);}else{minMax=[Math.min(x0,x3),Math.min(y0,y3),Math.max(x0,x3),Math.max(y0,y3)];}_assertClassBrand(Util,this,_getExtremum).call(this,x0,x1,x2,x3,y0,y1,y2,y3,3*(-x0+3*(x1-x2)+x3),6*(x0-2*x1+x2),3*(x1-x0),minMax);_assertClassBrand(Util,this,_getExtremum).call(this,x0,x1,x2,x3,y0,y1,y2,y3,3*(-y0+3*(y1-y2)+y3),6*(y0-2*y1+y2),3*(y1-y0),minMax);return minMax;}}_Util=Util;function _getExtremumOnCurve(x0,x1,x2,x3,y0,y1,y2,y3,t,minMax){if(t<=0||t>=1){return;}const mt=1-t;const tt=t*t;const ttt=tt*t;const x=mt*(mt*(mt*x0+3*t*x1)+3*tt*x2)+ttt*x3;const y=mt*(mt*(mt*y0+3*t*y1)+3*tt*y2)+ttt*y3;minMax[0]=Math.min(minMax[0],x);minMax[1]=Math.min(minMax[1],y);minMax[2]=Math.max(minMax[2],x);minMax[3]=Math.max(minMax[3],y);}function _getExtremum(x0,x1,x2,x3,y0,y1,y2,y3,a,b,c,minMax){if(Math.abs(a)<1e-12){if(Math.abs(b)>=1e-12){_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,-c/b,minMax);}return;}const delta=b**2-4*c*a;if(delta<0){return;}const sqrtDelta=Math.sqrt(delta);const a2=2*a;_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,(-b+sqrtDelta)/a2,minMax);_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,(-b-sqrtDelta)/a2,minMax);}const PDFStringTranslateTable=/* unused pure expression or super */null&&[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2d8,0x2c7,0x2c6,0x2d9,0x2dd,0x2db,0x2da,0x2dc,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2022,0x2020,0x2021,0x2026,0x2014,0x2013,0x192,0x2044,0x2039,0x203a,0x2212,0x2030,0x201e,0x201c,0x201d,0x2018,0x2019,0x201a,0x2122,0xfb01,0xfb02,0x141,0x152,0x160,0x178,0x17d,0x131,0x142,0x153,0x161,0x17e,0,0x20ac];function stringToPDFString(str){if(str[0]>=\"\\xEF\"){let encoding;if(str[0]===\"\\xFE\"&&str[1]===\"\\xFF\"){encoding=\"utf-16be\";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]===\"\\xFF\"&&str[1]===\"\\xFE\"){encoding=\"utf-16le\";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]===\"\\xEF\"&&str[1]===\"\\xBB\"&&str[2]===\"\\xBF\"){encoding=\"utf-8\";}if(encoding){try{const decoder=new TextDecoder(encoding,{fatal:true});const buffer=stringToBytes(str);const decoded=decoder.decode(buffer);if(!decoded.includes(\"\\x1b\")){return decoded;}return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g,\"\");}catch(ex){warn(`stringToPDFString: \"${ex}\".`);}}}const strBuf=[];for(let i=0,ii=str.length;i<ii;i++){const charCode=str.charCodeAt(i);if(charCode===0x1b){while(++i<ii&&str.charCodeAt(i)!==0x1b){}continue;}const code=PDFStringTranslateTable[charCode];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}return strBuf.join(\"\");}function stringToUTF8String(str){return decodeURIComponent(escape(str));}function utf8StringToString(str){return unescape(encodeURIComponent(str));}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length){return false;}for(let i=0,ii=arr1.length;i<ii;i++){if(arr1[i]!==arr2[i]){return false;}}return true;}function getModificationDate(){let date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();const buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,\"0\"),date.getUTCDate().toString().padStart(2,\"0\"),date.getUTCHours().toString().padStart(2,\"0\"),date.getUTCMinutes().toString().padStart(2,\"0\"),date.getUTCSeconds().toString().padStart(2,\"0\")];return buffer.join(\"\");}let NormalizeRegex=null;let NormalizationMap=null;function normalizeUnicode(str){if(!NormalizeRegex){NormalizeRegex=/([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;NormalizationMap=new Map([[\"\",\"t\"]]);}return str.replaceAll(NormalizeRegex,(_,p1,p2)=>p1?p1.normalize(\"NFKC\"):NormalizationMap.get(p2));}function getUuid(){if(typeof crypto!==\"undefined\"&&typeof crypto?.randomUUID===\"function\"){return crypto.randomUUID();}const buf=new Uint8Array(32);if(typeof crypto!==\"undefined\"&&typeof crypto?.getRandomValues===\"function\"){crypto.getRandomValues(buf);}else{for(let i=0;i<32;i++){buf[i]=Math.floor(Math.random()*255);}}return bytesToString(buf);}const AnnotationPrefix=\"pdfjs_internal_id_\";const FontRenderOps={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};/***/})/******/};/************************************************************************/ /******/ // The module cache\n/******/var __webpack_module_cache__={};/******/ /******/ // The require function\n/******/function __webpack_require__(moduleId){/******/ // Check if module is in cache\n/******/var cachedModule=__webpack_module_cache__[moduleId];/******/if(cachedModule!==undefined){/******/return cachedModule.exports;/******/}/******/ // Create a new module (and put it into the cache)\n/******/var module=__webpack_module_cache__[moduleId]={/******/ // no module.id needed\n/******/ // no module.loaded needed\n/******/exports:{}/******/};/******/ /******/ // Execute the module function\n/******/__webpack_modules__[moduleId](module,module.exports,__webpack_require__);/******/ /******/ // Return the exports of the module\n/******/return module.exports;/******/}/******/ /************************************************************************/ /******/ /* webpack/runtime/async module */ /******/(()=>{/******/var webpackQueues=typeof Symbol===\"function\"?Symbol(\"webpack queues\"):\"__webpack_queues__\";/******/var webpackExports=typeof Symbol===\"function\"?Symbol(\"webpack exports\"):\"__webpack_exports__\";/******/var webpackError=typeof Symbol===\"function\"?Symbol(\"webpack error\"):\"__webpack_error__\";/******/var resolveQueue=queue=>{/******/if(queue&&queue.d<1){/******/queue.d=1;/******/queue.forEach(fn=>fn.r--);/******/queue.forEach(fn=>fn.r--?fn.r++:fn());/******/}/******/};/******/var wrapDeps=deps=>deps.map(dep=>{/******/if(dep!==null&&typeof dep===\"object\"){/******/if(dep[webpackQueues])return dep;/******/if(dep.then){/******/var queue=[];/******/queue.d=0;/******/dep.then(r=>{/******/obj[webpackExports]=r;/******/resolveQueue(queue);/******/},e=>{/******/obj[webpackError]=e;/******/resolveQueue(queue);/******/});/******/var obj={};/******/obj[webpackQueues]=fn=>fn(queue);/******/return obj;/******/}/******/}/******/var ret={};/******/ret[webpackQueues]=x=>{};/******/ret[webpackExports]=dep;/******/return ret;/******/});/******/__webpack_require__.a=(module,body,hasAwait)=>{/******/var queue;/******/hasAwait&&((queue=[]).d=-1);/******/var depQueues=new Set();/******/var exports=module.exports;/******/var currentDeps;/******/var outerResolve;/******/var reject;/******/var promise=new Promise((resolve,rej)=>{/******/reject=rej;/******/outerResolve=resolve;/******/});/******/promise[webpackExports]=exports;/******/promise[webpackQueues]=fn=>(queue&&fn(queue),depQueues.forEach(fn),promise[\"catch\"](x=>{}));/******/module.exports=promise;/******/body(deps=>{/******/currentDeps=wrapDeps(deps);/******/var fn;/******/var getResult=()=>currentDeps.map(d=>{/******/if(d[webpackError])throw d[webpackError];/******/return d[webpackExports];/******/});/******/var promise=new Promise(resolve=>{/******/fn=()=>resolve(getResult);/******/fn.r=0;/******/var fnQueue=q=>q!==queue&&!depQueues.has(q)&&(depQueues.add(q),q&&!q.d&&(fn.r++,q.push(fn)));/******/currentDeps.map(dep=>dep[webpackQueues](fnQueue));/******/});/******/return fn.r?promise:getResult();/******/},err=>(err?reject(promise[webpackError]=err):outerResolve(exports),resolveQueue(queue)));/******/queue&&queue.d<0&&(queue.d=0);/******/};/******/})();/******/ /******/ /* webpack/runtime/define property getters */ /******/(()=>{/******/ // define getter functions for harmony exports\n/******/__webpack_require__.d=(exports,definition)=>{/******/for(var key in definition){/******/if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){/******/Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});/******/}/******/}/******/};/******/})();/******/ /******/ /* webpack/runtime/hasOwnProperty shorthand */ /******/(()=>{/******/__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop);/******/})();/******/ /************************************************************************/ /******/ /******/ // startup\n/******/ // Load entry module and return exports\n/******/ // This entry module used 'module' so it can't be inlined\n/******/var __webpack_exports__=__webpack_require__(228);/******/__webpack_exports__=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=__webpack_exports__);/******/var __webpack_exports__AbortException=__webpack_exports__.AbortException;/******/var __webpack_exports__AnnotationEditorLayer=__webpack_exports__.AnnotationEditorLayer;/******/var __webpack_exports__AnnotationEditorParamsType=__webpack_exports__.AnnotationEditorParamsType;/******/var __webpack_exports__AnnotationEditorType=__webpack_exports__.AnnotationEditorType;/******/var __webpack_exports__AnnotationEditorUIManager=__webpack_exports__.AnnotationEditorUIManager;/******/var __webpack_exports__AnnotationLayer=__webpack_exports__.AnnotationLayer;/******/var __webpack_exports__AnnotationMode=__webpack_exports__.AnnotationMode;/******/var __webpack_exports__CMapCompressionType=__webpack_exports__.CMapCompressionType;/******/var __webpack_exports__ColorPicker=__webpack_exports__.ColorPicker;/******/var __webpack_exports__DOMSVGFactory=__webpack_exports__.DOMSVGFactory;/******/var __webpack_exports__DrawLayer=__webpack_exports__.DrawLayer;/******/var __webpack_exports__FeatureTest=__webpack_exports__.FeatureTest;/******/var __webpack_exports__GlobalWorkerOptions=__webpack_exports__.GlobalWorkerOptions;/******/var __webpack_exports__ImageKind=__webpack_exports__.ImageKind;/******/var __webpack_exports__InvalidPDFException=__webpack_exports__.InvalidPDFException;/******/var __webpack_exports__MissingPDFException=__webpack_exports__.MissingPDFException;/******/var __webpack_exports__OPS=__webpack_exports__.OPS;/******/var __webpack_exports__Outliner=__webpack_exports__.Outliner;/******/var __webpack_exports__PDFDataRangeTransport=__webpack_exports__.PDFDataRangeTransport;/******/var __webpack_exports__PDFDateString=__webpack_exports__.PDFDateString;/******/var __webpack_exports__PDFWorker=__webpack_exports__.PDFWorker;/******/var __webpack_exports__PasswordResponses=__webpack_exports__.PasswordResponses;/******/var __webpack_exports__PermissionFlag=__webpack_exports__.PermissionFlag;/******/var __webpack_exports__PixelsPerInch=__webpack_exports__.PixelsPerInch;/******/var __webpack_exports__RenderingCancelledException=__webpack_exports__.RenderingCancelledException;/******/var __webpack_exports__UnexpectedResponseException=__webpack_exports__.UnexpectedResponseException;/******/var __webpack_exports__Util=__webpack_exports__.Util;/******/var __webpack_exports__VerbosityLevel=__webpack_exports__.VerbosityLevel;/******/var __webpack_exports__XfaLayer=__webpack_exports__.XfaLayer;/******/var __webpack_exports__build=__webpack_exports__.build;/******/var __webpack_exports__createValidAbsoluteUrl=__webpack_exports__.createValidAbsoluteUrl;/******/var __webpack_exports__fetchData=__webpack_exports__.fetchData;/******/var __webpack_exports__getDocument=__webpack_exports__.getDocument;/******/var __webpack_exports__getFilenameFromUrl=__webpack_exports__.getFilenameFromUrl;/******/var __webpack_exports__getPdfFilenameFromUrl=__webpack_exports__.getPdfFilenameFromUrl;/******/var __webpack_exports__getXfaPageViewport=__webpack_exports__.getXfaPageViewport;/******/var __webpack_exports__isDataScheme=__webpack_exports__.isDataScheme;/******/var __webpack_exports__isPdfFile=__webpack_exports__.isPdfFile;/******/var __webpack_exports__noContextMenu=__webpack_exports__.noContextMenu;/******/var __webpack_exports__normalizeUnicode=__webpack_exports__.normalizeUnicode;/******/var __webpack_exports__renderTextLayer=__webpack_exports__.renderTextLayer;/******/var __webpack_exports__setLayerDimensions=__webpack_exports__.setLayerDimensions;/******/var __webpack_exports__shadow=__webpack_exports__.shadow;/******/var __webpack_exports__updateTextLayer=__webpack_exports__.updateTextLayer;/******/var __webpack_exports__version=__webpack_exports__.version;/******/export{__webpack_exports__AbortException as AbortException,__webpack_exports__AnnotationEditorLayer as AnnotationEditorLayer,__webpack_exports__AnnotationEditorParamsType as AnnotationEditorParamsType,__webpack_exports__AnnotationEditorType as AnnotationEditorType,__webpack_exports__AnnotationEditorUIManager as AnnotationEditorUIManager,__webpack_exports__AnnotationLayer as AnnotationLayer,__webpack_exports__AnnotationMode as AnnotationMode,__webpack_exports__CMapCompressionType as CMapCompressionType,__webpack_exports__ColorPicker as ColorPicker,__webpack_exports__DOMSVGFactory as DOMSVGFactory,__webpack_exports__DrawLayer as DrawLayer,__webpack_exports__FeatureTest as FeatureTest,__webpack_exports__GlobalWorkerOptions as GlobalWorkerOptions,__webpack_exports__ImageKind as ImageKind,__webpack_exports__InvalidPDFException as InvalidPDFException,__webpack_exports__MissingPDFException as MissingPDFException,__webpack_exports__OPS as OPS,__webpack_exports__Outliner as Outliner,__webpack_exports__PDFDataRangeTransport as PDFDataRangeTransport,__webpack_exports__PDFDateString as PDFDateString,__webpack_exports__PDFWorker as PDFWorker,__webpack_exports__PasswordResponses as PasswordResponses,__webpack_exports__PermissionFlag as PermissionFlag,__webpack_exports__PixelsPerInch as PixelsPerInch,__webpack_exports__RenderingCancelledException as RenderingCancelledException,__webpack_exports__UnexpectedResponseException as UnexpectedResponseException,__webpack_exports__Util as Util,__webpack_exports__VerbosityLevel as VerbosityLevel,__webpack_exports__XfaLayer as XfaLayer,__webpack_exports__build as build,__webpack_exports__createValidAbsoluteUrl as createValidAbsoluteUrl,__webpack_exports__fetchData as fetchData,__webpack_exports__getDocument as getDocument,__webpack_exports__getFilenameFromUrl as getFilenameFromUrl,__webpack_exports__getPdfFilenameFromUrl as getPdfFilenameFromUrl,__webpack_exports__getXfaPageViewport as getXfaPageViewport,__webpack_exports__isDataScheme as isDataScheme,__webpack_exports__isPdfFile as isPdfFile,__webpack_exports__noContextMenu as noContextMenu,__webpack_exports__normalizeUnicode as normalizeUnicode,__webpack_exports__renderTextLayer as renderTextLayer,__webpack_exports__setLayerDimensions as setLayerDimensions,__webpack_exports__shadow as shadow,__webpack_exports__updateTextLayer as updateTextLayer,__webpack_exports__version as version};/******/","map":{"version":3,"names":["makeColorComp","n","Math","floor","max","min","toString","padStart","scaleAndClamp","x","ColorConverters","CMYK_G","_ref","c","y","m","k","G_CMYK","_ref2","g","G_RGB","_ref3","G_rgb","_ref4","G_HTML","_ref5","G","RGB_G","_ref6","r","b","RGB_rgb","color","map","RGB_HTML","join","T_HTML","T_rgb","CMYK_RGB","_ref7","CMYK_rgb","_ref8","CMYK_HTML","components","rgb","slice","RGB_CMYK","_ref9","DEFAULT_TAB_INDEX","DEFAULT_FONT_SIZE","GetElementsByNameSet","WeakSet","getRectDims","rect","width","height","AnnotationElementFactory","create","parameters","subtype","data","annotationType","util","AnnotationType","LINK","LinkAnnotationElement","TEXT","TextAnnotationElement","WIDGET","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","POPUP","PopupAnnotationElement","FREETEXT","FreeTextAnnotationElement","LINE","LineAnnotationElement","SQUARE","SquareAnnotationElement","CIRCLE","CircleAnnotationElement","POLYLINE","PolylineAnnotationElement","CARET","CaretAnnotationElement","INK","InkAnnotationElement","POLYGON","PolygonAnnotationElement","HIGHLIGHT","HighlightAnnotationElement","UNDERLINE","UnderlineAnnotationElement","SQUIGGLY","SquigglyAnnotationElement","STRIKEOUT","StrikeOutAnnotationElement","STAMP","StampAnnotationElement","FILEATTACHMENT","FileAttachmentAnnotationElement","AnnotationElement","_updates","WeakMap","_hasBorder","_AnnotationElement_brand","constructor","isRenderable","ignoreBorder","createQuadrilaterals","arguments","length","undefined","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","layer","linkService","downloadManager","imageResourcesPath","renderForms","svgFactory","annotationStorage","enableScripting","hasJSActions","_fieldObjects","fieldObjects","parent","container","_createContainer","_createQuadrilaterals","_hasPopupData","_ref10","titleObj","contentsObj","richText","str","hasPopupData","updateEdited","params","_classPrivateFieldGet","_classPrivateFieldSet","_assertClassBrand","_setRectEdited","call","resetEdited","page","viewport","document","createElement","setAttribute","id","tabIndex","style","zIndex","popupRef","alternativeText","title","noRotate","classList","add","rotation","hasOwnCanvas","setRotation","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","warn","INSET","borderBottomStyle","borderColor","Util","makeHexColor","normalizeRect","view","pageWidth","pageHeight","pageX","pageY","rawDims","left","top","angle","elementWidth","elementHeight","_commonActions","setColor","jsName","styleName","event","detail","colorType","colorArray","target","setValue","shadow","display","hidden","visibility","noView","noPrint","print","focus","setTimeout","preventScroll","userName","readonly","disabled","required","_setRequired","bgColor","fillColor","fgColor","textColor","strokeColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","name","Object","keys","action","_setDefaultPropertiesFromJS","element","storedData","getRawValue","actionName","entries","eventProxy","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","svg","defs","append","clipPath","rectWidth","rectHeight","push","backgroundImage","_createPopup","popup","modificationDate","parentRect","elements","div","render","unreachable","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","querySelector","has","getElementsByName","getAttribute","show","maybeShow","hide","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","Array","isArray","_isEditable","_editOnDoubleClick","annotationEditorType","mode","editId","addEventListener","eventBus","dispatch","source","currentRect","splice","_LinkAnnotationElement_brand","options","isTooltipOnly","link","isBound","url","addLinkAttributes","newWindow","_bindNamedAction","attachment","_bindAttachment","attachmentDest","setOCGState","_bindSetOCGState","dest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","href","getDestinationHash","onclick","goToDestination","_setInternalLink","getAnchorUrl","executeNamedAction","Map","get","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","Set","fieldName","values","field","storage","allIds","type","value","defaultValue","dispatchEvent","Event","ids","openOrDownloadData","content","filename","executeSetOCGState","image","src","toLowerCase","JSON","stringify","showElementAndHideCanvas","previousSibling","nodeName","_getKeyModifier","FeatureTest","platform","isMac","metaKey","ctrlKey","_setEventListener","elementData","baseName","eventName","valueGetter","includes","shift","shiftKey","modifier","focused","relatedTarget","_setEventListeners","names","getter","Blur","Focus","_setBackgroundColor","backgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","fontSize","computedFontSize","BORDER_SIZE","roundToOneDecimal","round","multiLine","abs","numberOfLines","LINE_FACTOR","lineHeight","textAlignment","textAlign","isRequired","removeAttribute","hasAppearance","fieldValue","setPropertyOnSiblings","base","key","keyInStorage","getValue","textContent","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","replaceAll","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","activeElement","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","match","substring","preventDefault","change","fieldWidth","combWidth","letterSpacing","verticalAlign","checked","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","lastChild","selectElement","addAnEmptyEntry","combo","size","multiSelect","multiple","option","selected","optionElement","displayValue","removeEmptyEntry","noneOptionElement","prepend","remove","removeEventListener","isExport","selectedIndex","prototype","filter","selectedValues","getItems","multipleSelection","index","i","findIndex","items","clear","insert","selectChild","children","before","item","indices","editable","changeEx","keyDown","PopupElement","open","elementIds","AnnotationPrefix","_boundKeyDown","_boundHide","_boundShow","_boundToggle","_color","_container","_contentsObj","_dateObj","_elements","_parent","_parentRect","_pinned","_popup","_rect","_richText","_titleObj","_wasVisible","_PopupElement_brand","_ref11","_keyDown","bind","_hide","_show","_toggle","display_utils","PDFDateString","toDateObject","trigger","flatMap","e","className","baseColor","outlineColor","CSS","supports","BACKGROUND_ENLIGHT","header","dir","date","toLocaleDateString","time","toLocaleTimeString","xfa_layer","XfaLayer","xfaHtml","html","intent","contents","_formatContents","useParentRect","intersect","normalizedRect","HORIZONTAL_SPACE_AFTER_ANNOTATION","parentWidth","popupLeft","popupTop","_ref12","p","lines","split","ii","line","createTextNode","isVisible","altKey","parseInt","textPosition","AnnotationEditorType","lineSpan","_line","lineCoordinates","_square","square","_circle","circle","_polyline","containerClassName","svgElementName","points","coordinate","vertices","polyline","_polylines","inkList","inkLists","_trigger","_FileAttachmentAnnotationElement_brand","file","getFilenameFromUrl","fillAlpha","test","_download","evt","_accessibilityManager","_annotationCanvasMap","_editableAnnotations","_AnnotationLayer_brand","AnnotationLayer","_ref13","accessibilityManager","annotationCanvasMap","annotationEditorUIManager","_annotationEditorUIManager","annotations","setLayerDimensions","popupToElements","elementParams","DOMSVGFactory","annotation_storage","AnnotationStorage","noHTML","isPopupAnnotation","set","rendered","_appendElement","renderAnnotationElement","_setAnnotationCanvasMap","update","_ref14","getEditableAnnotations","from","getEditableAnnotation","contentElement","firstChild","moveElementInDOM","canvas","replaceWith","contains","after","SerializableEmpty","freeze","hash","transfer","_modified","_storage","_AnnotationStorage_brand","onSetModified","onResetModified","onAnnotationEditor","assign","delete","resetModified","_editor_editor_js__WEBPACK_IMPORTED_MODULE_1__","AnnotationEditor","obj","modified","entry","val","_setModified","_type","getAll","_shared_util_js__WEBPACK_IMPORTED_MODULE_0__","objectFromMap","setAll","PrintAnnotationStorage","serializable","_shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__","MurmurHash3_64","context","hasBitmap","serialized","serialize","bitmap","hexdigest","editorStats","stats","typeToEditor","telemetryFinalData","getPrototypeOf","counters","count","editor","computeTelemetryFinalData","_serializable","clone","structuredClone","DEFAULT_RANGE_CHUNK_SIZE","RENDERING_CANCELLED_TIMEOUT","DELAYED_CLEANUP_TIMEOUT","DefaultCanvasFactory","isNodeJS","display_node_utils__WEBPACK_IMPORTED_MODULE_4__","NodeCanvasFactory","_display_utils_js__WEBPACK_IMPORTED_MODULE_2__","DOMCanvasFactory","DefaultCMapReaderFactory","NodeCMapReaderFactory","DOMCMapReaderFactory","DefaultFilterFactory","NodeFilterFactory","DOMFilterFactory","DefaultStandardFontDataFactory","NodeStandardFontDataFactory","DOMStandardFontDataFactory","getDocument","URL","ArrayBuffer","isView","Error","range","task","PDFDocumentLoadingTask","docId","getUrlProp","getDataProp","httpHeaders","withCredentials","password","rangeTransport","PDFDataRangeTransport","rangeChunkSize","Number","isInteger","worker","PDFWorker","verbosity","docBaseUrl","isDataScheme","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","stopAtErrors","maxImageSize","isEvalSupported","isOffscreenCanvasSupported","canvasMaxAreaInBytes","disableFontFace","fontExtraProperties","enableXfa","ownerDocument","globalThis","disableRange","disableStream","disableAutoFetch","pdfBug","NaN","useSystemFonts","useWorkerFetch","isValidFetchUrl","baseURI","canvasFactory","filterFactory","styleElement","setVerbosityLevel","transportFactory","cMapReaderFactory","baseUrl","isCompressed","standardFontDataFactory","workerParams","port","_worker_options_js__WEBPACK_IMPORTED_MODULE_14__","GlobalWorkerOptions","workerPort","fromPort","_worker","fetchDocParams","apiVersion","evaluatorOptions","transportParams","promise","then","destroyed","workerIdPromise","_fetchDocument","networkStreamPromise","Promise","resolve","networkStream","_transport_stream_js__WEBPACK_IMPORTED_MODULE_10__","PDFDataTransportStream","createPDFNetworkStream","isFetchSupported","fetch","Response","display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__","PDFFetchStream","display_node_stream__WEBPACK_IMPORTED_MODULE_13__","PDFNodeStream","display_network__WEBPACK_IMPORTED_MODULE_12__","PDFNetworkStream","all","_ref15","workerId","messageHandler","_shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__","MessageHandler","transport","WorkerTransport","_transport","send","catch","_capability","reject","sendWithPromise","buffer","window","location","Buffer","Uint8Array","byteLength","stringToBytes","isNaN","isRefProxy","ref","num","gen","_PDFDocumentLoadingTa","_PDFDocumentLoadingTa2","withResolvers","_docId","_","onPassword","onProgress","destroy","_pendingDestroy","ex","initialData","progressiveDone","contentDispositionFilename","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","addRangeListener","listener","addProgressListener","addProgressiveReadListener","addProgressiveDoneListener","onDataRange","begin","chunk","onDataProgress","loaded","total","onDataProgressiveRead","onDataProgressiveDone","transportReady","requestDataRange","end","abort","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","pageNumber","getPageIndex","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","renderingIntent","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","getData","saveDocument","getDownloadInfo","downloadInfoCapability","cleanup","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","loadingParams","getFieldObjects","getCalculationOrderIds","_delayedCleanupTimeout","_pendingCleanup","_PDFPageProxy_brand","PDFPageProxy","pageIndex","pageInfo","_pageIndex","_pageInfo","_stats","StatTimer","_pdfBug","commonObjs","objs","PDFObjects","_maybeCleanupAfterRender","_intentStates","rotate","userUnit","getViewport","scale","offsetX","offsetY","dontFlip","PageViewport","viewBox","getAnnotations","getPageJSActions","getXfa","_ref16","canvasContext","annotationMode","AnnotationMode","ENABLE","transform","background","optionalContentConfigPromise","pageColors","printAnnotationStorage","intentArgs","cacheKey","_abortDelayedCleanup","intentState","streamReaderCancelTimeout","clearTimeout","intentPrint","RenderingIntentFlag","PRINT","displayReadyCapability","operatorList","fnArray","argsArray","lastChunk","separateAnnots","_pumpOperatorList","complete","error","renderTasks","internalRenderTask","_tryCleanup","capability","_abortOperatorList","reason","timeEnd","InternalRenderTask","callback","useRequestAnimationFrame","renderTask","_ref17","transparency","optionalContentConfig","initializeGraphics","operatorListChanged","getOperatorList","opListReadCapability","opListTask","streamTextContent","includeMarkedContent","disableNormalization","TEXT_CONTENT_CHUNK_SIZE","sendWithStream","highWaterMark","getTextContent","xfa","_xfa_text_js__WEBPACK_IMPORTED_MODULE_15__","XfaText","readableStream","pump","reader","read","_ref18","done","styles","getReader","getStructTree","_destroy","waitOn","force","completed","cancel","resetStats","success","_startRenderPage","_renderPageChunk","operatorListChunk","_ref19","annotationStorageSerializable","streamReader","_ref20","_ref21","RenderingCancelledException","delay","extraDelay","AbortException","message","curCacheKey","curIntentState","delayed","_listeners","_deferred","LoopbackPort","postMessage","terminate","PDFWorkerUtil","isWorkerDisabled","fakeWorkerId","workerSrc","isSameOrigin","otherUrl","origin","other","createCDNWrapper","wrapper","createObjectURL","Blob","getVerbosityLevel","_port","_webWorker","_messageHandler","_workerPorts","_initializeFromPort","_initialize","on","_get_mainThreadWorkerMessageHandler","Worker","terminateEarly","onWorkerError","_setupFakeWorker","sendTest","testObj","info","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","loader","_classPrivateGetter","_this","pdfjsWorker","_methodPromises","_pageCache","_pagePromises","_pageRefCache","_passwordCapability","_WorkerTransport_brand","factory","fontLoader","_font_loader_js__WEBPACK_IMPORTED_MODULE_3__","FontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","_annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__","isOpList","DISPLAY","ANY","DISABLE","ANNOTATIONS_DISABLE","ENABLE_FORMS","ANNOTATIONS_FORMS","ENABLE_STORAGE","ANNOTATIONS_STORAGE","OPLIST","hasOwnProperty","terminated","_text_layer_js__WEBPACK_IMPORTED_MODULE_6__","cleanupTextLayer","cancelAllRequests","sink","assert","getFullReader","onPull","_ref22","close","enqueue","onCancel","ready","readyReason","headersCapability","fullReader","headersReady","isStreamingSupported","isRangeSupported","contentLength","rangeReader","getRangeReader","_ref23","_ref24","_numPages","htmlForXfa","PasswordException","code","InvalidPDFException","MissingPDFException","UnexpectedResponseException","status","UnknownErrorException","details","exception","updatePassword","_ref25","exportedData","exportedError","inspectFont","FontInspector","enabled","font","fontAdded","FontFaceObject","finally","imageRef","pageProxy","dataLen","_ref26","imageData","MAX_IMAGE_SIZE_TO_CACHE","cachedPromise","refStr","_cacheSimpleMethod","_optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__","OptionalContentConfig","results","metadata","_metadata_js__WEBPACK_IMPORTED_MODULE_8__","Metadata","cleanupSuccessful","INITIAL_DATA","Symbol","_objs","_PDFObjects_brand","objId","_ensureObj","iterator","_internalRenderTask","RenderTask","onContinue","form","_ref27","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","_ref28","_canvasInUse","StepperManager","stepper","init","nextBreakPoint","getNextBreakPoint","gfx","_canvas_js__WEBPACK_IMPORTED_MODULE_5__","CanvasGraphics","beginDrawing","endDrawing","updateOperatorList","requestAnimationFrame","executeOperatorList","version","build","BaseFilterFactory","addFilter","maps","addHCMFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","BaseCanvasFactory","_createCanvas","getContext","reset","canvasAndContext","BaseCMapReaderFactory","_ref29","_ref30","compressionType","CMapCompressionType","BINARY","NONE","_fetchData","BaseStandardFontDataFactory","_ref31","_ref32","BaseSVGFactory","skipDimensions","_createSVG","PathType","FILL","STROKE","SHADING","applyBoundingBox","ctx","bbox","region","Path2D","clip","BaseShadingPattern","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","matrix","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","getCurrentTransform","ceil","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","translate","baseTransform","fillStyle","fill","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p1","p2","p3","c1","c2","c3","coords","colors","bytes","rowSize","tmp","x1","scaleX","y1","scaleY","x2","y2","x3","y3","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","j","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_colors","_figures","_bounds","_background","_createMeshCanvas","combinedScale","EXPECTED_SCALE","MAX_PATTERN_SIZE","boundsWidth","boundsHeight","paddedWidth","paddedHeight","createImageData","putImageData","singularValueDecompose2dScale","matrixScale","temporaryPatternCanvas","DummyShadingPattern","getShadingPattern","PaintType","COLORED","UNCOLORED","TilingPattern","canvasGraphicsFactory","xstep","ystep","paintType","tilingType","createPatternCanvas","x0","y0","curMatrixScale","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","adjustedX0","adjustedY0","adjustedX1","adjustedY1","save","clipBbox","step","realOutputSize","maxSize","bboxWidth","bboxHeight","updateRectMinMax","endPath","strokeStyle","cssColor","FormatError","_defineProperty","convertToRGBA","kind","ImageKind","GRAYSCALE_1BPP","convertBlackAndWhiteToRGBA","RGB_24BPP","convertRGBToRGBA","_ref33","srcPos","nonBlackColor","inverseDecode","black","isLittleEndian","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","Uint32Array","destPos","elem","_ref34","len32","src32","s1","s2","s3","jj","grayToRGBA","MIN_FONT_SIZE","MAX_FONT_SIZE","MAX_GROUP_SIZE","EXECUTION_TIME","EXECUTION_STEPS","MAX_SIZE_TO_COMPILE","FULL_CHUNK_HEIGHT","mirrorContextOperations","destCtx","_removeMirroring","__originalSave","__originalRestore","restore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","moveTo","__originalLineTo","lineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","closePath","__originalBeginPath","ctxSave","ctxRestore","ctxTranslate","ctxScale","ctxTransform","a","d","f","ctxSetTransform","ctxResetTransform","ctxRotate","rule","cp1x","cp1y","cp2x","cp2y","CachedCanvases","cache","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tx","ty","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","drawImage","hypot","compileType3Glyph","imgData","POINT_TO_PROCESS_LIMIT","POINT_TYPES","width1","j0","lineSize","pos","mask","sum","steps","Int32Array","path","p0","pp","drawOutline","CanvasExtraState","alphaIsShape","fontSizeScale","textMatrix","IDENTITY_MATRIX","textMatrixScale","fontMatrix","FONT_IDENTITY_MATRIX","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","TextRenderingMode","textRise","patternFill","strokeAlpha","lineWidth","activeSMask","transferMaps","startNewPathAndClipBox","clipBox","setCurrentPoint","updatePathMinMax","applyTransform","minX","maxX","p4","updateScalingPathMinMax","minMax","scaleMinMax","updateCurvePathMinMax","box","bezierBoundingBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","isEmptyClip","Infinity","putBinaryImageData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","srcByte","RGBA_32BPP","subarray","putBinaryImageMask","copyCtxState","sourceCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","composeSMaskBackdrop","r0","g0","b0","alpha","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","genericComposeSMask","maskCtx","layerCtx","backdrop","layerOffsetX","layerOffsetY","maskOffsetX","maskOffsetY","hasBackdrop","composeFn","PIXELS_TO_PROCESS","chunkSize","row","chunkHeight","getImageData","composeSMask","smask","layerBox","layerWidth","layerHeight","getImageSmoothingEnabled","interpolate","fround","actualScale","devicePixelRatio","PixelsPerInch","PDF_TO_CSS_UNITS","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","_CanvasGraphics_brand","canvasCtx","_ref35","markedContentStack","stateStack","pendingClip","pendingEOFill","res","xobjs","groupStack","processingType3","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","startsWith","_ref36","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","argsArrayLen","chunkOperations","endTime","Date","now","fnId","breakIt","OPS","dependency","apply","depObjId","objsPool","_restoreInitialState","HTMLCanvasElement","_drawFilter","_scaleImage","img","inverseTransform","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","newWidth","newHeight","_createMaskCanvas","isPatternFill","currentTransform","scaled","maskCanvas","mainKey","cachedImage","maskToCanvas","getAxialAlignedBoundingBox","drawnWidth","drawnHeight","fillCanvas","fillCtx","getCurrentTransformInverse","imageSmoothingEnabled","setLineWidth","setLineCap","setLineJoin","setMiterLimit","limit","setDash","dashArray","dashPhase","setRenderingIntent","setFlatness","flatness","setGState","states","setFont","checkSMaskState","inSMaskMode","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","compose","dirtyBox","old","pop","constructPath","ops","args","startX","startY","isScalingMatrix","minMaxForBezier","rectangle","xw","yh","curveTo","curveTo2","curveTo3","stroke","consumePath","rescaleAndStroke","closeStroke","needRestore","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","eoClip","beginText","endText","paths","pendingTextPaths","addToPath","setCharSpacing","spacing","setWordSpacing","setHScale","setLeading","fontRefName","fontObj","fontDirection","isType3Font","loadedName","typeface","systemFontInfo","css","fallbackName","bold","italic","browserFontSize","setTextRenderingMode","setTextRise","rise","moveText","setLeadingMoveText","setTextMatrix","nextLine","paintChar","character","patternTransform","fillStrokeMode","FILL_STROKE_MASK","isAddToPathSet","ADD_TO_PATH_FLAG","missingFile","getPathGenerator","FILL_STROKE","fillText","strokeText","isFontSubpixelAAEnabled","showText","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","offset","scaledAccentY","charWidth","isTextInvisible","INVISIBLE","spacingLength","charProcOperatorList","operatorListId","transformed","setCharWidth","xWidth","yWidth","setCharWidthAndBounds","llx","lly","urx","ury","getColorN_Pattern","_getPattern","setStrokeColorN","setFillColorN","setStrokeRGBColor","setFillRGBColor","shadingFill","inv","beginInlineImage","beginImageData","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","endGroup","currentMtx","beginAnnotation","canvasWidth","canvasHeight","annotationCanvas","savedCtx","endAnnotation","paintImageMaskXObject","compiled","paintImageMaskXObjectRepeat","skewX","skewY","positions","trans","paintImageMaskXObjectGroup","images","paintImageXObject","paintInlineImageXObject","paintImageXObjectRepeat","w","h","paintInlineImageXObjectGroup","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","paintSolidColorImageMask","markPoint","tag","markPointProps","beginMarkedContent","visible","beginMarkedContentProps","isContentVisible","endMarkedContent","beginCompat","endCompat","isEmpty","absDet","normX","normY","getScaleForStroking","getTransform","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","hcmFilterId","foreground","savedFilter","op","SVG_NS","_PixelsPerInch","PDF","_cache","_defs","_docId2","_document","_hcmCache","_id","_DOMFilterFactory_brand","_base_factory_js__WEBPACK_IMPORTED_MODULE_0__","_this$id","_this$id2","_get_cache","tableR","tableG","tableB","mapR","mapG","mapB","bufferR","bufferG","bufferB","_createFilter","_addTransferMapConversion","_get_hcmCache","fgRGB","_getRGB","_shared_util_js__WEBPACK_IMPORTED_MODULE_1__","bgRGB","_get_defs","table","_addGrayConversion","getSteps","start","arr","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","prev","parentNode","_this2","_this3","_this4","contain","position","createElementNS","body","feColorMatrix","_appendFeFunc","feComponentTransfer","func","feFunc","rTable","gTable","bTable","getRGB","getComputedStyle","getPropertyValue","fetchData","response","ok","statusText","arrayBuffer","blob","json","text","request","XMLHttpRequest","responseType","onreadystatechange","readyState","DONE","responseText","cMapData","_ref37","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","applyInverseTransform","BaseException","msg","trim","isPdfFile","onlyStripPath","lastIndexOf","getPdfFilenameFromUrl","defaultFilename","reURI","reFilename","splitURI","exec","suggestedFilename","decodeURIComponent","started","times","outBuf","longest","padEnd","protocol","noContextMenu","deprecated","console","log","pdfDateStringRegex","input","RegExp","matches","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","UTC","getXfaPageViewport","xfaPage","_ref38","attributes","colorRGB","getColorValues","span","computedColor","invertSelf","mustFlip","mustRotate","useRound","isCSSRoundSupported","widthStr","heightStr","DrawLayer","_ref39","_DrawLayer_brand","_parent2","_id2","_mapping","_toUpdate","setParent","root","_svgFactory","_display_utils_js__WEBPACK_IMPORTED_MODULE_0__","highlight","outlines","opacity","_this$id3","_this$id4","isPathUpdatable","free","pathId","toSVGPath","clipPathId","_createClipPath","use","highlightOutline","_this$id5","_this$id6","maskId","use1","use2","cloneNode","finalizeLine","updateBox","updateLine","removeFreeHighlight","updatePath","_setBox","toggle","changeColor","changeOpacity","addClass","removeClass","clipPathUse","EOL_PATTERN","_boundEditorDivBlur","_boundEditorDivFocus","_boundEditorDivInput","_boundEditorDivKeydown","_boundEditorDivPaste","_color2","_content","_editorDivId","_fontSize","_initialData","_FreeTextEditor_brand","FreeTextEditor","editor_editor","_keyboardManager","proto","arrowChecker","self","small","tools","AnnotationEditorUIManager","TRANSLATE_SMALL","big","TRANSLATE_BIG","KeyboardManager","commitOrRemove","bubbles","_translateEmpty","checker","editorDivBlur","editorDivFocus","editorDivInput","editorDivKeydown","editorDivPaste","_defaultColor","_defaultLineColor","_defaultFontSize","initialize","l10n","uiManager","strings","documentElement","_internalPadding","parseFloat","updateDefaultParams","AnnotationEditorParamsType","FREETEXT_SIZE","FREETEXT_COLOR","updateParams","_updateFontSize","_updateColor","defaultPropertiesToUpdate","propertiesToUpdate","_uiManager","translateSelectedEditors","getInitialTranslation","parentScale","rebuild","isAttachedToDOM","enableEditMode","isInEditMode","setEditingState","updateToolbar","overlayDiv","editorDiv","contentEditable","_isDraggable","disableEditMode","isEditing","focusin","_focusEventsAllowed","onceAdded","_initialOptions","isCentered","center","innerText","commit","savedText","newText","_extractText","trimEnd","setText","_setContent","_setEditorDimensions","addCommands","cmd","undo","mustExec","shouldGetKeyboardEvents","enterInEditMode","dblclick","keydown","disableEditing","enableEditing","baseX","baseY","_l10nPromise","bindEvents","parentHeight","parentDimensions","annotationElementId","pageTranslationToScreen","pageDimensions","pageTranslation","posX","posY","setAt","clipboardData","types","paste","_deserializeContent","selection","getSelection","rangeCount","normalize","deleteFromDocument","getRangeAt","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","nodeType","Node","TEXT_NODE","parentElement","nodeValue","child","childNodes","_getNodeContent","newRange","Range","beforeLength","reduce","acc","setStart","setEnd","removeAllRanges","addRange","contentDiv","deserialize","annotation_layer","deleted","isForCopying","padding","getRect","_colorManager","convert","_serializeContent","structTreeParentId","_structTreeParentId","_hasElementChanged","annotation","replaceChildren","resetAnnotationElement","setFontsize","savedFontsize","post","updateUI","overwriteIfSameType","keepUndo","col","savedColor","getBoundingClientRect","currentLayer","savedDisplay","savedVisibility","parentRotation","fixAndSetPosition","node","_hasBeenMoved","some","HighlightEditor","_moveCaret","_HighlightEditor_brand","_anchorNode","_anchorOffset","_boxes","_clipPathId","_colorPicker","_focusOutlines","_focusNode","_focusOffset","_highlightDiv","_highlightOutlines","_id3","_isFreeHighlight","_boundKeydown","_keydown","_lastPoint","_opacity","_outlineId","_text","_thickness","_methodOfCreation","thickness","_defaultThickness","_defaultOpacity","boxes","methodOfCreation","highlightId","_createFreeOutlines","_addToDrawLayer","anchorNode","anchorOffset","focusNode","focusOffset","_createOutlines","telemetryInitialData","highlightColorNames","numberOfColors","highlightColors","next","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","translateInPage","toolbarPosition","HIGHLIGHT_COLOR","_updateColor2","_updateThickness","HIGHLIGHT_FREE","addEditToolbar","toolbar","color_picker","ColorPicker","addColorPicker","_getRotation","getBaseTranslation","addUndoableEditor","_cleanDrawLayer","_reportTelemetry","mustBeSelected","_isVisible","select","drawLayer","_rotateBbox","highlightDiv","setDims","pointerover","pointerleave","direction","unselect","_setCaret","_mustFixPosition","startHighlighting","isLTR","_ref40","textLayer","layerX","layerY","pointerMove","_highlightMove","pointerDownOptions","capture","passive","pointerDown","stopPropagation","pointerUpCallback","_endHighlight","_freeHighlight","editor_outliner","FreeOutliner","_freeHighlightId","_freeHighlightClipId","_serializeBoxes","_serializeOutlines","canCreateNewEmptyEditor","_HighlightEditor","outliner","Outliner","getOutlines","outlinerForOutline","lastPoint","_ref44","highlightOutlines","extraThickness","getNewOutline","updateColor","savedThickness","setThickness","th","_changeThickness","INK_THICKNESS","_toSetter","_ref45","setPosition","sx","sy","createAndAddNewEditor","InkEditor","_InkEditor_brand","_baseHeight","_baseWidth","_boundCanvasPointermove","canvasPointermove","_boundCanvasPointerleave","canvasPointerleave","_boundCanvasPointerup","canvasPointerup","_boundCanvasPointerdown","canvasPointerdown","_canvasContextMenuTimeoutId","_currentPath2D","_disableEditing","_hasSomethingToDraw","_isCanvasInitialized","_observer","_realWidth","_realHeight","_requestFrameCallback","bezierPath2D","allRawPaths","currentPath","scaleFactor","translationX","translationY","_willKeepAspectRatio","INK_COLOR","INK_OPACITY","_updateThickness2","_updateColor3","_updateOpacity","_createObserver","_setCanvasDims","_fitToContent","disconnect","removeShouldRescale","addShouldRescale","onScaleChanging","setDimensions","setInForeground","addInkEditorIfNeeded","moveInDOM","button","_startDrawing","_draw","_endDrawing","isResizable","_getInitialBBox","setAspectRatio","_redraw","roundedWidth","roundedHeight","_setScaleFactor","fixDims","bezier","_fromPDFCoordinates","p10","p11","p20","p21","p30","p31","path2D","_buildPath2D","_getBbox","MIN_SIZE","_serializePaths","_InkEditor","setOpacity","savedOpacity","_setStroke","opacityToHex","_drawPoints","lastX","lastY","at","_makeBezierCurve","_endPath","_stopDrawing","_generateBezierPoints","xy","lastPoints","xMin","xMax","yMin","yMax","prevX","prevY","bezierPoints","control1","control2","_updateTransform","addToAnnotationStorage","setInBackground","ResizeObserver","contentRect","observe","_getPadding","scaleFactorW","scaleFactorH","first","_toPDFCoordinates","s","shiftX","shiftY","p40","p41","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","StampEditor","_StampEditor_brand","_bitmap","_bitmapId","_bitmapPromise","_bitmapUrl","_bitmapFile","_bitmapFileName","_observer2","_resizeTimeoutId","_isSvg","_hasBeenAddedInUndoStack","bitmapUrl","bitmapFile","supportedTypes","supportedTypesStr","isHandlingMimeForPasting","mime","pasteEditor","getAsFile","imageManager","deleteId","_getBitmap","addAltTextButton","_createCanvas2","getImageForAltText","bitmapId","isSvg","accessibilityData","isValidId","altTextData","_serializeBitmap","decorative","altText","alt","stamps","area","prevData","_StampEditor","_getBitmapFetched","fromId","_getBitmapDone","enableWaiting","getFromId","getFromUrl","getFromFile","accept","files","click","MAX_RATIO","factor","_drawBitmap","_createObserver2","_setDimensions","TIME_TO_WAIT","_scaleBitmap","bitmapWidth","bitmapHeight","prevWidth","prevHeight","offscreen","OffscreenCanvas","transferToImageBitmap","hasMLManager","hasAltText","convertToBlob","fileReader","FileReader","onload","result","mlGuess","service","output","readAsDataURL","hcmFilter","toUrl","getSvgUrl","toDataURL","AnnotationEditorLayer","_ref41","annotationLayer","_AnnotationEditorLayer_brand","_accessibilityManager2","_allowClick","_annotationLayer","_boundPointerup","_boundPointerdown","_boundTextLayerPointerDown","_editorFocusTimeoutId","_editors","_hadPointerDown","_isCleaningUp","_isDisabling","_textLayer","_uiManager2","editorTypes","_editorTypes","_initialized","editorType","registerEditorTypes","addLayer","isInvisible","getMode","updateMode","_cleanup","disableTextSelection","togglePointerEvents","toggleAnnotationLayerPointerEvents","disableClick","enableTextSelection","enableClick","_editorType","hasTextLayer","isCommitting","enable","annotationElementIds","removeChangedExistingAnnotation","editables","isDeletedAnnotationElement","addOrRebuild","disable","changedAnnotations","resetAnnotations","addChangedExistingAnnotation","setActiveEditor","currentActive","getActive","_textLayerPointerDown","pointerdown","pointerup","attach","removeDeletedAnnotationElement","detach","removePointerInTextLayer","addDeletedAnnotationElement","removeEditor","changeParent","deleteAnnotationElement","addEditor","moveEditorInDOM","once","needsToBeRebuilt","getNextId","getId","_get_currentEditorType","_getCenterPoint","_createNewEditor","addNewEditor","setSelected","toggleSelected","isSelected","unselectAll","findNewParent","findParent","removeLayer","_ref42","getEditors","_ref43","oldRotation","viewParameters","realScale","showAllEditors","_this5","innerWidth","innerHeight","_tools_js__WEBPACK_IMPORTED_MODULE_1__","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","_ref46","_ColorPicker_brand","_boundKeyDown2","_keyDown2","_boundPointerDown","_pointerDown","_button","_buttonSwatch","_dropdown","_dropdownWasFromKeyboard","_isMainColorPicker","_editor","_eventBus","_uiManager3","_type2","renderButton","_openDropdown","swatch","renderMainDropdown","dropdown","_getDropdownRoot","_colorSelect","_get_isDropdownVisible","nextSibling","hideDropdown","focusVisible","role","_this6","AltText","_AltText_brand","_altText","_altTextDecorative","_altTextButton","_altTextTooltip","_altTextTooltipTimeout","_altTextWasFromKeyBoard","_editor2","l10nPromise","onClick","editAltText","_setState","finish","_ref47","tooltip","DELAY_TO_SHOW_TOOLTIP","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","_AnnotationEditor_brand","_allResizerDivs","_altText2","_disabled","_keepAspectRatio","_resizersDiv","_savedDimensions","_boundFocusin","_boundFocusout","focusout","_editToolbar","_focusedResizerName","_hasBeenClicked","_initialPosition","_isEditing","_isInEditMode","_isResizerEnabledForKeyboard","_moveInDOMTimeout","_prevDragX","_prevDragY","_telemetryTimeouts","_zIndex","pageRotation","getHexCode","fakeEditor","FakeEditor","_borderLineWidth","_value","isEnterHandled","_stopResizing","closest","isMultipleSelection","screenToPageTranslation","_translate","scrollIntoView","block","drag","bx","by","toFixed","_rotatePoint","scaledWidth","scaledHeight","widthPercent","endsWith","heightPercent","altTextFinish","EditorToolbar","removeEditToolbar","getClientDimensions","maxWidth","maxHeight","_setUpDragSession","_selectOnPointerEvent","_setParentAndPosition","getRectInCurrentCoords","_angle","hasBeenModified","timeout","makeResizable","_createResizers","savedX","savedY","savedWidth","savedHeight","boundResizerKeydown","_resizerKeydown","boundResizerBlur","_resizerBlur","_resizerFocus","firstPosition","nextFirstPosition","_setResizerTabIndex","stopImmediatePropagation","_resizerPointermove","movementX","movementY","aspectRatio","mustWait","_telemetryTimeout","_AnnotationEditor","_ref48","_getRotationMatrix","classes","_resizerPointerdown","boundResizerPointermove","savedDraggable","pointerMoveOptions","savedParentCursor","cursor","savedCursor","_addResizeToUndoStack","newX","newY","minWidth","minHeight","rotationMatrix","transf","invRotationMatrix","invTransf","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","oldDiag","setUpDragSession","pointerMoveCallback","clientX","clientY","dragSelectedEditors","endDragSession","ColorManager","innerMargin","_Outliner_brand","_box","_verticalEdges","_intervals","NUMBER_OF_DIGITS","EPSILON","right","shiftedMinX","shiftedMinY","lastEdge","edge","sort","outlineVerticalEdges","_breakEdge","_insert","_remove","_getOutlines","edges","allEdges","edge1","edge2","outline","lastPointX","lastPointY","HighlightOutline","_binarySearch","array","middle","_ref53","_ref54","y4","Outline","_rotation","FreeHighlightOutline","_box2","_outlines","polygon","_ref49","_box3","_bottom","_innerMargin","_isLTR","_top","_last","_lastX","_lastY","_min","_min_dist","_scaleFactor","_thickness2","_points","_FreeOutliner_brand","_ref50","Float64Array","_MIN_DIST","_MIN","_ref51","diffX","diffY","diffD","K","nX","nY","thX","thY","atan2","PI","bottom","lastTop","lastBottom","lastTopX","lastTopY","lastBottomX","lastBottomY","_getLastCoords","last","N","_MIN_DIFF","_box4","_bbox2","_innerMargin2","_isLTR2","_points2","_scaleFactor2","_outline","_FreeHighlightOutline_brand","_computeMinMax","_ref52","_rescale","_rescaleAndSwap","ltrCallback","_EditorToolbar_brand","_toolbar","_colorPicker2","_editor3","_buttons","editToolbar","_pointerDown2","buttons","insetInlineEnd","_addDeleteButton","_addListenersToElement","_get_divider","colorPicker","_focusIn","_focusOut","_this7","divider","_buttons2","_toolbar2","_uiManager4","_HighlightToolbar_brand","HighlightToolbar","_getLastPoint","_render","_addHighlightButton","highlightSelection","_id4","IdManager","_this$id7","_this$id8","AnnotationEditorPrefix","_baseId","_id5","_cache2","_ImageManager_brand","ImageManager","getUuid","_isSVGFittingCanvas","Image","decode","lastModified","_get","refCounter","svgUrl","_ImageManager","rawData","_this$id9","_this$id10","_display_utils_js__WEBPACK_IMPORTED_MODULE_1__","mustRemoveAspectRatioPromise","imageElement","imagePromise","onerror","createImageBitmap","_commands","_locked","_maxSize","_position","CommandManager","_ref55","redo","hasSomethingToUndo","hasSomethingToRedo","_KeyboardManager_brand","callbacks","allKeys","isMacKey","_serialize","matchMedia","RGB","every","_colorsMapping","_activeEditor","_allEditors","_allLayers","_altTextManager","_annotationStorage","_changedExistingAnnotations","_commandManager","_currentPageIndex","_deletedAnnotationsElementIds","_draggingEditors","_editorTypes2","_editorsToRescale","_enableHighlightFloatingButton","_filterFactory","_focusMainContainerTimeoutId","_highlightColors","_highlightWhenShiftUp","_highlightToolbar","_idManager","_isEnabled","_isWaiting","_lastActiveElement","_mainHighlightColorPicker","_mlManager","_mode","_selectedEditors","_selectedTextNode","_pageColors","_showAllStates","_boundBlur","_boundFocus","_boundCopy","_boundCut","_boundPaste","_boundKeydown2","_boundKeyup","_boundOnEditingAction","_boundOnPageChanging","_boundOnScaleChanging","_boundSelectionChange","_boundOnRotationChanging","_previousStates","_translation","_translationTimeoutId","_container2","_viewer","_AnnotationEditorUIManager_brand","tagName","hasSomethingToControl","textInputChecker","_self","_ref56","el","HTMLInputElement","selectAll","addNewEditorFromKeyboard","_ref57","HTMLButtonElement","_ref58","viewer","altTextManager","pdfDocument","enableHighlightFloatingButton","mlManager","blur","copy","cut","keyup","onEditingAction","onPageChanging","_selectionChange","onRotationChanging","hasSelectedEditor","hasSelectedText","_on","_addSelectionListener","_addKeyboardManager","isShiftKeyDown","_removeKeyboardManager","_removeFocusManager","_off","_removeSelectionListener","guess","pair","reverse","setMainHighlightColorPicker","_ref59","focusMainContainer","disableUserSelect","_ref60","_ref61","pagesRotation","isCollapsed","anchorElement","_getAnchorElementForSelection","getSelectionBoxes","empty","_onSelectEnd","hasSelection","lastEditor","lastActiveElement","addEditListeners","_addCopyPasteListeners","removeEditListeners","_removeCopyPasteListeners","editors","setData","parse","newEditors","deserializedEditor","_addEditorToLayer","_selectEditors","isEditorHandlingKeyboard","_ref62","_addFocusManager","_dispatchUpdateStates","_isEmpty","_dispatchUpdateUI","getLayer","currentPageIndex","isFromKeyboard","_disableAll","_enableAll","CREATE","HIGHLIGHT_SHOW_ALL","updateButton","state","getEditor","_get_lastSelectedEditor","ed","firstSelectedEditor","noCommit","totalX","totalY","savedPageIndex","newPageIndex","mustBeAddedInUndoStack","move","isActive","commonAncestorContainer","rotator","collapsed","getClientRects","_ref63","_ref64","editorId","_ref65","_displayHighlightToolbar","_toolbar_js__WEBPACK_IMPORTED_MODULE_2__","hasChanged","_ref66","_this8","createFetchOptions","headers","abortController","method","signal","credentials","redirect","createHeaders","Headers","getArrayBuffer","isHttp","_fullRequestReader","_rangeRequestReaders","_progressiveDataLength","_loaded","PDFFetchStreamReader","PDFFetchStreamRangeReader","stream","_stream","_reader","_filename","_withCredentials","_contentLength","_headersCapability","_disableRange","_rangeChunkSize","_abortController","AbortController","_isStreamingSupported","_isRangeSupported","_headers","_network_utils_js__WEBPACK_IMPORTED_MODULE_1__","validateResponseStatus","createResponseStatusError","getResponseHeader","allowRangeRequests","suggestedLength","validateRangeRequestCapabilities","extractFilenameFromHeader","_readCapability","_ref67","_systemFonts","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","_ref68","_inspectFont","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","attached","createNativeFontFace","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","hasFonts","supported","navigator","userAgent","completeRequest","otherRequest","_loadTestFont","testFont","atob","int32","charCodeAt","spliceString","chunk1","chunk2","called","isFontReady","COMMENT_OFFSET","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","string32","btoa","fontFamily","translatedData","_ref69","compiledGlyphs","cssFontInfo","weight","fontWeight","italicAngle","bytesToString","mimetype","cmds","commands","FontRenderOps","BEZIER_CURVE_TO","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","quadraticCurveTo","RESTORE","SAVE","SCALE","TRANSFORM","TRANSLATE","glyphDrawer","_ref70","parsedData","_metadataMap","_data","getRaw","OK_RESPONSE","PARTIAL_CONTENT_RESPONSE","xhr","NetworkManager","currXhrId","pendingRequests","requestRange","listeners","prop","requestFull","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","ok_response_on_range_request","rangeHeader","getRequestXhr","isPendingRequest","abortRequest","_source","_manager","_onRangeRequestReaderClosed","indexOf","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_onHeadersReceived","_onDone","_onError","_onProgress","_url","_fullRequestId","_headersReceivedCapability","_cachedChunks","_requests","_done","_storedError","fullRequestXhrId","fullRequestXhr","requestCapability","lengthComputable","_requestId","_queuedChunk","_close","getFilenameFromContentDispositionHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","contentDispositionStr","iter","quot","part","parts","quotindex","extvalue","encodingend","langvalue","replace","charset","hex","String","fromCharCode","_ref71","returnValues","contentEncoding","fs","http","https","fileUriRegex","parseUrl","sourceUrl","parsedUrl","host","isFsUrl","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","_readableStream","_error","_setReadableStream","BaseRangeReader","createRequestOptions","auth","hostname","handleResponse","statusCode","_request","_httpHeaders","promises","lstat","stat","createReadStream","path2d","readFile","createCanvas","INTERNAL","_isDisplay","_isPrint","_userSet","_visible","OptionalContentGroup","_ref72","usage","viewState","printState","_setVisible","internal","userSet","_cachedGetHash","_groups","_initialHash","_order","_OptionalContentConfig_brand","creator","order","groups","baseState","off","getHash","expression","_evaluateVisibilityExpression","policy","setVisibility","_ref73","preserveRB","operator","hasInitialVisibility","getOrder","getGroups","getGroup","_shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__","MAX_TEXT_DIVS_TO_RENDER","DEFAULT_FONT_ASCENT","ascentCache","_canvasContext","getCtx","getAscent","cachedAscent","savedFont","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","pixels","appendText","geom","textDiv","textDivProperties","hasText","hasEOL","_textDivs","_transform","fontName","_fontInspectorEnabled","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","_rootContainer","_pageWidth","_pageHeight","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","_textDivProperties","_isReadableStream","_layoutText","layout","prevFontSize","prevFontFamily","_canceled","textDivs","textDivsLength","TextLayerRenderTask","_ref74","textContentSource","textContentItemsStr","_textContentSource","ReadableStream","_textContentItemsStr","_layoutTextParams","_processItems","styleCache","br","_ref75","renderTextLayer","updateTextLayer","_ref76","mustRescale","pdfDataRangeTransport","_ref77","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_rangeReaders","_onReceiveData","_onProgressiveDone","_ref78","_enqueue","found","_begin","_removeRangeReader","queuedChunks","PDFDataTransportStreamReader","PDFDataTransportStreamRangeReader","_headersReady","_end","requestsCapability","_src","setupStorage","xfaOn","xfaOff","setAttributes","_ref79","isHTMLAnchorElement","HTMLAnchorElement","dataId","rootHtml","isNotForRichText","rootDiv","_xfa_text_js__WEBPACK_IMPORTED_MODULE_0__","shouldBuildText","stack","childHtml","xmlns","querySelectorAll","walk","pdfjsVersion","pdfjsBuild","CallbackKind","UNKNOWN","DATA","ERROR","StreamKind","CANCEL","CANCEL_COMPLETE","CLOSE","ENQUEUE","PULL","PULL_COMPLETE","START_COMPLETE","wrapReason","_util_js__WEBPACK_IMPORTED_MODULE_0__","_MessageHandler_brand","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","_processStreamMessage","cbSourceName","cbTargetName","_createStreamSink","handler","ah","transfers","queueingStrategy","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","isCancelled","lastDesiredSize","sinkCapability","streamController","_deleteStreamController","allSettled","SEED","MASK_HIGH","MASK_LOW","seed","h1","h2","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","process","versions","nw","electron","LINE_DESCENT_FACTOR","BASELINE_FACTOR","RESIZE","FREETEXT_OPACITY","PermissionFlag","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","FILL_ADD_TO_PATH","STROKE_ADD_TO_PATH","FILL_STROKE_ADD_TO_PATH","ADD_TO_PATH","SOUND","MOVIE","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationReplyType","GROUP","REPLY","AnnotationFlag","HIDDEN","NOZOOM","NOROTATE","NOVIEW","READONLY","LOCKED","TOGGLENOVIEW","LOCKEDCONTENTS","AnnotationFieldFlag","REQUIRED","NOEXPORT","MULTILINE","PASSWORD","NOTOGGLETOOFF","RADIO","PUSHBUTTON","COMBO","EDIT","SORT","FILESELECT","MULTISELECT","DONOTSPELLCHECK","DONOTSCROLL","COMB","RICHTEXT","RADIOSINUNISON","COMMITONSELCHANGE","AnnotationActionEventType","E","X","D","U","Fo","Bl","PO","PC","PV","F","V","C","DocumentActionEventType","WC","WS","DS","WP","DP","PageActionEventType","O","VerbosityLevel","ERRORS","WARNINGS","INFOS","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setFillColor","setStrokeGray","setFillGray","setStrokeCMYKColor","setFillCMYKColor","endInlineImage","paintXObject","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","level","cond","_isValidProtocol","createValidAbsoluteUrl","addDefaultProtocol","dots","tryConvertEncoding","stringToUTF8String","absoluteUrl","nonSerializable","defineProperty","enumerable","configurable","writable","BaseExceptionClosure","MAX_ARGUMENT_COUNT","strBuf","chunkEnd","objectSize","buffer8","view32","Function","hexNumbers","temp","m1","m2","xt","yt","transpose","sqrt","rect1","rect2","xLow","xHigh","yLow","yHigh","_getExtremum","_Util","_getExtremumOnCurve","t","mt","tt","ttt","delta","sqrtDelta","a2","PDFStringTranslateTable","stringToPDFString","decoded","charCode","charAt","escape","utf8StringToString","encodeURIComponent","isArrayEqual","arr1","arr2","getModificationDate","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","NormalizeRegex","NormalizationMap","normalizeUnicode","crypto","randomUUID","buf","getRandomValues","random","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","webpackQueues","webpackExports","webpackError","resolveQueue","queue","forEach","fn","wrapDeps","deps","dep","ret","hasAwait","depQueues","currentDeps","outerResolve","rej","getResult","fnQueue","err","definition","o","__webpack_exports__"],"sources":["webpack://pdf.js/src/shared/scripting_utils.js","webpack://pdf.js/src/display/annotation_layer.js","webpack://pdf.js/src/display/annotation_storage.js","webpack://pdf.js/src/display/api.js","webpack://pdf.js/src/display/base_factory.js","webpack://pdf.js/src/display/pattern_helper.js","webpack://pdf.js/src/shared/image_utils.js","webpack://pdf.js/src/display/canvas.js","webpack://pdf.js/src/display/display_utils.js","webpack://pdf.js/src/display/draw_layer.js","webpack://pdf.js/src/display/editor/freetext.js","webpack://pdf.js/src/display/editor/highlight.js","webpack://pdf.js/src/display/editor/ink.js","webpack://pdf.js/src/display/editor/stamp.js","webpack://pdf.js/src/display/editor/annotation_editor_layer.js","webpack://pdf.js/src/display/editor/color_picker.js","webpack://pdf.js/src/display/editor/alt_text.js","webpack://pdf.js/src/display/editor/editor.js","webpack://pdf.js/src/display/editor/outliner.js","webpack://pdf.js/src/display/editor/toolbar.js","webpack://pdf.js/src/display/editor/tools.js","webpack://pdf.js/src/display/fetch_stream.js","webpack://pdf.js/src/display/font_loader.js","webpack://pdf.js/src/display/metadata.js","webpack://pdf.js/src/display/network.js","webpack://pdf.js/src/display/content_disposition.js","webpack://pdf.js/src/display/network_utils.js","webpack://pdf.js/src/display/node_stream.js","webpack://pdf.js/src/display/node_utils.js","webpack://pdf.js/src/display/optional_content_config.js","webpack://pdf.js/src/display/text_layer.js","webpack://pdf.js/src/display/transport_stream.js","webpack://pdf.js/src/display/worker_options.js","webpack://pdf.js/src/display/xfa_layer.js","webpack://pdf.js/src/display/xfa_text.js","webpack://pdf.js/src/pdf.js","webpack://pdf.js/src/shared/message_handler.js","webpack://pdf.js/src/shared/murmurhash3.js","webpack://pdf.js/src/shared/util.js","webpack://pdf.js/webpack/bootstrap","webpack://pdf.js/webpack/runtime/async module","webpack://pdf.js/webpack/runtime/define property getters","webpack://pdf.js/webpack/runtime/hasOwnProperty shorthand","webpack://pdf.js/webpack/before-startup","webpack://pdf.js/webpack/startup","webpack://pdf.js/webpack/after-startup"],"sourcesContent":["/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * PLEASE NOTE: This file is currently imported in both the `../display/` and\n *              `../scripting_api/` folders, hence be EXTREMELY careful about\n *              introducing any dependencies here since that can lead to an\n *              unexpected/unnecessary size increase of the *built* files.\n */\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255)\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\n\n// PDF specifications section 10.3\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n\n  static T_HTML() {\n    return \"#00000000\";\n  }\n\n  static T_rgb() {\n    return [null];\n  }\n\n  static CMYK_RGB([c, y, m, k]) {\n    return [\n      \"RGB\",\n      1 - Math.min(1, c + k),\n      1 - Math.min(1, m + k),\n      1 - Math.min(1, y + k),\n    ];\n  }\n\n  static CMYK_rgb([c, y, m, k]) {\n    return [\n      scaleAndClamp(1 - Math.min(1, c + k)),\n      scaleAndClamp(1 - Math.min(1, m + k)),\n      scaleAndClamp(1 - Math.min(1, y + k)),\n    ];\n  }\n\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\nexport { ColorConverters };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/editor/tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n\nimport {\n  AnnotationBorderStyleType,\n  AnnotationEditorType,\n  AnnotationPrefix,\n  AnnotationType,\n  FeatureTest,\n  LINE_FACTOR,\n  shadow,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  DOMSVGFactory,\n  getFilenameFromUrl,\n  PDFDateString,\n  setLayerDimensions,\n} from \"./display_utils.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\nimport { ColorConverters } from \"../shared/scripting_utils.js\";\nimport { XfaLayer } from \"./xfa_layer.js\";\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\n\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1],\n  };\n}\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} [downloadManager]\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {Object} svgFactory\n * @property {boolean} [enableScripting]\n * @property {boolean} [hasJSActions]\n * @property {Object} [fieldObjects]\n */\n\nclass AnnotationElementFactory {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\n\nclass AnnotationElement {\n  #updates = null;\n\n  #hasBorder = false;\n\n  constructor(\n    parameters,\n    {\n      isRenderable = false,\n      ignoreBorder = false,\n      createQuadrilaterals = false,\n    } = {}\n  ) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n\n  static _hasPopupData({ titleObj, contentsObj, richText }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n\n    this.#updates ||= {\n      rect: this.data.rect.slice(0),\n    };\n\n    const { rect } = params;\n\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n  }\n\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#updates = null;\n  }\n\n  #setRectEdited(rect) {\n    const {\n      container: { style },\n      data: { rect: currentRect, rotation },\n      parent: {\n        viewport: {\n          rawDims: { pageWidth, pageHeight, pageX, pageY },\n        },\n      },\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    const { width, height } = getRectDims(rect);\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (pageHeight - rect[3] + pageY)) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n\n  /**\n   * Create an empty container for the annotation's HTML element.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {HTMLElement} A section element.\n   */\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: { page, viewport },\n    } = this;\n\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const { style } = container;\n\n    // The accessibility manager will move the annotation in the DOM in\n    // order to match the visual ordering.\n    // But if an annotation is above an other one, then we must draw it\n    // after the other one whatever the order is in the DOM, hence the\n    // use of the z-index.\n    style.zIndex = this.parent.zIndex++;\n\n    if (data.popupRef) {\n      container.setAttribute(\"aria-haspopup\", \"dialog\");\n    }\n\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const { rotation } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n\n    const { width, height } = getRectDims(data.rect);\n\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      }\n\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n\n        default:\n          break;\n      }\n\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(\n          borderColor[0] | 0,\n          borderColor[1] | 0,\n          borderColor[2] | 0\n        );\n      } else {\n        // Transparent (invisible) border, so do not draw it at all.\n        style.borderWidth = 0;\n      }\n    }\n\n    // Do *not* modify `data.rect`, since that will corrupt the annotation\n    // position on subsequent calls to `_createContainer` (see issue 6804).\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (rect[1] - pageY)) / pageHeight}%`;\n\n    const { rotation } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n\n    return container;\n  }\n\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const { pageWidth, pageHeight } = this.parent.viewport.rawDims;\n    const { width, height } = getRectDims(this.data.rect);\n\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = (100 * width) / pageWidth;\n      elementHeight = (100 * height) / pageHeight;\n    } else {\n      elementWidth = (100 * height) / pageWidth;\n      elementHeight = (100 * width) / pageHeight;\n    }\n\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] =\n        ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray),\n      });\n    };\n\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const { display } = event.detail;\n        // See scripting/constants.js for the values of `Display`.\n        // 0 = visible, 1 = hidden, 2 = noPrint and 3 = noView.\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2,\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print,\n        });\n      },\n      hidden: event => {\n        const { hidden } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden,\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({ preventScroll: false }), 0);\n      },\n      userName: event => {\n        // tooltip\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle,\n        });\n      },\n    });\n  }\n\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n\n    // Some properties may have been updated thanks to JS.\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail,\n          },\n          target: element,\n        };\n        action(eventProxy);\n        // The action has been consumed: no need to keep it.\n        delete storedData[actionName];\n      }\n    }\n  }\n\n  /**\n   * Create quadrilaterals from the annotation's quadpoints.\n   *\n   * @private\n   * @memberof AnnotationElement\n   */\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const { quadPoints } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect;\n\n    if (quadPoints.length === 1) {\n      const [, { x: trX, y: trY }, { x: blX, y: blY }] = quadPoints[0];\n      if (\n        rectTrX === trX &&\n        rectTrY === trY &&\n        rectBlX === blX &&\n        rectBlY === blY\n      ) {\n        // The quadpoints cover the whole annotation rectangle, so no need to\n        // create a quadrilateral.\n        return;\n      }\n    }\n\n    const { style } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const { borderColor, borderWidth } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\n        \"url('data:image/svg+xml;utf8,\",\n        `<svg xmlns=\"http://www.w3.org/2000/svg\"`,\n        ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`,\n        `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`,\n      ];\n      this.container.classList.add(\"hasBorder\");\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      this.container.classList.add(\"hasClipPath\");\n    }\n\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n\n    const { svgFactory } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n\n    for (const [, { x: trX, y: trY }, { x: blX, y: blY }] of quadPoints) {\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(\n        `<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`\n      );\n    }\n\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n\n  /**\n   * Create a popup for the annotation's HTML element. This is used for\n   * annotations that do not have a Popup entry in the dictionary, but\n   * are of a type that works with popups (such as Highlight annotations).\n   *\n   * @private\n   * @memberof AnnotationElement\n   */\n  _createPopup() {\n    const { container, data } = this;\n    container.setAttribute(\"aria-haspopup\", \"dialog\");\n\n    const popup = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation,\n      },\n      parent: this.parent,\n      elements: [this],\n    });\n    this.parent.div.append(popup.render());\n  }\n\n  /**\n   * Render the annotation's HTML element(s).\n   *\n   * @public\n   * @memberof AnnotationElement\n   */\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n\n  /**\n   * @private\n   * @returns {Array}\n   */\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const { page, id, exportValues } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue =\n            typeof exportValues === \"string\" ? exportValues : null;\n\n          const domElement = document.querySelector(\n            `[data-element-id=\"${id}\"]`\n          );\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({ id, exportValue, domElement });\n        }\n      }\n      return fields;\n    }\n    // Fallback to a regular DOM lookup, to ensure that the standalone\n    // viewer components won't break.\n    for (const domElement of document.getElementsByName(name)) {\n      const { exportValue } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({ id, exportValue, domElement });\n    }\n    return fields;\n  }\n\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n\n  /**\n   * Get the HTML element(s) which can trigger a popup when clicked or hovered.\n   *\n   * @public\n   * @memberof AnnotationElement\n   * @returns {Array<HTMLElement>|HTMLElement} An array of elements or an\n   *          element.\n   */\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n\n  get _isEditable() {\n    return false;\n  }\n\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: { id: editId },\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId,\n      });\n    });\n  }\n}\n\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true,\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n\n  render() {\n    const { data, linkService } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (\n        data.actions &&\n        (data.actions.Action ||\n          data.actions[\"Mouse Up\"] ||\n          data.actions[\"Mouse Down\"]) &&\n        this.enableScripting &&\n        this.hasJSActions\n      ) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n\n    return this.container;\n  }\n\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n\n  /**\n   * Bind internal links to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} destination\n   * @memberof LinkAnnotationElement\n   */\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === /* isTooltipOnly = */ \"\") {\n      this.#setInternalLink();\n    }\n  }\n\n  /**\n   * Bind named actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} action\n   * @memberof LinkAnnotationElement\n   */\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind attachments to the link element.\n   * @param {Object} link\n   * @param {Object} attachment\n   * @param {str} [dest]\n   */\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(\n        attachment.content,\n        attachment.filename,\n        dest\n      );\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind SetOCGState actions to the link element.\n   * @param {Object} link\n   * @param {Object} action\n   */\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind JS actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} data\n   * @memberof LinkAnnotationElement\n   */\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([\n      [\"Action\", \"onclick\"],\n      [\"Mouse Up\", \"onmouseup\"],\n      [\"Mouse Down\", \"onmousedown\"],\n    ]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name,\n          },\n        });\n        return false;\n      };\n    }\n\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n\n    if (!this._fieldObjects) {\n      warn(\n        `_bindResetFormAction - \"resetForm\" action not supported, ` +\n          \"ensure that the `fieldObjects` parameter is provided.\"\n      );\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n\n    link.onclick = () => {\n      otherClickAction?.();\n\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include,\n      } = resetForm;\n\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const { id } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const { id } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"checkbox\":\n          case \"radiobutton\": {\n            const value = field.defaultValue === field.exportValues;\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"combobox\":\n          case \"listbox\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          default:\n            continue;\n        }\n\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n\n      if (this.enableScripting) {\n        // Update the values in the sandbox.\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\",\n          },\n        });\n      }\n\n      return false;\n    };\n  }\n}\n\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n  }\n\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n\n    const image = document.createElement(\"img\");\n    image.src =\n      this.imageResourcesPath +\n      \"annotation-\" +\n      this.data.name.toLowerCase() +\n      \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\n      \"data-l10n-args\",\n      JSON.stringify({ type: this.data.name })\n    );\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.append(image);\n    return this.container;\n  }\n}\n\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    // Show only the container for unsupported field types.\n    return this.container;\n  }\n\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n\n  _getKeyModifier(event) {\n    return FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      // Mouse events\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event),\n          },\n        });\n      });\n    } else {\n      // Non-mouse events\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n\n        if (!valueGetter) {\n          return;\n        }\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n          },\n        });\n      });\n    }\n  }\n\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= { focused: false };\n        }\n        this._setEventListener(\n          element,\n          elementData,\n          baseName,\n          eventName,\n          getter\n        );\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          // Ensure that elementData will have the correct value.\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor =\n      color === null\n        ? \"transparent\"\n        : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n\n  /**\n   * Apply text styles to the text in the element.\n   *\n   * @private\n   * @param {HTMLDivElement} element\n   * @memberof TextWidgetAnnotationElement\n   */\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const { fontColor } = this.data.defaultAppearanceData;\n    const fontSize =\n      this.data.defaultAppearanceData.fontSize || DEFAULT_FONT_SIZE;\n\n    const style = element.style;\n\n    // TODO: If the font-size is zero, calculate it based on the height and\n    //       width of the element.\n    // Not setting `style.fontSize` will use the default font-size for now.\n\n    // We don't use the font, as specified in the PDF document, for the <input>\n    // element. Hence using the original `fontSize` could look bad, which is why\n    // it's instead based on the field height.\n    // If the height is \"big\" then it could lead to a too big font size\n    // so in this case use the one we've in the pdf (hence the min).\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(lineHeight / LINE_FACTOR)\n      );\n    } else {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(height / LINE_FACTOR)\n      );\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\n\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderForms ||\n      parameters.data.hasOwnCanvas ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, { isRenderable });\n  }\n\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(\n      base.name,\n      /* skipId = */ base.id\n    )) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, { [keyInStorage]: value });\n    }\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    this.container.classList.add(\"textWidgetAnnotation\");\n\n    let element = null;\n    if (this.renderForms) {\n      // NOTE: We cannot set the values using `element.value` below, since it\n      //       prevents the AnnotationLayer rasterizer in `test/driver.js`\n      //       from parsing the elements correctly for the reference tests.\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue,\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen,\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n\n      let fieldFormattedValues =\n        storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false,\n      };\n\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n\n      this._setRequired(element, this.data.required);\n\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, { value: event.target.value });\n        this.setPropertyOnSiblings(\n          element,\n          \"value\",\n          event.target.value,\n          \"value\"\n        );\n        elementData.formattedValue = null;\n      });\n\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n\n      let blurListener = event => {\n        const { formattedValue } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        // Reset the cursor position to the start of the field (issue 12359).\n        event.target.scrollLeft = 0;\n      };\n\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const { target } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, { value: elementData.userValue.toString() });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const { formattedValue } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (\n                formattedValue !== null &&\n                formattedValue !== undefined &&\n                event.target !== document.activeElement\n              ) {\n                // Input hasn't the focus so display formatted string\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue,\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const { charLimit } = event.detail;\n              const { target } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, { value });\n\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd,\n                },\n              });\n            },\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n\n        // Even if the field hasn't any actions\n        // leaving it can still trigger some actions with Calculate\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          // If the key is one of Escape, Enter then the data are committed.\n          // If we've a Tab then data will be committed on blur.\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            // When we've a multiline field, \"Enter\" key is a key as the other\n            // hence we don't commit the data (Acrobat behaves the same way)\n            // (see issue #15627).\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const { value } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          // Save the entered value\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd,\n            },\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const { value } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd,\n              },\n            });\n          }\n          _blurListener(event);\n        });\n\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const { data, target } = event;\n            const { value, selectionStart, selectionEnd } = target;\n\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n\n            switch (event.inputType) {\n              // https://rawgit.com/w3c/input-events/v1/index.html#interface-InputEvent-Attributes\n              case \"deleteWordBackward\": {\n                const match = value\n                  .substring(0, selectionStart)\n                  .match(/\\w*[^\\w]*$/);\n                if (match) {\n                  selStart -= match[0].length;\n                }\n                break;\n              }\n              case \"deleteWordForward\": {\n                const match = value\n                  .substring(selectionStart)\n                  .match(/^[^\\w]*\\w*/);\n                if (match) {\n                  selEnd += match[0].length;\n                }\n                break;\n              }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n\n            // We handle the event ourselves.\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd,\n              },\n            });\n          });\n        }\n\n        this._setEventListeners(\n          element,\n          elementData,\n          [\n            [\"focus\", \"Focus\"],\n            [\"blur\", \"Blur\"],\n            [\"mousedown\", \"Mouse Down\"],\n            [\"mouseenter\", \"Mouse Enter\"],\n            [\"mouseleave\", \"Mouse Exit\"],\n            [\"mouseup\", \"Mouse Up\"],\n          ],\n          event => event.target.value\n        );\n      }\n\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: !!parameters.data.hasOwnCanvas });\n  }\n}\n\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== \"Off\";\n      storage.setValue(id, { value });\n    }\n\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const checkbox of this._getElementsByName(name, /* skipId = */ id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, { value: curChecked });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, { value: event.target.checked });\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        null,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== data.buttonValue;\n      storage.setValue(id, { value });\n    }\n\n    if (value) {\n      // It's possible that multiple radio buttons are checked.\n      // So if this one is checked we just reset the other ones.\n      // (see bug 1864136). Then when the other ones will be rendered they will\n      // unchecked (because of their value in the storage).\n      // Consequently, the first checked radio button will be the only checked\n      // one.\n      for (const radio of this._getElementsByName(\n        data.fieldName,\n        /* skipId = */ id\n      )) {\n        storage.setValue(radio.id, { value: false });\n      }\n    }\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const radio of this._getElementsByName(name, /* skipId = */ id)) {\n        storage.setValue(radio.id, { value: false });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked =\n        defaultValue !== null &&\n        defaultValue !== undefined &&\n        defaultValue === data.buttonValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, { value: curChecked });\n            }\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        null,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { ignoreBorder: parameters.data.hasAppearance });\n  }\n\n  render() {\n    // The rendering and functionality of a push button widget annotation is\n    // equal to that of a link annotation, but may have more functionality, such\n    // as performing actions on form fields (resetting, submitting, et cetera).\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n\n    return container;\n  }\n}\n\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue,\n    });\n\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n\n    if (!this.data.combo) {\n      // List boxes have a size and (optionally) multiple selection.\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n\n    // Insert the options into the choice field.\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const { options, multiple } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1\n          ? null\n          : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter\n        .call(options, option => option.selected)\n        .map(option => option[name]);\n    };\n\n    let selectedValues = getValue(/* isExport */ false);\n\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value,\n      }));\n    };\n\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(\n                options,\n                option => option.selected\n              );\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, { value: null, items: [] });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          insert(event) {\n            const { index, displayValue, exportValue } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          items(event) {\n            const { items } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const { displayValue, exportValue } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(/* isExport */ true);\n        const change = getValue(/* isExport */ false);\n        storage.setValue(id, { value: exportValue });\n\n        event.preventDefault();\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false,\n          },\n        });\n      });\n\n      this._setEventListeners(\n        selectElement,\n        null,\n        [\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n          [\"input\", \"Action\"],\n          [\"input\", \"Validate\"],\n        ],\n        event => event.target.value\n      );\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, { value: getValue(/* isExport */ true) });\n      });\n    }\n\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {\n      // Just use the default font size...\n      // it's a bit hard to guess what is a good size.\n    }\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\n\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const { data, elements } = parameters;\n    super(parameters, { isRenderable: AnnotationElement._hasPopupData(data) });\n    this.elements = elements;\n  }\n\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n\n    const popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open,\n    });\n\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n\n    this.container.setAttribute(\n      \"aria-controls\",\n      elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\")\n    );\n\n    return this.container;\n  }\n}\n\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n\n  #boundHide = this.#hide.bind(this);\n\n  #boundShow = this.#show.bind(this);\n\n  #boundToggle = this.#toggle.bind(this);\n\n  #color = null;\n\n  #container = null;\n\n  #contentsObj = null;\n\n  #dateObj = null;\n\n  #elements = null;\n\n  #parent = null;\n\n  #parentRect = null;\n\n  #pinned = false;\n\n  #popup = null;\n\n  #rect = null;\n\n  #richText = null;\n\n  #titleObj = null;\n\n  #wasVisible = false;\n\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open,\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n\n    // The modification date is shown in the popup instead of the creation\n    // date if it is available and can be parsed correctly, which is\n    // consistent with other viewers such as Adobe Acrobat.\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    // Attach the event listeners to the trigger element.\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n\n    // Attach the event listener to toggle the popup with the keyboard.\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      // Since the popup is lazily created, we need to ensure that it'll be\n      // created and displayed during reference tests.\n      this.#parent.popupShow.push(async () => {\n        if (this.#container.hidden) {\n          this.#show();\n        }\n      });\n    }\n  }\n\n  render() {\n    if (this.#popup) {\n      return;\n    }\n\n    const {\n      page: { view },\n      viewport: {\n        rawDims: { pageWidth, pageHeight, pageX, pageY },\n      },\n    } = this.#parent;\n    const popup = (this.#popup = document.createElement(\"div\"));\n    popup.className = \"popup\";\n\n    if (this.#color) {\n      const baseColor = (popup.style.outlineColor = Util.makeHexColor(\n        ...this.#color\n      ));\n      if (\n        (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        CSS.supports(\"background-color\", \"color-mix(in srgb, red 30%, white)\")\n      ) {\n        popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n      } else {\n        // color-mix isn't supported in some browsers hence this version.\n        // See https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix#browser_compatibility\n        // TODO: Use color-mix when it's supported everywhere.\n        // Enlighten the color.\n        const BACKGROUND_ENLIGHT = 0.7;\n        popup.style.backgroundColor = Util.makeHexColor(\n          ...this.#color.map(c =>\n            Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)\n          )\n        );\n      }\n    }\n\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({ dir: title.dir, str: title.textContent } = this.#titleObj);\n    popup.append(header);\n\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\n        \"data-l10n-id\",\n        \"pdfjs-annotation-date-string\"\n      );\n      modificationDate.setAttribute(\n        \"data-l10n-args\",\n        JSON.stringify({\n          date: this.#dateObj.toLocaleDateString(),\n          time: this.#dateObj.toLocaleTimeString(),\n        })\n      );\n      header.append(modificationDate);\n    }\n\n    const contentsObj = this.#contentsObj;\n    const richText = this.#richText;\n    if (\n      richText?.str &&\n      (!contentsObj?.str || contentsObj.str === richText.str)\n    ) {\n      XfaLayer.render({\n        xfaHtml: richText.html,\n        intent: \"richText\",\n        div: popup,\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(contentsObj);\n      popup.append(contents);\n    }\n\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n\n    const normalizedRect = Util.normalizeRect([\n      rect[0],\n      view[3] - rect[1] + view[1],\n      rect[2],\n      view[3] - rect[3] + view[1],\n    ]);\n\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect\n      ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION\n      : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n\n    const { style } = this.#container;\n    style.left = `${(100 * (popupLeft - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (popupTop - pageY)) / pageHeight}%`;\n\n    this.#container.append(popup);\n  }\n\n  /**\n   * Format the contents of the popup by adding newlines where necessary.\n   *\n   * @private\n   * @param {Object<string, string>} contentsObj\n   * @memberof PopupElement\n   * @returns {HTMLParagraphElement}\n   */\n  _formatContents({ str, dir }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n\n    if (event.key === \"Enter\" || (event.key === \"Escape\" && this.#pinned)) {\n      this.#toggle();\n    }\n  }\n\n  /**\n   * Toggle the visibility of the popup.\n   */\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n\n  /**\n   * Show the popup.\n   */\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#container.hidden = false;\n      this.#container.style.zIndex =\n        parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n\n  /**\n   * Hide the popup.\n   */\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex =\n      parseInt(this.#container.style.zIndex) - 1000;\n  }\n\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\n\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this._editOnDoubleClick();\n\n    return this.container;\n  }\n\n  get _isEditable() {\n    return this.data.hasOwnCanvas;\n  }\n}\n\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n\n    // Create an invisible line with the same starting and ending coordinates\n    // that acts as the trigger for the popup. Only the line itself should\n    // trigger the popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // PDF coordinates are calculated from a bottom left origin, so transform\n    // the line coordinates to a top left origin for the SVG element.\n    const line = (this.#line = this.svgFactory.createElement(\"svg:line\"));\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(line);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the line instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n\n    // Create an invisible square with the same rectangle that acts as the\n    // trigger for the popup. Only the square itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the square and half of\n    // the borders outside the square by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const square = (this.#square = this.svgFactory.createElement(\"svg:rect\"));\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(square);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the square instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n\n    // Create an invisible circle with the same ellipse that acts as the\n    // trigger for the popup. Only the circle itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the circle and half of\n    // the borders outside the circle by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const circle = (this.#circle =\n      this.svgFactory.createElement(\"svg:ellipse\"));\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(circle);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the circle instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup. Only the polyline itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // Convert the vertices array to a single points string that the SVG\n    // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n    // calculated from a bottom left origin, so transform the polyline\n    // coordinates to a top left origin for the SVG element.\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + \",\" + y);\n    }\n    points = points.join(\" \");\n\n    const polyline = (this.#polyline = this.svgFactory.createElement(\n      this.svgElementName\n    ));\n    polyline.setAttribute(\"points\", points);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(polyline);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the polyline\n    // instead of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    // Polygons are specific forms of polylines, so reuse their logic.\n    super(parameters);\n\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\n\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\n\nclass InkAnnotationElement extends AnnotationElement {\n  #polylines = [];\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n\n    this.containerClassName = \"inkAnnotation\";\n\n    // Use the polyline SVG element since it allows us to use coordinates\n    // directly and to draw both straight lines and curves.\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = AnnotationEditorType.INK;\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    for (const inkList of data.inkLists) {\n      // Convert the ink list to a single points string that the SVG\n      // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n      // calculated from a bottom left origin, so transform the polyline\n      // coordinates to a top left origin for the SVG element.\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", points);\n      // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n      // won't be possible to open/close the popup (note e.g. issue 11122).\n      polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"transparent\");\n\n      // Create the popup ourselves so that we can bind it to the polyline\n      // instead of to the entire container (which is the default).\n      if (!data.popupRef && this.hasPopupData) {\n        this._createPopup();\n      }\n\n      svg.append(polyline);\n    }\n\n    this.container.append(svg);\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"highlightAnnotation\");\n    return this.container;\n  }\n}\n\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\n\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\n\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\n\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\n\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n\n    const { filename, content } = this.data.file;\n    this.filename = getFilenameFromUrl(filename, /* onlyStripPath = */ true);\n    this.content = content;\n\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      filename,\n      content,\n    });\n  }\n\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n\n    const { container, data } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      // Unfortunately it seems that it's not clearly specified exactly what\n      // names are actually valid, since Table 184 contains:\n      //   Conforming readers shall provide predefined icon appearances for at\n      //   least the following standard names: GraphPushPin, PaperclipTag.\n      //   Additional names may be supported as well. Default value: PushPin.\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${\n        /paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"\n      }.svg`;\n\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(\n          data.fillAlpha * 100\n        )}%);`;\n\n        if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n          this.container.classList.add(\"hasFillAlpha\");\n        }\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n\n    const { isMac } = FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n\n    container.append(trigger);\n    return container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n\n  /**\n   * Download the file attachment associated with this annotation.\n   */\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPageProxy} page\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} [downloadManager]\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {boolean} [enableScripting] - Enable embedded script execution.\n * @property {boolean} [hasJSActions] - Some fields have JS actions.\n *   The default value is `false`.\n * @property {Object<string, Array<Object>> | null} [fieldObjects]\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap]\n * @property {TextAccessibilityManager} [accessibilityManager]\n * @property {AnnotationEditorUIManager} [annotationEditorUIManager]\n */\n\n/**\n * Manage the layer containing all the annotations.\n */\nclass AnnotationLayer {\n  #accessibilityManager = null;\n\n  #annotationCanvasMap = null;\n\n  #editableAnnotations = new Map();\n\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"showPopups\", {\n        value: async () => {\n          for (const show of this.popupShow) {\n            await show();\n          }\n        },\n      });\n      this.popupShow = [];\n    }\n  }\n\n  #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${AnnotationPrefix}${id}`;\n\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      element,\n      contentElement,\n      /* isRemovable = */ false\n    );\n  }\n\n  /**\n   * Render a new annotation layer with all annotation elements.\n   *\n   * @param {AnnotationLayerParameters} params\n   * @memberof AnnotationLayer\n   */\n  async render(params) {\n    const { annotations } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null,\n    };\n\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        const { width, height } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue; // Ignore empty annotations.\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          // Ignore popup annotations without a corresponding annotation.\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n\n      if (!element.isRenderable) {\n        continue;\n      }\n\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      this.#appendElement(rendered, data.id);\n\n      if (element.annotationEditorType > 0) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n\n    this.#setAnnotationCanvasMap();\n  }\n\n  /**\n   * Update the annotation elements on existing annotation layer.\n   *\n   * @param {AnnotationLayerParameters} viewport\n   * @memberof AnnotationLayer\n   */\n  update({ viewport }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, { rotation: viewport.rotation });\n\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n\n      canvas.className = \"annotationContent\";\n      const { firstChild } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n}\n\nexport {\n  AnnotationLayer,\n  FreeTextAnnotationElement,\n  InkAnnotationElement,\n  StampAnnotationElement,\n};\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap, unreachable } from \"../shared/util.js\";\nimport { AnnotationEditor } from \"./editor/editor.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined,\n});\n\n/**\n * Key/value storage for annotation data in forms.\n */\nclass AnnotationStorage {\n  #modified = false;\n\n  #storage = new Map();\n\n  constructor() {\n    // Callbacks to signal when the modification state is set or reset.\n    // This is used by the viewer to only bind on `beforeunload` if forms\n    // are actually edited to prevent doing so unconditionally since that\n    // can have undesirable effects.\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n\n  /**\n   * Get the value for a given key if it exists, or return the default value.\n   * @param {string} key\n   * @param {Object} defaultValue\n   * @returns {Object}\n   */\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n\n    return Object.assign(defaultValue, value);\n  }\n\n  /**\n   * Get the value for a given key.\n   * @param {string} key\n   * @returns {Object}\n   */\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n\n  /**\n   * Remove a value from the storage.\n   * @param {string} key\n   */\n  remove(key) {\n    this.#storage.delete(key);\n\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n\n  /**\n   * Set the value for a given key\n   * @param {string} key\n   * @param {Object} value\n   */\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n\n    if (\n      value instanceof AnnotationEditor &&\n      typeof this.onAnnotationEditor === \"function\"\n    ) {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n\n  /**\n   * Check if the storage contains the given key.\n   * @param {string} key\n   * @returns {boolean}\n   */\n  has(key) {\n    return this.#storage.has(key);\n  }\n\n  /**\n   * @returns {Object | null}\n   */\n  getAll() {\n    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;\n  }\n\n  /**\n   * @param {Object} obj\n   */\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n\n  get size() {\n    return this.#storage.size;\n  }\n\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n\n    for (const [key, val] of this.#storage) {\n      const serialized =\n        val instanceof AnnotationEditor\n          ? val.serialize(/* isForCopying = */ false, context)\n          : val;\n      if (serialized) {\n        map.set(key, serialized);\n\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n\n    if (hasBitmap) {\n      // We must transfer the bitmap data separately, since it can be changed\n      // during serialization with SVG images.\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n\n    return map.size > 0\n      ? { map, hash: hash.hexdigest(), transfer }\n      : SerializableEmpty;\n  }\n\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const { type } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = (stats[type] ||= new Map());\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n}\n\n/**\n * A special `AnnotationStorage` for use during printing, where the serializable\n * data is *frozen* upon initialization, to prevent scripting from modifying its\n * contents. (Necessary since printing is triggered synchronously in browsers.)\n */\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n\n  constructor(parent) {\n    super();\n    const { map, hash, transfer } = parent.serializable;\n    // Create a *copy* of the data, since Objects are passed by reference in JS.\n    const clone = structuredClone(map, transfer ? { transfer } : null);\n\n    this.#serializable = { map: clone, hash, transfer };\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  // eslint-disable-next-line getter-return\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    return this.#serializable;\n  }\n}\n\nexport { AnnotationStorage, PrintAnnotationStorage, SerializableEmpty };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @module pdfjsLib\n */\n\nimport {\n  AbortException,\n  AnnotationMode,\n  assert,\n  getVerbosityLevel,\n  info,\n  InvalidPDFException,\n  isNodeJS,\n  MAX_IMAGE_SIZE_TO_CACHE,\n  MissingPDFException,\n  PasswordException,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  stringToBytes,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  AnnotationStorage,\n  PrintAnnotationStorage,\n  SerializableEmpty,\n} from \"./annotation_storage.js\";\nimport {\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMFilterFactory,\n  DOMStandardFontDataFactory,\n  isDataScheme,\n  isValidFetchUrl,\n  PageViewport,\n  RenderingCancelledException,\n  StatTimer,\n} from \"./display_utils.js\";\nimport { FontFaceObject, FontLoader } from \"./font_loader.js\";\nimport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n} from \"display-node_utils\";\nimport { CanvasGraphics } from \"./canvas.js\";\nimport { cleanupTextLayer } from \"./text_layer.js\";\nimport { GlobalWorkerOptions } from \"./worker_options.js\";\nimport { MessageHandler } from \"../shared/message_handler.js\";\nimport { Metadata } from \"./metadata.js\";\nimport { OptionalContentConfig } from \"./optional_content_config.js\";\nimport { PDFDataTransportStream } from \"./transport_stream.js\";\nimport { PDFFetchStream } from \"display-fetch_stream\";\nimport { PDFNetworkStream } from \"display-network\";\nimport { PDFNodeStream } from \"display-node_stream\";\nimport { XfaText } from \"./xfa_text.js\";\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536; // 2^16 = 65536\nconst RENDERING_CANCELLED_TIMEOUT = 100; // ms\nconst DELAYED_CLEANUP_TIMEOUT = 5000; // ms\n\nconst DefaultCanvasFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeCanvasFactory\n    : DOMCanvasFactory;\nconst DefaultCMapReaderFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeCMapReaderFactory\n    : DOMCMapReaderFactory;\nconst DefaultFilterFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeFilterFactory\n    : DOMFilterFactory;\nconst DefaultStandardFontDataFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeStandardFontDataFactory\n    : DOMStandardFontDataFactory;\n\n/**\n * @typedef { Int8Array | Uint8Array | Uint8ClampedArray |\n *            Int16Array | Uint16Array |\n *            Int32Array | Uint32Array | Float32Array |\n *            Float64Array\n * } TypedArray\n */\n\n/**\n * @typedef {Object} RefProxy\n * @property {number} num\n * @property {number} gen\n */\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string | URL} [url] - The URL of the PDF.\n * @property {TypedArray | ArrayBuffer | Array<number> | string} [data] -\n *   Binary PDF data.\n *   Use TypedArrays (Uint8Array) to improve the memory usage. If PDF data is\n *   BASE64-encoded, use `atob()` to convert it to a binary string first.\n *\n *   NOTE: If TypedArrays are used they will generally be transferred to the\n *   worker-thread. This will help reduce main-thread memory usage, however\n *   it will take ownership of the TypedArrays.\n * @property {Object} [httpHeaders] - Basic authentication headers.\n * @property {boolean} [withCredentials] - Indicates whether or not\n *   cross-site Access-Control requests should be made using credentials such\n *   as cookies or authorization headers. The default is `false`.\n * @property {string} [password] - For decrypting password-protected PDFs.\n * @property {number} [length] - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} [range] - Allows for using a custom range\n *   transport implementation.\n * @property {number} [rangeChunkSize] - Specify maximum number of bytes fetched\n *   per range request. The default value is {@link DEFAULT_RANGE_CHUNK_SIZE}.\n * @property {PDFWorker} [worker] - The worker that will be used for loading and\n *   parsing the PDF data.\n * @property {number} [verbosity] - Controls the logging level; the constants\n *   from {@link VerbosityLevel} should be used.\n * @property {string} [docBaseUrl] - The base URL of the document, used when\n *   attempting to recover valid absolute URLs for annotations, and outline\n *   items, that (incorrectly) only specify relative URLs.\n * @property {string} [cMapUrl] - The URL where the predefined Adobe CMaps are\n *   located. Include the trailing slash.\n * @property {boolean} [cMapPacked] - Specifies if the Adobe CMaps are binary\n *   packed or not. The default value is `true`.\n * @property {Object} [CMapReaderFactory] - The factory that will be used when\n *   reading built-in CMap files. Providing a custom factory is useful for\n *   environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMCMapReaderFactory}.\n * @property {boolean} [useSystemFonts] - When `true`, fonts that aren't\n *   embedded in the PDF document will fallback to a system font.\n *   The default value is `true` in web environments and `false` in Node.js;\n *   unless `disableFontFace === true` in which case this defaults to `false`\n *   regardless of the environment (to prevent completely broken fonts).\n * @property {string} [standardFontDataUrl] - The URL where the standard font\n *   files are located. Include the trailing slash.\n * @property {Object} [StandardFontDataFactory] - The factory that will be used\n *   when reading the standard font files. Providing a custom factory is useful\n *   for environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMStandardFontDataFactory}.\n * @property {boolean} [useWorkerFetch] - Enable using the Fetch API in the\n *   worker-thread when reading CMap and standard font files. When `true`,\n *   the `CMapReaderFactory` and `StandardFontDataFactory` options are ignored.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {boolean} [stopAtErrors] - Reject certain promises, e.g.\n *   `getOperatorList`, `getTextContent`, and `RenderTask`, when the associated\n *   PDF data cannot be successfully parsed, instead of attempting to recover\n *   whatever possible of the data. The default value is `false`.\n * @property {number} [maxImageSize] - The maximum allowed image size in total\n *   pixels, i.e. width * height. Images above this value will not be rendered.\n *   Use -1 for no limit, which is also the default value.\n * @property {boolean} [isEvalSupported] - Determines if we can evaluate strings\n *   as JavaScript. Primarily used to improve performance of PDF functions.\n *   The default value is `true`.\n * @property {boolean} [isOffscreenCanvasSupported] - Determines if we can use\n *   `OffscreenCanvas` in the worker. Primarily used to improve performance of\n *   image conversion/rendering.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {number} [canvasMaxAreaInBytes] - The integer value is used to\n *   know when an image must be resized (uses `OffscreenCanvas` in the worker).\n *   If it's -1 then a possibly slow algorithm is used to guess the max value.\n * @property {boolean} [disableFontFace] - By default fonts are converted to\n *   OpenType fonts and loaded via the Font Loading API or `@font-face` rules.\n *   If disabled, fonts will be rendered using a built-in font renderer that\n *   constructs the glyphs with primitive path commands.\n *   The default value is `false` in web environments and `true` in Node.js.\n * @property {boolean} [fontExtraProperties] - Include additional properties,\n *   which are unused during rendering of PDF documents, when exporting the\n *   parsed font data from the worker-thread. This may be useful for debugging\n *   purposes (and backwards compatibility), but note that it will lead to\n *   increased memory usage. The default value is `false`.\n * @property {boolean} [enableXfa] - Render Xfa forms if any.\n *   The default value is `false`.\n * @property {HTMLDocument} [ownerDocument] - Specify an explicit document\n *   context to create elements with and to load resources, such as fonts,\n *   into. Defaults to the current document.\n * @property {boolean} [disableRange] - Disable range request loading of PDF\n *   files. When enabled, and if the server supports partial content requests,\n *   then the PDF will be fetched in chunks. The default value is `false`.\n * @property {boolean} [disableStream] - Disable streaming of PDF file data.\n *   By default PDF.js attempts to load PDF files in chunks. The default value\n *   is `false`.\n * @property {boolean} [disableAutoFetch] - Disable pre-fetching of PDF file\n *   data. When range requests are enabled PDF.js will automatically keep\n *   fetching more data even if it isn't needed to display the current page.\n *   The default value is `false`.\n *\n *   NOTE: It is also necessary to disable streaming, see above, in order for\n *   disabling of pre-fetching to work correctly.\n * @property {boolean} [pdfBug] - Enables special hooks for debugging PDF.js\n *   (see `web/debugger.js`). The default value is `false`.\n * @property {Object} [canvasFactory] - The factory instance that will be used\n *   when creating canvases. The default value is {new DOMCanvasFactory()}.\n * @property {Object} [filterFactory] - A factory instance that will be used\n *   to create SVG filters when rendering some images on the main canvas.\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n *\n * NOTE: If a URL is used to fetch the PDF data a standard Fetch API call (or\n * XHR as fallback) is used, which means it must follow same origin rules,\n * e.g. no cross-domain requests without CORS.\n *\n * @param {string | URL | TypedArray | ArrayBuffer | DocumentInitParameters}\n *   src - Can be a URL where a PDF file is located, a typed array (Uint8Array)\n *         already populated with data, or a parameter object.\n * @returns {PDFDocumentLoadingTask}\n */\nfunction getDocument(src) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n    if (typeof src === \"string\" || src instanceof URL) {\n      src = { url: src };\n    } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n      src = { data: src };\n    }\n  }\n  if (typeof src !== \"object\") {\n    throw new Error(\"Invalid parameter in getDocument, need parameter object.\");\n  }\n  if (!src.url && !src.data && !src.range) {\n    throw new Error(\n      \"Invalid parameter object: need either .data, .range or .url\"\n    );\n  }\n  const task = new PDFDocumentLoadingTask();\n  const { docId } = task;\n\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport =\n    src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize =\n    Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0\n      ? src.rangeChunkSize\n      : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  // Ignore \"data:\"-URLs, since they can't be used to recover valid absolute\n  // URLs anyway. We want to avoid sending them to the worker-thread, since\n  // they contain the *entire* PDF document and can thus be arbitrarily long.\n  const docBaseUrl =\n    typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl)\n      ? src.docBaseUrl\n      : null;\n  const cMapUrl = typeof src.cMapUrl === \"string\" ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl =\n    typeof src.standardFontDataUrl === \"string\"\n      ? src.standardFontDataUrl\n      : null;\n  const StandardFontDataFactory =\n    src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize =\n    Number.isInteger(src.maxImageSize) && src.maxImageSize > -1\n      ? src.maxImageSize\n      : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported =\n    typeof src.isOffscreenCanvasSupported === \"boolean\"\n      ? src.isOffscreenCanvasSupported\n      : !isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes)\n    ? src.canvasMaxAreaInBytes\n    : -1;\n  const disableFontFace =\n    typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n\n  // Parameters whose default values depend on other parameters.\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts =\n    typeof src.useSystemFonts === \"boolean\"\n      ? src.useSystemFonts\n      : !isNodeJS && !disableFontFace;\n  const useWorkerFetch =\n    typeof src.useWorkerFetch === \"boolean\"\n      ? src.useWorkerFetch\n      : (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        (CMapReaderFactory === DOMCMapReaderFactory &&\n          StandardFontDataFactory === DOMStandardFontDataFactory &&\n          cMapUrl &&\n          standardFontDataUrl &&\n          isValidFetchUrl(cMapUrl, document.baseURI) &&\n          isValidFetchUrl(standardFontDataUrl, document.baseURI));\n  const canvasFactory =\n    src.canvasFactory || new DefaultCanvasFactory({ ownerDocument });\n  const filterFactory =\n    src.filterFactory || new DefaultFilterFactory({ docId, ownerDocument });\n\n  // Parameters only intended for development/testing purposes.\n  const styleElement =\n    typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n      ? src.styleElement\n      : null;\n\n  // Set the main-thread verbosity level.\n  setVerbosityLevel(verbosity);\n\n  // Ensure that the various factories can be initialized, when necessary,\n  // since the user may provide *custom* ones.\n  const transportFactory = {\n    canvasFactory,\n    filterFactory,\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked,\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl,\n    });\n  }\n\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    };\n    // Worker was not provided -- creating and owning our own. If message port\n    // is specified in global worker options, using it.\n    worker = workerParams.port\n      ? PDFWorker.fromPort(workerParams)\n      : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n\n  const fetchDocParams = {\n    docId,\n    apiVersion:\n      typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"TESTING\")\n        ? PDFJSDev.eval(\"BUNDLE_VERSION\")\n        : null,\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null,\n    },\n  };\n  const transportParams = {\n    ignoreErrors,\n    disableFontFace,\n    fontExtraProperties,\n    enableXfa,\n    ownerDocument,\n    disableAutoFetch,\n    pdfBug,\n    styleElement,\n  };\n\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n\n      const workerIdPromise = _fetchDocument(worker, fetchDocParams);\n      const networkStreamPromise = new Promise(function (resolve) {\n        let networkStream;\n        if (rangeTransport) {\n          networkStream = new PDFDataTransportStream(rangeTransport, {\n            disableRange,\n            disableStream,\n          });\n        } else if (!data) {\n          if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n            throw new Error(\"Not implemented: createPDFNetworkStream\");\n          }\n          const createPDFNetworkStream = params => {\n            if (\n              typeof PDFJSDev !== \"undefined\" &&\n              PDFJSDev.test(\"GENERIC\") &&\n              isNodeJS\n            ) {\n              const isFetchSupported = function () {\n                return (\n                  typeof fetch !== \"undefined\" &&\n                  typeof Response !== \"undefined\" &&\n                  \"body\" in Response.prototype\n                );\n              };\n              return isFetchSupported() && isValidFetchUrl(params.url)\n                ? new PDFFetchStream(params)\n                : new PDFNodeStream(params);\n            }\n            return isValidFetchUrl(params.url)\n              ? new PDFFetchStream(params)\n              : new PDFNetworkStream(params);\n          };\n\n          networkStream = createPDFNetworkStream({\n            url,\n            length,\n            httpHeaders,\n            withCredentials,\n            rangeChunkSize,\n            disableRange,\n            disableStream,\n          });\n        }\n        resolve(networkStream);\n      });\n\n      return Promise.all([workerIdPromise, networkStreamPromise]).then(\n        function ([workerId, networkStream]) {\n          if (task.destroyed) {\n            throw new Error(\"Loading aborted\");\n          }\n\n          const messageHandler = new MessageHandler(\n            docId,\n            workerId,\n            worker.port\n          );\n          const transport = new WorkerTransport(\n            messageHandler,\n            task,\n            networkStream,\n            transportParams,\n            transportFactory\n          );\n          task._transport = transport;\n          messageHandler.send(\"Ready\", null);\n        }\n      );\n    })\n    .catch(task._capability.reject);\n\n  return task;\n}\n\n/**\n * Starts fetching of specified PDF document/data.\n *\n * @param {PDFWorker} worker\n * @param {Object} source\n * @returns {Promise<string>} A promise that is resolved when the worker ID of\n *   the `MessageHandler` is known.\n * @private\n */\nasync function _fetchDocument(worker, source) {\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  const workerId = await worker.messageHandler.sendWithPromise(\n    \"GetDocRequest\",\n    source,\n    source.data ? [source.data.buffer] : null\n  );\n\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  return workerId;\n}\n\nfunction getUrlProp(val) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    return null; // The 'url' is unused with `PDFDataRangeTransport`.\n  }\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    // The full path is required in the 'url' field.\n    return new URL(val, window.location).href;\n  } catch {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"GENERIC\") &&\n      isNodeJS &&\n      typeof val === \"string\"\n    ) {\n      return val; // Use the url as-is in Node.js environments.\n    }\n  }\n  throw new Error(\n    \"Invalid PDF url data: \" +\n      \"either string or URL-object is expected in the url property.\"\n  );\n}\n\nfunction getDataProp(val) {\n  // Converting string or array-like data to Uint8Array.\n  if (\n    typeof PDFJSDev !== \"undefined\" &&\n    PDFJSDev.test(\"GENERIC\") &&\n    isNodeJS &&\n    typeof Buffer !== \"undefined\" && // eslint-disable-line no-undef\n    val instanceof Buffer // eslint-disable-line no-undef\n  ) {\n    throw new Error(\n      \"Please provide binary data as `Uint8Array`, rather than `Buffer`.\"\n    );\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    // Use the data as-is when it's already a Uint8Array that completely\n    // \"utilizes\" its underlying ArrayBuffer, to prevent any possible\n    // issues when transferring it to the worker-thread.\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (\n    val instanceof ArrayBuffer ||\n    ArrayBuffer.isView(val) ||\n    (typeof val === \"object\" && !isNaN(val?.length))\n  ) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\n    \"Invalid PDF binary data: either TypedArray, \" +\n      \"string, or array-like object is expected in the data property.\"\n  );\n}\n\nfunction isRefProxy(ref) {\n  return (\n    typeof ref === \"object\" &&\n    Number.isInteger(ref?.num) &&\n    ref.num >= 0 &&\n    Number.isInteger(ref?.gen) &&\n    ref.gen >= 0\n  );\n}\n\n/**\n * @typedef {Object} OnProgressParameters\n * @property {number} loaded - Currently loaded number of bytes.\n * @property {number} total - Total number of bytes in the PDF file.\n */\n\n/**\n * The loading task controls the operations required to load a PDF document\n * (such as network requests) and provides a way to listen for completion,\n * after which individual pages can be rendered.\n */\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n\n  constructor() {\n    this._capability = Promise.withResolvers();\n    this._transport = null;\n    this._worker = null;\n\n    /**\n     * Unique identifier for the document loading task.\n     * @type {string}\n     */\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n\n    /**\n     * Whether the loading task is destroyed or not.\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Callback to request a password if a wrong or no password was provided.\n     * The callback receives two parameters: a function that should be called\n     * with the new password, and a reason (see {@link PasswordResponses}).\n     * @type {function}\n     */\n    this.onPassword = null;\n\n    /**\n     * Callback to be able to monitor the loading progress of the PDF file\n     * (necessary to implement e.g. a loading bar).\n     * The callback receives an {@link OnProgressParameters} argument.\n     * @type {function}\n     */\n    this.onProgress = null;\n  }\n\n  /**\n   * Promise for document loading task completion.\n   * @type {Promise<PDFDocumentProxy>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Abort all network requests and destroy the worker.\n   * @returns {Promise<void>} A promise that is resolved when destruction is\n   *   completed.\n   */\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\n\n/**\n * Abstract class to support range requests file loading.\n *\n * NOTE: The TypedArrays passed to the constructor and relevant methods below\n * will generally be transferred to the worker-thread. This will help reduce\n * main-thread memory usage, however it will take ownership of the TypedArrays.\n */\nclass PDFDataRangeTransport {\n  /**\n   * @param {number} length\n   * @param {Uint8Array|null} initialData\n   * @param {boolean} [progressiveDone]\n   * @param {string} [contentDispositionFilename]\n   */\n  constructor(\n    length,\n    initialData,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = Promise.withResolvers();\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n\n  /**\n   * @param {number} begin\n   * @param {Uint8Array|null} chunk\n   */\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n\n  /**\n   * @param {number} loaded\n   * @param {number|undefined} total\n   */\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n\n  /**\n   * @param {Uint8Array|null} chunk\n   */\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n\n  /**\n   * @param {number} begin\n   * @param {number} end\n   */\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n\n  abort() {}\n}\n\n/**\n * Proxy to a `PDFDocument` in the worker thread.\n */\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getNetworkStreamName\", {\n        value: () => this._transport.getNetworkStreamName(),\n      });\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () => this._transport.getXFADatasets(),\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () => this._transport.getXRefPrevValue(),\n      });\n      Object.defineProperty(this, \"getStartXRefPos\", {\n        value: () => this._transport.getStartXRefPos(),\n      });\n      Object.defineProperty(this, \"getAnnotArray\", {\n        value: pageIndex => this._transport.getAnnotArray(pageIndex),\n      });\n    }\n  }\n\n  /**\n   * @type {AnnotationStorage} Storage for annotation data in forms.\n   */\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {number} Total number of pages in the PDF file.\n   */\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n\n  /**\n   * @type {Array<string, string|null>} A (not guaranteed to be) unique ID to\n   *   identify the PDF document.\n   *   NOTE: The first element will always be defined for all PDF documents,\n   *   whereas the second element is only defined for *modified* PDF documents.\n   */\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * NOTE: This is (mostly) intended to support printing of XFA forms.\n   *\n   * @type {Object | null} An object representing a HTML tree structure\n   *   to render the XFA, or `null` when no XFA form exists.\n   */\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n\n  /**\n   * @param {number} pageNumber - The page number to get. The first page is 1.\n   * @returns {Promise<PDFPageProxy>} A promise that is resolved with\n   *   a {@link PDFPageProxy} object.\n   */\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {Promise<number>} A promise that is resolved with the page index,\n   *   starting from zero, that is associated with the reference.\n   */\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<any>>>} A promise that is resolved\n   *   with a mapping from named destinations to references.\n   *\n   * This can be slow for large documents. Use `getDestination` instead.\n   */\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n\n  /**\n   * @param {string} id - The named destination to get.\n   * @returns {Promise<Array<any> | null>} A promise that is resolved with all\n   *   information of the given named destination, or `null` when the named\n   *   destination is not present in the PDF file.\n   */\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} containing the page labels that correspond to the page\n   *   indexes, or `null` when no page labels are present in the PDF file.\n   */\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page layout name.\n   */\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page mode name.\n   */\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with an\n   *   {Object} containing the viewer preferences, or `null` when no viewer\n   *   preferences are present in the PDF file.\n   */\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n\n  /**\n   * @returns {Promise<any | null>} A promise that is resolved with an {Array}\n   *   containing the destination, or `null` when no open action is present\n   *   in the PDF.\n   */\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n\n  /**\n   * @returns {Promise<any>} A promise that is resolved with a lookup table\n   *   for mapping named attachments to their content.\n   */\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with the JavaScript actions:\n   *     - from the name tree.\n   *     - from A or AA entries in the catalog dictionary.\n   *   , or `null` if no JavaScript exists.\n   */\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n\n  /**\n   * @typedef {Object} OutlineNode\n   * @property {string} title\n   * @property {boolean} bold\n   * @property {boolean} italic\n   * @property {Uint8ClampedArray} color - The color in RGB format to use for\n   *   display purposes.\n   * @property {string | Array<any> | null} dest\n   * @property {string | null} url\n   * @property {string | undefined} unsafeUrl\n   * @property {boolean | undefined} newWindow\n   * @property {number | undefined} count\n   * @property {Array<OutlineNode>} items\n   */\n\n  /**\n   * @returns {Promise<Array<OutlineNode>>} A promise that is resolved with an\n   *   {Array} that is a tree outline (if it has one) of the PDF file.\n   */\n  getOutline() {\n    return this._transport.getOutline();\n  }\n\n  /**\n   * @typedef {Object} GetOptionalContentConfigParameters\n   * @property {string} [intent] - Determines the optional content groups that\n   *   are visible by default; valid values are:\n   *    - 'display' (viewable groups).\n   *    - 'print' (printable groups).\n   *    - 'any' (all groups).\n   *   The default value is 'display'.\n   */\n\n  /**\n   * @param {GetOptionalContentConfigParameters} [params] - Optional content\n   *   config parameters.\n   * @returns {Promise<OptionalContentConfig>} A promise that is resolved with\n   *   an {@link OptionalContentConfig} that contains all the optional content\n   *   groups (assuming that the document has any).\n   */\n  getOptionalContentConfig({ intent = \"display\" } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n\n  /**\n   * @returns {Promise<Array<number> | null>} A promise that is resolved with\n   *   an {Array} that contains the permission flags for the PDF document, or\n   *   `null` when no permissions are present in the PDF file.\n   */\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n\n  /**\n   * @returns {Promise<{ info: Object, metadata: Metadata }>} A promise that is\n   *   resolved with an {Object} that has `info` and `metadata` properties.\n   *   `info` is an {Object} filled with anything available in the information\n   *   dictionary and similarly `metadata` is a {Metadata} object with\n   *   information from the metadata section of the PDF.\n   */\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n\n  /**\n   * @typedef {Object} MarkInfo\n   * Properties correspond to Table 321 of the PDF 32000-1:2008 spec.\n   * @property {boolean} Marked\n   * @property {boolean} UserProperties\n   * @property {boolean} Suspects\n   */\n\n  /**\n   * @returns {Promise<MarkInfo | null>} A promise that is resolved with\n   *   a {MarkInfo} object that contains the MarkInfo flags for the PDF\n   *   document, or `null` when no MarkInfo values are present in the PDF file.\n   */\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the raw data of the PDF document.\n   */\n  getData() {\n    return this._transport.getData();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the full data of the saved document.\n   */\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n\n  /**\n   * @returns {Promise<{ length: number }>} A promise that is resolved when the\n   *   document's data is loaded. It is resolved with an {Object} that contains\n   *   the `length` property that indicates size of the PDF data in bytes.\n   */\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n\n  /**\n   * Cleans up resources allocated by the document on both the main and worker\n   * threads.\n   *\n   * NOTE: Do not, under any circumstances, call this method when rendering is\n   * currently ongoing since that may lead to rendering errors.\n   *\n   * @param {boolean} [keepLoadedFonts] - Let fonts remain attached to the DOM.\n   *   NOTE: This will increase persistent memory usage, hence don't use this\n   *   option unless absolutely necessary. The default value is `false`.\n   * @returns {Promise} A promise that is resolved when clean-up has finished.\n   */\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n\n  /**\n   * Destroys the current document instance and terminates the worker.\n   */\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {number | null} The page number, if it's cached.\n   */\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n\n  /**\n   * @type {DocumentInitParameters} A subset of the current\n   *   {DocumentInitParameters}, which are needed in the viewer.\n   */\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n\n  /**\n   * @type {PDFDocumentLoadingTask} The loadingTask for the current document.\n   */\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<Object>> | null>} A promise that is\n   *   resolved with an {Object} containing /AcroForm field data for the JS\n   *   sandbox, or `null` when no field data is present in the PDF file.\n   */\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n\n  /**\n   * @returns {Promise<boolean>} A promise that is resolved with `true`\n   *   if some /AcroForm fields have JavaScript actions.\n   */\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with an\n   *   {Array<string>} containing IDs of annotations that have a calculation\n   *   action, or `null` when no such annotations are present in the PDF file.\n   */\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\n\n/**\n * Page getViewport parameters.\n *\n * @typedef {Object} GetViewportParameters\n * @property {number} scale - The desired scale of the viewport.\n * @property {number} [rotation] - The desired rotation, in degrees, of\n *   the viewport. If omitted it defaults to the page rotation.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be\n *   flipped. The default value is `false`.\n */\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @property {boolean} [includeMarkedContent] - When true include marked\n *   content items in the items array of TextContent. The default is `false`.\n * @property {boolean} [disableNormalization] - When true the text is *not*\n *   normalized in the worker-thread. The default is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {Array<TextItem | TextMarkedContent>} items - Array of\n *   {@link TextItem} and {@link TextMarkedContent} objects. TextMarkedContent\n *   items are included when includeMarkedContent is true.\n * @property {Object<string, TextStyle>} styles - {@link TextStyle} objects,\n *   indexed by font name.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - Text content.\n * @property {string} dir - Text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {Array<any>} transform - Transformation matrix.\n * @property {number} width - Width in device space.\n * @property {number} height - Height in device space.\n * @property {string} fontName - Font name used by PDF.js for converted font.\n * @property {boolean} hasEOL - Indicating if the text content is followed by a\n *   line-break.\n */\n\n/**\n * Page text marked content part.\n *\n * @typedef {Object} TextMarkedContent\n * @property {string} type - Either 'beginMarkedContent',\n *   'beginMarkedContentProps', or 'endMarkedContent'.\n * @property {string} id - The marked content identifier. Only used for type\n *   'beginMarkedContentProps'.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - Font ascent.\n * @property {number} descent - Font descent.\n * @property {boolean} vertical - Whether or not the text is in vertical mode.\n * @property {string} fontFamily - The possible font family.\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @property {string} [intent] - Determines the annotations that are fetched,\n *   can be 'display' (viewable annotations), 'print' (printable annotations),\n *   or 'any' (all annotations). The default value is 'display'.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {CanvasRenderingContext2D} canvasContext - A 2D context of a DOM\n *   Canvas object.\n * @property {PageViewport} viewport - Rendering viewport obtained by calling\n *   the `PDFPageProxy.getViewport` method.\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are rendered\n *   onto the canvas, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {Array<any>} [transform] - Additional transform, applied just\n *   before viewport transform.\n * @property {CanvasGradient | CanvasPattern | string} [background] - Background\n *   to use for the canvas.\n *   Any valid `canvas.fillStyle` can be used: a `DOMString` parsed as CSS\n *   <color> value, a `CanvasGradient` object (a linear or radial gradient) or\n *   a `CanvasPattern` object (a repetitive image). The default value is\n *   'rgb(255,255,255)'.\n *\n *   NOTE: This option may be partially, or completely, ignored when the\n *   `pageColors`-option is used.\n * @property {Object} [pageColors] - Overwrites background and foreground colors\n *   with user defined ones in order to improve readability in high contrast\n *   mode.\n * @property {Promise<OptionalContentConfig>} [optionalContentConfigPromise] -\n *   A promise that should resolve with an {@link OptionalContentConfig}\n *   created from `PDFDocumentProxy.getOptionalContentConfig`. If `null`,\n *   the configuration will be fetched automatically with the default visibility\n *   states set.\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap] - Map some\n *   annotation ids with canvases used to render them.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n */\n\n/**\n * Page getOperatorList parameters.\n *\n * @typedef {Object} GetOperatorListParameters\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are included\n *   in the operatorList, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n */\n\n/**\n * Structure tree node. The root node will have a role \"Root\".\n *\n * @typedef {Object} StructTreeNode\n * @property {Array<StructTreeNode | StructTreeContent>} children - Array of\n *   {@link StructTreeNode} and {@link StructTreeContent} objects.\n * @property {string} role - element's role, already mapped if a role map exists\n * in the PDF.\n */\n\n/**\n * Structure tree content.\n *\n * @typedef {Object} StructTreeContent\n * @property {string} type - either \"content\" for page and stream structure\n *   elements or \"object\" for object references.\n * @property {string} id - unique id that will map to the text layer.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array<number>} fnArray - Array containing the operator functions.\n * @property {Array<any>} argsArray - Array containing the arguments of the\n *   functions.\n */\n\n/**\n * Proxy to a `PDFPage` in the worker thread.\n */\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n\n  #pendingCleanup = false;\n\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    /** @type {PDFObjects} */\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n\n  /**\n   * @type {number} Page number of the page. First page is 1.\n   */\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n\n  /**\n   * @type {number} The number of degrees the page is rotated clockwise.\n   */\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n\n  /**\n   * @type {RefProxy | null} The reference that points to this page.\n   */\n  get ref() {\n    return this._pageInfo.ref;\n  }\n\n  /**\n   * @type {number} The default size of units in 1/72nds of an inch.\n   */\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n\n  /**\n   * @type {Array<number>} An array of the visible portion of the PDF page in\n   *   user space units [x1, y1, x2, y2].\n   */\n  get view() {\n    return this._pageInfo.view;\n  }\n\n  /**\n   * @param {GetViewportParameters} params - Viewport parameters.\n   * @returns {PageViewport} Contains 'width' and 'height' properties\n   *   along with transforms required for rendering.\n   */\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * @param {GetAnnotationsParameters} [params] - Annotation parameters.\n   * @returns {Promise<Array<any>>} A promise that is resolved with an\n   *   {Array} of the annotation objects.\n   */\n  getAnnotations({ intent = \"display\" } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n\n  /**\n   * @returns {Promise<Object>} A promise that is resolved with an\n   *   {Object} with JS actions.\n   */\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with a fake DOM object (a tree structure where elements\n   *   are {Object} with a name, attributes (class, style, ...), value and\n   *   children, very similar to a HTML DOM tree), or `null` if no XFA exists.\n   */\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n\n  /**\n   * Begins the process of rendering a page to the desired context.\n   *\n   * @param {RenderParameters} params - Page render parameters.\n   * @returns {RenderTask} An object that contains a promise that is\n   *   resolved when the page finishes rendering.\n   */\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n  }) {\n    this._stats?.time(\"Overall\");\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage\n    );\n    const { renderingIntent, cacheKey } = intentArgs;\n    // If there was a pending destroy, cancel it so no cleanup happens during\n    // this call to render...\n    this.#pendingCleanup = false;\n    // ... and ensure that a delayed cleanup is always aborted.\n    this.#abortDelayedCleanup();\n\n    optionalContentConfigPromise ||=\n      this._transport.getOptionalContentConfig(renderingIntent);\n\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n\n    // If there's no displayReadyCapability yet, then the operatorList\n    // was never requested before. Make the request and create the promise.\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n\n      // Attempt to reduce memory usage during *printing*, by always running\n      // cleanup immediately once rendering has finished.\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(/* delayed = */ !intentPrint);\n\n      if (error) {\n        internalRenderTask.capability.reject(error);\n\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error),\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n\n      this._stats?.timeEnd(\"Rendering\");\n      this._stats?.timeEnd(\"Overall\");\n    };\n\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      // Only include the required properties, and *not* the entire object.\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n    });\n\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n\n    Promise.all([\n      intentState.displayReadyCapability.promise,\n      optionalContentConfigPromise,\n    ])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.destroyed) {\n          complete();\n          return;\n        }\n        this._stats?.time(\"Rendering\");\n\n        if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n          throw new Error(\n            \"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" +\n              \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\"\n          );\n        }\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n\n    return renderTask;\n  }\n\n  /**\n   * @param {GetOperatorListParameters} params - Page getOperatorList\n   *   parameters.\n   * @returns {Promise<PDFOperatorList>} A promise resolved with an\n   *   {@link PDFOperatorList} object that represents the page's operator list.\n   */\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n  } = {}) {\n    if (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"GENERIC\")) {\n      throw new Error(\"Not implemented: getOperatorList\");\n    }\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n      /* isOpList = */ true\n    );\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {ReadableStream} Stream for reading text content chunks.\n   */\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false,\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n\n    return this._transport.messageHandler.sendWithStream(\n      \"GetTextContent\",\n      {\n        pageIndex: this._pageIndex,\n        includeMarkedContent: includeMarkedContent === true,\n        disableNormalization: disableNormalization === true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      }\n    );\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {Promise<TextContent>} A promise that is resolved with a\n   *   {@link TextContent} object that represents the page's text content.\n   */\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      // TODO: We need to revisit this once the XFA foreground patch lands and\n      // only do this for non-foreground XFA.\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n      };\n      pump();\n    });\n  }\n\n  /**\n   * @returns {Promise<StructTreeNode>} A promise that is resolved with a\n   *   {@link StructTreeNode} object that represents the page's structure tree,\n   *   or `null` when no structure tree is present for the current page.\n   */\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n\n  /**\n   * Destroys the page object.\n   * @private\n   */\n  _destroy() {\n    this.destroyed = true;\n\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true,\n      });\n\n      if (intentState.opListReadCapability) {\n        // Avoid errors below, since the renderTasks are just stubs.\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n\n    return Promise.all(waitOn);\n  }\n\n  /**\n   * Cleans up resources allocated by the page.\n   *\n   * @param {boolean} [resetStats] - Reset page stats, if enabled.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(/* delayed = */ false);\n\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n\n  /**\n   * Attempts to clean up if rendering is in a state where that's possible.\n   * @param {boolean} [delayed] - Delay the cleanup, to e.g. improve zooming\n   *   performance in documents with large images.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(/* delayed = */ false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return; // Rendering was cancelled.\n    }\n    this._stats?.timeEnd(\"Page Request\");\n\n    // TODO Refactor RenderPageRequest to separate rendering\n    // and operator list logic\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n\n  /**\n   * @private\n   */\n  _renderPageChunk(operatorListChunk, intentState) {\n    // Add the new chunk to the current operator list.\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n\n    // Notify all the rendering tasks there are more operators to be consumed.\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(/* delayed = */ true);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n  }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        Number.isInteger(renderingIntent) && renderingIntent > 0,\n        '_pumpOperatorList: Expected valid \"renderingIntent\" argument.'\n      );\n    }\n    const { map, transfer } = annotationStorageSerializable;\n\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      \"GetOperatorList\",\n      {\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        cacheKey,\n        annotationStorage: map,\n      },\n      transfer\n    );\n    const reader = readableStream.getReader();\n\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        reason => {\n          intentState.streamReader = null;\n\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          if (intentState.operatorList) {\n            // Mark operator list as complete.\n            intentState.operatorList.lastChunk = true;\n\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            this.#tryCleanup(/* delayed = */ true);\n          }\n\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        }\n      );\n    };\n    pump();\n  }\n\n  /**\n   * @private\n   */\n  _abortOperatorList({ intentState, reason, force = false }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        reason instanceof Error,\n        '_abortOperatorList: Expected valid \"reason\" argument.'\n      );\n    }\n\n    if (!intentState.streamReader) {\n      return;\n    }\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    if (!force) {\n      // Ensure that an Error occurring in *only* one `InternalRenderTask`, e.g.\n      // multiple render() calls on the same canvas, won't break all rendering.\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      // Don't immediately abort parsing on the worker-thread when rendering is\n      // cancelled, since that will unnecessarily delay re-rendering when (for\n      // partially parsed pages) e.g. zooming/rotation occurs in the viewer.\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < /* ms = */ 1000) {\n          // Above, we prevent the total delay from becoming arbitrarily large.\n          delay += reason.extraDelay;\n        }\n\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({ intentState, reason, force: true });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader\n      .cancel(new AbortException(reason.message))\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n    intentState.streamReader = null;\n\n    if (this._transport.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    // Remove the current `intentState`, since a cancelled `getOperatorList`\n    // call on the worker-thread cannot be re-started...\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    // ... and force clean-up to ensure that any old state is always removed.\n    this.cleanup();\n  }\n\n  /**\n   * @type {StatTimer | null} Returns page stats, if enabled; returns `null`\n   *   otherwise.\n   */\n  get stats() {\n    return this._stats;\n  }\n}\n\nclass LoopbackPort {\n  #listeners = new Set();\n\n  #deferred = Promise.resolve();\n\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? { transfer } : null),\n    };\n\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n\n  terminate() {\n    this.#listeners.clear();\n  }\n}\n\n/**\n * @typedef {Object} PDFWorkerParameters\n * @property {string} [name] - The name of the worker.\n * @property {Worker} [port] - The `workerPort` object.\n * @property {number} [verbosity] - Controls the logging level;\n *   the constants from {@link VerbosityLevel} should be used.\n */\n\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fakeWorkerId: 0,\n};\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  if (isNodeJS) {\n    // Workers aren't supported in Node.js, force-disabling them there.\n    PDFWorkerUtil.isWorkerDisabled = true;\n\n    GlobalWorkerOptions.workerSrc ||= PDFJSDev.test(\"LIB\")\n      ? \"../pdf.worker.js\"\n      : \"./pdf.worker.mjs\";\n  }\n\n  // Check if URLs have the same origin. For non-HTTP based URLs, returns false.\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === \"null\") {\n        return false; // non-HTTP url\n      }\n    } catch {\n      return false;\n    }\n\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    // We will rely on blob URL's property to specify origin.\n    // We want this function to fail in case if createObjectURL or Blob do not\n    // exist or fail for some reason -- our Worker creation will fail anyway.\n    const wrapper = `await import(\"${url}\");`;\n    return URL.createObjectURL(\n      new Blob([wrapper], { type: \"text/javascript\" })\n    );\n  };\n}\n\n/**\n * PDF.js web worker abstraction that controls the instantiation of PDF\n * documents. Message handlers are used to pass information from the main\n * thread to the worker thread and vice versa. If the creation of a web\n * worker is not possible, a \"fake\" worker will be used instead.\n *\n * @param {PDFWorkerParameters} params - The worker initialization parameters.\n */\nclass PDFWorker {\n  static #workerPorts;\n\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel(),\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n\n    this._readyCapability = Promise.withResolvers();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n\n    if (\n      (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) &&\n      port\n    ) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n\n  /**\n   * Promise for worker initialization completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._readyCapability.promise;\n  }\n\n  /**\n   * The current `workerPort`, when it exists.\n   * @type {Worker}\n   */\n  get port() {\n    return this._port;\n  }\n\n  /**\n   * The current MessageHandler-instance.\n   * @type {MessageHandler}\n   */\n  get messageHandler() {\n    return this._messageHandler;\n  }\n\n  _initializeFromPort(port) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _initializeFromPort\");\n    }\n    this._port = port;\n    this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {\n      // Ignoring \"ready\" event -- MessageHandler should already be initialized\n      // and ready to accept messages.\n    });\n    this._readyCapability.resolve();\n    // Send global setting, e.g. verbosity level.\n    this._messageHandler.send(\"configure\", {\n      verbosity: this.verbosity,\n    });\n  }\n\n  _initialize() {\n    // If worker support isn't disabled explicit and the browser has worker\n    // support, create a new web worker and test if it/the browser fulfills\n    // all requirements to run parts of pdf.js in a web worker.\n    // Right now, the requirement is, that an Uint8Array is still an\n    // Uint8Array as it arrives on the worker. (Chrome added this with v.15.)\n    if (\n      !PDFWorkerUtil.isWorkerDisabled &&\n      !PDFWorker.#mainThreadWorkerMessageHandler\n    ) {\n      let { workerSrc } = PDFWorker;\n\n      try {\n        // Wraps workerSrc path into blob URL, if the former does not belong\n        // to the same origin.\n        if (\n          typeof PDFJSDev !== \"undefined\" &&\n          PDFJSDev.test(\"GENERIC\") &&\n          !PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)\n        ) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(\n            new URL(workerSrc, window.location).href\n          );\n        }\n\n        const worker = new Worker(workerSrc, { type: \"module\" });\n        const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n        const terminateEarly = () => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          } else {\n            // Fall back to fake worker if the termination is caused by an\n            // error (e.g. NetworkError / SecurityError).\n            this._setupFakeWorker();\n          }\n        };\n\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            // Worker failed to initialize due to an error. Clean up and fall\n            // back to the fake worker.\n            terminateEarly();\n          }\n        };\n        worker.addEventListener(\"error\", onWorkerError);\n\n        messageHandler.on(\"test\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n\n            this._readyCapability.resolve();\n            // Send global setting, e.g. verbosity level.\n            messageHandler.send(\"configure\", {\n              verbosity: this.verbosity,\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n\n        messageHandler.on(\"ready\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          try {\n            sendTest();\n          } catch {\n            // We need fallback to a faked worker.\n            this._setupFakeWorker();\n          }\n        });\n\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          // Ensure that we can use `postMessage` transfers.\n          messageHandler.send(\"test\", testObj, [testObj.buffer]);\n        };\n\n        // It might take time for the worker to initialize. We will try to send\n        // the \"test\" message immediately, and once the \"ready\" message arrives.\n        // The worker shall process only the first received \"test\" message.\n        sendTest();\n        return;\n      } catch {\n        info(\"The worker has been disabled.\");\n      }\n    }\n    // Either workers are disabled, not supported or have thrown an exception.\n    // Thus, we fallback to a faked worker.\n    this._setupFakeWorker();\n  }\n\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n\n    PDFWorker._setupFakeWorkerGlobal\n      .then(WorkerMessageHandler => {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          return;\n        }\n        const port = new LoopbackPort();\n        this._port = port;\n\n        // All fake workers use the same port, making id unique.\n        const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n\n        // If the main thread is our worker, setup the handling for the\n        // messages -- the main thread sends to it self.\n        const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n\n        const messageHandler = new MessageHandler(id, id + \"_worker\", port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n        // Send global setting, e.g. verbosity level.\n        messageHandler.send(\"configure\", {\n          verbosity: this.verbosity,\n        });\n      })\n      .catch(reason => {\n        this._readyCapability.reject(\n          new Error(`Setting up fake worker failed: \"${reason.message}\".`)\n        );\n      });\n  }\n\n  /**\n   * Destroys the worker instance.\n   */\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      // We need to terminate only web worker created resource.\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n\n  /**\n   * @param {PDFWorkerParameters} params - The worker initialization parameters.\n   */\n  static fromPort(params) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: fromPort\");\n    }\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\n          \"PDFWorker.fromPort - the worker is being destroyed.\\n\" +\n            \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\"\n        );\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n\n  /**\n   * The current `workerSrc`, when it exists.\n   * @type {string}\n   */\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n\n  // Loads worker code into the main-thread.\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        // The worker was already loaded using e.g. a `<script>` tag.\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker =\n        typeof PDFJSDev === \"undefined\"\n          ? await import(\"pdfjs/pdf.worker.js\")\n          : await __non_webpack_import__(this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass WorkerTransport {\n  #methodPromises = new Map();\n\n  #pageCache = new Map();\n\n  #pagePromises = new Map();\n\n  #pageRefCache = new Map();\n\n  #passwordCapability = null;\n\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement,\n    });\n    this._params = params;\n\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n\n    this.setupMessageHandler();\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getNetworkStreamName\", {\n        value: () => networkStream?.constructor?.name || null,\n      });\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetXFADatasets\", null),\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetXRefPrevValue\", null),\n      });\n      Object.defineProperty(this, \"getStartXRefPos\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetStartXRefPos\", null),\n      });\n      Object.defineProperty(this, \"getAnnotArray\", {\n        value: pageIndex =>\n          this.messageHandler.sendWithPromise(\"GetAnnotArray\", { pageIndex }),\n      });\n    }\n  }\n\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n\n  getRenderingIntent(\n    intent,\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isOpList = false\n  ) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY; // Default value.\n    let annotationStorageSerializable = SerializableEmpty;\n\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n\n        const annotationStorage =\n          renderingIntent & RenderingIntentFlag.PRINT &&\n          printAnnotationStorage instanceof PrintAnnotationStorage\n            ? printAnnotationStorage\n            : this.annotationStorage;\n\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationStorageSerializable.hash}`,\n      annotationStorageSerializable,\n    };\n  }\n\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n\n    this.#passwordCapability?.reject(\n      new Error(\"Worker was destroyed during onPassword callback\")\n    );\n\n    const waitOn = [];\n    // We need to wait for all renderings to be completed, e.g.\n    // timeout/rAF can take a long time.\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    // Allow `AnnotationStorage`-related clean-up when destroying the document.\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    // We also need to wait for the worker to finish its long running tasks.\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      cleanupTextLayer();\n\n      this._networkStream?.cancelAllRequests(\n        new AbortException(\"Worker was terminated.\")\n      );\n\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetReader - no `IPDFStream` instance available.\"\n      );\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetReader - expected an ArrayBuffer.\"\n            );\n            // Enqueue data chunk into sink, and transfer it\n            // to other side as `Transferable` object.\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = Promise.withResolvers();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        // If stream or range are disabled, it's our only way to report\n        // loading progress.\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total,\n            });\n          };\n        }\n\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength,\n        });\n      }, headersCapability.reject);\n\n      return headersCapability.promise;\n    });\n\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetRangeReader - no `IPDFStream` instance available.\"\n      );\n      const rangeReader = this._networkStream.getRangeReader(\n        data.begin,\n        data.end\n      );\n\n      // When streaming is enabled, it's possible that the data requested here\n      // has already been fetched via the `_fullRequestReader` implementation.\n      // However, given that the PDF data is loaded asynchronously on the\n      // main-thread and then sent via `postMessage` to the worker-thread,\n      // it may not have been available during parsing (hence the attempt to\n      // use range requests here).\n      //\n      // To avoid wasting time and resources here, we'll thus *not* dispatch\n      // range requests if the data was already loaded but has not been sent to\n      // the worker-thread yet (which will happen via the `_fullRequestReader`).\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetRangeReader - expected an ArrayBuffer.\"\n            );\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"GetDoc\", ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable(\"DocException - expected a valid Error.\");\n      }\n      loadingTask._capability.reject(reason);\n    });\n\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this.#passwordCapability = Promise.withResolvers();\n\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({ password });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this.#passwordCapability.reject(ex);\n        }\n      } else {\n        this.#passwordCapability.reject(\n          new PasswordException(exception.message, exception.code)\n        );\n      }\n      return this.#passwordCapability.promise;\n    });\n\n    messageHandler.on(\"DataLoaded\", data => {\n      // For consistency: Ensure that progress is always reported when the\n      // entire PDF file has been loaded, regardless of how it was fetched.\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length,\n      });\n\n      this.downloadInfoCapability.resolve(data);\n    });\n\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null; // Ignore any pending requests if the worker was terminated.\n      }\n\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n\n      switch (type) {\n        case \"Font\":\n          const params = this._params;\n\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n\n          const inspectFont =\n            params.pdfBug && globalThis.FontInspector?.enabled\n              ? (font, url) => globalThis.FontInspector.fontAdded(font, url)\n              : null;\n          const font = new FontFaceObject(exportedData, {\n            disableFontFace: params.disableFontFace,\n            ignoreErrors: params.ignoreErrors,\n            inspectFont,\n          });\n\n          this.fontLoader\n            .bind(font)\n            .catch(() => messageHandler.sendWithPromise(\"FontFallback\", { id }))\n            .finally(() => {\n              if (!params.fontExtraProperties && font.data) {\n                // Immediately release the `font.data` property once the font\n                // has been attached to the DOM, since it's no longer needed,\n                // rather than waiting for a `PDFDocumentProxy.cleanup` call.\n                // Since `font.data` could be very large, e.g. in some cases\n                // multiple megabytes, this will help reduce memory usage.\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case \"CopyLocalImage\":\n          const { imageRef } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n\n      return null;\n    });\n\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        // Ignore any pending requests if the worker was terminated.\n        return;\n      }\n\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      // Don't store data *after* cleanup has successfully run, see bug 1854145.\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close(); // Release any `ImageBitmap` data.\n        return;\n      }\n\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n\n          // Heuristic that will allow us not to store large data.\n          if (imageData?.dataLen > MAX_IMAGE_SIZE_TO_CACHE) {\n            pageProxy._maybeCleanupAfterRender = true;\n          }\n          break;\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total,\n      });\n    });\n\n    messageHandler.on(\"FetchBuiltInCMap\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(\n          new Error(\n            \"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n\n    messageHandler.on(\"FetchStandardFontData\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(\n          new Error(\n            \"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\n        \"saveDocument called while `annotationStorage` is empty, \" +\n          \"please use the getData-method instead.\"\n      );\n    }\n    const { map, transfer } = this.annotationStorage.serializable;\n\n    return this.messageHandler\n      .sendWithPromise(\n        \"SaveDocument\",\n        {\n          isPureXfa: !!this._htmlForXfa,\n          numPages: this._numPages,\n          annotationStorage: map,\n          filename: this._fullReader?.filename ?? null,\n        },\n        transfer\n      )\n      .finally(() => {\n        this.annotationStorage.resetModified();\n      });\n  }\n\n  getPage(pageNumber) {\n    if (\n      !Number.isInteger(pageNumber) ||\n      pageNumber <= 0 ||\n      pageNumber > this._numPages\n    ) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(\"GetPage\", {\n        pageIndex,\n      })\n      .then(pageInfo => {\n        if (this.destroyed) {\n          throw new Error(\"Transport destroyed\");\n        }\n        if (pageInfo.refStr) {\n          this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n        }\n\n        const page = new PDFPageProxy(\n          pageIndex,\n          pageInfo,\n          this,\n          this._params.pdfBug\n        );\n        this.#pageCache.set(pageIndex, page);\n        return page;\n      });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen,\n    });\n  }\n\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent,\n    });\n  }\n\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id,\n    });\n  }\n\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex,\n    });\n  }\n\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex,\n    });\n  }\n\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(\n      data => new OptionalContentConfig(data, renderingIntent)\n    );\n  }\n\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(name, null)\n      .then(results => ({\n        info: results[0],\n        metadata: results[1] ? new Metadata(results[1]) : null,\n        contentDispositionFilename: this._fullReader?.filename ?? null,\n        contentLength: this._fullReader?.contentLength ?? null,\n      }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return; // No need to manually clean-up when destruction has started.\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n\n      if (!cleanupSuccessful) {\n        throw new Error(\n          `startCleanup: Page ${page.pageNumber} is currently rendering.`\n        );\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(/* keepHCM = */ true);\n    cleanupTextLayer();\n  }\n\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n\n  get loadingParams() {\n    const { disableAutoFetch, enableXfa } = this._params;\n    return shadow(this, \"loadingParams\", {\n      disableAutoFetch,\n      enableXfa,\n    });\n  }\n}\n\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects for\n * fonts, images, rendering code, etc. These objects may get processed inside of\n * a worker. This class implements some basic methods to manage these objects.\n */\nclass PDFObjects {\n  #objs = Object.create(null);\n\n  /**\n   * Ensures there is an object defined for `objId`.\n   *\n   * @param {string} objId\n   * @returns {Object}\n   */\n  #ensureObj(objId) {\n    return (this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA,\n    });\n  }\n\n  /**\n   * If called *without* callback, this returns the data of `objId` but the\n   * object needs to be resolved. If it isn't, this method throws.\n   *\n   * If called *with* a callback, the callback is called with the data of the\n   * object once the object is resolved. That means, if you call this method\n   * and the object is already resolved, the callback gets called right away.\n   *\n   * @param {string} objId\n   * @param {function} [callback]\n   * @returns {any}\n   */\n  get(objId, callback = null) {\n    // If there is a callback, then the get can be async and the object is\n    // not required to be resolved right now.\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    // If there isn't a callback, the user expects to get the resolved data\n    // directly.\n    const obj = this.#objs[objId];\n    // If there isn't an object yet or the object isn't resolved, then the\n    // data isn't ready yet!\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n\n  /**\n   * @param {string} objId\n   * @returns {boolean}\n   */\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n\n  /**\n   * Resolves the object `objId` with optional `data`.\n   *\n   * @param {string} objId\n   * @param {any} [data]\n   */\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n\n  clear() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      data?.bitmap?.close(); // Release any `ImageBitmap` data.\n    }\n    this.#objs = Object.create(null);\n  }\n\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n/**\n * Allows controlling of the rendering tasks.\n */\nclass RenderTask {\n  #internalRenderTask = null;\n\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n\n    /**\n     * Callback for incremental rendering -- a function that will be called\n     * each time the rendering is paused.  To continue rendering call the\n     * function that is the first argument to the callback.\n     * @type {function}\n     */\n    this.onContinue = null;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getOperatorList\", {\n        value: () => this.#internalRenderTask.operatorList,\n      });\n    }\n  }\n\n  /**\n   * Promise for rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n\n  /**\n   * Cancels the rendering task. If the task is currently rendering it will\n   * not be cancelled until graphics pauses with a timeout. The promise that\n   * this object extends will be rejected when cancelled.\n   *\n   * @param {number} [extraDelay]\n   */\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(/* error = */ null, extraDelay);\n  }\n\n  /**\n   * Whether form fields are rendered separately from the main operatorList.\n   * @type {boolean}\n   */\n  get separateAnnots() {\n    const { separateAnnots } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const { annotationCanvasMap } = this.#internalRenderTask;\n    return (\n      separateAnnots.form ||\n      (separateAnnots.canvas && annotationCanvasMap?.size > 0)\n    );\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame =\n      useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    // caching this-bound methods\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n\n  get completed() {\n    return this.capability.promise.catch(function () {\n      // Ignoring errors, since we only want to know when rendering is\n      // no longer pending.\n    });\n  }\n\n  initializeGraphics({ transparency = false, optionalContentConfig }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\n          \"Cannot use the same canvas during multiple render() operations. \" +\n            \"Use different canvas or ensure previous operations were \" +\n            \"cancelled or completed.\"\n        );\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const { canvasContext, viewport, transform, background } = this.params;\n\n    this.gfx = new CanvasGraphics(\n      canvasContext,\n      this.commonObjs,\n      this.objs,\n      this.canvasFactory,\n      this.filterFactory,\n      { optionalContentConfig },\n      this.annotationCanvasMap,\n      this.pageColors\n    );\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background,\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n\n    this.callback(\n      error ||\n        new RenderingCancelledException(\n          `Rendering cancelled, page ${this._pageIndex + 1}`,\n          extraDelay\n        )\n    );\n  }\n\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(\n      this.operatorList,\n      this.operatorListIdx,\n      this._continueBound,\n      this.stepper\n    );\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n\n        this.callback();\n      }\n    }\n  }\n}\n\n/** @type {string} */\nconst version =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : null;\n/** @type {string} */\nconst build =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : null;\n\nexport {\n  build,\n  DefaultCanvasFactory,\n  DefaultCMapReaderFactory,\n  DefaultFilterFactory,\n  DefaultStandardFontDataFactory,\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFDocumentLoadingTask,\n  PDFDocumentProxy,\n  PDFPageProxy,\n  PDFWorker,\n  PDFWorkerUtil,\n  RenderTask,\n  version,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CMapCompressionType, unreachable } from \"../shared/util.js\";\n\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      unreachable(\"Cannot initialize BaseFilterFactory.\");\n    }\n  }\n\n  addFilter(maps) {\n    return \"none\";\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n\n  destroy(keepHCM = false) {}\n}\n\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n  }\n\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\"),\n    };\n  }\n\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    // Zeroing the width and height cause Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\n\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = true }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The CMap \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.'\n      );\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed\n      ? CMapCompressionType.BINARY\n      : CMapCompressionType.NONE;\n\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(\n        `Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`\n      );\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseStandardFontDataFactory {\n  constructor({ baseUrl = null }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The standard font \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"standardFontDataUrl\" API parameter is provided.'\n      );\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n\n    return this._fetchData(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n\n    return svg;\n  }\n\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\n\nexport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n};\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FormatError, info, unreachable, Util } from \"../shared/util.js\";\nimport { getCurrentTransform } from \"./display_utils.js\";\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\",\n};\n\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\n\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\n\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(\n        this._p0[0],\n        this._p0[1],\n        this._p1[0],\n        this._p1[1]\n      );\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(\n        this._p0[0],\n        this._p0[1],\n        this._r0,\n        this._p1[0],\n        this._p1[1],\n        this._r1\n      );\n    }\n\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(\n        pathType,\n        getCurrentTransform(ctx)\n      ) || [0, 0, 0, 0];\n      // Create a canvas that is only as big as the current path. This doesn't\n      // allow us to cache the pattern, but it generally creates much smaller\n      // canvases and saves memory use. See bug 1722807 for an example.\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\n        \"pattern\",\n        width,\n        height,\n        true\n      );\n\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      // Non shading fill patterns are positioned relative to the base transform\n      // (usually the page's initial transform), but we may have created a\n      // smaller canvas based on the path, so we must account for the shift.\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [\n        1,\n        0,\n        0,\n        1,\n        ownerBBox[0],\n        ownerBBox[1],\n      ]);\n\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      // Shading fills are applied relative to the current matrix which is also\n      // how canvas gradients work, so there's no need to do anything special\n      // here.\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\n\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  // Very basic Gouraud-shaded triangle rasterization algorithm.\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = (car - (car - cbr) * k) | 0;\n      bytes[j++] = (cag - (cag - cbg) * k) | 0;\n      bytes[j++] = (cab - (cab - cbb) * k) | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\n\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(\n            data,\n            context,\n            ps[q],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n          drawTriangle(\n            data,\n            context,\n            ps[q + verticesPerRow + 1],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q + verticesPerRow + 1],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(\n          data,\n          context,\n          ps[i],\n          ps[i + 1],\n          ps[i + 2],\n          cs[i],\n          cs[i + 1],\n          cs[i + 2]\n        );\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\n\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    const EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    const MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n    // We need to keep transparent border around our pattern for fill():\n    // createPattern with 'no-repeat' will bleed edges across entire area.\n    const BORDER_SIZE = 2;\n\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n\n    const width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n\n    const tmpCanvas = cachedCanvases.getCanvas(\n      \"mesh\",\n      paddedWidth,\n      paddedHeight,\n      false\n    );\n    const tmpCtx = tmpCanvas.context;\n\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));\n    } else {\n      // Obtain scale from matrix and current transformation matrix.\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n\n    // Rasterizing on the main thread since sending/queue large canvases\n    // might cause OOM.\n    const temporaryPatternCanvas = this._createMeshCanvas(\n      scale,\n      pathType === PathType.SHADING ? null : this._background,\n      owner.cachedCanvases\n    );\n\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n\n    ctx.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\n\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\n\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\n\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2,\n};\n\nclass TilingPattern {\n  // 10in @ 300dpi shall be enough.\n  static MAX_PATTERN_SIZE = 3000;\n\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n\n    info(\"TilingType: \" + tilingType);\n\n    // A tiling pattern as defined by PDF spec 8.7.2 is a cell whose size is\n    // described by bbox, and may repeat regularly by shifting the cell by\n    // xstep and ystep.\n    // Because the HTML5 canvas API does not support pattern repetition with\n    // gaps in between, we use the xstep/ystep instead of the bbox's size.\n    //\n    // This has the following consequences (similarly for ystep):\n    //\n    // - If xstep is the same as bbox, then there is no observable difference.\n    //\n    // - If xstep is larger than bbox, then the pattern canvas is partially\n    //   empty: the area bounded by bbox is painted, the outside area is void.\n    //\n    // - If xstep is smaller than bbox, then the pixels between xstep and the\n    //   bbox boundary will be missing. This is INCORRECT behavior.\n    //   \"Figures on adjacent tiles should not overlap\" (PDF spec 8.7.3.1),\n    //   but overlapping cells without common pixels are still valid.\n    //   TODO: Fix the implementation, to allow this scenario to be painted\n    //   correctly.\n\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n\n    // Obtain scale from matrix and current transformation matrix.\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(\n      this.baseTransform\n    );\n    const combinedScale = [\n      matrixScale[0] * curMatrixScale[0],\n      matrixScale[1] * curMatrixScale[1],\n    ];\n\n    // Use width and height values that are as close as possible to the end\n    // result when the pattern is used. Too low value makes the pattern look\n    // blurry. Too large value makes it look too crispy.\n    const dimx = this.getSizeAndScale(\n      xstep,\n      this.ctx.canvas.width,\n      combinedScale[0]\n    );\n    const dimy = this.getSizeAndScale(\n      ystep,\n      this.ctx.canvas.height,\n      combinedScale[1]\n    );\n\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\n      \"pattern\",\n      dimx.size,\n      dimy.size,\n      true\n    );\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    // Some bounding boxes have negative x0/y0 coordinates which will cause the\n    // some of the drawing to be off of the canvas. To avoid this shift the\n    // bounding box over.\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n\n    // To match CanvasGraphics beginDrawing we must save the context here or\n    // else we end up with unbalanced save/restores.\n    tmpCtx.save();\n\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n\n    graphics.executeOperatorList(operatorList);\n\n    graphics.endDrawing();\n\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0,\n    };\n  }\n\n  getSizeAndScale(step, realOutputSize, scale) {\n    // xstep / ystep may be negative -- normalize.\n    step = Math.abs(step);\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    // Use the destination canvas's size if it is bigger than the hard-coded\n    // limit of MAX_PATTERN_SIZE to avoid clipping patterns that cover the\n    // whole canvas.\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return { scale, size };\n  }\n\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [\n      x0,\n      y0,\n      x1,\n      y1,\n    ]);\n    graphics.clip();\n    graphics.endPath();\n  }\n\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        // Set color needed by image masks (fixes issues 3226 and 8741).\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    // PDF spec 8.7.2 NOTE 1: pattern's matrix is relative to initial matrix.\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n    let domMatrix = new DOMMatrix(matrix);\n    // Rescale and so that the ctx.createPattern call generates a pattern with\n    // the desired size.\n    domMatrix = domMatrix.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    domMatrix = domMatrix.scale(\n      1 / temporaryPatternCanvas.scaleX,\n      1 / temporaryPatternCanvas.scaleY\n    );\n\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n\n    return pattern;\n  }\n}\n\nexport { getShadingPattern, PathType, TilingPattern };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FeatureTest, ImageKind } from \"./util.js\";\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n\n  return null;\n}\n\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false,\n}) {\n  const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode\n    ? [nonBlackColor, black]\n    : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & (1 << (7 - j)) ? oneMapping : zeroMapping;\n    }\n  }\n  return { srcPos, destPos };\n}\n\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height,\n}) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n\n  if (FeatureTest.isLittleEndian) {\n    // It's a way faster to do the shuffle manually instead of working\n    // component by component with some Uint8 arrays.\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R2B1G1R1\n      const s2 = src32[i + 1]; // G3R3B2G2\n      const s3 = src32[i + 2]; // B4G4R4B3\n\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = (s1 >>> 24) | (s2 << 8) | 0xff000000;\n      dest[destPos + 2] = (s2 >>> 16) | (s3 << 16) | 0xff000000;\n      dest[destPos + 3] = (s3 >>> 8) | 0xff000000;\n    }\n\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] =\n        src[j] | (src[j + 1] << 8) | (src[j + 2] << 16) | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R1G1B1R2\n      const s2 = src32[i + 1]; // G2B2R3G3\n      const s3 = src32[i + 2]; // B3R4G4B4\n\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = (s1 << 24) | (s2 >>> 8) | 0xff;\n      dest[destPos + 2] = (s2 << 16) | (s3 >>> 16) | 0xff;\n      dest[destPos + 3] = (s3 << 8) | 0xff;\n    }\n\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] =\n        (src[j] << 24) | (src[j + 1] << 16) | (src[j + 2] << 8) | 0xff;\n    }\n  }\n\n  return { srcPos, destPos };\n}\n\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x10101) | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x1010100) | 0x000000ff;\n    }\n  }\n}\n\nexport { convertBlackAndWhiteToRGBA, convertToRGBA, grayToRGBA };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  isNodeJS,\n  OPS,\n  shadow,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  PixelsPerInch,\n} from \"./display_utils.js\";\nimport {\n  getShadingPattern,\n  PathType,\n  TilingPattern,\n} from \"./pattern_helper.js\";\nimport { convertBlackAndWhiteToRGBA } from \"../shared/image_utils.js\";\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n// Minimal font size that would be used during canvas fillText operations.\nconst MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nconst MAX_FONT_SIZE = 100;\nconst MAX_GROUP_SIZE = 4096;\n\n// Defines the time the `executeOperatorList`-method is going to be executing\n// before it stops and schedules a continue of execution.\nconst EXECUTION_TIME = 15; // ms\n// Defines the number of steps before checking the execution time.\nconst EXECUTION_STEPS = 10;\n\n// To disable Type3 compilation, set the value to `-1`.\nconst MAX_SIZE_TO_COMPILE = 1000;\n\nconst FULL_CHUNK_HEIGHT = 16;\n\n/**\n * Overrides certain methods on a 2d ctx so that when they are called they\n * will also call the same method on the destCtx. The methods that are\n * overridden are all the transformation state modifiers, path creation, and\n * save/restore. We only forward these specific methods because they are the\n * only state modifiers that we cannot copy over when we switch contexts.\n *\n * To remove mirroring call `ctx._removeMirroring()`.\n *\n * @param {Object} ctx - The 2d canvas context that will duplicate its calls on\n *   the destCtx.\n * @param {Object} destCtx - The 2d canvas context that will receive the\n *   forwarded calls.\n */\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\n\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n\n  delete(id) {\n    delete this.cache[id];\n  }\n\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\n\nfunction drawImageAtIntegerCoords(\n  ctx,\n  srcImg,\n  srcX,\n  srcY,\n  srcW,\n  srcH,\n  destX,\n  destY,\n  destW,\n  destH\n) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    // top-left corner is at (X, Y) and\n    // bottom-right one is at (X + width, Y + height).\n\n    // If leftX is 4.321 then it's rounded to 4.\n    // If width is 10.432 then it's rounded to 11 because\n    // rightX = leftX + width = 14.753 which is rounded to 15\n    // so after rounding the total width is 11 (15 - 4).\n    // It's why we can't just floor/ceil uniformly, it just depends\n    // on the values we've.\n\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n\n    // Some pdf contains images with 1x1 images so in case of 0-width after\n    // scaling we must fallback on 1 to be sure there is something.\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    // We must apply a transformation in order to apply it on the image itself.\n    // For example if a == 1 && d == -1, it means that the image itself is\n    // mirrored w.r.t. the x-axis.\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rWidth, rHeight];\n  }\n\n  if (a === 0 && d === 0) {\n    // This path is taken in issue9462.pdf (page 3).\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rHeight, rWidth];\n  }\n\n  // Not a scale matrix so let the render handle the case without rounding.\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\n\nfunction compileType3Glyph(imgData) {\n  const { width, height } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([\n    0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0,\n  ]);\n\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n\n  // decodes bit-packed mask data\n  const lineSize = (width + 7) & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n\n  // finding interesting points: every point is located between mask pixels,\n  // so there will be points of the (width + 1)x(height + 1) grid. Every point\n  // will have flags assigned based on neighboring mask pixels:\n  //   4 | 8\n  //   --P--\n  //   2 | 1\n  // We are interested only in points with the flags:\n  //   - outside corners: 1, 2, 4, 8;\n  //   - inside corners: 7, 11, 13, 14;\n  //   - and, intersections: 5, 10.\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    // 'sum' is the position of the current pixel configuration in the 'TYPES'\n    // array (in order 8-1-2-4, so we can use '>>2' to shift the column).\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum =\n        (sum >> 2) +\n        (data[pos + 1] ? 4 : 0) +\n        (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n\n  // building outlines\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        // set new direction\n        type = pp;\n        // delete mark\n        points[p] = 0;\n      } else {\n        // type is 5 or 10, ie, a crossing\n        // set new direction\n        type = pp & ((0x33 * type) >> 4);\n        // set new type for \"future hit\"\n        points[p] &= (type >> 2) | (type << 2);\n      }\n      path.lineTo(p % width1, (p / width1) | 0);\n\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n\n  // Immediately release the, potentially large, `Uint8Array`s after parsing.\n  data = null;\n  points = null;\n\n  const drawOutline = function (c) {\n    c.save();\n    // the path shall be painted in [0..1]x[0..1] space\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n\n  return drawOutline;\n}\n\nclass CanvasExtraState {\n  constructor(width, height) {\n    // Are soft masks and alpha values shapes or opacities?\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    // Default fore and background colors\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    // Note: fill alpha applies to all non-stroking operations\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = \"none\";\n\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    const p3 = Util.applyTransform([rect[0], rect[3]], transform);\n    const p4 = Util.applyTransform([rect[2], rect[1]], transform);\n\n    this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);\n  }\n\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.minY = Math.min(this.minY, minMax[1]);\n    this.maxX = Math.max(this.maxX, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax);\n    if (minMax) {\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      // Stroked paths can be outside of the path bounding box by 1/2 the line\n      // width.\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = (scale[0] * this.lineWidth) / 2;\n      const yStrokePad = (scale[1] * this.lineWidth) / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(\n      this.clipBox,\n      this.getPathBoundingBox(pathType, transform)\n    );\n  }\n}\n\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n\n  // Put the image data to the canvas in chunks, rather than putting the\n  // whole image at once.  This saves JS memory, because the ImageData object\n  // is smaller. It also possibly saves C++ memory within the implementation\n  // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n  // the data passed to putImageData()). |n| shouldn't be too small, however,\n  // because too many putImageData() calls will slow things down.\n  //\n  // Note: as written, if the last chunk is partial, the putImageData() call\n  // will (conceptually) put pixels past the bounds of the canvas.  But\n  // that's ok; any such pixels are ignored.\n\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n\n  // There are multiple forms in which the pixel data can be passed, and\n  // imgData.kind tells us which one this is.\n  if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n    // Grayscale, 1 bit per pixel (i.e. black-and-white).\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = (width + 7) >> 3;\n    const white = 0xffffffff;\n    const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      // We ran out of input. Make all remaining pixels transparent.\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n    // RGBA, 32-bits per pixel.\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === ImageKind.RGB_24BPP) {\n    // RGB, 24-bits per pixel.\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n\n      destPos = 0;\n      for (j = elemsInThisChunk; j--; ) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\n\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    // The bitmap has been created in the worker.\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n\n  // Slow path: OffscreenCanvas isn't available in the worker.\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight =\n      i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n    // Expand the mask so it can be used by the canvas.  Any required\n    // inversion has already been handled.\n\n    ({ srcPos } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0,\n    }));\n\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\n\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\n    \"strokeStyle\",\n    \"fillStyle\",\n    \"fillRule\",\n    \"globalAlpha\",\n    \"lineWidth\",\n    \"lineCap\",\n    \"lineJoin\",\n    \"miterLimit\",\n    \"globalCompositeOperation\",\n    \"font\",\n    \"filter\",\n  ];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\n\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    !isNodeJS\n  ) {\n    const { filter } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n  }\n}\n\nfunction composeSMaskBackdrop(bytes, r0, g0, b0) {\n  const length = bytes.length;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = bytes[i];\n    if (alpha === 0) {\n      bytes[i - 3] = r0;\n      bytes[i - 2] = g0;\n      bytes[i - 1] = b0;\n    } else if (alpha < 255) {\n      const alpha_ = 255 - alpha;\n      bytes[i - 3] = (bytes[i - 3] * alpha + r0 * alpha_) >> 8;\n      bytes[i - 2] = (bytes[i - 2] * alpha + g0 * alpha_) >> 8;\n      bytes[i - 1] = (bytes[i - 1] * alpha + b0 * alpha_) >> 8;\n    }\n  }\n}\n\nfunction composeSMaskAlpha(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  const scale = 1 / 255;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n    layerData[i] = (layerData[i] * alpha * scale) | 0;\n  }\n}\n\nfunction composeSMaskLuminosity(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  for (let i = 3; i < length; i += 4) {\n    const y =\n      maskData[i - 3] * 77 + // * 0.3 / 255 * 0x10000\n      maskData[i - 2] * 152 + // * 0.59 ....\n      maskData[i - 1] * 28; // * 0.11 ....\n    layerData[i] = transferMap\n      ? (layerData[i] * transferMap[y >> 8]) >> 8\n      : (layerData[i] * y) >> 16;\n  }\n}\n\nfunction genericComposeSMask(\n  maskCtx,\n  layerCtx,\n  width,\n  height,\n  subtype,\n  backdrop,\n  transferMap,\n  layerOffsetX,\n  layerOffsetY,\n  maskOffsetX,\n  maskOffsetY\n) {\n  const hasBackdrop = !!backdrop;\n  const r0 = hasBackdrop ? backdrop[0] : 0;\n  const g0 = hasBackdrop ? backdrop[1] : 0;\n  const b0 = hasBackdrop ? backdrop[2] : 0;\n\n  const composeFn =\n    subtype === \"Luminosity\" ? composeSMaskLuminosity : composeSMaskAlpha;\n\n  // processing image in chunks to save memory\n  const PIXELS_TO_PROCESS = 1048576;\n  const chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n  for (let row = 0; row < height; row += chunkSize) {\n    const chunkHeight = Math.min(chunkSize, height - row);\n    const maskData = maskCtx.getImageData(\n      layerOffsetX - maskOffsetX,\n      row + (layerOffsetY - maskOffsetY),\n      width,\n      chunkHeight\n    );\n    const layerData = layerCtx.getImageData(\n      layerOffsetX,\n      row + layerOffsetY,\n      width,\n      chunkHeight\n    );\n\n    if (hasBackdrop) {\n      composeSMaskBackdrop(maskData.data, r0, g0, b0);\n    }\n    composeFn(maskData.data, layerData.data, transferMap);\n\n    layerCtx.putImageData(layerData, layerOffsetX, row + layerOffsetY);\n  }\n}\n\nfunction composeSMask(ctx, smask, layerCtx, layerBox) {\n  const layerOffsetX = layerBox[0];\n  const layerOffsetY = layerBox[1];\n  const layerWidth = layerBox[2] - layerOffsetX;\n  const layerHeight = layerBox[3] - layerOffsetY;\n  if (layerWidth === 0 || layerHeight === 0) {\n    return;\n  }\n  genericComposeSMask(\n    smask.context,\n    layerCtx,\n    layerWidth,\n    layerHeight,\n    smask.subtype,\n    smask.backdrop,\n    smask.transferMap,\n    layerOffsetX,\n    layerOffsetY,\n    smask.offsetX,\n    smask.offsetY\n  );\n  ctx.save();\n  ctx.globalAlpha = 1;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n  ctx.drawImage(layerCtx.canvas, 0, 0);\n  ctx.restore();\n}\n\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  // In section 8.9.5.3 of the PDF spec, it's mentioned that the interpolate\n  // flag should be used when the image is upscaled.\n  // In Firefox, smoothing is always used when downscaling images (bug 1360415).\n\n  if (interpolate) {\n    return true;\n  }\n\n  const scale = Util.singularValueDecompose2dScale(transform);\n  // Round to a 32bit float so that `<=` check below will pass for numbers that\n  // are very close, but not exactly the same 64bit floats.\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround(\n    (globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS\n  );\n  return scale[0] <= actualScale && scale[1] <= actualScale;\n}\n\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\n\nclass CanvasGraphics {\n  constructor(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    filterFactory,\n    { optionalContentConfig, markedContentStack = null },\n    annotationCanvasMap,\n    pageColors\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    // Patterns are painted relative to the initial page/form transform, see\n    // PDF spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\")\n        ? this.commonObjs.get(data)\n        : this.objs.get(data);\n    }\n    return fallback;\n  }\n\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null,\n  }) {\n    // For pdfs that use blend modes we have to clear the canvas else certain\n    // blend modes can look wrong since we'd be blending with a white\n    // backdrop. The problem with a transparent backdrop though is we then\n    // don't get sub pixel anti aliasing on text, creating temporary\n    // transparent canvas when we have blend modes.\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\n        \"transparent\",\n        width,\n        height\n      );\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      // The transform can be applied before rendering, transferring it to\n      // the new canvas.\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n\n  executeOperatorList(\n    operatorList,\n    executionStartIdx,\n    continueCallback,\n    stepper\n  ) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n\n    // Sometimes the OperatorList to execute is empty.\n    if (argsArrayLen === i) {\n      return i;\n    }\n\n    const chunkOperations =\n      argsArrayLen - i > EXECUTION_STEPS &&\n      typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n\n      fnId = fnArray[i];\n\n      if (fnId !== OPS.dependency) {\n        // eslint-disable-next-line prefer-spread\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n\n          // If the promise isn't resolved yet, add the continueCallback\n          // to the promise and bail out.\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n\n      i++;\n\n      // If the entire operatorList was executed, stop as were done.\n      if (i === argsArrayLen) {\n        return i;\n      }\n\n      // If the execution took longer then a certain amount of time and\n      // `continueCallback` is specified, interrupt the execution.\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n\n      // If the operatorList isn't executed completely yet OR the execution\n      // time was short enough, do another execution round.\n    }\n  }\n\n  #restoreInitialState() {\n    // Finishing all opened operations such as SMask group painting.\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n\n    this.ctx.restore();\n\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0); // Avoid apply transform twice\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n\n  endDrawing() {\n    this.#restoreInitialState();\n\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (\n          typeof HTMLCanvasElement !== \"undefined\" &&\n          canvas instanceof HTMLCanvasElement\n        ) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(\n        this.pageColors.foreground,\n        this.pageColors.background\n      );\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n\n  _scaleImage(img, inverseTransform) {\n    // Vertical or horizontal scaling shall not be more than 2 to not lose the\n    // pixels during drawImage operation, painting on the temporary canvas(es)\n    // that are twice smaller in size.\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(\n      Math.hypot(inverseTransform[0], inverseTransform[1]),\n      1\n    );\n    let heightScale = Math.max(\n      Math.hypot(inverseTransform[2], inverseTransform[3]),\n      1\n    );\n\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (\n      (widthScale > 2 && paintWidth > 1) ||\n      (heightScale > 2 && paintHeight > 1)\n    ) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(paintWidth / 2);\n        newWidth =\n          paintWidth >= 16384\n            ? Math.floor(paintWidth / 2) - 1 || 1\n            : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        // TODO: see the comment above.\n        newHeight =\n          paintHeight >= 16384\n            ? Math.floor(paintHeight / 2) - 1 || 1\n            : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(\n        tmpCanvasId,\n        newWidth,\n        newHeight\n      );\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(\n        img,\n        0,\n        0,\n        paintWidth,\n        paintHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight,\n    };\n  }\n\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const { width, height } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      // We're reusing the same image several times, so we can cache it.\n      // In case we've a pattern fill we just keep the scaled version of\n      // the image.\n      // Only the scaling part matters, the translation part is just used\n      // to compute offsets (but not when filling patterns see #15573).\n      // TODO: handle the case of a pattern fill if it's possible.\n      cacheKey = JSON.stringify(\n        isPatternFill\n          ? currentTransform\n          : [currentTransform.slice(0, 4), fillColor]\n      );\n\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(\n          Math.min(currentTransform[0], currentTransform[2]) +\n            currentTransform[4]\n        );\n        const offsetY = Math.round(\n          Math.min(currentTransform[1], currentTransform[3]) +\n            currentTransform[5]\n        );\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY,\n        };\n      }\n      scaled = cachedImage;\n    }\n\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n\n    // Create the mask canvas at the size it will be drawn at and also set\n    // its transform to match the current transform so if there are any\n    // patterns applied they will be applied relative to the correct\n    // transform.\n\n    let maskToCanvas = Util.transform(currentTransform, [\n      1 / width,\n      0,\n      0,\n      -1 / height,\n      0,\n      0,\n    ]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const [minX, minY, maxX, maxY] = Util.getAxialAlignedBoundingBox(\n      [0, 0, width, height],\n      maskToCanvas\n    );\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\n      \"fillCanvas\",\n      drawnWidth,\n      drawnHeight\n    );\n    const fillCtx = fillCanvas.context;\n\n    // The offset will be the top-left cordinate mask.\n    // If objToCanvas is [a,b,c,d,e,f] then:\n    //   - offsetX = min(a, c) + e\n    //   - offsetY = min(b, d) + f\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n\n    if (!scaled) {\n      // Pre-scale if needed to improve image smoothing.\n      scaled = this._scaleImage(\n        maskCanvas.canvas,\n        getCurrentTransformInverse(fillCtx)\n      );\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(fillCtx),\n      img.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      fillCtx,\n      scaled,\n      0,\n      0,\n      scaled.width,\n      scaled.height,\n      0,\n      0,\n      width,\n      height\n    );\n    fillCtx.globalCompositeOperation = \"source-in\";\n\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [\n      1,\n      0,\n      0,\n      1,\n      -offsetX,\n      -offsetY,\n    ]);\n    fillCtx.fillStyle = isPatternFill\n      ? fillColor.getPattern(ctx, this, inverse, PathType.FILL)\n      : fillColor;\n\n    fillCtx.fillRect(0, 0, width, height);\n\n    if (cache && !isPatternFill) {\n      // The fill canvas is put in the cache associated to the mask image\n      // so we must remove from the cached canvas: it mustn't be used again.\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n\n    // Round the offsets to avoid drawing fractional pixels.\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY),\n    };\n  }\n\n  // Graphics state\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n\n  setRenderingIntent(intent) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setFlatness(flatness) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps =\n            this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n    // Else, the state is okay and nothing needs to be done.\n  }\n\n  /**\n   * Soft mask mode takes the current main drawing canvas and replaces it with\n   * a temporary canvas. Any drawing operations that happen on the temporary\n   * canvas need to be composed with the main canvas that was suspended (see\n   * `compose()`). The temporary canvas also duplicates many of its operations\n   * on the suspended canvas to keep them in sync, so that when the soft mask\n   * mode ends any clipping paths or transformations will still be active and in\n   * the right order on the canvas' graphics state stack.\n   */\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...getCurrentTransform(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n  }\n\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    // The soft mask is done, now restore the suspended canvas as the main\n    // drawing canvas.\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n\n    this.suspendedCtx = null;\n  }\n\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n\n    composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    // Whatever was drawn has been moved to the suspended canvas, now clear it\n    // out of the current canvas.\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n\n  save() {\n    if (this.inSMaskMode) {\n      // SMask mode may be turned on/off causing us to lose graphics state.\n      // Copy the temporary canvas state to the main(suspended) canvas to keep\n      // it in sync.\n      copyCtxState(this.ctx, this.suspendedCtx);\n      // Don't bother calling save on the temporary canvas since state is not\n      // saved there.\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        // Graphics state is stored on the main(suspended) canvas. Restore its\n        // state then copy it over to the temporary canvas.\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n\n      // Ensure that the clipping path is reset (fixes issue6413.pdf).\n      this.pendingClip = null;\n\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n\n  // Path\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = getCurrentTransform(ctx);\n\n    // Most of the time the current transform is a scaling matrix\n    // so we don't need to transform points before computing min/max:\n    // we can compute min/max first and then smartly \"apply\" the\n    // transform (see Util.scaleMinMax).\n    // For rectangle, moveTo and lineTo, min/max are computed in the\n    // worker (see evaluator.js).\n    const isScalingMatrix =\n      (currentTransform[0] === 0 && currentTransform[3] === 0) ||\n      (currentTransform[1] === 0 && currentTransform[2] === 0);\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3]\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            minMaxForBezier\n          );\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            x,\n            y,\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n\n    current.setCurrentPoint(x, y);\n  }\n\n  closePath() {\n    this.ctx.closePath();\n  }\n\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    // For stroke we want to temporarily change the global alpha to the\n    // stroking alpha.\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(\n          ctx,\n          this,\n          getCurrentTransformInverse(ctx),\n          PathType.STROKE\n        );\n        this.rescaleAndStroke(/* saveRestore */ false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(/* saveRestore */ true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    // Restore the global alpha to the fill alpha\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      needRestore = true;\n    }\n\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(\"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n\n    this.consumePath();\n  }\n\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n\n  endPath() {\n    this.consumePath();\n  }\n\n  // Clipping\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n\n  // Text\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n\n    // A valid matrix needs all main diagonal elements to be non-zero\n    // This also ensures we bypass FF bugzilla bug #719844.\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n\n    // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n    // and in some docs this can be negative (inverted x-y axes).\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n\n    if (fontObj.isType3Font) {\n      return; // we don't need ctx.font for Type3 fonts\n    }\n\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface =\n      fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n\n    // Some font backends cannot handle fonts below certain size.\n    // Keeping the font at minimal size and using the fontSizeScale to change\n    // the current transformation matrix before the fillText/strokeText.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode =\n      textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(\n      textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG\n    );\n    const patternFill = current.patternFill && !font.missingFile;\n\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fill();\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fillText(character, x, y);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n\n    if (isAddToPathSet) {\n      const paths = (this.pendingTextPaths ||= []);\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath,\n      });\n    }\n  }\n\n  get isFontSubpixelAAEnabled() {\n    // Checks if anti-aliasing is enabled when scaled text is painted.\n    // On Windows GDI scaled fonts looks bad.\n    const { context: ctx } = this.cachedCanvases.getCanvas(\n      \"isFontSubpixelAAEnabled\",\n      10,\n      10\n    );\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n    const simpleFillText =\n      current.textRenderingMode === TextRenderingMode.FILL &&\n      !font.disableFontFace &&\n      !current.patternFill;\n\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      patternTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n\n    ctx.lineWidth = lineWidth;\n\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n\n      return undefined;\n    }\n\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += (spacingDir * glyph * fontSize) / 1000;\n        continue;\n      }\n\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx =\n          -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n\n      if (font.remeasure && width > 0) {\n        // Some standard fonts may not have the exact width: rescale per\n        // character if measured width is greater than expected glyph width\n        // and subpixel-aa is enabled, otherwise just center the glyph.\n        const measuredWidth =\n          ((ctx.measureText(character).width * 1000) / fontSize) *\n          fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX +=\n            (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n        }\n      }\n\n      // Only attempt to draw the glyph if it is actually in the embedded font\n      // file or if there isn't a font file so the fallback font is shown.\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          // common case\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX =\n              scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n            const scaledAccentY =\n              scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n            this.paintChar(\n              accent.fontChar,\n              scaledAccentX,\n              scaledAccentY,\n              patternTransform\n            );\n          }\n        }\n      }\n\n      const charWidth = vertical\n        ? width * widthAdvanceScale - spacing * fontDirection\n        : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n\n    return undefined;\n  }\n\n  showType3Text(glyphs) {\n    // Type3 fonts - each glyph is a \"mini-PDF\"\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible =\n      current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n\n    ctx.scale(textHScale, fontDirection);\n\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = (spacingDir * glyph * fontSize) / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n\n  // Type3 fonts\n  setCharWidth(xWidth, yWidth) {\n    // We can safely ignore this since the width should be the same\n    // as the width in the Widths array.\n  }\n\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n\n  // Color\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx =>\n          new CanvasGraphics(\n            ctx,\n            this.commonObjs,\n            this.objs,\n            this.canvasFactory,\n            this.filterFactory,\n            {\n              optionalContentConfig: this.optionalContentConfig,\n              markedContentStack: this.markedContentStack,\n            }\n          ),\n      };\n      pattern = new TilingPattern(\n        IR,\n        color,\n        this.ctx,\n        canvasGraphicsFactory,\n        baseTransform\n      );\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n\n  setStrokeRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n\n  setFillRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(\n      ctx,\n      this,\n      getCurrentTransformInverse(ctx),\n      PathType.SHADING\n    );\n\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const { width, height } = ctx.canvas;\n      const [x0, y0, x1, y1] = Util.getAxialAlignedBoundingBox(\n        [0, 0, width, height],\n        inv\n      );\n\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      // HACK to draw the gradient onto an infinite rectangle.\n      // PDF gradients are drawn across the entire image while\n      // Canvas only allows gradients to be drawn in a rectangle\n      // The following bug should allow us to remove this.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n\n  // Images\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n\n    if (Array.isArray(matrix) && matrix.length === 6) {\n      this.transform(...matrix);\n    }\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    this.save();\n    // If there's an active soft mask we don't want it enabled for the group, so\n    // clear it out. The mask and suspended canvas will be restored in endGroup.\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n\n    const currentCtx = this.ctx;\n    // TODO non-isolated groups - according to Rik at adobe non-isolated\n    // group results aren't usually that different and they even have tools\n    // that ignore this setting. Notes from Rik on implementing:\n    // - When you encounter an transparency group, create a new canvas with\n    // the dimensions of the bbox\n    // - copy the content from the previous canvas to the new canvas\n    // - draw as usual\n    // - remove the backdrop alpha:\n    // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n    // value of your transparency group and 'alphaBackdrop' the alpha of the\n    // backdrop\n    // - remove background color:\n    // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n\n    // TODO knockout - supposedly possible with the clever use of compositing\n    // modes.\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n\n    // Based on the current transform figure out how big the bounding box\n    // will actually be.\n    let bounds = Util.getAxialAlignedBoundingBox(\n      group.bbox,\n      getCurrentTransform(currentCtx)\n    );\n    // Clip the bounding box to the current canvas.\n    const canvasBounds = [\n      0,\n      0,\n      currentCtx.canvas.width,\n      currentCtx.canvas.height,\n    ];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    // Use ceil in case we're between sizes so we don't create canvas that is\n    // too small and make the canvas at least 1x1 pixels.\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    let drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    let drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    let scaleX = 1,\n      scaleY = 1;\n    if (drawnWidth > MAX_GROUP_SIZE) {\n      scaleX = drawnWidth / MAX_GROUP_SIZE;\n      drawnWidth = MAX_GROUP_SIZE;\n    }\n    if (drawnHeight > MAX_GROUP_SIZE) {\n      scaleY = drawnHeight / MAX_GROUP_SIZE;\n      drawnHeight = MAX_GROUP_SIZE;\n    }\n\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      // Using two cache entries is case if masks are used one after another.\n      cacheId += \"_smask_\" + (this.smaskCounter++ % 2);\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    const groupCtx = scratchCanvas.context;\n\n    // Since we created a new canvas that is just the size of the bounding box\n    // we have to translate the group ctx.\n    groupCtx.scale(1 / scaleX, 1 / scaleY);\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n\n    if (group.smask) {\n      // Saving state and cached mask to be used in setGState.\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        scaleX,\n        scaleY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null, // used during suspend operation\n      });\n    } else {\n      // Setup the current ctx so when the group is popped we draw it at the\n      // right location.\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.scale(scaleX, scaleY);\n      currentCtx.save();\n    }\n    // The transparency group inherits all off the current graphics state\n    // except the blend mode, soft mask, and alpha constants.\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    // Turn off image smoothing to avoid sub pixel interpolation which can\n    // look kind of blurry for some pdfs.\n    this.ctx.imageSmoothingEnabled = false;\n\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox(\n        [0, 0, groupCtx.canvas.width, groupCtx.canvas.height],\n        currentMtx\n      );\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    // The annotations are drawn just after the page content.\n    // The page content drawing can potentially have set a transform,\n    // a clipping path, whatever...\n    // So in order to have something clean, we restore the initial state.\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n\n    this.ctx.save();\n    this.save();\n\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n\n    if (Array.isArray(rect) && rect.length === 4) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(\n          getCurrentTransform(this.ctx)\n        );\n        const { viewportScale } = this;\n        const canvasWidth = Math.ceil(\n          width * this.outputScaleX * viewportScale\n        );\n        const canvasHeight = Math.ceil(\n          height * this.outputScaleY * viewportScale\n        );\n\n        this.annotationCanvas = this.canvasFactory.create(\n          canvasWidth,\n          canvasHeight\n        );\n        const { canvas, context } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n\n    ctx.save();\n    // The mask is drawn with the transform applied. Reset the current\n    // transform to draw to the identity.\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectRepeat(\n    img,\n    scaleX,\n    skewX = 0,\n    skewY = 0,\n    scaleY,\n    positions\n  ) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    img = this.getObject(img.data, img);\n\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n\n    ctx.setTransform(\n      1,\n      0,\n      0,\n      1,\n      mask.offsetX - currentTransform[4],\n      mask.offsetY - currentTransform[5]\n    );\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [\n        scaleX,\n        skewX,\n        skewY,\n        scaleY,\n        positions[i],\n        positions[i + 1],\n      ]);\n\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n\n    for (const image of images) {\n      const { data, width, height, transform } = image;\n\n      const maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height\n      );\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n\n      maskCtx.globalCompositeOperation = \"source-in\";\n\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(\n            maskCtx,\n            this,\n            getCurrentTransformInverse(ctx),\n            PathType.FILL\n          )\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        maskCanvas.canvas,\n        0,\n        0,\n        width,\n        height,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    this.paintInlineImageXObject(imgData);\n  }\n\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height,\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const { bitmap, width, height } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\n      \"inlineImage\",\n      width,\n      height\n    );\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n\n    return tmpCanvas.canvas;\n  }\n\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n\n    this.save();\n\n    if (\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      !isNodeJS\n    ) {\n      // The filter, if any, will be applied in applyTransferMapsToBitmap.\n      // It must be applied to the image before rescaling else some artifacts\n      // could appear.\n      // The final restore will reset it to its value.\n      const { filter } = ctx;\n      if (filter !== \"none\" && filter !== \"\") {\n        ctx.filter = \"none\";\n      }\n    }\n\n    // scale the image to the unit square\n    ctx.scale(1 / width, -1 / height);\n\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (\n      (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement) ||\n      !imgData.data\n    ) {\n      // typeof check is needed due to node.js support, see issue #8489\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\n        \"inlineImage\",\n        width,\n        height\n      );\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    const scaled = this._scaleImage(\n      imgToPaint,\n      getCurrentTransformInverse(ctx)\n    );\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(ctx),\n      imgData.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      ctx,\n      scaled.img,\n      0,\n      0,\n      scaled.paintWidth,\n      scaled.paintHeight,\n      0,\n      -height,\n      width,\n      height\n    );\n    this.compose();\n    this.restore();\n  }\n\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        imgToPaint,\n        entry.x,\n        entry.y,\n        entry.w,\n        entry.h,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n\n  // Marked content\n\n  markPoint(tag) {\n    // TODO Marked content.\n  }\n\n  markPointProps(tag, properties) {\n    // TODO Marked content.\n  }\n\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true,\n    });\n  }\n\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties),\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n\n  // Compatibility\n\n  beginCompat() {\n    // TODO ignore undefined operators (should we do that anyway?)\n  }\n\n  endCompat() {\n    // TODO stop ignoring undefined operators\n  }\n\n  // Helper functions\n\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        // Fast path\n        this._cachedGetSinglePixelWidth =\n          1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n\n  getScaleForStroking() {\n    // A pixel has thicknessX = thicknessY = 1;\n    // A transformed pixel is a parallelogram and the thicknesses\n    // corresponds to the heights.\n    // The goal of this function is to rescale before setting the\n    // lineWidth in order to have both thicknesses greater or equal\n    // to 1 after transform.\n    if (this._cachedScaleForStroking[0] === -1) {\n      const { lineWidth } = this.current;\n      const { a, b, c, d } = this.ctx.getTransform();\n      let scaleX, scaleY;\n\n      if (b === 0 && c === 0) {\n        // Fast path\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        // A pixel (base (x, y)) is transformed by M into a parallelogram:\n        //  - its area is |det(M)|;\n        //  - heightY (orthogonal to Mx) has a length: |det(M)| / norm(Mx);\n        //  - heightX (orthogonal to My) has a length: |det(M)| / norm(My).\n        // heightX and heightY are the thicknesses of the transformed pixel\n        // and they must be both greater or equal to 1.\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n\n  // Rescale before stroking in order to have a final lineWidth\n  // with both thicknesses greater or equal to 1.\n  rescaleAndStroke(saveRestore) {\n    const { ctx } = this;\n    const { lineWidth } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n\n    ctx.lineWidth = lineWidth || 1;\n\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n\n    ctx.scale(scaleX, scaleY);\n\n    // How the dashed line is rendered depends on the current transform...\n    // so we added a rescale to handle too thin lines and consequently\n    // the way the line is dashed will be modified.\n    // If scaleX === scaleY, the dashed lines will be rendered correctly\n    // else we'll have some bugs (but only with too thin lines).\n    // Here we take the max... why not taking the min... or something else.\n    // Anyway, as said it's buggy when scaleX !== scaleY.\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n\n    ctx.stroke();\n\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\nexport { CanvasGraphics };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n} from \"./base_factory.js\";\nimport {\n  BaseException,\n  FeatureTest,\n  shadow,\n  stringToBytes,\n  Util,\n  warn,\n} from \"../shared/util.js\";\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\n\nclass PixelsPerInch {\n  static CSS = 96.0;\n\n  static PDF = 72.0;\n\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\n\n/**\n * FilterFactory aims to create some SVG filters we can use when drawing an\n * image (or whatever) on a canvas.\n * Filters aren't applied with ctx.putImageData because it just overwrites the\n * underlying pixels.\n * With these filters, it's possible for example to apply some transfer maps on\n * an image without the need to apply them on the pixel arrays: the renderer\n * does the magic for us.\n */\nclass DOMFilterFactory extends BaseFilterFactory {\n  #_cache;\n\n  #_defs;\n\n  #docId;\n\n  #document;\n\n  #_hcmCache;\n\n  #id = 0;\n\n  constructor({ docId, ownerDocument = globalThis.document } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n\n  get #cache() {\n    return (this.#_cache ||= new Map());\n  }\n\n  get #hcmCache() {\n    return (this.#_hcmCache ||= new Map());\n  }\n\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const { style } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n\n    // When a page is zoomed the page is re-drawn but the maps are likely\n    // the same.\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n\n    let tableR, tableG, tableB, key;\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      key = tableR = tableG = tableB = buffer.join(\",\");\n    } else {\n      const [mapR, mapG, mapB] = maps;\n      const bufferR = new Array(256);\n      const bufferG = new Array(256);\n      const bufferB = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        bufferR[i] = mapR[i] / 255;\n        bufferG[i] = mapG[i] / 255;\n        bufferB[i] = mapB[i] / 255;\n      }\n      tableR = bufferR.join(\",\");\n      tableG = bufferG.join(\",\");\n      tableB = bufferB.join(\",\");\n      key = `${tableR}${tableG}${tableB}`;\n    }\n\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n\n    // We create a SVG filter: feComponentTransferElement\n    //  https://www.w3.org/TR/SVG11/filters.html#feComponentTransferElement\n\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n\n    return url;\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n\n    if (\n      (fgColor === \"#000000\" && bgColor === \"#ffffff\") ||\n      fgColor === bgColor\n    ) {\n      return info.url;\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_Colors_and_Luminance\n    //\n    // Relative luminance:\n    // https://www.w3.org/TR/WCAG20/#relativeluminancedef\n    //\n    // We compute the rounded luminance of the default background color.\n    // Then for every color in the pdf, if its rounded luminance is the\n    // same as the background one then it's replaced by the new\n    // background color else by the foreground one.\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + (i / n) * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(\n      getSteps(0, 5),\n      getSteps(1, 5),\n      getSteps(2, 5),\n      filter\n    );\n\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(\n      0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]\n    );\n    let bgGray = Math.round(\n      0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]\n    );\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(\n      this.#getRGB.bind(this)\n    );\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [\n        bgGray,\n        fgGray,\n        newBgRGB,\n        newFgRGB,\n      ];\n    }\n    this.#defs.style.color = \"\";\n\n    // Now we can create the filters to highlight some canvas parts.\n    // The colors in the pdf will almost be Canvas and CanvasText, hence we\n    // want to filter them to finally get Highlight and HighlightText.\n    // Since we're in HCM the background color and the foreground color should\n    // be really different when converted to grayscale (if they're not then it\n    // means that we've a poor contrast). Once the canvas colors are converted\n    // to grayscale we can easily map them on their new colors.\n    // The grayscale step is important because if we've something like:\n    //   fgColor = #FF....\n    //   bgColor = #FF....\n    //   then we are enable to map the red component on the new red components\n    //   which can be different.\n\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(\n      getSteps(newFgRGB[0], newBgRGB[0], 5),\n      getSteps(newFgRGB[1], newBgRGB[1], 5),\n      getSteps(newFgRGB[2], newBgRGB[2], 5),\n      filter\n    );\n\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#hcmCache.size !== 0) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(\n      SVG_NS,\n      \"feColorMatrix\"\n    );\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\n      \"values\",\n      \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\"\n    );\n    filter.append(feColorMatrix);\n  }\n\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n\n    return filter;\n  }\n\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(\n      SVG_NS,\n      \"feComponentTransfer\"\n    );\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\nasync function fetchData(url, type = \"text\") {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    isValidFetchUrl(url, document.baseURI)\n  ) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n\n  // The Fetch API is not supported.\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, /* async = */ true);\n    request.responseType = type;\n\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n\n    request.send(null);\n  });\n}\n\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(\n      url,\n      /* type = */ this.isCompressed ? \"arraybuffer\" : \"text\"\n    ).then(data => ({\n      cMapData:\n        data instanceof ArrayBuffer\n          ? new Uint8Array(data)\n          : stringToBytes(data),\n      compressionType,\n    }));\n  }\n}\n\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url, /* type = */ \"arraybuffer\").then(\n      data => new Uint8Array(data)\n    );\n  }\n}\n\nclass DOMSVGFactory extends BaseSVGFactory {\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n/**\n * @typedef {Object} PageViewportParameters\n * @property {Array<number>} viewBox - The xMin, yMin, xMax and\n *   yMax coordinates.\n * @property {number} scale - The scale of the viewport.\n * @property {number} rotation - The rotation, in degrees, of the viewport.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset. The\n *   default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset. The\n *   default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * @typedef {Object} PageViewportCloneParameters\n * @property {number} [scale] - The scale, overriding the one in the cloned\n *   viewport. The default value is `this.scale`.\n * @property {number} [rotation] - The rotation, in degrees, overriding the one\n *   in the cloned viewport. The default value is `this.rotation`.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `this.offsetX`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `this.offsetY`.\n * @property {boolean} [dontFlip] - If true, the x-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n */\nclass PageViewport {\n  /**\n   * @param {PageViewportParameters}\n   */\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    // Normalize the rotation, by clamping it to the [0, 360) range.\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\n          \"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\"\n        );\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * The original, un-scaled, viewport dimensions.\n   * @type {Object}\n   */\n  get rawDims() {\n    const { viewBox } = this;\n    return shadow(this, \"rawDims\", {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1],\n    });\n  }\n\n  /**\n   * Clones viewport, with optional additional properties.\n   * @param {PageViewportCloneParameters} [params]\n   * @returns {PageViewport} Cloned viewport.\n   */\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * Converts PDF point to the viewport coordinates. For examples, useful for\n   * converting PDF location into canvas pixel coordinates.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the viewport coordinate space.\n   * @see {@link convertToPdfPoint}\n   * @see {@link convertToViewportRectangle}\n   */\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n\n  /**\n   * Converts PDF rectangle to the viewport coordinates.\n   * @param {Array} rect - The xMin, yMin, xMax and yMax coordinates.\n   * @returns {Array} Array containing corresponding coordinates of the\n   *   rectangle in the viewport coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n\n  /**\n   * Converts viewport coordinates to the PDF location. For examples, useful\n   * for converting canvas pixel location into PDF one.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the PDF coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\n\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\n\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\n\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\n\n/**\n * Gets the filename from a given URL.\n * @param {string} url\n * @param {boolean} [onlyStripPath]\n * @returns {string}\n */\nfunction getFilenameFromUrl(url, onlyStripPath = false) {\n  if (!onlyStripPath) {\n    [url] = url.split(/[#?]/, 1);\n  }\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\n\n/**\n * Returns the filename or guessed filename from the url (see issue 3455).\n * @param {string} url - The original PDF location.\n * @param {string} defaultFilename - The value returned if the filename is\n *   unknown, or the protocol is unsupported.\n * @returns {string} Guessed PDF filename.\n */\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  //              SCHEME        HOST        1.PATH  2.QUERY   3.REF\n  // Pattern to get last matching NAME.pdf\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename =\n    reFilename.exec(splitURI[1]) ||\n    reFilename.exec(splitURI[2]) ||\n    reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      // URL-encoded %2Fpath%2Fto%2Ffile.pdf should be file.pdf\n      try {\n        suggestedFilename = reFilename.exec(\n          decodeURIComponent(suggestedFilename)\n        )[0];\n      } catch {\n        // Possible (extremely rare) errors:\n        // URIError \"Malformed URI\", e.g. for \"%AA.pdf\"\n        // TypeError \"null has no properties\", e.g. for \"%2F.pdf\"\n      }\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\n\nclass StatTimer {\n  started = Object.create(null);\n\n  times = [];\n\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    // Remove timer from started so it can be called again.\n    delete this.started[name];\n  }\n\n  toString() {\n    // Find the longest name for padding purposes.\n    const outBuf = [];\n    let longest = 0;\n    for (const { name } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const { name, start, end } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\n\nfunction isValidFetchUrl(url, baseUrl) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    throw new Error(\"Not implemented: isValidFetchUrl\");\n  }\n  try {\n    const { protocol } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    // The Fetch API only supports the http/https protocols, and not file/ftp.\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch {\n    return false; // `new URL()` will throw on incorrect data.\n  }\n}\n\n/**\n * Event handler to suppress context menu.\n */\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\n\n// Deprecated API function -- display regardless of the `verbosity` setting.\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\n\nlet pdfDateStringRegex;\n\nclass PDFDateString {\n  /**\n   * Convert a PDF date string to a JavaScript `Date` object.\n   *\n   * The PDF date string format is described in section 7.9.4 of the official\n   * PDF 32000-1:2008 specification. However, in the PDF 1.7 reference (sixth\n   * edition) Adobe describes the same format including a trailing apostrophe.\n   * This syntax in incorrect, but Adobe Acrobat creates PDF files that contain\n   * them. We ignore all apostrophes as they are not necessary for date parsing.\n   *\n   * Moreover, Adobe Acrobat doesn't handle changing the date to universal time\n   * and doesn't use the user's time zone (effectively ignoring the HH' and mm'\n   * parts of the date string).\n   *\n   * @param {string} input\n   * @returns {Date|null}\n   */\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n\n    // Lazily initialize the regular expression.\n    pdfDateStringRegex ||= new RegExp(\n      \"^D:\" + // Prefix (required)\n        \"(\\\\d{4})\" + // Year (required)\n        \"(\\\\d{2})?\" + // Month (optional)\n        \"(\\\\d{2})?\" + // Day (optional)\n        \"(\\\\d{2})?\" + // Hour (optional)\n        \"(\\\\d{2})?\" + // Minute (optional)\n        \"(\\\\d{2})?\" + // Second (optional)\n        \"([Z|+|-])?\" + // Universal time relation (optional)\n        \"(\\\\d{2})?\" + // Offset hour (optional)\n        \"'?\" + // Splitting apostrophe (optional)\n        \"(\\\\d{2})?\" + // Offset minute (optional)\n        \"'?\" // Trailing apostrophe (optional)\n    );\n\n    // Optional fields that don't satisfy the requirements from the regular\n    // expression (such as incorrect digit counts or numbers that are out of\n    // range) will fall back the defaults from the specification.\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n\n    // JavaScript's `Date` object expects the month to be between 0 and 11\n    // instead of 1 and 12, so we have to correct for that.\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n\n    // Universal time relation 'Z' means that the local time is equal to the\n    // universal time, whereas the relations '+'/'-' indicate that the local\n    // time is later respectively earlier than the universal time. Every date\n    // is normalized to universal time.\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\n\n/**\n * NOTE: This is (mostly) intended to support printing of XFA forms.\n */\nfunction getXfaPageViewport(xfaPage, { scale = 1, rotation = 0 }) {\n  const { width, height } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation,\n  });\n}\n\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [\n      (colorRGB & 0xff0000) >> 16,\n      (colorRGB & 0x00ff00) >> 8,\n      colorRGB & 0x0000ff,\n    ];\n  }\n\n  if (color.startsWith(\"rgb(\")) {\n    // getComputedStyle(...).color returns a `rgb(R, G, B)` color.\n    return color\n      .slice(/* \"rgb(\".length */ 4, -1) // Strip out \"rgb(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x));\n  }\n\n  if (color.startsWith(\"rgba(\")) {\n    return color\n      .slice(/* \"rgba(\".length */ 5, -1) // Strip out \"rgba(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x))\n      .slice(0, 3);\n  }\n\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\n\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\n\nfunction getCurrentTransform(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\n\nfunction getCurrentTransformInverse(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\n\n/**\n * @param {HTMLDivElement} div\n * @param {PageViewport} viewport\n * @param {boolean} mustFlip\n * @param {boolean} mustRotate\n */\nfunction setLayerDimensions(\n  div,\n  viewport,\n  mustFlip = false,\n  mustRotate = true\n) {\n  if (viewport instanceof PageViewport) {\n    const { pageWidth, pageHeight } = viewport.rawDims;\n    const { style } = div;\n    const useRound = FeatureTest.isCSSRoundSupported;\n\n    const w = `var(--scale-factor) * ${pageWidth}px`,\n      h = `var(--scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(${w}, 1px)` : `calc(${w})`,\n      heightStr = useRound ? `round(${h}, 1px)` : `calc(${h})`;\n\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\n\nexport {\n  deprecated,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMFilterFactory,\n  DOMStandardFontDataFactory,\n  DOMSVGFactory,\n  fetchData,\n  getColorValues,\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getRGB,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  isValidFetchUrl,\n  noContextMenu,\n  PageViewport,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n  StatTimer,\n};\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DOMSVGFactory } from \"./display_utils.js\";\nimport { shadow } from \"../shared/util.js\";\n\n/**\n * Manage the SVGs drawn on top of the page canvas.\n * It's important to have them directly on top of the canvas because we want to\n * be able to use mix-blend-mode for some of them.\n */\nclass DrawLayer {\n  #parent = null;\n\n  #id = 0;\n\n  #mapping = new Map();\n\n  #toUpdate = new Map();\n\n  constructor({ pageIndex }) {\n    this.pageIndex = pageIndex;\n  }\n\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n\n  static #setBox(element, { x = 0, y = 0, width = 1, height = 1 } = {}) {\n    const { style } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n\n  #createSVG(box) {\n    const svg = DrawLayer._svgFactory.create(1, 1, /* skipDimensions = */ true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    DrawLayer.#setBox(svg, box);\n\n    return svg;\n  }\n\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n\n    return clipPathId;\n  }\n\n  highlight(outlines, color, opacity, isPathUpdatable = false) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add(\"highlight\");\n    if (outlines.free) {\n      root.classList.add(\"free\");\n    }\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"d\", outlines.toSVGPath());\n\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n\n    // Create the clipping path for the editor div.\n    const clipPathId = this.#createClipPath(defs, pathId);\n\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    root.setAttribute(\"fill\", color);\n    root.setAttribute(\"fill-opacity\", opacity);\n    use.setAttribute(\"href\", `#${pathId}`);\n\n    this.#mapping.set(id, root);\n\n    return { id, clipPathId: `url(#${clipPathId})` };\n  }\n\n  highlightOutline(outlines) {\n    // We cannot draw the outline directly in the SVG for highlights because\n    // it composes with its parent with mix-blend-mode: multiply.\n    // But the outline has a different mix-blend-mode, so we need to draw it in\n    // its own SVG.\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add(\"highlightOutline\");\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"d\", outlines.toSVGPath());\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n\n    let maskId;\n    if (outlines.free) {\n      root.classList.add(\"free\");\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n\n    this.#mapping.set(id, root);\n\n    return id;\n  }\n\n  finalizeLine(id, line) {\n    const path = this.#toUpdate.get(id);\n    this.#toUpdate.delete(id);\n    this.updateBox(id, line.box);\n    path.setAttribute(\"d\", line.toSVGPath());\n  }\n\n  updateLine(id, line) {\n    const root = this.#mapping.get(id);\n    const defs = root.firstChild;\n    const path = defs.firstChild;\n    path.setAttribute(\"d\", line.toSVGPath());\n  }\n\n  removeFreeHighlight(id) {\n    this.remove(id);\n    this.#toUpdate.delete(id);\n  }\n\n  updatePath(id, line) {\n    this.#toUpdate.get(id).setAttribute(\"d\", line.toSVGPath());\n  }\n\n  updateBox(id, box) {\n    DrawLayer.#setBox(this.#mapping.get(id), box);\n  }\n\n  show(id, visible) {\n    this.#mapping.get(id).classList.toggle(\"hidden\", !visible);\n  }\n\n  rotate(id, angle) {\n    this.#mapping.get(id).setAttribute(\"data-main-rotation\", angle);\n  }\n\n  changeColor(id, color) {\n    this.#mapping.get(id).setAttribute(\"fill\", color);\n  }\n\n  changeOpacity(id, opacity) {\n    this.#mapping.get(id).setAttribute(\"fill-opacity\", opacity);\n  }\n\n  addClass(id, className) {\n    this.#mapping.get(id).classList.add(className);\n  }\n\n  removeClass(id, className) {\n    this.#mapping.get(id).classList.remove(className);\n  }\n\n  remove(id) {\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n  }\n}\n\nexport { DrawLayer };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  assert,\n  LINE_FACTOR,\n  shadow,\n  Util,\n} from \"../../shared/util.js\";\nimport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  KeyboardManager,\n} from \"./tools.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { FreeTextAnnotationElement } from \"../annotation_layer.js\";\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass FreeTextEditor extends AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n\n  #boundEditorDivPaste = this.editorDivPaste.bind(this);\n\n  #color;\n\n  #content = \"\";\n\n  #editorDivId = `${this.id}-editor`;\n\n  #fontSize;\n\n  #initialData = null;\n\n  static _freeTextDefaultContent = \"\";\n\n  static _internalPadding = 0;\n\n  static _defaultColor = null;\n\n  static _defaultFontSize = 10;\n\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n\n    const arrowChecker = self => self.isEmpty();\n\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          // Commit the text in case the user use ctrl+s to save the document.\n          // The event must bubble in order to be caught by the viewer.\n          // See bug 1831574.\n          [\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"],\n          proto.commitOrRemove,\n          { bubbles: true },\n        ],\n        [\n          [\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"],\n          proto.commitOrRemove,\n        ],\n        [\n          [\"ArrowLeft\", \"mac+ArrowLeft\"],\n          proto._translateEmpty,\n          { args: [-small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          proto._translateEmpty,\n          { args: [-big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowRight\", \"mac+ArrowRight\"],\n          proto._translateEmpty,\n          { args: [small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          proto._translateEmpty,\n          { args: [big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowUp\", \"mac+ArrowUp\"],\n          proto._translateEmpty,\n          { args: [0, -small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"],\n          proto._translateEmpty,\n          { args: [0, -big], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowDown\", \"mac+ArrowDown\"],\n          proto._translateEmpty,\n          { args: [0, small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"],\n          proto._translateEmpty,\n          { args: [0, big], checker: arrowChecker },\n        ],\n      ])\n    );\n  }\n\n  static _type = \"freetext\";\n\n  static _editorType = AnnotationEditorType.FREETEXT;\n\n  constructor(params) {\n    super({ ...params, name: \"freeTextEditor\" });\n    this.#color =\n      params.color ||\n      FreeTextEditor._defaultColor ||\n      AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager, {\n      strings: [\"pdfjs-free-text-default-content\"],\n    });\n    const style = getComputedStyle(document.documentElement);\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      const lineHeight = parseFloat(\n        style.getPropertyValue(\"--freetext-line-height\")\n      );\n      assert(\n        lineHeight === LINE_FACTOR,\n        \"Update the CSS variable to agree with the constant.\"\n      );\n    }\n\n    this._internalPadding = parseFloat(\n      style.getPropertyValue(\"--freetext-padding\")\n    );\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.FREETEXT_SIZE,\n        FreeTextEditor._defaultFontSize,\n      ],\n      [\n        AnnotationEditorParamsType.FREETEXT_COLOR,\n        FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize],\n      [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color],\n    ];\n  }\n\n  /**\n   * Update the font size and make this action as undoable.\n   * @param {number} fontSize\n   */\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Helper to translate the editor with the keyboard when it's empty.\n   * @param {number} x in page units.\n   * @param {number} y in page units.\n   */\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, /* noCommit = */ true);\n  }\n\n  /** @inheritdoc */\n  getInitialTranslation() {\n    // The start of the base line is where the user clicked.\n    const scale = this.parentScale;\n    return [\n      -FreeTextEditor._internalPadding * scale,\n      -(FreeTextEditor._internalPadding + this.#fontSize) * scale,\n    ];\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.editorDiv.addEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.addEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.addEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.addEventListener(\"input\", this.#boundEditorDivInput);\n    this.editorDiv.addEventListener(\"paste\", this.#boundEditorDivPaste);\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.editorDiv.removeEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener(\"input\", this.#boundEditorDivInput);\n    this.editorDiv.removeEventListener(\"paste\", this.#boundEditorDivPaste);\n\n    // On Chrome, the focus is given to <body> when contentEditable is set to\n    // false, hence we focus the div.\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n\n    // In case the blur callback hasn't been called.\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    if (this.width) {\n      // The editor was created in using ctrl+c.\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n\n  /**\n   * Extract the text from this editor.\n   * @returns {string}\n   */\n  #extractText() {\n    // We don't use innerText because there are some bugs with line breaks.\n    const buffer = [];\n    this.editorDiv.normalize();\n    for (const child of this.editorDiv.childNodes) {\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n    }\n    return buffer.join(\"\\n\");\n  }\n\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      // This editor isn't on screen but we need to get its dimensions, so\n      // we just insert it in the DOM, get its bounding box and then remove it.\n      const { currentLayer, div } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n\n    // The dimensions are relative to the rotation of the page, hence we need to\n    // take that into account (see issue #16636).\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Commit the content we have in this editor.\n   * @returns {undefined}\n   */\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = (this.#content = this.#extractText().trimEnd());\n    if (savedText === newText) {\n      return;\n    }\n\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false,\n    });\n    this.#setEditorDimensions();\n  }\n\n  /** @inheritdoc */\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n\n  /** @inheritdoc */\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n\n  /**\n   * ondblclick callback.\n   * @param {MouseEvent} event\n   */\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n\n  /**\n   * onkeydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      // Avoid to add an unwanted new line.\n      event.preventDefault();\n    }\n  }\n\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text\");\n    this.enableEditing();\n\n    AnnotationEditor._l10nPromise\n      .get(\"pdfjs-free-text-default-content\")\n      .then(msg => this.editorDiv?.setAttribute(\"default-content\", msg));\n    this.editorDiv.contentEditable = true;\n\n    const { style } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n\n    this.div.append(this.editorDiv);\n\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n\n    bindEvents(this, this.div, [\"dblclick\", \"keydown\"]);\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        // This stuff is hard to test: if something is changed here, please\n        // test with the following PDF file:\n        //  - freetexts.pdf\n        //  - rotated_freetexts.pdf\n        // Only small variations between the original annotation and its editor\n        // are allowed.\n\n        // position is the position of the first glyph in the annotation\n        // and it's relative to its container.\n        const { position } = this.#initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX =\n              baseX +\n              (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY =\n              baseY +\n              (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this.setAt(\n          baseX * parentWidth,\n          baseY * parentHeight,\n          this.width * parentWidth,\n          this.height * parentHeight\n        );\n      }\n\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      this.div.setAttribute(\"annotation-id\", this.annotationElementId);\n    }\n\n    return this.div;\n  }\n\n  static #getNodeContent(node) {\n    return (\n      node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText\n    ).replaceAll(EOL_PATTERN, \"\");\n  }\n\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const { types } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(\n      clipboardData.getData(\"text\") || \"\"\n    ).replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n\n    // Collect the text before and after the caret.\n    const { startContainer, startOffset } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(\n        startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\")\n      );\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(\n        startContainer.nodeValue\n          .slice(0, startOffset)\n          .replaceAll(EOL_PATTERN, \"\")\n      );\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n\n    // Set the caret at the right position.\n    const newRange = new Range();\n    let beforeLength = bufferBefore.reduce((acc, line) => acc + line.length, 0);\n    for (const { firstChild } of this.editorDiv.childNodes) {\n      // Each child is either a div with a text node or a br element.\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(\n        line ? document.createTextNode(line) : document.createElement(\"br\")\n      );\n      this.editorDiv.append(div);\n    }\n  }\n\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n\n  /** @inheritdoc */\n  get contentDiv() {\n    return this.editorDiv;\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: { fontSize, fontColor },\n          rect,\n          rotation,\n          id,\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      // textContent is supposed to be an array of strings containing each line\n      // of text. However, it can be null or empty.\n      if (!textContent || textContent.length === 0) {\n        // Empty annotation.\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n      };\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor.#initialData = initialData;\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    if (this.deleted) {\n      return {\n        pageIndex: this.pageIndex,\n        id: this.annotationElementId,\n        deleted: true,\n      };\n    }\n\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(\n      this.isAttachedToDOM\n        ? getComputedStyle(this.editorDiv).color\n        : this.#color\n    );\n\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n\n    if (isForCopying) {\n      // Don't add the id when copying because the pasted editor mustn't be\n      // linked to an existing annotation.\n      return serialized;\n    }\n\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n\n    serialized.id = this.annotationElementId;\n\n    return serialized;\n  }\n\n  #hasElementChanged(serialized) {\n    const { value, fontSize, color, pageIndex } = this.#initialData;\n\n    return (\n      this._hasBeenMoved ||\n      serialized.value !== value ||\n      serialized.fontSize !== fontSize ||\n      serialized.color.some((c, i) => c !== color[i]) ||\n      serialized.pageIndex !== pageIndex\n    );\n  }\n\n  /** @inheritdoc */\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const { style } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(\n        line ? document.createTextNode(line) : document.createElement(\"br\")\n      );\n      content.append(div);\n    }\n\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n    });\n\n    return content;\n  }\n\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\nexport { FreeTextEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  shadow,\n  Util,\n} from \"../../shared/util.js\";\nimport { bindEvents, KeyboardManager } from \"./tools.js\";\nimport { FreeOutliner, Outliner } from \"./outliner.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { ColorPicker } from \"./color_picker.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\n/**\n * Basic draw editor in order to generate an Highlight annotation.\n */\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n\n  #anchorOffset = 0;\n\n  #boxes;\n\n  #clipPathId = null;\n\n  #colorPicker = null;\n\n  #focusOutlines = null;\n\n  #focusNode = null;\n\n  #focusOffset = 0;\n\n  #highlightDiv = null;\n\n  #highlightOutlines = null;\n\n  #id = null;\n\n  #isFreeHighlight = false;\n\n  #boundKeydown = this.#keydown.bind(this);\n\n  #lastPoint = null;\n\n  #opacity;\n\n  #outlineId = null;\n\n  #text = \"\";\n\n  #thickness;\n\n  #methodOfCreation = \"\";\n\n  static _defaultColor = null;\n\n  static _defaultOpacity = 1;\n\n  static _defaultThickness = 12;\n\n  static _l10nPromise;\n\n  static _type = \"highlight\";\n\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n\n  static _freeHighlightId = -1;\n\n  static _freeHighlight = null;\n\n  static _freeHighlightClipId = \"\";\n\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, { args: [0] }],\n        [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, { args: [1] }],\n        [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, { args: [2] }],\n        [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, { args: [3] }],\n      ])\n    );\n  }\n\n  constructor(params) {\n    super({ ...params, name: \"highlightEditor\" });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n\n  /** @inheritdoc */\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation,\n    };\n  }\n\n  /** @inheritdoc */\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n    };\n  }\n\n  static computeTelemetryFinalData(data) {\n    // We want to know how many colors have been used.\n    return { numberOfColors: data.get(\"color\").size };\n  }\n\n  #createOutlines() {\n    const outliner = new Outliner(this.#boxes, /* borderWidth = */ 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    ({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    } = this.#highlightOutlines.box);\n\n    const outlinerForOutline = new Outliner(\n      this.#boxes,\n      /* borderWidth = */ 0.0025,\n      /* innerMargin = */ 0.001,\n      this._uiManager.direction === \"ltr\"\n    );\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n\n    // The last point is in the pages coordinate system.\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [\n      (lastPoint[0] - this.x) / this.width,\n      (lastPoint[1] - this.y) / this.height,\n    ];\n  }\n\n  #createFreeOutlines({ highlightOutlines, highlightId, clipPathId }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(\n      /* Slightly bigger than the highlight in order to have a little\n         space between the highlight and the outline. */\n      this.#thickness / 2 + extraThickness,\n      /* innerMargin = */ 0.0025\n    );\n\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      // We need to redraw the highlight because we change the coordinates to be\n      // in the box coordinate system.\n      this.parent.drawLayer.finalizeLine(highlightId, highlightOutlines);\n      this.#outlineId = this.parent.drawLayer.highlightOutline(\n        this.#focusOutlines\n      );\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateLine(this.#id, highlightOutlines);\n      this.parent.drawLayer.updateBox(\n        this.#id,\n        HighlightEditor.#rotateBbox(\n          this.#highlightOutlines.box,\n          (angle - this.rotation + 360) % 360\n        )\n      );\n\n      this.parent.drawLayer.updateLine(this.#outlineId, this.#focusOutlines);\n      this.parent.drawLayer.updateBox(\n        this.#outlineId,\n        HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle)\n      );\n    }\n    const { x, y, width, height } = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = y;\n        this.y = 1 - x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = 1 - y;\n        this.y = x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n    }\n\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||=\n      uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  translateInPage(x, y) {}\n\n  /** @inheritdoc */\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,\n        HighlightEditor._defaultColor,\n      ],\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,\n        HighlightEditor._defaultThickness,\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n        this.color || HighlightEditor._defaultColor,\n      ],\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,\n        this.#thickness || HighlightEditor._defaultThickness,\n      ],\n      [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight],\n    ];\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.parent?.drawLayer.changeColor(this.#id, col);\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n\n    this._reportTelemetry(\n      {\n        action: \"color_changed\",\n        color: this._uiManager.highlightColorNames.get(color),\n      },\n      /* mustWait = */ true\n    );\n  }\n\n  /**\n   * Update the thickness and make this action undoable.\n   * @param {number} thickness\n   */\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n    this._reportTelemetry(\n      { action: \"thickness_changed\", thickness },\n      /* mustWait = */ true\n    );\n  }\n\n  /** @inheritdoc */\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({ editor: this });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n\n  /** @inheritdoc */\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n\n  /** @inheritdoc */\n  getBaseTranslation() {\n    // The editor itself doesn't have any CSS border (we're drawing one\n    // ourselves in using SVG).\n    return [0, 0];\n  }\n\n  /** @inheritdoc */\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this.parent.addUndoableEditor(this);\n    this.div.focus();\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\",\n    });\n    super.remove();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    this.#addToDrawLayer();\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilding it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      // If mustBeSelected is true it means that this editor was selected\n      // when its parent has been destroyed, hence we must select it again.\n      mustBeSelected =\n        !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      // We select it after the parent has been set.\n      this.select();\n    }\n  }\n\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2),\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({ id: this.#id, clipPathId: this.#clipPathId } =\n      parent.drawLayer.highlight(\n        this.#highlightOutlines,\n        this.color,\n        this.#opacity\n      ));\n    this.#outlineId = parent.drawLayer.highlightOutline(this.#focusOutlines);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n\n  static #rotateBbox({ x, y, width, height }, angle) {\n    switch (angle) {\n      case 90:\n        return {\n          x: 1 - y - height,\n          y: x,\n          width: height,\n          height: width,\n        };\n      case 180:\n        return {\n          x: 1 - x - width,\n          y: 1 - y - height,\n          width,\n          height,\n        };\n      case 270:\n        return {\n          x: y,\n          y: 1 - x - width,\n          width: height,\n          height: width,\n        };\n    }\n    return {\n      x,\n      y,\n      width,\n      height,\n    };\n  }\n\n  /** @inheritdoc */\n  rotate(angle) {\n    // We need to rotate the svgs because of the coordinates system.\n    const { drawLayer } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      // An highlight annotation is always drawn horizontally.\n      box = HighlightEditor.#rotateBbox(this, angle);\n    }\n    drawLayer.rotate(this.#id, angle);\n    drawLayer.rotate(this.#outlineId, angle);\n    drawLayer.updateBox(this.#id, box);\n    drawLayer.updateBox(\n      this.#outlineId,\n      HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle)\n    );\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#boundKeydown);\n    }\n    const highlightDiv = (this.#highlightDiv = document.createElement(\"div\"));\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n\n    return div;\n  }\n\n  pointerover() {\n    this.parent.drawLayer.addClass(this.#outlineId, \"hovered\");\n  }\n\n  pointerleave() {\n    this.parent.drawLayer.removeClass(this.#outlineId, \"hovered\");\n  }\n\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0 /* left */:\n      case 2 /* up */:\n        this.#setCaret(/* start = */ true);\n        break;\n      case 1 /* right */:\n      case 3 /* down */:\n        this.#setCaret(/* start = */ false);\n        break;\n    }\n  }\n\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n\n  /** @inheritdoc */\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"hovered\");\n    this.parent?.drawLayer.addClass(this.#outlineId, \"selected\");\n  }\n\n  /** @inheritdoc */\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"selected\");\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(/* start = */ false);\n    }\n  }\n\n  /** @inheritdoc */\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n\n  /** @inheritdoc */\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.show(this.#id, visible);\n      this.parent.drawLayer.show(this.#outlineId, visible);\n    }\n  }\n\n  #getRotation() {\n    // Highlight annotations are always drawn horizontally but if\n    // a free highlight annotation can be rotated.\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const boxes = this.#boxes;\n    const quadPoints = new Array(boxes.length * 8);\n    let i = 0;\n    for (const { x, y, width, height } of boxes) {\n      const sx = x * pageWidth;\n      const sy = (1 - y - height) * pageHeight;\n      // The specifications say that the rectangle should start from the bottom\n      // left corner and go counter-clockwise.\n      // But when opening the file in Adobe Acrobat it appears that this isn't\n      // correct hence the 4th and 6th numbers are just swapped.\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy + height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n\n  static startHighlighting(parent, isLTR, { target: textLayer, x, y }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n    const pointerMove = e => {\n      this.#highlightMove(parent, e);\n    };\n    const pointerDownOptions = { capture: true, passive: false };\n    const pointerDown = e => {\n      // Avoid to have undesired clicks during the drawing.\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    const pointerUpCallback = e => {\n      textLayer.removeEventListener(\"pointermove\", pointerMove);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\n        \"pointerdown\",\n        pointerDown,\n        pointerDownOptions\n      );\n      window.removeEventListener(\"contextmenu\", noContextMenu);\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback);\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    window.addEventListener(\"pointerdown\", pointerDown, pointerDownOptions);\n    window.addEventListener(\"contextmenu\", noContextMenu);\n\n    textLayer.addEventListener(\"pointermove\", pointerMove);\n    this._freeHighlight = new FreeOutliner(\n      { x, y },\n      [layerX, layerY, parentWidth, parentHeight],\n      parent.scale,\n      this._defaultThickness / 2,\n      isLTR,\n      /* innerMargin = */ 0.001\n    );\n    ({ id: this._freeHighlightId, clipPathId: this._freeHighlightClipId } =\n      parent.drawLayer.highlight(\n        this._freeHighlight,\n        this._defaultColor,\n        this._defaultOpacity,\n        /* isPathUpdatable = */ true\n      ));\n  }\n\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      // Redraw only if the point has been added.\n      parent.drawLayer.updatePath(this._freeHighlightId, this._freeHighlight);\n    }\n  }\n\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\",\n      });\n    } else {\n      parent.drawLayer.removeFreeHighlight(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n\n    const {\n      rect: [blX, blY, trX, trY],\n      color,\n      quadPoints,\n    } = data;\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = data.opacity;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    editor.width = (trX - blX) / pageWidth;\n    editor.height = (trY - blY) / pageHeight;\n    const boxes = (editor.#boxes = []);\n    for (let i = 0; i < quadPoints.length; i += 8) {\n      boxes.push({\n        x: (quadPoints[4] - trX) / pageWidth,\n        y: (trY - (1 - quadPoints[i + 5])) / pageHeight,\n        width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n        height: (quadPoints[i + 5] - quadPoints[i + 1]) / pageHeight,\n      });\n    }\n    editor.#createOutlines();\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    // It doesn't make sense to copy/paste a highlight annotation.\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n\n    return {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\nexport { HighlightEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  Util,\n} from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { InkAnnotationElement } from \"../annotation_layer.js\";\nimport { noContextMenu } from \"../display_utils.js\";\nimport { opacityToHex } from \"./tools.js\";\n\n/**\n * Basic draw editor in order to generate an Ink annotation.\n */\nclass InkEditor extends AnnotationEditor {\n  #baseHeight = 0;\n\n  #baseWidth = 0;\n\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n\n  #canvasContextMenuTimeoutId = null;\n\n  #currentPath2D = new Path2D();\n\n  #disableEditing = false;\n\n  #hasSomethingToDraw = false;\n\n  #isCanvasInitialized = false;\n\n  #observer = null;\n\n  #realWidth = 0;\n\n  #realHeight = 0;\n\n  #requestFrameCallback = null;\n\n  static _defaultColor = null;\n\n  static _defaultOpacity = 1;\n\n  static _defaultThickness = 1;\n\n  static _type = \"ink\";\n\n  static _editorType = AnnotationEditorType.INK;\n\n  constructor(params) {\n    super({ ...params, name: \"inkEditor\" });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n    this._willKeepAspectRatio = true;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(InkEditor._defaultOpacity * 100),\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.INK_THICKNESS,\n        this.thickness || InkEditor._defaultThickness,\n      ],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        this.color ||\n          InkEditor._defaultColor ||\n          AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity)),\n      ],\n    ];\n  }\n\n  /**\n   * Update the thickness and make this action undoable.\n   * @param {number} thickness\n   */\n  #updateThickness(thickness) {\n    const setThickness = th => {\n      this.thickness = th;\n      this.#fitToContent();\n    };\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.#redraw();\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the opacity and make this action undoable.\n   * @param {number} opacity\n   */\n  #updateOpacity(opacity) {\n    const setOpacity = op => {\n      this.opacity = op;\n      this.#redraw();\n    };\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: setOpacity.bind(this, opacity),\n      undo: setOpacity.bind(this, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilding it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n\n  /** @inheritdoc */\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n\n    // Destroy the canvas.\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n      this.#canvasContextMenuTimeoutId = null;\n    }\n\n    this.#observer.disconnect();\n    this.#observer = null;\n\n    super.remove();\n  }\n\n  setParent(parent) {\n    if (!this.parent && parent) {\n      // We've a parent hence the rescale will be handled thanks to the\n      // ResizeObserver.\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      // The editor is removed from the DOM, hence we handle the rescale thanks\n      // to the onScaleChanging callback.\n      // This way, it'll be saved/printed correctly.\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n\n    super.enableEditMode();\n    this._isDraggable = false;\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n\n    super.disableEditMode();\n    this._isDraggable = !this.isEmpty();\n    this.div.classList.remove(\"editing\");\n\n    this.canvas.removeEventListener(\n      \"pointerdown\",\n      this.#boundCanvasPointerdown\n    );\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this._isDraggable = !this.isEmpty();\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return (\n      this.paths.length === 0 ||\n      (this.paths.length === 1 && this.paths[0].length === 0)\n    );\n  }\n\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height],\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n\n  /**\n   * Set line styles.\n   */\n  #setStroke() {\n    const { ctx, color, opacity, thickness, parentScale, scaleFactor } = this;\n    ctx.lineWidth = (thickness * parentScale) / scaleFactor;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${opacityToHex(opacity)}`;\n  }\n\n  /**\n   * Start to draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #startDrawing(x, y) {\n    this.canvas.addEventListener(\"contextmenu\", noContextMenu);\n    this.canvas.addEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.addEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.addEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.removeEventListener(\n      \"pointerdown\",\n      this.#boundCanvasPointerdown\n    );\n\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||=\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n\n  /**\n   * Draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n\n    this.#makeBezierCurve(\n      path2D,\n      ...currentPath.at(-3),\n      ...currentPath.at(-2),\n      x,\n      y\n    );\n  }\n\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n\n  /**\n   * Stop to draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n\n    this.#draw(x, y);\n    this.#endPath();\n\n    // Interpolate the path entered by the user with some\n    // Bezier's curves in order to have a smoother path and\n    // to reduce the data size used to draw it in the PDF.\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      // We have only one point finally.\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this._uiManager.rebuild(this);\n    };\n\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map(xy => xy[0]);\n    const y = lastPoints.map(xy => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n\n    const { ctx } = this;\n    ctx.save();\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      // In Chrome, the clip() method doesn't work as expected.\n      ctx.clearRect(xMin, yMin, xMax - xMin, yMax - yMin);\n      ctx.beginPath();\n      ctx.rect(xMin, yMin, xMax - xMin, yMax - yMin);\n      ctx.clip();\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n\n    ctx.restore();\n  }\n\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n\n    path2D.bezierCurveTo(\n      prevX + (2 * (x1 - prevX)) / 3,\n      prevY + (2 * (y1 - prevY)) / 3,\n      x3 + (2 * (x1 - x3)) / 3,\n      y3 + (2 * (y1 - y3)) / 3,\n      x3,\n      y3\n    );\n  }\n\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n\n      // The quadratic is: [[x0, y0], [x1, y1], [x3, y3]].\n      // Convert the quadratic to a cubic\n      // (see https://fontforge.org/docs/techref/bezier.html#converting-truetype-to-postscript)\n      const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n      const control2 = [x3 + (2 * (x1 - x3)) / 3, y3 + (2 * (y1 - y3)) / 3];\n\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n\n      [x0, y0] = [x3, y3];\n    }\n\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n\n    // The quadratic is: [[x0, y0], [x1, y1], [x2, y2]].\n    const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n    const control2 = [x2 + (2 * (x1 - x2)) / 3, y2 + (2 * (y1 - y2)) / 3];\n\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n\n  /**\n   * Redraw all the paths.\n   */\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n\n    const { canvas, ctx } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n\n  /**\n   * Commit the curves we have in this editor.\n   */\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n\n    super.commit();\n\n    this.isEditing = false;\n    this.disableEditMode();\n\n    // This editor must be on top of the main ink editor.\n    this.setInForeground();\n\n    this.#disableEditing = true;\n    this.div.classList.add(\"disabled\");\n\n    this.#fitToContent(/* firstTime = */ true);\n    this.select();\n\n    this.parent.addInkEditorIfNeeded(/* isCommitting = */ true);\n\n    // When committing, the position of this editor is changed, hence we must\n    // move it to the right position in the DOM.\n    this.moveInDOM();\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    this.enableEditMode();\n  }\n\n  /**\n   * onpointerdown callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n\n    // We want to draw on top of any other editors.\n    // Since it's the last child, there's no need to give it a higher z-index.\n    this.setInForeground();\n\n    event.preventDefault();\n\n    if (!this.div.contains(document.activeElement)) {\n      this.div.focus({\n        preventScroll: true /* See issue #17327 */,\n      });\n    }\n\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * onpointermove callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * onpointerup callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n\n  /**\n   * onpointerleave callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n\n  /**\n   * End the drawing.\n   * @param {PointerEvent} event\n   */\n  #endDrawing(event) {\n    this.canvas.removeEventListener(\n      \"pointerleave\",\n      this.#boundCanvasPointerleave\n    );\n    this.canvas.removeEventListener(\n      \"pointermove\",\n      this.#boundCanvasPointermove\n    );\n    this.canvas.removeEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n\n    // Slight delay to avoid the context menu to appear (it can happen on a long\n    // tap with a pen).\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n    }\n    this.#canvasContextMenuTimeoutId = setTimeout(() => {\n      this.#canvasContextMenuTimeoutId = null;\n      this.canvas.removeEventListener(\"contextmenu\", noContextMenu);\n    }, 10);\n\n    this.#stopDrawing(event.offsetX, event.offsetY);\n\n    this.addToAnnotationStorage();\n\n    // Since the ink editor covers all of the page and we want to be able\n    // to select another editor, we just put this one in the background.\n    this.setInBackground();\n  }\n\n  /**\n   * Create the canvas element.\n   */\n  #createCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = \"inkEditorCanvas\";\n    this.canvas.setAttribute(\"data-l10n-id\", \"pdfjs-ink-canvas\");\n\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n\n  /**\n   * Create the resize observer.\n   */\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return !this.isEmpty() && this.#disableEditing;\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n\n    this.div.setAttribute(\"data-l10n-id\", \"pdfjs-ink\");\n\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n\n    this.#createCanvas();\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight\n      );\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.div.classList.add(\"disabled\");\n    } else {\n      this.div.classList.add(\"editing\");\n      this.enableEditMode();\n    }\n\n    this.#createObserver();\n\n    return this.div;\n  }\n\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n\n  /**\n   * When the dimensions of the div change the inner canvas must\n   * renew its dimensions, hence it must redraw its own contents.\n   * @param {number} width - the new width of the div\n   * @param {number} height - the new height of the div\n   * @returns\n   */\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (\n      this.#realWidth === roundedWidth &&\n      this.#realHeight === roundedHeight\n    ) {\n      return;\n    }\n\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n\n    this.canvas.style.visibility = \"hidden\";\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.fixAndSetPosition();\n\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n\n    this.#setCanvasDims();\n    this.#redraw();\n\n    this.canvas.style.visibility = \"visible\";\n\n    // For any reason the dimensions couldn't be in percent but in pixels, hence\n    // we must fix them.\n    this.fixDims();\n  }\n\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n\n  /**\n   * Update the canvas transform.\n   */\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(\n      this.scaleFactor,\n      0,\n      0,\n      this.scaleFactor,\n      this.translationX * this.scaleFactor + padding,\n      this.translationY * this.scaleFactor + padding\n    );\n  }\n\n  /**\n   * Convert into a Path2D.\n   * @param {Array<Array<number>>} bezier\n   * @returns {Path2D}\n   */\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(\n        control1[0],\n        control1[1],\n        control2[0],\n        control2[1],\n        second[0],\n        second[1]\n      );\n    }\n    return path2D;\n  }\n\n  static #toPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] += blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] + blX;\n          points[i + 1] = x + blY;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] += blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trX - points[i + 1];\n          points[i + 1] = trY - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n\n  static #fromPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] -= blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] - blY;\n          points[i + 1] = x - blX;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] -= blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trY - points[i + 1];\n          points[i + 1] = trX - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n\n  /**\n   * Transform and serialize the paths.\n   * @param {number} s - scale factor\n   * @param {number} tx - abscissa of the translation\n   * @param {number} ty - ordinate of the translation\n   * @param {Array<number>} rect - the bounding box of the annotation\n   */\n  #serializePaths(s, tx, ty, rect) {\n    const paths = [];\n    const padding = this.thickness / 2;\n    const shiftX = s * tx + padding;\n    const shiftY = s * ty + padding;\n    for (const bezier of this.paths) {\n      const buffer = [];\n      const points = [];\n      for (let j = 0, jj = bezier.length; j < jj; j++) {\n        const [first, control1, control2, second] = bezier[j];\n        if (first[0] === second[0] && first[1] === second[1] && jj === 1) {\n          // We have only one point.\n          const p0 = s * first[0] + shiftX;\n          const p1 = s * first[1] + shiftY;\n          buffer.push(p0, p1);\n          points.push(p0, p1);\n          break;\n        }\n        const p10 = s * first[0] + shiftX;\n        const p11 = s * first[1] + shiftY;\n        const p20 = s * control1[0] + shiftX;\n        const p21 = s * control1[1] + shiftY;\n        const p30 = s * control2[0] + shiftX;\n        const p31 = s * control2[1] + shiftY;\n        const p40 = s * second[0] + shiftX;\n        const p41 = s * second[1] + shiftY;\n\n        if (j === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        points.push(p20, p21);\n        if (j === jj - 1) {\n          points.push(p40, p41);\n        }\n      }\n      paths.push({\n        bezier: InkEditor.#toPDFCoordinates(buffer, rect, this.rotation),\n        points: InkEditor.#toPDFCoordinates(points, rect, this.rotation),\n      });\n    }\n\n    return paths;\n  }\n\n  /**\n   * Get the bounding box containing all the paths.\n   * @returns {Array<number>}\n   */\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = Util.bezierBoundingBox(\n          ...first,\n          ...control1,\n          ...control2,\n          ...second\n        );\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n\n    return [xMin, yMin, xMax, yMax];\n  }\n\n  /**\n   * The bounding box is computed with null thickness, so we must take\n   * it into account for the display.\n   * It corresponds to the total padding, hence it should be divided by 2\n   * in order to have left/right paddings.\n   * @returns {number}\n   */\n  #getPadding() {\n    return this.#disableEditing\n      ? Math.ceil(this.thickness * this.parentScale)\n      : 0;\n  }\n\n  /**\n   * Set the div position and dimensions in order to fit to\n   * the bounding box of the contents.\n   * @returns {undefined}\n   */\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n\n    this.setAspectRatio(width, height);\n\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n\n    this.#realWidth = width;\n    this.#realHeight = height;\n\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(\n      prevTranslationX - this.translationX - unscaledPadding,\n      prevTranslationY - this.translationY - unscaledPadding\n    );\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof InkAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n\n    editor.thickness = data.thickness;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n\n    const { paths, rect, rotation } = data;\n\n    for (let { bezier } of paths) {\n      bezier = InkEditor.#fromPDFCoordinates(bezier, rect, rotation);\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (bezier[i + 5] - padding);\n        path.push([\n          [p0, p1],\n          [p10, p11],\n          [p20, p21],\n          [p30, p31],\n        ]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n\n    return {\n      annotationType: AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(\n        this.scaleFactor / this.parentScale,\n        this.translationX,\n        this.translationY,\n        rect\n      ),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n}\n\nexport { InkEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorType, shadow } from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { PixelsPerInch } from \"../display_utils.js\";\nimport { StampAnnotationElement } from \"../annotation_layer.js\";\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n\n  #bitmapId = null;\n\n  #bitmapPromise = null;\n\n  #bitmapUrl = null;\n\n  #bitmapFile = null;\n\n  #bitmapFileName = \"\";\n\n  #canvas = null;\n\n  #observer = null;\n\n  #resizeTimeoutId = null;\n\n  #isSvg = false;\n\n  #hasBeenAddedInUndoStack = false;\n\n  static _type = \"stamp\";\n\n  static _editorType = AnnotationEditorType.STAMP;\n\n  constructor(params) {\n    super({ ...params, name: \"stampEditor\" });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n\n  static get supportedTypes() {\n    // See https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types\n    // to know which types are supported by the browser.\n    const types = [\n      \"apng\",\n      \"avif\",\n      \"bmp\",\n      \"gif\",\n      \"jpeg\",\n      \"png\",\n      \"svg+xml\",\n      \"webp\",\n      \"x-icon\",\n    ];\n    return shadow(\n      this,\n      \"supportedTypes\",\n      types.map(type => `image/${type}`)\n    );\n  }\n\n  static get supportedTypesStr() {\n    return shadow(this, \"supportedTypesStr\", this.supportedTypes.join(\",\"));\n  }\n\n  /** @inheritdoc */\n  static isHandlingMimeForPasting(mime) {\n    return this.supportedTypes.includes(mime);\n  }\n\n  /** @inheritdoc */\n  static paste(item, parent) {\n    parent.pasteEditor(AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile(),\n    });\n  }\n\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (this.#canvas) {\n      this.div.focus();\n    }\n  }\n\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager\n        .getFromId(this.#bitmapId)\n        .then(data => this.#getBitmapFetched(data, /* fromId = */ true))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromUrl(url)\n        .then(data => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromFile(file)\n        .then(data => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    const input = document.createElement(\"input\");\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      input.hidden = true;\n      input.id = \"stampEditorFileInput\";\n      document.body.append(input);\n    }\n    input.type = \"file\";\n    input.accept = StampEditor.supportedTypesStr;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(\n            input.files[0]\n          );\n          this.#getBitmapFetched(data);\n        }\n        if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n          input.remove();\n        }\n        resolve();\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      });\n    }).finally(() => this.#getBitmapDone());\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"TESTING\")) {\n      input.click();\n    }\n  }\n\n  /** @inheritdoc */\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      this.#observer?.disconnect();\n      this.#observer = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      // It's possible to have to rebuild an editor which is not on a visible\n      // page.\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this._isDraggable = true;\n    this.div.focus();\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !(\n      this.#bitmapPromise ||\n      this.#bitmap ||\n      this.#bitmapUrl ||\n      this.#bitmapFile ||\n      this.#bitmapId\n    );\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return true;\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.div.hidden = true;\n\n    this.addAltTextButton();\n\n    if (this.#bitmap) {\n      this.#createCanvas();\n    } else {\n      this.#getBitmap();\n    }\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight\n      );\n    }\n\n    return this.div;\n  }\n\n  #createCanvas() {\n    const { div } = this;\n    let { width, height } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (\n      width > MAX_RATIO * pageWidth ||\n      height > MAX_RATIO * pageHeight\n    ) {\n      // If the the image is too big compared to the page dimensions\n      // (more than MAX_RATIO) then we scale it down.\n      const factor = Math.min(\n        (MAX_RATIO * pageWidth) / width,\n        (MAX_RATIO * pageHeight) / height\n      );\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(\n      (width * parentWidth) / pageWidth,\n      (height * parentHeight) / pageHeight\n    );\n\n    this._uiManager.enableWaiting(false);\n    const canvas = (this.#canvas = document.createElement(\"canvas\"));\n    div.append(canvas);\n    div.hidden = false;\n    this.#drawBitmap(width, height);\n    this.#createObserver();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n\n    // There are multiple ways to add an image to the page, so here we just\n    // count the number of times an image is added to the page whatever the way\n    // is.\n    this._reportTelemetry({\n      action: \"inserted_image\",\n    });\n    if (this.#bitmapFileName) {\n      canvas.setAttribute(\"aria-label\", this.#bitmapFileName);\n    }\n  }\n\n  /**\n   * When the dimensions of the div change the inner canvas must\n   * renew its dimensions, hence it must redraw its own contents.\n   * @param {number} width - the new width of the div\n   * @param {number} height - the new height of the div\n   * @returns\n   */\n  #setDimensions(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setDims(width, height);\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    // When the user is resizing the editor we just use CSS to scale the image\n    // to avoid redrawing it too often.\n    // And once the user stops resizing the editor we redraw the image in\n    // rescaling it correctly (see this.#scaleBitmap).\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap(width, height);\n    }, TIME_TO_WAIT);\n  }\n\n  #scaleBitmap(width, height) {\n    const { width: bitmapWidth, height: bitmapHeight } = this.#bitmap;\n\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n\n      if (newWidth > 2 * width) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(newWidth / 2);\n        newWidth =\n          newWidth >= 16384\n            ? Math.floor(newWidth / 2) - 1\n            : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight =\n          newHeight >= 16384\n            ? Math.floor(newHeight / 2) - 1\n            : Math.ceil(newHeight / 2);\n      }\n\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        bitmap,\n        0,\n        0,\n        prevWidth,\n        prevHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      bitmap = offscreen.transferToImageBitmap();\n    }\n\n    return bitmap;\n  }\n\n  #drawBitmap(width, height) {\n    width = Math.ceil(width);\n    height = Math.ceil(height);\n    const canvas = this.#canvas;\n    if (!canvas || (canvas.width === width && canvas.height === height)) {\n      return;\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const bitmap = this.#isSvg\n      ? this.#bitmap\n      : this.#scaleBitmap(width, height);\n\n    if (this._uiManager.hasMLManager && !this.hasAltText()) {\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        bitmap,\n        0,\n        0,\n        bitmap.width,\n        bitmap.height,\n        0,\n        0,\n        width,\n        height\n      );\n      offscreen.convertToBlob().then(blob => {\n        const fileReader = new FileReader();\n        fileReader.onload = () => {\n          const url = fileReader.result;\n          this._uiManager\n            .mlGuess({\n              service: \"image-to-text\",\n              request: {\n                imageData: url,\n              },\n            })\n            .then(response => {\n              const altText = response?.output || \"\";\n              if (this.parent && altText && !this.hasAltText()) {\n                this.altTextData = { altText, decorative: false };\n              }\n            });\n        };\n        fileReader.readAsDataURL(blob);\n      });\n    }\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(\n      bitmap,\n      0,\n      0,\n      bitmap.width,\n      bitmap.height,\n      0,\n      0,\n      width,\n      height\n    );\n  }\n\n  /** @inheritdoc */\n  getImageForAltText() {\n    return this.#canvas;\n  }\n\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      // We convert to a data url because it's sync and the url can live in the\n      // clipboard.\n      const canvas = document.createElement(\"canvas\");\n      ({ width: canvas.width, height: canvas.height } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n\n      return canvas.toDataURL();\n    }\n\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      // Multiply by PixelsPerInch.PDF_TO_CSS_UNITS in order to increase the\n      // image resolution when rasterizing it.\n      const width = Math.round(\n        this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS\n      );\n      const height = Math.round(\n        this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS\n      );\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        this.#bitmap,\n        0,\n        0,\n        this.#bitmap.width,\n        this.#bitmap.height,\n        0,\n        0,\n        width,\n        height\n      );\n      return offscreen.transferToImageBitmap();\n    }\n\n    return structuredClone(this.#bitmap);\n  }\n\n  /**\n   * Create the resize observer.\n   */\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.#setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof StampAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    const { rect, bitmapUrl, bitmapId, isSvg, accessibilityData } = data;\n    if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId,\n    };\n\n    if (isForCopying) {\n      // We don't know what's the final destination (this pdf or another one)\n      // of this annotation and the clipboard doesn't support ImageBitmaps,\n      // hence we serialize the bitmap to a data url.\n      serialized.bitmapUrl = this.#serializeBitmap(/* toUrl = */ true);\n      serialized.accessibilityData = this.altTextData;\n      return serialized;\n    }\n\n    const { decorative, altText } = this.altTextData;\n    if (!decorative && altText) {\n      serialized.accessibilityData = { type: \"Figure\", alt: altText };\n    }\n\n    if (context === null) {\n      return serialized;\n    }\n\n    context.stamps ||= new Map();\n    const area = this.#isSvg\n      ? (serialized.rect[2] - serialized.rect[0]) *\n        (serialized.rect[3] - serialized.rect[1])\n      : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      // We don't want to have multiple copies of the same bitmap in the\n      // annotationMap, hence we only add the bitmap the first time we meet it.\n      context.stamps.set(this.#bitmapId, { area, serialized });\n      serialized.bitmap = this.#serializeBitmap(/* toUrl = */ false);\n    } else if (this.#isSvg) {\n      // If we have multiple copies of the same svg but with different sizes,\n      // then we want to keep the biggest one.\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(/* toUrl = */ false);\n      }\n    }\n    return serialized;\n  }\n}\n\nexport { StampEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n/** @typedef {import(\"../display_utils.js\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n/** @typedef {import(\"../../../web/interfaces\").IL10n} IL10n */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../annotation_layer.js\").AnnotationLayer} AnnotationLayer */\n/** @typedef {import(\"../draw_layer.js\").DrawLayer} DrawLayer */\n\nimport { AnnotationEditorType, FeatureTest } from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { FreeTextEditor } from \"./freetext.js\";\nimport { HighlightEditor } from \"./highlight.js\";\nimport { InkEditor } from \"./ink.js\";\nimport { setLayerDimensions } from \"../display_utils.js\";\nimport { StampEditor } from \"./stamp.js\";\n\n/**\n * @typedef {Object} AnnotationEditorLayerOptions\n * @property {Object} mode\n * @property {HTMLDivElement} div\n * @property {AnnotationEditorUIManager} uiManager\n * @property {boolean} enabled\n * @property {TextAccessibilityManager} [accessibilityManager]\n * @property {number} pageIndex\n * @property {IL10n} l10n\n * @property {AnnotationLayer} [annotationLayer]\n * @property {HTMLDivElement} [textLayer]\n * @property {DrawLayer} drawLayer\n * @property {PageViewport} viewport\n */\n\n/**\n * @typedef {Object} RenderEditorLayerOptions\n * @property {PageViewport} viewport\n */\n\n/**\n * Manage all the different editors on a page.\n */\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n\n  #allowClick = false;\n\n  #annotationLayer = null;\n\n  #boundPointerup = null;\n\n  #boundPointerdown = null;\n\n  #boundTextLayerPointerDown = null;\n\n  #editorFocusTimeoutId = null;\n\n  #editors = new Map();\n\n  #hadPointerDown = false;\n\n  #isCleaningUp = false;\n\n  #isDisabling = false;\n\n  #textLayer = null;\n\n  #uiManager;\n\n  static _initialized = false;\n\n  static #editorTypes = new Map(\n    [FreeTextEditor, InkEditor, StampEditor, HighlightEditor].map(type => [\n      type._editorType,\n      type,\n    ])\n  );\n\n  /**\n   * @param {AnnotationEditorLayerOptions} options\n   */\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n,\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n\n    this.#uiManager.addLayer(this);\n  }\n\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n\n  get isInvisible() {\n    return (\n      this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE\n    );\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {number} mode\n   */\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n\n  /**\n   * The mode has changed: it must be updated.\n   * @param {number} mode\n   */\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        // We always want to have an ink editor ready to draw in.\n        this.addInkEditorIfNeeded(false);\n\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.disableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n\n    this.toggleAnnotationLayerPointerEvents(false);\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(\n        `${editorType._type}Editing`,\n        mode === editorType._editorType\n      );\n    }\n    this.div.hidden = false;\n  }\n\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n\n  addInkEditorIfNeeded(isCommitting) {\n    if (this.#uiManager.getMode() !== AnnotationEditorType.INK) {\n      // We don't want to add an ink editor if we're not in ink mode!\n      return;\n    }\n\n    if (!isCommitting) {\n      // We're removing an editor but an empty one can already exist so in this\n      // case we don't need to create a new one.\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n\n    const editor = this.createAndAddNewEditor(\n      { offsetX: 0, offsetY: 0 },\n      /* isCentered = */ false\n    );\n    editor.setInBackground();\n  }\n\n  /**\n   * Set the editing state.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n\n  /**\n   * Enable pointer events on the main div in order to enable\n   * editor creation.\n   */\n  enable() {\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n\n    if (!this.#annotationLayer) {\n      return;\n    }\n\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      // The element must be hidden whatever its state is.\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n  }\n\n  /**\n   * Disable editor creation.\n   */\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n\n    if (this.#annotationLayer) {\n      // Show the annotations that were hidden in enable().\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const { id } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          editor.renderAnnotationElement(editable);\n          editor.show(false);\n        }\n        editable.show();\n      }\n    }\n\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n\n    this.#isDisabling = false;\n  }\n\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n\n  /**\n   * Set the current editor.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n\n    this.#uiManager.setActiveEditor(editor);\n  }\n\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#boundTextLayerPointerDown) {\n      this.#boundTextLayerPointerDown = this.#textLayerPointerDown.bind(this);\n      this.#textLayer.div.addEventListener(\n        \"pointerdown\",\n        this.#boundTextLayerPointerDown\n      );\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#boundTextLayerPointerDown) {\n      this.#textLayer.div.removeEventListener(\n        \"pointerdown\",\n        this.#boundTextLayerPointerDown\n      );\n      this.#boundTextLayerPointerDown = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n\n  #textLayerPointerDown(event) {\n    // Unselect all the editors in order to let the user select some text\n    // without being annoyed by an editor toolbar.\n    this.#uiManager.unselectAll();\n    if (event.target === this.#textLayer.div) {\n      const { isMac } = FeatureTest.platform;\n      if (event.button !== 0 || (event.ctrlKey && isMac)) {\n        // Do nothing on right click.\n        return;\n      }\n      this.#uiManager.showAllEditors(\n        \"highlight\",\n        true,\n        /* updateButton = */ true\n      );\n      this.#textLayer.div.classList.add(\"free\");\n      HighlightEditor.startHighlighting(\n        this,\n        this.#uiManager.direction === \"ltr\",\n        event\n      );\n      this.#textLayer.div.addEventListener(\n        \"pointerup\",\n        () => {\n          this.#textLayer.div.classList.remove(\"free\");\n        },\n        { once: true }\n      );\n      event.preventDefault();\n    }\n  }\n\n  enableClick() {\n    if (this.#boundPointerdown) {\n      return;\n    }\n    this.#boundPointerdown = this.pointerdown.bind(this);\n    this.#boundPointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.addEventListener(\"pointerup\", this.#boundPointerup);\n  }\n\n  disableClick() {\n    if (!this.#boundPointerdown) {\n      return;\n    }\n    this.div.removeEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.removeEventListener(\"pointerup\", this.#boundPointerup);\n    this.#boundPointerdown = null;\n    this.#boundPointerup = null;\n  }\n\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const { annotationElementId } = editor;\n    if (\n      annotationElementId &&\n      this.#uiManager.isDeletedAnnotationElement(annotationElementId)\n    ) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(/* isCommitting = */ false);\n    }\n  }\n\n  /**\n   * An editor can have a different parent, for example after having\n   * being dragged and droped from a page to another.\n   * @param {AnnotationEditor} editor\n   */\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n\n  /**\n   * Add a new editor in the current view.\n   * @param {AnnotationEditor} editor\n   */\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n\n    // The editor will be correctly moved into the DOM (see fixAndSetPosition).\n    editor.fixAndSetPosition();\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n\n    const { activeElement } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      // When the div is moved in the DOM the focus can move somewhere else,\n      // so we want to be sure that the focus will stay on the editor but we\n      // don't want to call any focus callbacks, hence we disable them and only\n      // re-enable them when the editor has the focus.\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\n            \"focusin\",\n            () => {\n              editor._focusEventsAllowed = true;\n            },\n            { once: true }\n          );\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      editor.div,\n      editor.contentDiv,\n      /* isRemovable = */ true\n    );\n  }\n\n  /**\n   * Add or rebuild depending if it has been removed or not.\n   * @param {AnnotationEditor} editor\n   */\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Add a new editor and make this addition undoable.\n   * @param {AnnotationEditor} editor\n   */\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n\n    this.addCommands({ cmd, undo, mustExec: false });\n  }\n\n  /**\n   * Get an id for an editor.\n   * @returns {string}\n   */\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} params\n   * @returns {AnnotationEditor}\n   */\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n\n  /**\n   * Paste some content into a new editor.\n   * @param {number} mode\n   * @param {Object} params\n   */\n  pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    this.#uiManager.updateMode(mode);\n\n    const { offsetX, offsetY } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} data\n   * @returns {AnnotationEditor | null}\n   */\n  deserialize(data) {\n    return (\n      AnnotationEditorLayer.#editorTypes\n        .get(data.annotationType ?? data.annotationEditorType)\n        ?.deserialize(data, this, this.#uiManager) || null\n    );\n  }\n\n  /**\n   * Create and add a new editor.\n   * @param {PointerEvent} event\n   * @param {boolean} isCentered\n   * @param [Object] data\n   * @returns {AnnotationEditor}\n   */\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n\n    return editor;\n  }\n\n  #getCenterPoint() {\n    const { x, y, width, height } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] =\n      this.viewport.rotation % 180 === 0\n        ? [centerX, centerY]\n        : [centerY, centerX];\n\n    return { offsetX, offsetY };\n  }\n\n  /**\n   * Create and add a new editor.\n   */\n  addNewEditor() {\n    this.createAndAddNewEditor(this.#getCenterPoint(), /* isCentered = */ true);\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n\n  /**\n   * Pointerup callback.\n   * @param {PointerEvent} event\n   */\n  pointerup(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Don't create an editor on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    if (!this.#hadPointerDown) {\n      // It can happen when the user starts a drag inside a text editor\n      // and then releases the mouse button outside of it. In such a case\n      // we don't want to create a new editor, hence we check that a pointerdown\n      // occurred on this div previously.\n      return;\n    }\n    this.#hadPointerDown = false;\n\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n\n    if (this.#uiManager.getMode() === AnnotationEditorType.STAMP) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n\n    this.createAndAddNewEditor(event, /* isCentered = */ false);\n  }\n\n  /**\n   * Pointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      // It's possible to have a second pointerdown event before a pointerup one\n      // when the user puts a finger on a touchscreen and then add a second one\n      // to start a pinch-to-zoom gesture.\n      // That said, in case it's possible to have two pointerdown events with\n      // a mouse, we don't want to create a new editor in such a case either.\n      this.#hadPointerDown = false;\n      return;\n    }\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Do nothing on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    this.#hadPointerDown = true;\n\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n\n  /**\n   *\n   * @param {AnnotationEditor} editor\n   * @param {number} x\n   * @param {number} y\n   * @returns\n   */\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n\n  /**\n   * Destroy the main editor.\n   */\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      // We need to commit the current editor before destroying the layer.\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n\n  #cleanup() {\n    // When we're cleaning up, some editors are removed but we don't want\n    // to add a new one which will induce an addition in this.#editors, hence\n    // an infinite loop.\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n\n  /**\n   * Render the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  render({ viewport }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    // We're maybe rendering a layer which was invisible when we started to edit\n    // so we must set the different callbacks for it.\n    this.updateMode();\n  }\n\n  /**\n   * Update the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  update({ viewport }) {\n    // Editors have their dimensions/positions in percent so to avoid any\n    // issues (see #15582), we must commit the current one before changing\n    // the viewport.\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, { rotation });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n    this.addInkEditorIfNeeded(/* isCommitting = */ false);\n  }\n\n  /**\n   * Get page dimensions.\n   * @returns {Object} dimensions.\n   */\n  get pageDimensions() {\n    const { pageWidth, pageHeight } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\nexport { AnnotationEditorLayer };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorParamsType, shadow } from \"../../shared/util.js\";\nimport { KeyboardManager } from \"./tools.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass ColorPicker {\n  #boundKeyDown = this.#keyDown.bind(this);\n\n  #boundPointerDown = this.#pointerDown.bind(this);\n\n  #button = null;\n\n  #buttonSwatch = null;\n\n  #defaultColor;\n\n  #dropdown = null;\n\n  #dropdownWasFromKeyboard = false;\n\n  #isMainColorPicker = false;\n\n  #editor = null;\n\n  #eventBus;\n\n  #uiManager = null;\n\n  #type;\n\n  static get _keyboardManager() {\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          [\"Escape\", \"mac+Escape\"],\n          ColorPicker.prototype._hideDropdownFromKeyboard,\n        ],\n        [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard],\n        [\n          [\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"],\n          ColorPicker.prototype._moveToNext,\n        ],\n        [\n          [\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"],\n          ColorPicker.prototype._moveToPrevious,\n        ],\n        [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning],\n        [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd],\n      ])\n    );\n  }\n\n  constructor({ editor = null, uiManager = null }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor =\n      editor?.color ||\n      this.#uiManager?.highlightColors.values().next().value ||\n      \"#FFFF98\";\n  }\n\n  renderButton() {\n    const button = (this.#button = document.createElement(\"button\"));\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    button.addEventListener(\"click\", this.#openDropdown.bind(this));\n    button.addEventListener(\"keydown\", this.#boundKeyDown);\n    const swatch = (this.#buttonSwatch = document.createElement(\"span\"));\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n\n  renderMainDropdown() {\n    const dropdown = (this.#dropdown = this.#getDropdownRoot());\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n\n    return dropdown;\n  }\n\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    div.addEventListener(\"contextmenu\", noContextMenu);\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", `pdfjs-editor-colorpicker-${name}`);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color));\n      div.append(button);\n    }\n\n    div.addEventListener(\"keydown\", this.#boundKeyDown);\n\n    return div;\n  }\n\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color,\n    });\n  }\n\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n\n  _moveToPrevious(event) {\n    if (\n      event.target === this.#dropdown?.firstChild ||\n      event.target === this.#button\n    ) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    window.addEventListener(\"pointerdown\", this.#boundPointerDown);\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = (this.#dropdown = this.#getDropdownRoot());\n    this.#button.append(root);\n  }\n\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    window.removeEventListener(\"pointerdown\", this.#boundPointerDown);\n  }\n\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      // The user pressed Escape with no dropdown visible, so we must\n      // unselect it.\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard,\n    });\n  }\n\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\nexport { ColorPicker };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass AltText {\n  #altText = \"\";\n\n  #altTextDecorative = false;\n\n  #altTextButton = null;\n\n  #altTextTooltip = null;\n\n  #altTextTooltipTimeout = null;\n\n  #altTextWasFromKeyBoard = false;\n\n  #editor = null;\n\n  static _l10nPromise = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n  }\n\n  static initialize(l10nPromise) {\n    AltText._l10nPromise ||= l10nPromise;\n  }\n\n  async render() {\n    const altText = (this.#altTextButton = document.createElement(\"button\"));\n    altText.className = \"altText\";\n    const msg = await AltText._l10nPromise.get(\n      \"pdfjs-editor-alt-text-button-label\"\n    );\n    altText.textContent = msg;\n    altText.setAttribute(\"aria-label\", msg);\n    altText.tabIndex = \"0\";\n    altText.addEventListener(\"contextmenu\", noContextMenu);\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation());\n\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n    };\n    altText.addEventListener(\"click\", onClick, { capture: true });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    });\n    await this.#setState();\n\n    return altText;\n  }\n\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({ focusVisible: this.#altTextWasFromKeyBoard });\n    this.#altTextWasFromKeyBoard = false;\n  }\n\n  isEmpty() {\n    return !this.#altText && !this.#altTextDecorative;\n  }\n\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative,\n    };\n  }\n\n  /**\n   * Set the alt text data.\n   */\n  set data({ altText, decorative }) {\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    this.#altText = altText;\n    this.#altTextDecorative = decorative;\n    this.#setState();\n  }\n\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextTooltip = null;\n  }\n\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (!this.#altText && !this.#altTextDecorative) {\n      button.classList.remove(\"done\");\n      this.#altTextTooltip?.remove();\n      return;\n    }\n    button.classList.add(\"done\");\n\n    AltText._l10nPromise\n      .get(\"pdfjs-editor-alt-text-edit-button-label\")\n      .then(msg => {\n        button.setAttribute(\"aria-label\", msg);\n      });\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      const id = (tooltip.id = `alt-text-tooltip-${this.#editor.id}`);\n      button.setAttribute(\"aria-describedby\", id);\n\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\",\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      });\n    }\n    tooltip.innerText = this.#altTextDecorative\n      ? await AltText._l10nPromise.get(\n          \"pdfjs-editor-alt-text-decorative-tooltip\"\n        )\n      : this.#altText;\n\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n\n    const element = this.#editor.getImageForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\nexport { AltText };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  KeyboardManager,\n} from \"./tools.js\";\nimport { FeatureTest, shadow, unreachable } from \"../../shared/util.js\";\nimport { AltText } from \"./alt_text.js\";\nimport { EditorToolbar } from \"./toolbar.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\n/**\n * @typedef {Object} AnnotationEditorParameters\n * @property {AnnotationEditorUIManager} uiManager - the global manager\n * @property {AnnotationEditorLayer} parent - the layer containing this editor\n * @property {string} id - editor id\n * @property {number} x - x-coordinate\n * @property {number} y - y-coordinate\n */\n\n/**\n * Base class for editors.\n */\nclass AnnotationEditor {\n  #allResizerDivs = null;\n\n  #altText = null;\n\n  #disabled = false;\n\n  #keepAspectRatio = false;\n\n  #resizersDiv = null;\n\n  #savedDimensions = null;\n\n  #boundFocusin = this.focusin.bind(this);\n\n  #boundFocusout = this.focusout.bind(this);\n\n  #editToolbar = null;\n\n  #focusedResizerName = \"\";\n\n  #hasBeenClicked = false;\n\n  #initialPosition = null;\n\n  #isEditing = false;\n\n  #isInEditMode = false;\n\n  #isResizerEnabledForKeyboard = false;\n\n  #moveInDOMTimeout = null;\n\n  #prevDragX = 0;\n\n  #prevDragY = 0;\n\n  #telemetryTimeouts = null;\n\n  _initialOptions = Object.create(null);\n\n  _isVisible = true;\n\n  _uiManager = null;\n\n  _focusEventsAllowed = true;\n\n  _l10nPromise = null;\n\n  #isDraggable = false;\n\n  #zIndex = AnnotationEditor._zIndex++;\n\n  static _borderLineWidth = -1;\n\n  static _colorManager = new ColorManager();\n\n  static _zIndex = 1;\n\n  // Time to wait (in ms) before sending the telemetry data.\n  // We wait a bit to avoid sending too many requests when changing something\n  // like the thickness of a line.\n  static _telemetryTimeout = 1000;\n\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_resizerKeyboardManager\",\n      new KeyboardManager([\n        [[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, { args: [-small, 0] }],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          resize,\n          { args: [-big, 0] },\n        ],\n        [[\"ArrowRight\", \"mac+ArrowRight\"], resize, { args: [small, 0] }],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          resize,\n          { args: [big, 0] },\n        ],\n        [[\"ArrowUp\", \"mac+ArrowUp\"], resize, { args: [0, -small] }],\n        [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, { args: [0, -big] }],\n        [[\"ArrowDown\", \"mac+ArrowDown\"], resize, { args: [0, small] }],\n        [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, { args: [0, big] }],\n        [\n          [\"Escape\", \"mac+Escape\"],\n          AnnotationEditor.prototype._stopResizingWithKeyboard,\n        ],\n      ])\n    );\n  }\n\n  /**\n   * @param {AnnotationEditorParameters} parameters\n   */\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      unreachable(\"Cannot initialize AnnotationEditor.\");\n    }\n\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n\n    const {\n      rotation,\n      rawDims: { pageWidth, pageHeight, pageX, pageY },\n    } = this.parent.viewport;\n\n    this.rotation = rotation;\n    this.pageRotation =\n      (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n\n  static get _defaultLineColor() {\n    return shadow(\n      this,\n      \"_defaultLineColor\",\n      this._colorManager.getHexCode(\"CanvasText\")\n    );\n  }\n\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager,\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n\n  /**\n   * Initialize the l10n stuff for this type of editor.\n   * @param {Object} l10n\n   */\n  static initialize(l10n, _uiManager, options) {\n    AnnotationEditor._l10nPromise ||= new Map(\n      [\n        \"pdfjs-editor-alt-text-button-label\",\n        \"pdfjs-editor-alt-text-edit-button-label\",\n        \"pdfjs-editor-alt-text-decorative-tooltip\",\n        \"pdfjs-editor-resizer-label-topLeft\",\n        \"pdfjs-editor-resizer-label-topMiddle\",\n        \"pdfjs-editor-resizer-label-topRight\",\n        \"pdfjs-editor-resizer-label-middleRight\",\n        \"pdfjs-editor-resizer-label-bottomRight\",\n        \"pdfjs-editor-resizer-label-bottomMiddle\",\n        \"pdfjs-editor-resizer-label-bottomLeft\",\n        \"pdfjs-editor-resizer-label-middleLeft\",\n      ].map(str => [\n        str,\n        l10n.get(str.replaceAll(/([A-Z])/g, c => `-${c.toLowerCase()}`)),\n      ])\n    );\n    if (options?.strings) {\n      for (const str of options.strings) {\n        AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n      }\n    }\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth =\n      parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n\n  /**\n   * Update the default parameters for this type of editor.\n   * @param {number} _type\n   * @param {*} _value\n   */\n  static updateDefaultParams(_type, _value) {}\n\n  /**\n   * Get the default properties to set in the UI for this type of editor.\n   * @returns {Array}\n   */\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n\n  /**\n   * Check if this kind of editor is able to handle the given mime type for\n   * pasting.\n   * @param {string} mime\n   * @returns {boolean}\n   */\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n\n  /**\n   * Extract the data from the clipboard item and delegate the creation of the\n   * editor to the parent.\n   * @param {DataTransferItem} item\n   * @param {AnnotationEditorLayer} parent\n   */\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n\n  /**\n   * Get the properties to update in the UI for this editor.\n   * @returns {Array}\n   */\n  get propertiesToUpdate() {\n    return [];\n  }\n\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n\n  /**\n   * @returns {boolean} true if the editor handles the Enter key itself.\n   */\n  get isEnterHandled() {\n    return true;\n  }\n\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= (this.height * pageHeight) / (pageWidth * 2);\n        this.y += (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += (this.height * pageHeight) / (pageWidth * 2);\n        this.y -= (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n\n  /**\n   * This editor will be behind the others.\n   */\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n\n  /**\n   * This editor will be in the foreground.\n   */\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      // The editor is being removed from the DOM, so we need to stop resizing.\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n\n  /**\n   * onfocus callback.\n   */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n\n  /**\n   * onblur callback.\n   * @param {FocusEvent} event\n   */\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n\n    // In case of focusout, the relatedTarget is the element which\n    // is grabbing the focus.\n    // So if the related target is an element under the div for this\n    // editor, then the editor isn't unactive.\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n\n  /**\n   * Commit the data contained in this editor.\n   */\n  commit() {\n    this.addToAnnotationStorage();\n  }\n\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n\n  /**\n   * Set the editor position within its parent.\n   * @param {number} x\n   * @param {number} y\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   */\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n\n    this.fixAndSetPosition();\n  }\n\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n\n    this.x += x / width;\n    this.y += y / height;\n\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Translate the editor position within its parent.\n   * @param {number} x - x-translation in screen coordinates.\n   * @param {number} y - y-translation in screen coordinates.\n   */\n  translate(x, y) {\n    // We don't change the initial position because the move here hasn't been\n    // done by the user.\n    this.#translate(this.parentDimensions, x, y);\n  }\n\n  /**\n   * Translate the editor position within its page and adjust the scroll\n   * in order to have the editor in the view.\n   * @param {number} x - x-translation in page coordinates.\n   * @param {number} y - y-translation in page coordinates.\n   */\n  translateInPage(x, y) {\n    this.#initialPosition ||= [this.x, this.y];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({ block: \"nearest\" });\n  }\n\n  drag(tx, ty) {\n    this.#initialPosition ||= [this.x, this.y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      // It's possible to not have a parent: for example, when the user is\n      // dragging all the selected editors but this one on a page which has been\n      // destroyed.\n      // It's why we need to check for it. In such a situation, it isn't really\n      // a problem to not find a new parent: it's something which is related to\n      // what the user is seeing, hence it depends on how pages are layed out.\n\n      // The element will be outside of its parent so change the parent.\n      const { x, y } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n\n    // The editor can be moved wherever the user wants, so we don't need to fix\n    // the position: it'll be done when the user will release the mouse button.\n\n    let { x, y } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n\n    this.div.style.left = `${(100 * x).toFixed(2)}%`;\n    this.div.style.top = `${(100 * y).toFixed(2)}%`;\n    this.div.scrollIntoView({ block: \"nearest\" });\n  }\n\n  get _hasBeenMoved() {\n    return (\n      !!this.#initialPosition &&\n      (this.#initialPosition[0] !== this.x ||\n        this.#initialPosition[1] !== this.y)\n    );\n  }\n\n  /**\n   * Get the translation to take into account the editor border.\n   * The CSS engine positions the element by taking the border into account so\n   * we must apply the opposite translation to have the editor in the right\n   * position.\n   * @returns {Array<number>}\n   */\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const { _borderLineWidth } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n\n  /**\n   * @returns {boolean} true if position must be fixed (i.e. make the x and y\n   * living in the page).\n   */\n  get _mustFixPosition() {\n    return true;\n  }\n\n  /**\n   * Fix the position of the editor in order to keep it inside its parent page.\n   * @param {number} [rotation] - the rotation of the page.\n   */\n  fixAndSetPosition(rotation = this.rotation) {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    let { x, y, width, height } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = Math.max(0, Math.min(pageWidth - width, x));\n          y = Math.max(0, Math.min(pageHeight - height, y));\n          break;\n        case 90:\n          x = Math.max(0, Math.min(pageWidth - height, x));\n          y = Math.min(pageHeight, Math.max(width, y));\n          break;\n        case 180:\n          x = Math.min(pageWidth, Math.max(width, x));\n          y = Math.min(pageHeight, Math.max(height, y));\n          break;\n        case 270:\n          x = Math.min(pageWidth, Math.max(height, x));\n          y = Math.max(0, Math.min(pageHeight - width, y));\n          break;\n      }\n    }\n\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n\n    const { style } = this.div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n\n    this.moveInDOM();\n  }\n\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n\n  /**\n   * Convert a screen translation into a page one.\n   * @param {number} x\n   * @param {number} y\n   */\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n\n  /**\n   * Convert a page translation into a screen one.\n   * @param {number} x\n   * @param {number} y\n   */\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n      }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n      }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight],\n    } = this;\n    const scaledWidth = pageWidth * parentScale;\n    const scaledHeight = pageHeight * parentScale;\n    return FeatureTest.isCSSRoundSupported\n      ? [Math.round(scaledWidth), Math.round(scaledHeight)]\n      : [scaledWidth, scaledHeight];\n  }\n\n  /**\n   * Set the dimensions of this editor.\n   * @param {number} width\n   * @param {number} height\n   */\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${((100 * width) / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      this.div.style.height = `${((100 * height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n\n  fixDims() {\n    const { style } = this.div;\n    const { height, width } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${((100 * parseFloat(width)) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${((100 * parseFloat(height)) / parentHeight).toFixed(\n        2\n      )}%`;\n    }\n  }\n\n  /**\n   * Get the translation used to position this editor when it's created.\n   * @returns {Array<number>}\n   */\n  getInitialTranslation() {\n    return [0, 0];\n  }\n\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    // When the resizers are used with the keyboard, they're focusable, hence\n    // we want to have them in this order (top left, top middle, top right, ...)\n    // in the DOM to have the focus order correct.\n    const classes = this._willKeepAspectRatio\n      ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"]\n      : [\n          \"topLeft\",\n          \"topMiddle\",\n          \"topRight\",\n          \"middleRight\",\n          \"bottomRight\",\n          \"bottomMiddle\",\n          \"bottomLeft\",\n          \"middleLeft\",\n        ];\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\n        \"pointerdown\",\n        this.#resizerPointerdown.bind(this, name)\n      );\n      div.addEventListener(\"contextmenu\", noContextMenu);\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n\n    this.#altText?.toggle(false);\n\n    const boundResizerPointermove = this.#resizerPointermove.bind(this, name);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    const pointerMoveOptions = { passive: true, capture: true };\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\n      \"pointermove\",\n      boundResizerPointermove,\n      pointerMoveOptions\n    );\n    window.addEventListener(\"contextmenu\", noContextMenu);\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor =\n      window.getComputedStyle(event.target).cursor;\n\n    const pointerUpCallback = () => {\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\n        \"pointermove\",\n        boundResizerPointermove,\n        pointerMoveOptions\n      );\n      window.removeEventListener(\"contextmenu\", noContextMenu);\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    // If the user switches to another window (with alt+tab), then we end the\n    // resize session.\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n\n  #addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight) {\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (\n      newX === savedX &&\n      newY === savedY &&\n      newWidth === savedWidth &&\n      newHeight === savedHeight\n    ) {\n      return;\n    }\n\n    this.addCommands({\n      cmd: () => {\n        this.width = newWidth;\n        this.height = newHeight;\n        this.x = newX;\n        this.y = newY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n        this.fixAndSetPosition();\n      },\n      undo: () => {\n        this.width = savedWidth;\n        this.height = savedHeight;\n        this.x = savedX;\n        this.y = savedY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n        this.fixAndSetPosition();\n      },\n      mustExec: true,\n    });\n  }\n\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n\n    // 10000 because we multiply by 100 and use toFixed(2) in fixAndSetPosition.\n    // Without rounding, the positions of the corners other than the top left\n    // one can be slightly wrong.\n    const round = x => Math.round(x * 10000) / 10000;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [\n      rotationMatrix[0] * x + rotationMatrix[2] * y,\n      rotationMatrix[1] * x + rotationMatrix[3] * y,\n    ];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [\n      invRotationMatrix[0] * x + invRotationMatrix[2] * y,\n      invRotationMatrix[1] * x + invRotationMatrix[3] * y,\n    ];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = round(savedX + transfOppositePoint[0]);\n    const oppositeY = round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n\n    let [deltaX, deltaY] = this.screenToPageTranslation(\n      event.movementX,\n      event.movementY\n    );\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(\n        Math.min(\n          Math.hypot(\n            oppositePoint[0] - point[0] - deltaX,\n            oppositePoint[1] - point[1] - deltaY\n          ) / oldDiag,\n          // Avoid the editor to be larger than the page.\n          1 / savedWidth,\n          1 / savedHeight\n        ),\n        // Avoid the editor to be smaller than the minimum size.\n        minWidth / savedWidth,\n        minHeight / savedHeight\n      );\n    } else if (isHorizontal) {\n      ratioX =\n        Math.max(\n          minWidth,\n          Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))\n        ) / savedWidth;\n    } else {\n      ratioY =\n        Math.max(\n          minHeight,\n          Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))\n        ) / savedHeight;\n    }\n\n    const newWidth = round(savedWidth * ratioX);\n    const newHeight = round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n  }\n\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n\n  /**\n   * Add a toolbar for this editor.\n   * @returns {Promise<EditorToolbar|null>}\n   */\n  async addEditToolbar() {\n    if (this.#editToolbar || this.#isInEditMode) {\n      return this.#editToolbar;\n    }\n    this.#editToolbar = new EditorToolbar(this);\n    this.div.append(this.#editToolbar.render());\n    if (this.#altText) {\n      this.#editToolbar.addAltTextButton(await this.#altText.render());\n    }\n\n    return this.#editToolbar;\n  }\n\n  removeEditToolbar() {\n    if (!this.#editToolbar) {\n      return;\n    }\n    this.#editToolbar.remove();\n    this.#editToolbar = null;\n\n    // We destroy the alt text but we don't null it because we want to be able\n    // to restore it in case the user undoes the deletion.\n    this.#altText?.destroy();\n  }\n\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10nPromise);\n    this.#altText = new AltText(this);\n    await this.addEditToolbar();\n  }\n\n  get altTextData() {\n    return this.#altText?.data;\n  }\n\n  /**\n   * Set the alt text data.\n   */\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n\n  hasAltText() {\n    return !this.#altText?.isEmpty();\n  }\n\n  /**\n   * Render this editor in a div.\n   * @returns {HTMLDivElement | null}\n   */\n  render() {\n    this.div = document.createElement(\"div\");\n    this.div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute(\"id\", this.id);\n    this.div.tabIndex = this.#disabled ? -1 : 0;\n    if (!this._isVisible) {\n      this.div.classList.add(\"hidden\");\n    }\n\n    this.setInForeground();\n\n    this.div.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div.addEventListener(\"focusout\", this.#boundFocusout);\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      this.div.style.maxWidth = `${((100 * parentHeight) / parentWidth).toFixed(\n        2\n      )}%`;\n      this.div.style.maxHeight = `${(\n        (100 * parentWidth) /\n        parentHeight\n      ).toFixed(2)}%`;\n    }\n\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n\n    bindEvents(this, this.div, [\"pointerdown\"]);\n\n    return this.div;\n  }\n\n  /**\n   * Onpointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Avoid to focus this editor because of a non-left click.\n      event.preventDefault();\n      return;\n    }\n\n    this.#hasBeenClicked = true;\n\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n\n    this.#selectOnPointerEvent(event);\n  }\n\n  #selectOnPointerEvent(event) {\n    const { isMac } = FeatureTest.platform;\n    if (\n      (event.ctrlKey && !isMac) ||\n      event.shiftKey ||\n      (event.metaKey && isMac)\n    ) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n\n  #setUpDragSession(event) {\n    const isSelected = this._uiManager.isSelected(this);\n    this._uiManager.setUpDragSession();\n\n    let pointerMoveOptions, pointerMoveCallback;\n    if (isSelected) {\n      this.div.classList.add(\"moving\");\n      pointerMoveOptions = { passive: true, capture: true };\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      pointerMoveCallback = e => {\n        const { clientX: x, clientY: y } = e;\n        const [tx, ty] = this.screenToPageTranslation(\n          x - this.#prevDragX,\n          y - this.#prevDragY\n        );\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      };\n      window.addEventListener(\n        \"pointermove\",\n        pointerMoveCallback,\n        pointerMoveOptions\n      );\n    }\n\n    const pointerUpCallback = () => {\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      if (isSelected) {\n        this.div.classList.remove(\"moving\");\n        window.removeEventListener(\n          \"pointermove\",\n          pointerMoveCallback,\n          pointerMoveOptions\n        );\n      }\n\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(event);\n      }\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    // If the user is using alt+tab during the dragging session, the pointerup\n    // event could be not fired, but a blur event is fired so we can use it in\n    // order to interrupt the dragging session.\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n\n  moveInDOM() {\n    // Moving the editor in the DOM can be expensive, so we wait a bit before.\n    // It's important to not block the UI (for example when changing the font\n    // size in a FreeText).\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Convert the current rect into a page one.\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   * @param {number} [rotation] - the rotation of the page.\n   */\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n\n    switch (rotation) {\n      case 0:\n        return [\n          x + shiftX + pageX,\n          pageHeight - y - shiftY - height + pageY,\n          x + shiftX + width + pageX,\n          pageHeight - y - shiftY + pageY,\n        ];\n      case 90:\n        return [\n          x + shiftY + pageX,\n          pageHeight - y + shiftX + pageY,\n          x + shiftY + height + pageX,\n          pageHeight - y + shiftX + width + pageY,\n        ];\n      case 180:\n        return [\n          x - shiftX - width + pageX,\n          pageHeight - y + shiftY + pageY,\n          x - shiftX + pageX,\n          pageHeight - y + shiftY + height + pageY,\n        ];\n      case 270:\n        return [\n          x - shiftY - height + pageX,\n          pageHeight - y - shiftX - width + pageY,\n          x - shiftY + pageX,\n          pageHeight - y - shiftX + pageY,\n        ];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n\n    const width = x2 - x1;\n    const height = y2 - y1;\n\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  /**\n   * Executed once this editor has been rendered.\n   */\n  onceAdded() {}\n\n  /**\n   * Check if the editor contains something.\n   * @returns {boolean}\n   */\n  isEmpty() {\n    return false;\n  }\n\n  /**\n   * Enable edit mode.\n   */\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n\n  /**\n   * Disable edit mode.\n   */\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n\n  /**\n   * Check if the editor is edited.\n   * @returns {boolean}\n   */\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n\n  /**\n   * If it returns true, then this editor handles the keyboard\n   * events itself.\n   * @returns {boolean}\n   */\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n\n  /**\n   * Check if this editor needs to be rebuilt or not.\n   * @returns {boolean}\n   */\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n\n  /**\n   * Rebuild the editor in case it has been removed on undo.\n   *\n   * To implement in subclasses.\n   */\n  rebuild() {\n    this.div?.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div?.addEventListener(\"focusout\", this.#boundFocusout);\n  }\n\n  /**\n   * Rotate the editor.\n   * @param {number} angle\n   */\n  rotate(_angle) {}\n\n  /**\n   * Serialize the editor.\n   * The result of the serialization will be used to construct a\n   * new annotation to add to the pdf document.\n   *\n   * To implement in subclasses.\n   * @param {boolean} [isForCopying]\n   * @param {Object | null} [context]\n   * @returns {Object | null}\n   */\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n\n  /**\n   * Deserialize the editor.\n   * The result of the deserialization is a new editor.\n   *\n   * @param {Object} data\n   * @param {AnnotationEditorLayer} parent\n   * @param {AnnotationEditorUIManager} uiManager\n   * @returns {AnnotationEditor | null}\n   */\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n    });\n    editor.rotation = data.rotation;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(\n      data.rect,\n      pageHeight\n    );\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n\n    return editor;\n  }\n\n  /**\n   * Check if an existing annotation associated with this editor has been\n   * modified.\n   * @returns {boolean}\n   */\n  get hasBeenModified() {\n    return (\n      !!this.annotationElementId && (this.deleted || this.serialize() !== null)\n    );\n  }\n\n  /**\n   * Remove this editor.\n   * It's used on ctrl+backspace action.\n   */\n  remove() {\n    this.div.removeEventListener(\"focusin\", this.#boundFocusin);\n    this.div.removeEventListener(\"focusout\", this.#boundFocusout);\n\n    if (!this.isEmpty()) {\n      // The editor is removed but it can be back at some point thanks to\n      // undo/redo so we must commit it before.\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n  }\n\n  /**\n   * @returns {boolean} true if this editor can be resized.\n   */\n  get isResizable() {\n    return false;\n  }\n\n  /**\n   * Add the resizers to this editor.\n   */\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n      bindEvents(this, this.div, [\"keydown\"]);\n    }\n  }\n\n  get toolbarPosition() {\n    return null;\n  }\n\n  /**\n   * onkeydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (\n      !this.isResizable ||\n      event.target !== this.div ||\n      event.key !== \"Enter\"\n    ) {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height,\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown);\n        div.addEventListener(\"blur\", boundResizerBlur);\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name));\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then(msg => div.setAttribute(\"aria-label\", msg));\n      }\n    }\n\n    // We want to have the resizers in the visual order, so we move the first\n    // (top-left) to the right place.\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition =\n      (((360 - this.rotation + this.parentRotation) % 360) / 90) *\n      (this.#allResizerDivs.length / 4);\n\n    if (nextFirstPosition !== firstPosition) {\n      // We need to reorder the resizers in the DOM in order to have the focus\n      // on the top-left one.\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then(msg => child.setAttribute(\"aria-label\", msg));\n      }\n    }\n\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({ focusVisible: true });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n\n  #resizerBlur(event) {\n    if (\n      this.#isResizerEnabledForKeyboard &&\n      event.relatedTarget?.parentNode !== this.#resizersDiv\n    ) {\n      this.#stopResizing();\n    }\n  }\n\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      movementX: x,\n      movementY: y,\n    });\n  }\n\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    if (this.#savedDimensions) {\n      const { savedX, savedY, savedWidth, savedHeight } = this.#savedDimensions;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n      this.#savedDimensions = null;\n    }\n  }\n\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n\n  /**\n   * Select this editor.\n   */\n  select() {\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this.#editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          // The editor can have been unselected while we were waiting for the\n          // edit toolbar to be created, hence we want to be sure that this\n          // editor is still selected.\n          this.#editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this.#editToolbar?.show();\n  }\n\n  /**\n   * Unselect this editor.\n   */\n  unselect() {\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      // Don't use this.div.blur() because we don't know where the focus will\n      // go.\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true,\n      });\n    }\n    this.#editToolbar?.hide();\n  }\n\n  /**\n   * Update some parameters which have been changed through the UI.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {}\n\n  /**\n   * When the user disables the editing mode some editors can change some of\n   * their properties.\n   */\n  disableEditing() {}\n\n  /**\n   * When the user enables the editing mode some editors can change some of\n   * their properties.\n   */\n  enableEditing() {}\n\n  /**\n   * The editor is about to be edited.\n   */\n  enterInEditMode() {}\n\n  /**\n   * @returns {HTMLElement | null} the element requiring an alt text.\n   */\n  getImageForAltText() {\n    return null;\n  }\n\n  /**\n   * Get the div which really contains the displayed content.\n   * @returns {HTMLDivElement | undefined}\n   */\n  get contentDiv() {\n    return this.div;\n  }\n\n  /**\n   * If true then the editor is currently edited.\n   * @type {boolean}\n   */\n  get isEditing() {\n    return this.#isEditing;\n  }\n\n  /**\n   * When set to true, it means that this editor is currently edited.\n   * @param {boolean} value\n   */\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n\n  /**\n   * Set the aspect ratio to use when resizing.\n   * @param {number} width\n   * @param {number} height\n   */\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const { style } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n\n  static get MIN_SIZE() {\n    return 16;\n  }\n\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n\n  /**\n   * Get the data to report to the telemetry when the editor is added.\n   * @returns {Object}\n   */\n  get telemetryInitialData() {\n    return { action: \"added\" };\n  }\n\n  /**\n   * The telemetry data to use when saving/printing.\n   * @returns {Object|null}\n   */\n  get telemetryFinalData() {\n    return null;\n  }\n\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const { action } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data,\n      },\n    });\n  }\n\n  /**\n   * Show or hide this editor.\n   * @param {boolean|undefined} visible\n   */\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n\n  /**\n   * Render an annotation in the annotation layer.\n   * @param {Object} annotation\n   * @returns {HTMLElement}\n   */\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n\n    return content;\n  }\n\n  resetAnnotationElement(annotation) {\n    const { firstChild } = annotation.container;\n    if (\n      firstChild.nodeName === \"DIV\" &&\n      firstChild.classList.contains(\"annotationContent\")\n    ) {\n      firstChild.remove();\n    }\n  }\n}\n\n// This class is used to fake an editor which has been deleted.\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n\n  serialize() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n    };\n  }\n}\n\nexport { AnnotationEditor };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Util } from \"../../shared/util.js\";\n\nclass Outliner {\n  #box;\n\n  #verticalEdges = [];\n\n  #intervals = [];\n\n  /**\n   * Construct an outliner.\n   * @param {Array<Object>} boxes - An array of axis-aligned rectangles.\n   * @param {number} borderWidth - The width of the border of the boxes, it\n   *   allows to make the boxes bigger (or smaller).\n   * @param {number} innerMargin - The margin between the boxes and the\n   *   outlines. It's important to not have a null innerMargin when we want to\n   *   draw the outline else the stroked outline could be clipped because of its\n   *   width.\n   * @param {boolean} isLTR - true if we're in LTR mode. It's used to determine\n   *   the last point of the boxes.\n   */\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n\n    // We round the coordinates to slightly reduce the number of edges in the\n    // final outlines.\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n\n    // The coordinates of the boxes are in the page coordinate system.\n    for (const { x, y, width, height } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n\n      minX = Math.min(minX, x1);\n      maxX = Math.max(maxX, x2);\n      minY = Math.min(minY, y1);\n      maxY = Math.max(maxY, y2);\n    }\n\n    const bboxWidth = maxX - minX + 2 * innerMargin;\n    const bboxHeight = maxY - minY + 2 * innerMargin;\n    const shiftedMinX = minX - innerMargin;\n    const shiftedMinY = minY - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n\n    // Convert the coordinates of the edges into box coordinates.\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n\n    this.#box = {\n      x: shiftedMinX,\n      y: shiftedMinY,\n      width: bboxWidth,\n      height: bboxHeight,\n      lastPoint,\n    };\n  }\n\n  getOutlines() {\n    // We begin to sort lexicographically the vertical edges by their abscissa,\n    // and then by their ordinate.\n    this.#verticalEdges.sort(\n      (a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]\n    );\n\n    // We're now using a sweep line algorithm to find the outlines.\n    // We start with the leftmost vertical edge, and we're going to iterate\n    // over all the vertical edges from left to right.\n    // Each time we encounter a left edge, we're going to insert the interval\n    // [y1, y2] in the set of intervals.\n    // This set of intervals is used to break the vertical edges into chunks:\n    // we only take the part of the vertical edge that isn't in the union of\n    // the intervals.\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        // Left edge.\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        // Right edge.\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n\n    // We sort lexicographically the vertices of each edge by their ordinate and\n    // by their abscissa.\n    // Every pair (v_2i, v_{2i + 1}) of vertices defines a horizontal edge.\n    // So for every vertical edge, we're going to add the two vertical edges\n    // which are connected to it through a horizontal edge.\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n\n      outline = [x, y2];\n      outlines.push(outline);\n\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box);\n  }\n\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n\n    while (start <= end) {\n      const middle = (start + end) >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          // There is no intersection between the interval and the edge, hence\n          // we keep it as is.\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            // The edge is included in the interval, hence we remove it.\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\n\nclass Outline {\n  /**\n   * @returns {string} The SVG path of the outline.\n   */\n  toSVGPath() {\n    throw new Error(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n\n  /**\n   * @type {Object|null} The bounding box of the outline.\n   */\n  get box() {\n    throw new Error(\"Abstract getter `box` must be implemented.\");\n  }\n\n  serialize(_bbox, _rotation) {\n    throw new Error(\"Abstract method `serialize` must be implemented.\");\n  }\n\n  get free() {\n    return this instanceof FreeHighlightOutline;\n  }\n}\n\nclass HighlightOutline extends Outline {\n  #box;\n\n  #outlines;\n\n  constructor(outlines, box) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n  }\n\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n\n  /**\n   * Serialize the outlines into the PDF page coordinate system.\n   * @param {Array<number>} _bbox - the bounding box of the annotation.\n   * @param {number} _rotation - the rotation of the annotation.\n   * @returns {Array<Array<number>>}\n   */\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n\n  get box() {\n    return this.#box;\n  }\n}\n\nclass FreeOutliner {\n  #box;\n\n  #bottom = [];\n\n  #innerMargin;\n\n  #isLTR;\n\n  #top = [];\n\n  // The first 6 elements are the last 3 points of the top part of the outline.\n  // The next 6 elements are the last 3 points of the line.\n  // The next 6 elements are the last 3 points of the bottom part of the\n  // outline.\n  // We track the last 3 points in order to be able to:\n  //  - compute the normal of the line,\n  //  - compute the control points of the quadratic Bzier curve.\n  #last = new Float64Array(18);\n\n  #lastX;\n\n  #lastY;\n\n  #min;\n\n  #min_dist;\n\n  #scaleFactor;\n\n  #thickness;\n\n  #points = [];\n\n  static #MIN_DIST = 8;\n\n  static #MIN_DIFF = 2;\n\n  static #MIN = FreeOutliner.#MIN_DIST + FreeOutliner.#MIN_DIFF;\n\n  constructor({ x, y }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n\n  get free() {\n    return true;\n  }\n\n  isEmpty() {\n    // When we add a second point then this.#last.slice(6) will be something\n    // like [NaN, NaN, firstX, firstY, secondX, secondY,...] so having a NaN\n    // at index 8 means that we've only one point.\n    return isNaN(this.#last[8]);\n  }\n\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n\n    return [\n      (this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width,\n      (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height,\n      (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width,\n      (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height,\n    ];\n  }\n\n  add({ x, y }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      // The idea is to avoid garbage points around the last point.\n      // When the points are too close, it just leads to bad normal vectors and\n      // control points.\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n\n    // We update the last 3 points of the line.\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n\n    // We keep track of the points in order to be able to compute the focus\n    // outline.\n    this.#points?.push(x, y);\n\n    // Create the normal unit vector.\n    // |(shiftX, shiftY)| = |K| * |(diffX, diffY)| = |K| * d = diffD.\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 + thX - layerX) / layerWidth,\n          (y1 + thY - layerY) / layerHeight\n        );\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 - thX - layerX) / layerWidth,\n          (y1 - thY - layerY) / layerHeight\n        );\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n\n    const angle = Math.abs(\n      Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX)\n    );\n    if (angle < Math.PI / 2) {\n      // In order to avoid some possible artifacts, we're going to use the a\n      // straight line instead of a quadratic Bzier curve.\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x1 + x2) / 2 - layerX) / layerWidth,\n        ((y1 + y2) / 2 - layerY) / layerHeight\n      );\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x0 + x1) / 2 - layerX) / layerWidth,\n        ((y0 + y1) / 2 - layerY) / layerHeight\n      );\n      return true;\n    }\n\n    // Control points and the final point for the quadratic Bzier curve.\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight\n    );\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight\n    );\n    return true;\n  }\n\n  toSVGPath() {\n    if (this.isEmpty()) {\n      // We've only one point.\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] =\n      this.#getLastCoords();\n\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      // We've only two points.\n      return `M${(this.#last[2] - x) / width} ${\n        (this.#last[3] - y) / height\n      } L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${\n        (this.#last[16] - x) / width\n      } ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${\n        (this.#last[15] - y) / height\n      } Z`;\n    }\n\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${\n            top[i + 5]\n          }`\n        );\n      }\n    }\n\n    buffer.push(\n      `L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${\n        (lastBottom[0] - x) / width\n      } ${(lastBottom[1] - y) / height}`\n    );\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${\n            bottom[i + 4]\n          } ${bottom[i + 5]}`\n        );\n      }\n    }\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n\n    return buffer.join(\" \");\n  }\n\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const lastTop = last.subarray(4, 6);\n    const lastBottom = last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n\n    const points = new Float64Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] =\n      this.#getLastCoords();\n\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      // We've only two points.\n      const outline = new Float64Array(36);\n      outline.set(\n        [\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[2] - layerX) / layerWidth,\n          (last[3] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[4] - layerX) / layerWidth,\n          (last[5] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          lastTopX,\n          lastTopY,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          lastBottomX,\n          lastBottomY,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[16] - layerX) / layerWidth,\n          (last[17] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[14] - layerX) / layerWidth,\n          (last[15] - layerY) / layerHeight,\n        ],\n        0\n      );\n      return new FreeHighlightOutline(\n        outline,\n        points,\n        this.#box,\n        this.#scaleFactor,\n        this.#innerMargin,\n        this.#isLTR\n      );\n    }\n\n    const outline = new Float64Array(\n      this.#top.length + 24 + this.#bottom.length\n    );\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n\n    outline.set(\n      [\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastTop[0] - layerX) / layerWidth,\n        (lastTop[1] - layerY) / layerHeight,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastTopX,\n        lastTopY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastBottomX,\n        lastBottomY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastBottom[0] - layerX) / layerWidth,\n        (lastBottom[1] - layerY) / layerHeight,\n      ],\n      N\n    );\n    N += 24;\n\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], N);\n    return new FreeHighlightOutline(\n      outline,\n      points,\n      this.#box,\n      this.#scaleFactor,\n      this.#innerMargin,\n      this.#isLTR\n    );\n  }\n}\n\nclass FreeHighlightOutline extends Outline {\n  #box;\n\n  #bbox = null;\n\n  #innerMargin;\n\n  #isLTR;\n\n  #points;\n\n  #scaleFactor;\n\n  #outline;\n\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.#computeMinMax(isLTR);\n\n    const { x, y, width, height } = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(\n        `C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${\n          this.#outline[i + 3]\n        } ${this.#outline[i + 4]} ${this.#outline[i + 5]}`\n      );\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = this.#rescale(this.#outline, blX, trY, width, -height);\n        points = this.#rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = this.#rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = this.#rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = this.#rescale(this.#outline, trX, blY, -width, height);\n        points = this.#rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = this.#rescaleAndSwap(\n          this.#outline,\n          trX,\n          trY,\n          -width,\n          -height\n        );\n        points = this.#rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return { outline: Array.from(outline), points: [Array.from(points)] };\n  }\n\n  #rescale(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n\n  #rescaleAndSwap(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    let minX = lastX;\n    let minY = lastY;\n    let maxX = lastX;\n    let maxY = lastY;\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      if (isNaN(outline[i])) {\n        minX = Math.min(minX, outline[i + 4]);\n        minY = Math.min(minY, outline[i + 5]);\n        maxX = Math.max(maxX, outline[i + 4]);\n        maxY = Math.max(maxY, outline[i + 5]);\n        if (lastPointY < outline[i + 5]) {\n          lastPointX = outline[i + 4];\n          lastPointY = outline[i + 5];\n        } else if (lastPointY === outline[i + 5]) {\n          lastPointX = ltrCallback(lastPointX, outline[i + 4]);\n        }\n      } else {\n        const bbox = Util.bezierBoundingBox(\n          lastX,\n          lastY,\n          ...outline.slice(i, i + 6)\n        );\n        minX = Math.min(minX, bbox[0]);\n        minY = Math.min(minY, bbox[1]);\n        maxX = Math.max(maxX, bbox[2]);\n        maxY = Math.max(maxY, bbox[3]);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = outline[i + 4];\n      lastY = outline[i + 5];\n    }\n\n    const x = minX - this.#innerMargin,\n      y = minY - this.#innerMargin,\n      width = maxX - minX + 2 * this.#innerMargin,\n      height = maxY - minY + 2 * this.#innerMargin;\n    this.#bbox = { x, y, width, height, lastPoint: [lastPointX, lastPointY] };\n  }\n\n  get box() {\n    return this.#bbox;\n  }\n\n  getNewOutline(thickness, innerMargin) {\n    // Build the outline of the highlight to use as the focus outline.\n    const { x, y, width, height } = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = new FreeOutliner(\n      {\n        x: this.#points[0] * sx + tx,\n        y: this.#points[1] * sy + ty,\n      },\n      this.#box,\n      this.#scaleFactor,\n      thickness,\n      this.#isLTR,\n      innerMargin ?? this.#innerMargin\n    );\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty,\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\nexport { FreeOutliner, Outliner };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass EditorToolbar {\n  #toolbar = null;\n\n  #colorPicker = null;\n\n  #editor;\n\n  #buttons = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n  }\n\n  render() {\n    const editToolbar = (this.#toolbar = document.createElement(\"div\"));\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu);\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown);\n\n    const buttons = (this.#buttons = document.createElement(\"div\"));\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const { style } = editToolbar;\n      const x =\n        this.#editor._uiManager.direction === \"ltr\"\n          ? 1 - position[0]\n          : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${\n        100 * position[1]\n      }% + var(--editor-toolbar-vert-offset))`;\n    }\n\n    this.#addDeleteButton();\n\n    return editToolbar;\n  }\n\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  #addListenersToElement(element) {\n    // If we're clicking on a button with the keyboard or with\n    // the mouse, we don't want to trigger any focus events on\n    // the editor.\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu);\n  }\n\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n  }\n\n  #addDeleteButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\n      \"data-l10n-id\",\n      `pdfjs-editor-remove-${this.#editor.editorType}-button`\n    );\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      this.#editor._uiManager.delete();\n    });\n    this.#buttons.append(button);\n  }\n\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n\n  addAltTextButton(button) {\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\n\nclass HighlightToolbar {\n  #buttons = null;\n\n  #toolbar = null;\n\n  #uiManager;\n\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n\n  #render() {\n    const editToolbar = (this.#toolbar = document.createElement(\"div\"));\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu);\n\n    const buttons = (this.#buttons = document.createElement(\"div\"));\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n\n    this.#addHighlightButton();\n\n    return editToolbar;\n  }\n\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const { style } = (this.#toolbar ||= this.#render());\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n\n  hide() {\n    this.#toolbar.remove();\n  }\n\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    button.addEventListener(\"contextmenu\", noContextMenu);\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    });\n    this.#buttons.append(button);\n  }\n}\n\nexport { EditorToolbar, HighlightToolbar };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./editor.js\").AnnotationEditor} AnnotationEditor */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  FeatureTest,\n  getUuid,\n  shadow,\n  Util,\n  warn,\n} from \"../../shared/util.js\";\nimport {\n  fetchData,\n  getColorValues,\n  getRGB,\n  PixelsPerInch,\n} from \"../display_utils.js\";\nimport { HighlightToolbar } from \"./toolbar.js\";\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\n\n/**\n * Convert a number between 0 and 100 into an hex number between 0 and 255.\n * @param {number} opacity\n * @return {string}\n */\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity)))\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\n/**\n * Class to create some unique ids for the different editors.\n */\nclass IdManager {\n  #id = 0;\n\n  constructor() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      Object.defineProperty(this, \"reset\", {\n        value: () => (this.#id = 0),\n      });\n    }\n  }\n\n  /**\n   * Get a unique id.\n   * @returns {string}\n   */\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\n\n/**\n * Class to manage the images used by the editors.\n * The main idea is to try to minimize the memory used by the images.\n * The images are cached and reused when possible\n * We use a refCounter to know when an image is not used anymore but we need to\n * be able to restore an image after a remove+undo, so we keep a file reference\n * or an url one.\n */\nclass ImageManager {\n  #baseId = getUuid();\n\n  #id = 0;\n\n  #cache = null;\n\n  static get _isSVGFittingCanvas() {\n    // By default, Firefox doesn't rescale without preserving the aspect ratio\n    // when drawing an SVG image on a canvas, see https://bugzilla.mozilla.org/1547776.\n    // The \"workaround\" is to append \"svgView(preserveAspectRatio(none))\" to the\n    // url, but according to comment #15, it seems that it leads to unexpected\n    // behavior in Safari.\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      // We already tried to load the image but it failed.\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false,\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else {\n        image = data.file = rawData;\n      }\n\n      if (image.type === \"image/svg+xml\") {\n        // Unfortunately, createImageBitmap doesn't work with SVG images.\n        // (see https://bugzilla.mozilla.org/1841972).\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = (data.svgUrl = fileReader.result);\n            // We need to set the preserveAspectRatio to none in order to let\n            // the image fits the canvas when resizing.\n            imageElement.src = (await mustRemoveAspectRatioPromise)\n              ? `${url}#svgView(preserveAspectRatio(none))`\n              : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      console.error(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n\n  async getFromFile(file) {\n    const { lastModified, name, size, type } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    return this.getFromUrl(data.url);\n  }\n\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    data.bitmap = null;\n  }\n\n  // We can use the id only if it belongs this manager.\n  // We must take care of having the right manager because we can copy/paste\n  // some images from other documents, hence it'd be a pity to use an id from an\n  // other manager.\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\n\n/**\n * Class to handle undo/redo.\n * Commands are just saved in a buffer.\n * If we hit some memory issues we could likely use a circular buffer.\n * It has to be used as a singleton.\n */\nclass CommandManager {\n  #commands = [];\n\n  #locked = false;\n\n  #maxSize;\n\n  #position = -1;\n\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n\n  /**\n   * @typedef {Object} addOptions\n   * @property {function} cmd\n   * @property {function} undo\n   * @property {function} [post]\n   * @property {boolean} mustExec\n   * @property {number} type\n   * @property {boolean} overwriteIfSameType\n   * @property {boolean} keepUndo\n   */\n\n  /**\n   * Add a new couple of commands to be used in case of redo/undo.\n   * @param {addOptions} options\n   */\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false,\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n\n    if (this.#locked) {\n      return;\n    }\n\n    const save = { cmd, undo, post, type };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        // All the commands have been undone and then a new one is added\n        // hence we clear the queue.\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      // For example when we change a color we don't want to\n      // be able to undo all the steps, hence we only want to\n      // keep the last undoable action in this sequence of actions.\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n\n    this.#commands.push(save);\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    if (this.#position === -1) {\n      // Nothing to undo.\n      return;\n    }\n\n    // Avoid to insert something during the undo execution.\n    this.#locked = true;\n    const { undo, post } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n\n    this.#position -= 1;\n  }\n\n  /**\n   * Redo the last command.\n   */\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n\n      // Avoid to insert something during the redo execution.\n      this.#locked = true;\n      const { cmd, post } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n\n  /**\n   * Check if there is something to undo.\n   * @returns {boolean}\n   */\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n\n  /**\n   * Check if there is something to redo.\n   * @returns {boolean}\n   */\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n\n  destroy() {\n    this.#commands = null;\n  }\n}\n\n/**\n * Class to handle the different keyboards shortcuts we can have on mac or\n * non-mac OSes.\n */\nclass KeyboardManager {\n  /**\n   * Create a new keyboard manager class.\n   * @param {Array<Array>} callbacks - an array containing an array of shortcuts\n   * and a callback to call.\n   * A shortcut is a string like `ctrl+c` or `mac+ctrl+c` for mac OS.\n   */\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n\n    const { isMac } = FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), { callback, options });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, { callback, options });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n\n  /**\n   * Serialize an event into a string in order to match a\n   * potential key for a callback.\n   * @param {KeyboardEvent} event\n   * @returns {string}\n   */\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n\n    return str;\n  }\n\n  /**\n   * Execute a callback, if any, for a given keyboard event.\n   * The self is used as `this` in the callback.\n   * @param {Object} self\n   * @param {KeyboardEvent} event\n   * @returns\n   */\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: { bubbles = false, args = [], checker = null },\n    } = info;\n\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n\n    // For example, ctrl+s in a FreeText must be handled by the viewer, hence\n    // the event must bubble.\n    if (!bubbles) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n}\n\nclass ColorManager {\n  static _colorsMapping = new Map([\n    [\"CanvasText\", [0, 0, 0]],\n    [\"Canvas\", [255, 255, 255]],\n  ]);\n\n  get _colors() {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"LIB\") &&\n      typeof document === \"undefined\"\n    ) {\n      return shadow(this, \"_colors\", ColorManager._colorsMapping);\n    }\n\n    const colors = new Map([\n      [\"CanvasText\", null],\n      [\"Canvas\", null],\n    ]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n\n  /**\n   * In High Contrast Mode, the color on the screen is not always the\n   * real color used in the pdf.\n   * For example in some cases white can appear to be black but when saving\n   * we want to have white.\n   * @param {string} color\n   * @returns {Array<number>}\n   */\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n\n  /**\n   * An input element must have its color value as a hex string\n   * and not as color name.\n   * So this function converts a name into an hex string.\n   * @param {string} name\n   * @returns {string}\n   */\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\n\n/**\n * A pdf has several pages and each of them when it will rendered\n * will have an AnnotationEditorLayer which will contain the some\n * new Annotations associated to an editor in order to modify them.\n *\n * This class is used to manage all the different layers, editors and\n * some action like copy/paste, undo/redo, ...\n */\nclass AnnotationEditorUIManager {\n  #activeEditor = null;\n\n  #allEditors = new Map();\n\n  #allLayers = new Map();\n\n  #altTextManager = null;\n\n  #annotationStorage = null;\n\n  #changedExistingAnnotations = null;\n\n  #commandManager = new CommandManager();\n\n  #currentPageIndex = 0;\n\n  #deletedAnnotationsElementIds = new Set();\n\n  #draggingEditors = null;\n\n  #editorTypes = null;\n\n  #editorsToRescale = new Set();\n\n  #enableHighlightFloatingButton = false;\n\n  #filterFactory = null;\n\n  #focusMainContainerTimeoutId = null;\n\n  #highlightColors = null;\n\n  #highlightWhenShiftUp = false;\n\n  #highlightToolbar = null;\n\n  #idManager = new IdManager();\n\n  #isEnabled = false;\n\n  #isWaiting = false;\n\n  #lastActiveElement = null;\n\n  #mainHighlightColorPicker = null;\n\n  #mlManager = null;\n\n  #mode = AnnotationEditorType.NONE;\n\n  #selectedEditors = new Set();\n\n  #selectedTextNode = null;\n\n  #pageColors = null;\n\n  #showAllStates = null;\n\n  #boundBlur = this.blur.bind(this);\n\n  #boundFocus = this.focus.bind(this);\n\n  #boundCopy = this.copy.bind(this);\n\n  #boundCut = this.cut.bind(this);\n\n  #boundPaste = this.paste.bind(this);\n\n  #boundKeydown = this.keydown.bind(this);\n\n  #boundKeyup = this.keyup.bind(this);\n\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n\n  #boundSelectionChange = this.#selectionChange.bind(this);\n\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false,\n  };\n\n  #translation = [0, 0];\n\n  #translationTimeoutId = null;\n\n  #container = null;\n\n  #viewer = null;\n\n  static TRANSLATE_SMALL = 1; // page units.\n\n  static TRANSLATE_BIG = 10; // page units.\n\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n\n    /**\n     * If the focused element is an input, we don't want to handle the arrow.\n     * For example, sliders can be controlled with the arrow keys.\n     */\n    const arrowChecker = self =>\n      self.#container.contains(document.activeElement) &&\n      document.activeElement.tagName !== \"BUTTON\" &&\n      self.hasSomethingToControl();\n\n    const textInputChecker = (_self, { target: el }) => {\n      if (el instanceof HTMLInputElement) {\n        const { type } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          [\"ctrl+a\", \"mac+meta+a\"],\n          proto.selectAll,\n          { checker: textInputChecker },\n        ],\n        [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, { checker: textInputChecker }],\n        [\n          // On mac, depending of the OS version, the event.key is either \"z\" or\n          // \"Z\" when the user presses \"meta+shift+z\".\n          [\n            \"ctrl+y\",\n            \"ctrl+shift+z\",\n            \"mac+meta+shift+z\",\n            \"ctrl+shift+Z\",\n            \"mac+meta+shift+Z\",\n          ],\n          proto.redo,\n          { checker: textInputChecker },\n        ],\n        [\n          [\n            \"Backspace\",\n            \"alt+Backspace\",\n            \"ctrl+Backspace\",\n            \"shift+Backspace\",\n            \"mac+Backspace\",\n            \"mac+alt+Backspace\",\n            \"mac+ctrl+Backspace\",\n            \"Delete\",\n            \"ctrl+Delete\",\n            \"shift+Delete\",\n            \"mac+Delete\",\n          ],\n          proto.delete,\n          { checker: textInputChecker },\n        ],\n        [\n          [\"Enter\", \"mac+Enter\"],\n          proto.addNewEditorFromKeyboard,\n          {\n            // Those shortcuts can be used in the toolbar for some other actions\n            // like zooming, hence we need to check if the container has the\n            // focus.\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(el) &&\n              !self.isEnterHandled,\n          },\n        ],\n        [\n          [\" \", \"mac+ \"],\n          proto.addNewEditorFromKeyboard,\n          {\n            // Those shortcuts can be used in the toolbar for some other actions\n            // like zooming, hence we need to check if the container has the\n            // focus.\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(document.activeElement),\n          },\n        ],\n        [[\"Escape\", \"mac+Escape\"], proto.unselectAll],\n        [\n          [\"ArrowLeft\", \"mac+ArrowLeft\"],\n          proto.translateSelectedEditors,\n          { args: [-small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          proto.translateSelectedEditors,\n          { args: [-big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowRight\", \"mac+ArrowRight\"],\n          proto.translateSelectedEditors,\n          { args: [small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          proto.translateSelectedEditors,\n          { args: [big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowUp\", \"mac+ArrowUp\"],\n          proto.translateSelectedEditors,\n          { args: [0, -small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"],\n          proto.translateSelectedEditors,\n          { args: [0, -big], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowDown\", \"mac+ArrowDown\"],\n          proto.translateSelectedEditors,\n          { args: [0, small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"],\n          proto.translateSelectedEditors,\n          { args: [0, big], checker: arrowChecker },\n        ],\n      ])\n    );\n  }\n\n  constructor(\n    container,\n    viewer,\n    altTextManager,\n    eventBus,\n    pdfDocument,\n    pageColors,\n    highlightColors,\n    enableHighlightFloatingButton,\n    mlManager\n  ) {\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this._eventBus = eventBus;\n    this._eventBus._on(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._on(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._on(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._on(\"rotationchanging\", this.#boundOnRotationChanging);\n    this.#addSelectionListener();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0,\n    };\n    this.isShiftKeyDown = false;\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      Object.defineProperty(this, \"reset\", {\n        value: () => {\n          this.selectAll();\n          this.delete();\n          this.#idManager.reset();\n        },\n      });\n    }\n  }\n\n  destroy() {\n    this.#removeKeyboardManager();\n    this.#removeFocusManager();\n    this._eventBus._off(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._off(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._off(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._off(\"rotationchanging\", this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this.#removeSelectionListener();\n  }\n\n  async mlGuess(data) {\n    return this.#mlManager?.guess(data) || null;\n  }\n\n  get hasMLManager() {\n    return !!this.#mlManager;\n  }\n\n  get hcmFilter() {\n    return shadow(\n      this,\n      \"hcmFilter\",\n      this.#pageColors\n        ? this.#filterFactory.addHCMFilter(\n            this.#pageColors.foreground,\n            this.#pageColors.background\n          )\n        : \"none\"\n    );\n  }\n\n  get direction() {\n    return shadow(\n      this,\n      \"direction\",\n      getComputedStyle(this.#container).direction\n    );\n  }\n\n  get highlightColors() {\n    return shadow(\n      this,\n      \"highlightColors\",\n      this.#highlightColors\n        ? new Map(\n            this.#highlightColors\n              .split(\",\")\n              .map(pair => pair.split(\"=\").map(x => x.trim()))\n          )\n        : null\n    );\n  }\n\n  get highlightColorNames() {\n    return shadow(\n      this,\n      \"highlightColorNames\",\n      this.highlightColors\n        ? new Map(Array.from(this.highlightColors, e => e.reverse()))\n        : null\n    );\n  }\n\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n\n  editAltText(editor) {\n    this.#altTextManager?.editAltText(this, editor);\n  }\n\n  onPageChanging({ pageNumber }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n\n  focusMainContainer() {\n    this.#container.focus();\n  }\n\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height,\n      } = layer.div.getBoundingClientRect();\n      if (\n        x >= layerX &&\n        x <= layerX + width &&\n        y >= layerY &&\n        y <= layerY + height\n      ) {\n        return layer;\n      }\n    }\n    return null;\n  }\n\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n\n  onScaleChanging({ scale }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n\n  onRotationChanging({ pagesRotation }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n\n  #getAnchorElementForSelection({ anchorNode }) {\n    return anchorNode.nodeType === Node.TEXT_NODE\n      ? anchorNode.parentElement\n      : anchorNode;\n  }\n\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const { anchorNode, anchorOffset, focusNode, focusOffset } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    if (this.#mode === AnnotationEditorType.NONE) {\n      this._eventBus.dispatch(\"showannotationeditorui\", {\n        source: this,\n        mode: AnnotationEditorType.HIGHLIGHT,\n      });\n      this.showAllEditors(\"highlight\", true, /* updateButton = */ true);\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        layer.createAndAddNewEditor({ x: 0, y: 0 }, false, {\n          methodOfCreation,\n          boxes,\n          anchorNode,\n          anchorOffset,\n          focusNode,\n          focusOffset,\n          text,\n        });\n        break;\n      }\n    }\n  }\n\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n\n  /**\n   * Add an editor in the annotation storage.\n   * @param {AnnotationEditor} editor\n   */\n  addToAnnotationStorage(editor) {\n    if (\n      !editor.isEmpty() &&\n      this.#annotationStorage &&\n      !this.#annotationStorage.has(editor.id)\n    ) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    const { anchorNode } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true,\n    });\n\n    if (\n      this.#mode !== AnnotationEditorType.HIGHLIGHT &&\n      this.#mode !== AnnotationEditorType.NONE\n    ) {\n      return;\n    }\n\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, /* updateButton = */ true);\n    }\n\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          // Do nothing on right click.\n          return;\n        }\n        window.removeEventListener(\"pointerup\", pointerup);\n        window.removeEventListener(\"blur\", pointerup);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup);\n      window.addEventListener(\"blur\", pointerup);\n    }\n  }\n\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#boundSelectionChange);\n  }\n\n  #removeSelectionListener() {\n    document.removeEventListener(\"selectionchange\", this.#boundSelectionChange);\n  }\n\n  #addFocusManager() {\n    window.addEventListener(\"focus\", this.#boundFocus);\n    window.addEventListener(\"blur\", this.#boundBlur);\n  }\n\n  #removeFocusManager() {\n    window.removeEventListener(\"focus\", this.#boundFocus);\n    window.removeEventListener(\"blur\", this.#boundBlur);\n  }\n\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    // When several editors are selected and the window loses focus, we want to\n    // keep the last active element in order to be able to focus it again when\n    // the window gets the focus back but we don't want to trigger any focus\n    // callbacks else only one editor will be selected.\n    const { activeElement } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\n      \"focusin\",\n      () => {\n        lastEditor._focusEventsAllowed = true;\n      },\n      { once: true }\n    );\n    lastActiveElement.focus();\n  }\n\n  #addKeyboardManager() {\n    // The keyboard events are caught at the container level in order to be able\n    // to execute some callbacks even if the current page doesn't have focus.\n    window.addEventListener(\"keydown\", this.#boundKeydown);\n    window.addEventListener(\"keyup\", this.#boundKeyup);\n  }\n\n  #removeKeyboardManager() {\n    window.removeEventListener(\"keydown\", this.#boundKeydown);\n    window.removeEventListener(\"keyup\", this.#boundKeyup);\n  }\n\n  #addCopyPasteListeners() {\n    document.addEventListener(\"copy\", this.#boundCopy);\n    document.addEventListener(\"cut\", this.#boundCut);\n    document.addEventListener(\"paste\", this.#boundPaste);\n  }\n\n  #removeCopyPasteListeners() {\n    document.removeEventListener(\"copy\", this.#boundCopy);\n    document.removeEventListener(\"cut\", this.#boundCut);\n    document.removeEventListener(\"paste\", this.#boundPaste);\n  }\n\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n\n  /**\n   * Copy callback.\n   * @param {ClipboardEvent} event\n   */\n  copy(event) {\n    event.preventDefault();\n\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(/* isForCopying = */ true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n\n  /**\n   * Cut callback.\n   * @param {ClipboardEvent} event\n   */\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n\n  /**\n   * Paste callback.\n   * @param {ClipboardEvent} event\n   */\n  paste(event) {\n    event.preventDefault();\n    const { clipboardData } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n\n    if (!Array.isArray(data)) {\n      return;\n    }\n\n    this.unselectAll();\n    const layer = this.currentLayer;\n\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({ cmd, undo, mustExec: true });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n\n  /**\n   * Keydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (\n      this.#mode !== AnnotationEditorType.NONE &&\n      !this.isEditorHandlingKeyboard\n    ) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n\n  /**\n   * Keyup callback.\n   * @param {KeyboardEvent} event\n   */\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n\n  /**\n   * Execute an action for a given name.\n   * For example, the user can click on the \"Undo\" entry in the context menu\n   * and it'll trigger the undo action.\n   */\n  onEditingAction({ name }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n\n  /**\n   * Update the different possible states of this manager, e.g. is there\n   * something to undo, redo, ...\n   * @param {Object} details\n   */\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(\n      ([key, value]) => this.#previousStates[key] !== value\n    );\n\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details),\n      });\n      // We could listen on our own event but it sounds like a bit weird and\n      // it's a way to simpler to handle that stuff here instead of having to\n      // add something in every place where an editor can be unselected.\n      if (\n        this.#mode === AnnotationEditorType.HIGHLIGHT &&\n        details.hasSelectedEditor === false\n      ) {\n        this.#dispatchUpdateUI([\n          [AnnotationEditorParamsType.HIGHLIGHT_FREE, true],\n        ]);\n      }\n    }\n  }\n\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details,\n    });\n  }\n\n  /**\n   * Set the editing state.\n   * It can be useful to temporarily disable it when the user is editing a\n   * FreeText annotation.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false,\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false,\n      });\n      this.disableUserSelect(false);\n    }\n  }\n\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n\n  /**\n   * Get an id.\n   * @returns {string}\n   */\n  getId() {\n    return this.#idManager.id;\n  }\n\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n\n  /**\n   * Add a new layer for a page which will contains the editors.\n   * @param {AnnotationEditorLayer} layer\n   */\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n\n  /**\n   * Remove a layer.\n   * @param {AnnotationEditorLayer} layer\n   */\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n\n  /**\n   * Change the editor mode (None, FreeText, Ink, ...)\n   * @param {number} mode\n   * @param {string|null} editId\n   * @param {boolean} [isFromKeyboard] - true if the mode change is due to a\n   *   keyboard action.\n   */\n  updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      return;\n    }\n    this.setEditingState(true);\n    this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId && isFromKeyboard) {\n      this.addNewEditorFromKeyboard();\n      return;\n    }\n\n    if (!editId) {\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n        break;\n      }\n    }\n  }\n\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {number} mode\n   * @returns {undefined}\n   */\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      mode,\n    });\n  }\n\n  /**\n   * Update a parameter in the current editor or globally.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor();\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\",\n            },\n          },\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state =\n      this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ??\n      true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([\n        [AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible],\n      ]);\n    }\n  }\n\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n\n  /**\n   * Enable all the layers.\n   */\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n\n  /**\n   * Disable all the layers.\n   */\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n\n  /**\n   * Get all the editors belonging to a given page.\n   * @param {number} pageIndex\n   * @returns {Array<AnnotationEditor>}\n   */\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n\n  /**\n   * Get an editor with the given id.\n   * @param {string} id\n   * @returns {AnnotationEditor}\n   */\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n\n  /**\n   * Add a new editor.\n   * @param {AnnotationEditor} editor\n   */\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        // When the div is removed from DOM the focus can move on the\n        // document.body, so we need to move it back to the main container.\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    if (\n      !editor.annotationElementId ||\n      !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)\n    ) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n\n  /**\n   * The annotation element with the given id has been deleted.\n   * @param {AnnotationEditor} editor\n   */\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n\n  /**\n   * Check if the annotation element with the given id has been deleted.\n   * @param {string} annotationElementId\n   * @returns {boolean}\n   */\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n\n  /**\n   * The annotation element with the given id have been restored.\n   * @param {AnnotationEditor} editor\n   */\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n\n  /**\n   * Add an editor to the layer it belongs to or add it to the global map.\n   * @param {AnnotationEditor} editor\n   */\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n\n  /**\n   * Set the given editor as the active one.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {\n      // Iterate to get the last element.\n    }\n    return ed;\n  }\n\n  /**\n   * Update the UI of the active editor.\n   * @param {AnnotationEditor} editor\n   */\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection,\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n\n  get isEnterHandled() {\n    return (\n      this.#selectedEditors.size === 1 &&\n      this.firstSelectedEditor.isEnterHandled\n    );\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Redo the last undoed command.\n   */\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Add a command to execute (cmd) and another one to undo it.\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Delete the current editor or all.\n   */\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  commitOrRemove() {\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n  }\n\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n\n  /**\n   * Select the editors.\n   * @param {Array<AnnotationEditor>} editors\n   */\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({ hasSelectedEditor: this.hasSelection });\n  }\n\n  /**\n   * Select all the editors.\n   */\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n\n  /**\n   * Unselect all the selected editors.\n   */\n  unselectAll() {\n    if (this.#activeEditor) {\n      // An editor is being edited so just commit it.\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        // If the mode is NONE, we want to really unselect the editor, hence we\n        // mustn't return here.\n        return;\n      }\n    }\n\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false,\n    });\n  }\n\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n\n    // We don't want to have an undo/redo for each translation so we wait a bit\n    // before adding the command to the command manager.\n    const TIME_TO_WAIT = 1000;\n\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n            }\n          }\n        },\n        mustExec: false,\n      });\n    }, TIME_TO_WAIT);\n\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n    }\n  }\n\n  /**\n   * Set up the drag session for moving the selected editors.\n   */\n  setUpDragSession() {\n    // Note: don't use any references to the editor's parent which can be null\n    // if the editor belongs to a destroyed page.\n    if (!this.hasSelection) {\n      return;\n    }\n    // Avoid to have spurious text selection in the text layer when dragging.\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1,\n      });\n    }\n  }\n\n  /**\n   * Ends the drag session.\n   * @returns {boolean} true if at least one editor has been moved.\n   */\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n\n    for (const [{ x, y, pageIndex }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||=\n        x !== value.savedX ||\n        y !== value.savedY ||\n        pageIndex !== value.savedPageIndex;\n    }\n\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        // The editor can be undone/redone on a page which is not visible (and\n        // which potentially has no annotation editor layer), hence we need to\n        // use the pageIndex instead of the parent.\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, { newX, newY, newPageIndex }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, { savedX, savedY, savedPageIndex }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true,\n    });\n\n    return true;\n  }\n\n  /**\n   * Drag the set of selected editors.\n   * @param {number} tx\n   * @param {number} ty\n   */\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n\n  /**\n   * Rebuild the editor (usually on undo/redo actions) on a potentially\n   * non-rendered page.\n   * @param {AnnotationEditor} editor\n   */\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n\n  get isEditorHandlingKeyboard() {\n    return (\n      this.getActive()?.shouldGetKeyboardEvents() ||\n      (this.#selectedEditors.size === 1 &&\n        this.firstSelectedEditor.shouldGetKeyboardEvents())\n    );\n  }\n\n  /**\n   * Is the current editor the one passed as argument?\n   * @param {AnnotationEditor} editor\n   * @returns\n   */\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n\n  /**\n   * Get the current active editor.\n   * @returns {AnnotationEditor|null}\n   */\n  getActive() {\n    return this.#activeEditor;\n  }\n\n  /**\n   * Get the current editor mode.\n   * @returns {number}\n   */\n  getMode() {\n    return this.#mode;\n  }\n\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (\n        !textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)\n      ) {\n        return null;\n      }\n    }\n\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n\n    // We must rotate the boxes because we want to have them in the non-rotated\n    // page coordinates.\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n    }\n\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const { x, y, width, height } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n\n  addChangedExistingAnnotation({ annotationElementId, id }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(\n      annotationElementId,\n      id\n    );\n  }\n\n  removeChangedExistingAnnotation({ annotationElementId }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n}\n\nexport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  CommandManager,\n  KeyboardManager,\n  opacityToHex,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AbortException, assert, warn } from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./fetch_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\",\n  };\n}\n\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\n\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\n\n/** @implements {IPDFStream} */\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFFetchStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._headers = createHeaders(this._stream.httpHeaders);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n\n        const getResponseHeader = name => response.headers.get(name);\n\n        const { allowRangeRequests, suggestedLength } =\n          validateRangeRequestCapabilities({\n            getResponseHeader,\n            isHttp: this._stream.isHttp,\n            rangeChunkSize: this._rangeChunkSize,\n            disableRange: this._disableRange,\n          });\n\n        this._isRangeSupported = allowRangeRequests;\n        // Setting right content length.\n        this._contentLength = suggestedLength || this._contentLength;\n\n        this._filename = extractFilenameFromHeader(getResponseHeader);\n\n        // We need to stop reading when range is supported and streaming is\n        // disabled.\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException(\"Streaming is disabled.\"));\n        }\n      })\n      .catch(this._headersCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(this._readCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({ loaded: this._loaded });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\nexport { PDFFetchStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  bytesToString,\n  FontRenderOps,\n  isNodeJS,\n  shadow,\n  string32,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\n\nclass FontLoader {\n  #systemFonts = new Set();\n\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null, // For testing only.\n  }) {\n    this._document = ownerDocument;\n\n    this.nativeFontFaces = new Set();\n    this.styleElement =\n      typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n        ? styleElement\n        : null;\n\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n      this.loadingRequests = [];\n      this.loadTestFontId = 0;\n    }\n  }\n\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement\n        .getElementsByTagName(\"head\")[0]\n        .append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n\n    if (this.styleElement) {\n      // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n\n  async loadSystemFont({ systemFontInfo: info, _inspectFont }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(\n      !this.disableFontFace,\n      \"loadSystemFont shouldn't be called when `disableFontFace` is set.\"\n    );\n\n    if (this.isFontLoadingAPISupported) {\n      const { loadedName, src, style } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(\n          `Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`\n        );\n\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n\n    unreachable(\n      \"Not implemented: loadSystemFont without the Font Loading API.\"\n    );\n  }\n\n  async bind(font) {\n    // Add the font to the DOM only once; skip if the font is already loaded.\n    if (font.attached || (font.missingFile && !font.systemFontInfo)) {\n      return;\n    }\n    font.attached = true;\n\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n\n          // When font loading failed, fall back to the built-in font renderer.\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return; // The font was, asynchronously, loaded.\n    }\n\n    // !this.isFontLoadingAPISupported\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n\n      if (this.isSyncFontLoadingSupported) {\n        return; // The font was, synchronously, loaded.\n      }\n      if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n        throw new Error(\"Not implemented: async font loading\");\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n      // The font was, asynchronously, loaded.\n    }\n  }\n\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      return shadow(\n        this,\n        \"isFontLoadingAPISupported\",\n        hasFonts && !this.styleElement\n      );\n    }\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n\n  get isSyncFontLoadingSupported() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      return shadow(this, \"isSyncFontLoadingSupported\", true);\n    }\n\n    let supported = false;\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"CHROME\")) {\n      if (isNodeJS) {\n        // Node.js - we can pretend that sync font loading is supported.\n        supported = true;\n      } else if (\n        typeof navigator !== \"undefined\" &&\n        typeof navigator?.userAgent === \"string\" &&\n        // User agent string sniffing is bad, but there is no reliable way to\n        // tell if the font is fully loaded and ready to be used with canvas.\n        /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)\n      ) {\n        // Firefox, from version 14, supports synchronous font loading.\n        supported = true;\n      }\n    }\n    return shadow(this, \"isSyncFontLoadingSupported\", supported);\n  }\n\n  _queueLoadingCallback(callback) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _queueLoadingCallback\");\n    }\n\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n\n      // Sending all completed requests in order of how they were queued.\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n\n    const { loadingRequests } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback,\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n\n  get _loadTestFont() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _loadTestFont\");\n    }\n\n    // This is a CFF font with 1 glyph for '.' that fills its entire width\n    // and height.\n    const testFont = atob(\n      \"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" +\n        \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" +\n        \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" +\n        \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" +\n        \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" +\n        \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" +\n        \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" +\n        \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" +\n        \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" +\n        \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" +\n        \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" +\n        \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" +\n        \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" +\n        \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" +\n        \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" +\n        \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" +\n        \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\"\n    );\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n\n  _prepareFontLoadEvent(font, request) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _prepareFontLoadEvent\");\n    }\n\n    /** Hack begin */\n    // There's currently no event when a font has finished downloading so the\n    // following code is a dirty hack to 'guess' when a font is ready.\n    // It's assumed fonts are loaded in order, so add a known test font after\n    // the desired fonts and then test for the loading of that test font.\n\n    function int32(data, offset) {\n      return (\n        (data.charCodeAt(offset) << 24) |\n        (data.charCodeAt(offset + 1) << 16) |\n        (data.charCodeAt(offset + 2) << 8) |\n        (data.charCodeAt(offset + 3) & 0xff)\n      );\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n\n    // The temporary canvas is used to determine if fonts are loaded.\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n\n    let called = 0;\n    function isFontReady(name, callback) {\n      // With setTimeout clamping this gives the font ~100ms to load.\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    // Chromium seems to cache fonts based on a hash of the actual font data,\n    // so the font must be modified for each load test else it will appear to\n    // be loaded already.\n    // TODO: This could maybe be made faster by avoiding the btoa of the full\n    // font by splitting it in chunks before hand and padding the font id.\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n    data = spliceString(\n      data,\n      COMMENT_OFFSET,\n      loadTestFontId.length,\n      loadTestFontId\n    );\n    // CFF checksum is important for IE, adjusting it\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      // align to 4 bytes boundary\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i)) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n    /** Hack end */\n  }\n}\n\nclass FontFaceObject {\n  constructor(\n    translatedData,\n    { disableFontFace = false, ignoreErrors = false, inspectFont = null }\n  ) {\n    this.compiledGlyphs = Object.create(null);\n    // importing translated data\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.disableFontFace = disableFontFace === true;\n    this.ignoreErrors = ignoreErrors === true;\n    this._inspectFont = inspectFont;\n  }\n\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight,\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(\n        this.cssFontInfo.fontFamily,\n        this.data,\n        css\n      );\n    }\n\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    // Add the @font-face rule to the document.\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      if (!this.ignoreErrors) {\n        throw ex;\n      }\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n\n    if (!Array.isArray(cmds) || cmds.length === 0) {\n      return (this.compiledGlyphs[character] = function (c, size) {\n        // No-op function, to allow rendering to continue.\n      });\n    }\n\n    const commands = [];\n    for (let i = 0, ii = cmds.length; i < ii; ) {\n      switch (cmds[i++]) {\n        case FontRenderOps.BEZIER_CURVE_TO:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push(ctx => ctx.bezierCurveTo(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.MOVE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.moveTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.LINE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.lineTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.QUADRATIC_CURVE_TO:\n          {\n            const [a, b, c, d] = cmds.slice(i, i + 4);\n            commands.push(ctx => ctx.quadraticCurveTo(a, b, c, d));\n            i += 4;\n          }\n          break;\n        case FontRenderOps.RESTORE:\n          commands.push(ctx => ctx.restore());\n          break;\n        case FontRenderOps.SAVE:\n          commands.push(ctx => ctx.save());\n          break;\n        case FontRenderOps.SCALE:\n          // The scale command must be at the third position, after save and\n          // transform (for the font matrix) commands (see also\n          // font_renderer.js).\n          // The goal is to just scale the canvas and then run the commands loop\n          // without the need to pass the size parameter to each command.\n          assert(\n            commands.length === 2,\n            \"Scale command is only valid at the third position.\"\n          );\n          break;\n        case FontRenderOps.TRANSFORM:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push(ctx => ctx.transform(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.TRANSLATE:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.translate(a, b));\n            i += 2;\n          }\n          break;\n      }\n    }\n\n    return (this.compiledGlyphs[character] = function glyphDrawer(ctx, size) {\n      commands[0](ctx);\n      commands[1](ctx);\n      ctx.scale(size, -size);\n      for (let i = 2, ii = commands.length; i < ii; i++) {\n        commands[i](ctx);\n      }\n    });\n  }\n}\n\nexport { FontFaceObject, FontLoader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap } from \"../shared/util.js\";\n\nclass Metadata {\n  #metadataMap;\n\n  #data;\n\n  constructor({ parsedData, rawData }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n\n  getRaw() {\n    return this.#data;\n  }\n\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n}\n\nexport { Metadata };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, stringToBytes } from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./network.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\n\nfunction getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\n\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = (this.isHttp && args.httpHeaders) || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end,\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = { xhr });\n\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n\n    xhr.send(null);\n\n    return xhrId;\n  }\n\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n\n    if (xhr.readyState !== 4) {\n      return;\n    }\n\n    if (!(xhrId in this.pendingRequests)) {\n      // The XHR request might have been aborted in onHeadersReceived()\n      // callback, in which case we should abort request.\n      return;\n    }\n\n    delete this.pendingRequests[xhrId];\n\n    // Success status == 0 can be on ftp, file and other protocols.\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n\n    // From http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2:\n    // \"A server MAY ignore the Range header\". This means it's possible to\n    // get a 200 rather than a 206 response from a range request.\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE &&\n      pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n\n    if (\n      !ok_response_on_range_request &&\n      xhrStatus !== pendingRequest.expectedStatus\n    ) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n\n    const chunk = getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk,\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\n\n/** @implements {IPDFStream} */\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials,\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNetworkStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(\n      this._manager,\n      this._source\n    );\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(\n      this._manager,\n      begin,\n      end\n    );\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length; // Optional\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n\n    this.onProgress = null;\n  }\n\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n\n    const getResponseHeader = name => fullRequestXhr.getResponseHeader(name);\n\n    const { allowRangeRequests, suggestedLength } =\n      validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: this._manager.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    // Setting right content length.\n    this._contentLength = suggestedLength || this._contentLength;\n\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n\n    if (this._isRangeSupported) {\n      // NOTE: by cancelling the full request, and then issuing range\n      // requests, there will be an issue for sites where you can only\n      // request the pdf once. However, if this is the case, then the\n      // server should not be returning that it can support range requests.\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n\n    this._headersReceivedCapability.resolve();\n  }\n\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({ value: data.chunk, done: false });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength,\n    });\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n\n  _close() {\n    this.onClosed?.(this);\n  }\n\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({ loaded: evt.loaded });\n    }\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\nexport { PDFNetworkStream };\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringToBytes } from \"../shared/util.js\";\n\n// This getFilenameFromContentDispositionHeader function is adapted from\n// https://github.com/Rob--W/open-in-browser/blob/7e2e35a38b8b4e981b11da7b2f01df0149049e92/extension/content-disposition.js\n// with the following changes:\n// - Modified to conform to PDF.js's coding style.\n// - Move return to the end of the function to prevent Babel from dropping the\n//   function declarations.\n\n/**\n * Extract file name from the Content-Disposition HTTP response header.\n *\n * @param {string} contentDisposition\n * @returns {string} Filename, if found in the Content-Disposition header.\n */\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n\n  // filename*=ext-value (\"ext-value\" from RFC 5987, referenced by RFC 6266).\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // Continuations (RFC 2231 section 3, referenced by RFC 5987 section 3.1).\n  // filename*n*=part\n  // filename*n=part\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    // RFC 2047, section\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n\n  // filename=value (RFC 5987, section 4.1).\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // After this line there are only function declarations. We cannot put\n  // \"return\" here for readability because babel would then drop the function\n  // declarations...\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      \"(?:^|;)\\\\s*\" +\n        attributePattern +\n        \"\\\\s*=\\\\s*\" +\n        // Captures: value = token | quoted-string\n        // (RFC 2616, section 3.6 and referenced by RFC 6266 4.1)\n        \"(\" +\n        '[^\";\\\\s][^;\\\\s]*' +\n        \"|\" +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        \")\",\n      flags\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {\n        // TextDecoder constructor threw - unrecognized encoding.\n      }\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      // Maybe multi-byte UTF-8.\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        // Try iso-8859-1 encoding.\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    // Iterate over all filename*n= and filename*n*= with n being an integer\n    // of at least zero. Any non-zero number must not start with '0'.\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match; // eslint-disable-line prefer-const\n      n = parseInt(n, 10);\n      if (n in matches) {\n        // Ignore anything after the invalid second filename*0.\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        // Numbers must be consecutive. Truncate when there is a hole.\n        break;\n      }\n      let [quot, part] = matches[n]; // eslint-disable-line prefer-const\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      // Find the first unescaped \" and terminate there.\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1; // Truncates and stop the iteration.\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    // Decodes \"ext-value\" from RFC 5987.\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      // Some servers send \"filename*=\" without encoding 'language' prefix,\n      // e.g. in https://github.com/Rob--W/open-in-browser/issues/26\n      // Let's accept the value like Firefox (57) (Chrome 62 rejects it).\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    // Ignore language (RFC 5987 section 3.2.1, and RFC 6266 section 4.1 ).\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    // RFC 2047-decode the result. Firefox tried to drop support for it, but\n    // backed out because some servers use it - https://bugzil.la/875615\n    // Firefox's condition for decoding is here: https://searchfox.org/mozilla-central/rev/4a590a5a15e35d88a3b23dd6ac3c471cf85b04a8/netwerk/mime/nsMIMEHeaderParamImpl.cpp#742-748\n\n    // We are more strict and only recognize RFC 2047-encoding if the value\n    // starts with \"=?\", since then it is likely that the full value is\n    // RFC 2047-encoded.\n\n    // Firefox also decodes words even where RFC 2047 section 5 states:\n    // \"An 'encoded-word' MUST NOT appear within a 'quoted-string'.\"\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    // RFC 2047, section 2.4\n    // encoded-word = \"=?\" charset \"?\" encoding \"?\" encoded-text \"?=\"\n    // charset = token (but let's restrict to characters that denote a\n    //       possibly valid encoding).\n    // encoding = q or b\n    // encoded-text = any printable ASCII character other than ? or space.\n    //        ... but Firefox permits ? and space.\n    return value.replaceAll(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === \"q\" || encoding === \"Q\") {\n          // RFC 2047 section 4.2.\n          text = text.replaceAll(\"_\", \" \");\n          text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        } // else encoding is b or B - base64 (RFC 2047 section 4.1)\n        try {\n          text = atob(text);\n        } catch {}\n        return textdecode(charset, text);\n      }\n    );\n  }\n\n  return \"\";\n}\n\nexport { getFilenameFromContentDispositionHeader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  MissingPDFException,\n  UnexpectedResponseException,\n} from \"../shared/util.js\";\nimport { getFilenameFromContentDispositionHeader } from \"./content_disposition.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      Number.isInteger(rangeChunkSize) && rangeChunkSize > 0,\n      \"rangeChunkSize must be an integer larger than zero.\"\n    );\n  }\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n\n  returnValues.suggestedLength = length;\n\n  if (length <= 2 * rangeChunkSize) {\n    // The file size is smaller than the size of two chunks, so it does not\n    // make any sense to abort the request and retry with a range request.\n    return returnValues;\n  }\n\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\n\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\n\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || (status === 0 && url.startsWith(\"file:\"))) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(\n    `Unexpected server response (${status}) while retrieving PDF \"${url}\".`,\n    status\n  );\n}\n\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\nexport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  isNodeJS,\n  MissingPDFException,\n} from \"../shared/util.js\";\nimport {\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nlet fs, http, https, url;\nif (isNodeJS) {\n  // Native packages.\n  fs = await __non_webpack_import__(\"fs\");\n  http = await __non_webpack_import__(\"http\");\n  https = await __non_webpack_import__(\"https\");\n  url = await __non_webpack_import__(\"url\");\n}\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\n\nfunction parseUrl(sourceUrl) {\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  // Prepending 'file:///' to Windows absolute path.\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  // Changes protocol to 'file:' if url refers to filesystem.\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\n\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp =\n      this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    // Check if url refers to filesystem.\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNodeStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = this.isFsUrl\n      ? new PDFNodeStreamFsFullReader(this)\n      : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl\n      ? new PDFNodeStreamFsRangeReader(this, start, end)\n      : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length; // optional\n    this._loaded = 0;\n    this._filename = null;\n\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readable to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // We need to stop reading when range is supported and streaming is\n    // disabled.\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n\n    // Destroy ReadableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({ loaded: this._loaded });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readableStream to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // Destroy readableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers,\n  };\n}\n\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n\n      // Make sure that headers name are in lower case, as mentioned\n      // here: https://nodejs.org/api/http.html#http_message_headers.\n      const getResponseHeader = name =>\n        this._readableStream.headers[name.toLowerCase()];\n\n      const { allowRangeRequests, suggestedLength } =\n        validateRangeRequestCapabilities({\n          getResponseHeader,\n          isHttp: stream.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange,\n        });\n\n      this._isRangeSupported = allowRangeRequests;\n      // Setting right content length.\n      this._contentLength = suggestedLength || this._contentLength;\n\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    // Note: `request.end(data)` is used to write `data` to request body\n    // and notify end of request. But one should always call `request.end()`\n    // even if there is no data to write -- (to notify the end of request).\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    fs.promises.lstat(path).then(\n      stat => {\n        // Setting right content length.\n        this._contentLength = stat.size;\n\n        this._setReadableStream(fs.createReadStream(path));\n        this._headersCapability.resolve();\n      },\n      error => {\n        if (error.code === \"ENOENT\") {\n          error = new MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n      }\n    );\n  }\n}\n\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    this._setReadableStream(fs.createReadStream(path, { start, end: end - 1 }));\n  }\n}\n\nexport { PDFNodeStream };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n} from \"./base_factory.js\";\nimport { isNodeJS, warn } from \"../shared/util.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_utils.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nlet fs, canvas, path2d;\nif (isNodeJS) {\n  // Native packages.\n  fs = await __non_webpack_import__(\"fs\");\n  // Optional, third-party, packages.\n  try {\n    canvas = await __non_webpack_import__(\"canvas\");\n  } catch {}\n  try {\n    path2d = await __non_webpack_import__(\"path2d\");\n  } catch {}\n}\n\nif (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"SKIP_BABEL\")) {\n  (function checkDOMMatrix() {\n    if (globalThis.DOMMatrix || !isNodeJS) {\n      return;\n    }\n    const DOMMatrix = canvas?.DOMMatrix;\n\n    if (DOMMatrix) {\n      globalThis.DOMMatrix = DOMMatrix;\n    } else {\n      warn(\"Cannot polyfill `DOMMatrix`, rendering may be broken.\");\n    }\n  })();\n\n  (function checkPath2D() {\n    if (globalThis.Path2D || !isNodeJS) {\n      return;\n    }\n    const CanvasRenderingContext2D = canvas?.CanvasRenderingContext2D;\n    const applyPath2DToCanvasRenderingContext =\n      path2d?.applyPath2DToCanvasRenderingContext;\n    const Path2D = path2d?.Path2D;\n\n    if (\n      CanvasRenderingContext2D &&\n      applyPath2DToCanvasRenderingContext &&\n      Path2D\n    ) {\n      applyPath2DToCanvasRenderingContext(CanvasRenderingContext2D);\n      globalThis.Path2D = Path2D;\n    } else {\n      warn(\"Cannot polyfill `Path2D`, rendering may be broken.\");\n    }\n  })();\n}\n\nconst fetchData = function (url) {\n  return fs.promises.readFile(url).then(data => new Uint8Array(data));\n};\n\nclass NodeFilterFactory extends BaseFilterFactory {}\n\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    return canvas.createCanvas(width, height);\n  }\n}\n\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(url).then(data => ({ cMapData: data, compressionType }));\n  }\n}\n\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url);\n  }\n}\n\nexport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n};\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  info,\n  objectFromMap,\n  RenderingIntentFlag,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst INTERNAL = Symbol(\"INTERNAL\");\n\nclass OptionalContentGroup {\n  #isDisplay = false;\n\n  #isPrint = false;\n\n  #userSet = false;\n\n  #visible = true;\n\n  constructor(renderingIntent, { name, intent, usage }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const { print, view } = this.usage;\n\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n\n  /**\n   * @ignore\n   */\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\n\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n\n  #groups = new Map();\n\n  #initialHash = null;\n\n  #order = null;\n\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n\n    this.name = null;\n    this.creator = null;\n\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(\n        group.id,\n        new OptionalContentGroup(renderingIntent, group)\n      );\n    }\n\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n\n    // The following code must always run *last* in the constructor.\n    this.#initialHash = this.getHash();\n  }\n\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      // Per the spec, the expression should be preferred if available.\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        // Default\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n\n  setVisibility(id, visible = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    group._setVisible(INTERNAL, !!visible, /* userSet = */ true);\n\n    this.#cachedGetHash = null;\n  }\n\n  setOCGState({ state, preserveRB }) {\n    let operator;\n\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          group._setVisible(INTERNAL, true);\n          break;\n        case \"OFF\":\n          group._setVisible(INTERNAL, false);\n          break;\n        case \"Toggle\":\n          group._setVisible(INTERNAL, !group.visible);\n          break;\n      }\n    }\n\n    this.#cachedGetHash = null;\n  }\n\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n\n  getGroups() {\n    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;\n  }\n\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return (this.#cachedGetHash = hash.hexdigest());\n  }\n}\n\nexport { OptionalContentConfig };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nimport { AbortException, Util } from \"../shared/util.js\";\nimport { setLayerDimensions } from \"./display_utils.js\";\n\n/**\n * Text layer render parameters.\n *\n * @typedef {Object} TextLayerRenderParameters\n * @property {ReadableStream | TextContent} textContentSource - Text content to\n *   render, i.e. the value returned by the page's `streamTextContent` or\n *   `getTextContent` method.\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {WeakMap<HTMLElement,Object>} [textDivProperties] - Some properties\n *   weakly mapped to the HTML elements used to render the text.\n * @property {Array<string>} [textContentItemsStr] - Strings that correspond to\n *   the `str` property of the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n */\n\n/**\n * Text layer update parameters.\n *\n * @typedef {Object} TextLayerUpdateParameters\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {WeakMap<HTMLElement,Object>} [textDivProperties] - Some properties\n *   weakly mapped to the HTML elements used to render the text.\n * @property {boolean} [mustRotate] true if the text layer must be rotated.\n * @property {boolean} [mustRescale] true if the text layer contents must be\n *   rescaled.\n */\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nconst ascentCache = new Map();\nlet _canvasContext = null;\n\nfunction getCtx() {\n  if (!_canvasContext) {\n    // We don't use an OffscreenCanvas here because we use serif/sans serif\n    // fonts with it and they depends on the locale.\n    // In Firefox, the <html> element get a lang attribute that depends on what\n    // Fluent returns for the locale and the OffscreenCanvas uses the OS locale.\n    // Those two locales can be different and consequently the used fonts will\n    // be different (see bug 1869001).\n    // Ideally, we should use in the text layer the fonts we've in the pdf (or\n    // their replacements when they aren't embedded) and then we can use an\n    // OffscreenCanvas.\n    const canvas = document.createElement(\"canvas\");\n    canvas.className = \"hiddenCanvasElement\";\n    document.body.append(canvas);\n    _canvasContext = canvas.getContext(\"2d\", { alpha: false });\n  }\n\n  return _canvasContext;\n}\n\nfunction cleanupTextLayer() {\n  _canvasContext?.canvas.remove();\n  _canvasContext = null;\n}\n\nfunction getAscent(fontFamily) {\n  const cachedAscent = ascentCache.get(fontFamily);\n  if (cachedAscent) {\n    return cachedAscent;\n  }\n\n  const ctx = getCtx();\n\n  const savedFont = ctx.font;\n  ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n  ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n  const metrics = ctx.measureText(\"\");\n\n  // Both properties aren't available by default in Firefox.\n  let ascent = metrics.fontBoundingBoxAscent;\n  let descent = Math.abs(metrics.fontBoundingBoxDescent);\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n\n    ctx.canvas.width = ctx.canvas.height = 0;\n    ctx.font = savedFont;\n    return ratio;\n  }\n\n  // Try basic heuristic to guess ascent/descent.\n  // Draw a g with baseline at 0,0 and then get the line\n  // number where a pixel has non-null red component (starting\n  // from bottom).\n  ctx.strokeStyle = \"red\";\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"g\", 0, 0);\n  let pixels = ctx.getImageData(\n    0,\n    0,\n    DEFAULT_FONT_SIZE,\n    DEFAULT_FONT_SIZE\n  ).data;\n  descent = 0;\n  for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n    if (pixels[i] > 0) {\n      descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  // Draw an A with baseline at 0,DEFAULT_FONT_SIZE and then get the line\n  // number where a pixel has non-null red component (starting\n  // from top).\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n  pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n  ascent = 0;\n  for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n    if (pixels[i] > 0) {\n      ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  ctx.canvas.width = ctx.canvas.height = 0;\n  ctx.font = savedFont;\n\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n\n  ascentCache.set(fontFamily, DEFAULT_FONT_ASCENT);\n  return DEFAULT_FONT_ASCENT;\n}\n\nfunction appendText(task, geom, styles) {\n  // Initialize all used properties to keep the caches monomorphic.\n  const textDiv = document.createElement(\"span\");\n  const textDivProperties = {\n    angle: 0,\n    canvasWidth: 0,\n    hasText: geom.str !== \"\",\n    hasEOL: geom.hasEOL,\n    fontSize: 0,\n  };\n  task._textDivs.push(textDiv);\n\n  const tx = Util.transform(task._transform, geom.transform);\n  let angle = Math.atan2(tx[1], tx[0]);\n  const style = styles[geom.fontName];\n  if (style.vertical) {\n    angle += Math.PI / 2;\n  }\n\n  const fontFamily =\n    (task._fontInspectorEnabled && style.fontSubstitution) || style.fontFamily;\n  const fontHeight = Math.hypot(tx[2], tx[3]);\n  const fontAscent = fontHeight * getAscent(fontFamily);\n\n  let left, top;\n  if (angle === 0) {\n    left = tx[4];\n    top = tx[5] - fontAscent;\n  } else {\n    left = tx[4] + fontAscent * Math.sin(angle);\n    top = tx[5] - fontAscent * Math.cos(angle);\n  }\n\n  const scaleFactorStr = \"calc(var(--scale-factor)*\";\n  const divStyle = textDiv.style;\n  // Setting the style properties individually, rather than all at once,\n  // should be OK since the `textDiv` isn't appended to the document yet.\n  if (task._container === task._rootContainer) {\n    divStyle.left = `${((100 * left) / task._pageWidth).toFixed(2)}%`;\n    divStyle.top = `${((100 * top) / task._pageHeight).toFixed(2)}%`;\n  } else {\n    // We're in a marked content span, hence we can't use percents.\n    divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n    divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n  }\n  divStyle.fontSize = `${scaleFactorStr}${fontHeight.toFixed(2)}px)`;\n  divStyle.fontFamily = fontFamily;\n\n  textDivProperties.fontSize = fontHeight;\n\n  // Keeps screen readers from pausing on every new text span.\n  textDiv.setAttribute(\"role\", \"presentation\");\n\n  textDiv.textContent = geom.str;\n  // geom.dir may be 'ttb' for vertical texts.\n  textDiv.dir = geom.dir;\n\n  // `fontName` is only used by the FontInspector, and we only use `dataset`\n  // here to make the font name available in the debugger.\n  if (task._fontInspectorEnabled) {\n    textDiv.dataset.fontName =\n      style.fontSubstitutionLoadedName || geom.fontName;\n  }\n  if (angle !== 0) {\n    textDivProperties.angle = angle * (180 / Math.PI);\n  }\n  // We don't bother scaling single-char text divs, because it has very\n  // little effect on text highlighting. This makes scrolling on docs with\n  // lots of such divs a lot faster.\n  let shouldScaleText = false;\n  if (geom.str.length > 1) {\n    shouldScaleText = true;\n  } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n    const absScaleX = Math.abs(geom.transform[0]),\n      absScaleY = Math.abs(geom.transform[3]);\n    // When the horizontal/vertical scaling differs significantly, also scale\n    // even single-char text to improve highlighting (fixes issue11713.pdf).\n    if (\n      absScaleX !== absScaleY &&\n      Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n    ) {\n      shouldScaleText = true;\n    }\n  }\n  if (shouldScaleText) {\n    textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n  }\n  task._textDivProperties.set(textDiv, textDivProperties);\n  if (task._isReadableStream) {\n    task._layoutText(textDiv);\n  }\n}\n\nfunction layout(params) {\n  const { div, scale, properties, ctx, prevFontSize, prevFontFamily } = params;\n  const { style } = div;\n  let transform = \"\";\n  if (properties.canvasWidth !== 0 && properties.hasText) {\n    const { fontFamily } = style;\n    const { canvasWidth, fontSize } = properties;\n\n    if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n      ctx.font = `${fontSize * scale}px ${fontFamily}`;\n      params.prevFontSize = fontSize;\n      params.prevFontFamily = fontFamily;\n    }\n\n    // Only measure the width for multi-char text divs, see `appendText`.\n    const { width } = ctx.measureText(div.textContent);\n\n    if (width > 0) {\n      transform = `scaleX(${(canvasWidth * scale) / width})`;\n    }\n  }\n  if (properties.angle !== 0) {\n    transform = `rotate(${properties.angle}deg) ${transform}`;\n  }\n  if (transform.length > 0) {\n    style.transform = transform;\n  }\n}\n\nfunction render(task) {\n  if (task._canceled) {\n    return;\n  }\n  const textDivs = task._textDivs;\n  const capability = task._capability;\n  const textDivsLength = textDivs.length;\n\n  // No point in rendering many divs as it would make the browser\n  // unusable even after the divs are rendered.\n  if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n    capability.resolve();\n    return;\n  }\n\n  if (!task._isReadableStream) {\n    for (const textDiv of textDivs) {\n      task._layoutText(textDiv);\n    }\n  }\n  capability.resolve();\n}\n\nclass TextLayerRenderTask {\n  constructor({\n    textContentSource,\n    container,\n    viewport,\n    textDivs,\n    textDivProperties,\n    textContentItemsStr,\n  }) {\n    this._textContentSource = textContentSource;\n    this._isReadableStream = textContentSource instanceof ReadableStream;\n    this._container = this._rootContainer = container;\n    this._textDivs = textDivs || [];\n    this._textContentItemsStr = textContentItemsStr || [];\n    this._fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n\n    this._reader = null;\n    this._textDivProperties = textDivProperties || new WeakMap();\n    this._canceled = false;\n    this._capability = Promise.withResolvers();\n    this._layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale: viewport.scale * (globalThis.devicePixelRatio || 1),\n      properties: null,\n      ctx: getCtx(),\n    };\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    this._transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this._pageWidth = pageWidth;\n    this._pageHeight = pageHeight;\n\n    setLayerDimensions(container, viewport);\n\n    // Always clean-up the temporary canvas once rendering is no longer pending.\n    this._capability.promise\n      .finally(() => {\n        this._layoutTextParams = null;\n      })\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n  }\n\n  /**\n   * Promise for textLayer rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Cancel rendering of the textLayer.\n   */\n  cancel() {\n    this._canceled = true;\n    if (this._reader) {\n      this._reader\n        .cancel(new AbortException(\"TextLayer task cancelled.\"))\n        .catch(() => {\n          // Avoid \"Uncaught promise\" messages in the console.\n        });\n      this._reader = null;\n    }\n    this._capability.reject(new AbortException(\"TextLayer task cancelled.\"));\n  }\n\n  /**\n   * @private\n   */\n  _processItems(items, styleCache) {\n    for (const item of items) {\n      if (item.str === undefined) {\n        if (\n          item.type === \"beginMarkedContentProps\" ||\n          item.type === \"beginMarkedContent\"\n        ) {\n          const parent = this._container;\n          this._container = document.createElement(\"span\");\n          this._container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this._container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this._container);\n        } else if (item.type === \"endMarkedContent\") {\n          this._container = this._container.parentNode;\n        }\n        continue;\n      }\n      this._textContentItemsStr.push(item.str);\n      appendText(this, item, styleCache);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _layoutText(textDiv) {\n    const textDivProperties = (this._layoutTextParams.properties =\n      this._textDivProperties.get(textDiv));\n    this._layoutTextParams.div = textDiv;\n    layout(this._layoutTextParams);\n\n    if (textDivProperties.hasText) {\n      this._container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this._container.append(br);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _render() {\n    const { promise, resolve, reject } = Promise.withResolvers();\n    let styleCache = Object.create(null);\n\n    if (this._isReadableStream) {\n      const pump = () => {\n        this._reader.read().then(({ value, done }) => {\n          if (done) {\n            resolve();\n            return;\n          }\n\n          Object.assign(styleCache, value.styles);\n          this._processItems(value.items, styleCache);\n          pump();\n        }, reject);\n      };\n\n      this._reader = this._textContentSource.getReader();\n      pump();\n    } else if (this._textContentSource) {\n      const { items, styles } = this._textContentSource;\n      this._processItems(items, styles);\n      resolve();\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n\n    promise.then(() => {\n      styleCache = null;\n      render(this);\n    }, this._capability.reject);\n  }\n}\n\n/**\n * @param {TextLayerRenderParameters} params\n * @returns {TextLayerRenderTask}\n */\nfunction renderTextLayer(params) {\n  const task = new TextLayerRenderTask(params);\n  task._render();\n  return task;\n}\n\n/**\n * @param {TextLayerUpdateParameters} params\n * @returns {undefined}\n */\nfunction updateTextLayer({\n  container,\n  viewport,\n  textDivs,\n  textDivProperties,\n  mustRotate = true,\n  mustRescale = true,\n}) {\n  if (mustRotate) {\n    setLayerDimensions(container, { rotation: viewport.rotation });\n  }\n\n  if (mustRescale) {\n    const ctx = getCtx();\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const params = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale,\n      properties: null,\n      ctx,\n    };\n    for (const div of textDivs) {\n      params.properties = textDivProperties.get(div);\n      params.div = div;\n      layout(params);\n    }\n  }\n}\n\nexport {\n  cleanupTextLayer,\n  renderTextLayer,\n  TextLayerRenderTask,\n  updateTextLayer,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../interfaces\").IPDFStream} IPDFStream */\n/** @typedef {import(\"../interfaces\").IPDFStreamReader} IPDFStreamReader */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../interfaces\").IPDFStreamRangeReader} IPDFStreamRangeReader */\n\nimport { assert } from \"../shared/util.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\n/** @implements {IPDFStream} */\nclass PDFDataTransportStream {\n  constructor(\n    pdfDataRangeTransport,\n    { disableRange = false, disableStream = false }\n  ) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.'\n    );\n    const { length, initialData, progressiveDone, contentDispositionFilename } =\n      pdfDataRangeTransport;\n\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n\n    if (initialData?.length > 0) {\n      // Prevent any possible issues by only transferring a Uint8Array that\n      // completely \"utilizes\" its underlying ArrayBuffer.\n      const buffer =\n        initialData instanceof Uint8Array &&\n        initialData.byteLength === initialData.buffer.byteLength\n          ? initialData.buffer\n          : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({ begin, chunk });\n    });\n\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({ loaded, total });\n    });\n\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({ chunk });\n    });\n\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n\n    pdfDataRangeTransport.transportReady();\n  }\n\n  _onReceiveData({ begin, chunk }) {\n    // Prevent any possible issues by only transferring a Uint8Array that\n    // completely \"utilizes\" its underlying ArrayBuffer.\n    const buffer =\n      chunk instanceof Uint8Array &&\n      chunk.byteLength === chunk.buffer.byteLength\n        ? chunk.buffer\n        : new Uint8Array(chunk).buffer;\n\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(\n        found,\n        \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\"\n      );\n    }\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      // Reporting to first range reader, if it exists.\n      this._rangeReaders[0]?.onProgress?.({ loaded: evt.loaded });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total,\n      });\n    }\n  }\n\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFDataTransportStream.getFullReader can only be called once.\"\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone,\n      this._contentDispositionFilename\n    );\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFDataTransportStreamReader {\n  constructor(\n    stream,\n    queuedChunks,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename)\n      ? contentDispositionFilename\n      : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // Ignore new data.\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n\n  get headersReady() {\n    return this._headersReady;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // ignore new data\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({ value: chunk, done: false });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({ value: undefined, done: true });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\nexport { PDFDataTransportStream };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass GlobalWorkerOptions {\n  static #port = null;\n\n  static #src = \"\";\n\n  /**\n   * @type {Worker | null}\n   */\n  static get workerPort() {\n    return this.#port;\n  }\n\n  /**\n   * @param {Worker | null} workerPort - Defines global port for worker process.\n   *   Overrides the `workerSrc` option.\n   */\n  static set workerPort(val) {\n    if (\n      !(typeof Worker !== \"undefined\" && val instanceof Worker) &&\n      val !== null\n    ) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n\n  /**\n   * @type {string}\n   */\n  static get workerSrc() {\n    return this.#src;\n  }\n\n  /**\n   * @param {string} workerSrc - A string containing the path and filename of\n   *   the worker file.\n   *\n   *   NOTE: The `workerSrc` option should always be set, in order to prevent\n   *         any issues when using the PDF.js library.\n   */\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\nexport { GlobalWorkerOptions };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_storage\").AnnotationStorage} AnnotationStorage */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { XfaText } from \"./xfa_text.js\";\n\n/**\n * @typedef {Object} XfaLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Object} xfaHtml\n * @property {AnnotationStorage} [annotationStorage]\n * @property {IPDFLinkService} linkService\n * @property {string} [intent] - (default value is 'display').\n */\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, { value: null });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, { value: event.target.value });\n        });\n        break;\n      case \"input\":\n        if (\n          element.attributes.type === \"radio\" ||\n          element.attributes.type === \"checkbox\"\n        ) {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            // The checked attribute may have been set when opening the file,\n            // unset through the UI and we're here because of printing.\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked\n                ? event.target.getAttribute(\"xfaOn\")\n                : event.target.getAttribute(\"xfaOff\"),\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, { value: event.target.value });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value =\n            options.selectedIndex === -1\n              ? \"\"\n              : options[options.selectedIndex].value;\n          storage.setValue(id, { value });\n        });\n        break;\n    }\n  }\n\n  static setAttributes({ html, element, storage = null, intent, linkService }) {\n    const { attributes } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n\n    if (attributes.type === \"radio\") {\n      // Avoid to have a radio group when printing with the same as one\n      // already displayed.\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          // We don't need to add dataId in the html object but it can\n          // be useful to know its value when writing printing tests:\n          // in this case, don't skip dataId to have its value.\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || (key !== \"href\" && key !== \"newWindow\")) {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(\n        html,\n        attributes.href,\n        attributes.newWindow\n      );\n    }\n\n    // Set the value after the others to be sure to overwrite any other values.\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n\n  /**\n   * Render the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService,\n      });\n    }\n\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n\n    // Set defaults.\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n\n    // Text nodes used for the text highlighter.\n    const textDivs = [];\n\n    // In the rich text context, it's possible to just have a text node without\n    // a root element, so we handle this case here (see issue 17215).\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return { textDivs };\n    }\n\n    const stack = [[root, -1, rootHtml]];\n\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n\n      const { name } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n\n      const childHtml = child?.attributes?.xmlns\n        ? document.createElementNS(child.attributes.xmlns, name)\n        : document.createElement(name);\n\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService,\n        });\n      }\n\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n\n    /**\n     * TODO: re-enable that stuff once we've JS implementation.\n     * See https://bugzilla.mozilla.org/show_bug.cgi?id=1719465.\n     *\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaDisabled input, .xfaDisabled textarea\"\n     * )) {\n     * el.setAttribute(\"disabled\", true);\n     * }\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaReadOnly input, .xfaReadOnly textarea\"\n     * )) {\n     * el.setAttribute(\"readOnly\", true);\n     * }\n     */\n\n    for (const el of rootDiv.querySelectorAll(\n      \".xfaNonInteractive input, .xfaNonInteractive textarea\"\n    )) {\n      el.setAttribute(\"readOnly\", true);\n    }\n\n    return {\n      textDivs,\n    };\n  }\n\n  /**\n   * Update the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\nexport { XfaLayer };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nclass XfaText {\n  /**\n   * Walk an XFA tree and create an array of text nodes that is compatible\n   * with a regular PDFs TextContent. Currently, only TextItem.str is supported,\n   * all other fields and styles haven't been implemented.\n   *\n   * @param {Object} xfa - An XFA fake DOM object.\n   *\n   * @returns {TextContent}\n   */\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null),\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str,\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n\n  /**\n   * @param {string} name - DOM node name. (lower case)\n   *\n   * @returns {boolean} true if the DOM node should have a corresponding text\n   * node.\n   */\n  static shouldBuildText(name) {\n    return !(\n      name === \"textarea\" ||\n      name === \"input\" ||\n      name === \"option\" ||\n      name === \"select\"\n    );\n  }\n}\n\nexport { XfaText };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").OnProgressParameters} OnProgressParameters */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").PDFDocumentLoadingTask} PDFDocumentLoadingTask */\n/** @typedef {import(\"./display/api\").PDFDocumentProxy} PDFDocumentProxy */\n/** @typedef {import(\"./display/api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display/api\").RenderTask} RenderTask */\n/** @typedef {import(\"./display/display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/text_layer\").TextLayerRenderTask} TextLayerRenderTask */\n\nimport {\n  AbortException,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationMode,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  FeatureTest,\n  ImageKind,\n  InvalidPDFException,\n  MissingPDFException,\n  normalizeUnicode,\n  OPS,\n  PasswordResponses,\n  PermissionFlag,\n  shadow,\n  UnexpectedResponseException,\n  Util,\n  VerbosityLevel,\n} from \"./shared/util.js\";\nimport {\n  build,\n  getDocument,\n  PDFDataRangeTransport,\n  PDFWorker,\n  version,\n} from \"./display/api.js\";\nimport {\n  DOMSVGFactory,\n  fetchData,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  noContextMenu,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n} from \"./display/display_utils.js\";\nimport { renderTextLayer, updateTextLayer } from \"./display/text_layer.js\";\nimport { AnnotationEditorLayer } from \"./display/editor/annotation_editor_layer.js\";\nimport { AnnotationEditorUIManager } from \"./display/editor/tools.js\";\nimport { AnnotationLayer } from \"./display/annotation_layer.js\";\nimport { ColorPicker } from \"./display/editor/color_picker.js\";\nimport { DrawLayer } from \"./display/draw_layer.js\";\nimport { GlobalWorkerOptions } from \"./display/worker_options.js\";\nimport { Outliner } from \"./display/editor/outliner.js\";\nimport { XfaLayer } from \"./display/xfa_layer.js\";\n\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsVersion =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : void 0;\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsBuild =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : void 0;\n\nexport {\n  AbortException,\n  AnnotationEditorLayer,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationEditorUIManager,\n  AnnotationLayer,\n  AnnotationMode,\n  build,\n  CMapCompressionType,\n  ColorPicker,\n  createValidAbsoluteUrl,\n  DOMSVGFactory,\n  DrawLayer,\n  FeatureTest,\n  fetchData,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  ImageKind,\n  InvalidPDFException,\n  isDataScheme,\n  isPdfFile,\n  MissingPDFException,\n  noContextMenu,\n  normalizeUnicode,\n  OPS,\n  Outliner,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  RenderingCancelledException,\n  renderTextLayer,\n  setLayerDimensions,\n  shadow,\n  UnexpectedResponseException,\n  updateTextLayer,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer,\n};\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  MissingPDFException,\n  PasswordException,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n} from \"./util.js\";\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2,\n};\n\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\n\nfunction wrapReason(reason) {\n  if (\n    !(\n      reason instanceof Error ||\n      (typeof reason === \"object\" && reason !== null)\n    )\n  ) {\n    unreachable(\n      'wrapReason: Expected \"reason\" to be a (possibly cloned) Error.'\n    );\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new MissingPDFException(reason.message);\n    case \"PasswordException\":\n      return new PasswordException(reason.message, reason.code);\n    case \"UnexpectedResponseException\":\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\n\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(\n          function (result) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.DATA,\n              callbackId: data.callbackId,\n              data: result,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.ERROR,\n              callbackId: data.callbackId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n\n  on(actionName, handler) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        typeof handler === \"function\",\n        'MessageHandler.on: Expected \"handler\" to be a function.'\n      );\n    }\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   */\n  send(actionName, data, transfers) {\n    this.comObj.postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers\n    );\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that the other side will callback with the response.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expect that the other side will callback to signal 'start_complete'.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Object} queueingStrategy - Strategy to signal backpressure based on\n   *                 internal queue.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {ReadableStream} ReadableStream to read data in chunks.\n   */\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n\n    return new ReadableStream(\n      {\n        start: controller => {\n          const startCapability = Promise.withResolvers();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          comObj.postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers\n          );\n          // Return Promise for Async process, to signal success/failure.\n          return startCapability.promise;\n        },\n\n        pull: controller => {\n          const pullCapability = Promise.withResolvers();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          // Returning Promise will not call \"pull\"\n          // again until current pull is resolved.\n          return pullCapability.promise;\n        },\n\n        cancel: reason => {\n          assert(reason instanceof Error, \"cancel must have a valid reason\");\n          const cancelCapability = Promise.withResolvers();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          // Return Promise to signal success or failure.\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy\n    );\n  }\n\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        // Enqueue decreases the desiredSize property of sink,\n        // so when it changes from positive to negative,\n        // set ready as unresolved promise.\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers\n        );\n      },\n\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      }\n    );\n  }\n\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        // Ignore any pull after close is called.\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        // Pull increases the desiredSize property of sink, so when it changes\n        // from negative to positive, set ready property as resolved promise.\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        // Reset desiredSize property of sink on every pull.\n        streamSink.desiredSize = data.desiredSize;\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n\n  async #deleteStreamController(streamController, streamId) {\n    // Delete the `streamController` only when the start, pull, and cancel\n    // capabilities have settled, to prevent `TypeError`s.\n    await Promise.allSettled([\n      streamController.startCall?.promise,\n      streamController.pullCall?.promise,\n      streamController.cancelCall?.promise,\n    ]);\n    delete this.streamControllers[streamId];\n  }\n\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\n\nexport { MessageHandler };\n","/* Copyright 2014 Opera Software ASA\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n *\n * Based on https://code.google.com/p/smhasher/wiki/MurmurHash3.\n * Hashes roughly 100 KB per millisecond on i7 3.4 GHz.\n */\n\nconst SEED = 0xc3d2e1f0;\n// Workaround for missing math precision in JS.\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\n\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    // We don't care about endianness here.\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        h1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = ((k2 * C1) & MASK_HIGH) | ((k2 * C1_LOW) & MASK_LOW);\n        k2 = (k2 << 15) | (k2 >>> 17);\n        k2 = ((k2 * C2) & MASK_HIGH) | ((k2 * C2_LOW) & MASK_LOW);\n        h2 ^= k2;\n        h2 = (h2 << 13) | (h2 >>> 19);\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n\n    k1 = 0;\n\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      /* falls through */\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      /* falls through */\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        /* falls through */\n\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0xed558ccd) & MASK_HIGH) | ((h1 * 0x8ccd) & MASK_LOW);\n    h2 =\n      ((h2 * 0xff51afd7) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xafd7ed55) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0x1a85ec53) & MASK_HIGH) | ((h1 * 0xec53) & MASK_LOW);\n    h2 =\n      ((h2 * 0xc4ceb9fe) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xb9fe1a85) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n\n    return (\n      (h1 >>> 0).toString(16).padStart(8, \"0\") +\n      (h2 >>> 0).toString(16).padStart(8, \"0\")\n    );\n  }\n}\n\nexport { MurmurHash3_64 };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\n// NW.js / Electron is a browser context, but copies some Node.js objects; see\n// http://docs.nwjs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/#access-nodejs-and-nwjs-api-in-browser-context\n// https://www.electronjs.org/docs/api/process#processversionselectron-readonly\n// https://www.electronjs.org/docs/api/process#processtype-readonly\nconst isNodeJS =\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n  typeof process === \"object\" &&\n  process + \"\" === \"[object process]\" &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== \"browser\");\n\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6; // Ten megabytes.\n\n// Represent the percentage of the height of a single-line field over\n// the font size. Acrobat seems to use this value.\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\n\n/**\n * Refer to the `WorkerTransport.getRenderingIntent`-method in the API, to see\n * how these flags are being used:\n *  - ANY, DISPLAY, and PRINT are the normal rendering intents, note the\n *    `PDFPageProxy.{render, getOperatorList, getAnnotations}`-methods.\n *  - ANNOTATIONS_FORMS, ANNOTATIONS_STORAGE, ANNOTATIONS_DISABLE control which\n *    annotations are rendered onto the canvas (i.e. by being included in the\n *    operatorList), note the `PDFPageProxy.{render, getOperatorList}`-methods\n *    and their `annotationMode`-option.\n *  - OPLIST is used with the `PDFPageProxy.getOperatorList`-method, note the\n *    `OperatorList`-constructor (on the worker-thread).\n */\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100,\n};\n\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3,\n};\n\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\n\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n};\n\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n};\n\n// Permission flags from Table 22, Section 7.6.3.2 of the PDF specification.\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\n\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\n\nconst ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\n\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\n\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\",\n};\n\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\n\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\n\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\",\n};\n\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\",\n};\n\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\",\n};\n\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\n\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n};\n\n// All the possible operations for an operator list.\nconst OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  // PLEASE NOTE: We purposely keep any removed operators commented out, since\n  //              re-numbering the list would risk breaking third-party users.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  // beginAnnotations: 78,\n  // endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  // paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n};\n\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\n\nlet verbosity = VerbosityLevel.WARNINGS;\n\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\n\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\n\n// Checks if URLs use one of the allowed protocols, e.g. to avoid XSS.\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL.\n *\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} [baseUrl] - An absolute URL.\n * @param {Object} [options]\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === \"string\") {\n      // Let URLs beginning with \"www.\" default to using the \"http://\" protocol.\n      if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n        const dots = url.match(/\\./g);\n        // Avoid accidentally matching a *relative* URL pointing to a file named\n        // e.g. \"www.pdf\" or similar.\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n\n      // According to ISO 32000-1:2008, section 12.6.4.7, URIs should be encoded\n      // in 7-bit ASCII. Some bad PDFs use UTF-8 encoding; see bug 1122280.\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch {}\n      }\n    }\n\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch {\n    /* `new URL()` will throw on incorrect data. */\n  }\n  return null;\n}\n\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      prop in obj,\n      `shadow: Property \"${prop && prop.toString()}\" not found in object.`\n    );\n  }\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\n\n/**\n * @type {any}\n */\nconst BaseException = (function BaseExceptionClosure() {\n  // eslint-disable-next-line no-shadow\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n\n  return BaseException;\n})();\n\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\n\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\n\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\n\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"MissingPDFException\");\n  }\n}\n\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, \"UnexpectedResponseException\");\n    this.status = status;\n  }\n}\n\n/**\n * Error caused during parsing PDF data.\n */\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\n\n/**\n * Error used to indicate task cancellation.\n */\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\n\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\n\nfunction string32(value) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      typeof value === \"number\" && Math.abs(value) < 2 ** 32,\n      `string32: Unexpected input \"${value}\".`\n    );\n  }\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff\n  );\n}\n\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\n\n// Ensure that the returned Object has a `null` prototype; hence why\n// `Object.fromEntries(...)` is not used.\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n// Checks the endianness of the platform.\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(\"\"); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nclass FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n\n  static get isOffscreenCanvasSupported() {\n    return shadow(\n      this,\n      \"isOffscreenCanvasSupported\",\n      typeof OffscreenCanvas !== \"undefined\"\n    );\n  }\n\n  static get platform() {\n    if (\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      (typeof navigator !== \"undefined\" &&\n        typeof navigator?.platform === \"string\")\n    ) {\n      return shadow(this, \"platform\", {\n        isMac: navigator.platform.includes(\"Mac\"),\n      });\n    }\n    return shadow(this, \"platform\", { isMac: false });\n  }\n\n  static get isCSSRoundSupported() {\n    return shadow(\n      this,\n      \"isCSSRoundSupported\",\n      globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\")\n    );\n  }\n}\n\nconst hexNumbers = Array.from(Array(256).keys(), n =>\n  n.toString(16).padStart(2, \"0\")\n);\n\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n\n  // Apply a scaling matrix to some min/max values.\n  // If a scaling factor is negative then min and max must be\n  // swapped.\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n\n  // Concatenates two transformation matrices together and returns the result.\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n\n  // For 2d affine transforms\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = this.applyTransform(r, m);\n    const p2 = this.applyTransform(r.slice(2, 4), m);\n    const p3 = this.applyTransform([r[0], r[3]], m);\n    const p4 = this.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\n    ];\n  }\n\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  static normalizeRect(rect) {\n    const r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'null'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(\n      Math.min(rect1[0], rect1[2]),\n      Math.min(rect2[0], rect2[2])\n    );\n    const xHigh = Math.min(\n      Math.max(rect1[0], rect1[2]),\n      Math.max(rect2[0], rect2[2])\n    );\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(\n      Math.min(rect1[1], rect1[3]),\n      Math.min(rect2[1], rect2[3])\n    );\n    const yHigh = Math.min(\n      Math.max(rect1[1], rect1[3]),\n      Math.max(rect2[1], rect2[3])\n    );\n    if (yLow > yHigh) {\n      return null;\n    }\n\n    return [xLow, yLow, xHigh, yHigh];\n  }\n\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(\n          x0,\n          x1,\n          x2,\n          x3,\n          y0,\n          y1,\n          y2,\n          y3,\n          -c / b,\n          minMax\n        );\n      }\n      return;\n    }\n\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      (-b + sqrtDelta) / a2,\n      minMax\n    );\n    this.#getExtremumOnCurve(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      (-b - sqrtDelta) / a2,\n      minMax\n    );\n  }\n\n  // From https://github.com/adobe-webplatform/Snap.svg/blob/b365287722a72526000ac4bfcf0ce4cac2faa015/src/path.js#L852\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], x0, x3);\n      minMax[1] = Math.min(minMax[1], y0, y3);\n      minMax[2] = Math.max(minMax[2], x0, x3);\n      minMax[3] = Math.max(minMax[3], y0, y3);\n    } else {\n      minMax = [\n        Math.min(x0, x3),\n        Math.min(y0, y3),\n        Math.max(x0, x3),\n        Math.max(y0, y3),\n      ];\n    }\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-x0 + 3 * (x1 - x2) + x3),\n      6 * (x0 - 2 * x1 + x2),\n      3 * (x1 - x0),\n      minMax\n    );\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-y0 + 3 * (y1 - y2) + y3),\n      6 * (y0 - 2 * y1 + y2),\n      3 * (y1 - y0),\n      minMax\n    );\n    return minMax;\n  }\n}\n\nconst PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8,\n  0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192,\n  0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018,\n  0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d,\n  0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac,\n];\n\nfunction stringToPDFString(str) {\n  // See section 7.9.2.2 Text String Type.\n  // The string can contain some language codes bracketed with 0x0b,\n  // so we must remove them.\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (!decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  // ISO Latin 1\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (charCode === 0x1b) {\n      // eslint-disable-next-line no-empty\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getModificationDate(date = new Date()) {\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, \"0\"),\n    date.getUTCDate().toString().padStart(2, \"0\"),\n    date.getUTCHours().toString().padStart(2, \"0\"),\n    date.getUTCMinutes().toString().padStart(2, \"0\"),\n    date.getUTCSeconds().toString().padStart(2, \"0\"),\n  ];\n\n  return buffer.join(\"\");\n}\n\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    // In order to generate the following regex:\n    //  - create a PDF containing all the chars in the range 0000-FFFF with\n    //    a NFKC which is different of the char.\n    //  - copy and paste all those chars and get the ones where NFKC is\n    //    required.\n    // It appears that most the chars here contain some ligatures.\n    NormalizeRegex =\n      /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"\", \"t\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) =>\n    p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2)\n  );\n}\n\nfunction getUuid() {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    (typeof crypto !== \"undefined\" && typeof crypto?.randomUUID === \"function\")\n  ) {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  if (\n    typeof crypto !== \"undefined\" &&\n    typeof crypto?.getRandomValues === \"function\"\n  ) {\n    crypto.getRandomValues(buf);\n  } else {\n    for (let i = 0; i < 32; i++) {\n      buf[i] = Math.floor(Math.random() * 255);\n    }\n  }\n  return bytesToString(buf);\n}\n\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\n\nconst FontRenderOps = {\n  BEZIER_CURVE_TO: 0,\n  MOVE_TO: 1,\n  LINE_TO: 2,\n  QUADRATIC_CURVE_TO: 3,\n  RESTORE: 4,\n  SAVE: 5,\n  SCALE: 6,\n  TRANSFORM: 7,\n  TRANSLATE: 8,\n};\n\nexport {\n  AbortException,\n  AnnotationActionEventType,\n  AnnotationBorderStyleType,\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationMode,\n  AnnotationPrefix,\n  AnnotationReplyType,\n  AnnotationType,\n  assert,\n  BaseException,\n  BASELINE_FACTOR,\n  bytesToString,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  DocumentActionEventType,\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  FontRenderOps,\n  FormatError,\n  getModificationDate,\n  getUuid,\n  getVerbosityLevel,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  InvalidPDFException,\n  isArrayEqual,\n  isNodeJS,\n  LINE_DESCENT_FACTOR,\n  LINE_FACTOR,\n  MAX_IMAGE_SIZE_TO_CACHE,\n  MissingPDFException,\n  normalizeUnicode,\n  objectFromMap,\n  objectSize,\n  OPS,\n  PageActionEventType,\n  PasswordException,\n  PasswordResponses,\n  PermissionFlag,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF8String,\n  TextRenderingMode,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  utf8StringToString,\n  Util,\n  VerbosityLevel,\n  warn,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(228);\n",""],"mappings":"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E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,KAAK,CAC7E,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC7E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC5E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC5E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC5E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,MAAM,CAAE,MAAM,CAAE,MAAM,CAAE,MAAM,CAAE,MAAM,CAAE,MAAM,CAAE,KAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}