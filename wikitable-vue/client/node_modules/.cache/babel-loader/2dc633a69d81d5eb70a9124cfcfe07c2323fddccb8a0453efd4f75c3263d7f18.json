{"ast":null,"code":"import _toSetter from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/toSetter.js\";import _defineProperty from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classPrivateGetter from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateGetter.js\";import _classPrivateMethodInitSpec from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";import _classPrivateFieldInitSpec from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";import _assertClassBrand from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/assertClassBrand.js\";import _classPrivateFieldSet from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";import _classPrivateFieldGet from\"/Users/wakouboy/Documents/Projects/paper-ref/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.array-buffer.detached.js\";import\"core-js/modules/es.array-buffer.transfer.js\";import\"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";import\"core-js/modules/es.promise.with-resolvers.js\";import\"core-js/modules/es.set.difference.v2.js\";import\"core-js/modules/es.set.intersection.v2.js\";import\"core-js/modules/es.set.is-disjoint-from.v2.js\";import\"core-js/modules/es.set.is-subset-of.v2.js\";import\"core-js/modules/es.set.is-superset-of.v2.js\";import\"core-js/modules/es.set.symmetric-difference.v2.js\";import\"core-js/modules/es.set.union.v2.js\";import\"core-js/modules/es.typed-array.to-reversed.js\";import\"core-js/modules/es.typed-array.to-sorted.js\";import\"core-js/modules/es.typed-array.with.js\";import\"core-js/modules/web.dom-exception.stack.js\";import\"core-js/modules/web.structured-clone.js\";import\"core-js/modules/web.url-search-params.delete.js\";import\"core-js/modules/web.url-search-params.has.js\";import\"core-js/modules/web.url-search-params.size.js\";/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */ /******/var __webpack_modules__={/***/976:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{// EXPORTS\n__webpack_require__.d(__webpack_exports__,{AnnotationLayer:()=>(/* binding */AnnotationLayer),FreeTextAnnotationElement:()=>(/* binding */FreeTextAnnotationElement),InkAnnotationElement:()=>(/* binding */InkAnnotationElement),StampAnnotationElement:()=>(/* binding */StampAnnotationElement)});// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);// EXTERNAL MODULE: ./src/display/annotation_storage.js\nvar annotation_storage=__webpack_require__(792);;// CONCATENATED MODULE: ./src/shared/scripting_utils.js\nfunction makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,\"0\");}function scaleAndClamp(x){return Math.max(0,Math.min(255,255*x));}class ColorConverters{static CMYK_G([c,y,m,k]){return[\"G\",1-Math.min(1,0.3*c+0.59*m+0.11*y+k)];}static G_CMYK([g]){return[\"CMYK\",0,0,0,1-g];}static G_RGB([g]){return[\"RGB\",g,g,g];}static G_rgb([g]){g=scaleAndClamp(g);return[g,g,g];}static G_HTML([g]){const G=makeColorComp(g);return`#${G}${G}${G}`;}static RGB_G([r,g,b]){return[\"G\",0.3*r+0.59*g+0.11*b];}static RGB_rgb(color){return color.map(scaleAndClamp);}static RGB_HTML(color){return`#${color.map(makeColorComp).join(\"\")}`;}static T_HTML(){return\"#00000000\";}static T_rgb(){return[null];}static CMYK_RGB([c,y,m,k]){return[\"RGB\",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)];}static CMYK_rgb([c,y,m,k]){return[scaleAndClamp(1-Math.min(1,c+k)),scaleAndClamp(1-Math.min(1,m+k)),scaleAndClamp(1-Math.min(1,y+k))];}static CMYK_HTML(components){const rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb);}static RGB_CMYK([r,g,b]){const c=1-r;const m=1-g;const y=1-b;const k=Math.min(c,m,y);return[\"CMYK\",c,m,y,k];}}// EXTERNAL MODULE: ./src/display/xfa_layer.js\nvar xfa_layer=__webpack_require__(284);;// CONCATENATED MODULE: ./src/display/annotation_layer.js\nconst DEFAULT_TAB_INDEX=1000;const DEFAULT_FONT_SIZE=9;const GetElementsByNameSet=new WeakSet();function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]};}class AnnotationElementFactory{static create(parameters){const subtype=parameters.data.annotationType;switch(subtype){case util.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case util.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case util.AnnotationType.WIDGET:const fieldType=parameters.data.fieldType;switch(fieldType){case\"Tx\":return new TextWidgetAnnotationElement(parameters);case\"Btn\":if(parameters.data.radioButton){return new RadioButtonWidgetAnnotationElement(parameters);}else if(parameters.data.checkBox){return new CheckboxWidgetAnnotationElement(parameters);}return new PushButtonWidgetAnnotationElement(parameters);case\"Ch\":return new ChoiceWidgetAnnotationElement(parameters);case\"Sig\":return new SignatureWidgetAnnotationElement(parameters);}return new WidgetAnnotationElement(parameters);case util.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case util.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case util.AnnotationType.LINE:return new LineAnnotationElement(parameters);case util.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case util.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case util.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case util.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case util.AnnotationType.INK:return new InkAnnotationElement(parameters);case util.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case util.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case util.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case util.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case util.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case util.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case util.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters);}}}var _updates=/*#__PURE__*/new WeakMap();var _hasBorder=/*#__PURE__*/new WeakMap();var _AnnotationElement_brand=/*#__PURE__*/new WeakSet();class AnnotationElement{constructor(parameters,{isRenderable=false,ignoreBorder=false,createQuadrilaterals=false}={}){_classPrivateMethodInitSpec(this,_AnnotationElement_brand);_classPrivateFieldInitSpec(this,_updates,null);_classPrivateFieldInitSpec(this,_hasBorder,false);this.isRenderable=isRenderable;this.data=parameters.data;this.layer=parameters.layer;this.linkService=parameters.linkService;this.downloadManager=parameters.downloadManager;this.imageResourcesPath=parameters.imageResourcesPath;this.renderForms=parameters.renderForms;this.svgFactory=parameters.svgFactory;this.annotationStorage=parameters.annotationStorage;this.enableScripting=parameters.enableScripting;this.hasJSActions=parameters.hasJSActions;this._fieldObjects=parameters.fieldObjects;this.parent=parameters.parent;if(isRenderable){this.container=this._createContainer(ignoreBorder);}if(createQuadrilaterals){this._createQuadrilaterals();}}static _hasPopupData({titleObj,contentsObj,richText}){return!!(titleObj?.str||contentsObj?.str||richText?.str);}get hasPopupData(){return AnnotationElement._hasPopupData(this.data);}updateEdited(params){if(!this.container){return;}_classPrivateFieldGet(_updates,this)||_classPrivateFieldSet(_updates,this,{rect:this.data.rect.slice(0)});const{rect}=params;if(rect){_assertClassBrand(_AnnotationElement_brand,this,_setRectEdited).call(this,rect);}}resetEdited(){if(!_classPrivateFieldGet(_updates,this)){return;}_assertClassBrand(_AnnotationElement_brand,this,_setRectEdited).call(this,_classPrivateFieldGet(_updates,this).rect);_classPrivateFieldSet(_updates,this,null);}_createContainer(ignoreBorder){const{data,parent:{page,viewport}}=this;const container=document.createElement(\"section\");container.setAttribute(\"data-annotation-id\",data.id);if(!(this instanceof WidgetAnnotationElement)){container.tabIndex=DEFAULT_TAB_INDEX;}const{style}=container;style.zIndex=this.parent.zIndex++;if(data.popupRef){container.setAttribute(\"aria-haspopup\",\"dialog\");}if(data.alternativeText){container.title=data.alternativeText;}if(data.noRotate){container.classList.add(\"norotate\");}if(!data.rect||this instanceof PopupAnnotationElement){const{rotation}=data;if(!data.hasOwnCanvas&&rotation!==0){this.setRotation(rotation,container);}return container;}const{width,height}=getRectDims(data.rect);if(!ignoreBorder&&data.borderStyle.width>0){style.borderWidth=`${data.borderStyle.width}px`;const horizontalRadius=data.borderStyle.horizontalCornerRadius;const verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){const radius=`calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;style.borderRadius=radius;}else if(this instanceof RadioButtonWidgetAnnotationElement){const radius=`calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;style.borderRadius=radius;}switch(data.borderStyle.style){case util.AnnotationBorderStyleType.SOLID:style.borderStyle=\"solid\";break;case util.AnnotationBorderStyleType.DASHED:style.borderStyle=\"dashed\";break;case util.AnnotationBorderStyleType.BEVELED:(0,util.warn)(\"Unimplemented border style: beveled\");break;case util.AnnotationBorderStyleType.INSET:(0,util.warn)(\"Unimplemented border style: inset\");break;case util.AnnotationBorderStyleType.UNDERLINE:style.borderBottomStyle=\"solid\";break;default:break;}const borderColor=data.borderColor||null;if(borderColor){_classPrivateFieldSet(_hasBorder,this,true);style.borderColor=util.Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0);}else{style.borderWidth=0;}}const rect=util.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);const{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;style.left=`${100*(rect[0]-pageX)/pageWidth}%`;style.top=`${100*(rect[1]-pageY)/pageHeight}%`;const{rotation}=data;if(data.hasOwnCanvas||rotation===0){style.width=`${100*width/pageWidth}%`;style.height=`${100*height/pageHeight}%`;}else{this.setRotation(rotation,container);}return container;}setRotation(angle,container=this.container){if(!this.data.rect){return;}const{pageWidth,pageHeight}=this.parent.viewport.rawDims;const{width,height}=getRectDims(this.data.rect);let elementWidth,elementHeight;if(angle%180===0){elementWidth=100*width/pageWidth;elementHeight=100*height/pageHeight;}else{elementWidth=100*height/pageWidth;elementHeight=100*width/pageHeight;}container.style.width=`${elementWidth}%`;container.style.height=`${elementHeight}%`;container.setAttribute(\"data-main-rotation\",(360-angle)%360);}get _commonActions(){const setColor=(jsName,styleName,event)=>{const color=event.detail[jsName];const colorType=color[0];const colorArray=color.slice(1);event.target.style[styleName]=ColorConverters[`${colorType}_HTML`](colorArray);this.annotationStorage.setValue(this.data.id,{[styleName]:ColorConverters[`${colorType}_rgb`](colorArray)});};return(0,util.shadow)(this,\"_commonActions\",{display:event=>{const{display}=event.detail;const hidden=display%2===1;this.container.style.visibility=hidden?\"hidden\":\"visible\";this.annotationStorage.setValue(this.data.id,{noView:hidden,noPrint:display===1||display===2});},print:event=>{this.annotationStorage.setValue(this.data.id,{noPrint:!event.detail.print});},hidden:event=>{const{hidden}=event.detail;this.container.style.visibility=hidden?\"hidden\":\"visible\";this.annotationStorage.setValue(this.data.id,{noPrint:hidden,noView:hidden});},focus:event=>{setTimeout(()=>event.target.focus({preventScroll:false}),0);},userName:event=>{event.target.title=event.detail.userName;},readonly:event=>{event.target.disabled=event.detail.readonly;},required:event=>{this._setRequired(event.target,event.detail.required);},bgColor:event=>{setColor(\"bgColor\",\"backgroundColor\",event);},fillColor:event=>{setColor(\"fillColor\",\"backgroundColor\",event);},fgColor:event=>{setColor(\"fgColor\",\"color\",event);},textColor:event=>{setColor(\"textColor\",\"color\",event);},borderColor:event=>{setColor(\"borderColor\",\"borderColor\",event);},strokeColor:event=>{setColor(\"strokeColor\",\"borderColor\",event);},rotation:event=>{const angle=event.detail.rotation;this.setRotation(angle);this.annotationStorage.setValue(this.data.id,{rotation:angle});}});}_dispatchEventFromSandbox(actions,jsEvent){const commonActions=this._commonActions;for(const name of Object.keys(jsEvent.detail)){const action=actions[name]||commonActions[name];action?.(jsEvent);}}_setDefaultPropertiesFromJS(element){if(!this.enableScripting){return;}const storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData){return;}const commonActions=this._commonActions;for(const[actionName,detail]of Object.entries(storedData)){const action=commonActions[actionName];if(action){const eventProxy={detail:{[actionName]:detail},target:element};action(eventProxy);delete storedData[actionName];}}}_createQuadrilaterals(){if(!this.container){return;}const{quadPoints}=this.data;if(!quadPoints){return;}const[rectBlX,rectBlY,rectTrX,rectTrY]=this.data.rect;if(quadPoints.length===1){const[,{x:trX,y:trY},{x:blX,y:blY}]=quadPoints[0];if(rectTrX===trX&&rectTrY===trY&&rectBlX===blX&&rectBlY===blY){return;}}const{style}=this.container;let svgBuffer;if(_classPrivateFieldGet(_hasBorder,this)){const{borderColor,borderWidth}=style;style.borderWidth=0;svgBuffer=[\"url('data:image/svg+xml;utf8,\",`<svg xmlns=\"http://www.w3.org/2000/svg\"`,` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`,`<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];this.container.classList.add(\"hasBorder\");}const width=rectTrX-rectBlX;const height=rectTrY-rectBlY;const{svgFactory}=this;const svg=svgFactory.createElement(\"svg\");svg.classList.add(\"quadrilateralsContainer\");svg.setAttribute(\"width\",0);svg.setAttribute(\"height\",0);const defs=svgFactory.createElement(\"defs\");svg.append(defs);const clipPath=svgFactory.createElement(\"clipPath\");const id=`clippath_${this.data.id}`;clipPath.setAttribute(\"id\",id);clipPath.setAttribute(\"clipPathUnits\",\"objectBoundingBox\");defs.append(clipPath);for(const[,{x:trX,y:trY},{x:blX,y:blY}]of quadPoints){const rect=svgFactory.createElement(\"rect\");const x=(blX-rectBlX)/width;const y=(rectTrY-trY)/height;const rectWidth=(trX-blX)/width;const rectHeight=(trY-blY)/height;rect.setAttribute(\"x\",x);rect.setAttribute(\"y\",y);rect.setAttribute(\"width\",rectWidth);rect.setAttribute(\"height\",rectHeight);clipPath.append(rect);svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);}if(_classPrivateFieldGet(_hasBorder,this)){svgBuffer.push(`</g></svg>')`);style.backgroundImage=svgBuffer.join(\"\");}this.container.append(svg);this.container.style.clipPath=`url(#${id})`;}_createPopup(){const{container,data}=this;container.setAttribute(\"aria-haspopup\",\"dialog\");const popup=new PopupAnnotationElement({data:{color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,parentRect:data.rect,borderStyle:0,id:`popup_${data.id}`,rotation:data.rotation},parent:this.parent,elements:[this]});this.parent.div.append(popup.render());}render(){(0,util.unreachable)(\"Abstract method `AnnotationElement.render` called\");}_getElementsByName(name,skipId=null){const fields=[];if(this._fieldObjects){const fieldObj=this._fieldObjects[name];if(fieldObj){for(const{page,id,exportValues}of fieldObj){if(page===-1){continue;}if(id===skipId){continue;}const exportValue=typeof exportValues===\"string\"?exportValues:null;const domElement=document.querySelector(`[data-element-id=\"${id}\"]`);if(domElement&&!GetElementsByNameSet.has(domElement)){(0,util.warn)(`_getElementsByName - element not allowed: ${id}`);continue;}fields.push({id,exportValue,domElement});}}return fields;}for(const domElement of document.getElementsByName(name)){const{exportValue}=domElement;const id=domElement.getAttribute(\"data-element-id\");if(id===skipId){continue;}if(!GetElementsByNameSet.has(domElement)){continue;}fields.push({id,exportValue,domElement});}return fields;}show(){if(this.container){this.container.hidden=false;}this.popup?.maybeShow();}hide(){if(this.container){this.container.hidden=true;}this.popup?.forceHide();}getElementsToTriggerPopup(){return this.container;}addHighlightArea(){const triggers=this.getElementsToTriggerPopup();if(Array.isArray(triggers)){for(const element of triggers){element.classList.add(\"highlightArea\");}}else{triggers.classList.add(\"highlightArea\");}}get _isEditable(){return false;}_editOnDoubleClick(){if(!this._isEditable){return;}const{annotationEditorType:mode,data:{id:editId}}=this;this.container.addEventListener(\"dblclick\",()=>{this.linkService.eventBus?.dispatch(\"switchannotationeditormode\",{source:this,mode,editId});});}}function _setRectEdited(rect){const{container:{style},data:{rect:currentRect,rotation},parent:{viewport:{rawDims:{pageWidth,pageHeight,pageX,pageY}}}}=this;currentRect?.splice(0,4,...rect);const{width,height}=getRectDims(rect);style.left=`${100*(rect[0]-pageX)/pageWidth}%`;style.top=`${100*(pageHeight-rect[3]+pageY)/pageHeight}%`;if(rotation===0){style.width=`${100*width/pageWidth}%`;style.height=`${100*height/pageHeight}%`;}else{this.setRotation(rotation);}}var _LinkAnnotationElement_brand=/*#__PURE__*/new WeakSet();class LinkAnnotationElement extends AnnotationElement{constructor(parameters,options=null){super(parameters,{isRenderable:true,ignoreBorder:!!options?.ignoreBorder,createQuadrilaterals:true});_classPrivateMethodInitSpec(this,_LinkAnnotationElement_brand);this.isTooltipOnly=parameters.data.isTooltipOnly;}render(){const{data,linkService}=this;const link=document.createElement(\"a\");link.setAttribute(\"data-element-id\",data.id);let isBound=false;if(data.url){linkService.addLinkAttributes(link,data.url,data.newWindow);isBound=true;}else if(data.action){this._bindNamedAction(link,data.action);isBound=true;}else if(data.attachment){_assertClassBrand(_LinkAnnotationElement_brand,this,_bindAttachment).call(this,link,data.attachment,data.attachmentDest);isBound=true;}else if(data.setOCGState){_assertClassBrand(_LinkAnnotationElement_brand,this,_bindSetOCGState).call(this,link,data.setOCGState);isBound=true;}else if(data.dest){this._bindLink(link,data.dest);isBound=true;}else{if(data.actions&&(data.actions.Action||data.actions[\"Mouse Up\"]||data.actions[\"Mouse Down\"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(link,data);isBound=true;}if(data.resetForm){this._bindResetFormAction(link,data.resetForm);isBound=true;}else if(this.isTooltipOnly&&!isBound){this._bindLink(link,\"\");isBound=true;}}this.container.classList.add(\"linkAnnotation\");if(isBound){this.container.append(link);}return this.container;}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination);link.onclick=()=>{if(destination){this.linkService.goToDestination(destination);}return false;};if(destination||destination===\"\"){_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.linkService.executeNamedAction(action);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}_bindJSAction(link,data){link.href=this.linkService.getAnchorUrl(\"\");const map=new Map([[\"Action\",\"onclick\"],[\"Mouse Up\",\"onmouseup\"],[\"Mouse Down\",\"onmousedown\"]]);for(const name of Object.keys(data.actions)){const jsName=map.get(name);if(!jsName){continue;}link[jsName]=()=>{this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:data.id,name}});return false;};}if(!link.onclick){link.onclick=()=>false;}_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}_bindResetFormAction(link,resetForm){const otherClickAction=link.onclick;if(!otherClickAction){link.href=this.linkService.getAnchorUrl(\"\");}_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);if(!this._fieldObjects){(0,util.warn)(`_bindResetFormAction - \"resetForm\" action not supported, `+\"ensure that the `fieldObjects` parameter is provided.\");if(!otherClickAction){link.onclick=()=>false;}return;}link.onclick=()=>{otherClickAction?.();const{fields:resetFormFields,refs:resetFormRefs,include}=resetForm;const allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){const fieldIds=new Set(resetFormRefs);for(const fieldName of resetFormFields){const fields=this._fieldObjects[fieldName]||[];for(const{id}of fields){fieldIds.add(id);}}for(const fields of Object.values(this._fieldObjects)){for(const field of fields){if(fieldIds.has(field.id)===include){allFields.push(field);}}}}else{for(const fields of Object.values(this._fieldObjects)){allFields.push(...fields);}}const storage=this.annotationStorage;const allIds=[];for(const field of allFields){const{id}=field;allIds.push(id);switch(field.type){case\"text\":{const value=field.defaultValue||\"\";storage.setValue(id,{value});break;}case\"checkbox\":case\"radiobutton\":{const value=field.defaultValue===field.exportValues;storage.setValue(id,{value});break;}case\"combobox\":case\"listbox\":{const value=field.defaultValue||\"\";storage.setValue(id,{value});break;}default:continue;}const domElement=document.querySelector(`[data-element-id=\"${id}\"]`);if(!domElement){continue;}else if(!GetElementsByNameSet.has(domElement)){(0,util.warn)(`_bindResetFormAction - element not allowed: ${id}`);continue;}domElement.dispatchEvent(new Event(\"resetform\"));}if(this.enableScripting){this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:\"app\",ids:allIds,name:\"ResetForm\"}});}return false;};}}function _setInternalLink(){this.container.setAttribute(\"data-internal-link\",\"\");}function _bindAttachment(link,attachment,dest=null){link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.downloadManager?.openOrDownloadData(attachment.content,attachment.filename,dest);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}function _bindSetOCGState(link,action){link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.linkService.executeSetOCGState(action);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}class TextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true});}render(){this.container.classList.add(\"textAnnotation\");const image=document.createElement(\"img\");image.src=this.imageResourcesPath+\"annotation-\"+this.data.name.toLowerCase()+\".svg\";image.setAttribute(\"data-l10n-id\",\"pdfjs-text-annotation-type\");image.setAttribute(\"data-l10n-args\",JSON.stringify({type:this.data.name}));if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.append(image);return this.container;}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container;}showElementAndHideCanvas(element){if(this.data.hasOwnCanvas){if(element.previousSibling?.nodeName===\"CANVAS\"){element.previousSibling.hidden=true;}element.hidden=false;}}_getKeyModifier(event){return util.FeatureTest.platform.isMac?event.metaKey:event.ctrlKey;}_setEventListener(element,elementData,baseName,eventName,valueGetter){if(baseName.includes(\"mouse\")){element.addEventListener(baseName,event=>{this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:this._getKeyModifier(event)}});});}else{element.addEventListener(baseName,event=>{if(baseName===\"blur\"){if(!elementData.focused||!event.relatedTarget){return;}elementData.focused=false;}else if(baseName===\"focus\"){if(elementData.focused){return;}elementData.focused=true;}if(!valueGetter){return;}this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event)}});});}}_setEventListeners(element,elementData,names,getter){for(const[baseName,eventName]of names){if(eventName===\"Action\"||this.data.actions?.[eventName]){if(eventName===\"Focus\"||eventName===\"Blur\"){elementData||={focused:false};}this._setEventListener(element,elementData,baseName,eventName,getter);if(eventName===\"Focus\"&&!this.data.actions?.Blur){this._setEventListener(element,elementData,\"blur\",\"Blur\",null);}else if(eventName===\"Blur\"&&!this.data.actions?.Focus){this._setEventListener(element,elementData,\"focus\",\"Focus\",null);}}}}_setBackgroundColor(element){const color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?\"transparent\":util.Util.makeHexColor(color[0],color[1],color[2]);}_setTextStyle(element){const TEXT_ALIGNMENT=[\"left\",\"center\",\"right\"];const{fontColor}=this.data.defaultAppearanceData;const fontSize=this.data.defaultAppearanceData.fontSize||DEFAULT_FONT_SIZE;const style=element.style;let computedFontSize;const BORDER_SIZE=2;const roundToOneDecimal=x=>Math.round(10*x)/10;if(this.data.multiLine){const height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);const numberOfLines=Math.round(height/(util.LINE_FACTOR*fontSize))||1;const lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,roundToOneDecimal(lineHeight/util.LINE_FACTOR));}else{const height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);computedFontSize=Math.min(fontSize,roundToOneDecimal(height/util.LINE_FACTOR));}style.fontSize=`calc(${computedFontSize}px * var(--scale-factor))`;style.color=util.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]);if(this.data.textAlignment!==null){style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment];}}_setRequired(element,isRequired){if(isRequired){element.setAttribute(\"required\",true);}else{element.removeAttribute(\"required\");}element.setAttribute(\"aria-required\",isRequired);}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){const isRenderable=parameters.renderForms||parameters.data.hasOwnCanvas||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;super(parameters,{isRenderable});}setPropertyOnSiblings(base,key,value,keyInStorage){const storage=this.annotationStorage;for(const element of this._getElementsByName(base.name,base.id)){if(element.domElement){element.domElement[key]=value;}storage.setValue(element.id,{[keyInStorage]:value});}}render(){const storage=this.annotationStorage;const id=this.data.id;this.container.classList.add(\"textWidgetAnnotation\");let element=null;if(this.renderForms){const storedData=storage.getValue(id,{value:this.data.fieldValue});let textContent=storedData.value||\"\";const maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;if(maxLen&&textContent.length>maxLen){textContent=textContent.slice(0,maxLen);}let fieldFormattedValues=storedData.formattedValue||this.data.textContent?.join(\"\\n\")||null;if(fieldFormattedValues&&this.data.comb){fieldFormattedValues=fieldFormattedValues.replaceAll(/\\s+/g,\"\");}const elementData={userValue:textContent,formattedValue:fieldFormattedValues,lastCommittedValue:null,commitKey:1,focused:false};if(this.data.multiLine){element=document.createElement(\"textarea\");element.textContent=fieldFormattedValues??textContent;if(this.data.doNotScroll){element.style.overflowY=\"hidden\";}}else{element=document.createElement(\"input\");element.type=\"text\";element.setAttribute(\"value\",fieldFormattedValues??textContent);if(this.data.doNotScroll){element.style.overflowX=\"hidden\";}}if(this.data.hasOwnCanvas){element.hidden=true;}GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=this.data.readOnly;element.name=this.data.fieldName;element.tabIndex=DEFAULT_TAB_INDEX;this._setRequired(element,this.data.required);if(maxLen){element.maxLength=maxLen;}element.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});this.setPropertyOnSiblings(element,\"value\",event.target.value,\"value\");elementData.formattedValue=null;});element.addEventListener(\"resetform\",event=>{const defaultValue=this.data.defaultFieldValue??\"\";element.value=elementData.userValue=defaultValue;elementData.formattedValue=null;});let blurListener=event=>{const{formattedValue}=elementData;if(formattedValue!==null&&formattedValue!==undefined){event.target.value=formattedValue;}event.target.scrollLeft=0;};if(this.enableScripting&&this.hasJSActions){element.addEventListener(\"focus\",event=>{if(elementData.focused){return;}const{target}=event;if(elementData.userValue){target.value=elementData.userValue;}elementData.lastCommittedValue=target.value;elementData.commitKey=1;if(!this.data.actions?.Focus){elementData.focused=true;}});element.addEventListener(\"updatefromsandbox\",jsEvent=>{this.showElementAndHideCanvas(jsEvent.target);const actions={value(event){elementData.userValue=event.detail.value??\"\";storage.setValue(id,{value:elementData.userValue.toString()});event.target.value=elementData.userValue;},formattedValue(event){const{formattedValue}=event.detail;elementData.formattedValue=formattedValue;if(formattedValue!==null&&formattedValue!==undefined&&event.target!==document.activeElement){event.target.value=formattedValue;}storage.setValue(id,{formattedValue});},selRange(event){event.target.setSelectionRange(...event.detail.selRange);},charLimit:event=>{const{charLimit}=event.detail;const{target}=event;if(charLimit===0){target.removeAttribute(\"maxLength\");return;}target.setAttribute(\"maxLength\",charLimit);let value=elementData.userValue;if(!value||value.length<=charLimit){return;}value=value.slice(0,charLimit);target.value=elementData.userValue=value;storage.setValue(id,{value});this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}});}};this._dispatchEventFromSandbox(actions,jsEvent);});element.addEventListener(\"keydown\",event=>{elementData.commitKey=1;let commitKey=-1;if(event.key===\"Escape\"){commitKey=0;}else if(event.key===\"Enter\"&&!this.data.multiLine){commitKey=2;}else if(event.key===\"Tab\"){elementData.commitKey=3;}if(commitKey===-1){return;}const{value}=event.target;if(elementData.lastCommittedValue===value){return;}elementData.lastCommittedValue=value;elementData.userValue=value;this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});});const _blurListener=blurListener;blurListener=null;element.addEventListener(\"blur\",event=>{if(!elementData.focused||!event.relatedTarget){return;}if(!this.data.actions?.Blur){elementData.focused=false;}const{value}=event.target;elementData.userValue=value;if(elementData.lastCommittedValue!==value){this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey:elementData.commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});}_blurListener(event);});if(this.data.actions?.Keystroke){element.addEventListener(\"beforeinput\",event=>{elementData.lastCommittedValue=null;const{data,target}=event;const{value,selectionStart,selectionEnd}=target;let selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case\"deleteWordBackward\":{const match=value.substring(0,selectionStart).match(/\\w*[^\\w]*$/);if(match){selStart-=match[0].length;}break;}case\"deleteWordForward\":{const match=value.substring(selectionStart).match(/^[^\\w]*\\w*/);if(match){selEnd+=match[0].length;}break;}case\"deleteContentBackward\":if(selectionStart===selectionEnd){selStart-=1;}break;case\"deleteContentForward\":if(selectionStart===selectionEnd){selEnd+=1;}break;}event.preventDefault();this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,change:data||\"\",willCommit:false,selStart,selEnd}});});}this._setEventListeners(element,elementData,[[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.value);}if(blurListener){element.addEventListener(\"blur\",blurListener);}if(this.data.comb){const fieldWidth=this.data.rect[2]-this.data.rect[0];const combWidth=fieldWidth/maxLen;element.classList.add(\"comb\");element.style.letterSpacing=`calc(${combWidth}px * var(--scale-factor) - 1ch)`;}}else{element=document.createElement(\"div\");element.textContent=this.data.fieldValue;element.style.verticalAlign=\"middle\";element.style.display=\"table-cell\";if(this.data.hasOwnCanvas){element.hidden=true;}}this._setTextStyle(element);this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!parameters.data.hasOwnCanvas});}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){const storage=this.annotationStorage;const data=this.data;const id=data.id;let value=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;if(typeof value===\"string\"){value=value!==\"Off\";storage.setValue(id,{value});}this.container.classList.add(\"buttonWidgetAnnotation\",\"checkBox\");const element=document.createElement(\"input\");GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type=\"checkbox\";element.name=data.fieldName;if(value){element.setAttribute(\"checked\",true);}element.setAttribute(\"exportValue\",data.exportValue);element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener(\"change\",event=>{const{name,checked}=event.target;for(const checkbox of this._getElementsByName(name,id)){const curChecked=checked&&checkbox.exportValue===data.exportValue;if(checkbox.domElement){checkbox.domElement.checked=curChecked;}storage.setValue(checkbox.id,{value:curChecked});}storage.setValue(id,{value:checked});});element.addEventListener(\"resetform\",event=>{const defaultValue=data.defaultFieldValue||\"Off\";event.target.checked=defaultValue===data.exportValue;});if(this.enableScripting&&this.hasJSActions){element.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value(event){event.target.checked=event.detail.value!==\"Off\";storage.setValue(id,{value:event.target.checked});}};this._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,null,[[\"change\",\"Validate\"],[\"change\",\"Action\"],[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.checked);}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){this.container.classList.add(\"buttonWidgetAnnotation\",\"radioButton\");const storage=this.annotationStorage;const data=this.data;const id=data.id;let value=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;if(typeof value===\"string\"){value=value!==data.buttonValue;storage.setValue(id,{value});}if(value){for(const radio of this._getElementsByName(data.fieldName,id)){storage.setValue(radio.id,{value:false});}}const element=document.createElement(\"input\");GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type=\"radio\";element.name=data.fieldName;if(value){element.setAttribute(\"checked\",true);}element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener(\"change\",event=>{const{name,checked}=event.target;for(const radio of this._getElementsByName(name,id)){storage.setValue(radio.id,{value:false});}storage.setValue(id,{value:checked});});element.addEventListener(\"resetform\",event=>{const defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!==null&&defaultValue!==undefined&&defaultValue===data.buttonValue;});if(this.enableScripting&&this.hasJSActions){const pdfButtonValue=data.buttonValue;element.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value:event=>{const checked=pdfButtonValue===event.detail.value;for(const radio of this._getElementsByName(event.target.name)){const curChecked=checked&&radio.id===id;if(radio.domElement){radio.domElement.checked=curChecked;}storage.setValue(radio.id,{value:curChecked});}}};this._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,null,[[\"change\",\"Validate\"],[\"change\",\"Action\"],[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.checked);}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(parameters){super(parameters,{ignoreBorder:parameters.data.hasAppearance});}render(){const container=super.render();container.classList.add(\"buttonWidgetAnnotation\",\"pushButton\");const linkElement=container.lastChild;if(this.enableScripting&&this.hasJSActions&&linkElement){this._setDefaultPropertiesFromJS(linkElement);linkElement.addEventListener(\"updatefromsandbox\",jsEvent=>{this._dispatchEventFromSandbox({},jsEvent);});}return container;}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){this.container.classList.add(\"choiceWidgetAnnotation\");const storage=this.annotationStorage;const id=this.data.id;const storedData=storage.getValue(id,{value:this.data.fieldValue});const selectElement=document.createElement(\"select\");GetElementsByNameSet.add(selectElement);selectElement.setAttribute(\"data-element-id\",id);selectElement.disabled=this.data.readOnly;this._setRequired(selectElement,this.data.required);selectElement.name=this.data.fieldName;selectElement.tabIndex=DEFAULT_TAB_INDEX;let addAnEmptyEntry=this.data.combo&&this.data.options.length>0;if(!this.data.combo){selectElement.size=this.data.options.length;if(this.data.multiSelect){selectElement.multiple=true;}}selectElement.addEventListener(\"resetform\",event=>{const defaultValue=this.data.defaultFieldValue;for(const option of selectElement.options){option.selected=option.value===defaultValue;}});for(const option of this.data.options){const optionElement=document.createElement(\"option\");optionElement.textContent=option.displayValue;optionElement.value=option.exportValue;if(storedData.value.includes(option.exportValue)){optionElement.setAttribute(\"selected\",true);addAnEmptyEntry=false;}selectElement.append(optionElement);}let removeEmptyEntry=null;if(addAnEmptyEntry){const noneOptionElement=document.createElement(\"option\");noneOptionElement.value=\" \";noneOptionElement.setAttribute(\"hidden\",true);noneOptionElement.setAttribute(\"selected\",true);selectElement.prepend(noneOptionElement);removeEmptyEntry=()=>{noneOptionElement.remove();selectElement.removeEventListener(\"input\",removeEmptyEntry);removeEmptyEntry=null;};selectElement.addEventListener(\"input\",removeEmptyEntry);}const getValue=isExport=>{const name=isExport?\"value\":\"textContent\";const{options,multiple}=selectElement;if(!multiple){return options.selectedIndex===-1?null:options[options.selectedIndex][name];}return Array.prototype.filter.call(options,option=>option.selected).map(option=>option[name]);};let selectedValues=getValue(false);const getItems=event=>{const options=event.target.options;return Array.prototype.map.call(options,option=>({displayValue:option.textContent,exportValue:option.value}));};if(this.enableScripting&&this.hasJSActions){selectElement.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value(event){removeEmptyEntry?.();const value=event.detail.value;const values=new Set(Array.isArray(value)?value:[value]);for(const option of selectElement.options){option.selected=values.has(option.value);}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);},multipleSelection(event){selectElement.multiple=true;},remove(event){const options=selectElement.options;const index=event.detail.remove;options[index].selected=false;selectElement.remove(index);if(options.length>0){const i=Array.prototype.findIndex.call(options,option=>option.selected);if(i===-1){options[0].selected=true;}}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},clear(event){while(selectElement.length!==0){selectElement.remove(0);}storage.setValue(id,{value:null,items:[]});selectedValues=getValue(false);},insert(event){const{index,displayValue,exportValue}=event.detail.insert;const selectChild=selectElement.children[index];const optionElement=document.createElement(\"option\");optionElement.textContent=displayValue;optionElement.value=exportValue;if(selectChild){selectChild.before(optionElement);}else{selectElement.append(optionElement);}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},items(event){const{items}=event.detail;while(selectElement.length!==0){selectElement.remove(0);}for(const item of items){const{displayValue,exportValue}=item;const optionElement=document.createElement(\"option\");optionElement.textContent=displayValue;optionElement.value=exportValue;selectElement.append(optionElement);}if(selectElement.options.length>0){selectElement.options[0].selected=true;}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},indices(event){const indices=new Set(event.detail.indices);for(const option of event.target.options){option.selected=indices.has(option.index);}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);},editable(event){event.target.disabled=!event.detail.editable;}};this._dispatchEventFromSandbox(actions,jsEvent);});selectElement.addEventListener(\"input\",event=>{const exportValue=getValue(true);const change=getValue(false);storage.setValue(id,{value:exportValue});event.preventDefault();this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value:selectedValues,change,changeEx:exportValue,willCommit:false,commitKey:1,keyDown:false}});});this._setEventListeners(selectElement,null,[[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"],[\"input\",\"Action\"],[\"input\",\"Validate\"]],event=>event.target.value);}else{selectElement.addEventListener(\"input\",function(event){storage.setValue(id,{value:getValue(true)});});}if(this.data.combo){this._setTextStyle(selectElement);}else{}this._setBackgroundColor(selectElement);this._setDefaultPropertiesFromJS(selectElement);this.container.append(selectElement);return this.container;}}class PopupAnnotationElement extends AnnotationElement{constructor(parameters){const{data,elements}=parameters;super(parameters,{isRenderable:AnnotationElement._hasPopupData(data)});this.elements=elements;}render(){this.container.classList.add(\"popupAnnotation\");const popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open});const elementIds=[];for(const element of this.elements){element.popup=popup;elementIds.push(element.data.id);element.addHighlightArea();}this.container.setAttribute(\"aria-controls\",elementIds.map(id=>`${util.AnnotationPrefix}${id}`).join(\",\"));return this.container;}}var _boundKeyDown=/*#__PURE__*/new WeakMap();var _boundHide=/*#__PURE__*/new WeakMap();var _boundShow=/*#__PURE__*/new WeakMap();var _boundToggle=/*#__PURE__*/new WeakMap();var _color=/*#__PURE__*/new WeakMap();var _container=/*#__PURE__*/new WeakMap();var _contentsObj=/*#__PURE__*/new WeakMap();var _dateObj=/*#__PURE__*/new WeakMap();var _elements=/*#__PURE__*/new WeakMap();var _parent=/*#__PURE__*/new WeakMap();var _parentRect=/*#__PURE__*/new WeakMap();var _pinned=/*#__PURE__*/new WeakMap();var _popup=/*#__PURE__*/new WeakMap();var _rect=/*#__PURE__*/new WeakMap();var _richText=/*#__PURE__*/new WeakMap();var _titleObj=/*#__PURE__*/new WeakMap();var _wasVisible=/*#__PURE__*/new WeakMap();var _PopupElement_brand=/*#__PURE__*/new WeakSet();class PopupElement{constructor({container,color,elements,titleObj,modificationDate,contentsObj,richText,parent,rect,parentRect,open}){_classPrivateMethodInitSpec(this,_PopupElement_brand);_classPrivateFieldInitSpec(this,_boundKeyDown,_assertClassBrand(_PopupElement_brand,this,_keyDown).bind(this));_classPrivateFieldInitSpec(this,_boundHide,_assertClassBrand(_PopupElement_brand,this,_hide).bind(this));_classPrivateFieldInitSpec(this,_boundShow,_assertClassBrand(_PopupElement_brand,this,_show).bind(this));_classPrivateFieldInitSpec(this,_boundToggle,_assertClassBrand(_PopupElement_brand,this,_toggle).bind(this));_classPrivateFieldInitSpec(this,_color,null);_classPrivateFieldInitSpec(this,_container,null);_classPrivateFieldInitSpec(this,_contentsObj,null);_classPrivateFieldInitSpec(this,_dateObj,null);_classPrivateFieldInitSpec(this,_elements,null);_classPrivateFieldInitSpec(this,_parent,null);_classPrivateFieldInitSpec(this,_parentRect,null);_classPrivateFieldInitSpec(this,_pinned,false);_classPrivateFieldInitSpec(this,_popup,null);_classPrivateFieldInitSpec(this,_rect,null);_classPrivateFieldInitSpec(this,_richText,null);_classPrivateFieldInitSpec(this,_titleObj,null);_classPrivateFieldInitSpec(this,_wasVisible,false);_classPrivateFieldSet(_container,this,container);_classPrivateFieldSet(_titleObj,this,titleObj);_classPrivateFieldSet(_contentsObj,this,contentsObj);_classPrivateFieldSet(_richText,this,richText);_classPrivateFieldSet(_parent,this,parent);_classPrivateFieldSet(_color,this,color);_classPrivateFieldSet(_rect,this,rect);_classPrivateFieldSet(_parentRect,this,parentRect);_classPrivateFieldSet(_elements,this,elements);_classPrivateFieldSet(_dateObj,this,display_utils.PDFDateString.toDateObject(modificationDate));this.trigger=elements.flatMap(e=>e.getElementsToTriggerPopup());for(const element of this.trigger){element.addEventListener(\"click\",_classPrivateFieldGet(_boundToggle,this));element.addEventListener(\"mouseenter\",_classPrivateFieldGet(_boundShow,this));element.addEventListener(\"mouseleave\",_classPrivateFieldGet(_boundHide,this));element.classList.add(\"popupTriggerArea\");}for(const element of elements){element.container?.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown,this));}_classPrivateFieldGet(_container,this).hidden=true;if(open){_assertClassBrand(_PopupElement_brand,this,_toggle).call(this);}}render(){if(_classPrivateFieldGet(_popup,this)){return;}const{page:{view},viewport:{rawDims:{pageWidth,pageHeight,pageX,pageY}}}=_classPrivateFieldGet(_parent,this);const popup=_classPrivateFieldSet(_popup,this,document.createElement(\"div\"));popup.className=\"popup\";if(_classPrivateFieldGet(_color,this)){const baseColor=popup.style.outlineColor=util.Util.makeHexColor(..._classPrivateFieldGet(_color,this));if(CSS.supports(\"background-color\",\"color-mix(in srgb, red 30%, white)\")){popup.style.backgroundColor=`color-mix(in srgb, ${baseColor} 30%, white)`;}else{const BACKGROUND_ENLIGHT=0.7;popup.style.backgroundColor=util.Util.makeHexColor(..._classPrivateFieldGet(_color,this).map(c=>Math.floor(BACKGROUND_ENLIGHT*(255-c)+c)));}}const header=document.createElement(\"span\");header.className=\"header\";const title=document.createElement(\"h1\");header.append(title);({dir:title.dir,str:title.textContent}=_classPrivateFieldGet(_titleObj,this));popup.append(header);if(_classPrivateFieldGet(_dateObj,this)){const modificationDate=document.createElement(\"span\");modificationDate.classList.add(\"popupDate\");modificationDate.setAttribute(\"data-l10n-id\",\"pdfjs-annotation-date-string\");modificationDate.setAttribute(\"data-l10n-args\",JSON.stringify({date:_classPrivateFieldGet(_dateObj,this).toLocaleDateString(),time:_classPrivateFieldGet(_dateObj,this).toLocaleTimeString()}));header.append(modificationDate);}const contentsObj=_classPrivateFieldGet(_contentsObj,this);const richText=_classPrivateFieldGet(_richText,this);if(richText?.str&&(!contentsObj?.str||contentsObj.str===richText.str)){xfa_layer.XfaLayer.render({xfaHtml:richText.html,intent:\"richText\",div:popup});popup.lastChild.classList.add(\"richText\",\"popupContent\");}else{const contents=this._formatContents(contentsObj);popup.append(contents);}let useParentRect=!!_classPrivateFieldGet(_parentRect,this);let rect=useParentRect?_classPrivateFieldGet(_parentRect,this):_classPrivateFieldGet(_rect,this);for(const element of _classPrivateFieldGet(_elements,this)){if(!rect||util.Util.intersect(element.data.rect,rect)!==null){rect=element.data.rect;useParentRect=true;break;}}const normalizedRect=util.Util.normalizeRect([rect[0],view[3]-rect[1]+view[1],rect[2],view[3]-rect[3]+view[1]]);const HORIZONTAL_SPACE_AFTER_ANNOTATION=5;const parentWidth=useParentRect?rect[2]-rect[0]+HORIZONTAL_SPACE_AFTER_ANNOTATION:0;const popupLeft=normalizedRect[0]+parentWidth;const popupTop=normalizedRect[1];const{style}=_classPrivateFieldGet(_container,this);style.left=`${100*(popupLeft-pageX)/pageWidth}%`;style.top=`${100*(popupTop-pageY)/pageHeight}%`;_classPrivateFieldGet(_container,this).append(popup);}_formatContents({str,dir}){const p=document.createElement(\"p\");p.classList.add(\"popupContent\");p.dir=dir;const lines=str.split(/(?:\\r\\n?|\\n)/);for(let i=0,ii=lines.length;i<ii;++i){const line=lines[i];p.append(document.createTextNode(line));if(i<ii-1){p.append(document.createElement(\"br\"));}}return p;}forceHide(){_classPrivateFieldSet(_wasVisible,this,this.isVisible);if(!_classPrivateFieldGet(_wasVisible,this)){return;}_classPrivateFieldGet(_container,this).hidden=true;}maybeShow(){if(!_classPrivateFieldGet(_wasVisible,this)){return;}_classPrivateFieldSet(_wasVisible,this,false);_classPrivateFieldGet(_container,this).hidden=false;}get isVisible(){return _classPrivateFieldGet(_container,this).hidden===false;}}function _keyDown(event){if(event.altKey||event.shiftKey||event.ctrlKey||event.metaKey){return;}if(event.key===\"Enter\"||event.key===\"Escape\"&&_classPrivateFieldGet(_pinned,this)){_assertClassBrand(_PopupElement_brand,this,_toggle).call(this);}}function _toggle(){_classPrivateFieldSet(_pinned,this,!_classPrivateFieldGet(_pinned,this));if(_classPrivateFieldGet(_pinned,this)){_assertClassBrand(_PopupElement_brand,this,_show).call(this);_classPrivateFieldGet(_container,this).addEventListener(\"click\",_classPrivateFieldGet(_boundToggle,this));_classPrivateFieldGet(_container,this).addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown,this));}else{_assertClassBrand(_PopupElement_brand,this,_hide).call(this);_classPrivateFieldGet(_container,this).removeEventListener(\"click\",_classPrivateFieldGet(_boundToggle,this));_classPrivateFieldGet(_container,this).removeEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown,this));}}function _show(){if(!_classPrivateFieldGet(_popup,this)){this.render();}if(!this.isVisible){_classPrivateFieldGet(_container,this).hidden=false;_classPrivateFieldGet(_container,this).style.zIndex=parseInt(_classPrivateFieldGet(_container,this).style.zIndex)+1000;}else if(_classPrivateFieldGet(_pinned,this)){_classPrivateFieldGet(_container,this).classList.add(\"focused\");}}function _hide(){_classPrivateFieldGet(_container,this).classList.remove(\"focused\");if(_classPrivateFieldGet(_pinned,this)||!this.isVisible){return;}_classPrivateFieldGet(_container,this).hidden=true;_classPrivateFieldGet(_container,this).style.zIndex=parseInt(_classPrivateFieldGet(_container,this).style.zIndex)-1000;}class FreeTextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});this.textContent=parameters.data.textContent;this.textPosition=parameters.data.textPosition;this.annotationEditorType=util.AnnotationEditorType.FREETEXT;}render(){this.container.classList.add(\"freeTextAnnotation\");if(this.textContent){const content=document.createElement(\"div\");content.classList.add(\"annotationTextContent\");content.setAttribute(\"role\",\"comment\");for(const line of this.textContent){const lineSpan=document.createElement(\"span\");lineSpan.textContent=line;content.append(lineSpan);}this.container.append(content);}if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this._editOnDoubleClick();return this.container;}get _isEditable(){return this.data.hasOwnCanvas;}}var _line=/*#__PURE__*/new WeakMap();class LineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_line,null);}render(){this.container.classList.add(\"lineAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const line=_classPrivateFieldSet(_line,this,this.svgFactory.createElement(\"svg:line\"));line.setAttribute(\"x1\",data.rect[2]-data.lineCoordinates[0]);line.setAttribute(\"y1\",data.rect[3]-data.lineCoordinates[1]);line.setAttribute(\"x2\",data.rect[2]-data.lineCoordinates[2]);line.setAttribute(\"y2\",data.rect[3]-data.lineCoordinates[3]);line.setAttribute(\"stroke-width\",data.borderStyle.width||1);line.setAttribute(\"stroke\",\"transparent\");line.setAttribute(\"fill\",\"transparent\");svg.append(line);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_line,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}var _square=/*#__PURE__*/new WeakMap();class SquareAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_square,null);}render(){this.container.classList.add(\"squareAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const borderWidth=data.borderStyle.width;const square=_classPrivateFieldSet(_square,this,this.svgFactory.createElement(\"svg:rect\"));square.setAttribute(\"x\",borderWidth/2);square.setAttribute(\"y\",borderWidth/2);square.setAttribute(\"width\",width-borderWidth);square.setAttribute(\"height\",height-borderWidth);square.setAttribute(\"stroke-width\",borderWidth||1);square.setAttribute(\"stroke\",\"transparent\");square.setAttribute(\"fill\",\"transparent\");svg.append(square);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_square,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}var _circle=/*#__PURE__*/new WeakMap();class CircleAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_circle,null);}render(){this.container.classList.add(\"circleAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const borderWidth=data.borderStyle.width;const circle=_classPrivateFieldSet(_circle,this,this.svgFactory.createElement(\"svg:ellipse\"));circle.setAttribute(\"cx\",width/2);circle.setAttribute(\"cy\",height/2);circle.setAttribute(\"rx\",width/2-borderWidth/2);circle.setAttribute(\"ry\",height/2-borderWidth/2);circle.setAttribute(\"stroke-width\",borderWidth||1);circle.setAttribute(\"stroke\",\"transparent\");circle.setAttribute(\"fill\",\"transparent\");svg.append(circle);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_circle,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}var _polyline=/*#__PURE__*/new WeakMap();class PolylineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_polyline,null);this.containerClassName=\"polylineAnnotation\";this.svgElementName=\"svg:polyline\";}render(){this.container.classList.add(this.containerClassName);const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);let points=[];for(const coordinate of data.vertices){const x=coordinate.x-data.rect[0];const y=data.rect[3]-coordinate.y;points.push(x+\",\"+y);}points=points.join(\" \");const polyline=_classPrivateFieldSet(_polyline,this,this.svgFactory.createElement(this.svgElementName));polyline.setAttribute(\"points\",points);polyline.setAttribute(\"stroke-width\",data.borderStyle.width||1);polyline.setAttribute(\"stroke\",\"transparent\");polyline.setAttribute(\"fill\",\"transparent\");svg.append(polyline);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_polyline,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(parameters){super(parameters);this.containerClassName=\"polygonAnnotation\";this.svgElementName=\"svg:polygon\";}}class CaretAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});}render(){this.container.classList.add(\"caretAnnotation\");if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}}var _polylines=/*#__PURE__*/new WeakMap();class InkAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});_classPrivateFieldInitSpec(this,_polylines,[]);this.containerClassName=\"inkAnnotation\";this.svgElementName=\"svg:polyline\";this.annotationEditorType=util.AnnotationEditorType.INK;}render(){this.container.classList.add(this.containerClassName);const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);for(const inkList of data.inkLists){let points=[];for(const coordinate of inkList){const x=coordinate.x-data.rect[0];const y=data.rect[3]-coordinate.y;points.push(`${x},${y}`);}points=points.join(\" \");const polyline=this.svgFactory.createElement(this.svgElementName);_classPrivateFieldGet(_polylines,this).push(polyline);polyline.setAttribute(\"points\",points);polyline.setAttribute(\"stroke-width\",data.borderStyle.width||1);polyline.setAttribute(\"stroke\",\"transparent\");polyline.setAttribute(\"fill\",\"transparent\");if(!data.popupRef&&this.hasPopupData){this._createPopup();}svg.append(polyline);}this.container.append(svg);return this.container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_polylines,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}class HighlightAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add(\"highlightAnnotation\");return this.container;}}class UnderlineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add(\"underlineAnnotation\");return this.container;}}class SquigglyAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add(\"squigglyAnnotation\");return this.container;}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add(\"strikeoutAnnotation\");return this.container;}}class StampAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true,ignoreBorder:true});}render(){this.container.classList.add(\"stampAnnotation\");if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}}var _trigger=/*#__PURE__*/new WeakMap();var _FileAttachmentAnnotationElement_brand=/*#__PURE__*/new WeakSet();class FileAttachmentAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true});_classPrivateMethodInitSpec(this,_FileAttachmentAnnotationElement_brand);_classPrivateFieldInitSpec(this,_trigger,null);const{filename,content}=this.data.file;this.filename=(0,display_utils.getFilenameFromUrl)(filename,true);this.content=content;this.linkService.eventBus?.dispatch(\"fileattachmentannotation\",{source:this,filename,content});}render(){this.container.classList.add(\"fileAttachmentAnnotation\");const{container,data}=this;let trigger;if(data.hasAppearance||data.fillAlpha===0){trigger=document.createElement(\"div\");}else{trigger=document.createElement(\"img\");trigger.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name)?\"paperclip\":\"pushpin\"}.svg`;if(data.fillAlpha&&data.fillAlpha<1){trigger.style=`filter: opacity(${Math.round(data.fillAlpha*100)}%);`;}}trigger.addEventListener(\"dblclick\",_assertClassBrand(_FileAttachmentAnnotationElement_brand,this,_download).bind(this));_classPrivateFieldSet(_trigger,this,trigger);const{isMac}=util.FeatureTest.platform;container.addEventListener(\"keydown\",evt=>{if(evt.key===\"Enter\"&&(isMac?evt.metaKey:evt.ctrlKey)){_assertClassBrand(_FileAttachmentAnnotationElement_brand,this,_download).call(this);}});if(!data.popupRef&&this.hasPopupData){this._createPopup();}else{trigger.classList.add(\"popupTriggerArea\");}container.append(trigger);return container;}getElementsToTriggerPopup(){return _classPrivateFieldGet(_trigger,this);}addHighlightArea(){this.container.classList.add(\"highlightArea\");}}function _download(){this.downloadManager?.openOrDownloadData(this.content,this.filename);}var _accessibilityManager=/*#__PURE__*/new WeakMap();var _annotationCanvasMap=/*#__PURE__*/new WeakMap();var _editableAnnotations=/*#__PURE__*/new WeakMap();var _AnnotationLayer_brand=/*#__PURE__*/new WeakSet();class AnnotationLayer{constructor({div,accessibilityManager,annotationCanvasMap,annotationEditorUIManager,page,viewport}){_classPrivateMethodInitSpec(this,_AnnotationLayer_brand);_classPrivateFieldInitSpec(this,_accessibilityManager,null);_classPrivateFieldInitSpec(this,_annotationCanvasMap,null);_classPrivateFieldInitSpec(this,_editableAnnotations,new Map());this.div=div;_classPrivateFieldSet(_accessibilityManager,this,accessibilityManager);_classPrivateFieldSet(_annotationCanvasMap,this,annotationCanvasMap);this.page=page;this.viewport=viewport;this.zIndex=0;this._annotationEditorUIManager=annotationEditorUIManager;}async render(params){const{annotations}=params;const layer=this.div;(0,display_utils.setLayerDimensions)(layer,this.viewport);const popupToElements=new Map();const elementParams={data:null,layer,linkService:params.linkService,downloadManager:params.downloadManager,imageResourcesPath:params.imageResourcesPath||\"\",renderForms:params.renderForms!==false,svgFactory:new display_utils.DOMSVGFactory(),annotationStorage:params.annotationStorage||new annotation_storage.AnnotationStorage(),enableScripting:params.enableScripting===true,hasJSActions:params.hasJSActions,fieldObjects:params.fieldObjects,parent:this,elements:null};for(const data of annotations){if(data.noHTML){continue;}const isPopupAnnotation=data.annotationType===util.AnnotationType.POPUP;if(!isPopupAnnotation){const{width,height}=getRectDims(data.rect);if(width<=0||height<=0){continue;}}else{const elements=popupToElements.get(data.id);if(!elements){continue;}elementParams.elements=elements;}elementParams.data=data;const element=AnnotationElementFactory.create(elementParams);if(!element.isRenderable){continue;}if(!isPopupAnnotation&&data.popupRef){const elements=popupToElements.get(data.popupRef);if(!elements){popupToElements.set(data.popupRef,[element]);}else{elements.push(element);}}const rendered=element.render();if(data.hidden){rendered.style.visibility=\"hidden\";}_assertClassBrand(_AnnotationLayer_brand,this,_appendElement).call(this,rendered,data.id);if(element.annotationEditorType>0){_classPrivateFieldGet(_editableAnnotations,this).set(element.data.id,element);this._annotationEditorUIManager?.renderAnnotationElement(element);}}_assertClassBrand(_AnnotationLayer_brand,this,_setAnnotationCanvasMap).call(this);}update({viewport}){const layer=this.div;this.viewport=viewport;(0,display_utils.setLayerDimensions)(layer,{rotation:viewport.rotation});_assertClassBrand(_AnnotationLayer_brand,this,_setAnnotationCanvasMap).call(this);layer.hidden=false;}getEditableAnnotations(){return Array.from(_classPrivateFieldGet(_editableAnnotations,this).values());}getEditableAnnotation(id){return _classPrivateFieldGet(_editableAnnotations,this).get(id);}}/***/function _appendElement(element,id){const contentElement=element.firstChild||element;contentElement.id=`${util.AnnotationPrefix}${id}`;this.div.append(element);_classPrivateFieldGet(_accessibilityManager,this)?.moveElementInDOM(this.div,element,contentElement,false);}function _setAnnotationCanvasMap(){if(!_classPrivateFieldGet(_annotationCanvasMap,this)){return;}const layer=this.div;for(const[id,canvas]of _classPrivateFieldGet(_annotationCanvasMap,this)){const element=layer.querySelector(`[data-annotation-id=\"${id}\"]`);if(!element){continue;}canvas.className=\"annotationContent\";const{firstChild}=element;if(!firstChild){element.append(canvas);}else if(firstChild.nodeName===\"CANVAS\"){firstChild.replaceWith(canvas);}else if(!firstChild.classList.contains(\"annotationContent\")){firstChild.before(canvas);}else{firstChild.after(canvas);}}_classPrivateFieldGet(_annotationCanvasMap,this).clear();}}),/***/792:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */AnnotationStorage:()=>(/* binding */AnnotationStorage),/* harmony export */PrintAnnotationStorage:()=>(/* binding */PrintAnnotationStorage),/* harmony export */SerializableEmpty:()=>(/* binding */SerializableEmpty)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(310);/* harmony import */var _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(651);const SerializableEmpty=Object.freeze({map:null,hash:\"\",transfer:undefined});var _modified=/*#__PURE__*/new WeakMap();var _storage=/*#__PURE__*/new WeakMap();var _AnnotationStorage_brand=/*#__PURE__*/new WeakSet();class AnnotationStorage{constructor(){_classPrivateMethodInitSpec(this,_AnnotationStorage_brand);_classPrivateFieldInitSpec(this,_modified,false);_classPrivateFieldInitSpec(this,_storage,new Map());this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null;}getValue(key,defaultValue){const value=_classPrivateFieldGet(_storage,this).get(key);if(value===undefined){return defaultValue;}return Object.assign(defaultValue,value);}getRawValue(key){return _classPrivateFieldGet(_storage,this).get(key);}remove(key){_classPrivateFieldGet(_storage,this).delete(key);if(_classPrivateFieldGet(_storage,this).size===0){this.resetModified();}if(typeof this.onAnnotationEditor===\"function\"){for(const value of _classPrivateFieldGet(_storage,this).values()){if(value instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor){return;}}this.onAnnotationEditor(null);}}setValue(key,value){const obj=_classPrivateFieldGet(_storage,this).get(key);let modified=false;if(obj!==undefined){for(const[entry,val]of Object.entries(value)){if(obj[entry]!==val){modified=true;obj[entry]=val;}}}else{modified=true;_classPrivateFieldGet(_storage,this).set(key,value);}if(modified){_assertClassBrand(_AnnotationStorage_brand,this,_setModified).call(this);}if(value instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor&&typeof this.onAnnotationEditor===\"function\"){this.onAnnotationEditor(value.constructor._type);}}has(key){return _classPrivateFieldGet(_storage,this).has(key);}getAll(){return _classPrivateFieldGet(_storage,this).size>0?(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(_storage,this)):null;}setAll(obj){for(const[key,val]of Object.entries(obj)){this.setValue(key,val);}}get size(){return _classPrivateFieldGet(_storage,this).size;}resetModified(){if(_classPrivateFieldGet(_modified,this)){_classPrivateFieldSet(_modified,this,false);if(typeof this.onResetModified===\"function\"){this.onResetModified();}}}get print(){return new PrintAnnotationStorage(this);}get serializable(){if(_classPrivateFieldGet(_storage,this).size===0){return SerializableEmpty;}const map=new Map(),hash=new _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__.MurmurHash3_64(),transfer=[];const context=Object.create(null);let hasBitmap=false;for(const[key,val]of _classPrivateFieldGet(_storage,this)){const serialized=val instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor?val.serialize(false,context):val;if(serialized){map.set(key,serialized);hash.update(`${key}:${JSON.stringify(serialized)}`);hasBitmap||=!!serialized.bitmap;}}if(hasBitmap){for(const value of map.values()){if(value.bitmap){transfer.push(value.bitmap);}}}return map.size>0?{map,hash:hash.hexdigest(),transfer}:SerializableEmpty;}get editorStats(){let stats=null;const typeToEditor=new Map();for(const value of _classPrivateFieldGet(_storage,this).values()){if(!(value instanceof _editor_editor_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationEditor)){continue;}const editorStats=value.telemetryFinalData;if(!editorStats){continue;}const{type}=editorStats;if(!typeToEditor.has(type)){typeToEditor.set(type,Object.getPrototypeOf(value).constructor);}stats||=Object.create(null);const map=stats[type]||=new Map();for(const[key,val]of Object.entries(editorStats)){if(key===\"type\"){continue;}let counters=map.get(key);if(!counters){counters=new Map();map.set(key,counters);}const count=counters.get(val)??0;counters.set(val,count+1);}}for(const[type,editor]of typeToEditor){stats[type]=editor.computeTelemetryFinalData(stats[type]);}return stats;}}function _setModified(){if(!_classPrivateFieldGet(_modified,this)){_classPrivateFieldSet(_modified,this,true);if(typeof this.onSetModified===\"function\"){this.onSetModified();}}}var _serializable=/*#__PURE__*/new WeakMap();class PrintAnnotationStorage extends AnnotationStorage{constructor(parent){super();_classPrivateFieldInitSpec(this,_serializable,void 0);const{map,hash,transfer}=parent.serializable;const clone=structuredClone(map,transfer?{transfer}:null);_classPrivateFieldSet(_serializable,this,{map:clone,hash,transfer});}get print(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Should not call PrintAnnotationStorage.print\");}get serializable(){return _classPrivateFieldGet(_serializable,this);}}/***/}),/***/831:(/***/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFDataRangeTransport:()=>(/* binding */PDFDataRangeTransport),/* harmony export */PDFWorker:()=>(/* binding */PDFWorker),/* harmony export */build:()=>(/* binding */build),/* harmony export */getDocument:()=>(/* binding */getDocument),/* harmony export */version:()=>(/* binding */version)/* harmony export */});/* unused harmony exports DefaultCanvasFactory, DefaultCMapReaderFactory, DefaultFilterFactory, DefaultStandardFontDataFactory, LoopbackPort, PDFDocumentLoadingTask, PDFDocumentProxy, PDFPageProxy, PDFWorkerUtil, RenderTask */ /* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(792);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(419);/* harmony import */var _font_loader_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10);/* harmony import */var display_node_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(573);/* harmony import */var _canvas_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(923);/* harmony import */var _text_layer_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(814);/* harmony import */var _worker_options_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(164);/* harmony import */var _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(178);/* harmony import */var _metadata_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(62);/* harmony import */var _optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(626);/* harmony import */var _transport_stream_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(585);/* harmony import */var display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(94);/* harmony import */var display_network__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(457);/* harmony import */var display_node_stream__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(786);/* harmony import */var _xfa_text_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(50);var __webpack_async_dependencies__=__webpack_handle_async_dependencies__([display_node_utils__WEBPACK_IMPORTED_MODULE_4__,display_node_stream__WEBPACK_IMPORTED_MODULE_13__]);[display_node_utils__WEBPACK_IMPORTED_MODULE_4__,display_node_stream__WEBPACK_IMPORTED_MODULE_13__]=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;const DEFAULT_RANGE_CHUNK_SIZE=65536;const RENDERING_CANCELLED_TIMEOUT=100;const DELAYED_CLEANUP_TIMEOUT=5000;const DefaultCanvasFactory=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS?display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeCanvasFactory:_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCanvasFactory;const DefaultCMapReaderFactory=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS?display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeCMapReaderFactory:_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCMapReaderFactory;const DefaultFilterFactory=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS?display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeFilterFactory:_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMFilterFactory;const DefaultStandardFontDataFactory=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS?display_node_utils__WEBPACK_IMPORTED_MODULE_4__.NodeStandardFontDataFactory:_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMStandardFontDataFactory;function getDocument(src){if(typeof src===\"string\"||src instanceof URL){src={url:src};}else if(src instanceof ArrayBuffer||ArrayBuffer.isView(src)){src={data:src};}if(typeof src!==\"object\"){throw new Error(\"Invalid parameter in getDocument, need parameter object.\");}if(!src.url&&!src.data&&!src.range){throw new Error(\"Invalid parameter object: need either .data, .range or .url\");}const task=new PDFDocumentLoadingTask();const{docId}=task;const url=src.url?getUrlProp(src.url):null;const data=src.data?getDataProp(src.data):null;const httpHeaders=src.httpHeaders||null;const withCredentials=src.withCredentials===true;const password=src.password??null;const rangeTransport=src.range instanceof PDFDataRangeTransport?src.range:null;const rangeChunkSize=Number.isInteger(src.rangeChunkSize)&&src.rangeChunkSize>0?src.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let worker=src.worker instanceof PDFWorker?src.worker:null;const verbosity=src.verbosity;const docBaseUrl=typeof src.docBaseUrl===\"string\"&&!(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isDataScheme)(src.docBaseUrl)?src.docBaseUrl:null;const cMapUrl=typeof src.cMapUrl===\"string\"?src.cMapUrl:null;const cMapPacked=src.cMapPacked!==false;const CMapReaderFactory=src.CMapReaderFactory||DefaultCMapReaderFactory;const standardFontDataUrl=typeof src.standardFontDataUrl===\"string\"?src.standardFontDataUrl:null;const StandardFontDataFactory=src.StandardFontDataFactory||DefaultStandardFontDataFactory;const ignoreErrors=src.stopAtErrors!==true;const maxImageSize=Number.isInteger(src.maxImageSize)&&src.maxImageSize>-1?src.maxImageSize:-1;const isEvalSupported=src.isEvalSupported!==false;const isOffscreenCanvasSupported=typeof src.isOffscreenCanvasSupported===\"boolean\"?src.isOffscreenCanvasSupported:!_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS;const canvasMaxAreaInBytes=Number.isInteger(src.canvasMaxAreaInBytes)?src.canvasMaxAreaInBytes:-1;const disableFontFace=typeof src.disableFontFace===\"boolean\"?src.disableFontFace:_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS;const fontExtraProperties=src.fontExtraProperties===true;const enableXfa=src.enableXfa===true;const ownerDocument=src.ownerDocument||globalThis.document;const disableRange=src.disableRange===true;const disableStream=src.disableStream===true;const disableAutoFetch=src.disableAutoFetch===true;const pdfBug=src.pdfBug===true;const length=rangeTransport?rangeTransport.length:src.length??NaN;const useSystemFonts=typeof src.useSystemFonts===\"boolean\"?src.useSystemFonts:!_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS&&!disableFontFace;const useWorkerFetch=typeof src.useWorkerFetch===\"boolean\"?src.useWorkerFetch:CMapReaderFactory===_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMCMapReaderFactory&&StandardFontDataFactory===_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMStandardFontDataFactory&&cMapUrl&&standardFontDataUrl&&(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(cMapUrl,document.baseURI)&&(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(standardFontDataUrl,document.baseURI);const canvasFactory=src.canvasFactory||new DefaultCanvasFactory({ownerDocument});const filterFactory=src.filterFactory||new DefaultFilterFactory({docId,ownerDocument});const styleElement=null;(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.setVerbosityLevel)(verbosity);const transportFactory={canvasFactory,filterFactory};if(!useWorkerFetch){transportFactory.cMapReaderFactory=new CMapReaderFactory({baseUrl:cMapUrl,isCompressed:cMapPacked});transportFactory.standardFontDataFactory=new StandardFontDataFactory({baseUrl:standardFontDataUrl});}if(!worker){const workerParams={verbosity,port:_worker_options_js__WEBPACK_IMPORTED_MODULE_14__.GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams);task._worker=worker;}const fetchDocParams={docId,apiVersion:\"4.2.67\",data,password,disableAutoFetch,rangeChunkSize,length,docBaseUrl,enableXfa,evaluatorOptions:{maxImageSize,disableFontFace,ignoreErrors,isEvalSupported,isOffscreenCanvasSupported,canvasMaxAreaInBytes,fontExtraProperties,useSystemFonts,cMapUrl:useWorkerFetch?cMapUrl:null,standardFontDataUrl:useWorkerFetch?standardFontDataUrl:null}};const transportParams={ignoreErrors,disableFontFace,fontExtraProperties,enableXfa,ownerDocument,disableAutoFetch,pdfBug,styleElement};worker.promise.then(function(){if(task.destroyed){throw new Error(\"Loading aborted\");}const workerIdPromise=_fetchDocument(worker,fetchDocParams);const networkStreamPromise=new Promise(function(resolve){let networkStream;if(rangeTransport){networkStream=new _transport_stream_js__WEBPACK_IMPORTED_MODULE_10__.PDFDataTransportStream(rangeTransport,{disableRange,disableStream});}else if(!data){const createPDFNetworkStream=params=>{if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS){const isFetchSupported=function(){return typeof fetch!==\"undefined\"&&typeof Response!==\"undefined\"&&\"body\"in Response.prototype;};return isFetchSupported()&&(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(params.url)?new display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__.PDFFetchStream(params):new display_node_stream__WEBPACK_IMPORTED_MODULE_13__.PDFNodeStream(params);}return(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidFetchUrl)(params.url)?new display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__.PDFFetchStream(params):new display_network__WEBPACK_IMPORTED_MODULE_12__.PDFNetworkStream(params);};networkStream=createPDFNetworkStream({url,length,httpHeaders,withCredentials,rangeChunkSize,disableRange,disableStream});}resolve(networkStream);});return Promise.all([workerIdPromise,networkStreamPromise]).then(function([workerId,networkStream]){if(task.destroyed){throw new Error(\"Loading aborted\");}const messageHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(docId,workerId,worker.port);const transport=new WorkerTransport(messageHandler,task,networkStream,transportParams,transportFactory);task._transport=transport;messageHandler.send(\"Ready\",null);});}).catch(task._capability.reject);return task;}async function _fetchDocument(worker,source){if(worker.destroyed){throw new Error(\"Worker was destroyed\");}const workerId=await worker.messageHandler.sendWithPromise(\"GetDocRequest\",source,source.data?[source.data.buffer]:null);if(worker.destroyed){throw new Error(\"Worker was destroyed\");}return workerId;}function getUrlProp(val){if(val instanceof URL){return val.href;}try{return new URL(val,window.location).href;}catch{if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS&&typeof val===\"string\"){return val;}}throw new Error(\"Invalid PDF url data: \"+\"either string or URL-object is expected in the url property.\");}function getDataProp(val){if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS&&typeof Buffer!==\"undefined\"&&val instanceof Buffer){throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");}if(val instanceof Uint8Array&&val.byteLength===val.buffer.byteLength){return val;}if(typeof val===\"string\"){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.stringToBytes)(val);}if(val instanceof ArrayBuffer||ArrayBuffer.isView(val)||typeof val===\"object\"&&!isNaN(val?.length)){return new Uint8Array(val);}throw new Error(\"Invalid PDF binary data: either TypedArray, \"+\"string, or array-like object is expected in the data property.\");}function isRefProxy(ref){return typeof ref===\"object\"&&Number.isInteger(ref?.num)&&ref.num>=0&&Number.isInteger(ref?.gen)&&ref.gen>=0;}class PDFDocumentLoadingTask{constructor(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;this._capability=Promise.withResolvers();this._transport=null;this._worker=null;this.docId=`d${(_docId._=(_PDFDocumentLoadingTa=_docId._,_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa),_PDFDocumentLoadingTa2)}`;this.destroyed=false;this.onPassword=null;this.onProgress=null;}get promise(){return this._capability.promise;}async destroy(){this.destroyed=true;try{if(this._worker?.port){this._worker._pendingDestroy=true;}await this._transport?.destroy();}catch(ex){if(this._worker?.port){delete this._worker._pendingDestroy;}throw ex;}this._transport=null;if(this._worker){this._worker.destroy();this._worker=null;}}}var _docId={_:0};class PDFDataRangeTransport{constructor(length,initialData,progressiveDone=false,contentDispositionFilename=null){this.length=length;this.initialData=initialData;this.progressiveDone=progressiveDone;this.contentDispositionFilename=contentDispositionFilename;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=Promise.withResolvers();}addRangeListener(listener){this._rangeListeners.push(listener);}addProgressListener(listener){this._progressListeners.push(listener);}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener);}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener);}onDataRange(begin,chunk){for(const listener of this._rangeListeners){listener(begin,chunk);}}onDataProgress(loaded,total){this._readyCapability.promise.then(()=>{for(const listener of this._progressListeners){listener(loaded,total);}});}onDataProgressiveRead(chunk){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveReadListeners){listener(chunk);}});}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveDoneListeners){listener();}});}transportReady(){this._readyCapability.resolve();}requestDataRange(begin,end){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method PDFDataRangeTransport.requestDataRange\");}abort(){}}class PDFDocumentProxy{constructor(pdfInfo,transport){this._pdfInfo=pdfInfo;this._transport=transport;}get annotationStorage(){return this._transport.annotationStorage;}get filterFactory(){return this._transport.filterFactory;}get numPages(){return this._pdfInfo.numPages;}get fingerprints(){return this._pdfInfo.fingerprints;}get isPureXfa(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"isPureXfa\",!!this._transport._htmlForXfa);}get allXfaHtml(){return this._transport._htmlForXfa;}getPage(pageNumber){return this._transport.getPage(pageNumber);}getPageIndex(ref){return this._transport.getPageIndex(ref);}getDestinations(){return this._transport.getDestinations();}getDestination(id){return this._transport.getDestination(id);}getPageLabels(){return this._transport.getPageLabels();}getPageLayout(){return this._transport.getPageLayout();}getPageMode(){return this._transport.getPageMode();}getViewerPreferences(){return this._transport.getViewerPreferences();}getOpenAction(){return this._transport.getOpenAction();}getAttachments(){return this._transport.getAttachments();}getJSActions(){return this._transport.getDocJSActions();}getOutline(){return this._transport.getOutline();}getOptionalContentConfig({intent=\"display\"}={}){const{renderingIntent}=this._transport.getRenderingIntent(intent);return this._transport.getOptionalContentConfig(renderingIntent);}getPermissions(){return this._transport.getPermissions();}getMetadata(){return this._transport.getMetadata();}getMarkInfo(){return this._transport.getMarkInfo();}getData(){return this._transport.getData();}saveDocument(){return this._transport.saveDocument();}getDownloadInfo(){return this._transport.downloadInfoCapability.promise;}cleanup(keepLoadedFonts=false){return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa);}destroy(){return this.loadingTask.destroy();}cachedPageNumber(ref){return this._transport.cachedPageNumber(ref);}get loadingParams(){return this._transport.loadingParams;}get loadingTask(){return this._transport.loadingTask;}getFieldObjects(){return this._transport.getFieldObjects();}hasJSActions(){return this._transport.hasJSActions();}getCalculationOrderIds(){return this._transport.getCalculationOrderIds();}}var _delayedCleanupTimeout=/*#__PURE__*/new WeakMap();var _pendingCleanup=/*#__PURE__*/new WeakMap();var _PDFPageProxy_brand=/*#__PURE__*/new WeakSet();class PDFPageProxy{constructor(pageIndex,pageInfo,transport,pdfBug=false){_classPrivateMethodInitSpec(this,_PDFPageProxy_brand);_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,null);_classPrivateFieldInitSpec(this,_pendingCleanup,false);this._pageIndex=pageIndex;this._pageInfo=pageInfo;this._transport=transport;this._stats=pdfBug?new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.StatTimer():null;this._pdfBug=pdfBug;this.commonObjs=transport.commonObjs;this.objs=new PDFObjects();this._maybeCleanupAfterRender=false;this._intentStates=new Map();this.destroyed=false;}get pageNumber(){return this._pageIndex+1;}get rotate(){return this._pageInfo.rotate;}get ref(){return this._pageInfo.ref;}get userUnit(){return this._pageInfo.userUnit;}get view(){return this._pageInfo.view;}getViewport({scale,rotation=this.rotate,offsetX=0,offsetY=0,dontFlip=false}={}){return new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PageViewport({viewBox:this.view,scale,rotation,offsetX,offsetY,dontFlip});}getAnnotations({intent=\"display\"}={}){const{renderingIntent}=this._transport.getRenderingIntent(intent);return this._transport.getAnnotations(this._pageIndex,renderingIntent);}getJSActions(){return this._transport.getPageJSActions(this._pageIndex);}get filterFactory(){return this._transport.filterFactory;}get isPureXfa(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"isPureXfa\",!!this._transport._htmlForXfa);}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null;}render({canvasContext,viewport,intent=\"display\",annotationMode=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE,transform=null,background=null,optionalContentConfigPromise=null,annotationCanvasMap=null,pageColors=null,printAnnotationStorage=null}){this._stats?.time(\"Overall\");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);const{renderingIntent,cacheKey}=intentArgs;_classPrivateFieldSet(_pendingCleanup,this,false);_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);optionalContentConfigPromise||=this._transport.getOptionalContentConfig(renderingIntent);let intentState=this._intentStates.get(cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(cacheKey,intentState);}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}const intentPrint=!!(renderingIntent&_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT);if(!intentState.displayReadyCapability){intentState.displayReadyCapability=Promise.withResolvers();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};this._stats?.time(\"Page Request\");this._pumpOperatorList(intentArgs);}const complete=error=>{intentState.renderTasks.delete(internalRenderTask);if(this._maybeCleanupAfterRender||intentPrint){_classPrivateFieldSet(_pendingCleanup,this,true);}_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!intentPrint);if(error){internalRenderTask.capability.reject(error);this._abortOperatorList({intentState,reason:error instanceof Error?error:new Error(error)});}else{internalRenderTask.capability.resolve();}this._stats?.timeEnd(\"Rendering\");this._stats?.timeEnd(\"Overall\");};const internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext,viewport,transform,background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors});(intentState.renderTasks||=new Set()).add(internalRenderTask);const renderTask=internalRenderTask.task;Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(([transparency,optionalContentConfig])=>{if(this.destroyed){complete();return;}this._stats?.time(\"Rendering\");if(!(optionalContentConfig.renderingIntent&renderingIntent)){throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \"+\"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");}internalRenderTask.initializeGraphics({transparency,optionalContentConfig});internalRenderTask.operatorListChanged();}).catch(complete);return renderTask;}getOperatorList({intent=\"display\",annotationMode=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE,printAnnotationStorage=null}={}){function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);intentState.renderTasks.delete(opListTask);}}const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,true);let intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}let opListTask;if(!intentState.opListReadCapability){opListTask=Object.create(null);opListTask.operatorListChanged=operatorListChanged;intentState.opListReadCapability=Promise.withResolvers();(intentState.renderTasks||=new Set()).add(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};this._stats?.time(\"Page Request\");this._pumpOperatorList(intentArgs);}return intentState.opListReadCapability.promise;}streamTextContent({includeMarkedContent=false,disableNormalization=false}={}){const TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream(\"GetTextContent\",{pageIndex:this._pageIndex,includeMarkedContent:includeMarkedContent===true,disableNormalization:disableNormalization===true},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size(textContent){return textContent.items.length;}});}getTextContent(params={}){if(this._transport._htmlForXfa){return this.getXfa().then(xfa=>_xfa_text_js__WEBPACK_IMPORTED_MODULE_15__.XfaText.textContent(xfa));}const readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function({value,done}){if(done){resolve(textContent);return;}Object.assign(textContent.styles,value.styles);textContent.items.push(...value.items);pump();},reject);}const reader=readableStream.getReader();const textContent={items:[],styles:Object.create(null)};pump();});}getStructTree(){return this._transport.getStructTree(this._pageIndex);}_destroy(){this.destroyed=true;const waitOn=[];for(const intentState of this._intentStates.values()){this._abortOperatorList({intentState,reason:new Error(\"Page was destroyed.\"),force:true});if(intentState.opListReadCapability){continue;}for(const internalRenderTask of intentState.renderTasks){waitOn.push(internalRenderTask.completed);internalRenderTask.cancel();}}this.objs.clear();_classPrivateFieldSet(_pendingCleanup,this,false);_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);return Promise.all(waitOn);}cleanup(resetStats=false){_classPrivateFieldSet(_pendingCleanup,this,true);const success=_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,false);if(resetStats&&success){this._stats&&=new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.StatTimer();}return success;}_startRenderPage(transparency,cacheKey){const intentState=this._intentStates.get(cacheKey);if(!intentState){return;}this._stats?.timeEnd(\"Page Request\");intentState.displayReadyCapability?.resolve(transparency);}_renderPageChunk(operatorListChunk,intentState){for(let i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);}intentState.operatorList.lastChunk=operatorListChunk.lastChunk;intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;for(const internalRenderTask of intentState.renderTasks){internalRenderTask.operatorListChanged();}if(operatorListChunk.lastChunk){_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,true);}}_pumpOperatorList({renderingIntent,cacheKey,annotationStorageSerializable}){const{map,transfer}=annotationStorageSerializable;const readableStream=this._transport.messageHandler.sendWithStream(\"GetOperatorList\",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey,annotationStorage:map},transfer);const reader=readableStream.getReader();const intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;const pump=()=>{reader.read().then(({value,done})=>{if(done){intentState.streamReader=null;return;}if(this._transport.destroyed){return;}this._renderPageChunk(value,intentState);pump();},reason=>{intentState.streamReader=null;if(this._transport.destroyed){return;}if(intentState.operatorList){intentState.operatorList.lastChunk=true;for(const internalRenderTask of intentState.renderTasks){internalRenderTask.operatorListChanged();}_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,true);}if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(reason);}else if(intentState.opListReadCapability){intentState.opListReadCapability.reject(reason);}else{throw reason;}});};pump();}_abortOperatorList({intentState,reason,force=false}){if(!intentState.streamReader){return;}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}if(!force){if(intentState.renderTasks.size>0){return;}if(reason instanceof _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException){let delay=RENDERING_CANCELLED_TIMEOUT;if(reason.extraDelay>0&&reason.extraDelay<1000){delay+=reason.extraDelay;}intentState.streamReaderCancelTimeout=setTimeout(()=>{intentState.streamReaderCancelTimeout=null;this._abortOperatorList({intentState,reason,force:true});},delay);return;}}intentState.streamReader.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(reason.message)).catch(()=>{});intentState.streamReader=null;if(this._transport.destroyed){return;}for(const[curCacheKey,curIntentState]of this._intentStates){if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break;}}this.cleanup();}get stats(){return this._stats;}}function _tryCleanup(delayed=false){_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);if(!_classPrivateFieldGet(_pendingCleanup,this)||this.destroyed){return false;}if(delayed){_classPrivateFieldSet(_delayedCleanupTimeout,this,setTimeout(()=>{_classPrivateFieldSet(_delayedCleanupTimeout,this,null);_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,false);},DELAYED_CLEANUP_TIMEOUT));return false;}for(const{renderTasks,operatorList}of this._intentStates.values()){if(renderTasks.size>0||!operatorList.lastChunk){return false;}}this._intentStates.clear();this.objs.clear();_classPrivateFieldSet(_pendingCleanup,this,false);return true;}function _abortDelayedCleanup(){if(_classPrivateFieldGet(_delayedCleanupTimeout,this)){clearTimeout(_classPrivateFieldGet(_delayedCleanupTimeout,this));_classPrivateFieldSet(_delayedCleanupTimeout,this,null);}}var _listeners=/*#__PURE__*/new WeakMap();var _deferred=/*#__PURE__*/new WeakMap();class LoopbackPort{constructor(){_classPrivateFieldInitSpec(this,_listeners,new Set());_classPrivateFieldInitSpec(this,_deferred,Promise.resolve());}postMessage(obj,transfer){const event={data:structuredClone(obj,transfer?{transfer}:null)};_classPrivateFieldGet(_deferred,this).then(()=>{for(const listener of _classPrivateFieldGet(_listeners,this)){listener.call(this,event);}});}addEventListener(name,listener){_classPrivateFieldGet(_listeners,this).add(listener);}removeEventListener(name,listener){_classPrivateFieldGet(_listeners,this).delete(listener);}terminate(){_classPrivateFieldGet(_listeners,this).clear();}}const PDFWorkerUtil={isWorkerDisabled:false,fakeWorkerId:0};{if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS){PDFWorkerUtil.isWorkerDisabled=true;_worker_options_js__WEBPACK_IMPORTED_MODULE_14__.GlobalWorkerOptions.workerSrc||=\"./pdf.worker.mjs\";}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){let base;try{base=new URL(baseUrl);if(!base.origin||base.origin===\"null\"){return false;}}catch{return false;}const other=new URL(otherUrl,base);return base.origin===other.origin;};PDFWorkerUtil.createCDNWrapper=function(url){const wrapper=`await import(\"${url}\");`;return URL.createObjectURL(new Blob([wrapper],{type:\"text/javascript\"}));};}class PDFWorker{constructor({name=null,port=null,verbosity=(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.getVerbosityLevel)()}={}){this.name=name;this.destroyed=false;this.verbosity=verbosity;this._readyCapability=Promise.withResolvers();this._port=null;this._webWorker=null;this._messageHandler=null;if(port){if(_workerPorts._?.has(port)){throw new Error(\"Cannot use more than one PDFWorker per port.\");}(_workerPorts._||(_workerPorts._=new WeakMap())).set(port,this);this._initializeFromPort(port);return;}this._initialize();}get promise(){return this._readyCapability.promise;}get port(){return this._port;}get messageHandler(){return this._messageHandler;}_initializeFromPort(port){this._port=port;this._messageHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(\"main\",\"worker\",port);this._messageHandler.on(\"ready\",function(){});this._readyCapability.resolve();this._messageHandler.send(\"configure\",{verbosity:this.verbosity});}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_get_mainThreadWorkerMessageHandler(PDFWorker)){let{workerSrc}=PDFWorker;try{if(!PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)){workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href);}const worker=new Worker(workerSrc,{type:\"module\"});const messageHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(\"main\",\"worker\",worker);const terminateEarly=()=>{worker.removeEventListener(\"error\",onWorkerError);messageHandler.destroy();worker.terminate();if(this.destroyed){this._readyCapability.reject(new Error(\"Worker was destroyed\"));}else{this._setupFakeWorker();}};const onWorkerError=()=>{if(!this._webWorker){terminateEarly();}};worker.addEventListener(\"error\",onWorkerError);messageHandler.on(\"test\",data=>{worker.removeEventListener(\"error\",onWorkerError);if(this.destroyed){terminateEarly();return;}if(data){this._messageHandler=messageHandler;this._port=worker;this._webWorker=worker;this._readyCapability.resolve();messageHandler.send(\"configure\",{verbosity:this.verbosity});}else{this._setupFakeWorker();messageHandler.destroy();worker.terminate();}});messageHandler.on(\"ready\",data=>{worker.removeEventListener(\"error\",onWorkerError);if(this.destroyed){terminateEarly();return;}try{sendTest();}catch{this._setupFakeWorker();}});const sendTest=()=>{const testObj=new Uint8Array();messageHandler.send(\"test\",testObj,[testObj.buffer]);};sendTest();return;}catch{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.info)(\"The worker has been disabled.\");}}this._setupFakeWorker();}_setupFakeWorker(){if(!PDFWorkerUtil.isWorkerDisabled){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Setting up fake worker.\");PDFWorkerUtil.isWorkerDisabled=true;}PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler=>{if(this.destroyed){this._readyCapability.reject(new Error(\"Worker was destroyed\"));return;}const port=new LoopbackPort();this._port=port;const id=`fake${PDFWorkerUtil.fakeWorkerId++}`;const workerHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(id+\"_worker\",id,port);WorkerMessageHandler.setup(workerHandler,port);const messageHandler=new _shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__.MessageHandler(id,id+\"_worker\",port);this._messageHandler=messageHandler;this._readyCapability.resolve();messageHandler.send(\"configure\",{verbosity:this.verbosity});}).catch(reason=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));});}destroy(){this.destroyed=true;if(this._webWorker){this._webWorker.terminate();this._webWorker=null;}_workerPorts._?.delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null;}}static fromPort(params){if(!params?.port){throw new Error(\"PDFWorker.fromPort - invalid method signature.\");}const cachedPort=_assertClassBrand(PDFWorker,this,_workerPorts)._?.get(params.port);if(cachedPort){if(cachedPort._pendingDestroy){throw new Error(\"PDFWorker.fromPort - the worker is being destroyed.\\n\"+\"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");}return cachedPort;}return new PDFWorker(params);}static get workerSrc(){if(_worker_options_js__WEBPACK_IMPORTED_MODULE_14__.GlobalWorkerOptions.workerSrc){return _worker_options_js__WEBPACK_IMPORTED_MODULE_14__.GlobalWorkerOptions.workerSrc;}throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');}static get _setupFakeWorkerGlobal(){const loader=async()=>{if(_classPrivateGetter(PDFWorker,this,_get_mainThreadWorkerMessageHandler)){return _classPrivateGetter(PDFWorker,this,_get_mainThreadWorkerMessageHandler);}const worker=await import(/*webpackIgnore: true*/this.workerSrc);return worker.WorkerMessageHandler;};return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_setupFakeWorkerGlobal\",loader());}}function _get_mainThreadWorkerMessageHandler(_this){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null;}catch{return null;}}var _workerPorts={_:void 0};var _methodPromises=/*#__PURE__*/new WeakMap();var _pageCache=/*#__PURE__*/new WeakMap();var _pagePromises=/*#__PURE__*/new WeakMap();var _pageRefCache=/*#__PURE__*/new WeakMap();var _passwordCapability=/*#__PURE__*/new WeakMap();var _WorkerTransport_brand=/*#__PURE__*/new WeakSet();class WorkerTransport{constructor(messageHandler,loadingTask,networkStream,params,factory){_classPrivateMethodInitSpec(this,_WorkerTransport_brand);_classPrivateFieldInitSpec(this,_methodPromises,new Map());_classPrivateFieldInitSpec(this,_pageCache,new Map());_classPrivateFieldInitSpec(this,_pagePromises,new Map());_classPrivateFieldInitSpec(this,_pageRefCache,new Map());_classPrivateFieldInitSpec(this,_passwordCapability,null);this.messageHandler=messageHandler;this.loadingTask=loadingTask;this.commonObjs=new PDFObjects();this.fontLoader=new _font_loader_js__WEBPACK_IMPORTED_MODULE_3__.FontLoader({ownerDocument:params.ownerDocument,styleElement:params.styleElement});this._params=params;this.canvasFactory=factory.canvasFactory;this.filterFactory=factory.filterFactory;this.cMapReaderFactory=factory.cMapReaderFactory;this.standardFontDataFactory=factory.standardFontDataFactory;this.destroyed=false;this.destroyCapability=null;this._networkStream=networkStream;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=Promise.withResolvers();this.setupMessageHandler();}get annotationStorage(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"annotationStorage\",new _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationStorage());}getRenderingIntent(intent,annotationMode=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE,printAnnotationStorage=null,isOpList=false){let renderingIntent=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.DISPLAY;let annotationStorageSerializable=_annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.SerializableEmpty;switch(intent){case\"any\":renderingIntent=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANY;break;case\"display\":break;case\"print\":renderingIntent=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT;break;default:(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`getRenderingIntent - invalid intent: ${intent}`);}switch(annotationMode){case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.DISABLE:renderingIntent+=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE:break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS:renderingIntent+=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.ANNOTATIONS_STORAGE;const annotationStorage=renderingIntent&_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage;annotationStorageSerializable=annotationStorage.serializable;break;default:(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);}if(isOpList){renderingIntent+=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.OPLIST;}return{renderingIntent,cacheKey:`${renderingIntent}_${annotationStorageSerializable.hash}`,annotationStorageSerializable};}destroy(){if(this.destroyCapability){return this.destroyCapability.promise;}this.destroyed=true;this.destroyCapability=Promise.withResolvers();_classPrivateFieldGet(_passwordCapability,this)?.reject(new Error(\"Worker was destroyed during onPassword callback\"));const waitOn=[];for(const page of _classPrivateFieldGet(_pageCache,this).values()){waitOn.push(page._destroy());}_classPrivateFieldGet(_pageCache,this).clear();_classPrivateFieldGet(_pagePromises,this).clear();_classPrivateFieldGet(_pageRefCache,this).clear();if(this.hasOwnProperty(\"annotationStorage\")){this.annotationStorage.resetModified();}const terminated=this.messageHandler.sendWithPromise(\"Terminate\",null);waitOn.push(terminated);Promise.all(waitOn).then(()=>{this.commonObjs.clear();this.fontLoader.clear();_classPrivateFieldGet(_methodPromises,this).clear();this.filterFactory.destroy();(0,_text_layer_js__WEBPACK_IMPORTED_MODULE_6__.cleanupTextLayer)();this._networkStream?.cancelAllRequests(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"Worker was terminated.\"));if(this.messageHandler){this.messageHandler.destroy();this.messageHandler=null;}this.destroyCapability.resolve();},this.destroyCapability.reject);return this.destroyCapability.promise;}setupMessageHandler(){const{messageHandler,loadingTask}=this;messageHandler.on(\"GetReader\",(data,sink)=>{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._networkStream,\"GetReader - no `IPDFStream` instance available.\");this._fullReader=this._networkStream.getFullReader();this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total};};sink.onPull=()=>{this._fullReader.read().then(function({value,done}){if(done){sink.close();return;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(value instanceof ArrayBuffer,\"GetReader - expected an ArrayBuffer.\");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(reason=>{sink.error(reason);});};sink.onCancel=reason=>{this._fullReader.cancel(reason);sink.ready.catch(readyReason=>{if(this.destroyed){return;}throw readyReason;});};});messageHandler.on(\"ReaderHeadersReady\",data=>{const headersCapability=Promise.withResolvers();const fullReader=this._fullReader;fullReader.headersReady.then(()=>{if(!fullReader.isStreamingSupported||!fullReader.isRangeSupported){if(this._lastProgress){loadingTask.onProgress?.(this._lastProgress);}fullReader.onProgress=evt=>{loadingTask.onProgress?.({loaded:evt.loaded,total:evt.total});};}headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength});},headersCapability.reject);return headersCapability.promise;});messageHandler.on(\"GetRangeReader\",(data,sink)=>{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._networkStream,\"GetRangeReader - no `IPDFStream` instance available.\");const rangeReader=this._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return;}sink.onPull=()=>{rangeReader.read().then(function({value,done}){if(done){sink.close();return;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(value instanceof ArrayBuffer,\"GetRangeReader - expected an ArrayBuffer.\");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(reason=>{sink.error(reason);});};sink.onCancel=reason=>{rangeReader.cancel(reason);sink.ready.catch(readyReason=>{if(this.destroyed){return;}throw readyReason;});};});messageHandler.on(\"GetDoc\",({pdfInfo})=>{this._numPages=pdfInfo.numPages;this._htmlForXfa=pdfInfo.htmlForXfa;delete pdfInfo.htmlForXfa;loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this));});messageHandler.on(\"DocException\",function(ex){let reason;switch(ex.name){case\"PasswordException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(ex.message,ex.code);break;case\"InvalidPDFException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.InvalidPDFException(ex.message);break;case\"MissingPDFException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(ex.message);break;case\"UnexpectedResponseException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException(ex.message,ex.status);break;case\"UnknownErrorException\":reason=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(ex.message,ex.details);break;default:(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"DocException - expected a valid Error.\");}loadingTask._capability.reject(reason);});messageHandler.on(\"PasswordRequest\",exception=>{_classPrivateFieldSet(_passwordCapability,this,Promise.withResolvers());if(loadingTask.onPassword){const updatePassword=password=>{if(password instanceof Error){_classPrivateFieldGet(_passwordCapability,this).reject(password);}else{_classPrivateFieldGet(_passwordCapability,this).resolve({password});}};try{loadingTask.onPassword(updatePassword,exception.code);}catch(ex){_classPrivateFieldGet(_passwordCapability,this).reject(ex);}}else{_classPrivateFieldGet(_passwordCapability,this).reject(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(exception.message,exception.code));}return _classPrivateFieldGet(_passwordCapability,this).promise;});messageHandler.on(\"DataLoaded\",data=>{loadingTask.onProgress?.({loaded:data.length,total:data.length});this.downloadInfoCapability.resolve(data);});messageHandler.on(\"StartRenderPage\",data=>{if(this.destroyed){return;}const page=_classPrivateFieldGet(_pageCache,this).get(data.pageIndex);page._startRenderPage(data.transparency,data.cacheKey);});messageHandler.on(\"commonobj\",([id,type,exportedData])=>{if(this.destroyed){return null;}if(this.commonObjs.has(id)){return null;}switch(type){case\"Font\":const params=this._params;if(\"error\"in exportedData){const exportedError=exportedData.error;(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Error during font loading: ${exportedError}`);this.commonObjs.resolve(id,exportedError);break;}const inspectFont=params.pdfBug&&globalThis.FontInspector?.enabled?(font,url)=>globalThis.FontInspector.fontAdded(font,url):null;const font=new _font_loader_js__WEBPACK_IMPORTED_MODULE_3__.FontFaceObject(exportedData,{disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,inspectFont});this.fontLoader.bind(font).catch(()=>messageHandler.sendWithPromise(\"FontFallback\",{id})).finally(()=>{if(!params.fontExtraProperties&&font.data){font.data=null;}this.commonObjs.resolve(id,font);});break;case\"CopyLocalImage\":const{imageRef}=exportedData;(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(imageRef,\"The imageRef must be defined.\");for(const pageProxy of _classPrivateFieldGet(_pageCache,this).values()){for(const[,data]of pageProxy.objs){if(data.ref!==imageRef){continue;}if(!data.dataLen){return null;}this.commonObjs.resolve(id,structuredClone(data));return data.dataLen;}}break;case\"FontPath\":case\"Image\":case\"Pattern\":this.commonObjs.resolve(id,exportedData);break;default:throw new Error(`Got unknown common object type ${type}`);}return null;});messageHandler.on(\"obj\",([id,pageIndex,type,imageData])=>{if(this.destroyed){return;}const pageProxy=_classPrivateFieldGet(_pageCache,this).get(pageIndex);if(pageProxy.objs.has(id)){return;}if(pageProxy._intentStates.size===0){imageData?.bitmap?.close();return;}switch(type){case\"Image\":pageProxy.objs.resolve(id,imageData);if(imageData?.dataLen>_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MAX_IMAGE_SIZE_TO_CACHE){pageProxy._maybeCleanupAfterRender=true;}break;case\"Pattern\":pageProxy.objs.resolve(id,imageData);break;default:throw new Error(`Got unknown object type ${type}`);}});messageHandler.on(\"DocProgress\",data=>{if(this.destroyed){return;}loadingTask.onProgress?.({loaded:data.loaded,total:data.total});});messageHandler.on(\"FetchBuiltInCMap\",data=>{if(this.destroyed){return Promise.reject(new Error(\"Worker was destroyed.\"));}if(!this.cMapReaderFactory){return Promise.reject(new Error(\"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"));}return this.cMapReaderFactory.fetch(data);});messageHandler.on(\"FetchStandardFontData\",data=>{if(this.destroyed){return Promise.reject(new Error(\"Worker was destroyed.\"));}if(!this.standardFontDataFactory){return Promise.reject(new Error(\"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"));}return this.standardFontDataFactory.fetch(data);});}getData(){return this.messageHandler.sendWithPromise(\"GetData\",null);}saveDocument(){if(this.annotationStorage.size<=0){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"saveDocument called while `annotationStorage` is empty, \"+\"please use the getData-method instead.\");}const{map,transfer}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise(\"SaveDocument\",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:map,filename:this._fullReader?.filename??null},transfer).finally(()=>{this.annotationStorage.resetModified();});}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages){return Promise.reject(new Error(\"Invalid page request.\"));}const pageIndex=pageNumber-1,cachedPromise=_classPrivateFieldGet(_pagePromises,this).get(pageIndex);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(\"GetPage\",{pageIndex}).then(pageInfo=>{if(this.destroyed){throw new Error(\"Transport destroyed\");}if(pageInfo.refStr){_classPrivateFieldGet(_pageRefCache,this).set(pageInfo.refStr,pageNumber);}const page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.pdfBug);_classPrivateFieldGet(_pageCache,this).set(pageIndex,page);return page;});_classPrivateFieldGet(_pagePromises,this).set(pageIndex,promise);return promise;}getPageIndex(ref){if(!isRefProxy(ref)){return Promise.reject(new Error(\"Invalid pageIndex request.\"));}return this.messageHandler.sendWithPromise(\"GetPageIndex\",{num:ref.num,gen:ref.gen});}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise(\"GetAnnotations\",{pageIndex,intent});}getFieldObjects(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,\"GetFieldObjects\");}hasJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,\"HasJSActions\");}getCalculationOrderIds(){return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\",null);}getDestinations(){return this.messageHandler.sendWithPromise(\"GetDestinations\",null);}getDestination(id){if(typeof id!==\"string\"){return Promise.reject(new Error(\"Invalid destination request.\"));}return this.messageHandler.sendWithPromise(\"GetDestination\",{id});}getPageLabels(){return this.messageHandler.sendWithPromise(\"GetPageLabels\",null);}getPageLayout(){return this.messageHandler.sendWithPromise(\"GetPageLayout\",null);}getPageMode(){return this.messageHandler.sendWithPromise(\"GetPageMode\",null);}getViewerPreferences(){return this.messageHandler.sendWithPromise(\"GetViewerPreferences\",null);}getOpenAction(){return this.messageHandler.sendWithPromise(\"GetOpenAction\",null);}getAttachments(){return this.messageHandler.sendWithPromise(\"GetAttachments\",null);}getDocJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,\"GetDocJSActions\");}getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise(\"GetPageJSActions\",{pageIndex});}getStructTree(pageIndex){return this.messageHandler.sendWithPromise(\"GetStructTree\",{pageIndex});}getOutline(){return this.messageHandler.sendWithPromise(\"GetOutline\",null);}getOptionalContentConfig(renderingIntent){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,\"GetOptionalContentConfig\").then(data=>new _optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__.OptionalContentConfig(data,renderingIntent));}getPermissions(){return this.messageHandler.sendWithPromise(\"GetPermissions\",null);}getMetadata(){const name=\"GetMetadata\",cachedPromise=_classPrivateFieldGet(_methodPromises,this).get(name);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(name,null).then(results=>({info:results[0],metadata:results[1]?new _metadata_js__WEBPACK_IMPORTED_MODULE_8__.Metadata(results[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));_classPrivateFieldGet(_methodPromises,this).set(name,promise);return promise;}getMarkInfo(){return this.messageHandler.sendWithPromise(\"GetMarkInfo\",null);}async startCleanup(keepLoadedFonts=false){if(this.destroyed){return;}await this.messageHandler.sendWithPromise(\"Cleanup\",null);for(const page of _classPrivateFieldGet(_pageCache,this).values()){const cleanupSuccessful=page.cleanup();if(!cleanupSuccessful){throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);}}this.commonObjs.clear();if(!keepLoadedFonts){this.fontLoader.clear();}_classPrivateFieldGet(_methodPromises,this).clear();this.filterFactory.destroy(true);(0,_text_layer_js__WEBPACK_IMPORTED_MODULE_6__.cleanupTextLayer)();}cachedPageNumber(ref){if(!isRefProxy(ref)){return null;}const refStr=ref.gen===0?`${ref.num}R`:`${ref.num}R${ref.gen}`;return _classPrivateFieldGet(_pageRefCache,this).get(refStr)??null;}get loadingParams(){const{disableAutoFetch,enableXfa}=this._params;return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"loadingParams\",{disableAutoFetch,enableXfa});}}function _cacheSimpleMethod(name,data=null){const cachedPromise=_classPrivateFieldGet(_methodPromises,this).get(name);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(name,data);_classPrivateFieldGet(_methodPromises,this).set(name,promise);return promise;}const INITIAL_DATA=Symbol(\"INITIAL_DATA\");var _objs=/*#__PURE__*/new WeakMap();var _PDFObjects_brand=/*#__PURE__*/new WeakSet();class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_PDFObjects_brand);_classPrivateFieldInitSpec(this,_objs,Object.create(null));}get(objId,callback=null){if(callback){const obj=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,objId);obj.promise.then(()=>callback(obj.data));return null;}const obj=_classPrivateFieldGet(_objs,this)[objId];if(!obj||obj.data===INITIAL_DATA){throw new Error(`Requesting object that isn't resolved yet ${objId}.`);}return obj.data;}has(objId){const obj=_classPrivateFieldGet(_objs,this)[objId];return!!obj&&obj.data!==INITIAL_DATA;}resolve(objId,data=null){const obj=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,objId);obj.data=data;obj.resolve();}clear(){for(const objId in _classPrivateFieldGet(_objs,this)){const{data}=_classPrivateFieldGet(_objs,this)[objId];data?.bitmap?.close();}_classPrivateFieldSet(_objs,this,Object.create(null));}*[Symbol.iterator](){for(const objId in _classPrivateFieldGet(_objs,this)){const{data}=_classPrivateFieldGet(_objs,this)[objId];if(data===INITIAL_DATA){continue;}yield[objId,data];}}}function _ensureObj(objId){return _classPrivateFieldGet(_objs,this)[objId]||={...Promise.withResolvers(),data:INITIAL_DATA};}var _internalRenderTask=/*#__PURE__*/new WeakMap();class RenderTask{constructor(internalRenderTask){_classPrivateFieldInitSpec(this,_internalRenderTask,null);_classPrivateFieldSet(_internalRenderTask,this,internalRenderTask);this.onContinue=null;}get promise(){return _classPrivateFieldGet(_internalRenderTask,this).capability.promise;}cancel(extraDelay=0){_classPrivateFieldGet(_internalRenderTask,this).cancel(null,extraDelay);}get separateAnnots(){const{separateAnnots}=_classPrivateFieldGet(_internalRenderTask,this).operatorList;if(!separateAnnots){return false;}const{annotationCanvasMap}=_classPrivateFieldGet(_internalRenderTask,this);return separateAnnots.form||separateAnnots.canvas&&annotationCanvasMap?.size>0;}}class InternalRenderTask{constructor({callback,params,objs,commonObjs,annotationCanvasMap,operatorList,pageIndex,canvasFactory,filterFactory,useRequestAnimationFrame=false,pdfBug=false,pageColors=null}){this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.annotationCanvasMap=annotationCanvasMap;this.operatorListIdx=null;this.operatorList=operatorList;this._pageIndex=pageIndex;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this._pdfBug=pdfBug;this.pageColors=pageColors;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this._useRequestAnimationFrame=useRequestAnimationFrame===true&&typeof window!==\"undefined\";this.cancelled=false;this.capability=Promise.withResolvers();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=params.canvasContext.canvas;}get completed(){return this.capability.promise.catch(function(){});}initializeGraphics({transparency=false,optionalContentConfig}){if(this.cancelled){return;}if(this._canvas){if(_canvasInUse._.has(this._canvas)){throw new Error(\"Cannot use the same canvas during multiple render() operations. \"+\"Use different canvas or ensure previous operations were \"+\"cancelled or completed.\");}_canvasInUse._.add(this._canvas);}if(this._pdfBug&&globalThis.StepperManager?.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint();}const{canvasContext,viewport,transform,background}=this.params;this.gfx=new _canvas_js__WEBPACK_IMPORTED_MODULE_5__.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig},this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform,viewport,transparency,background});this.operatorListIdx=0;this.graphicsReady=true;this.graphicsReadyCallback?.();}cancel(error=null,extraDelay=0){this.running=false;this.cancelled=true;this.gfx?.endDrawing();_canvasInUse._.delete(this._canvas);this.callback(error||new _display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,extraDelay));}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return;}this.stepper?.updateOperatorList(this.operatorList);if(this.running){return;}this._continue();}_continue(){this.running=true;if(this.cancelled){return;}if(this.task.onContinue){this.task.onContinue(this._scheduleNextBound);}else{this._scheduleNext();}}_scheduleNext(){if(this._useRequestAnimationFrame){window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound);});}else{Promise.resolve().then(this._nextBound).catch(this._cancelBound);}}async _next(){if(this.cancelled){return;}this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing();_canvasInUse._.delete(this._canvas);this.callback();}}}}var _canvasInUse={_:new WeakSet()};const version=\"4.2.67\";const build=\"49b388101\";__webpack_async_result__();}catch(e){__webpack_async_result__(e);}});/***/}),/***/583:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */BaseCMapReaderFactory:()=>(/* binding */BaseCMapReaderFactory),/* harmony export */BaseCanvasFactory:()=>(/* binding */BaseCanvasFactory),/* harmony export */BaseFilterFactory:()=>(/* binding */BaseFilterFactory),/* harmony export */BaseSVGFactory:()=>(/* binding */BaseSVGFactory),/* harmony export */BaseStandardFontDataFactory:()=>(/* binding */BaseStandardFontDataFactory)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);class BaseFilterFactory{constructor(){if(this.constructor===BaseFilterFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseFilterFactory.\");}}addFilter(maps){return\"none\";}addHCMFilter(fgColor,bgColor){return\"none\";}addHighlightHCMFilter(filterName,fgColor,bgColor,newFgColor,newBgColor){return\"none\";}destroy(keepHCM=false){}}class BaseCanvasFactory{constructor(){if(this.constructor===BaseCanvasFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseCanvasFactory.\");}}create(width,height){if(width<=0||height<=0){throw new Error(\"Invalid canvas size\");}const canvas=this._createCanvas(width,height);return{canvas,context:canvas.getContext(\"2d\")};}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas){throw new Error(\"Canvas is not specified\");}if(width<=0||height<=0){throw new Error(\"Invalid canvas size\");}canvasAndContext.canvas.width=width;canvasAndContext.canvas.height=height;}destroy(canvasAndContext){if(!canvasAndContext.canvas){throw new Error(\"Canvas is not specified\");}canvasAndContext.canvas.width=0;canvasAndContext.canvas.height=0;canvasAndContext.canvas=null;canvasAndContext.context=null;}_createCanvas(width,height){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_createCanvas` called.\");}}class BaseCMapReaderFactory{constructor({baseUrl=null,isCompressed=true}){if(this.constructor===BaseCMapReaderFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseCMapReaderFactory.\");}this.baseUrl=baseUrl;this.isCompressed=isCompressed;}async fetch({name}){if(!this.baseUrl){throw new Error('The CMap \"baseUrl\" parameter must be specified, ensure that '+'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.');}if(!name){throw new Error(\"CMap name must be specified.\");}const url=this.baseUrl+name+(this.isCompressed?\".bcmap\":\"\");const compressionType=this.isCompressed?_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType.BINARY:_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType.NONE;return this._fetchData(url,compressionType).catch(reason=>{throw new Error(`Unable to load ${this.isCompressed?\"binary \":\"\"}CMap at: ${url}`);});}_fetchData(url,compressionType){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_fetchData` called.\");}}class BaseStandardFontDataFactory{constructor({baseUrl=null}){if(this.constructor===BaseStandardFontDataFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseStandardFontDataFactory.\");}this.baseUrl=baseUrl;}async fetch({filename}){if(!this.baseUrl){throw new Error('The standard font \"baseUrl\" parameter must be specified, ensure that '+'the \"standardFontDataUrl\" API parameter is provided.');}if(!filename){throw new Error(\"Font filename must be specified.\");}const url=`${this.baseUrl}${filename}`;return this._fetchData(url).catch(reason=>{throw new Error(`Unable to load font data at: ${url}`);});}_fetchData(url){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_fetchData` called.\");}}class BaseSVGFactory{constructor(){if(this.constructor===BaseSVGFactory){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Cannot initialize BaseSVGFactory.\");}}create(width,height,skipDimensions=false){if(width<=0||height<=0){throw new Error(\"Invalid SVG dimensions\");}const svg=this._createSVG(\"svg:svg\");svg.setAttribute(\"version\",\"1.1\");if(!skipDimensions){svg.setAttribute(\"width\",`${width}px`);svg.setAttribute(\"height\",`${height}px`);}svg.setAttribute(\"preserveAspectRatio\",\"none\");svg.setAttribute(\"viewBox\",`0 0 ${width} ${height}`);return svg;}createElement(type){if(typeof type!==\"string\"){throw new Error(\"Invalid SVG element type\");}return this._createSVG(type);}_createSVG(type){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Abstract method `_createSVG` called.\");}}/***/}),/***/923:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{// EXPORTS\n__webpack_require__.d(__webpack_exports__,{CanvasGraphics:()=>(/* binding */CanvasGraphics)});// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);;// CONCATENATED MODULE: ./src/display/pattern_helper.js\nconst PathType={FILL:\"Fill\",STROKE:\"Stroke\",SHADING:\"Shading\"};function applyBoundingBox(ctx,bbox){if(!bbox){return;}const width=bbox[2]-bbox[0];const height=bbox[3]-bbox[1];const region=new Path2D();region.rect(bbox[0],bbox[1],width,height);ctx.clip(region);}class BaseShadingPattern{constructor(){if(this.constructor===BaseShadingPattern){(0,util.unreachable)(\"Cannot initialize BaseShadingPattern.\");}}getPattern(){(0,util.unreachable)(\"Abstract method `getPattern` called.\");}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(IR){super();this._type=IR[1];this._bbox=IR[2];this._colorStops=IR[3];this._p0=IR[4];this._p1=IR[5];this._r0=IR[6];this._r1=IR[7];this.matrix=null;}_createGradient(ctx){let grad;if(this._type===\"axial\"){grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]);}else if(this._type===\"radial\"){grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1);}for(const colorStop of this._colorStops){grad.addColorStop(colorStop[0],colorStop[1]);}return grad;}getPattern(ctx,owner,inverse,pathType){let pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){const ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,display_utils.getCurrentTransform)(ctx))||[0,0,0,0];const width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1;const height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1;const tmpCanvas=owner.cachedCanvases.getCanvas(\"pattern\",width,height,true);const tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.beginPath();tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]);inverse=util.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]);tmpCtx.transform(...owner.baseTransform);if(this.matrix){tmpCtx.transform(...this.matrix);}applyBoundingBox(tmpCtx,this._bbox);tmpCtx.fillStyle=this._createGradient(tmpCtx);tmpCtx.fill();pattern=ctx.createPattern(tmpCanvas.canvas,\"no-repeat\");const domMatrix=new DOMMatrix(inverse);pattern.setTransform(domMatrix);}else{applyBoundingBox(ctx,this._bbox);pattern=this._createGradient(ctx);}return pattern;}}function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){const coords=context.coords,colors=context.colors;const bytes=data.data,rowSize=data.width*4;let tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp;}if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}const x1=(coords[p1]+context.offsetX)*context.scaleX;const y1=(coords[p1+1]+context.offsetY)*context.scaleY;const x2=(coords[p2]+context.offsetX)*context.scaleX;const y2=(coords[p2+1]+context.offsetY)*context.scaleY;const x3=(coords[p3]+context.offsetX)*context.scaleX;const y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return;}const c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];const c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];const c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];const minY=Math.round(y1),maxY=Math.round(y3);let xa,car,cag,cab;let xb,cbr,cbg,cbb;for(let y=minY;y<=maxY;y++){if(y<y2){const k=y<y1?0:(y1-y)/(y1-y2);xa=x1-(x1-x2)*k;car=c1r-(c1r-c2r)*k;cag=c1g-(c1g-c2g)*k;cab=c1b-(c1b-c2b)*k;}else{let k;if(y>y3){k=1;}else if(y2===y3){k=0;}else{k=(y2-y)/(y2-y3);}xa=x2-(x2-x3)*k;car=c2r-(c2r-c3r)*k;cag=c2g-(c2g-c3g)*k;cab=c2b-(c2b-c3b)*k;}let k;if(y<y1){k=0;}else if(y>y3){k=1;}else{k=(y1-y)/(y1-y3);}xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;const x1_=Math.round(Math.min(xa,xb));const x2_=Math.round(Math.max(xa,xb));let j=rowSize*y+x1_*4;for(let x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);if(k<0){k=0;}else if(k>1){k=1;}bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255;}}}function drawFigure(data,figure,context){const ps=figure.coords;const cs=figure.colors;let i,ii;switch(figure.type){case\"lattice\":const verticesPerRow=figure.verticesPerRow;const rows=Math.floor(ps.length/verticesPerRow)-1;const cols=verticesPerRow-1;for(i=0;i<rows;i++){let q=i*verticesPerRow;for(let j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);}}break;case\"triangles\":for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);}break;default:throw new Error(\"illegal figure\");}}class MeshShadingPattern extends BaseShadingPattern{constructor(IR){super();this._coords=IR[2];this._colors=IR[3];this._figures=IR[4];this._bounds=IR[5];this._bbox=IR[7];this._background=IR[8];this.matrix=null;}_createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){const EXPECTED_SCALE=1.1;const MAX_PATTERN_SIZE=3000;const BORDER_SIZE=2;const offsetX=Math.floor(this._bounds[0]);const offsetY=Math.floor(this._bounds[1]);const boundsWidth=Math.ceil(this._bounds[2])-offsetX;const boundsHeight=Math.ceil(this._bounds[3])-offsetY;const width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);const height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);const scaleX=boundsWidth/width;const scaleY=boundsHeight/height;const context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY};const paddedWidth=width+BORDER_SIZE*2;const paddedHeight=height+BORDER_SIZE*2;const tmpCanvas=cachedCanvases.getCanvas(\"mesh\",paddedWidth,paddedHeight,false);const tmpCtx=tmpCanvas.context;const data=tmpCtx.createImageData(width,height);if(backgroundColor){const bytes=data.data;for(let i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255;}}for(const figure of this._figures){drawFigure(data,figure,context);}tmpCtx.putImageData(data,BORDER_SIZE,BORDER_SIZE);const canvas=tmpCanvas.canvas;return{canvas,offsetX:offsetX-BORDER_SIZE*scaleX,offsetY:offsetY-BORDER_SIZE*scaleY,scaleX,scaleY};}getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);let scale;if(pathType===PathType.SHADING){scale=util.Util.singularValueDecompose2dScale((0,display_utils.getCurrentTransform)(ctx));}else{scale=util.Util.singularValueDecompose2dScale(owner.baseTransform);if(this.matrix){const matrixScale=util.Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]];}}const temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);if(pathType!==PathType.SHADING){ctx.setTransform(...owner.baseTransform);if(this.matrix){ctx.transform(...this.matrix);}}ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,\"no-repeat\");}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return\"hotpink\";}}function getShadingPattern(IR){switch(IR[0]){case\"RadialAxial\":return new RadialAxialShadingPattern(IR);case\"Mesh\":return new MeshShadingPattern(IR);case\"Dummy\":return new DummyShadingPattern();}throw new Error(`Unknown IR type: ${IR[0]}`);}const PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{constructor(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2];this.matrix=IR[3]||[1,0,0,1,0,0];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.ctx=ctx;this.canvasGraphicsFactory=canvasGraphicsFactory;this.baseTransform=baseTransform;}createPatternCanvas(owner){const operatorList=this.operatorList;const bbox=this.bbox;const xstep=this.xstep;const ystep=this.ystep;const paintType=this.paintType;const tilingType=this.tilingType;const color=this.color;const canvasGraphicsFactory=this.canvasGraphicsFactory;(0,util.info)(\"TilingType: \"+tilingType);const x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];const matrixScale=util.Util.singularValueDecompose2dScale(this.matrix);const curMatrixScale=util.Util.singularValueDecompose2dScale(this.baseTransform);const combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]];const dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]);const dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]);const tmpCanvas=owner.cachedCanvases.getCanvas(\"pattern\",dimx.size,dimy.size,true);const tmpCtx=tmpCanvas.context;const graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(graphics,paintType,color);let adjustedX0=x0;let adjustedY0=y0;let adjustedX1=x1;let adjustedY1=y1;if(x0<0){adjustedX0=0;adjustedX1+=Math.abs(x0);}if(y0<0){adjustedY0=0;adjustedY1+=Math.abs(y0);}tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0));graphics.transform(dimx.scale,0,0,dimy.scale,0,0);tmpCtx.save();this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1);graphics.baseTransform=(0,display_utils.getCurrentTransform)(graphics.ctx);graphics.executeOperatorList(operatorList);graphics.endDrawing();return{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0};}getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);const maxSize=Math.max(TilingPattern.MAX_PATTERN_SIZE,realOutputSize);let size=Math.ceil(step*scale);if(size>=maxSize){size=maxSize;}else{scale=size/step;}return{scale,size};}clipBbox(graphics,x0,y0,x1,y1){const bboxWidth=x1-x0;const bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.current.updateRectMinMax((0,display_utils.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]);graphics.clip();graphics.endPath();}setFillAndStrokeStyleToContext(graphics,paintType,color){const context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:const ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;current.fillColor=ctx.fillStyle;current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:const cssColor=util.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor;context.strokeStyle=cssColor;current.fillColor=cssColor;current.strokeColor=cssColor;break;default:throw new util.FormatError(`Unsupported paint type: ${paintType}`);}}getPattern(ctx,owner,inverse,pathType){let matrix=inverse;if(pathType!==PathType.SHADING){matrix=util.Util.transform(matrix,owner.baseTransform);if(this.matrix){matrix=util.Util.transform(matrix,this.matrix);}}const temporaryPatternCanvas=this.createPatternCanvas(owner);let domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);const pattern=ctx.createPattern(temporaryPatternCanvas.canvas,\"repeat\");pattern.setTransform(domMatrix);return pattern;}}_defineProperty(TilingPattern,\"MAX_PATTERN_SIZE\",3000);;// CONCATENATED MODULE: ./src/shared/image_utils.js\nfunction convertToRGBA(params){switch(params.kind){case ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case ImageKind.RGB_24BPP:return convertRGBToRGBA(params);}return null;}function convertBlackAndWhiteToRGBA({src,srcPos=0,dest,width,height,nonBlackColor=0xffffffff,inverseDecode=false}){const black=util.FeatureTest.isLittleEndian?0xff000000:0x000000ff;const[zeroMapping,oneMapping]=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor];const widthInSource=width>>3;const widthRemainder=width&7;const srcLength=src.length;dest=new Uint32Array(dest.buffer);let destPos=0;for(let i=0;i<height;i++){for(const max=srcPos+widthInSource;srcPos<max;srcPos++){const elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=elem&0b10000000?oneMapping:zeroMapping;dest[destPos++]=elem&0b1000000?oneMapping:zeroMapping;dest[destPos++]=elem&0b100000?oneMapping:zeroMapping;dest[destPos++]=elem&0b10000?oneMapping:zeroMapping;dest[destPos++]=elem&0b1000?oneMapping:zeroMapping;dest[destPos++]=elem&0b100?oneMapping:zeroMapping;dest[destPos++]=elem&0b10?oneMapping:zeroMapping;dest[destPos++]=elem&0b1?oneMapping:zeroMapping;}if(widthRemainder===0){continue;}const elem=srcPos<srcLength?src[srcPos++]:255;for(let j=0;j<widthRemainder;j++){dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping;}}return{srcPos,destPos};}function convertRGBToRGBA({src,srcPos=0,dest,destPos=0,width,height}){let i=0;const len32=src.length>>2;const src32=new Uint32Array(src.buffer,srcPos,len32);if(FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){const s1=src32[i];const s2=src32[i+1];const s3=src32[i+2];dest[destPos]=s1|0xff000000;dest[destPos+1]=s1>>>24|s2<<8|0xff000000;dest[destPos+2]=s2>>>16|s3<<16|0xff000000;dest[destPos+3]=s3>>>8|0xff000000;}for(let j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|0xff000000;}}else{for(;i<len32-2;i+=3,destPos+=4){const s1=src32[i];const s2=src32[i+1];const s3=src32[i+2];dest[destPos]=s1|0xff;dest[destPos+1]=s1<<24|s2>>>8|0xff;dest[destPos+2]=s2<<16|s3>>>16|0xff;dest[destPos+3]=s3<<8|0xff;}for(let j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]<<24|src[j+1]<<16|src[j+2]<<8|0xff;}}return{srcPos,destPos};}function grayToRGBA(src,dest){if(FeatureTest.isLittleEndian){for(let i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x10101|0xff000000;}}else{for(let i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x1010100|0x000000ff;}}};// CONCATENATED MODULE: ./src/display/canvas.js\nconst MIN_FONT_SIZE=16;const MAX_FONT_SIZE=100;const MAX_GROUP_SIZE=4096;const EXECUTION_TIME=15;const EXECUTION_STEPS=10;const MAX_SIZE_TO_COMPILE=1000;const FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring){throw new Error(\"Context is already forwarding operations.\");}ctx.__originalSave=ctx.save;ctx.__originalRestore=ctx.restore;ctx.__originalRotate=ctx.rotate;ctx.__originalScale=ctx.scale;ctx.__originalTranslate=ctx.translate;ctx.__originalTransform=ctx.transform;ctx.__originalSetTransform=ctx.setTransform;ctx.__originalResetTransform=ctx.resetTransform;ctx.__originalClip=ctx.clip;ctx.__originalMoveTo=ctx.moveTo;ctx.__originalLineTo=ctx.lineTo;ctx.__originalBezierCurveTo=ctx.bezierCurveTo;ctx.__originalRect=ctx.rect;ctx.__originalClosePath=ctx.closePath;ctx.__originalBeginPath=ctx.beginPath;ctx._removeMirroring=()=>{ctx.save=ctx.__originalSave;ctx.restore=ctx.__originalRestore;ctx.rotate=ctx.__originalRotate;ctx.scale=ctx.__originalScale;ctx.translate=ctx.__originalTranslate;ctx.transform=ctx.__originalTransform;ctx.setTransform=ctx.__originalSetTransform;ctx.resetTransform=ctx.__originalResetTransform;ctx.clip=ctx.__originalClip;ctx.moveTo=ctx.__originalMoveTo;ctx.lineTo=ctx.__originalLineTo;ctx.bezierCurveTo=ctx.__originalBezierCurveTo;ctx.rect=ctx.__originalRect;ctx.closePath=ctx.__originalClosePath;ctx.beginPath=ctx.__originalBeginPath;delete ctx._removeMirroring;};ctx.save=function ctxSave(){destCtx.save();this.__originalSave();};ctx.restore=function ctxRestore(){destCtx.restore();this.__originalRestore();};ctx.translate=function ctxTranslate(x,y){destCtx.translate(x,y);this.__originalTranslate(x,y);};ctx.scale=function ctxScale(x,y){destCtx.scale(x,y);this.__originalScale(x,y);};ctx.transform=function ctxTransform(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f);this.__originalTransform(a,b,c,d,e,f);};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f);this.__originalSetTransform(a,b,c,d,e,f);};ctx.resetTransform=function ctxResetTransform(){destCtx.resetTransform();this.__originalResetTransform();};ctx.rotate=function ctxRotate(angle){destCtx.rotate(angle);this.__originalRotate(angle);};ctx.clip=function ctxRotate(rule){destCtx.clip(rule);this.__originalClip(rule);};ctx.moveTo=function(x,y){destCtx.moveTo(x,y);this.__originalMoveTo(x,y);};ctx.lineTo=function(x,y){destCtx.lineTo(x,y);this.__originalLineTo(x,y);};ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);};ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height);this.__originalRect(x,y,width,height);};ctx.closePath=function(){destCtx.closePath();this.__originalClosePath();};ctx.beginPath=function(){destCtx.beginPath();this.__originalBeginPath();};}class CachedCanvases{constructor(canvasFactory){this.canvasFactory=canvasFactory;this.cache=Object.create(null);}getCanvas(id,width,height){let canvasEntry;if(this.cache[id]!==undefined){canvasEntry=this.cache[id];this.canvasFactory.reset(canvasEntry,width,height);}else{canvasEntry=this.canvasFactory.create(width,height);this.cache[id]=canvasEntry;}return canvasEntry;}delete(id){delete this.cache[id];}clear(){for(const id in this.cache){const canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry);delete this.cache[id];}}}function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){const[a,b,c,d,tx,ty]=(0,display_utils.getCurrentTransform)(ctx);if(b===0&&c===0){const tlX=destX*a+tx;const rTlX=Math.round(tlX);const tlY=destY*d+ty;const rTlY=Math.round(tlY);const brX=(destX+destW)*a+tx;const rWidth=Math.abs(Math.round(brX)-rTlX)||1;const brY=(destY+destH)*d+ty;const rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight);ctx.setTransform(a,b,c,d,tx,ty);return[rWidth,rHeight];}if(a===0&&d===0){const tlX=destY*c+tx;const rTlX=Math.round(tlX);const tlY=destX*b+ty;const rTlY=Math.round(tlY);const brX=(destY+destH)*c+tx;const rWidth=Math.abs(Math.round(brX)-rTlX)||1;const brY=(destX+destW)*b+ty;const rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(0,Math.sign(b),Math.sign(c),0,rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rHeight,rWidth);ctx.setTransform(a,b,c,d,tx,ty);return[rHeight,rWidth];}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);const scaleX=Math.hypot(a,b);const scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH];}function compileType3Glyph(imgData){const{width,height}=imgData;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE){return null;}const POINT_TO_PROCESS_LIMIT=1000;const POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);const width1=width+1;let points=new Uint8Array(width1*(height+1));let i,j,j0;const lineSize=width+7&~7;let data=new Uint8Array(lineSize*height),pos=0;for(const elem of imgData.data){let mask=128;while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1;}}let count=0;pos=0;if(data[pos]!==0){points[0]=1;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count;}pos++;}if(data[pos]!==0){points[j]=2;++count;}for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count;}let sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count;}pos++;}if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}}pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count;}pos++;}if(data[pos]!==0){points[j0+j]=4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}const steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);const path=new Path2D();for(i=0;count&&i<=height;i++){let p=i*width1;const end=p+width;while(p<end&&!points[p]){p++;}if(p===end){continue;}path.moveTo(p%width1,i);const p0=p;let type=points[p];do{const step=steps[type];do{p+=step;}while(!points[p]);const pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0;}else{type=pp&0x33*type>>4;points[p]&=type>>2|type<<2;}path.lineTo(p%width1,p/width1|0);if(!points[p]){--count;}}while(p0!==p);--i;}data=null;points=null;const drawOutline=function(c){c.save();c.scale(1/width,-1/height);c.translate(0,-height);c.fill(path);c.beginPath();c.restore();};return drawOutline;}class CanvasExtraState{constructor(width,height){this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=util.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=util.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=util.TextRenderingMode.FILL;this.textRise=0;this.fillColor=\"#000000\";this.strokeColor=\"#000000\";this.patternFill=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps=\"none\";this.startNewPathAndClipBox([0,0,width,height]);}clone(){const clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone;}setCurrentPoint(x,y){this.x=x;this.y=y;}updatePathMinMax(transform,x,y){[x,y]=util.Util.applyTransform([x,y],transform);this.minX=Math.min(this.minX,x);this.minY=Math.min(this.minY,y);this.maxX=Math.max(this.maxX,x);this.maxY=Math.max(this.maxY,y);}updateRectMinMax(transform,rect){const p1=util.Util.applyTransform(rect,transform);const p2=util.Util.applyTransform(rect.slice(2),transform);const p3=util.Util.applyTransform([rect[0],rect[3]],transform);const p4=util.Util.applyTransform([rect[2],rect[1]],transform);this.minX=Math.min(this.minX,p1[0],p2[0],p3[0],p4[0]);this.minY=Math.min(this.minY,p1[1],p2[1],p3[1],p4[1]);this.maxX=Math.max(this.maxX,p1[0],p2[0],p3[0],p4[0]);this.maxY=Math.max(this.maxY,p1[1],p2[1],p3[1],p4[1]);}updateScalingPathMinMax(transform,minMax){util.Util.scaleMinMax(transform,minMax);this.minX=Math.min(this.minX,minMax[0]);this.minY=Math.min(this.minY,minMax[1]);this.maxX=Math.max(this.maxX,minMax[2]);this.maxY=Math.max(this.maxY,minMax[3]);}updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){const box=util.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3,minMax);if(minMax){return;}this.updateRectMinMax(transform,box);}getPathBoundingBox(pathType=PathType.FILL,transform=null){const box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===PathType.STROKE){if(!transform){(0,util.unreachable)(\"Stroke bounding box must include transform.\");}const scale=util.Util.singularValueDecompose2dScale(transform);const xStrokePad=scale[0]*this.lineWidth/2;const yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad;box[1]-=yStrokePad;box[2]+=xStrokePad;box[3]+=yStrokePad;}return box;}updateClipFromPath(){const intersect=util.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0]);}isEmptyClip(){return this.minX===Infinity;}startNewPathAndClipBox(box){this.clipBox=box;this.minX=Infinity;this.minY=Infinity;this.maxX=0;this.maxY=0;}getClippedPathBoundingBox(pathType=PathType.FILL,transform=null){return util.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform));}}function putBinaryImageData(ctx,imgData){if(typeof ImageData!==\"undefined\"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return;}const height=imgData.height,width=imgData.width;const partialChunkHeight=height%FULL_CHUNK_HEIGHT;const fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;const totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;const chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0,destPos;const src=imgData.data;const dest=chunkImgData.data;let i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===util.ImageKind.GRAYSCALE_1BPP){const srcLength=src.byteLength;const dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2);const dest32DataLength=dest32.length;const fullSrcDiff=width+7>>3;const white=0xffffffff;const black=util.FeatureTest.isLittleEndian?0xff000000:0x000000ff;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){const srcDiff=srcLength-srcPos;let k=0;const kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;const kEndUnrolled=kEnd&~7;let mask=0;let srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black;}for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128;}dest32[destPos++]=srcByte&mask?white:black;mask>>=1;}}while(destPos<dest32DataLength){dest32[destPos++]=0;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else if(imgData.kind===util.ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=FULL_CHUNK_HEIGHT;}if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j);}}else if(imgData.kind===util.ImageKind.RGB_24BPP){thisChunkHeight=FULL_CHUNK_HEIGHT;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight;}destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else{throw new Error(`bad image kind: ${imgData.kind}`);}}function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return;}const height=imgData.height,width=imgData.width;const partialChunkHeight=height%FULL_CHUNK_HEIGHT;const fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;const totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;const chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0;const src=imgData.data;const dest=chunkImgData.data;for(let i=0;i<totalChunks;i++){const thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;({srcPos}=convertBlackAndWhiteToRGBA({src,srcPos,dest,width,height:thisChunkHeight,nonBlackColor:0}));ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}function copyCtxState(sourceCtx,destCtx){const properties=[\"strokeStyle\",\"fillStyle\",\"fillRule\",\"globalAlpha\",\"lineWidth\",\"lineCap\",\"lineJoin\",\"miterLimit\",\"globalCompositeOperation\",\"font\",\"filter\"];for(const property of properties){if(sourceCtx[property]!==undefined){destCtx[property]=sourceCtx[property];}}if(sourceCtx.setLineDash!==undefined){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset;}}function resetCtxToDefault(ctx){ctx.strokeStyle=ctx.fillStyle=\"#000000\";ctx.fillRule=\"nonzero\";ctx.globalAlpha=1;ctx.lineWidth=1;ctx.lineCap=\"butt\";ctx.lineJoin=\"miter\";ctx.miterLimit=10;ctx.globalCompositeOperation=\"source-over\";ctx.font=\"10px sans-serif\";if(ctx.setLineDash!==undefined){ctx.setLineDash([]);ctx.lineDashOffset=0;}if(!util.isNodeJS){const{filter}=ctx;if(filter!==\"none\"&&filter!==\"\"){ctx.filter=\"none\";}}}function composeSMaskBackdrop(bytes,r0,g0,b0){const length=bytes.length;for(let i=3;i<length;i+=4){const alpha=bytes[i];if(alpha===0){bytes[i-3]=r0;bytes[i-2]=g0;bytes[i-1]=b0;}else if(alpha<255){const alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8;bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8;bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8;}}}function composeSMaskAlpha(maskData,layerData,transferMap){const length=maskData.length;const scale=1/255;for(let i=3;i<length;i+=4){const alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0;}}function composeSMaskLuminosity(maskData,layerData,transferMap){const length=maskData.length;for(let i=3;i<length;i+=4){const y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16;}}function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){const hasBackdrop=!!backdrop;const r0=hasBackdrop?backdrop[0]:0;const g0=hasBackdrop?backdrop[1]:0;const b0=hasBackdrop?backdrop[2]:0;const composeFn=subtype===\"Luminosity\"?composeSMaskLuminosity:composeSMaskAlpha;const PIXELS_TO_PROCESS=1048576;const chunkSize=Math.min(height,Math.ceil(PIXELS_TO_PROCESS/width));for(let row=0;row<height;row+=chunkSize){const chunkHeight=Math.min(chunkSize,height-row);const maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight);const layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);if(hasBackdrop){composeSMaskBackdrop(maskData.data,r0,g0,b0);}composeFn(maskData.data,layerData.data,transferMap);layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY);}}function composeSMask(ctx,smask,layerCtx,layerBox){const layerOffsetX=layerBox[0];const layerOffsetY=layerBox[1];const layerWidth=layerBox[2]-layerOffsetX;const layerHeight=layerBox[3]-layerOffsetY;if(layerWidth===0||layerHeight===0){return;}genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY);ctx.save();ctx.globalAlpha=1;ctx.globalCompositeOperation=\"source-over\";ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(layerCtx.canvas,0,0);ctx.restore();}function getImageSmoothingEnabled(transform,interpolate){if(interpolate){return true;}const scale=util.Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]);scale[1]=Math.fround(scale[1]);const actualScale=Math.fround((globalThis.devicePixelRatio||1)*display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);return scale[0]<=actualScale&&scale[1]<=actualScale;}const LINE_CAP_STYLES=[\"butt\",\"round\",\"square\"];const LINE_JOIN_STYLES=[\"miter\",\"round\",\"bevel\"];const NORMAL_CLIP={};const EO_CLIP={};var _CanvasGraphics_brand=/*#__PURE__*/new WeakSet();class CanvasGraphics{constructor(canvasCtx,commonObjs,objs,canvasFactory,filterFactory,{optionalContentConfig,markedContentStack=null},annotationCanvasMap,pageColors){_classPrivateMethodInitSpec(this,_CanvasGraphics_brand);this.ctx=canvasCtx;this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=true;this.markedContentStack=markedContentStack||[];this.optionalContentConfig=optionalContentConfig;this.cachedCanvases=new CachedCanvases(this.canvasFactory);this.cachedPatterns=new Map();this.annotationCanvasMap=annotationCanvasMap;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.pageColors=pageColors;this._cachedScaleForStroking=[-1,0];this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map();}getObject(data,fallback=null){if(typeof data===\"string\"){return data.startsWith(\"g_\")?this.commonObjs.get(data):this.objs.get(data);}return fallback;}beginDrawing({transform,viewport,transparency=false,background=null}){const width=this.ctx.canvas.width;const height=this.ctx.canvas.height;const savedFillStyle=this.ctx.fillStyle;this.ctx.fillStyle=background||\"#ffffff\";this.ctx.fillRect(0,0,width,height);this.ctx.fillStyle=savedFillStyle;if(transparency){const transparentCanvas=this.cachedCanvases.getCanvas(\"transparent\",width,height);this.compositeCtx=this.ctx;this.transparentCanvas=transparentCanvas.canvas;this.ctx=transparentCanvas.context;this.ctx.save();this.ctx.transform(...(0,display_utils.getCurrentTransform)(this.compositeCtx));}this.ctx.save();resetCtxToDefault(this.ctx);if(transform){this.ctx.transform(...transform);this.outputScaleX=transform[0];this.outputScaleY=transform[0];}this.ctx.transform(...viewport.transform);this.viewportScale=viewport.scale;this.baseTransform=(0,display_utils.getCurrentTransform)(this.ctx);}executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){const argsArray=operatorList.argsArray;const fnArray=operatorList.fnArray;let i=executionStartIdx||0;const argsArrayLen=argsArray.length;if(argsArrayLen===i){return i;}const chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback===\"function\";const endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;let steps=0;const commonObjs=this.commonObjs;const objs=this.objs;let fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i;}fnId=fnArray[i];if(fnId!==util.OPS.dependency){this[fnId].apply(this,argsArray[i]);}else{for(const depObjId of argsArray[i]){const objsPool=depObjId.startsWith(\"g_\")?commonObjs:objs;if(!objsPool.has(depObjId)){objsPool.get(depObjId,continueCallback);return i;}}}i++;if(i===argsArrayLen){return i;}if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i;}steps=0;}}}endDrawing(){_assertClassBrand(_CanvasGraphics_brand,this,_restoreInitialState).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();for(const cache of this._cachedBitmapsMap.values()){for(const canvas of cache.values()){if(typeof HTMLCanvasElement!==\"undefined\"&&canvas instanceof HTMLCanvasElement){canvas.width=canvas.height=0;}}cache.clear();}this._cachedBitmapsMap.clear();_assertClassBrand(_CanvasGraphics_brand,this,_drawFilter).call(this);}_scaleImage(img,inverseTransform){const width=img.width;const height=img.height;let widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1);let heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1);let paintWidth=width,paintHeight=height;let tmpCanvasId=\"prescale1\";let tmpCanvas,tmpCtx;while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){let newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=paintWidth>=16384?Math.floor(paintWidth/2)-1||1:Math.ceil(paintWidth/2);widthScale/=paintWidth/newWidth;}if(heightScale>2&&paintHeight>1){newHeight=paintHeight>=16384?Math.floor(paintHeight/2)-1||1:Math.ceil(paintHeight)/2;heightScale/=paintHeight/newHeight;}tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);img=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId===\"prescale1\"?\"prescale2\":\"prescale1\";}return{img,paintWidth,paintHeight};}_createMaskCanvas(img){const ctx=this.ctx;const{width,height}=img;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;const currentTransform=(0,display_utils.getCurrentTransform)(ctx);let cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){const mainKey=img.bitmap||img.data.buffer;cacheKey=JSON.stringify(isPatternFill?currentTransform:[currentTransform.slice(0,4),fillColor]);cache=this._cachedBitmapsMap.get(mainKey);if(!cache){cache=new Map();this._cachedBitmapsMap.set(mainKey,cache);}const cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){const offsetX=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]);const offsetY=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX,offsetY};}scaled=cachedImage;}if(!scaled){maskCanvas=this.cachedCanvases.getCanvas(\"maskCanvas\",width,height);putBinaryImageMask(maskCanvas.context,img);}let maskToCanvas=util.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=util.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);const[minX,minY,maxX,maxY]=util.Util.getAxialAlignedBoundingBox([0,0,width,height],maskToCanvas);const drawnWidth=Math.round(maxX-minX)||1;const drawnHeight=Math.round(maxY-minY)||1;const fillCanvas=this.cachedCanvases.getCanvas(\"fillCanvas\",drawnWidth,drawnHeight);const fillCtx=fillCanvas.context;const offsetX=minX;const offsetY=minY;fillCtx.translate(-offsetX,-offsetY);fillCtx.transform(...maskToCanvas);if(!scaled){scaled=this._scaleImage(maskCanvas.canvas,(0,display_utils.getCurrentTransformInverse)(fillCtx));scaled=scaled.img;if(cache&&isPatternFill){cache.set(cacheKey,scaled);}}fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,display_utils.getCurrentTransform)(fillCtx),img.interpolate);drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height);fillCtx.globalCompositeOperation=\"source-in\";const inverse=util.Util.transform((0,display_utils.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,PathType.FILL):fillColor;fillCtx.fillRect(0,0,width,height);if(cache&&!isPatternFill){this.cachedCanvases.delete(\"fillCanvas\");cache.set(cacheKey,fillCanvas.canvas);}return{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)};}setLineWidth(width){if(width!==this.current.lineWidth){this._cachedScaleForStroking[0]=-1;}this.current.lineWidth=width;this.ctx.lineWidth=width;}setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style];}setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style];}setMiterLimit(limit){this.ctx.miterLimit=limit;}setDash(dashArray,dashPhase){const ctx=this.ctx;if(ctx.setLineDash!==undefined){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase;}}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states){switch(key){case\"LW\":this.setLineWidth(value);break;case\"LC\":this.setLineCap(value);break;case\"LJ\":this.setLineJoin(value);break;case\"ML\":this.setMiterLimit(value);break;case\"D\":this.setDash(value[0],value[1]);break;case\"RI\":this.setRenderingIntent(value);break;case\"FL\":this.setFlatness(value);break;case\"Font\":this.setFont(value[0],value[1]);break;case\"CA\":this.current.strokeAlpha=value;break;case\"ca\":this.current.fillAlpha=value;this.ctx.globalAlpha=value;break;case\"BM\":this.ctx.globalCompositeOperation=value;break;case\"SMask\":this.current.activeSMask=value?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case\"TR\":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(value);break;}}}get inSMaskMode(){return!!this.suspendedCtx;}checkSMaskState(){const inSMaskMode=this.inSMaskMode;if(this.current.activeSMask&&!inSMaskMode){this.beginSMaskMode();}else if(!this.current.activeSMask&&inSMaskMode){this.endSMaskMode();}}beginSMaskMode(){if(this.inSMaskMode){throw new Error(\"beginSMaskMode called while already in smask mode\");}const drawnWidth=this.ctx.canvas.width;const drawnHeight=this.ctx.canvas.height;const cacheId=\"smaskGroupAt\"+this.groupLevel;const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx;this.ctx=scratchCanvas.context;const ctx=this.ctx;ctx.setTransform(...(0,display_utils.getCurrentTransform)(this.suspendedCtx));copyCtxState(this.suspendedCtx,ctx);mirrorContextOperations(ctx,this.suspendedCtx);this.setGState([[\"BM\",\"source-over\"],[\"ca\",1],[\"CA\",1]]);}endSMaskMode(){if(!this.inSMaskMode){throw new Error(\"endSMaskMode called while not in smask mode\");}this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null;}compose(dirtyBox){if(!this.current.activeSMask){return;}if(!dirtyBox){dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];}else{dirtyBox[0]=Math.floor(dirtyBox[0]);dirtyBox[1]=Math.floor(dirtyBox[1]);dirtyBox[2]=Math.ceil(dirtyBox[2]);dirtyBox[3]=Math.ceil(dirtyBox[3]);}const smask=this.current.activeSMask;const suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore();}save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save();}else{this.ctx.save();}const old=this.current;this.stateStack.push(old);this.current=old.clone();}restore(){if(this.stateStack.length===0&&this.inSMaskMode){this.endSMaskMode();}if(this.stateStack.length!==0){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx);}else{this.ctx.restore();}this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}}transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}constructPath(ops,args,minMax){const ctx=this.ctx;const current=this.current;let x=current.x,y=current.y;let startX,startY;const currentTransform=(0,display_utils.getCurrentTransform)(ctx);const isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0;const minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(let i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case util.OPS.rectangle:x=args[j++];y=args[j++];const width=args[j++];const height=args[j++];const xw=x+width;const yh=y+height;ctx.moveTo(x,y);if(width===0||height===0){ctx.lineTo(xw,yh);}else{ctx.lineTo(xw,y);ctx.lineTo(xw,yh);ctx.lineTo(x,yh);}if(!isScalingMatrix){current.updateRectMinMax(currentTransform,[x,y,xw,yh]);}ctx.closePath();break;case util.OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case util.OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case util.OPS.curveTo:startX=x;startY=y;x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier);j+=6;break;case util.OPS.curveTo2:startX=x;startY=y;ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier);x=args[j+2];y=args[j+3];j+=4;break;case util.OPS.curveTo3:startX=x;startY=y;x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier);j+=4;break;case util.OPS.closePath:ctx.closePath();break;}}if(isScalingMatrix){current.updateScalingPathMinMax(currentTransform,minMaxForBezier);}current.setCurrentPoint(x,y);}closePath(){this.ctx.closePath();}stroke(consumePath=true){const ctx=this.ctx;const strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha;if(this.contentVisible){if(typeof strokeColor===\"object\"&&strokeColor?.getPattern){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.STROKE);this.rescaleAndStroke(false);ctx.restore();}else{this.rescaleAndStroke(true);}}if(consumePath){this.consumePath(this.current.getClippedPathBoundingBox());}ctx.globalAlpha=this.current.fillAlpha;}closeStroke(){this.closePath();this.stroke();}fill(consumePath=true){const ctx=this.ctx;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;let needRestore=false;if(isPatternFill){ctx.save();ctx.fillStyle=fillColor.getPattern(ctx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.FILL);needRestore=true;}const intersect=this.current.getClippedPathBoundingBox();if(this.contentVisible&&intersect!==null){if(this.pendingEOFill){ctx.fill(\"evenodd\");this.pendingEOFill=false;}else{ctx.fill();}}if(needRestore){ctx.restore();}if(consumePath){this.consumePath(intersect);}}eoFill(){this.pendingEOFill=true;this.fill();}fillStroke(){this.fill(false);this.stroke(false);this.consumePath();}eoFillStroke(){this.pendingEOFill=true;this.fillStroke();}closeFillStroke(){this.closePath();this.fillStroke();}closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke();}endPath(){this.consumePath();}clip(){this.pendingClip=NORMAL_CLIP;}eoClip(){this.pendingClip=EO_CLIP;}beginText(){this.current.textMatrix=util.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}endText(){const paths=this.pendingTextPaths;const ctx=this.ctx;if(paths===undefined){ctx.beginPath();return;}ctx.save();ctx.beginPath();for(const path of paths){ctx.setTransform(...path.transform);ctx.translate(path.x,path.y);path.addToPath(ctx,path.fontSize);}ctx.restore();ctx.clip();ctx.beginPath();delete this.pendingTextPaths;}setCharSpacing(spacing){this.current.charSpacing=spacing;}setWordSpacing(spacing){this.current.wordSpacing=spacing;}setHScale(scale){this.current.textHScale=scale/100;}setLeading(leading){this.current.leading=-leading;}setFont(fontRefName,size){const fontObj=this.commonObjs.get(fontRefName);const current=this.current;if(!fontObj){throw new Error(`Can't find font for ${fontRefName}`);}current.fontMatrix=fontObj.fontMatrix||util.FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){(0,util.warn)(\"Invalid font matrix for font \"+fontRefName);}if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return;}const name=fontObj.loadedName||\"sans-serif\";const typeface=fontObj.systemFontInfo?.css||`\"${name}\", ${fontObj.fallbackName}`;let bold=\"normal\";if(fontObj.black){bold=\"900\";}else if(fontObj.bold){bold=\"bold\";}const italic=fontObj.italic?\"italic\":\"normal\";let browserFontSize=size;if(size<MIN_FONT_SIZE){browserFontSize=MIN_FONT_SIZE;}else if(size>MAX_FONT_SIZE){browserFontSize=MAX_FONT_SIZE;}this.current.fontSizeScale=size/browserFontSize;this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`;}setTextRenderingMode(mode){this.current.textRenderingMode=mode;}setTextRise(rise){this.current.textRise=rise;}moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;}setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);}setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.hypot(a,b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}nextLine(){this.moveText(0,this.current.leading);}paintChar(character,x,y,patternTransform){const ctx=this.ctx;const current=this.current;const font=current.font;const textRenderingMode=current.textRenderingMode;const fontSize=current.fontSize/current.fontSizeScale;const fillStrokeMode=textRenderingMode&util.TextRenderingMode.FILL_STROKE_MASK;const isAddToPathSet=!!(textRenderingMode&util.TextRenderingMode.ADD_TO_PATH_FLAG);const patternFill=current.patternFill&&!font.missingFile;let addToPath;if(font.disableFontFace||isAddToPathSet||patternFill){addToPath=font.getPathGenerator(this.commonObjs,character);}if(font.disableFontFace||patternFill){ctx.save();ctx.translate(x,y);ctx.beginPath();addToPath(ctx,fontSize);if(patternTransform){ctx.setTransform(...patternTransform);}if(fillStrokeMode===util.TextRenderingMode.FILL||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){ctx.fill();}if(fillStrokeMode===util.TextRenderingMode.STROKE||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){ctx.stroke();}ctx.restore();}else{if(fillStrokeMode===util.TextRenderingMode.FILL||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y);}if(fillStrokeMode===util.TextRenderingMode.STROKE||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y);}}if(isAddToPathSet){const paths=this.pendingTextPaths||=[];paths.push({transform:(0,display_utils.getCurrentTransform)(ctx),x,y,fontSize,addToPath});}}get isFontSubpixelAAEnabled(){const{context:ctx}=this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\",10,10);ctx.scale(1.5,1);ctx.fillText(\"I\",0,10);const data=ctx.getImageData(0,0,10,10).data;let enabled=false;for(let i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break;}}return(0,util.shadow)(this,\"isFontSubpixelAAEnabled\",enabled);}showText(glyphs){const current=this.current;const font=current.font;if(font.isType3Font){return this.showType3Text(glyphs);}const fontSize=current.fontSize;if(fontSize===0){return undefined;}const ctx=this.ctx;const fontSizeScale=current.fontSizeScale;const charSpacing=current.charSpacing;const wordSpacing=current.wordSpacing;const fontDirection=current.fontDirection;const textHScale=current.textHScale*fontDirection;const glyphsLength=glyphs.length;const vertical=font.vertical;const spacingDir=vertical?1:-1;const defaultVMetrics=font.defaultVMetrics;const widthAdvanceScale=fontSize*current.fontMatrix[0];const simpleFillText=current.textRenderingMode===util.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save();ctx.transform(...current.textMatrix);ctx.translate(current.x,current.y+current.textRise);if(fontDirection>0){ctx.scale(textHScale,-1);}else{ctx.scale(textHScale,1);}let patternTransform;if(current.patternFill){ctx.save();const pattern=current.fillColor.getPattern(ctx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.FILL);patternTransform=(0,display_utils.getCurrentTransform)(ctx);ctx.restore();ctx.fillStyle=pattern;}let lineWidth=current.lineWidth;const scale=current.textMatrixScale;if(scale===0||lineWidth===0){const fillStrokeMode=current.textRenderingMode&util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===util.TextRenderingMode.STROKE||fillStrokeMode===util.TextRenderingMode.FILL_STROKE){lineWidth=this.getSinglePixelWidth();}}else{lineWidth/=scale;}if(fontSizeScale!==1.0){ctx.scale(fontSizeScale,fontSizeScale);lineWidth/=fontSizeScale;}ctx.lineWidth=lineWidth;if(font.isInvalidPDFjsFont){const chars=[];let width=0;for(const glyph of glyphs){chars.push(glyph.unicode);width+=glyph.width;}ctx.fillText(chars.join(\"\"),0,0);current.x+=width*widthAdvanceScale*textHScale;ctx.restore();this.compose();return undefined;}let x=0,i;for(i=0;i<glyphsLength;++i){const glyph=glyphs[i];if(typeof glyph===\"number\"){x+=spacingDir*glyph*fontSize/1000;continue;}let restoreNeeded=false;const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;const character=glyph.fontChar;const accent=glyph.accent;let scaledX,scaledY;let width=glyph.width;if(vertical){const vmetric=glyph.vmetric||defaultVMetrics;const vx=-(glyph.vmetric?vmetric[1]:width*0.5)*widthAdvanceScale;const vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale;}else{scaledX=x/fontSizeScale;scaledY=0;}if(font.remeasure&&width>0){const measuredWidth=ctx.measureText(character).width*1000/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){const characterScaleX=width/measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX/=characterScaleX;}else if(width!==measuredWidth){scaledX+=(width-measuredWidth)/2000*fontSize/fontSizeScale;}}if(this.contentVisible&&(glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY);}else{this.paintChar(character,scaledX,scaledY,patternTransform);if(accent){const scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale;const scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform);}}}const charWidth=vertical?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection;x+=charWidth;if(restoreNeeded){ctx.restore();}}if(vertical){current.y-=x;}else{current.x+=x*textHScale;}ctx.restore();this.compose();return undefined;}showType3Text(glyphs){const ctx=this.ctx;const current=this.current;const font=current.font;const fontSize=current.fontSize;const fontDirection=current.fontDirection;const spacingDir=font.vertical?1:-1;const charSpacing=current.charSpacing;const wordSpacing=current.wordSpacing;const textHScale=current.textHScale*fontDirection;const fontMatrix=current.fontMatrix||util.FONT_IDENTITY_MATRIX;const glyphsLength=glyphs.length;const isTextInvisible=current.textRenderingMode===util.TextRenderingMode.INVISIBLE;let i,glyph,width,spacingLength;if(isTextInvisible||fontSize===0){return;}this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;ctx.save();ctx.transform(...current.textMatrix);ctx.translate(current.x,current.y);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(typeof glyph===\"number\"){spacingLength=spacingDir*glyph*fontSize/1000;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue;}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;const operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,util.warn)(`Type3 character \"${glyph.operatorListId}\" is not available.`);continue;}if(this.contentVisible){this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform(...fontMatrix);this.executeOperatorList(operatorList);this.restore();}const transformed=util.Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+spacing;ctx.translate(width,0);current.x+=width*textHScale;}ctx.restore();this.processingType3=null;}setCharWidth(xWidth,yWidth){}setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.ctx.clip();this.endPath();}getColorN_Pattern(IR){let pattern;if(IR[0]===\"TilingPattern\"){const color=IR[1];const baseTransform=this.baseTransform||(0,display_utils.getCurrentTransform)(this.ctx);const canvasGraphicsFactory={createCanvasGraphics:ctx=>new CanvasGraphics(ctx,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};pattern=new TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform);}else{pattern=this._getPattern(IR[1],IR[2]);}return pattern;}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments);}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true;}setStrokeRGBColor(r,g,b){const color=util.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color;this.current.strokeColor=color;}setFillRGBColor(r,g,b){const color=util.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color;this.current.fillColor=color;this.current.patternFill=false;}_getPattern(objId,matrix=null){let pattern;if(this.cachedPatterns.has(objId)){pattern=this.cachedPatterns.get(objId);}else{pattern=getShadingPattern(this.getObject(objId));this.cachedPatterns.set(objId,pattern);}if(matrix){pattern.matrix=matrix;}return pattern;}shadingFill(objId){if(!this.contentVisible){return;}const ctx=this.ctx;this.save();const pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.SHADING);const inv=(0,display_utils.getCurrentTransformInverse)(ctx);if(inv){const{width,height}=ctx.canvas;const[x0,y0,x1,y1]=util.Util.getAxialAlignedBoundingBox([0,0,width,height],inv);this.ctx.fillRect(x0,y0,x1-x0,y1-y0);}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10);}this.compose(this.current.getClippedPathBoundingBox());this.restore();}beginInlineImage(){(0,util.unreachable)(\"Should not call beginInlineImage\");}beginImageData(){(0,util.unreachable)(\"Should not call beginImageData\");}paintFormXObjectBegin(matrix,bbox){if(!this.contentVisible){return;}this.save();this.baseTransformStack.push(this.baseTransform);if(Array.isArray(matrix)&&matrix.length===6){this.transform(...matrix);}this.baseTransform=(0,display_utils.getCurrentTransform)(this.ctx);if(bbox){const width=bbox[2]-bbox[0];const height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.current.updateRectMinMax((0,display_utils.getCurrentTransform)(this.ctx),bbox);this.clip();this.endPath();}}paintFormXObjectEnd(){if(!this.contentVisible){return;}this.restore();this.baseTransform=this.baseTransformStack.pop();}beginGroup(group){if(!this.contentVisible){return;}this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null;}const currentCtx=this.ctx;if(!group.isolated){(0,util.info)(\"TODO: Support non-isolated groups.\");}if(group.knockout){(0,util.warn)(\"Knockout groups not supported.\");}const currentTransform=(0,display_utils.getCurrentTransform)(currentCtx);if(group.matrix){currentCtx.transform(...group.matrix);}if(!group.bbox){throw new Error(\"Bounding box is required.\");}let bounds=util.Util.getAxialAlignedBoundingBox(group.bbox,(0,display_utils.getCurrentTransform)(currentCtx));const canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=util.Util.intersect(bounds,canvasBounds)||[0,0,0,0];const offsetX=Math.floor(bounds[0]);const offsetY=Math.floor(bounds[1]);let drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);let drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);let scaleX=1,scaleY=1;if(drawnWidth>MAX_GROUP_SIZE){scaleX=drawnWidth/MAX_GROUP_SIZE;drawnWidth=MAX_GROUP_SIZE;}if(drawnHeight>MAX_GROUP_SIZE){scaleY=drawnHeight/MAX_GROUP_SIZE;drawnHeight=MAX_GROUP_SIZE;}this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);let cacheId=\"groupAt\"+this.groupLevel;if(group.smask){cacheId+=\"_smask_\"+this.smaskCounter++%2;}const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);const groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY);groupCtx.translate(-offsetX,-offsetY);groupCtx.transform(...currentTransform);if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX,offsetY,scaleX,scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null});}else{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.scale(scaleX,scaleY);currentCtx.save();}copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([[\"BM\",\"source-over\"],[\"ca\",1],[\"CA\",1]]);this.groupStack.push(currentCtx);this.groupLevel++;}endGroup(group){if(!this.contentVisible){return;}this.groupLevel--;const groupCtx=this.ctx;const ctx=this.groupStack.pop();this.ctx=ctx;this.ctx.imageSmoothingEnabled=false;if(group.smask){this.tempSMask=this.smaskStack.pop();this.restore();}else{this.ctx.restore();const currentMtx=(0,display_utils.getCurrentTransform)(this.ctx);this.restore();this.ctx.save();this.ctx.setTransform(...currentMtx);const dirtyBox=util.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0);this.ctx.restore();this.compose(dirtyBox);}}beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){_assertClassBrand(_CanvasGraphics_brand,this,_restoreInitialState).call(this);resetCtxToDefault(this.ctx);this.ctx.save();this.save();if(this.baseTransform){this.ctx.setTransform(...this.baseTransform);}if(Array.isArray(rect)&&rect.length===4){const width=rect[2]-rect[0];const height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice();transform[4]-=rect[0];transform[5]-=rect[1];rect=rect.slice();rect[0]=rect[1]=0;rect[2]=width;rect[3]=height;const[scaleX,scaleY]=util.Util.singularValueDecompose2dScale((0,display_utils.getCurrentTransform)(this.ctx));const{viewportScale}=this;const canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale);const canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);const{canvas,context}=this.annotationCanvas;this.annotationCanvasMap.set(id,canvas);this.annotationCanvas.savedCtx=this.ctx;this.ctx=context;this.ctx.save();this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY);resetCtxToDefault(this.ctx);}else{resetCtxToDefault(this.ctx);this.ctx.rect(rect[0],rect[1],width,height);this.ctx.clip();this.endPath();}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform(...transform);this.transform(...matrix);}endAnnotation(){if(this.annotationCanvas){this.ctx.restore();_assertClassBrand(_CanvasGraphics_brand,this,_drawFilter).call(this);this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas;}}paintImageMaskXObject(img){if(!this.contentVisible){return;}const count=img.count;img=this.getObject(img.data,img);img.count=count;const ctx=this.ctx;const glyph=this.processingType3;if(glyph){if(glyph.compiled===undefined){glyph.compiled=compileType3Glyph(img);}if(glyph.compiled){glyph.compiled(ctx);return;}}const mask=this._createMaskCanvas(img);const maskCanvas=mask.canvas;ctx.save();ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY);ctx.restore();this.compose();}paintImageMaskXObjectRepeat(img,scaleX,skewX=0,skewY=0,scaleY,positions){if(!this.contentVisible){return;}img=this.getObject(img.data,img);const ctx=this.ctx;ctx.save();const currentTransform=(0,display_utils.getCurrentTransform)(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);const mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,mask.offsetX-currentTransform[4],mask.offsetY-currentTransform[5]);for(let i=0,ii=positions.length;i<ii;i+=2){const trans=util.Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]);const[x,y]=util.Util.applyTransform([0,0],trans);ctx.drawImage(mask.canvas,x,y);}ctx.restore();this.compose();}paintImageMaskXObjectGroup(images){if(!this.contentVisible){return;}const ctx=this.ctx;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;for(const image of images){const{data,width,height,transform}=image;const maskCanvas=this.cachedCanvases.getCanvas(\"maskCanvas\",width,height);const maskCtx=maskCanvas.context;maskCtx.save();const img=this.getObject(data,image);putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation=\"source-in\";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,display_utils.getCurrentTransformInverse)(ctx),PathType.FILL):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform(...transform);ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore();}this.compose();}paintImageXObject(objId){if(!this.contentVisible){return;}const imgData=this.getObject(objId);if(!imgData){(0,util.warn)(\"Dependent image isn't ready yet\");return;}this.paintInlineImageXObject(imgData);}paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible){return;}const imgData=this.getObject(objId);if(!imgData){(0,util.warn)(\"Dependent image isn't ready yet\");return;}const width=imgData.width;const height=imgData.height;const map=[];for(let i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});}this.paintInlineImageXObjectGroup(imgData,map);}applyTransferMapsToCanvas(ctx){if(this.current.transferMaps!==\"none\"){ctx.filter=this.current.transferMaps;ctx.drawImage(ctx.canvas,0,0);ctx.filter=\"none\";}return ctx.canvas;}applyTransferMapsToBitmap(imgData){if(this.current.transferMaps===\"none\"){return imgData.bitmap;}const{bitmap,width,height}=imgData;const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",width,height);const tmpCtx=tmpCanvas.context;tmpCtx.filter=this.current.transferMaps;tmpCtx.drawImage(bitmap,0,0);tmpCtx.filter=\"none\";return tmpCanvas.canvas;}paintInlineImageXObject(imgData){if(!this.contentVisible){return;}const width=imgData.width;const height=imgData.height;const ctx=this.ctx;this.save();if(!util.isNodeJS){const{filter}=ctx;if(filter!==\"none\"&&filter!==\"\"){ctx.filter=\"none\";}}ctx.scale(1/width,-1/height);let imgToPaint;if(imgData.bitmap){imgToPaint=this.applyTransferMapsToBitmap(imgData);}else if(typeof HTMLElement===\"function\"&&imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData;}else{const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",width,height);const tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}const scaled=this._scaleImage(imgToPaint,(0,display_utils.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,display_utils.getCurrentTransform)(ctx),imgData.interpolate);drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);this.compose();this.restore();}paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible){return;}const ctx=this.ctx;let imgToPaint;if(imgData.bitmap){imgToPaint=imgData.bitmap;}else{const w=imgData.width;const h=imgData.height;const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",w,h);const tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}for(const entry of map){ctx.save();ctx.transform(...entry.transform);ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,imgToPaint,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);ctx.restore();}this.compose();}paintSolidColorImageMask(){if(!this.contentVisible){return;}this.ctx.fillRect(0,0,1,1);this.compose();}markPoint(tag){}markPointProps(tag,properties){}beginMarkedContent(tag){this.markedContentStack.push({visible:true});}beginMarkedContentProps(tag,properties){if(tag===\"OC\"){this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)});}else{this.markedContentStack.push({visible:true});}this.contentVisible=this.isContentVisible();}endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible();}beginCompat(){}endCompat(){}consumePath(clipBox){const isEmpty=this.current.isEmptyClip();if(this.pendingClip){this.current.updateClipFromPath();}if(!this.pendingClip){this.compose(clipBox);}const ctx=this.ctx;if(this.pendingClip){if(!isEmpty){if(this.pendingClip===EO_CLIP){ctx.clip(\"evenodd\");}else{ctx.clip();}}this.pendingClip=null;}this.current.startNewPathAndClipBox(this.current.clipBox);ctx.beginPath();}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,display_utils.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0){this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));}else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]);const normX=Math.hypot(m[0],m[2]);const normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet;}}return this._cachedGetSinglePixelWidth;}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth}=this.current;const{a,b,c,d}=this.ctx.getTransform();let scaleX,scaleY;if(b===0&&c===0){const normX=Math.abs(a);const normY=Math.abs(d);if(normX===normY){if(lineWidth===0){scaleX=scaleY=1/normX;}else{const scaledLineWidth=normX*lineWidth;scaleX=scaleY=scaledLineWidth<1?1/scaledLineWidth:1;}}else if(lineWidth===0){scaleX=1/normX;scaleY=1/normY;}else{const scaledXLineWidth=normX*lineWidth;const scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1;scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1;}}else{const absDet=Math.abs(a*d-b*c);const normX=Math.hypot(a,b);const normY=Math.hypot(c,d);if(lineWidth===0){scaleX=normY/absDet;scaleY=normX/absDet;}else{const baseArea=lineWidth*absDet;scaleX=normY>baseArea?normY/baseArea:1;scaleY=normX>baseArea?normX/baseArea:1;}}this._cachedScaleForStroking[0]=scaleX;this._cachedScaleForStroking[1]=scaleY;}return this._cachedScaleForStroking;}rescaleAndStroke(saveRestore){const{ctx}=this;const{lineWidth}=this.current;const[scaleX,scaleY]=this.getScaleForStroking();ctx.lineWidth=lineWidth||1;if(scaleX===1&&scaleY===1){ctx.stroke();return;}const dashes=ctx.getLineDash();if(saveRestore){ctx.save();}ctx.scale(scaleX,scaleY);if(dashes.length>0){const scale=Math.max(scaleX,scaleY);ctx.setLineDash(dashes.map(x=>x/scale));ctx.lineDashOffset/=scale;}ctx.stroke();if(saveRestore){ctx.restore();}}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--){if(!this.markedContentStack[i].visible){return false;}}return true;}}function _restoreInitialState(){while(this.stateStack.length||this.inSMaskMode){this.restore();}this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null;}}function _drawFilter(){if(this.pageColors){const hcmFilterId=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(hcmFilterId!==\"none\"){const savedFilter=this.ctx.filter;this.ctx.filter=hcmFilterId;this.ctx.drawImage(this.ctx.canvas,0,0);this.ctx.filter=savedFilter;}}}for(const op in util.OPS){if(CanvasGraphics.prototype[op]!==undefined){CanvasGraphics.prototype[util.OPS[op]]=CanvasGraphics.prototype[op];}}/***/}),/***/419:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _PixelsPerInch;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */DOMCMapReaderFactory:()=>(/* binding */DOMCMapReaderFactory),/* harmony export */DOMCanvasFactory:()=>(/* binding */DOMCanvasFactory),/* harmony export */DOMFilterFactory:()=>(/* binding */DOMFilterFactory),/* harmony export */DOMSVGFactory:()=>(/* binding */DOMSVGFactory),/* harmony export */DOMStandardFontDataFactory:()=>(/* binding */DOMStandardFontDataFactory),/* harmony export */PDFDateString:()=>(/* binding */PDFDateString),/* harmony export */PageViewport:()=>(/* binding */PageViewport),/* harmony export */PixelsPerInch:()=>(/* binding */PixelsPerInch),/* harmony export */RenderingCancelledException:()=>(/* binding */RenderingCancelledException),/* harmony export */StatTimer:()=>(/* binding */StatTimer),/* harmony export */fetchData:()=>(/* binding */fetchData),/* harmony export */getColorValues:()=>(/* binding */getColorValues),/* harmony export */getCurrentTransform:()=>(/* binding */getCurrentTransform),/* harmony export */getCurrentTransformInverse:()=>(/* binding */getCurrentTransformInverse),/* harmony export */getFilenameFromUrl:()=>(/* binding */getFilenameFromUrl),/* harmony export */getPdfFilenameFromUrl:()=>(/* binding */getPdfFilenameFromUrl),/* harmony export */getRGB:()=>(/* binding */getRGB),/* harmony export */getXfaPageViewport:()=>(/* binding */getXfaPageViewport),/* harmony export */isDataScheme:()=>(/* binding */isDataScheme),/* harmony export */isPdfFile:()=>(/* binding */isPdfFile),/* harmony export */isValidFetchUrl:()=>(/* binding */isValidFetchUrl),/* harmony export */noContextMenu:()=>(/* binding */noContextMenu),/* harmony export */setLayerDimensions:()=>(/* binding */setLayerDimensions)/* harmony export */});/* unused harmony export deprecated */ /* harmony import */var _base_factory_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(583);/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(292);const SVG_NS=\"http://www.w3.org/2000/svg\";class PixelsPerInch{}_PixelsPerInch=PixelsPerInch;_defineProperty(PixelsPerInch,\"CSS\",96.0);_defineProperty(PixelsPerInch,\"PDF\",72.0);_defineProperty(PixelsPerInch,\"PDF_TO_CSS_UNITS\",_PixelsPerInch.CSS/_PixelsPerInch.PDF);var _cache=/*#__PURE__*/new WeakMap();var _defs=/*#__PURE__*/new WeakMap();var _docId2=/*#__PURE__*/new WeakMap();var _document=/*#__PURE__*/new WeakMap();var _hcmCache=/*#__PURE__*/new WeakMap();var _id=/*#__PURE__*/new WeakMap();var _DOMFilterFactory_brand=/*#__PURE__*/new WeakSet();class DOMFilterFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseFilterFactory{constructor({docId,ownerDocument=globalThis.document}={}){super();_classPrivateMethodInitSpec(this,_DOMFilterFactory_brand);_classPrivateFieldInitSpec(this,_cache,void 0);_classPrivateFieldInitSpec(this,_defs,void 0);_classPrivateFieldInitSpec(this,_docId2,void 0);_classPrivateFieldInitSpec(this,_document,void 0);_classPrivateFieldInitSpec(this,_hcmCache,void 0);_classPrivateFieldInitSpec(this,_id,0);_classPrivateFieldSet(_docId2,this,docId);_classPrivateFieldSet(_document,this,ownerDocument);}addFilter(maps){var _this$id,_this$id2;if(!maps){return\"none\";}let value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(maps);if(value){return value;}let tableR,tableG,tableB,key;if(maps.length===1){const mapR=maps[0];const buffer=new Array(256);for(let i=0;i<256;i++){buffer[i]=mapR[i]/255;}key=tableR=tableG=tableB=buffer.join(\",\");}else{const[mapR,mapG,mapB]=maps;const bufferR=new Array(256);const bufferG=new Array(256);const bufferB=new Array(256);for(let i=0;i<256;i++){bufferR[i]=mapR[i]/255;bufferG[i]=mapG[i]/255;bufferB[i]=mapB[i]/255;}tableR=bufferR.join(\",\");tableG=bufferG.join(\",\");tableB=bufferB.join(\",\");key=`${tableR}${tableG}${tableB}`;}value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(key);if(value){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(maps,value);return value;}const id=`g_${_classPrivateFieldGet(_docId2,this)}_transfer_map_${(_classPrivateFieldSet(_id,this,(_this$id=_classPrivateFieldGet(_id,this),_this$id2=_this$id++,_this$id)),_this$id2)}`;const url=`url(#${id})`;_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(maps,url);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(key,url);const filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,tableR,tableG,tableB,filter);return url;}addHCMFilter(fgColor,bgColor){const key=`${fgColor}-${bgColor}`;const filterName=\"base\";let info=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).get(filterName);if(info?.key===key){return info.url;}if(info){info.filter?.remove();info.key=key;info.url=\"none\";info.filter=null;}else{info={key,url:\"none\",filter:null};_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).set(filterName,info);}if(!fgColor||!bgColor){return info.url;}const fgRGB=_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).call(this,fgColor);fgColor=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.makeHexColor(...fgRGB);const bgRGB=_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).call(this,bgColor);bgColor=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.makeHexColor(...bgRGB);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color=\"\";if(fgColor===\"#000000\"&&bgColor===\"#ffffff\"||fgColor===bgColor){return info.url;}const map=new Array(256);for(let i=0;i<=255;i++){const x=i/255;map[i]=x<=0.03928?x/12.92:((x+0.055)/1.055)**2.4;}const table=map.join(\",\");const id=`g_${_classPrivateFieldGet(_docId2,this)}_hcm_filter`;const filter=info.filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,table,table,table,filter);_assertClassBrand(_DOMFilterFactory_brand,this,_addGrayConversion).call(this,filter);const getSteps=(c,n)=>{const start=fgRGB[c]/255;const end=bgRGB[c]/255;const arr=new Array(n+1);for(let i=0;i<=n;i++){arr[i]=start+i/n*(end-start);}return arr.join(\",\");};_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,getSteps(0,5),getSteps(1,5),getSteps(2,5),filter);info.url=`url(#${id})`;return info.url;}addHighlightHCMFilter(filterName,fgColor,bgColor,newFgColor,newBgColor){const key=`${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;let info=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).get(filterName);if(info?.key===key){return info.url;}if(info){info.filter?.remove();info.key=key;info.url=\"none\";info.filter=null;}else{info={key,url:\"none\",filter:null};_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).set(filterName,info);}if(!fgColor||!bgColor){return info.url;}const[fgRGB,bgRGB]=[fgColor,bgColor].map(_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).bind(this));let fgGray=Math.round(0.2126*fgRGB[0]+0.7152*fgRGB[1]+0.0722*fgRGB[2]);let bgGray=Math.round(0.2126*bgRGB[0]+0.7152*bgRGB[1]+0.0722*bgRGB[2]);let[newFgRGB,newBgRGB]=[newFgColor,newBgColor].map(_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).bind(this));if(bgGray<fgGray){[fgGray,bgGray,newFgRGB,newBgRGB]=[bgGray,fgGray,newBgRGB,newFgRGB];}_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color=\"\";const getSteps=(fg,bg,n)=>{const arr=new Array(256);const step=(bgGray-fgGray)/n;const newStart=fg/255;const newStep=(bg-fg)/(255*n);let prev=0;for(let i=0;i<=n;i++){const k=Math.round(fgGray+i*step);const value=newStart+i*newStep;for(let j=prev;j<=k;j++){arr[j]=value;}prev=k+1;}for(let i=prev;i<256;i++){arr[i]=arr[prev-1];}return arr.join(\",\");};const id=`g_${_classPrivateFieldGet(_docId2,this)}_hcm_${filterName}_filter`;const filter=info.filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addGrayConversion).call(this,filter);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,getSteps(newFgRGB[0],newBgRGB[0],5),getSteps(newFgRGB[1],newBgRGB[1],5),getSteps(newFgRGB[2],newBgRGB[2],5),filter);info.url=`url(#${id})`;return info.url;}destroy(keepHCM=false){if(keepHCM&&_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).size!==0){return;}if(_classPrivateFieldGet(_defs,this)){_classPrivateFieldGet(_defs,this).parentNode.parentNode.remove();_classPrivateFieldSet(_defs,this,null);}if(_classPrivateFieldGet(_cache,this)){_classPrivateFieldGet(_cache,this).clear();_classPrivateFieldSet(_cache,this,null);}_classPrivateFieldSet(_id,this,0);}}function _get_cache(_this2){return _classPrivateFieldGet(_cache,_this2)||_classPrivateFieldSet(_cache,_this2,new Map());}function _get_hcmCache(_this3){return _classPrivateFieldGet(_hcmCache,_this3)||_classPrivateFieldSet(_hcmCache,_this3,new Map());}function _get_defs(_this4){if(!_classPrivateFieldGet(_defs,_this4)){const div=_classPrivateFieldGet(_document,_this4).createElement(\"div\");const{style}=div;style.visibility=\"hidden\";style.contain=\"strict\";style.width=style.height=0;style.position=\"absolute\";style.top=style.left=0;style.zIndex=-1;const svg=_classPrivateFieldGet(_document,_this4).createElementNS(SVG_NS,\"svg\");svg.setAttribute(\"width\",0);svg.setAttribute(\"height\",0);_classPrivateFieldSet(_defs,_this4,_classPrivateFieldGet(_document,_this4).createElementNS(SVG_NS,\"defs\"));div.append(svg);svg.append(_classPrivateFieldGet(_defs,_this4));_classPrivateFieldGet(_document,_this4).body.append(div);}return _classPrivateFieldGet(_defs,_this4);}function _addGrayConversion(filter){const feColorMatrix=_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,\"feColorMatrix\");feColorMatrix.setAttribute(\"type\",\"matrix\");feColorMatrix.setAttribute(\"values\",\"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");filter.append(feColorMatrix);}function _createFilter(id){const filter=_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,\"filter\");filter.setAttribute(\"color-interpolation-filters\",\"sRGB\");filter.setAttribute(\"id\",id);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).append(filter);return filter;}function _appendFeFunc(feComponentTransfer,func,table){const feFunc=_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,func);feFunc.setAttribute(\"type\",\"discrete\");feFunc.setAttribute(\"tableValues\",table);feComponentTransfer.append(feFunc);}function _addTransferMapConversion(rTable,gTable,bTable,filter){const feComponentTransfer=_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,\"feComponentTransfer\");filter.append(feComponentTransfer);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,\"feFuncR\",rTable);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,\"feFuncG\",gTable);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,\"feFuncB\",bTable);}function _getRGB(color){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color=color;return getRGB(getComputedStyle(_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs)).getPropertyValue(\"color\"));}class DOMCanvasFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCanvasFactory{constructor({ownerDocument=globalThis.document}={}){super();this._document=ownerDocument;}_createCanvas(width,height){const canvas=this._document.createElement(\"canvas\");canvas.width=width;canvas.height=height;return canvas;}}async function fetchData(url,type=\"text\"){if(isValidFetchUrl(url,document.baseURI)){const response=await fetch(url);if(!response.ok){throw new Error(response.statusText);}switch(type){case\"arraybuffer\":return response.arrayBuffer();case\"blob\":return response.blob();case\"json\":return response.json();}return response.text();}return new Promise((resolve,reject)=>{const request=new XMLHttpRequest();request.open(\"GET\",url,true);request.responseType=type;request.onreadystatechange=()=>{if(request.readyState!==XMLHttpRequest.DONE){return;}if(request.status===200||request.status===0){switch(type){case\"arraybuffer\":case\"blob\":case\"json\":resolve(request.response);return;}resolve(request.responseText);return;}reject(new Error(request.statusText));};request.send(null);});}class DOMCMapReaderFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url,this.isCompressed?\"arraybuffer\":\"text\").then(data=>({cMapData:data instanceof ArrayBuffer?new Uint8Array(data):(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.stringToBytes)(data),compressionType}));}}class DOMStandardFontDataFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url,\"arraybuffer\").then(data=>new Uint8Array(data));}}class DOMSVGFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseSVGFactory{_createSVG(type){return document.createElementNS(SVG_NS,type);}}class PageViewport{constructor({viewBox,scale,rotation,offsetX=0,offsetY=0,dontFlip=false}){this.viewBox=viewBox;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;const centerX=(viewBox[2]+viewBox[0])/2;const centerY=(viewBox[3]+viewBox[1])/2;let rotateA,rotateB,rotateC,rotateD;rotation%=360;if(rotation<0){rotation+=360;}switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;case 0:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break;default:throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");}if(dontFlip){rotateC=-rotateC;rotateD=-rotateD;}let offsetCanvasX,offsetCanvasY;let width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=(viewBox[3]-viewBox[1])*scale;height=(viewBox[2]-viewBox[0])*scale;}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=(viewBox[2]-viewBox[0])*scale;height=(viewBox[3]-viewBox[1])*scale;}this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;}get rawDims(){const{viewBox}=this;return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.shadow)(this,\"rawDims\",{pageWidth:viewBox[2]-viewBox[0],pageHeight:viewBox[3]-viewBox[1],pageX:viewBox[0],pageY:viewBox[1]});}clone({scale=this.scale,rotation=this.rotation,offsetX=this.offsetX,offsetY=this.offsetY,dontFlip=false}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale,rotation,offsetX,offsetY,dontFlip});}convertToViewportPoint(x,y){return _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([x,y],this.transform);}convertToViewportRectangle(rect){const topLeft=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([rect[0],rect[1]],this.transform);const bottomRight=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]];}convertToPdfPoint(x,y){return _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.Util.applyInverseTransform([x,y],this.transform);}}class RenderingCancelledException extends _shared_util_js__WEBPACK_IMPORTED_MODULE_1__.BaseException{constructor(msg,extraDelay=0){super(msg,\"RenderingCancelledException\");this.extraDelay=extraDelay;}}function isDataScheme(url){const ii=url.length;let i=0;while(i<ii&&url[i].trim()===\"\"){i++;}return url.substring(i,i+5).toLowerCase()===\"data:\";}function isPdfFile(filename){return typeof filename===\"string\"&&/\\.pdf$/i.test(filename);}function getFilenameFromUrl(url,onlyStripPath=false){if(!onlyStripPath){[url]=url.split(/[#?]/,1);}return url.substring(url.lastIndexOf(\"/\")+1);}function getPdfFilenameFromUrl(url,defaultFilename=\"document.pdf\"){if(typeof url!==\"string\"){return defaultFilename;}if(isDataScheme(url)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');return defaultFilename;}const reURI=/^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;const reFilename=/[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;const splitURI=reURI.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.includes(\"%\")){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0];}catch{}}}return suggestedFilename||defaultFilename;}class StatTimer{constructor(){_defineProperty(this,\"started\",Object.create(null));_defineProperty(this,\"times\",[]);}time(name){if(name in this.started){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(`Timer is already running for ${name}`);}this.started[name]=Date.now();}timeEnd(name){if(!(name in this.started)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(`Timer has not been started for ${name}`);}this.times.push({name,start:this.started[name],end:Date.now()});delete this.started[name];}toString(){const outBuf=[];let longest=0;for(const{name}of this.times){longest=Math.max(name.length,longest);}for(const{name,start,end}of this.times){outBuf.push(`${name.padEnd(longest)} ${end-start}ms\\n`);}return outBuf.join(\"\");}}function isValidFetchUrl(url,baseUrl){try{const{protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return protocol===\"http:\"||protocol===\"https:\";}catch{return false;}}function noContextMenu(e){e.preventDefault();}function deprecated(details){console.log(\"Deprecated API usage: \"+details);}let pdfDateStringRegex;class PDFDateString{static toDateObject(input){if(!input||typeof input!==\"string\"){return null;}pdfDateStringRegex||=new RegExp(\"^D:\"+\"(\\\\d{4})\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"([Z|+|-])?\"+\"(\\\\d{2})?\"+\"'?\"+\"(\\\\d{2})?\"+\"'?\");const matches=pdfDateStringRegex.exec(input);if(!matches){return null;}const year=parseInt(matches[1],10);let month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;const universalTimeRelation=matches[7]||\"Z\";let offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0;if(universalTimeRelation===\"-\"){hour+=offsetHour;minute+=offsetMinute;}else if(universalTimeRelation===\"+\"){hour-=offsetHour;minute-=offsetMinute;}return new Date(Date.UTC(year,month,day,hour,minute,second));}}function getXfaPageViewport(xfaPage,{scale=1,rotation=0}){const{width,height}=xfaPage.attributes.style;const viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox,scale,rotation});}function getRGB(color){if(color.startsWith(\"#\")){const colorRGB=parseInt(color.slice(1),16);return[(colorRGB&0xff0000)>>16,(colorRGB&0x00ff00)>>8,colorRGB&0x0000ff];}if(color.startsWith(\"rgb(\")){return color.slice(4,-1).split(\",\").map(x=>parseInt(x));}if(color.startsWith(\"rgba(\")){return color.slice(5,-1).split(\",\").map(x=>parseInt(x)).slice(0,3);}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.warn)(`Not a valid color format: \"${color}\"`);return[0,0,0];}function getColorValues(colors){const span=document.createElement(\"span\");span.style.visibility=\"hidden\";document.body.append(span);for(const name of colors.keys()){span.style.color=name;const computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor));}span.remove();}function getCurrentTransform(ctx){const{a,b,c,d,e,f}=ctx.getTransform();return[a,b,c,d,e,f];}function getCurrentTransformInverse(ctx){const{a,b,c,d,e,f}=ctx.getTransform().invertSelf();return[a,b,c,d,e,f];}function setLayerDimensions(div,viewport,mustFlip=false,mustRotate=true){if(viewport instanceof PageViewport){const{pageWidth,pageHeight}=viewport.rawDims;const{style}=div;const useRound=_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.FeatureTest.isCSSRoundSupported;const w=`var(--scale-factor) * ${pageWidth}px`,h=`var(--scale-factor) * ${pageHeight}px`;const widthStr=useRound?`round(${w}, 1px)`:`calc(${w})`,heightStr=useRound?`round(${h}, 1px)`:`calc(${h})`;if(!mustFlip||viewport.rotation%180===0){style.width=widthStr;style.height=heightStr;}else{style.width=heightStr;style.height=widthStr;}}if(mustRotate){div.setAttribute(\"data-main-rotation\",viewport.rotation);}}/***/}),/***/47:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _DrawLayer;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */DrawLayer:()=>(/* binding */DrawLayer)/* harmony export */});/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(419);/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(292);var _parent2=/*#__PURE__*/new WeakMap();var _id2=/*#__PURE__*/new WeakMap();var _mapping=/*#__PURE__*/new WeakMap();var _toUpdate=/*#__PURE__*/new WeakMap();var _DrawLayer_brand=/*#__PURE__*/new WeakSet();class DrawLayer{constructor({pageIndex}){_classPrivateMethodInitSpec(this,_DrawLayer_brand);_classPrivateFieldInitSpec(this,_parent2,null);_classPrivateFieldInitSpec(this,_id2,0);_classPrivateFieldInitSpec(this,_mapping,new Map());_classPrivateFieldInitSpec(this,_toUpdate,new Map());this.pageIndex=pageIndex;}setParent(parent){if(!_classPrivateFieldGet(_parent2,this)){_classPrivateFieldSet(_parent2,this,parent);return;}if(_classPrivateFieldGet(_parent2,this)!==parent){if(_classPrivateFieldGet(_mapping,this).size>0){for(const root of _classPrivateFieldGet(_mapping,this).values()){root.remove();parent.append(root);}}_classPrivateFieldSet(_parent2,this,parent);}}static get _svgFactory(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.shadow)(this,\"_svgFactory\",new _display_utils_js__WEBPACK_IMPORTED_MODULE_0__.DOMSVGFactory());}highlight(outlines,color,opacity,isPathUpdatable=false){var _this$id3,_this$id4;const id=(_classPrivateFieldSet(_id2,this,(_this$id3=_classPrivateFieldGet(_id2,this),_this$id4=_this$id3++,_this$id3)),_this$id4);const root=_assertClassBrand(_DrawLayer_brand,this,_createSVG).call(this,outlines.box);root.classList.add(\"highlight\");if(outlines.free){root.classList.add(\"free\");}const defs=DrawLayer._svgFactory.createElement(\"defs\");root.append(defs);const path=DrawLayer._svgFactory.createElement(\"path\");defs.append(path);const pathId=`path_p${this.pageIndex}_${id}`;path.setAttribute(\"id\",pathId);path.setAttribute(\"d\",outlines.toSVGPath());if(isPathUpdatable){_classPrivateFieldGet(_toUpdate,this).set(id,path);}const clipPathId=_assertClassBrand(_DrawLayer_brand,this,_createClipPath).call(this,defs,pathId);const use=DrawLayer._svgFactory.createElement(\"use\");root.append(use);root.setAttribute(\"fill\",color);root.setAttribute(\"fill-opacity\",opacity);use.setAttribute(\"href\",`#${pathId}`);_classPrivateFieldGet(_mapping,this).set(id,root);return{id,clipPathId:`url(#${clipPathId})`};}highlightOutline(outlines){var _this$id5,_this$id6;const id=(_classPrivateFieldSet(_id2,this,(_this$id5=_classPrivateFieldGet(_id2,this),_this$id6=_this$id5++,_this$id5)),_this$id6);const root=_assertClassBrand(_DrawLayer_brand,this,_createSVG).call(this,outlines.box);root.classList.add(\"highlightOutline\");const defs=DrawLayer._svgFactory.createElement(\"defs\");root.append(defs);const path=DrawLayer._svgFactory.createElement(\"path\");defs.append(path);const pathId=`path_p${this.pageIndex}_${id}`;path.setAttribute(\"id\",pathId);path.setAttribute(\"d\",outlines.toSVGPath());path.setAttribute(\"vector-effect\",\"non-scaling-stroke\");let maskId;if(outlines.free){root.classList.add(\"free\");const mask=DrawLayer._svgFactory.createElement(\"mask\");defs.append(mask);maskId=`mask_p${this.pageIndex}_${id}`;mask.setAttribute(\"id\",maskId);mask.setAttribute(\"maskUnits\",\"objectBoundingBox\");const rect=DrawLayer._svgFactory.createElement(\"rect\");mask.append(rect);rect.setAttribute(\"width\",\"1\");rect.setAttribute(\"height\",\"1\");rect.setAttribute(\"fill\",\"white\");const use=DrawLayer._svgFactory.createElement(\"use\");mask.append(use);use.setAttribute(\"href\",`#${pathId}`);use.setAttribute(\"stroke\",\"none\");use.setAttribute(\"fill\",\"black\");use.setAttribute(\"fill-rule\",\"nonzero\");use.classList.add(\"mask\");}const use1=DrawLayer._svgFactory.createElement(\"use\");root.append(use1);use1.setAttribute(\"href\",`#${pathId}`);if(maskId){use1.setAttribute(\"mask\",`url(#${maskId})`);}const use2=use1.cloneNode();root.append(use2);use1.classList.add(\"mainOutline\");use2.classList.add(\"secondaryOutline\");_classPrivateFieldGet(_mapping,this).set(id,root);return id;}finalizeLine(id,line){const path=_classPrivateFieldGet(_toUpdate,this).get(id);_classPrivateFieldGet(_toUpdate,this).delete(id);this.updateBox(id,line.box);path.setAttribute(\"d\",line.toSVGPath());}updateLine(id,line){const root=_classPrivateFieldGet(_mapping,this).get(id);const defs=root.firstChild;const path=defs.firstChild;path.setAttribute(\"d\",line.toSVGPath());}removeFreeHighlight(id){this.remove(id);_classPrivateFieldGet(_toUpdate,this).delete(id);}updatePath(id,line){_classPrivateFieldGet(_toUpdate,this).get(id).setAttribute(\"d\",line.toSVGPath());}updateBox(id,box){_setBox.call(DrawLayer,_classPrivateFieldGet(_mapping,this).get(id),box);}show(id,visible){_classPrivateFieldGet(_mapping,this).get(id).classList.toggle(\"hidden\",!visible);}rotate(id,angle){_classPrivateFieldGet(_mapping,this).get(id).setAttribute(\"data-main-rotation\",angle);}changeColor(id,color){_classPrivateFieldGet(_mapping,this).get(id).setAttribute(\"fill\",color);}changeOpacity(id,opacity){_classPrivateFieldGet(_mapping,this).get(id).setAttribute(\"fill-opacity\",opacity);}addClass(id,className){_classPrivateFieldGet(_mapping,this).get(id).classList.add(className);}removeClass(id,className){_classPrivateFieldGet(_mapping,this).get(id).classList.remove(className);}remove(id){if(_classPrivateFieldGet(_parent2,this)===null){return;}_classPrivateFieldGet(_mapping,this).get(id).remove();_classPrivateFieldGet(_mapping,this).delete(id);}destroy(){_classPrivateFieldSet(_parent2,this,null);for(const root of _classPrivateFieldGet(_mapping,this).values()){root.remove();}_classPrivateFieldGet(_mapping,this).clear();}}/***/_DrawLayer=DrawLayer;function _setBox(element,{x=0,y=0,width=1,height=1}={}){const{style}=element;style.top=`${100*y}%`;style.left=`${100*x}%`;style.width=`${100*width}%`;style.height=`${100*height}%`;}function _createSVG(box){const svg=_DrawLayer._svgFactory.create(1,1,true);_classPrivateFieldGet(_parent2,this).append(svg);svg.setAttribute(\"aria-hidden\",true);_setBox.call(_DrawLayer,svg,box);return svg;}function _createClipPath(defs,pathId){const clipPath=_DrawLayer._svgFactory.createElement(\"clipPath\");defs.append(clipPath);const clipPathId=`clip_${pathId}`;clipPath.setAttribute(\"id\",clipPathId);clipPath.setAttribute(\"clipPathUnits\",\"objectBoundingBox\");const clipPathUse=_DrawLayer._svgFactory.createElement(\"use\");clipPath.append(clipPathUse);clipPathUse.setAttribute(\"href\",`#${pathId}`);clipPathUse.classList.add(\"clip\");return clipPathId;}}),/***/731:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _FreeTextEditor,_HighlightEditor,_InkEditor,_StampEditor;// EXPORTS\n__webpack_require__.d(__webpack_exports__,{AnnotationEditorLayer:()=>(/* binding */AnnotationEditorLayer)});// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);// EXTERNAL MODULE: ./src/display/editor/editor.js + 1 modules\nvar editor_editor=__webpack_require__(310);// EXTERNAL MODULE: ./src/display/editor/tools.js\nvar tools=__webpack_require__(830);// EXTERNAL MODULE: ./src/display/annotation_layer.js + 1 modules\nvar annotation_layer=__webpack_require__(976);;// CONCATENATED MODULE: ./src/display/editor/freetext.js\nconst EOL_PATTERN=/\\r\\n?|\\n/g;var _boundEditorDivBlur=/*#__PURE__*/new WeakMap();var _boundEditorDivFocus=/*#__PURE__*/new WeakMap();var _boundEditorDivInput=/*#__PURE__*/new WeakMap();var _boundEditorDivKeydown=/*#__PURE__*/new WeakMap();var _boundEditorDivPaste=/*#__PURE__*/new WeakMap();var _color2=/*#__PURE__*/new WeakMap();var _content=/*#__PURE__*/new WeakMap();var _editorDivId=/*#__PURE__*/new WeakMap();var _fontSize=/*#__PURE__*/new WeakMap();var _initialData=/*#__PURE__*/new WeakMap();var _FreeTextEditor_brand=/*#__PURE__*/new WeakSet();class FreeTextEditor extends editor_editor.AnnotationEditor{static get _keyboardManager(){const proto=FreeTextEditor.prototype;const arrowChecker=self=>self.isEmpty();const small=tools.AnnotationEditorUIManager.TRANSLATE_SMALL;const big=tools.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,util.shadow)(this,\"_keyboardManager\",new tools.KeyboardManager([[[\"ctrl+s\",\"mac+meta+s\",\"ctrl+p\",\"mac+meta+p\"],proto.commitOrRemove,{bubbles:true}],[[\"ctrl+Enter\",\"mac+meta+Enter\",\"Escape\",\"mac+Escape\"],proto.commitOrRemove],[[\"ArrowLeft\",\"mac+ArrowLeft\"],proto._translateEmpty,{args:[-small,0],checker:arrowChecker}],[[\"ctrl+ArrowLeft\",\"mac+shift+ArrowLeft\"],proto._translateEmpty,{args:[-big,0],checker:arrowChecker}],[[\"ArrowRight\",\"mac+ArrowRight\"],proto._translateEmpty,{args:[small,0],checker:arrowChecker}],[[\"ctrl+ArrowRight\",\"mac+shift+ArrowRight\"],proto._translateEmpty,{args:[big,0],checker:arrowChecker}],[[\"ArrowUp\",\"mac+ArrowUp\"],proto._translateEmpty,{args:[0,-small],checker:arrowChecker}],[[\"ctrl+ArrowUp\",\"mac+shift+ArrowUp\"],proto._translateEmpty,{args:[0,-big],checker:arrowChecker}],[[\"ArrowDown\",\"mac+ArrowDown\"],proto._translateEmpty,{args:[0,small],checker:arrowChecker}],[[\"ctrl+ArrowDown\",\"mac+shift+ArrowDown\"],proto._translateEmpty,{args:[0,big],checker:arrowChecker}]]));}constructor(params){super({...params,name:\"freeTextEditor\"});_classPrivateMethodInitSpec(this,_FreeTextEditor_brand);_classPrivateFieldInitSpec(this,_boundEditorDivBlur,this.editorDivBlur.bind(this));_classPrivateFieldInitSpec(this,_boundEditorDivFocus,this.editorDivFocus.bind(this));_classPrivateFieldInitSpec(this,_boundEditorDivInput,this.editorDivInput.bind(this));_classPrivateFieldInitSpec(this,_boundEditorDivKeydown,this.editorDivKeydown.bind(this));_classPrivateFieldInitSpec(this,_boundEditorDivPaste,this.editorDivPaste.bind(this));_classPrivateFieldInitSpec(this,_color2,void 0);_classPrivateFieldInitSpec(this,_content,\"\");_classPrivateFieldInitSpec(this,_editorDivId,`${this.id}-editor`);_classPrivateFieldInitSpec(this,_fontSize,void 0);_classPrivateFieldInitSpec(this,_initialData,null);_classPrivateFieldSet(_color2,this,params.color||FreeTextEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor);_classPrivateFieldSet(_fontSize,this,params.fontSize||FreeTextEditor._defaultFontSize);}static initialize(l10n,uiManager){editor_editor.AnnotationEditor.initialize(l10n,uiManager,{strings:[\"pdfjs-free-text-default-content\"]});const style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue(\"--freetext-padding\"));}static updateDefaultParams(type,value){switch(type){case util.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=value;break;case util.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=value;break;}}updateParams(type,value){switch(type){case util.AnnotationEditorParamsType.FREETEXT_SIZE:_assertClassBrand(_FreeTextEditor_brand,this,_updateFontSize).call(this,value);break;case util.AnnotationEditorParamsType.FREETEXT_COLOR:_assertClassBrand(_FreeTextEditor_brand,this,_updateColor).call(this,value);break;}}static get defaultPropertiesToUpdate(){return[[util.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[util.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor]];}get propertiesToUpdate(){return[[util.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(_fontSize,this)],[util.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(_color2,this)]];}_translateEmpty(x,y){this._uiManager.translateSelectedEditors(x,y,true);}getInitialTranslation(){const scale=this.parentScale;return[-FreeTextEditor._internalPadding*scale,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(_fontSize,this))*scale];}rebuild(){if(!this.parent){return;}super.rebuild();if(this.div===null){return;}if(!this.isAttachedToDOM){this.parent.add(this);}}enableEditMode(){if(this.isInEditMode()){return;}this.parent.setEditingState(false);this.parent.updateToolbar(util.AnnotationEditorType.FREETEXT);super.enableEditMode();this.overlayDiv.classList.remove(\"enabled\");this.editorDiv.contentEditable=true;this._isDraggable=false;this.div.removeAttribute(\"aria-activedescendant\");this.editorDiv.addEventListener(\"keydown\",_classPrivateFieldGet(_boundEditorDivKeydown,this));this.editorDiv.addEventListener(\"focus\",_classPrivateFieldGet(_boundEditorDivFocus,this));this.editorDiv.addEventListener(\"blur\",_classPrivateFieldGet(_boundEditorDivBlur,this));this.editorDiv.addEventListener(\"input\",_classPrivateFieldGet(_boundEditorDivInput,this));this.editorDiv.addEventListener(\"paste\",_classPrivateFieldGet(_boundEditorDivPaste,this));}disableEditMode(){if(!this.isInEditMode()){return;}this.parent.setEditingState(true);super.disableEditMode();this.overlayDiv.classList.add(\"enabled\");this.editorDiv.contentEditable=false;this.div.setAttribute(\"aria-activedescendant\",_classPrivateFieldGet(_editorDivId,this));this._isDraggable=true;this.editorDiv.removeEventListener(\"keydown\",_classPrivateFieldGet(_boundEditorDivKeydown,this));this.editorDiv.removeEventListener(\"focus\",_classPrivateFieldGet(_boundEditorDivFocus,this));this.editorDiv.removeEventListener(\"blur\",_classPrivateFieldGet(_boundEditorDivBlur,this));this.editorDiv.removeEventListener(\"input\",_classPrivateFieldGet(_boundEditorDivInput,this));this.editorDiv.removeEventListener(\"paste\",_classPrivateFieldGet(_boundEditorDivPaste,this));this.div.focus({preventScroll:true});this.isEditing=false;this.parent.div.classList.add(\"freetextEditing\");}focusin(event){if(!this._focusEventsAllowed){return;}super.focusin(event);if(event.target!==this.editorDiv){this.editorDiv.focus();}}onceAdded(){if(this.width){return;}this.enableEditMode();this.editorDiv.focus();if(this._initialOptions?.isCentered){this.center();}this._initialOptions=null;}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===\"\";}remove(){this.isEditing=false;if(this.parent){this.parent.setEditingState(true);this.parent.div.classList.add(\"freetextEditing\");}super.remove();}commit(){if(!this.isInEditMode()){return;}super.commit();this.disableEditMode();const savedText=_classPrivateFieldGet(_content,this);const newText=_classPrivateFieldSet(_content,this,_assertClassBrand(_FreeTextEditor_brand,this,_extractText).call(this).trimEnd());if(savedText===newText){return;}const setText=text=>{_classPrivateFieldSet(_content,this,text);if(!text){this.remove();return;}_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);this._uiManager.rebuild(this);_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);};this.addCommands({cmd:()=>{setText(newText);},undo:()=>{setText(savedText);},mustExec:false});_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);}shouldGetKeyboardEvents(){return this.isInEditMode();}enterInEditMode(){this.enableEditMode();this.editorDiv.focus();}dblclick(event){this.enterInEditMode();}keydown(event){if(event.target===this.div&&event.key===\"Enter\"){this.enterInEditMode();event.preventDefault();}}editorDivKeydown(event){FreeTextEditor._keyboardManager.exec(this,event);}editorDivFocus(event){this.isEditing=true;}editorDivBlur(event){this.isEditing=false;}editorDivInput(event){this.parent.div.classList.toggle(\"freetextEditing\",this.isEmpty());}disableEditing(){this.editorDiv.setAttribute(\"role\",\"comment\");this.editorDiv.removeAttribute(\"aria-multiline\");}enableEditing(){this.editorDiv.setAttribute(\"role\",\"textbox\");this.editorDiv.setAttribute(\"aria-multiline\",true);}render(){if(this.div){return this.div;}let baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}super.render();this.editorDiv=document.createElement(\"div\");this.editorDiv.className=\"internal\";this.editorDiv.setAttribute(\"id\",_classPrivateFieldGet(_editorDivId,this));this.editorDiv.setAttribute(\"data-l10n-id\",\"pdfjs-free-text\");this.enableEditing();editor_editor.AnnotationEditor._l10nPromise.get(\"pdfjs-free-text-default-content\").then(msg=>this.editorDiv?.setAttribute(\"default-content\",msg));this.editorDiv.contentEditable=true;const{style}=this.editorDiv;style.fontSize=`calc(${_classPrivateFieldGet(_fontSize,this)}px * var(--scale-factor))`;style.color=_classPrivateFieldGet(_color2,this);this.div.append(this.editorDiv);this.overlayDiv=document.createElement(\"div\");this.overlayDiv.classList.add(\"overlay\",\"enabled\");this.div.append(this.overlayDiv);(0,tools.bindEvents)(this,this.div,[\"dblclick\",\"keydown\"]);if(this.width){const[parentWidth,parentHeight]=this.parentDimensions;if(this.annotationElementId){const{position}=_classPrivateFieldGet(_initialData,this);let[tx,ty]=this.getInitialTranslation();[tx,ty]=this.pageTranslationToScreen(tx,ty);const[pageWidth,pageHeight]=this.pageDimensions;const[pageX,pageY]=this.pageTranslation;let posX,posY;switch(this.rotation){case 0:posX=baseX+(position[0]-pageX)/pageWidth;posY=baseY+this.height-(position[1]-pageY)/pageHeight;break;case 90:posX=baseX+(position[0]-pageX)/pageWidth;posY=baseY-(position[1]-pageY)/pageHeight;[tx,ty]=[ty,-tx];break;case 180:posX=baseX-this.width+(position[0]-pageX)/pageWidth;posY=baseY-(position[1]-pageY)/pageHeight;[tx,ty]=[-tx,-ty];break;case 270:posX=baseX+(position[0]-pageX-this.height*pageHeight)/pageWidth;posY=baseY+(position[1]-pageY-this.width*pageWidth)/pageHeight;[tx,ty]=[-ty,tx];break;}this.setAt(posX*parentWidth,posY*parentHeight,tx,ty);}else{this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);}_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);this._isDraggable=true;this.editorDiv.contentEditable=false;}else{this._isDraggable=false;this.editorDiv.contentEditable=true;}return this.div;}editorDivPaste(event){const clipboardData=event.clipboardData||window.clipboardData;const{types}=clipboardData;if(types.length===1&&types[0]===\"text/plain\"){return;}event.preventDefault();const paste=_deserializeContent.call(FreeTextEditor,clipboardData.getData(\"text\")||\"\").replaceAll(EOL_PATTERN,\"\\n\");if(!paste){return;}const selection=window.getSelection();if(!selection.rangeCount){return;}this.editorDiv.normalize();selection.deleteFromDocument();const range=selection.getRangeAt(0);if(!paste.includes(\"\\n\")){range.insertNode(document.createTextNode(paste));this.editorDiv.normalize();selection.collapseToStart();return;}const{startContainer,startOffset}=range;const bufferBefore=[];const bufferAfter=[];if(startContainer.nodeType===Node.TEXT_NODE){const parent=startContainer.parentElement;bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN,\"\"));if(parent!==this.editorDiv){let buffer=bufferBefore;for(const child of this.editorDiv.childNodes){if(child===parent){buffer=bufferAfter;continue;}buffer.push(_getNodeContent.call(FreeTextEditor,child));}}bufferBefore.push(startContainer.nodeValue.slice(0,startOffset).replaceAll(EOL_PATTERN,\"\"));}else if(startContainer===this.editorDiv){let buffer=bufferBefore;let i=0;for(const child of this.editorDiv.childNodes){if(i++===startOffset){buffer=bufferAfter;}buffer.push(_getNodeContent.call(FreeTextEditor,child));}}_classPrivateFieldSet(_content,this,`${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`);_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);const newRange=new Range();let beforeLength=bufferBefore.reduce((acc,line)=>acc+line.length,0);for(const{firstChild}of this.editorDiv.childNodes){if(firstChild.nodeType===Node.TEXT_NODE){const length=firstChild.nodeValue.length;if(beforeLength<=length){newRange.setStart(firstChild,beforeLength);newRange.setEnd(firstChild,beforeLength);break;}beforeLength-=length;}}selection.removeAllRanges();selection.addRange(newRange);}get contentDiv(){return this.editorDiv;}static deserialize(data,parent,uiManager){let initialData=null;if(data instanceof annotation_layer.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize,fontColor},rect,rotation,id},textContent,textPosition,parent:{page:{pageNumber}}}=data;if(!textContent||textContent.length===0){return null;}initialData=data={annotationType:util.AnnotationEditorType.FREETEXT,color:Array.from(fontColor),fontSize,value:textContent.join(\"\\n\"),position:textPosition,pageIndex:pageNumber-1,rect:rect.slice(0),rotation,id,deleted:false};}const editor=super.deserialize(data,parent,uiManager);_classPrivateFieldSet(_fontSize,editor,data.fontSize);_classPrivateFieldSet(_color2,editor,util.Util.makeHexColor(...data.color));_classPrivateFieldSet(_content,editor,_deserializeContent.call(FreeTextEditor,data.value));editor.annotationElementId=data.id||null;_classPrivateFieldSet(_initialData,editor,initialData);return editor;}serialize(isForCopying=false){if(this.isEmpty()){return null;}if(this.deleted){return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:true};}const padding=FreeTextEditor._internalPadding*this.parentScale;const rect=this.getRect(padding,padding);const color=editor_editor.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(_color2,this));const serialized={annotationType:util.AnnotationEditorType.FREETEXT,color,fontSize:_classPrivateFieldGet(_fontSize,this),value:_assertClassBrand(_FreeTextEditor_brand,this,_serializeContent).call(this),pageIndex:this.pageIndex,rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(isForCopying){return serialized;}if(this.annotationElementId&&!_assertClassBrand(_FreeTextEditor_brand,this,_hasElementChanged).call(this,serialized)){return null;}serialized.id=this.annotationElementId;return serialized;}renderAnnotationElement(annotation){const content=super.renderAnnotationElement(annotation);if(this.deleted){return content;}const{style}=content;style.fontSize=`calc(${_classPrivateFieldGet(_fontSize,this)}px * var(--scale-factor))`;style.color=_classPrivateFieldGet(_color2,this);content.replaceChildren();for(const line of _classPrivateFieldGet(_content,this).split(\"\\n\")){const div=document.createElement(\"div\");div.append(line?document.createTextNode(line):document.createElement(\"br\"));content.append(div);}const padding=FreeTextEditor._internalPadding*this.parentScale;annotation.updateEdited({rect:this.getRect(padding,padding)});return content;}resetAnnotationElement(annotation){super.resetAnnotationElement(annotation);annotation.resetEdited();}}// EXTERNAL MODULE: ./src/display/editor/outliner.js\n_FreeTextEditor=FreeTextEditor;function _updateFontSize(fontSize){const setFontsize=size=>{this.editorDiv.style.fontSize=`calc(${size}px * var(--scale-factor))`;this.translate(0,-(size-_classPrivateFieldGet(_fontSize,this))*this.parentScale);_classPrivateFieldSet(_fontSize,this,size);_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);};const savedFontsize=_classPrivateFieldGet(_fontSize,this);this.addCommands({cmd:setFontsize.bind(this,fontSize),undo:setFontsize.bind(this,savedFontsize),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:true,keepUndo:true});}function _updateColor(color){const setColor=col=>{_classPrivateFieldSet(_color2,this,this.editorDiv.style.color=col);};const savedColor=_classPrivateFieldGet(_color2,this);this.addCommands({cmd:setColor.bind(this,color),undo:setColor.bind(this,savedColor),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:true,keepUndo:true});}function _extractText(){const buffer=[];this.editorDiv.normalize();for(const child of this.editorDiv.childNodes){buffer.push(_getNodeContent.call(_FreeTextEditor,child));}return buffer.join(\"\\n\");}function _setEditorDimensions(){const[parentWidth,parentHeight]=this.parentDimensions;let rect;if(this.isAttachedToDOM){rect=this.div.getBoundingClientRect();}else{const{currentLayer,div}=this;const savedDisplay=div.style.display;const savedVisibility=div.classList.contains(\"hidden\");div.classList.remove(\"hidden\");div.style.display=\"hidden\";currentLayer.div.append(this.div);rect=div.getBoundingClientRect();div.remove();div.style.display=savedDisplay;div.classList.toggle(\"hidden\",savedVisibility);}if(this.rotation%180===this.parentRotation%180){this.width=rect.width/parentWidth;this.height=rect.height/parentHeight;}else{this.width=rect.height/parentWidth;this.height=rect.width/parentHeight;}this.fixAndSetPosition();}function _getNodeContent(node){return(node.nodeType===Node.TEXT_NODE?node.nodeValue:node.innerText).replaceAll(EOL_PATTERN,\"\");}function _setContent(){this.editorDiv.replaceChildren();if(!_classPrivateFieldGet(_content,this)){return;}for(const line of _classPrivateFieldGet(_content,this).split(\"\\n\")){const div=document.createElement(\"div\");div.append(line?document.createTextNode(line):document.createElement(\"br\"));this.editorDiv.append(div);}}function _serializeContent(){return _classPrivateFieldGet(_content,this).replaceAll(\"\\xa0\",\" \");}function _deserializeContent(content){return content.replaceAll(\" \",\"\\xa0\");}function _hasElementChanged(serialized){const{value,fontSize,color,pageIndex}=_classPrivateFieldGet(_initialData,this);return this._hasBeenMoved||serialized.value!==value||serialized.fontSize!==fontSize||serialized.color.some((c,i)=>c!==color[i])||serialized.pageIndex!==pageIndex;}_defineProperty(FreeTextEditor,\"_freeTextDefaultContent\",\"\");_defineProperty(FreeTextEditor,\"_internalPadding\",0);_defineProperty(FreeTextEditor,\"_defaultColor\",null);_defineProperty(FreeTextEditor,\"_defaultFontSize\",10);_defineProperty(FreeTextEditor,\"_type\",\"freetext\");_defineProperty(FreeTextEditor,\"_editorType\",util.AnnotationEditorType.FREETEXT);var editor_outliner=__webpack_require__(61);// EXTERNAL MODULE: ./src/display/editor/color_picker.js\nvar color_picker=__webpack_require__(259);// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);;// CONCATENATED MODULE: ./src/display/editor/highlight.js\nvar _anchorNode=/*#__PURE__*/new WeakMap();var _anchorOffset=/*#__PURE__*/new WeakMap();var _boxes=/*#__PURE__*/new WeakMap();var _clipPathId=/*#__PURE__*/new WeakMap();var _colorPicker=/*#__PURE__*/new WeakMap();var _focusOutlines=/*#__PURE__*/new WeakMap();var _focusNode=/*#__PURE__*/new WeakMap();var _focusOffset=/*#__PURE__*/new WeakMap();var _highlightDiv=/*#__PURE__*/new WeakMap();var _highlightOutlines=/*#__PURE__*/new WeakMap();var _id3=/*#__PURE__*/new WeakMap();var _isFreeHighlight=/*#__PURE__*/new WeakMap();var _boundKeydown=/*#__PURE__*/new WeakMap();var _lastPoint=/*#__PURE__*/new WeakMap();var _opacity=/*#__PURE__*/new WeakMap();var _outlineId=/*#__PURE__*/new WeakMap();var _text=/*#__PURE__*/new WeakMap();var _thickness=/*#__PURE__*/new WeakMap();var _methodOfCreation=/*#__PURE__*/new WeakMap();var _HighlightEditor_brand=/*#__PURE__*/new WeakSet();class HighlightEditor extends editor_editor.AnnotationEditor{static get _keyboardManager(){const proto=HighlightEditor.prototype;return(0,util.shadow)(this,\"_keyboardManager\",new tools.KeyboardManager([[[\"ArrowLeft\",\"mac+ArrowLeft\"],proto._moveCaret,{args:[0]}],[[\"ArrowRight\",\"mac+ArrowRight\"],proto._moveCaret,{args:[1]}],[[\"ArrowUp\",\"mac+ArrowUp\"],proto._moveCaret,{args:[2]}],[[\"ArrowDown\",\"mac+ArrowDown\"],proto._moveCaret,{args:[3]}]]));}constructor(params){super({...params,name:\"highlightEditor\"});_classPrivateMethodInitSpec(this,_HighlightEditor_brand);_classPrivateFieldInitSpec(this,_anchorNode,null);_classPrivateFieldInitSpec(this,_anchorOffset,0);_classPrivateFieldInitSpec(this,_boxes,void 0);_classPrivateFieldInitSpec(this,_clipPathId,null);_classPrivateFieldInitSpec(this,_colorPicker,null);_classPrivateFieldInitSpec(this,_focusOutlines,null);_classPrivateFieldInitSpec(this,_focusNode,null);_classPrivateFieldInitSpec(this,_focusOffset,0);_classPrivateFieldInitSpec(this,_highlightDiv,null);_classPrivateFieldInitSpec(this,_highlightOutlines,null);_classPrivateFieldInitSpec(this,_id3,null);_classPrivateFieldInitSpec(this,_isFreeHighlight,false);_classPrivateFieldInitSpec(this,_boundKeydown,_assertClassBrand(_HighlightEditor_brand,this,_keydown).bind(this));_classPrivateFieldInitSpec(this,_lastPoint,null);_classPrivateFieldInitSpec(this,_opacity,void 0);_classPrivateFieldInitSpec(this,_outlineId,null);_classPrivateFieldInitSpec(this,_text,\"\");_classPrivateFieldInitSpec(this,_thickness,void 0);_classPrivateFieldInitSpec(this,_methodOfCreation,\"\");this.color=params.color||HighlightEditor._defaultColor;_classPrivateFieldSet(_thickness,this,params.thickness||HighlightEditor._defaultThickness);_classPrivateFieldSet(_opacity,this,params.opacity||HighlightEditor._defaultOpacity);_classPrivateFieldSet(_boxes,this,params.boxes||null);_classPrivateFieldSet(_methodOfCreation,this,params.methodOfCreation||\"\");_classPrivateFieldSet(_text,this,params.text||\"\");this._isDraggable=false;if(params.highlightId>-1){_classPrivateFieldSet(_isFreeHighlight,this,true);_assertClassBrand(_HighlightEditor_brand,this,_createFreeOutlines).call(this,params);_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this);}else{_classPrivateFieldSet(_anchorNode,this,params.anchorNode);_classPrivateFieldSet(_anchorOffset,this,params.anchorOffset);_classPrivateFieldSet(_focusNode,this,params.focusNode);_classPrivateFieldSet(_focusOffset,this,params.focusOffset);_assertClassBrand(_HighlightEditor_brand,this,_createOutlines).call(this);_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this);this.rotate(this.rotation);}}get telemetryInitialData(){return{action:\"added\",type:_classPrivateFieldGet(_isFreeHighlight,this)?\"free_highlight\":\"highlight\",color:this._uiManager.highlightColorNames.get(this.color),thickness:_classPrivateFieldGet(_thickness,this),methodOfCreation:_classPrivateFieldGet(_methodOfCreation,this)};}get telemetryFinalData(){return{type:\"highlight\",color:this._uiManager.highlightColorNames.get(this.color)};}static computeTelemetryFinalData(data){return{numberOfColors:data.get(\"color\").size};}static initialize(l10n,uiManager){editor_editor.AnnotationEditor.initialize(l10n,uiManager);HighlightEditor._defaultColor||=uiManager.highlightColors?.values().next().value||\"#fff066\";}static updateDefaultParams(type,value){switch(type){case util.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:HighlightEditor._defaultColor=value;break;case util.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:HighlightEditor._defaultThickness=value;break;}}translateInPage(x,y){}get toolbarPosition(){return _classPrivateFieldGet(_lastPoint,this);}updateParams(type,value){switch(type){case util.AnnotationEditorParamsType.HIGHLIGHT_COLOR:_assertClassBrand(_HighlightEditor_brand,this,_updateColor2).call(this,value);break;case util.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:_assertClassBrand(_HighlightEditor_brand,this,_updateThickness).call(this,value);break;}}static get defaultPropertiesToUpdate(){return[[util.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,HighlightEditor._defaultColor],[util.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,HighlightEditor._defaultThickness]];}get propertiesToUpdate(){return[[util.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor],[util.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,_classPrivateFieldGet(_thickness,this)||HighlightEditor._defaultThickness],[util.AnnotationEditorParamsType.HIGHLIGHT_FREE,_classPrivateFieldGet(_isFreeHighlight,this)]];}async addEditToolbar(){const toolbar=await super.addEditToolbar();if(!toolbar){return null;}if(this._uiManager.highlightColors){_classPrivateFieldSet(_colorPicker,this,new color_picker.ColorPicker({editor:this}));toolbar.addColorPicker(_classPrivateFieldGet(_colorPicker,this));}return toolbar;}disableEditing(){super.disableEditing();this.div.classList.toggle(\"disabled\",true);}enableEditing(){super.enableEditing();this.div.classList.toggle(\"disabled\",false);}fixAndSetPosition(){return super.fixAndSetPosition(_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this));}getBaseTranslation(){return[0,0];}getRect(tx,ty){return super.getRect(tx,ty,_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this));}onceAdded(){this.parent.addUndoableEditor(this);this.div.focus();}remove(){_assertClassBrand(_HighlightEditor_brand,this,_cleanDrawLayer).call(this);this._reportTelemetry({action:\"deleted\"});super.remove();}rebuild(){if(!this.parent){return;}super.rebuild();if(this.div===null){return;}_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this);if(!this.isAttachedToDOM){this.parent.add(this);}}setParent(parent){let mustBeSelected=false;if(this.parent&&!parent){_assertClassBrand(_HighlightEditor_brand,this,_cleanDrawLayer).call(this);}else if(parent){_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this,parent);mustBeSelected=!this.parent&&this.div?.classList.contains(\"selectedEditor\");}super.setParent(parent);this.show(this._isVisible);if(mustBeSelected){this.select();}}rotate(angle){const{drawLayer}=this.parent;let box;if(_classPrivateFieldGet(_isFreeHighlight,this)){angle=(angle-this.rotation+360)%360;box=_rotateBbox.call(HighlightEditor,_classPrivateFieldGet(_highlightOutlines,this).box,angle);}else{box=_rotateBbox.call(HighlightEditor,this,angle);}drawLayer.rotate(_classPrivateFieldGet(_id3,this),angle);drawLayer.rotate(_classPrivateFieldGet(_outlineId,this),angle);drawLayer.updateBox(_classPrivateFieldGet(_id3,this),box);drawLayer.updateBox(_classPrivateFieldGet(_outlineId,this),_rotateBbox.call(HighlightEditor,_classPrivateFieldGet(_focusOutlines,this).box,angle));}render(){if(this.div){return this.div;}const div=super.render();if(_classPrivateFieldGet(_text,this)){div.setAttribute(\"aria-label\",_classPrivateFieldGet(_text,this));div.setAttribute(\"role\",\"mark\");}if(_classPrivateFieldGet(_isFreeHighlight,this)){div.classList.add(\"free\");}else{this.div.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeydown,this));}const highlightDiv=_classPrivateFieldSet(_highlightDiv,this,document.createElement(\"div\"));div.append(highlightDiv);highlightDiv.setAttribute(\"aria-hidden\",\"true\");highlightDiv.className=\"internal\";highlightDiv.style.clipPath=_classPrivateFieldGet(_clipPathId,this);const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(this.width*parentWidth,this.height*parentHeight);(0,tools.bindEvents)(this,_classPrivateFieldGet(_highlightDiv,this),[\"pointerover\",\"pointerleave\"]);this.enableEditing();return div;}pointerover(){this.parent.drawLayer.addClass(_classPrivateFieldGet(_outlineId,this),\"hovered\");}pointerleave(){this.parent.drawLayer.removeClass(_classPrivateFieldGet(_outlineId,this),\"hovered\");}_moveCaret(direction){this.parent.unselect(this);switch(direction){case 0:case 2:_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,true);break;case 1:case 3:_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,false);break;}}select(){super.select();if(!_classPrivateFieldGet(_outlineId,this)){return;}this.parent?.drawLayer.removeClass(_classPrivateFieldGet(_outlineId,this),\"hovered\");this.parent?.drawLayer.addClass(_classPrivateFieldGet(_outlineId,this),\"selected\");}unselect(){super.unselect();if(!_classPrivateFieldGet(_outlineId,this)){return;}this.parent?.drawLayer.removeClass(_classPrivateFieldGet(_outlineId,this),\"selected\");if(!_classPrivateFieldGet(_isFreeHighlight,this)){_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,false);}}get _mustFixPosition(){return!_classPrivateFieldGet(_isFreeHighlight,this);}show(visible=this._isVisible){super.show(visible);if(this.parent){this.parent.drawLayer.show(_classPrivateFieldGet(_id3,this),visible);this.parent.drawLayer.show(_classPrivateFieldGet(_outlineId,this),visible);}}static startHighlighting(parent,isLTR,{target:textLayer,x,y}){const{x:layerX,y:layerY,width:parentWidth,height:parentHeight}=textLayer.getBoundingClientRect();const pointerMove=e=>{_assertClassBrand(HighlightEditor,this,_highlightMove).call(this,parent,e);};const pointerDownOptions={capture:true,passive:false};const pointerDown=e=>{e.preventDefault();e.stopPropagation();};const pointerUpCallback=e=>{textLayer.removeEventListener(\"pointermove\",pointerMove);window.removeEventListener(\"blur\",pointerUpCallback);window.removeEventListener(\"pointerup\",pointerUpCallback);window.removeEventListener(\"pointerdown\",pointerDown,pointerDownOptions);window.removeEventListener(\"contextmenu\",display_utils.noContextMenu);_assertClassBrand(HighlightEditor,this,_endHighlight).call(this,parent,e);};window.addEventListener(\"blur\",pointerUpCallback);window.addEventListener(\"pointerup\",pointerUpCallback);window.addEventListener(\"pointerdown\",pointerDown,pointerDownOptions);window.addEventListener(\"contextmenu\",display_utils.noContextMenu);textLayer.addEventListener(\"pointermove\",pointerMove);this._freeHighlight=new editor_outliner.FreeOutliner({x,y},[layerX,layerY,parentWidth,parentHeight],parent.scale,this._defaultThickness/2,isLTR,0.001);({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=parent.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,true));}static deserialize(data,parent,uiManager){const editor=super.deserialize(data,parent,uiManager);const{rect:[blX,blY,trX,trY],color,quadPoints}=data;editor.color=util.Util.makeHexColor(...color);_classPrivateFieldSet(_opacity,editor,data.opacity);const[pageWidth,pageHeight]=editor.pageDimensions;editor.width=(trX-blX)/pageWidth;editor.height=(trY-blY)/pageHeight;const boxes=_classPrivateFieldSet(_boxes,editor,[]);for(let i=0;i<quadPoints.length;i+=8){boxes.push({x:(quadPoints[4]-trX)/pageWidth,y:(trY-(1-quadPoints[i+5]))/pageHeight,width:(quadPoints[i+2]-quadPoints[i])/pageWidth,height:(quadPoints[i+5]-quadPoints[i+1])/pageHeight});}_assertClassBrand(_HighlightEditor_brand,editor,_createOutlines).call(editor);return editor;}serialize(isForCopying=false){if(this.isEmpty()||isForCopying){return null;}const rect=this.getRect(0,0);const color=editor_editor.AnnotationEditor._colorManager.convert(this.color);return{annotationType:util.AnnotationEditorType.HIGHLIGHT,color,opacity:_classPrivateFieldGet(_opacity,this),thickness:_classPrivateFieldGet(_thickness,this),quadPoints:_assertClassBrand(_HighlightEditor_brand,this,_serializeBoxes).call(this),outlines:_assertClassBrand(_HighlightEditor_brand,this,_serializeOutlines).call(this,rect),pageIndex:this.pageIndex,rect,rotation:_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this),structTreeParentId:this._structTreeParentId};}static canCreateNewEmptyEditor(){return false;}}_HighlightEditor=HighlightEditor;function _createOutlines(){const outliner=new editor_outliner.Outliner(_classPrivateFieldGet(_boxes,this),0.001);_classPrivateFieldSet(_highlightOutlines,this,outliner.getOutlines());({x:this.x,y:this.y,width:this.width,height:this.height}=_classPrivateFieldGet(_highlightOutlines,this).box);const outlinerForOutline=new editor_outliner.Outliner(_classPrivateFieldGet(_boxes,this),0.0025,0.001,this._uiManager.direction===\"ltr\");_classPrivateFieldSet(_focusOutlines,this,outlinerForOutline.getOutlines());const{lastPoint}=_classPrivateFieldGet(_focusOutlines,this).box;_classPrivateFieldSet(_lastPoint,this,[(lastPoint[0]-this.x)/this.width,(lastPoint[1]-this.y)/this.height]);}function _createFreeOutlines({highlightOutlines,highlightId,clipPathId}){_classPrivateFieldSet(_highlightOutlines,this,highlightOutlines);const extraThickness=1.5;_classPrivateFieldSet(_focusOutlines,this,highlightOutlines.getNewOutline(_classPrivateFieldGet(_thickness,this)/2+extraThickness,0.0025));if(highlightId>=0){_classPrivateFieldSet(_id3,this,highlightId);_classPrivateFieldSet(_clipPathId,this,clipPathId);this.parent.drawLayer.finalizeLine(highlightId,highlightOutlines);_classPrivateFieldSet(_outlineId,this,this.parent.drawLayer.highlightOutline(_classPrivateFieldGet(_focusOutlines,this)));}else if(this.parent){const angle=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(_classPrivateFieldGet(_id3,this),highlightOutlines);this.parent.drawLayer.updateBox(_classPrivateFieldGet(_id3,this),_rotateBbox.call(_HighlightEditor,_classPrivateFieldGet(_highlightOutlines,this).box,(angle-this.rotation+360)%360));this.parent.drawLayer.updateLine(_classPrivateFieldGet(_outlineId,this),_classPrivateFieldGet(_focusOutlines,this));this.parent.drawLayer.updateBox(_classPrivateFieldGet(_outlineId,this),_rotateBbox.call(_HighlightEditor,_classPrivateFieldGet(_focusOutlines,this).box,angle));}const{x,y,width,height}=highlightOutlines.box;switch(this.rotation){case 0:this.x=x;this.y=y;this.width=width;this.height=height;break;case 90:{const[pageWidth,pageHeight]=this.parentDimensions;this.x=y;this.y=1-x;this.width=width*pageHeight/pageWidth;this.height=height*pageWidth/pageHeight;break;}case 180:this.x=1-x;this.y=1-y;this.width=width;this.height=height;break;case 270:{const[pageWidth,pageHeight]=this.parentDimensions;this.x=1-y;this.y=x;this.width=width*pageHeight/pageWidth;this.height=height*pageWidth/pageHeight;break;}}const{lastPoint}=_classPrivateFieldGet(_focusOutlines,this).box;_classPrivateFieldSet(_lastPoint,this,[(lastPoint[0]-x)/width,(lastPoint[1]-y)/height]);}function _updateColor2(color){const setColor=col=>{this.color=col;this.parent?.drawLayer.changeColor(_classPrivateFieldGet(_id3,this),col);_classPrivateFieldGet(_colorPicker,this)?.updateColor(col);};const savedColor=this.color;this.addCommands({cmd:setColor.bind(this,color),undo:setColor.bind(this,savedColor),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:true,keepUndo:true});this._reportTelemetry({action:\"color_changed\",color:this._uiManager.highlightColorNames.get(color)},true);}function _updateThickness(thickness){const savedThickness=_classPrivateFieldGet(_thickness,this);const setThickness=th=>{_classPrivateFieldSet(_thickness,this,th);_assertClassBrand(_HighlightEditor_brand,this,_changeThickness).call(this,th);};this.addCommands({cmd:setThickness.bind(this,thickness),undo:setThickness.bind(this,savedThickness),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true});this._reportTelemetry({action:\"thickness_changed\",thickness},true);}function _changeThickness(thickness){if(!_classPrivateFieldGet(_isFreeHighlight,this)){return;}_assertClassBrand(_HighlightEditor_brand,this,_createFreeOutlines).call(this,{highlightOutlines:_classPrivateFieldGet(_highlightOutlines,this).getNewOutline(thickness/2)});this.fixAndSetPosition();const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(this.width*parentWidth,this.height*parentHeight);}function _cleanDrawLayer(){if(_classPrivateFieldGet(_id3,this)===null||!this.parent){return;}this.parent.drawLayer.remove(_classPrivateFieldGet(_id3,this));_classPrivateFieldSet(_id3,this,null);this.parent.drawLayer.remove(_classPrivateFieldGet(_outlineId,this));_classPrivateFieldSet(_outlineId,this,null);}function _addToDrawLayer(parent=this.parent){if(_classPrivateFieldGet(_id3,this)!==null){return;}({id:_toSetter(_classPrivateFieldSet,[_id3,this])._,clipPathId:_toSetter(_classPrivateFieldSet,[_clipPathId,this])._}=parent.drawLayer.highlight(_classPrivateFieldGet(_highlightOutlines,this),this.color,_classPrivateFieldGet(_opacity,this)));_classPrivateFieldSet(_outlineId,this,parent.drawLayer.highlightOutline(_classPrivateFieldGet(_focusOutlines,this)));if(_classPrivateFieldGet(_highlightDiv,this)){_classPrivateFieldGet(_highlightDiv,this).style.clipPath=_classPrivateFieldGet(_clipPathId,this);}}function _rotateBbox({x,y,width,height},angle){switch(angle){case 90:return{x:1-y-height,y:x,width:height,height:width};case 180:return{x:1-x-width,y:1-y-height,width,height};case 270:return{x:y,y:1-x-width,width:height,height:width};}return{x,y,width,height};}function _keydown(event){_HighlightEditor._keyboardManager.exec(this,event);}function _setCaret(start){if(!_classPrivateFieldGet(_anchorNode,this)){return;}const selection=window.getSelection();if(start){selection.setPosition(_classPrivateFieldGet(_anchorNode,this),_classPrivateFieldGet(_anchorOffset,this));}else{selection.setPosition(_classPrivateFieldGet(_focusNode,this),_classPrivateFieldGet(_focusOffset,this));}}function _getRotation(){return _classPrivateFieldGet(_isFreeHighlight,this)?this.rotation:0;}function _serializeBoxes(){if(_classPrivateFieldGet(_isFreeHighlight,this)){return null;}const[pageWidth,pageHeight]=this.pageDimensions;const boxes=_classPrivateFieldGet(_boxes,this);const quadPoints=new Array(boxes.length*8);let i=0;for(const{x,y,width,height}of boxes){const sx=x*pageWidth;const sy=(1-y-height)*pageHeight;quadPoints[i]=quadPoints[i+4]=sx;quadPoints[i+1]=quadPoints[i+3]=sy;quadPoints[i+2]=quadPoints[i+6]=sx+width*pageWidth;quadPoints[i+5]=quadPoints[i+7]=sy+height*pageHeight;i+=8;}return quadPoints;}function _serializeOutlines(rect){return _classPrivateFieldGet(_highlightOutlines,this).serialize(rect,_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this));}function _highlightMove(parent,event){if(this._freeHighlight.add(event)){parent.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight);}}function _endHighlight(parent,event){if(!this._freeHighlight.isEmpty()){parent.createAndAddNewEditor(event,false,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:\"main_toolbar\"});}else{parent.drawLayer.removeFreeHighlight(this._freeHighlightId);}this._freeHighlightId=-1;this._freeHighlight=null;this._freeHighlightClipId=\"\";}_defineProperty(HighlightEditor,\"_defaultColor\",null);_defineProperty(HighlightEditor,\"_defaultOpacity\",1);_defineProperty(HighlightEditor,\"_defaultThickness\",12);_defineProperty(HighlightEditor,\"_l10nPromise\",void 0);_defineProperty(HighlightEditor,\"_type\",\"highlight\");_defineProperty(HighlightEditor,\"_editorType\",util.AnnotationEditorType.HIGHLIGHT);_defineProperty(HighlightEditor,\"_freeHighlightId\",-1);_defineProperty(HighlightEditor,\"_freeHighlight\",null);_defineProperty(HighlightEditor,\"_freeHighlightClipId\",\"\");;// CONCATENATED MODULE: ./src/display/editor/ink.js\nvar _baseHeight=/*#__PURE__*/new WeakMap();var _baseWidth=/*#__PURE__*/new WeakMap();var _boundCanvasPointermove=/*#__PURE__*/new WeakMap();var _boundCanvasPointerleave=/*#__PURE__*/new WeakMap();var _boundCanvasPointerup=/*#__PURE__*/new WeakMap();var _boundCanvasPointerdown=/*#__PURE__*/new WeakMap();var _canvasContextMenuTimeoutId=/*#__PURE__*/new WeakMap();var _currentPath2D=/*#__PURE__*/new WeakMap();var _disableEditing=/*#__PURE__*/new WeakMap();var _hasSomethingToDraw=/*#__PURE__*/new WeakMap();var _isCanvasInitialized=/*#__PURE__*/new WeakMap();var _observer=/*#__PURE__*/new WeakMap();var _realWidth=/*#__PURE__*/new WeakMap();var _realHeight=/*#__PURE__*/new WeakMap();var _requestFrameCallback=/*#__PURE__*/new WeakMap();var _InkEditor_brand=/*#__PURE__*/new WeakSet();class InkEditor extends editor_editor.AnnotationEditor{constructor(params){super({...params,name:\"inkEditor\"});_classPrivateMethodInitSpec(this,_InkEditor_brand);_classPrivateFieldInitSpec(this,_baseHeight,0);_classPrivateFieldInitSpec(this,_baseWidth,0);_classPrivateFieldInitSpec(this,_boundCanvasPointermove,this.canvasPointermove.bind(this));_classPrivateFieldInitSpec(this,_boundCanvasPointerleave,this.canvasPointerleave.bind(this));_classPrivateFieldInitSpec(this,_boundCanvasPointerup,this.canvasPointerup.bind(this));_classPrivateFieldInitSpec(this,_boundCanvasPointerdown,this.canvasPointerdown.bind(this));_classPrivateFieldInitSpec(this,_canvasContextMenuTimeoutId,null);_classPrivateFieldInitSpec(this,_currentPath2D,new Path2D());_classPrivateFieldInitSpec(this,_disableEditing,false);_classPrivateFieldInitSpec(this,_hasSomethingToDraw,false);_classPrivateFieldInitSpec(this,_isCanvasInitialized,false);_classPrivateFieldInitSpec(this,_observer,null);_classPrivateFieldInitSpec(this,_realWidth,0);_classPrivateFieldInitSpec(this,_realHeight,0);_classPrivateFieldInitSpec(this,_requestFrameCallback,null);this.color=params.color||null;this.thickness=params.thickness||null;this.opacity=params.opacity||null;this.paths=[];this.bezierPath2D=[];this.allRawPaths=[];this.currentPath=[];this.scaleFactor=1;this.translationX=this.translationY=0;this.x=0;this.y=0;this._willKeepAspectRatio=true;}static initialize(l10n,uiManager){editor_editor.AnnotationEditor.initialize(l10n,uiManager);}static updateDefaultParams(type,value){switch(type){case util.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=value;break;case util.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=value;break;case util.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=value/100;break;}}updateParams(type,value){switch(type){case util.AnnotationEditorParamsType.INK_THICKNESS:_assertClassBrand(_InkEditor_brand,this,_updateThickness2).call(this,value);break;case util.AnnotationEditorParamsType.INK_COLOR:_assertClassBrand(_InkEditor_brand,this,_updateColor3).call(this,value);break;case util.AnnotationEditorParamsType.INK_OPACITY:_assertClassBrand(_InkEditor_brand,this,_updateOpacity).call(this,value);break;}}static get defaultPropertiesToUpdate(){return[[util.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[util.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor],[util.AnnotationEditorParamsType.INK_OPACITY,Math.round(InkEditor._defaultOpacity*100)]];}get propertiesToUpdate(){return[[util.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[util.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor],[util.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??InkEditor._defaultOpacity))]];}rebuild(){if(!this.parent){return;}super.rebuild();if(this.div===null){return;}if(!this.canvas){_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this);_assertClassBrand(_InkEditor_brand,this,_createObserver).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);}_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this);}remove(){if(this.canvas===null){return;}if(!this.isEmpty()){this.commit();}this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;if(_classPrivateFieldGet(_canvasContextMenuTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_canvasContextMenuTimeoutId,this));_classPrivateFieldSet(_canvasContextMenuTimeoutId,this,null);}_classPrivateFieldGet(_observer,this).disconnect();_classPrivateFieldSet(_observer,this,null);super.remove();}setParent(parent){if(!this.parent&&parent){this._uiManager.removeShouldRescale(this);}else if(this.parent&&parent===null){this._uiManager.addShouldRescale(this);}super.setParent(parent);}onScaleChanging(){const[parentWidth,parentHeight]=this.parentDimensions;const width=this.width*parentWidth;const height=this.height*parentHeight;this.setDimensions(width,height);}enableEditMode(){if(_classPrivateFieldGet(_disableEditing,this)||this.canvas===null){return;}super.enableEditMode();this._isDraggable=false;this.canvas.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundCanvasPointerdown,this));}disableEditMode(){if(!this.isInEditMode()||this.canvas===null){return;}super.disableEditMode();this._isDraggable=!this.isEmpty();this.div.classList.remove(\"editing\");this.canvas.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundCanvasPointerdown,this));}onceAdded(){this._isDraggable=!this.isEmpty();}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0;}commit(){if(_classPrivateFieldGet(_disableEditing,this)){return;}super.commit();this.isEditing=false;this.disableEditMode();this.setInForeground();_classPrivateFieldSet(_disableEditing,this,true);this.div.classList.add(\"disabled\");_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this,true);this.select();this.parent.addInkEditorIfNeeded(true);this.moveInDOM();this.div.focus({preventScroll:true});}focusin(event){if(!this._focusEventsAllowed){return;}super.focusin(event);this.enableEditMode();}canvasPointerdown(event){if(event.button!==0||!this.isInEditMode()||_classPrivateFieldGet(_disableEditing,this)){return;}this.setInForeground();event.preventDefault();if(!this.div.contains(document.activeElement)){this.div.focus({preventScroll:true});}_assertClassBrand(_InkEditor_brand,this,_startDrawing).call(this,event.offsetX,event.offsetY);}canvasPointermove(event){event.preventDefault();_assertClassBrand(_InkEditor_brand,this,_draw).call(this,event.offsetX,event.offsetY);}canvasPointerup(event){event.preventDefault();_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,event);}canvasPointerleave(event){_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,event);}get isResizable(){return!this.isEmpty()&&_classPrivateFieldGet(_disableEditing,this);}render(){if(this.div){return this.div;}let baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}super.render();this.div.setAttribute(\"data-l10n-id\",\"pdfjs-ink\");const[x,y,w,h]=_assertClassBrand(_InkEditor_brand,this,_getInitialBBox).call(this);this.setAt(x,y,0,0);this.setDims(w,h);_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this);if(this.width){const[parentWidth,parentHeight]=this.parentDimensions;this.setAspectRatio(this.width*parentWidth,this.height*parentHeight);this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);_classPrivateFieldSet(_isCanvasInitialized,this,true);_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);this.setDims(this.width*parentWidth,this.height*parentHeight);_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);this.div.classList.add(\"disabled\");}else{this.div.classList.add(\"editing\");this.enableEditMode();}_assertClassBrand(_InkEditor_brand,this,_createObserver).call(this);return this.div;}setDimensions(width,height){const roundedWidth=Math.round(width);const roundedHeight=Math.round(height);if(_classPrivateFieldGet(_realWidth,this)===roundedWidth&&_classPrivateFieldGet(_realHeight,this)===roundedHeight){return;}_classPrivateFieldSet(_realWidth,this,roundedWidth);_classPrivateFieldSet(_realHeight,this,roundedHeight);this.canvas.style.visibility=\"hidden\";const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth;this.height=height/parentHeight;this.fixAndSetPosition();if(_classPrivateFieldGet(_disableEditing,this)){_assertClassBrand(_InkEditor_brand,this,_setScaleFactor).call(this,width,height);}_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);this.canvas.style.visibility=\"visible\";this.fixDims();}static deserialize(data,parent,uiManager){if(data instanceof annotation_layer.InkAnnotationElement){return null;}const editor=super.deserialize(data,parent,uiManager);editor.thickness=data.thickness;editor.color=util.Util.makeHexColor(...data.color);editor.opacity=data.opacity;const[pageWidth,pageHeight]=editor.pageDimensions;const width=editor.width*pageWidth;const height=editor.height*pageHeight;const scaleFactor=editor.parentScale;const padding=data.thickness/2;_classPrivateFieldSet(_disableEditing,editor,true);_classPrivateFieldSet(_realWidth,editor,Math.round(width));_classPrivateFieldSet(_realHeight,editor,Math.round(height));const{paths,rect,rotation}=data;for(let{bezier}of paths){bezier=_fromPDFCoordinates.call(InkEditor,bezier,rect,rotation);const path=[];editor.paths.push(path);let p0=scaleFactor*(bezier[0]-padding);let p1=scaleFactor*(bezier[1]-padding);for(let i=2,ii=bezier.length;i<ii;i+=6){const p10=scaleFactor*(bezier[i]-padding);const p11=scaleFactor*(bezier[i+1]-padding);const p20=scaleFactor*(bezier[i+2]-padding);const p21=scaleFactor*(bezier[i+3]-padding);const p30=scaleFactor*(bezier[i+4]-padding);const p31=scaleFactor*(bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]);p0=p30;p1=p31;}const path2D=_assertClassBrand(InkEditor,this,_buildPath2D).call(this,path);editor.bezierPath2D.push(path2D);}const bbox=_assertClassBrand(_InkEditor_brand,editor,_getBbox).call(editor);_classPrivateFieldSet(_baseWidth,editor,Math.max(editor_editor.AnnotationEditor.MIN_SIZE,bbox[2]-bbox[0]));_classPrivateFieldSet(_baseHeight,editor,Math.max(editor_editor.AnnotationEditor.MIN_SIZE,bbox[3]-bbox[1]));_assertClassBrand(_InkEditor_brand,editor,_setScaleFactor).call(editor,width,height);return editor;}serialize(){if(this.isEmpty()){return null;}const rect=this.getRect(0,0);const color=editor_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:util.AnnotationEditorType.INK,color,thickness:this.thickness,opacity:this.opacity,paths:_assertClassBrand(_InkEditor_brand,this,_serializePaths).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,rect),pageIndex:this.pageIndex,rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};}}_InkEditor=InkEditor;function _updateThickness2(thickness){const setThickness=th=>{this.thickness=th;_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this);};const savedThickness=this.thickness;this.addCommands({cmd:setThickness.bind(this,thickness),undo:setThickness.bind(this,savedThickness),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true});}function _updateColor3(color){const setColor=col=>{this.color=col;_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);};const savedColor=this.color;this.addCommands({cmd:setColor.bind(this,color),undo:setColor.bind(this,savedColor),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:true,keepUndo:true});}function _updateOpacity(opacity){const setOpacity=op=>{this.opacity=op;_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);};opacity/=100;const savedOpacity=this.opacity;this.addCommands({cmd:setOpacity.bind(this,opacity),undo:setOpacity.bind(this,savedOpacity),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:util.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:true,keepUndo:true});}function _getInitialBBox(){const{parentRotation,parentDimensions:[width,height]}=this;switch(parentRotation){case 90:return[0,height,height,width];case 180:return[width,height,width,height];case 270:return[width,0,height,width];default:return[0,0,width,height];}}function _setStroke(){const{ctx,color,opacity,thickness,parentScale,scaleFactor}=this;ctx.lineWidth=thickness*parentScale/scaleFactor;ctx.lineCap=\"round\";ctx.lineJoin=\"round\";ctx.miterLimit=10;ctx.strokeStyle=`${color}${(0,tools.opacityToHex)(opacity)}`;}function _startDrawing(x,y){this.canvas.addEventListener(\"contextmenu\",display_utils.noContextMenu);this.canvas.addEventListener(\"pointerleave\",_classPrivateFieldGet(_boundCanvasPointerleave,this));this.canvas.addEventListener(\"pointermove\",_classPrivateFieldGet(_boundCanvasPointermove,this));this.canvas.addEventListener(\"pointerup\",_classPrivateFieldGet(_boundCanvasPointerup,this));this.canvas.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundCanvasPointerdown,this));this.isEditing=true;if(!_classPrivateFieldGet(_isCanvasInitialized,this)){_classPrivateFieldSet(_isCanvasInitialized,this,true);_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);this.thickness||=_InkEditor._defaultThickness;this.color||=_InkEditor._defaultColor||editor_editor.AnnotationEditor._defaultLineColor;this.opacity??=_InkEditor._defaultOpacity;}this.currentPath.push([x,y]);_classPrivateFieldSet(_hasSomethingToDraw,this,false);_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this);_classPrivateFieldSet(_requestFrameCallback,this,()=>{_assertClassBrand(_InkEditor_brand,this,_drawPoints).call(this);if(_classPrivateFieldGet(_requestFrameCallback,this)){window.requestAnimationFrame(_classPrivateFieldGet(_requestFrameCallback,this));}});window.requestAnimationFrame(_classPrivateFieldGet(_requestFrameCallback,this));}function _draw(x,y){const[lastX,lastY]=this.currentPath.at(-1);if(this.currentPath.length>1&&x===lastX&&y===lastY){return;}const currentPath=this.currentPath;let path2D=_classPrivateFieldGet(_currentPath2D,this);currentPath.push([x,y]);_classPrivateFieldSet(_hasSomethingToDraw,this,true);if(currentPath.length<=2){path2D.moveTo(...currentPath[0]);path2D.lineTo(x,y);return;}if(currentPath.length===3){_classPrivateFieldSet(_currentPath2D,this,path2D=new Path2D());path2D.moveTo(...currentPath[0]);}_assertClassBrand(_InkEditor_brand,this,_makeBezierCurve).call(this,path2D,...currentPath.at(-3),...currentPath.at(-2),x,y);}function _endPath(){if(this.currentPath.length===0){return;}const lastPoint=this.currentPath.at(-1);_classPrivateFieldGet(_currentPath2D,this).lineTo(...lastPoint);}function _stopDrawing(x,y){_classPrivateFieldSet(_requestFrameCallback,this,null);x=Math.min(Math.max(x,0),this.canvas.width);y=Math.min(Math.max(y,0),this.canvas.height);_assertClassBrand(_InkEditor_brand,this,_draw).call(this,x,y);_assertClassBrand(_InkEditor_brand,this,_endPath).call(this);let bezier;if(this.currentPath.length!==1){bezier=_assertClassBrand(_InkEditor_brand,this,_generateBezierPoints).call(this);}else{const xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]];}const path2D=_classPrivateFieldGet(_currentPath2D,this);const currentPath=this.currentPath;this.currentPath=[];_classPrivateFieldSet(_currentPath2D,this,new Path2D());const cmd=()=>{this.allRawPaths.push(currentPath);this.paths.push(bezier);this.bezierPath2D.push(path2D);this._uiManager.rebuild(this);};const undo=()=>{this.allRawPaths.pop();this.paths.pop();this.bezierPath2D.pop();if(this.paths.length===0){this.remove();}else{if(!this.canvas){_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this);_assertClassBrand(_InkEditor_brand,this,_createObserver).call(this);}_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this);}};this.addCommands({cmd,undo,mustExec:true});}function _drawPoints(){if(!_classPrivateFieldGet(_hasSomethingToDraw,this)){return;}_classPrivateFieldSet(_hasSomethingToDraw,this,false);const thickness=Math.ceil(this.thickness*this.parentScale);const lastPoints=this.currentPath.slice(-3);const x=lastPoints.map(xy=>xy[0]);const y=lastPoints.map(xy=>xy[1]);const xMin=Math.min(...x)-thickness;const xMax=Math.max(...x)+thickness;const yMin=Math.min(...y)-thickness;const yMax=Math.max(...y)+thickness;const{ctx}=this;ctx.save();ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(const path of this.bezierPath2D){ctx.stroke(path);}ctx.stroke(_classPrivateFieldGet(_currentPath2D,this));ctx.restore();}function _makeBezierCurve(path2D,x0,y0,x1,y1,x2,y2){const prevX=(x0+x1)/2;const prevY=(y0+y1)/2;const x3=(x1+x2)/2;const y3=(y1+y2)/2;path2D.bezierCurveTo(prevX+2*(x1-prevX)/3,prevY+2*(y1-prevY)/3,x3+2*(x1-x3)/3,y3+2*(y1-y3)/3,x3,y3);}function _generateBezierPoints(){const path=this.currentPath;if(path.length<=2){return[[path[0],path[0],path.at(-1),path.at(-1)]];}const bezierPoints=[];let i;let[x0,y0]=path[0];for(i=1;i<path.length-2;i++){const[x1,y1]=path[i];const[x2,y2]=path[i+1];const x3=(x1+x2)/2;const y3=(y1+y2)/2;const control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3];const control2=[x3+2*(x1-x3)/3,y3+2*(y1-y3)/3];bezierPoints.push([[x0,y0],control1,control2,[x3,y3]]);[x0,y0]=[x3,y3];}const[x1,y1]=path[i];const[x2,y2]=path[i+1];const control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3];const control2=[x2+2*(x1-x2)/3,y2+2*(y1-y2)/3];bezierPoints.push([[x0,y0],control1,control2,[x2,y2]]);return bezierPoints;}function _redraw(){if(this.isEmpty()){_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);return;}_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this);const{canvas,ctx}=this;ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,canvas.width,canvas.height);_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);for(const path of this.bezierPath2D){ctx.stroke(path);}}function _endDrawing(event){this.canvas.removeEventListener(\"pointerleave\",_classPrivateFieldGet(_boundCanvasPointerleave,this));this.canvas.removeEventListener(\"pointermove\",_classPrivateFieldGet(_boundCanvasPointermove,this));this.canvas.removeEventListener(\"pointerup\",_classPrivateFieldGet(_boundCanvasPointerup,this));this.canvas.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundCanvasPointerdown,this));if(_classPrivateFieldGet(_canvasContextMenuTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_canvasContextMenuTimeoutId,this));}_classPrivateFieldSet(_canvasContextMenuTimeoutId,this,setTimeout(()=>{_classPrivateFieldSet(_canvasContextMenuTimeoutId,this,null);this.canvas.removeEventListener(\"contextmenu\",display_utils.noContextMenu);},10));_assertClassBrand(_InkEditor_brand,this,_stopDrawing).call(this,event.offsetX,event.offsetY);this.addToAnnotationStorage();this.setInBackground();}function _createCanvas(){this.canvas=document.createElement(\"canvas\");this.canvas.width=this.canvas.height=0;this.canvas.className=\"inkEditorCanvas\";this.canvas.setAttribute(\"data-l10n-id\",\"pdfjs-ink-canvas\");this.div.append(this.canvas);this.ctx=this.canvas.getContext(\"2d\");}function _createObserver(){_classPrivateFieldSet(_observer,this,new ResizeObserver(entries=>{const rect=entries[0].contentRect;if(rect.width&&rect.height){this.setDimensions(rect.width,rect.height);}}));_classPrivateFieldGet(_observer,this).observe(this.div);}function _setCanvasDims(){if(!_classPrivateFieldGet(_isCanvasInitialized,this)){return;}const[parentWidth,parentHeight]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*parentWidth);this.canvas.height=Math.ceil(this.height*parentHeight);_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);}function _setScaleFactor(width,height){const padding=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this);const scaleFactorW=(width-padding)/_classPrivateFieldGet(_baseWidth,this);const scaleFactorH=(height-padding)/_classPrivateFieldGet(_baseHeight,this);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH);}function _updateTransform(){const padding=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding);}function _buildPath2D(bezier){const path2D=new Path2D();for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i];if(i===0){path2D.moveTo(...first);}path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1]);}return path2D;}function _toPDFCoordinates(points,rect,rotation){const[blX,blY,trX,trY]=rect;switch(rotation){case 0:for(let i=0,ii=points.length;i<ii;i+=2){points[i]+=blX;points[i+1]=trY-points[i+1];}break;case 90:for(let i=0,ii=points.length;i<ii;i+=2){const x=points[i];points[i]=points[i+1]+blX;points[i+1]=x+blY;}break;case 180:for(let i=0,ii=points.length;i<ii;i+=2){points[i]=trX-points[i];points[i+1]+=blY;}break;case 270:for(let i=0,ii=points.length;i<ii;i+=2){const x=points[i];points[i]=trX-points[i+1];points[i+1]=trY-x;}break;default:throw new Error(\"Invalid rotation\");}return points;}function _fromPDFCoordinates(points,rect,rotation){const[blX,blY,trX,trY]=rect;switch(rotation){case 0:for(let i=0,ii=points.length;i<ii;i+=2){points[i]-=blX;points[i+1]=trY-points[i+1];}break;case 90:for(let i=0,ii=points.length;i<ii;i+=2){const x=points[i];points[i]=points[i+1]-blY;points[i+1]=x-blX;}break;case 180:for(let i=0,ii=points.length;i<ii;i+=2){points[i]=trX-points[i];points[i+1]-=blY;}break;case 270:for(let i=0,ii=points.length;i<ii;i+=2){const x=points[i];points[i]=trY-points[i+1];points[i+1]=trX-x;}break;default:throw new Error(\"Invalid rotation\");}return points;}function _serializePaths(s,tx,ty,rect){const paths=[];const padding=this.thickness/2;const shiftX=s*tx+padding;const shiftY=s*ty+padding;for(const bezier of this.paths){const buffer=[];const points=[];for(let j=0,jj=bezier.length;j<jj;j++){const[first,control1,control2,second]=bezier[j];if(first[0]===second[0]&&first[1]===second[1]&&jj===1){const p0=s*first[0]+shiftX;const p1=s*first[1]+shiftY;buffer.push(p0,p1);points.push(p0,p1);break;}const p10=s*first[0]+shiftX;const p11=s*first[1]+shiftY;const p20=s*control1[0]+shiftX;const p21=s*control1[1]+shiftY;const p30=s*control2[0]+shiftX;const p31=s*control2[1]+shiftY;const p40=s*second[0]+shiftX;const p41=s*second[1]+shiftY;if(j===0){buffer.push(p10,p11);points.push(p10,p11);}buffer.push(p20,p21,p30,p31,p40,p41);points.push(p20,p21);if(j===jj-1){points.push(p40,p41);}}paths.push({bezier:_toPDFCoordinates.call(_InkEditor,buffer,rect,this.rotation),points:_toPDFCoordinates.call(_InkEditor,points,rect,this.rotation)});}return paths;}function _getBbox(){let xMin=Infinity;let xMax=-Infinity;let yMin=Infinity;let yMax=-Infinity;for(const path of this.paths){for(const[first,control1,control2,second]of path){const bbox=util.Util.bezierBoundingBox(...first,...control1,...control2,...second);xMin=Math.min(xMin,bbox[0]);yMin=Math.min(yMin,bbox[1]);xMax=Math.max(xMax,bbox[2]);yMax=Math.max(yMax,bbox[3]);}}return[xMin,yMin,xMax,yMax];}function _getPadding(){return _classPrivateFieldGet(_disableEditing,this)?Math.ceil(this.thickness*this.parentScale):0;}function _fitToContent(firstTime=false){if(this.isEmpty()){return;}if(!_classPrivateFieldGet(_disableEditing,this)){_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);return;}const bbox=_assertClassBrand(_InkEditor_brand,this,_getBbox).call(this);const padding=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this);_classPrivateFieldSet(_baseWidth,this,Math.max(editor_editor.AnnotationEditor.MIN_SIZE,bbox[2]-bbox[0]));_classPrivateFieldSet(_baseHeight,this,Math.max(editor_editor.AnnotationEditor.MIN_SIZE,bbox[3]-bbox[1]));const width=Math.ceil(padding+_classPrivateFieldGet(_baseWidth,this)*this.scaleFactor);const height=Math.ceil(padding+_classPrivateFieldGet(_baseHeight,this)*this.scaleFactor);const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth;this.height=height/parentHeight;this.setAspectRatio(width,height);const prevTranslationX=this.translationX;const prevTranslationY=this.translationY;this.translationX=-bbox[0];this.translationY=-bbox[1];_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);_classPrivateFieldSet(_realWidth,this,width);_classPrivateFieldSet(_realHeight,this,height);this.setDims(width,height);const unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding);}_defineProperty(InkEditor,\"_defaultColor\",null);_defineProperty(InkEditor,\"_defaultOpacity\",1);_defineProperty(InkEditor,\"_defaultThickness\",1);_defineProperty(InkEditor,\"_type\",\"ink\");_defineProperty(InkEditor,\"_editorType\",util.AnnotationEditorType.INK);;// CONCATENATED MODULE: ./src/display/editor/stamp.js\nvar _bitmap=/*#__PURE__*/new WeakMap();var _bitmapId=/*#__PURE__*/new WeakMap();var _bitmapPromise=/*#__PURE__*/new WeakMap();var _bitmapUrl=/*#__PURE__*/new WeakMap();var _bitmapFile=/*#__PURE__*/new WeakMap();var _bitmapFileName=/*#__PURE__*/new WeakMap();var _canvas=/*#__PURE__*/new WeakMap();var _observer2=/*#__PURE__*/new WeakMap();var _resizeTimeoutId=/*#__PURE__*/new WeakMap();var _isSvg=/*#__PURE__*/new WeakMap();var _hasBeenAddedInUndoStack=/*#__PURE__*/new WeakMap();var _StampEditor_brand=/*#__PURE__*/new WeakSet();class StampEditor extends editor_editor.AnnotationEditor{constructor(params){super({...params,name:\"stampEditor\"});_classPrivateMethodInitSpec(this,_StampEditor_brand);_classPrivateFieldInitSpec(this,_bitmap,null);_classPrivateFieldInitSpec(this,_bitmapId,null);_classPrivateFieldInitSpec(this,_bitmapPromise,null);_classPrivateFieldInitSpec(this,_bitmapUrl,null);_classPrivateFieldInitSpec(this,_bitmapFile,null);_classPrivateFieldInitSpec(this,_bitmapFileName,\"\");_classPrivateFieldInitSpec(this,_canvas,null);_classPrivateFieldInitSpec(this,_observer2,null);_classPrivateFieldInitSpec(this,_resizeTimeoutId,null);_classPrivateFieldInitSpec(this,_isSvg,false);_classPrivateFieldInitSpec(this,_hasBeenAddedInUndoStack,false);_classPrivateFieldSet(_bitmapUrl,this,params.bitmapUrl);_classPrivateFieldSet(_bitmapFile,this,params.bitmapFile);}static initialize(l10n,uiManager){editor_editor.AnnotationEditor.initialize(l10n,uiManager);}static get supportedTypes(){const types=[\"apng\",\"avif\",\"bmp\",\"gif\",\"jpeg\",\"png\",\"svg+xml\",\"webp\",\"x-icon\"];return(0,util.shadow)(this,\"supportedTypes\",types.map(type=>`image/${type}`));}static get supportedTypesStr(){return(0,util.shadow)(this,\"supportedTypesStr\",this.supportedTypes.join(\",\"));}static isHandlingMimeForPasting(mime){return this.supportedTypes.includes(mime);}static paste(item,parent){parent.pasteEditor(util.AnnotationEditorType.STAMP,{bitmapFile:item.getAsFile()});}remove(){if(_classPrivateFieldGet(_bitmapId,this)){_classPrivateFieldSet(_bitmap,this,null);this._uiManager.imageManager.deleteId(_classPrivateFieldGet(_bitmapId,this));_classPrivateFieldGet(_canvas,this)?.remove();_classPrivateFieldSet(_canvas,this,null);_classPrivateFieldGet(_observer2,this)?.disconnect();_classPrivateFieldSet(_observer2,this,null);if(_classPrivateFieldGet(_resizeTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_resizeTimeoutId,this));_classPrivateFieldSet(_resizeTimeoutId,this,null);}}super.remove();}rebuild(){if(!this.parent){if(_classPrivateFieldGet(_bitmapId,this)){_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}return;}super.rebuild();if(this.div===null){return;}if(_classPrivateFieldGet(_bitmapId,this)&&_classPrivateFieldGet(_canvas,this)===null){_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);}}onceAdded(){this._isDraggable=true;this.div.focus();}isEmpty(){return!(_classPrivateFieldGet(_bitmapPromise,this)||_classPrivateFieldGet(_bitmap,this)||_classPrivateFieldGet(_bitmapUrl,this)||_classPrivateFieldGet(_bitmapFile,this)||_classPrivateFieldGet(_bitmapId,this));}get isResizable(){return true;}render(){if(this.div){return this.div;}let baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}super.render();this.div.hidden=true;this.addAltTextButton();if(_classPrivateFieldGet(_bitmap,this)){_assertClassBrand(_StampEditor_brand,this,_createCanvas2).call(this);}else{_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}if(this.width){const[parentWidth,parentHeight]=this.parentDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);}return this.div;}getImageForAltText(){return _classPrivateFieldGet(_canvas,this);}static deserialize(data,parent,uiManager){if(data instanceof annotation_layer.StampAnnotationElement){return null;}const editor=super.deserialize(data,parent,uiManager);const{rect,bitmapUrl,bitmapId,isSvg,accessibilityData}=data;if(bitmapId&&uiManager.imageManager.isValidId(bitmapId)){_classPrivateFieldSet(_bitmapId,editor,bitmapId);}else{_classPrivateFieldSet(_bitmapUrl,editor,bitmapUrl);}_classPrivateFieldSet(_isSvg,editor,isSvg);const[parentWidth,parentHeight]=editor.pageDimensions;editor.width=(rect[2]-rect[0])/parentWidth;editor.height=(rect[3]-rect[1])/parentHeight;if(accessibilityData){editor.altTextData=accessibilityData;}return editor;}serialize(isForCopying=false,context=null){if(this.isEmpty()){return null;}const serialized={annotationType:util.AnnotationEditorType.STAMP,bitmapId:_classPrivateFieldGet(_bitmapId,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:_classPrivateFieldGet(_isSvg,this),structTreeParentId:this._structTreeParentId};if(isForCopying){serialized.bitmapUrl=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,true);serialized.accessibilityData=this.altTextData;return serialized;}const{decorative,altText}=this.altTextData;if(!decorative&&altText){serialized.accessibilityData={type:\"Figure\",alt:altText};}if(context===null){return serialized;}context.stamps||=new Map();const area=_classPrivateFieldGet(_isSvg,this)?(serialized.rect[2]-serialized.rect[0])*(serialized.rect[3]-serialized.rect[1]):null;if(!context.stamps.has(_classPrivateFieldGet(_bitmapId,this))){context.stamps.set(_classPrivateFieldGet(_bitmapId,this),{area,serialized});serialized.bitmap=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,false);}else if(_classPrivateFieldGet(_isSvg,this)){const prevData=context.stamps.get(_classPrivateFieldGet(_bitmapId,this));if(area>prevData.area){prevData.area=area;prevData.serialized.bitmap.close();prevData.serialized.bitmap=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,false);}}return serialized;}}_StampEditor=StampEditor;function _getBitmapFetched(data,fromId=false){if(!data){this.remove();return;}_classPrivateFieldSet(_bitmap,this,data.bitmap);if(!fromId){_classPrivateFieldSet(_bitmapId,this,data.id);_classPrivateFieldSet(_isSvg,this,data.isSvg);}if(data.file){_classPrivateFieldSet(_bitmapFileName,this,data.file.name);}_assertClassBrand(_StampEditor_brand,this,_createCanvas2).call(this);}function _getBitmapDone(){_classPrivateFieldSet(_bitmapPromise,this,null);this._uiManager.enableWaiting(false);if(_classPrivateFieldGet(_canvas,this)){this.div.focus();}}function _getBitmap(){if(_classPrivateFieldGet(_bitmapId,this)){this._uiManager.enableWaiting(true);this._uiManager.imageManager.getFromId(_classPrivateFieldGet(_bitmapId,this)).then(data=>_assertClassBrand(_StampEditor_brand,this,_getBitmapFetched).call(this,data,true)).finally(()=>_assertClassBrand(_StampEditor_brand,this,_getBitmapDone).call(this));return;}if(_classPrivateFieldGet(_bitmapUrl,this)){const url=_classPrivateFieldGet(_bitmapUrl,this);_classPrivateFieldSet(_bitmapUrl,this,null);this._uiManager.enableWaiting(true);_classPrivateFieldSet(_bitmapPromise,this,this._uiManager.imageManager.getFromUrl(url).then(data=>_assertClassBrand(_StampEditor_brand,this,_getBitmapFetched).call(this,data)).finally(()=>_assertClassBrand(_StampEditor_brand,this,_getBitmapDone).call(this)));return;}if(_classPrivateFieldGet(_bitmapFile,this)){const file=_classPrivateFieldGet(_bitmapFile,this);_classPrivateFieldSet(_bitmapFile,this,null);this._uiManager.enableWaiting(true);_classPrivateFieldSet(_bitmapPromise,this,this._uiManager.imageManager.getFromFile(file).then(data=>_assertClassBrand(_StampEditor_brand,this,_getBitmapFetched).call(this,data)).finally(()=>_assertClassBrand(_StampEditor_brand,this,_getBitmapDone).call(this)));return;}const input=document.createElement(\"input\");input.type=\"file\";input.accept=_StampEditor.supportedTypesStr;_classPrivateFieldSet(_bitmapPromise,this,new Promise(resolve=>{input.addEventListener(\"change\",async()=>{if(!input.files||input.files.length===0){this.remove();}else{this._uiManager.enableWaiting(true);const data=await this._uiManager.imageManager.getFromFile(input.files[0]);_assertClassBrand(_StampEditor_brand,this,_getBitmapFetched).call(this,data);}resolve();});input.addEventListener(\"cancel\",()=>{this.remove();resolve();});}).finally(()=>_assertClassBrand(_StampEditor_brand,this,_getBitmapDone).call(this)));input.click();}function _createCanvas2(){const{div}=this;let{width,height}=_classPrivateFieldGet(_bitmap,this);const[pageWidth,pageHeight]=this.pageDimensions;const MAX_RATIO=0.75;if(this.width){width=this.width*pageWidth;height=this.height*pageHeight;}else if(width>MAX_RATIO*pageWidth||height>MAX_RATIO*pageHeight){const factor=Math.min(MAX_RATIO*pageWidth/width,MAX_RATIO*pageHeight/height);width*=factor;height*=factor;}const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(width*parentWidth/pageWidth,height*parentHeight/pageHeight);this._uiManager.enableWaiting(false);const canvas=_classPrivateFieldSet(_canvas,this,document.createElement(\"canvas\"));div.append(canvas);div.hidden=false;_assertClassBrand(_StampEditor_brand,this,_drawBitmap).call(this,width,height);_assertClassBrand(_StampEditor_brand,this,_createObserver2).call(this);if(!_classPrivateFieldGet(_hasBeenAddedInUndoStack,this)){this.parent.addUndoableEditor(this);_classPrivateFieldSet(_hasBeenAddedInUndoStack,this,true);}this._reportTelemetry({action:\"inserted_image\"});if(_classPrivateFieldGet(_bitmapFileName,this)){canvas.setAttribute(\"aria-label\",_classPrivateFieldGet(_bitmapFileName,this));}}function _setDimensions(width,height){const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth;this.height=height/parentHeight;this.setDims(width,height);if(this._initialOptions?.isCentered){this.center();}else{this.fixAndSetPosition();}this._initialOptions=null;if(_classPrivateFieldGet(_resizeTimeoutId,this)!==null){clearTimeout(_classPrivateFieldGet(_resizeTimeoutId,this));}const TIME_TO_WAIT=200;_classPrivateFieldSet(_resizeTimeoutId,this,setTimeout(()=>{_classPrivateFieldSet(_resizeTimeoutId,this,null);_assertClassBrand(_StampEditor_brand,this,_drawBitmap).call(this,width,height);},TIME_TO_WAIT));}function _scaleBitmap(width,height){const{width:bitmapWidth,height:bitmapHeight}=_classPrivateFieldGet(_bitmap,this);let newWidth=bitmapWidth;let newHeight=bitmapHeight;let bitmap=_classPrivateFieldGet(_bitmap,this);while(newWidth>2*width||newHeight>2*height){const prevWidth=newWidth;const prevHeight=newHeight;if(newWidth>2*width){newWidth=newWidth>=16384?Math.floor(newWidth/2)-1:Math.ceil(newWidth/2);}if(newHeight>2*height){newHeight=newHeight>=16384?Math.floor(newHeight/2)-1:Math.ceil(newHeight/2);}const offscreen=new OffscreenCanvas(newWidth,newHeight);const ctx=offscreen.getContext(\"2d\");ctx.drawImage(bitmap,0,0,prevWidth,prevHeight,0,0,newWidth,newHeight);bitmap=offscreen.transferToImageBitmap();}return bitmap;}function _drawBitmap(width,height){width=Math.ceil(width);height=Math.ceil(height);const canvas=_classPrivateFieldGet(_canvas,this);if(!canvas||canvas.width===width&&canvas.height===height){return;}canvas.width=width;canvas.height=height;const bitmap=_classPrivateFieldGet(_isSvg,this)?_classPrivateFieldGet(_bitmap,this):_assertClassBrand(_StampEditor_brand,this,_scaleBitmap).call(this,width,height);if(this._uiManager.hasMLManager&&!this.hasAltText()){const offscreen=new OffscreenCanvas(width,height);const ctx=offscreen.getContext(\"2d\");ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,width,height);offscreen.convertToBlob().then(blob=>{const fileReader=new FileReader();fileReader.onload=()=>{const url=fileReader.result;this._uiManager.mlGuess({service:\"image-to-text\",request:{imageData:url}}).then(response=>{const altText=response?.output||\"\";if(this.parent&&altText&&!this.hasAltText()){this.altTextData={altText,decorative:false};}});};fileReader.readAsDataURL(blob);});}const ctx=canvas.getContext(\"2d\");ctx.filter=this._uiManager.hcmFilter;ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,width,height);}function _serializeBitmap(toUrl){if(toUrl){if(_classPrivateFieldGet(_isSvg,this)){const url=this._uiManager.imageManager.getSvgUrl(_classPrivateFieldGet(_bitmapId,this));if(url){return url;}}const canvas=document.createElement(\"canvas\");({width:canvas.width,height:canvas.height}=_classPrivateFieldGet(_bitmap,this));const ctx=canvas.getContext(\"2d\");ctx.drawImage(_classPrivateFieldGet(_bitmap,this),0,0);return canvas.toDataURL();}if(_classPrivateFieldGet(_isSvg,this)){const[pageWidth,pageHeight]=this.pageDimensions;const width=Math.round(this.width*pageWidth*display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);const height=Math.round(this.height*pageHeight*display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);const offscreen=new OffscreenCanvas(width,height);const ctx=offscreen.getContext(\"2d\");ctx.drawImage(_classPrivateFieldGet(_bitmap,this),0,0,_classPrivateFieldGet(_bitmap,this).width,_classPrivateFieldGet(_bitmap,this).height,0,0,width,height);return offscreen.transferToImageBitmap();}return structuredClone(_classPrivateFieldGet(_bitmap,this));}function _createObserver2(){_classPrivateFieldSet(_observer2,this,new ResizeObserver(entries=>{const rect=entries[0].contentRect;if(rect.width&&rect.height){_assertClassBrand(_StampEditor_brand,this,_setDimensions).call(this,rect.width,rect.height);}}));_classPrivateFieldGet(_observer2,this).observe(this.div);}_defineProperty(StampEditor,\"_type\",\"stamp\");_defineProperty(StampEditor,\"_editorType\",util.AnnotationEditorType.STAMP);;// CONCATENATED MODULE: ./src/display/editor/annotation_editor_layer.js\nvar _accessibilityManager2=/*#__PURE__*/new WeakMap();var _allowClick=/*#__PURE__*/new WeakMap();var _annotationLayer=/*#__PURE__*/new WeakMap();var _boundPointerup=/*#__PURE__*/new WeakMap();var _boundPointerdown=/*#__PURE__*/new WeakMap();var _boundTextLayerPointerDown=/*#__PURE__*/new WeakMap();var _editorFocusTimeoutId=/*#__PURE__*/new WeakMap();var _editors=/*#__PURE__*/new WeakMap();var _hadPointerDown=/*#__PURE__*/new WeakMap();var _isCleaningUp=/*#__PURE__*/new WeakMap();var _isDisabling=/*#__PURE__*/new WeakMap();var _textLayer=/*#__PURE__*/new WeakMap();var _uiManager2=/*#__PURE__*/new WeakMap();var _AnnotationEditorLayer_brand=/*#__PURE__*/new WeakSet();class AnnotationEditorLayer{constructor({uiManager,pageIndex,div,accessibilityManager,annotationLayer,drawLayer,textLayer,viewport,l10n}){_classPrivateMethodInitSpec(this,_AnnotationEditorLayer_brand);_classPrivateFieldInitSpec(this,_accessibilityManager2,void 0);_classPrivateFieldInitSpec(this,_allowClick,false);_classPrivateFieldInitSpec(this,_annotationLayer,null);_classPrivateFieldInitSpec(this,_boundPointerup,null);_classPrivateFieldInitSpec(this,_boundPointerdown,null);_classPrivateFieldInitSpec(this,_boundTextLayerPointerDown,null);_classPrivateFieldInitSpec(this,_editorFocusTimeoutId,null);_classPrivateFieldInitSpec(this,_editors,new Map());_classPrivateFieldInitSpec(this,_hadPointerDown,false);_classPrivateFieldInitSpec(this,_isCleaningUp,false);_classPrivateFieldInitSpec(this,_isDisabling,false);_classPrivateFieldInitSpec(this,_textLayer,null);_classPrivateFieldInitSpec(this,_uiManager2,void 0);const editorTypes=[..._editorTypes._.values()];if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=true;for(const editorType of editorTypes){editorType.initialize(l10n,uiManager);}}uiManager.registerEditorTypes(editorTypes);_classPrivateFieldSet(_uiManager2,this,uiManager);this.pageIndex=pageIndex;this.div=div;_classPrivateFieldSet(_accessibilityManager2,this,accessibilityManager);_classPrivateFieldSet(_annotationLayer,this,annotationLayer);this.viewport=viewport;_classPrivateFieldSet(_textLayer,this,textLayer);this.drawLayer=drawLayer;_classPrivateFieldGet(_uiManager2,this).addLayer(this);}get isEmpty(){return _classPrivateFieldGet(_editors,this).size===0;}get isInvisible(){return this.isEmpty&&_classPrivateFieldGet(_uiManager2,this).getMode()===util.AnnotationEditorType.NONE;}updateToolbar(mode){_classPrivateFieldGet(_uiManager2,this).updateToolbar(mode);}updateMode(mode=_classPrivateFieldGet(_uiManager2,this).getMode()){_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup).call(this);switch(mode){case util.AnnotationEditorType.NONE:this.disableTextSelection();this.togglePointerEvents(false);this.toggleAnnotationLayerPointerEvents(true);this.disableClick();return;case util.AnnotationEditorType.INK:this.addInkEditorIfNeeded(false);this.disableTextSelection();this.togglePointerEvents(true);this.disableClick();break;case util.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection();this.togglePointerEvents(false);this.disableClick();break;default:this.disableTextSelection();this.togglePointerEvents(true);this.enableClick();}this.toggleAnnotationLayerPointerEvents(false);const{classList}=this.div;for(const editorType of _editorTypes._.values()){classList.toggle(`${editorType._type}Editing`,mode===editorType._editorType);}this.div.hidden=false;}hasTextLayer(textLayer){return textLayer===_classPrivateFieldGet(_textLayer,this)?.div;}addInkEditorIfNeeded(isCommitting){if(_classPrivateFieldGet(_uiManager2,this).getMode()!==util.AnnotationEditorType.INK){return;}if(!isCommitting){for(const editor of _classPrivateFieldGet(_editors,this).values()){if(editor.isEmpty()){editor.setInBackground();return;}}}const editor=this.createAndAddNewEditor({offsetX:0,offsetY:0},false);editor.setInBackground();}setEditingState(isEditing){_classPrivateFieldGet(_uiManager2,this).setEditingState(isEditing);}addCommands(params){_classPrivateFieldGet(_uiManager2,this).addCommands(params);}togglePointerEvents(enabled=false){this.div.classList.toggle(\"disabled\",!enabled);}toggleAnnotationLayerPointerEvents(enabled=false){_classPrivateFieldGet(_annotationLayer,this)?.div.classList.toggle(\"disabled\",!enabled);}enable(){this.div.tabIndex=0;this.togglePointerEvents(true);const annotationElementIds=new Set();for(const editor of _classPrivateFieldGet(_editors,this).values()){editor.enableEditing();editor.show(true);if(editor.annotationElementId){_classPrivateFieldGet(_uiManager2,this).removeChangedExistingAnnotation(editor);annotationElementIds.add(editor.annotationElementId);}}if(!_classPrivateFieldGet(_annotationLayer,this)){return;}const editables=_classPrivateFieldGet(_annotationLayer,this).getEditableAnnotations();for(const editable of editables){editable.hide();if(_classPrivateFieldGet(_uiManager2,this).isDeletedAnnotationElement(editable.data.id)){continue;}if(annotationElementIds.has(editable.data.id)){continue;}const editor=this.deserialize(editable);if(!editor){continue;}this.addOrRebuild(editor);editor.enableEditing();}}disable(){_classPrivateFieldSet(_isDisabling,this,true);this.div.tabIndex=-1;this.togglePointerEvents(false);const changedAnnotations=new Map();const resetAnnotations=new Map();for(const editor of _classPrivateFieldGet(_editors,this).values()){editor.disableEditing();if(!editor.annotationElementId){continue;}if(editor.serialize()!==null){changedAnnotations.set(editor.annotationElementId,editor);continue;}else{resetAnnotations.set(editor.annotationElementId,editor);}this.getEditableAnnotation(editor.annotationElementId)?.show();editor.remove();}if(_classPrivateFieldGet(_annotationLayer,this)){const editables=_classPrivateFieldGet(_annotationLayer,this).getEditableAnnotations();for(const editable of editables){const{id}=editable.data;if(_classPrivateFieldGet(_uiManager2,this).isDeletedAnnotationElement(id)){continue;}let editor=resetAnnotations.get(id);if(editor){editor.resetAnnotationElement(editable);editor.show(false);editable.show();continue;}editor=changedAnnotations.get(id);if(editor){_classPrivateFieldGet(_uiManager2,this).addChangedExistingAnnotation(editor);editor.renderAnnotationElement(editable);editor.show(false);}editable.show();}}_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup).call(this);if(this.isEmpty){this.div.hidden=true;}const{classList}=this.div;for(const editorType of _editorTypes._.values()){classList.remove(`${editorType._type}Editing`);}this.disableTextSelection();this.toggleAnnotationLayerPointerEvents(true);_classPrivateFieldSet(_isDisabling,this,false);}getEditableAnnotation(id){return _classPrivateFieldGet(_annotationLayer,this)?.getEditableAnnotation(id)||null;}setActiveEditor(editor){const currentActive=_classPrivateFieldGet(_uiManager2,this).getActive();if(currentActive===editor){return;}_classPrivateFieldGet(_uiManager2,this).setActiveEditor(editor);}enableTextSelection(){this.div.tabIndex=-1;if(_classPrivateFieldGet(_textLayer,this)?.div&&!_classPrivateFieldGet(_boundTextLayerPointerDown,this)){_classPrivateFieldSet(_boundTextLayerPointerDown,this,_assertClassBrand(_AnnotationEditorLayer_brand,this,_textLayerPointerDown).bind(this));_classPrivateFieldGet(_textLayer,this).div.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundTextLayerPointerDown,this));_classPrivateFieldGet(_textLayer,this).div.classList.add(\"highlighting\");}}disableTextSelection(){this.div.tabIndex=0;if(_classPrivateFieldGet(_textLayer,this)?.div&&_classPrivateFieldGet(_boundTextLayerPointerDown,this)){_classPrivateFieldGet(_textLayer,this).div.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundTextLayerPointerDown,this));_classPrivateFieldSet(_boundTextLayerPointerDown,this,null);_classPrivateFieldGet(_textLayer,this).div.classList.remove(\"highlighting\");}}enableClick(){if(_classPrivateFieldGet(_boundPointerdown,this)){return;}_classPrivateFieldSet(_boundPointerdown,this,this.pointerdown.bind(this));_classPrivateFieldSet(_boundPointerup,this,this.pointerup.bind(this));this.div.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundPointerdown,this));this.div.addEventListener(\"pointerup\",_classPrivateFieldGet(_boundPointerup,this));}disableClick(){if(!_classPrivateFieldGet(_boundPointerdown,this)){return;}this.div.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundPointerdown,this));this.div.removeEventListener(\"pointerup\",_classPrivateFieldGet(_boundPointerup,this));_classPrivateFieldSet(_boundPointerdown,this,null);_classPrivateFieldSet(_boundPointerup,this,null);}attach(editor){_classPrivateFieldGet(_editors,this).set(editor.id,editor);const{annotationElementId}=editor;if(annotationElementId&&_classPrivateFieldGet(_uiManager2,this).isDeletedAnnotationElement(annotationElementId)){_classPrivateFieldGet(_uiManager2,this).removeDeletedAnnotationElement(editor);}}detach(editor){_classPrivateFieldGet(_editors,this).delete(editor.id);_classPrivateFieldGet(_accessibilityManager2,this)?.removePointerInTextLayer(editor.contentDiv);if(!_classPrivateFieldGet(_isDisabling,this)&&editor.annotationElementId){_classPrivateFieldGet(_uiManager2,this).addDeletedAnnotationElement(editor);}}remove(editor){this.detach(editor);_classPrivateFieldGet(_uiManager2,this).removeEditor(editor);editor.div.remove();editor.isAttachedToDOM=false;if(!_classPrivateFieldGet(_isCleaningUp,this)){this.addInkEditorIfNeeded(false);}}changeParent(editor){if(editor.parent===this){return;}if(editor.parent&&editor.annotationElementId){_classPrivateFieldGet(_uiManager2,this).addDeletedAnnotationElement(editor.annotationElementId);editor_editor.AnnotationEditor.deleteAnnotationElement(editor);editor.annotationElementId=null;}this.attach(editor);editor.parent?.detach(editor);editor.setParent(this);if(editor.div&&editor.isAttachedToDOM){editor.div.remove();this.div.append(editor.div);}}add(editor){if(editor.parent===this&&editor.isAttachedToDOM){return;}this.changeParent(editor);_classPrivateFieldGet(_uiManager2,this).addEditor(editor);this.attach(editor);if(!editor.isAttachedToDOM){const div=editor.render();this.div.append(div);editor.isAttachedToDOM=true;}editor.fixAndSetPosition();editor.onceAdded();_classPrivateFieldGet(_uiManager2,this).addToAnnotationStorage(editor);editor._reportTelemetry(editor.telemetryInitialData);}moveEditorInDOM(editor){if(!editor.isAttachedToDOM){return;}const{activeElement}=document;if(editor.div.contains(activeElement)&&!_classPrivateFieldGet(_editorFocusTimeoutId,this)){editor._focusEventsAllowed=false;_classPrivateFieldSet(_editorFocusTimeoutId,this,setTimeout(()=>{_classPrivateFieldSet(_editorFocusTimeoutId,this,null);if(!editor.div.contains(document.activeElement)){editor.div.addEventListener(\"focusin\",()=>{editor._focusEventsAllowed=true;},{once:true});activeElement.focus();}else{editor._focusEventsAllowed=true;}},0));}editor._structTreeParentId=_classPrivateFieldGet(_accessibilityManager2,this)?.moveElementInDOM(this.div,editor.div,editor.contentDiv,true);}addOrRebuild(editor){if(editor.needsToBeRebuilt()){editor.parent||=this;editor.rebuild();editor.show();}else{this.add(editor);}}addUndoableEditor(editor){const cmd=()=>editor._uiManager.rebuild(editor);const undo=()=>{editor.remove();};this.addCommands({cmd,undo,mustExec:false});}getNextId(){return _classPrivateFieldGet(_uiManager2,this).getId();}canCreateNewEmptyEditor(){return _classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType)?.canCreateNewEmptyEditor();}pasteEditor(mode,params){_classPrivateFieldGet(_uiManager2,this).updateToolbar(mode);_classPrivateFieldGet(_uiManager2,this).updateMode(mode);const{offsetX,offsetY}=_assertClassBrand(_AnnotationEditorLayer_brand,this,_getCenterPoint).call(this);const id=this.getNextId();const editor=_assertClassBrand(_AnnotationEditorLayer_brand,this,_createNewEditor).call(this,{parent:this,id,x:offsetX,y:offsetY,uiManager:_classPrivateFieldGet(_uiManager2,this),isCentered:true,...params});if(editor){this.add(editor);}}deserialize(data){return _editorTypes._.get(data.annotationType??data.annotationEditorType)?.deserialize(data,this,_classPrivateFieldGet(_uiManager2,this))||null;}createAndAddNewEditor(event,isCentered,data={}){const id=this.getNextId();const editor=_assertClassBrand(_AnnotationEditorLayer_brand,this,_createNewEditor).call(this,{parent:this,id,x:event.offsetX,y:event.offsetY,uiManager:_classPrivateFieldGet(_uiManager2,this),isCentered,...data});if(editor){this.add(editor);}return editor;}addNewEditor(){this.createAndAddNewEditor(_assertClassBrand(_AnnotationEditorLayer_brand,this,_getCenterPoint).call(this),true);}setSelected(editor){_classPrivateFieldGet(_uiManager2,this).setSelected(editor);}toggleSelected(editor){_classPrivateFieldGet(_uiManager2,this).toggleSelected(editor);}isSelected(editor){return _classPrivateFieldGet(_uiManager2,this).isSelected(editor);}unselect(editor){_classPrivateFieldGet(_uiManager2,this).unselect(editor);}pointerup(event){const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}if(!_classPrivateFieldGet(_hadPointerDown,this)){return;}_classPrivateFieldSet(_hadPointerDown,this,false);if(!_classPrivateFieldGet(_allowClick,this)){_classPrivateFieldSet(_allowClick,this,true);return;}if(_classPrivateFieldGet(_uiManager2,this).getMode()===util.AnnotationEditorType.STAMP){_classPrivateFieldGet(_uiManager2,this).unselectAll();return;}this.createAndAddNewEditor(event,false);}pointerdown(event){if(_classPrivateFieldGet(_uiManager2,this).getMode()===util.AnnotationEditorType.HIGHLIGHT){this.enableTextSelection();}if(_classPrivateFieldGet(_hadPointerDown,this)){_classPrivateFieldSet(_hadPointerDown,this,false);return;}const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}_classPrivateFieldSet(_hadPointerDown,this,true);const editor=_classPrivateFieldGet(_uiManager2,this).getActive();_classPrivateFieldSet(_allowClick,this,!editor||editor.isEmpty());}findNewParent(editor,x,y){const layer=_classPrivateFieldGet(_uiManager2,this).findParent(x,y);if(layer===null||layer===this){return false;}layer.changeParent(editor);return true;}destroy(){if(_classPrivateFieldGet(_uiManager2,this).getActive()?.parent===this){_classPrivateFieldGet(_uiManager2,this).commitOrRemove();_classPrivateFieldGet(_uiManager2,this).setActiveEditor(null);}if(_classPrivateFieldGet(_editorFocusTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_editorFocusTimeoutId,this));_classPrivateFieldSet(_editorFocusTimeoutId,this,null);}for(const editor of _classPrivateFieldGet(_editors,this).values()){_classPrivateFieldGet(_accessibilityManager2,this)?.removePointerInTextLayer(editor.contentDiv);editor.setParent(null);editor.isAttachedToDOM=false;editor.div.remove();}this.div=null;_classPrivateFieldGet(_editors,this).clear();_classPrivateFieldGet(_uiManager2,this).removeLayer(this);}render({viewport}){this.viewport=viewport;(0,display_utils.setLayerDimensions)(this.div,viewport);for(const editor of _classPrivateFieldGet(_uiManager2,this).getEditors(this.pageIndex)){this.add(editor);editor.rebuild();}this.updateMode();}update({viewport}){_classPrivateFieldGet(_uiManager2,this).commitOrRemove();_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup).call(this);const oldRotation=this.viewport.rotation;const rotation=viewport.rotation;this.viewport=viewport;(0,display_utils.setLayerDimensions)(this.div,{rotation});if(oldRotation!==rotation){for(const editor of _classPrivateFieldGet(_editors,this).values()){editor.rotate(rotation);}}this.addInkEditorIfNeeded(false);}get pageDimensions(){const{pageWidth,pageHeight}=this.viewport.rawDims;return[pageWidth,pageHeight];}get scale(){return _classPrivateFieldGet(_uiManager2,this).viewParameters.realScale;}}/***/function _textLayerPointerDown(event){_classPrivateFieldGet(_uiManager2,this).unselectAll();if(event.target===_classPrivateFieldGet(_textLayer,this).div){const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}_classPrivateFieldGet(_uiManager2,this).showAllEditors(\"highlight\",true,true);_classPrivateFieldGet(_textLayer,this).div.classList.add(\"free\");HighlightEditor.startHighlighting(this,_classPrivateFieldGet(_uiManager2,this).direction===\"ltr\",event);_classPrivateFieldGet(_textLayer,this).div.addEventListener(\"pointerup\",()=>{_classPrivateFieldGet(_textLayer,this).div.classList.remove(\"free\");},{once:true});event.preventDefault();}}function _get_currentEditorType(_this5){return _editorTypes._.get(_classPrivateFieldGet(_uiManager2,_this5).getMode());}function _createNewEditor(params){const editorType=_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType);return editorType?new editorType.prototype.constructor(params):null;}function _getCenterPoint(){const{x,y,width,height}=this.div.getBoundingClientRect();const tlX=Math.max(0,x);const tlY=Math.max(0,y);const brX=Math.min(window.innerWidth,x+width);const brY=Math.min(window.innerHeight,y+height);const centerX=(tlX+brX)/2-x;const centerY=(tlY+brY)/2-y;const[offsetX,offsetY]=this.viewport.rotation%180===0?[centerX,centerY]:[centerY,centerX];return{offsetX,offsetY};}function _cleanup(){_classPrivateFieldSet(_isCleaningUp,this,true);for(const editor of _classPrivateFieldGet(_editors,this).values()){if(editor.isEmpty()){editor.remove();}}_classPrivateFieldSet(_isCleaningUp,this,false);}_defineProperty(AnnotationEditorLayer,\"_initialized\",false);var _editorTypes={_:new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map(type=>[type._editorType,type]))};}),/***/259:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _ColorPicker;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */ColorPicker:()=>(/* binding */ColorPicker)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _tools_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(830);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(419);var _boundKeyDown2=/*#__PURE__*/new WeakMap();var _boundPointerDown=/*#__PURE__*/new WeakMap();var _button=/*#__PURE__*/new WeakMap();var _buttonSwatch=/*#__PURE__*/new WeakMap();var _defaultColor=/*#__PURE__*/new WeakMap();var _dropdown=/*#__PURE__*/new WeakMap();var _dropdownWasFromKeyboard=/*#__PURE__*/new WeakMap();var _isMainColorPicker=/*#__PURE__*/new WeakMap();var _editor=/*#__PURE__*/new WeakMap();var _eventBus=/*#__PURE__*/new WeakMap();var _uiManager3=/*#__PURE__*/new WeakMap();var _type2=/*#__PURE__*/new WeakMap();var _ColorPicker_brand=/*#__PURE__*/new WeakSet();class ColorPicker{static get _keyboardManager(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_keyboardManager\",new _tools_js__WEBPACK_IMPORTED_MODULE_1__.KeyboardManager([[[\"Escape\",\"mac+Escape\"],ColorPicker.prototype._hideDropdownFromKeyboard],[[\" \",\"mac+ \"],ColorPicker.prototype._colorSelectFromKeyboard],[[\"ArrowDown\",\"ArrowRight\",\"mac+ArrowDown\",\"mac+ArrowRight\"],ColorPicker.prototype._moveToNext],[[\"ArrowUp\",\"ArrowLeft\",\"mac+ArrowUp\",\"mac+ArrowLeft\"],ColorPicker.prototype._moveToPrevious],[[\"Home\",\"mac+Home\"],ColorPicker.prototype._moveToBeginning],[[\"End\",\"mac+End\"],ColorPicker.prototype._moveToEnd]]));}constructor({editor=null,uiManager=null}){_classPrivateMethodInitSpec(this,_ColorPicker_brand);_classPrivateFieldInitSpec(this,_boundKeyDown2,_assertClassBrand(_ColorPicker_brand,this,_keyDown2).bind(this));_classPrivateFieldInitSpec(this,_boundPointerDown,_assertClassBrand(_ColorPicker_brand,this,_pointerDown).bind(this));_classPrivateFieldInitSpec(this,_button,null);_classPrivateFieldInitSpec(this,_buttonSwatch,null);_classPrivateFieldInitSpec(this,_defaultColor,void 0);_classPrivateFieldInitSpec(this,_dropdown,null);_classPrivateFieldInitSpec(this,_dropdownWasFromKeyboard,false);_classPrivateFieldInitSpec(this,_isMainColorPicker,false);_classPrivateFieldInitSpec(this,_editor,null);_classPrivateFieldInitSpec(this,_eventBus,void 0);_classPrivateFieldInitSpec(this,_uiManager3,null);_classPrivateFieldInitSpec(this,_type2,void 0);if(editor){_classPrivateFieldSet(_isMainColorPicker,this,false);_classPrivateFieldSet(_type2,this,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_COLOR);_classPrivateFieldSet(_editor,this,editor);}else{_classPrivateFieldSet(_isMainColorPicker,this,true);_classPrivateFieldSet(_type2,this,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR);}_classPrivateFieldSet(_uiManager3,this,editor?._uiManager||uiManager);_classPrivateFieldSet(_eventBus,this,_classPrivateFieldGet(_uiManager3,this)._eventBus);_classPrivateFieldSet(_defaultColor,this,editor?.color||_classPrivateFieldGet(_uiManager3,this)?.highlightColors.values().next().value||\"#FFFF98\");}renderButton(){const button=_classPrivateFieldSet(_button,this,document.createElement(\"button\"));button.className=\"colorPicker\";button.tabIndex=\"0\";button.setAttribute(\"data-l10n-id\",\"pdfjs-editor-colorpicker-button\");button.setAttribute(\"aria-haspopup\",true);button.addEventListener(\"click\",_assertClassBrand(_ColorPicker_brand,this,_openDropdown).bind(this));button.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown2,this));const swatch=_classPrivateFieldSet(_buttonSwatch,this,document.createElement(\"span\"));swatch.className=\"swatch\";swatch.setAttribute(\"aria-hidden\",true);swatch.style.backgroundColor=_classPrivateFieldGet(_defaultColor,this);button.append(swatch);return button;}renderMainDropdown(){const dropdown=_classPrivateFieldSet(_dropdown,this,_assertClassBrand(_ColorPicker_brand,this,_getDropdownRoot).call(this));dropdown.setAttribute(\"aria-orientation\",\"horizontal\");dropdown.setAttribute(\"aria-labelledby\",\"highlightColorPickerLabel\");return dropdown;}_colorSelectFromKeyboard(event){if(event.target===_classPrivateFieldGet(_button,this)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}const color=event.target.getAttribute(\"data-color\");if(!color){return;}_assertClassBrand(_ColorPicker_brand,this,_colorSelect).call(this,color,event);}_moveToNext(event){if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}if(event.target===_classPrivateFieldGet(_button,this)){_classPrivateFieldGet(_dropdown,this).firstChild?.focus();return;}event.target.nextSibling?.focus();}_moveToPrevious(event){if(event.target===_classPrivateFieldGet(_dropdown,this)?.firstChild||event.target===_classPrivateFieldGet(_button,this)){if(_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){this._hideDropdownFromKeyboard();}return;}if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);}event.target.previousSibling?.focus();}_moveToBeginning(event){if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}_classPrivateFieldGet(_dropdown,this).firstChild?.focus();}_moveToEnd(event){if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}_classPrivateFieldGet(_dropdown,this).lastChild?.focus();}hideDropdown(){_classPrivateFieldGet(_dropdown,this)?.classList.add(\"hidden\");window.removeEventListener(\"pointerdown\",_classPrivateFieldGet(_boundPointerDown,this));}_hideDropdownFromKeyboard(){if(_classPrivateFieldGet(_isMainColorPicker,this)){return;}if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_classPrivateFieldGet(_editor,this)?.unselect();return;}this.hideDropdown();_classPrivateFieldGet(_button,this).focus({preventScroll:true,focusVisible:_classPrivateFieldGet(_dropdownWasFromKeyboard,this)});}updateColor(color){if(_classPrivateFieldGet(_buttonSwatch,this)){_classPrivateFieldGet(_buttonSwatch,this).style.backgroundColor=color;}if(!_classPrivateFieldGet(_dropdown,this)){return;}const i=_classPrivateFieldGet(_uiManager3,this).highlightColors.values();for(const child of _classPrivateFieldGet(_dropdown,this).children){child.setAttribute(\"aria-selected\",i.next().value===color);}}destroy(){_classPrivateFieldGet(_button,this)?.remove();_classPrivateFieldSet(_button,this,null);_classPrivateFieldSet(_buttonSwatch,this,null);_classPrivateFieldGet(_dropdown,this)?.remove();_classPrivateFieldSet(_dropdown,this,null);}}/***/_ColorPicker=ColorPicker;function _getDropdownRoot(){const div=document.createElement(\"div\");div.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.noContextMenu);div.className=\"dropdown\";div.role=\"listbox\";div.setAttribute(\"aria-multiselectable\",false);div.setAttribute(\"aria-orientation\",\"vertical\");div.setAttribute(\"data-l10n-id\",\"pdfjs-editor-colorpicker-dropdown\");for(const[name,color]of _classPrivateFieldGet(_uiManager3,this).highlightColors){const button=document.createElement(\"button\");button.tabIndex=\"0\";button.role=\"option\";button.setAttribute(\"data-color\",color);button.title=name;button.setAttribute(\"data-l10n-id\",`pdfjs-editor-colorpicker-${name}`);const swatch=document.createElement(\"span\");button.append(swatch);swatch.className=\"swatch\";swatch.style.backgroundColor=color;button.setAttribute(\"aria-selected\",color===_classPrivateFieldGet(_defaultColor,this));button.addEventListener(\"click\",_assertClassBrand(_ColorPicker_brand,this,_colorSelect).bind(this,color));div.append(button);}div.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeyDown2,this));return div;}function _colorSelect(color,event){event.stopPropagation();_classPrivateFieldGet(_eventBus,this).dispatch(\"switchannotationeditorparams\",{source:this,type:_classPrivateFieldGet(_type2,this),value:color});}function _keyDown2(event){_ColorPicker._keyboardManager.exec(this,event);}function _openDropdown(event){if(_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){this.hideDropdown();return;}_classPrivateFieldSet(_dropdownWasFromKeyboard,this,event.detail===0);window.addEventListener(\"pointerdown\",_classPrivateFieldGet(_boundPointerDown,this));if(_classPrivateFieldGet(_dropdown,this)){_classPrivateFieldGet(_dropdown,this).classList.remove(\"hidden\");return;}const root=_classPrivateFieldSet(_dropdown,this,_assertClassBrand(_ColorPicker_brand,this,_getDropdownRoot).call(this));_classPrivateFieldGet(_button,this).append(root);}function _pointerDown(event){if(_classPrivateFieldGet(_dropdown,this)?.contains(event.target)){return;}this.hideDropdown();}function _get_isDropdownVisible(_this6){return _classPrivateFieldGet(_dropdown,_this6)&&!_classPrivateFieldGet(_dropdown,_this6).classList.contains(\"hidden\");}}),/***/310:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _AltText,_AnnotationEditor;// EXPORTS\n__webpack_require__.d(__webpack_exports__,{AnnotationEditor:()=>(/* binding */AnnotationEditor)});// EXTERNAL MODULE: ./src/display/editor/tools.js\nvar tools=__webpack_require__(830);// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);;// CONCATENATED MODULE: ./src/display/editor/alt_text.js\nvar _altText=/*#__PURE__*/new WeakMap();var _altTextDecorative=/*#__PURE__*/new WeakMap();var _altTextButton=/*#__PURE__*/new WeakMap();var _altTextTooltip=/*#__PURE__*/new WeakMap();var _altTextTooltipTimeout=/*#__PURE__*/new WeakMap();var _altTextWasFromKeyBoard=/*#__PURE__*/new WeakMap();var _editor2=/*#__PURE__*/new WeakMap();var _AltText_brand=/*#__PURE__*/new WeakSet();class AltText{constructor(editor){_classPrivateMethodInitSpec(this,_AltText_brand);_classPrivateFieldInitSpec(this,_altText,\"\");_classPrivateFieldInitSpec(this,_altTextDecorative,false);_classPrivateFieldInitSpec(this,_altTextButton,null);_classPrivateFieldInitSpec(this,_altTextTooltip,null);_classPrivateFieldInitSpec(this,_altTextTooltipTimeout,null);_classPrivateFieldInitSpec(this,_altTextWasFromKeyBoard,false);_classPrivateFieldInitSpec(this,_editor2,null);_classPrivateFieldSet(_editor2,this,editor);}static initialize(l10nPromise){AltText._l10nPromise||=l10nPromise;}async render(){const altText=_classPrivateFieldSet(_altTextButton,this,document.createElement(\"button\"));altText.className=\"altText\";const msg=await AltText._l10nPromise.get(\"pdfjs-editor-alt-text-button-label\");altText.textContent=msg;altText.setAttribute(\"aria-label\",msg);altText.tabIndex=\"0\";altText.addEventListener(\"contextmenu\",display_utils.noContextMenu);altText.addEventListener(\"pointerdown\",event=>event.stopPropagation());const onClick=event=>{event.preventDefault();_classPrivateFieldGet(_editor2,this)._uiManager.editAltText(_classPrivateFieldGet(_editor2,this));};altText.addEventListener(\"click\",onClick,{capture:true});altText.addEventListener(\"keydown\",event=>{if(event.target===altText&&event.key===\"Enter\"){_classPrivateFieldSet(_altTextWasFromKeyBoard,this,true);onClick(event);}});await _assertClassBrand(_AltText_brand,this,_setState).call(this);return altText;}finish(){if(!_classPrivateFieldGet(_altTextButton,this)){return;}_classPrivateFieldGet(_altTextButton,this).focus({focusVisible:_classPrivateFieldGet(_altTextWasFromKeyBoard,this)});_classPrivateFieldSet(_altTextWasFromKeyBoard,this,false);}isEmpty(){return!_classPrivateFieldGet(_altText,this)&&!_classPrivateFieldGet(_altTextDecorative,this);}get data(){return{altText:_classPrivateFieldGet(_altText,this),decorative:_classPrivateFieldGet(_altTextDecorative,this)};}set data({altText,decorative}){if(_classPrivateFieldGet(_altText,this)===altText&&_classPrivateFieldGet(_altTextDecorative,this)===decorative){return;}_classPrivateFieldSet(_altText,this,altText);_classPrivateFieldSet(_altTextDecorative,this,decorative);_assertClassBrand(_AltText_brand,this,_setState).call(this);}toggle(enabled=false){if(!_classPrivateFieldGet(_altTextButton,this)){return;}if(!enabled&&_classPrivateFieldGet(_altTextTooltipTimeout,this)){clearTimeout(_classPrivateFieldGet(_altTextTooltipTimeout,this));_classPrivateFieldSet(_altTextTooltipTimeout,this,null);}_classPrivateFieldGet(_altTextButton,this).disabled=!enabled;}destroy(){_classPrivateFieldGet(_altTextButton,this)?.remove();_classPrivateFieldSet(_altTextButton,this,null);_classPrivateFieldSet(_altTextTooltip,this,null);}}// EXTERNAL MODULE: ./src/display/editor/toolbar.js\n_AltText=AltText;async function _setState(){const button=_classPrivateFieldGet(_altTextButton,this);if(!button){return;}if(!_classPrivateFieldGet(_altText,this)&&!_classPrivateFieldGet(_altTextDecorative,this)){button.classList.remove(\"done\");_classPrivateFieldGet(_altTextTooltip,this)?.remove();return;}button.classList.add(\"done\");_AltText._l10nPromise.get(\"pdfjs-editor-alt-text-edit-button-label\").then(msg=>{button.setAttribute(\"aria-label\",msg);});let tooltip=_classPrivateFieldGet(_altTextTooltip,this);if(!tooltip){_classPrivateFieldSet(_altTextTooltip,this,tooltip=document.createElement(\"span\"));tooltip.className=\"tooltip\";tooltip.setAttribute(\"role\",\"tooltip\");const id=tooltip.id=`alt-text-tooltip-${_classPrivateFieldGet(_editor2,this).id}`;button.setAttribute(\"aria-describedby\",id);const DELAY_TO_SHOW_TOOLTIP=100;button.addEventListener(\"mouseenter\",()=>{_classPrivateFieldSet(_altTextTooltipTimeout,this,setTimeout(()=>{_classPrivateFieldSet(_altTextTooltipTimeout,this,null);_classPrivateFieldGet(_altTextTooltip,this).classList.add(\"show\");_classPrivateFieldGet(_editor2,this)._reportTelemetry({action:\"alt_text_tooltip\"});},DELAY_TO_SHOW_TOOLTIP));});button.addEventListener(\"mouseleave\",()=>{if(_classPrivateFieldGet(_altTextTooltipTimeout,this)){clearTimeout(_classPrivateFieldGet(_altTextTooltipTimeout,this));_classPrivateFieldSet(_altTextTooltipTimeout,this,null);}_classPrivateFieldGet(_altTextTooltip,this)?.classList.remove(\"show\");});}tooltip.innerText=_classPrivateFieldGet(_altTextDecorative,this)?await _AltText._l10nPromise.get(\"pdfjs-editor-alt-text-decorative-tooltip\"):_classPrivateFieldGet(_altText,this);if(!tooltip.parentNode){button.append(tooltip);}const element=_classPrivateFieldGet(_editor2,this).getImageForAltText();element?.setAttribute(\"aria-describedby\",tooltip.id);}_defineProperty(AltText,\"_l10nPromise\",null);var toolbar=__webpack_require__(362);;// CONCATENATED MODULE: ./src/display/editor/editor.js\nvar _allResizerDivs=/*#__PURE__*/new WeakMap();var _altText2=/*#__PURE__*/new WeakMap();var _disabled=/*#__PURE__*/new WeakMap();var _keepAspectRatio=/*#__PURE__*/new WeakMap();var _resizersDiv=/*#__PURE__*/new WeakMap();var _savedDimensions=/*#__PURE__*/new WeakMap();var _boundFocusin=/*#__PURE__*/new WeakMap();var _boundFocusout=/*#__PURE__*/new WeakMap();var _editToolbar=/*#__PURE__*/new WeakMap();var _focusedResizerName=/*#__PURE__*/new WeakMap();var _hasBeenClicked=/*#__PURE__*/new WeakMap();var _initialPosition=/*#__PURE__*/new WeakMap();var _isEditing=/*#__PURE__*/new WeakMap();var _isInEditMode=/*#__PURE__*/new WeakMap();var _isResizerEnabledForKeyboard=/*#__PURE__*/new WeakMap();var _moveInDOMTimeout=/*#__PURE__*/new WeakMap();var _prevDragX=/*#__PURE__*/new WeakMap();var _prevDragY=/*#__PURE__*/new WeakMap();var _telemetryTimeouts=/*#__PURE__*/new WeakMap();var _isDraggable=/*#__PURE__*/new WeakMap();var _zIndex=/*#__PURE__*/new WeakMap();var _AnnotationEditor_brand=/*#__PURE__*/new WeakSet();class AnnotationEditor{static get _resizerKeyboardManager(){const resize=AnnotationEditor.prototype._resizeWithKeyboard;const small=tools.AnnotationEditorUIManager.TRANSLATE_SMALL;const big=tools.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,util.shadow)(this,\"_resizerKeyboardManager\",new tools.KeyboardManager([[[\"ArrowLeft\",\"mac+ArrowLeft\"],resize,{args:[-small,0]}],[[\"ctrl+ArrowLeft\",\"mac+shift+ArrowLeft\"],resize,{args:[-big,0]}],[[\"ArrowRight\",\"mac+ArrowRight\"],resize,{args:[small,0]}],[[\"ctrl+ArrowRight\",\"mac+shift+ArrowRight\"],resize,{args:[big,0]}],[[\"ArrowUp\",\"mac+ArrowUp\"],resize,{args:[0,-small]}],[[\"ctrl+ArrowUp\",\"mac+shift+ArrowUp\"],resize,{args:[0,-big]}],[[\"ArrowDown\",\"mac+ArrowDown\"],resize,{args:[0,small]}],[[\"ctrl+ArrowDown\",\"mac+shift+ArrowDown\"],resize,{args:[0,big]}],[[\"Escape\",\"mac+Escape\"],AnnotationEditor.prototype._stopResizingWithKeyboard]]));}constructor(parameters){_classPrivateMethodInitSpec(this,_AnnotationEditor_brand);_classPrivateFieldInitSpec(this,_allResizerDivs,null);_classPrivateFieldInitSpec(this,_altText2,null);_classPrivateFieldInitSpec(this,_disabled,false);_classPrivateFieldInitSpec(this,_keepAspectRatio,false);_classPrivateFieldInitSpec(this,_resizersDiv,null);_classPrivateFieldInitSpec(this,_savedDimensions,null);_classPrivateFieldInitSpec(this,_boundFocusin,this.focusin.bind(this));_classPrivateFieldInitSpec(this,_boundFocusout,this.focusout.bind(this));_classPrivateFieldInitSpec(this,_editToolbar,null);_classPrivateFieldInitSpec(this,_focusedResizerName,\"\");_classPrivateFieldInitSpec(this,_hasBeenClicked,false);_classPrivateFieldInitSpec(this,_initialPosition,null);_classPrivateFieldInitSpec(this,_isEditing,false);_classPrivateFieldInitSpec(this,_isInEditMode,false);_classPrivateFieldInitSpec(this,_isResizerEnabledForKeyboard,false);_classPrivateFieldInitSpec(this,_moveInDOMTimeout,null);_classPrivateFieldInitSpec(this,_prevDragX,0);_classPrivateFieldInitSpec(this,_prevDragY,0);_classPrivateFieldInitSpec(this,_telemetryTimeouts,null);_defineProperty(this,\"_initialOptions\",Object.create(null));_defineProperty(this,\"_isVisible\",true);_defineProperty(this,\"_uiManager\",null);_defineProperty(this,\"_focusEventsAllowed\",true);_defineProperty(this,\"_l10nPromise\",null);_classPrivateFieldInitSpec(this,_isDraggable,false);_classPrivateFieldInitSpec(this,_zIndex,AnnotationEditor._zIndex++);if(this.constructor===AnnotationEditor){(0,util.unreachable)(\"Cannot initialize AnnotationEditor.\");}this.parent=parameters.parent;this.id=parameters.id;this.width=this.height=null;this.pageIndex=parameters.parent.pageIndex;this.name=parameters.name;this.div=null;this._uiManager=parameters.uiManager;this.annotationElementId=null;this._willKeepAspectRatio=false;this._initialOptions.isCentered=parameters.isCentered;this._structTreeParentId=null;const{rotation:_rotation2,rawDims:{pageWidth:_pageWidth,pageHeight:_pageHeight,pageX,pageY}}=this.parent.viewport;this.rotation=_rotation2;this.pageRotation=(360+_rotation2-this._uiManager.viewParameters.rotation)%360;this.pageDimensions=[_pageWidth,_pageHeight];this.pageTranslation=[pageX,pageY];const[_width,_height]=this.parentDimensions;this.x=parameters.x/_width;this.y=parameters.y/_height;this.isAttachedToDOM=false;this.deleted=false;}get editorType(){return Object.getPrototypeOf(this).constructor._type;}static get _defaultLineColor(){return(0,util.shadow)(this,\"_defaultLineColor\",this._colorManager.getHexCode(\"CanvasText\"));}static deleteAnnotationElement(editor){const fakeEditor=new FakeEditor({id:editor.parent.getNextId(),parent:editor.parent,uiManager:editor._uiManager});fakeEditor.annotationElementId=editor.annotationElementId;fakeEditor.deleted=true;fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);}static initialize(l10n,_uiManager,options){AnnotationEditor._l10nPromise||=new Map([\"pdfjs-editor-alt-text-button-label\",\"pdfjs-editor-alt-text-edit-button-label\",\"pdfjs-editor-alt-text-decorative-tooltip\",\"pdfjs-editor-resizer-label-topLeft\",\"pdfjs-editor-resizer-label-topMiddle\",\"pdfjs-editor-resizer-label-topRight\",\"pdfjs-editor-resizer-label-middleRight\",\"pdfjs-editor-resizer-label-bottomRight\",\"pdfjs-editor-resizer-label-bottomMiddle\",\"pdfjs-editor-resizer-label-bottomLeft\",\"pdfjs-editor-resizer-label-middleLeft\"].map(str=>[str,l10n.get(str.replaceAll(/([A-Z])/g,c=>`-${c.toLowerCase()}`))]));if(options?.strings){for(const str of options.strings){AnnotationEditor._l10nPromise.set(str,l10n.get(str));}}if(AnnotationEditor._borderLineWidth!==-1){return;}const style=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(style.getPropertyValue(\"--outline-width\"))||0;}static updateDefaultParams(_type,_value){}static get defaultPropertiesToUpdate(){return[];}static isHandlingMimeForPasting(mime){return false;}static paste(item,parent){(0,util.unreachable)(\"Not implemented\");}get propertiesToUpdate(){return[];}get _isDraggable(){return _classPrivateFieldGet(_isDraggable,this);}set _isDraggable(value){_classPrivateFieldSet(_isDraggable,this,value);this.div?.classList.toggle(\"draggable\",value);}get isEnterHandled(){return true;}center(){const[pageWidth,pageHeight]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*pageHeight/(pageWidth*2);this.y+=this.width*pageWidth/(pageHeight*2);break;case 180:this.x+=this.width/2;this.y+=this.height/2;break;case 270:this.x+=this.height*pageHeight/(pageWidth*2);this.y-=this.width*pageWidth/(pageHeight*2);break;default:this.x-=this.width/2;this.y-=this.height/2;break;}this.fixAndSetPosition();}addCommands(params){this._uiManager.addCommands(params);}get currentLayer(){return this._uiManager.currentLayer;}setInBackground(){this.div.style.zIndex=0;}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(_zIndex,this);}setParent(parent){if(parent!==null){this.pageIndex=parent.pageIndex;this.pageDimensions=parent.pageDimensions;}else{_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);}this.parent=parent;}focusin(event){if(!this._focusEventsAllowed){return;}if(!_classPrivateFieldGet(_hasBeenClicked,this)){this.parent.setSelected(this);}else{_classPrivateFieldSet(_hasBeenClicked,this,false);}}focusout(event){if(!this._focusEventsAllowed){return;}if(!this.isAttachedToDOM){return;}const target=event.relatedTarget;if(target?.closest(`#${this.id}`)){return;}event.preventDefault();if(!this.parent?.isMultipleSelection){this.commitOrRemove();}}commitOrRemove(){if(this.isEmpty()){this.remove();}else{this.commit();}}commit(){this.addToAnnotationStorage();}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this);}setAt(x,y,tx,ty){const[width,height]=this.parentDimensions;[tx,ty]=this.screenToPageTranslation(tx,ty);this.x=(x+tx)/width;this.y=(y+ty)/height;this.fixAndSetPosition();}translate(x,y){_assertClassBrand(_AnnotationEditor_brand,this,_translate).call(this,this.parentDimensions,x,y);}translateInPage(x,y){_classPrivateFieldGet(_initialPosition,this)||_classPrivateFieldSet(_initialPosition,this,[this.x,this.y]);_assertClassBrand(_AnnotationEditor_brand,this,_translate).call(this,this.pageDimensions,x,y);this.div.scrollIntoView({block:\"nearest\"});}drag(tx,ty){_classPrivateFieldGet(_initialPosition,this)||_classPrivateFieldSet(_initialPosition,this,[this.x,this.y]);const[parentWidth,parentHeight]=this.parentDimensions;this.x+=tx/parentWidth;this.y+=ty/parentHeight;if(this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x,y}=this.div.getBoundingClientRect();if(this.parent.findNewParent(this,x,y)){this.x-=Math.floor(this.x);this.y-=Math.floor(this.y);}}let{x,y}=this;const[bx,by]=this.getBaseTranslation();x+=bx;y+=by;this.div.style.left=`${(100*x).toFixed(2)}%`;this.div.style.top=`${(100*y).toFixed(2)}%`;this.div.scrollIntoView({block:\"nearest\"});}get _hasBeenMoved(){return!!_classPrivateFieldGet(_initialPosition,this)&&(_classPrivateFieldGet(_initialPosition,this)[0]!==this.x||_classPrivateFieldGet(_initialPosition,this)[1]!==this.y);}getBaseTranslation(){const[parentWidth,parentHeight]=this.parentDimensions;const{_borderLineWidth}=AnnotationEditor;const x=_borderLineWidth/parentWidth;const y=_borderLineWidth/parentHeight;switch(this.rotation){case 90:return[-x,y];case 180:return[x,y];case 270:return[x,-y];default:return[-x,-y];}}get _mustFixPosition(){return true;}fixAndSetPosition(rotation=this.rotation){const[pageWidth,pageHeight]=this.pageDimensions;let{x,y,width,height}=this;width*=pageWidth;height*=pageHeight;x*=pageWidth;y*=pageHeight;if(this._mustFixPosition){switch(rotation){case 0:x=Math.max(0,Math.min(pageWidth-width,x));y=Math.max(0,Math.min(pageHeight-height,y));break;case 90:x=Math.max(0,Math.min(pageWidth-height,x));y=Math.min(pageHeight,Math.max(width,y));break;case 180:x=Math.min(pageWidth,Math.max(width,x));y=Math.min(pageHeight,Math.max(height,y));break;case 270:x=Math.min(pageWidth,Math.max(height,x));y=Math.max(0,Math.min(pageHeight-width,y));break;}}this.x=x/=pageWidth;this.y=y/=pageHeight;const[bx,by]=this.getBaseTranslation();x+=bx;y+=by;const{style}=this.div;style.left=`${(100*x).toFixed(2)}%`;style.top=`${(100*y).toFixed(2)}%`;this.moveInDOM();}screenToPageTranslation(x,y){return _rotatePoint.call(AnnotationEditor,x,y,this.parentRotation);}pageTranslationToScreen(x,y){return _rotatePoint.call(AnnotationEditor,x,y,360-this.parentRotation);}get parentScale(){return this._uiManager.viewParameters.realScale;}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360;}get parentDimensions(){const{parentScale,pageDimensions:[pageWidth,pageHeight]}=this;const scaledWidth=pageWidth*parentScale;const scaledHeight=pageHeight*parentScale;return util.FeatureTest.isCSSRoundSupported?[Math.round(scaledWidth),Math.round(scaledHeight)]:[scaledWidth,scaledHeight];}setDims(width,height){const[parentWidth,parentHeight]=this.parentDimensions;this.div.style.width=`${(100*width/parentWidth).toFixed(2)}%`;if(!_classPrivateFieldGet(_keepAspectRatio,this)){this.div.style.height=`${(100*height/parentHeight).toFixed(2)}%`;}}fixDims(){const{style}=this.div;const{height,width}=style;const widthPercent=width.endsWith(\"%\");const heightPercent=!_classPrivateFieldGet(_keepAspectRatio,this)&&height.endsWith(\"%\");if(widthPercent&&heightPercent){return;}const[parentWidth,parentHeight]=this.parentDimensions;if(!widthPercent){style.width=`${(100*parseFloat(width)/parentWidth).toFixed(2)}%`;}if(!_classPrivateFieldGet(_keepAspectRatio,this)&&!heightPercent){style.height=`${(100*parseFloat(height)/parentHeight).toFixed(2)}%`;}}getInitialTranslation(){return[0,0];}altTextFinish(){_classPrivateFieldGet(_altText2,this)?.finish();}async addEditToolbar(){if(_classPrivateFieldGet(_editToolbar,this)||_classPrivateFieldGet(_isInEditMode,this)){return _classPrivateFieldGet(_editToolbar,this);}_classPrivateFieldSet(_editToolbar,this,new toolbar.EditorToolbar(this));this.div.append(_classPrivateFieldGet(_editToolbar,this).render());if(_classPrivateFieldGet(_altText2,this)){_classPrivateFieldGet(_editToolbar,this).addAltTextButton(await _classPrivateFieldGet(_altText2,this).render());}return _classPrivateFieldGet(_editToolbar,this);}removeEditToolbar(){if(!_classPrivateFieldGet(_editToolbar,this)){return;}_classPrivateFieldGet(_editToolbar,this).remove();_classPrivateFieldSet(_editToolbar,this,null);_classPrivateFieldGet(_altText2,this)?.destroy();}getClientDimensions(){return this.div.getBoundingClientRect();}async addAltTextButton(){if(_classPrivateFieldGet(_altText2,this)){return;}AltText.initialize(AnnotationEditor._l10nPromise);_classPrivateFieldSet(_altText2,this,new AltText(this));await this.addEditToolbar();}get altTextData(){return _classPrivateFieldGet(_altText2,this)?.data;}set altTextData(data){if(!_classPrivateFieldGet(_altText2,this)){return;}_classPrivateFieldGet(_altText2,this).data=data;}hasAltText(){return!_classPrivateFieldGet(_altText2,this)?.isEmpty();}render(){this.div=document.createElement(\"div\");this.div.setAttribute(\"data-editor-rotation\",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute(\"id\",this.id);this.div.tabIndex=_classPrivateFieldGet(_disabled,this)?-1:0;if(!this._isVisible){this.div.classList.add(\"hidden\");}this.setInForeground();this.div.addEventListener(\"focusin\",_classPrivateFieldGet(_boundFocusin,this));this.div.addEventListener(\"focusout\",_classPrivateFieldGet(_boundFocusout,this));const[parentWidth,parentHeight]=this.parentDimensions;if(this.parentRotation%180!==0){this.div.style.maxWidth=`${(100*parentHeight/parentWidth).toFixed(2)}%`;this.div.style.maxHeight=`${(100*parentWidth/parentHeight).toFixed(2)}%`;}const[tx,ty]=this.getInitialTranslation();this.translate(tx,ty);(0,tools.bindEvents)(this,this.div,[\"pointerdown\"]);return this.div;}pointerdown(event){const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return;}_classPrivateFieldSet(_hasBeenClicked,this,true);if(this._isDraggable){_assertClassBrand(_AnnotationEditor_brand,this,_setUpDragSession).call(this,event);return;}_assertClassBrand(_AnnotationEditor_brand,this,_selectOnPointerEvent).call(this,event);}moveInDOM(){if(_classPrivateFieldGet(_moveInDOMTimeout,this)){clearTimeout(_classPrivateFieldGet(_moveInDOMTimeout,this));}_classPrivateFieldSet(_moveInDOMTimeout,this,setTimeout(()=>{_classPrivateFieldSet(_moveInDOMTimeout,this,null);this.parent?.moveEditorInDOM(this);},0));}_setParentAndPosition(parent,x,y){parent.changeParent(this);this.x=x;this.y=y;this.fixAndSetPosition();}getRect(tx,ty,rotation=this.rotation){const scale=this.parentScale;const[pageWidth,pageHeight]=this.pageDimensions;const[pageX,pageY]=this.pageTranslation;const shiftX=tx/scale;const shiftY=ty/scale;const x=this.x*pageWidth;const y=this.y*pageHeight;const width=this.width*pageWidth;const height=this.height*pageHeight;switch(rotation){case 0:return[x+shiftX+pageX,pageHeight-y-shiftY-height+pageY,x+shiftX+width+pageX,pageHeight-y-shiftY+pageY];case 90:return[x+shiftY+pageX,pageHeight-y+shiftX+pageY,x+shiftY+height+pageX,pageHeight-y+shiftX+width+pageY];case 180:return[x-shiftX-width+pageX,pageHeight-y+shiftY+pageY,x-shiftX+pageX,pageHeight-y+shiftY+height+pageY];case 270:return[x-shiftY-height+pageX,pageHeight-y-shiftX-width+pageY,x-shiftY+pageX,pageHeight-y-shiftX+pageY];default:throw new Error(\"Invalid rotation\");}}getRectInCurrentCoords(rect,pageHeight){const[x1,y1,x2,y2]=rect;const width=x2-x1;const height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error(\"Invalid rotation\");}}onceAdded(){}isEmpty(){return false;}enableEditMode(){_classPrivateFieldSet(_isInEditMode,this,true);}disableEditMode(){_classPrivateFieldSet(_isInEditMode,this,false);}isInEditMode(){return _classPrivateFieldGet(_isInEditMode,this);}shouldGetKeyboardEvents(){return _classPrivateFieldGet(_isResizerEnabledForKeyboard,this);}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM;}rebuild(){this.div?.addEventListener(\"focusin\",_classPrivateFieldGet(_boundFocusin,this));this.div?.addEventListener(\"focusout\",_classPrivateFieldGet(_boundFocusout,this));}rotate(_angle){}serialize(isForCopying=false,context=null){(0,util.unreachable)(\"An editor must be serializable\");}static deserialize(data,parent,uiManager){const editor=new this.prototype.constructor({parent,id:parent.getNextId(),uiManager});editor.rotation=data.rotation;const[pageWidth,pageHeight]=editor.pageDimensions;const[x,y,width,height]=editor.getRectInCurrentCoords(data.rect,pageHeight);editor.x=x/pageWidth;editor.y=y/pageHeight;editor.width=width/pageWidth;editor.height=height/pageHeight;return editor;}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null);}remove(){this.div.removeEventListener(\"focusin\",_classPrivateFieldGet(_boundFocusin,this));this.div.removeEventListener(\"focusout\",_classPrivateFieldGet(_boundFocusout,this));if(!this.isEmpty()){this.commit();}if(this.parent){this.parent.remove(this);}else{this._uiManager.removeEditor(this);}if(_classPrivateFieldGet(_moveInDOMTimeout,this)){clearTimeout(_classPrivateFieldGet(_moveInDOMTimeout,this));_classPrivateFieldSet(_moveInDOMTimeout,this,null);}_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);this.removeEditToolbar();if(_classPrivateFieldGet(_telemetryTimeouts,this)){for(const timeout of _classPrivateFieldGet(_telemetryTimeouts,this).values()){clearTimeout(timeout);}_classPrivateFieldSet(_telemetryTimeouts,this,null);}this.parent=null;}get isResizable(){return false;}makeResizable(){if(this.isResizable){_assertClassBrand(_AnnotationEditor_brand,this,_createResizers).call(this);_classPrivateFieldGet(_resizersDiv,this).classList.remove(\"hidden\");(0,tools.bindEvents)(this,this.div,[\"keydown\"]);}}get toolbarPosition(){return null;}keydown(event){if(!this.isResizable||event.target!==this.div||event.key!==\"Enter\"){return;}this._uiManager.setSelected(this);_classPrivateFieldSet(_savedDimensions,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const children=_classPrivateFieldGet(_resizersDiv,this).children;if(!_classPrivateFieldGet(_allResizerDivs,this)){_classPrivateFieldSet(_allResizerDivs,this,Array.from(children));const boundResizerKeydown=_assertClassBrand(_AnnotationEditor_brand,this,_resizerKeydown).bind(this);const boundResizerBlur=_assertClassBrand(_AnnotationEditor_brand,this,_resizerBlur).bind(this);for(const div of _classPrivateFieldGet(_allResizerDivs,this)){const name=div.getAttribute(\"data-resizer-name\");div.setAttribute(\"role\",\"spinbutton\");div.addEventListener(\"keydown\",boundResizerKeydown);div.addEventListener(\"blur\",boundResizerBlur);div.addEventListener(\"focus\",_assertClassBrand(_AnnotationEditor_brand,this,_resizerFocus).bind(this,name));AnnotationEditor._l10nPromise.get(`pdfjs-editor-resizer-label-${name}`).then(msg=>div.setAttribute(\"aria-label\",msg));}}const first=_classPrivateFieldGet(_allResizerDivs,this)[0];let firstPosition=0;for(const div of children){if(div===first){break;}firstPosition++;}const nextFirstPosition=(360-this.rotation+this.parentRotation)%360/90*(_classPrivateFieldGet(_allResizerDivs,this).length/4);if(nextFirstPosition!==firstPosition){if(nextFirstPosition<firstPosition){for(let i=0;i<firstPosition-nextFirstPosition;i++){_classPrivateFieldGet(_resizersDiv,this).append(_classPrivateFieldGet(_resizersDiv,this).firstChild);}}else if(nextFirstPosition>firstPosition){for(let i=0;i<nextFirstPosition-firstPosition;i++){_classPrivateFieldGet(_resizersDiv,this).firstChild.before(_classPrivateFieldGet(_resizersDiv,this).lastChild);}}let i=0;for(const child of children){const div=_classPrivateFieldGet(_allResizerDivs,this)[i++];const name=div.getAttribute(\"data-resizer-name\");AnnotationEditor._l10nPromise.get(`pdfjs-editor-resizer-label-${name}`).then(msg=>child.setAttribute(\"aria-label\",msg));}}_assertClassBrand(_AnnotationEditor_brand,this,_setResizerTabIndex).call(this,0);_classPrivateFieldSet(_isResizerEnabledForKeyboard,this,true);_classPrivateFieldGet(_resizersDiv,this).firstChild.focus({focusVisible:true});event.preventDefault();event.stopImmediatePropagation();}_resizeWithKeyboard(x,y){if(!_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)){return;}_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointermove).call(this,_classPrivateFieldGet(_focusedResizerName,this),{movementX:x,movementY:y});}_stopResizingWithKeyboard(){_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);this.div.focus();}select(){this.makeResizable();this.div?.classList.add(\"selectedEditor\");if(!_classPrivateFieldGet(_editToolbar,this)){this.addEditToolbar().then(()=>{if(this.div?.classList.contains(\"selectedEditor\")){_classPrivateFieldGet(_editToolbar,this)?.show();}});return;}_classPrivateFieldGet(_editToolbar,this)?.show();}unselect(){_classPrivateFieldGet(_resizersDiv,this)?.classList.add(\"hidden\");this.div?.classList.remove(\"selectedEditor\");if(this.div?.contains(document.activeElement)){this._uiManager.currentLayer.div.focus({preventScroll:true});}_classPrivateFieldGet(_editToolbar,this)?.hide();}updateParams(type,value){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null;}get contentDiv(){return this.div;}get isEditing(){return _classPrivateFieldGet(_isEditing,this);}set isEditing(value){_classPrivateFieldSet(_isEditing,this,value);if(!this.parent){return;}if(value){this.parent.setSelected(this);this.parent.setActiveEditor(this);}else{this.parent.setActiveEditor(null);}}setAspectRatio(width,height){_classPrivateFieldSet(_keepAspectRatio,this,true);const aspectRatio=width/height;const{style}=this.div;style.aspectRatio=aspectRatio;style.height=\"auto\";}static get MIN_SIZE(){return 16;}static canCreateNewEmptyEditor(){return true;}get telemetryInitialData(){return{action:\"added\"};}get telemetryFinalData(){return null;}_reportTelemetry(data,mustWait=false){if(mustWait){_classPrivateFieldGet(_telemetryTimeouts,this)||_classPrivateFieldSet(_telemetryTimeouts,this,new Map());const{action}=data;let timeout=_classPrivateFieldGet(_telemetryTimeouts,this).get(action);if(timeout){clearTimeout(timeout);}timeout=setTimeout(()=>{this._reportTelemetry(data);_classPrivateFieldGet(_telemetryTimeouts,this).delete(action);if(_classPrivateFieldGet(_telemetryTimeouts,this).size===0){_classPrivateFieldSet(_telemetryTimeouts,this,null);}},AnnotationEditor._telemetryTimeout);_classPrivateFieldGet(_telemetryTimeouts,this).set(action,timeout);return;}data.type||=this.editorType;this._uiManager._eventBus.dispatch(\"reporttelemetry\",{source:this,details:{type:\"editing\",data}});}show(visible=this._isVisible){this.div.classList.toggle(\"hidden\",!visible);this._isVisible=visible;}enable(){if(this.div){this.div.tabIndex=0;}_classPrivateFieldSet(_disabled,this,false);}disable(){if(this.div){this.div.tabIndex=-1;}_classPrivateFieldSet(_disabled,this,true);}renderAnnotationElement(annotation){let content=annotation.container.querySelector(\".annotationContent\");if(!content){content=document.createElement(\"div\");content.classList.add(\"annotationContent\",this.editorType);annotation.container.prepend(content);}else if(content.nodeName===\"CANVAS\"){const canvas=content;content=document.createElement(\"div\");content.classList.add(\"annotationContent\",this.editorType);canvas.before(content);}return content;}resetAnnotationElement(annotation){const{firstChild}=annotation.container;if(firstChild.nodeName===\"DIV\"&&firstChild.classList.contains(\"annotationContent\")){firstChild.remove();}}}_AnnotationEditor=AnnotationEditor;function _translate([width,height],x,y){[x,y]=this.screenToPageTranslation(x,y);this.x+=x/width;this.y+=y/height;this.fixAndSetPosition();}function _rotatePoint(x,y,angle){switch(angle){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y];}}function _getRotationMatrix(rotation){switch(rotation){case 90:{const[pageWidth,pageHeight]=this.pageDimensions;return[0,-pageWidth/pageHeight,pageHeight/pageWidth,0];}case 180:return[-1,0,0,-1];case 270:{const[pageWidth,pageHeight]=this.pageDimensions;return[0,pageWidth/pageHeight,-pageHeight/pageWidth,0];}default:return[1,0,0,1];}}function _createResizers(){if(_classPrivateFieldGet(_resizersDiv,this)){return;}_classPrivateFieldSet(_resizersDiv,this,document.createElement(\"div\"));_classPrivateFieldGet(_resizersDiv,this).classList.add(\"resizers\");const classes=this._willKeepAspectRatio?[\"topLeft\",\"topRight\",\"bottomRight\",\"bottomLeft\"]:[\"topLeft\",\"topMiddle\",\"topRight\",\"middleRight\",\"bottomRight\",\"bottomMiddle\",\"bottomLeft\",\"middleLeft\"];for(const name of classes){const div=document.createElement(\"div\");_classPrivateFieldGet(_resizersDiv,this).append(div);div.classList.add(\"resizer\",name);div.setAttribute(\"data-resizer-name\",name);div.addEventListener(\"pointerdown\",_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointerdown).bind(this,name));div.addEventListener(\"contextmenu\",display_utils.noContextMenu);div.tabIndex=-1;}this.div.prepend(_classPrivateFieldGet(_resizersDiv,this));}function _resizerPointerdown(name,event){event.preventDefault();const{isMac}=util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}_classPrivateFieldGet(_altText2,this)?.toggle(false);const boundResizerPointermove=_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointermove).bind(this,name);const savedDraggable=this._isDraggable;this._isDraggable=false;const pointerMoveOptions={passive:true,capture:true};this.parent.togglePointerEvents(false);window.addEventListener(\"pointermove\",boundResizerPointermove,pointerMoveOptions);window.addEventListener(\"contextmenu\",display_utils.noContextMenu);const savedX=this.x;const savedY=this.y;const savedWidth=this.width;const savedHeight=this.height;const savedParentCursor=this.parent.div.style.cursor;const savedCursor=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(event.target).cursor;const pointerUpCallback=()=>{this.parent.togglePointerEvents(true);_classPrivateFieldGet(_altText2,this)?.toggle(true);this._isDraggable=savedDraggable;window.removeEventListener(\"pointerup\",pointerUpCallback);window.removeEventListener(\"blur\",pointerUpCallback);window.removeEventListener(\"pointermove\",boundResizerPointermove,pointerMoveOptions);window.removeEventListener(\"contextmenu\",display_utils.noContextMenu);this.parent.div.style.cursor=savedParentCursor;this.div.style.cursor=savedCursor;_assertClassBrand(_AnnotationEditor_brand,this,_addResizeToUndoStack).call(this,savedX,savedY,savedWidth,savedHeight);};window.addEventListener(\"pointerup\",pointerUpCallback);window.addEventListener(\"blur\",pointerUpCallback);}function _addResizeToUndoStack(savedX,savedY,savedWidth,savedHeight){const newX=this.x;const newY=this.y;const newWidth=this.width;const newHeight=this.height;if(newX===savedX&&newY===savedY&&newWidth===savedWidth&&newHeight===savedHeight){return;}this.addCommands({cmd:()=>{this.width=newWidth;this.height=newHeight;this.x=newX;this.y=newY;const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(parentWidth*newWidth,parentHeight*newHeight);this.fixAndSetPosition();},undo:()=>{this.width=savedWidth;this.height=savedHeight;this.x=savedX;this.y=savedY;const[parentWidth,parentHeight]=this.parentDimensions;this.setDims(parentWidth*savedWidth,parentHeight*savedHeight);this.fixAndSetPosition();},mustExec:true});}function _resizerPointermove(name,event){const[parentWidth,parentHeight]=this.parentDimensions;const savedX=this.x;const savedY=this.y;const savedWidth=this.width;const savedHeight=this.height;const minWidth=_AnnotationEditor.MIN_SIZE/parentWidth;const minHeight=_AnnotationEditor.MIN_SIZE/parentHeight;const round=x=>Math.round(x*10000)/10000;const rotationMatrix=_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,this.rotation);const transf=(x,y)=>[rotationMatrix[0]*x+rotationMatrix[2]*y,rotationMatrix[1]*x+rotationMatrix[3]*y];const invRotationMatrix=_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,360-this.rotation);const invTransf=(x,y)=>[invRotationMatrix[0]*x+invRotationMatrix[2]*y,invRotationMatrix[1]*x+invRotationMatrix[3]*y];let getPoint;let getOpposite;let isDiagonal=false;let isHorizontal=false;switch(name){case\"topLeft\":isDiagonal=true;getPoint=(w,h)=>[0,0];getOpposite=(w,h)=>[w,h];break;case\"topMiddle\":getPoint=(w,h)=>[w/2,0];getOpposite=(w,h)=>[w/2,h];break;case\"topRight\":isDiagonal=true;getPoint=(w,h)=>[w,0];getOpposite=(w,h)=>[0,h];break;case\"middleRight\":isHorizontal=true;getPoint=(w,h)=>[w,h/2];getOpposite=(w,h)=>[0,h/2];break;case\"bottomRight\":isDiagonal=true;getPoint=(w,h)=>[w,h];getOpposite=(w,h)=>[0,0];break;case\"bottomMiddle\":getPoint=(w,h)=>[w/2,h];getOpposite=(w,h)=>[w/2,0];break;case\"bottomLeft\":isDiagonal=true;getPoint=(w,h)=>[0,h];getOpposite=(w,h)=>[w,0];break;case\"middleLeft\":isHorizontal=true;getPoint=(w,h)=>[0,h/2];getOpposite=(w,h)=>[w,h/2];break;}const point=getPoint(savedWidth,savedHeight);const oppositePoint=getOpposite(savedWidth,savedHeight);let transfOppositePoint=transf(...oppositePoint);const oppositeX=round(savedX+transfOppositePoint[0]);const oppositeY=round(savedY+transfOppositePoint[1]);let ratioX=1;let ratioY=1;let[deltaX,deltaY]=this.screenToPageTranslation(event.movementX,event.movementY);[deltaX,deltaY]=invTransf(deltaX/parentWidth,deltaY/parentHeight);if(isDiagonal){const oldDiag=Math.hypot(savedWidth,savedHeight);ratioX=ratioY=Math.max(Math.min(Math.hypot(oppositePoint[0]-point[0]-deltaX,oppositePoint[1]-point[1]-deltaY)/oldDiag,1/savedWidth,1/savedHeight),minWidth/savedWidth,minHeight/savedHeight);}else if(isHorizontal){ratioX=Math.max(minWidth,Math.min(1,Math.abs(oppositePoint[0]-point[0]-deltaX)))/savedWidth;}else{ratioY=Math.max(minHeight,Math.min(1,Math.abs(oppositePoint[1]-point[1]-deltaY)))/savedHeight;}const newWidth=round(savedWidth*ratioX);const newHeight=round(savedHeight*ratioY);transfOppositePoint=transf(...getOpposite(newWidth,newHeight));const newX=oppositeX-transfOppositePoint[0];const newY=oppositeY-transfOppositePoint[1];this.width=newWidth;this.height=newHeight;this.x=newX;this.y=newY;this.setDims(parentWidth*newWidth,parentHeight*newHeight);this.fixAndSetPosition();}function _selectOnPointerEvent(event){const{isMac}=util.FeatureTest.platform;if(event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac){this.parent.toggleSelected(this);}else{this.parent.setSelected(this);}}function _setUpDragSession(event){const isSelected=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let pointerMoveOptions,pointerMoveCallback;if(isSelected){this.div.classList.add(\"moving\");pointerMoveOptions={passive:true,capture:true};_classPrivateFieldSet(_prevDragX,this,event.clientX);_classPrivateFieldSet(_prevDragY,this,event.clientY);pointerMoveCallback=e=>{const{clientX:x,clientY:y}=e;const[tx,ty]=this.screenToPageTranslation(x-_classPrivateFieldGet(_prevDragX,this),y-_classPrivateFieldGet(_prevDragY,this));_classPrivateFieldSet(_prevDragX,this,x);_classPrivateFieldSet(_prevDragY,this,y);this._uiManager.dragSelectedEditors(tx,ty);};window.addEventListener(\"pointermove\",pointerMoveCallback,pointerMoveOptions);}const pointerUpCallback=()=>{window.removeEventListener(\"pointerup\",pointerUpCallback);window.removeEventListener(\"blur\",pointerUpCallback);if(isSelected){this.div.classList.remove(\"moving\");window.removeEventListener(\"pointermove\",pointerMoveCallback,pointerMoveOptions);}_classPrivateFieldSet(_hasBeenClicked,this,false);if(!this._uiManager.endDragSession()){_assertClassBrand(_AnnotationEditor_brand,this,_selectOnPointerEvent).call(this,event);}};window.addEventListener(\"pointerup\",pointerUpCallback);window.addEventListener(\"blur\",pointerUpCallback);}function _resizerKeydown(event){_AnnotationEditor._resizerKeyboardManager.exec(this,event);}function _resizerBlur(event){if(_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)&&event.relatedTarget?.parentNode!==_classPrivateFieldGet(_resizersDiv,this)){_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);}}function _resizerFocus(name){_classPrivateFieldSet(_focusedResizerName,this,_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)?name:\"\");}function _setResizerTabIndex(value){if(!_classPrivateFieldGet(_allResizerDivs,this)){return;}for(const div of _classPrivateFieldGet(_allResizerDivs,this)){div.tabIndex=value;}}function _stopResizing(){_classPrivateFieldSet(_isResizerEnabledForKeyboard,this,false);_assertClassBrand(_AnnotationEditor_brand,this,_setResizerTabIndex).call(this,-1);if(_classPrivateFieldGet(_savedDimensions,this)){const{savedX,savedY,savedWidth,savedHeight}=_classPrivateFieldGet(_savedDimensions,this);_assertClassBrand(_AnnotationEditor_brand,this,_addResizeToUndoStack).call(this,savedX,savedY,savedWidth,savedHeight);_classPrivateFieldSet(_savedDimensions,this,null);}}_defineProperty(AnnotationEditor,\"_borderLineWidth\",-1);_defineProperty(AnnotationEditor,\"_colorManager\",new tools.ColorManager());_defineProperty(AnnotationEditor,\"_zIndex\",1);_defineProperty(AnnotationEditor,\"_telemetryTimeout\",1000);class FakeEditor extends AnnotationEditor{constructor(params){super(params);this.annotationElementId=params.annotationElementId;this.deleted=true;}serialize(){return{id:this.annotationElementId,deleted:true,pageIndex:this.pageIndex};}}/***/}),/***/61:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */FreeOutliner:()=>(/* binding */FreeOutliner),/* harmony export */Outliner:()=>(/* binding */Outliner)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);var _box=/*#__PURE__*/new WeakMap();var _verticalEdges=/*#__PURE__*/new WeakMap();var _intervals=/*#__PURE__*/new WeakMap();var _Outliner_brand=/*#__PURE__*/new WeakSet();class Outliner{constructor(boxes,borderWidth=0,innerMargin=0,isLTR=true){_classPrivateMethodInitSpec(this,_Outliner_brand);_classPrivateFieldInitSpec(this,_box,void 0);_classPrivateFieldInitSpec(this,_verticalEdges,[]);_classPrivateFieldInitSpec(this,_intervals,[]);let minX=Infinity;let maxX=-Infinity;let minY=Infinity;let maxY=-Infinity;const NUMBER_OF_DIGITS=4;const EPSILON=10**-NUMBER_OF_DIGITS;for(const{x,y,width,height}of boxes){const x1=Math.floor((x-borderWidth)/EPSILON)*EPSILON;const x2=Math.ceil((x+width+borderWidth)/EPSILON)*EPSILON;const y1=Math.floor((y-borderWidth)/EPSILON)*EPSILON;const y2=Math.ceil((y+height+borderWidth)/EPSILON)*EPSILON;const left=[x1,y1,y2,true];const right=[x2,y1,y2,false];_classPrivateFieldGet(_verticalEdges,this).push(left,right);minX=Math.min(minX,x1);maxX=Math.max(maxX,x2);minY=Math.min(minY,y1);maxY=Math.max(maxY,y2);}const bboxWidth=maxX-minX+2*innerMargin;const bboxHeight=maxY-minY+2*innerMargin;const shiftedMinX=minX-innerMargin;const shiftedMinY=minY-innerMargin;const lastEdge=_classPrivateFieldGet(_verticalEdges,this).at(isLTR?-1:-2);const lastPoint=[lastEdge[0],lastEdge[2]];for(const edge of _classPrivateFieldGet(_verticalEdges,this)){const[x,y1,y2]=edge;edge[0]=(x-shiftedMinX)/bboxWidth;edge[1]=(y1-shiftedMinY)/bboxHeight;edge[2]=(y2-shiftedMinY)/bboxHeight;}_classPrivateFieldSet(_box,this,{x:shiftedMinX,y:shiftedMinY,width:bboxWidth,height:bboxHeight,lastPoint});}getOutlines(){_classPrivateFieldGet(_verticalEdges,this).sort((a,b)=>a[0]-b[0]||a[1]-b[1]||a[2]-b[2]);const outlineVerticalEdges=[];for(const edge of _classPrivateFieldGet(_verticalEdges,this)){if(edge[3]){outlineVerticalEdges.push(..._assertClassBrand(_Outliner_brand,this,_breakEdge).call(this,edge));_assertClassBrand(_Outliner_brand,this,_insert).call(this,edge);}else{_assertClassBrand(_Outliner_brand,this,_remove).call(this,edge);outlineVerticalEdges.push(..._assertClassBrand(_Outliner_brand,this,_breakEdge).call(this,edge));}}return _assertClassBrand(_Outliner_brand,this,_getOutlines).call(this,outlineVerticalEdges);}}function _getOutlines(outlineVerticalEdges){const edges=[];const allEdges=new Set();for(const edge of outlineVerticalEdges){const[x,y1,y2]=edge;edges.push([x,y1,edge],[x,y2,edge]);}edges.sort((a,b)=>a[1]-b[1]||a[0]-b[0]);for(let i=0,ii=edges.length;i<ii;i+=2){const edge1=edges[i][2];const edge2=edges[i+1][2];edge1.push(edge2);edge2.push(edge1);allEdges.add(edge1);allEdges.add(edge2);}const outlines=[];let outline;while(allEdges.size>0){const edge=allEdges.values().next().value;let[x,y1,y2,edge1,edge2]=edge;allEdges.delete(edge);let lastPointX=x;let lastPointY=y1;outline=[x,y2];outlines.push(outline);while(true){let e;if(allEdges.has(edge1)){e=edge1;}else if(allEdges.has(edge2)){e=edge2;}else{break;}allEdges.delete(e);[x,y1,y2,edge1,edge2]=e;if(lastPointX!==x){outline.push(lastPointX,lastPointY,x,lastPointY===y1?y1:y2);lastPointX=x;}lastPointY=lastPointY===y1?y2:y1;}outline.push(lastPointX,lastPointY);}return new HighlightOutline(outlines,_classPrivateFieldGet(_box,this));}function _binarySearch(y){const array=_classPrivateFieldGet(_intervals,this);let start=0;let end=array.length-1;while(start<=end){const middle=start+end>>1;const y1=array[middle][0];if(y1===y){return middle;}if(y1<y){start=middle+1;}else{end=middle-1;}}return end+1;}function _insert([,y1,y2]){const index=_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y1);_classPrivateFieldGet(_intervals,this).splice(index,0,[y1,y2]);}function _remove([,y1,y2]){const index=_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y1);for(let i=index;i<_classPrivateFieldGet(_intervals,this).length;i++){const[start,end]=_classPrivateFieldGet(_intervals,this)[i];if(start!==y1){break;}if(start===y1&&end===y2){_classPrivateFieldGet(_intervals,this).splice(i,1);return;}}for(let i=index-1;i>=0;i--){const[start,end]=_classPrivateFieldGet(_intervals,this)[i];if(start!==y1){break;}if(start===y1&&end===y2){_classPrivateFieldGet(_intervals,this).splice(i,1);return;}}}function _breakEdge(edge){const[x,y1,y2]=edge;const results=[[x,y1,y2]];const index=_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y2);for(let i=0;i<index;i++){const[start,end]=_classPrivateFieldGet(_intervals,this)[i];for(let j=0,jj=results.length;j<jj;j++){const[,y3,y4]=results[j];if(end<=y3||y4<=start){continue;}if(y3>=start){if(y4>end){results[j][1]=end;}else{if(jj===1){return[];}results.splice(j,1);j--;jj--;}continue;}results[j][2]=start;if(y4>end){results.push([x,end,y4]);}}}return results;}class Outline{toSVGPath(){throw new Error(\"Abstract method `toSVGPath` must be implemented.\");}get box(){throw new Error(\"Abstract getter `box` must be implemented.\");}serialize(_bbox,_rotation){throw new Error(\"Abstract method `serialize` must be implemented.\");}get free(){return this instanceof FreeHighlightOutline;}}var _box2=/*#__PURE__*/new WeakMap();var _outlines=/*#__PURE__*/new WeakMap();class HighlightOutline extends Outline{constructor(outlines,box){super();_classPrivateFieldInitSpec(this,_box2,void 0);_classPrivateFieldInitSpec(this,_outlines,void 0);_classPrivateFieldSet(_outlines,this,outlines);_classPrivateFieldSet(_box2,this,box);}toSVGPath(){const buffer=[];for(const polygon of _classPrivateFieldGet(_outlines,this)){let[prevX,prevY]=polygon;buffer.push(`M${prevX} ${prevY}`);for(let i=2;i<polygon.length;i+=2){const x=polygon[i];const y=polygon[i+1];if(x===prevX){buffer.push(`V${y}`);prevY=y;}else if(y===prevY){buffer.push(`H${x}`);prevX=x;}}buffer.push(\"Z\");}return buffer.join(\" \");}serialize([blX,blY,trX,trY],_rotation){const outlines=[];const width=trX-blX;const height=trY-blY;for(const outline of _classPrivateFieldGet(_outlines,this)){const points=new Array(outline.length);for(let i=0;i<outline.length;i+=2){points[i]=blX+outline[i]*width;points[i+1]=trY-outline[i+1]*height;}outlines.push(points);}return outlines;}get box(){return _classPrivateFieldGet(_box2,this);}}var _box3=/*#__PURE__*/new WeakMap();var _bottom=/*#__PURE__*/new WeakMap();var _innerMargin=/*#__PURE__*/new WeakMap();var _isLTR=/*#__PURE__*/new WeakMap();var _top=/*#__PURE__*/new WeakMap();var _last=/*#__PURE__*/new WeakMap();var _lastX=/*#__PURE__*/new WeakMap();var _lastY=/*#__PURE__*/new WeakMap();var _min=/*#__PURE__*/new WeakMap();var _min_dist=/*#__PURE__*/new WeakMap();var _scaleFactor=/*#__PURE__*/new WeakMap();var _thickness2=/*#__PURE__*/new WeakMap();var _points=/*#__PURE__*/new WeakMap();var _FreeOutliner_brand=/*#__PURE__*/new WeakSet();class FreeOutliner{constructor({x:_x,y:_y},box,scaleFactor,thickness,isLTR,innerMargin=0){_classPrivateMethodInitSpec(this,_FreeOutliner_brand);_classPrivateFieldInitSpec(this,_box3,void 0);_classPrivateFieldInitSpec(this,_bottom,[]);_classPrivateFieldInitSpec(this,_innerMargin,void 0);_classPrivateFieldInitSpec(this,_isLTR,void 0);_classPrivateFieldInitSpec(this,_top,[]);_classPrivateFieldInitSpec(this,_last,new Float64Array(18));_classPrivateFieldInitSpec(this,_lastX,void 0);_classPrivateFieldInitSpec(this,_lastY,void 0);_classPrivateFieldInitSpec(this,_min,void 0);_classPrivateFieldInitSpec(this,_min_dist,void 0);_classPrivateFieldInitSpec(this,_scaleFactor,void 0);_classPrivateFieldInitSpec(this,_thickness2,void 0);_classPrivateFieldInitSpec(this,_points,[]);_classPrivateFieldSet(_box3,this,box);_classPrivateFieldSet(_thickness2,this,thickness*scaleFactor);_classPrivateFieldSet(_isLTR,this,isLTR);_classPrivateFieldGet(_last,this).set([NaN,NaN,NaN,NaN,_x,_y],6);_classPrivateFieldSet(_innerMargin,this,innerMargin);_classPrivateFieldSet(_min_dist,this,_MIN_DIST._*scaleFactor);_classPrivateFieldSet(_min,this,_MIN._*scaleFactor);_classPrivateFieldSet(_scaleFactor,this,scaleFactor);_classPrivateFieldGet(_points,this).push(_x,_y);}get free(){return true;}isEmpty(){return isNaN(_classPrivateFieldGet(_last,this)[8]);}add({x,y}){_classPrivateFieldSet(_lastX,this,x);_classPrivateFieldSet(_lastY,this,y);const[layerX,layerY,layerWidth,layerHeight]=_classPrivateFieldGet(_box3,this);let[x1,y1,x2,y2]=_classPrivateFieldGet(_last,this).subarray(8,12);const diffX=x-x2;const diffY=y-y2;const d=Math.hypot(diffX,diffY);if(d<_classPrivateFieldGet(_min,this)){return false;}const diffD=d-_classPrivateFieldGet(_min_dist,this);const K=diffD/d;const shiftX=K*diffX;const shiftY=K*diffY;let x0=x1;let y0=y1;x1=x2;y1=y2;x2+=shiftX;y2+=shiftY;_classPrivateFieldGet(_points,this)?.push(x,y);const nX=-shiftY/diffD;const nY=shiftX/diffD;const thX=nX*_classPrivateFieldGet(_thickness2,this);const thY=nY*_classPrivateFieldGet(_thickness2,this);_classPrivateFieldGet(_last,this).set(_classPrivateFieldGet(_last,this).subarray(2,8),0);_classPrivateFieldGet(_last,this).set([x2+thX,y2+thY],4);_classPrivateFieldGet(_last,this).set(_classPrivateFieldGet(_last,this).subarray(14,18),12);_classPrivateFieldGet(_last,this).set([x2-thX,y2-thY],16);if(isNaN(_classPrivateFieldGet(_last,this)[6])){if(_classPrivateFieldGet(_top,this).length===0){_classPrivateFieldGet(_last,this).set([x1+thX,y1+thY],2);_classPrivateFieldGet(_top,this).push(NaN,NaN,NaN,NaN,(x1+thX-layerX)/layerWidth,(y1+thY-layerY)/layerHeight);_classPrivateFieldGet(_last,this).set([x1-thX,y1-thY],14);_classPrivateFieldGet(_bottom,this).push(NaN,NaN,NaN,NaN,(x1-thX-layerX)/layerWidth,(y1-thY-layerY)/layerHeight);}_classPrivateFieldGet(_last,this).set([x0,y0,x1,y1,x2,y2],6);return!this.isEmpty();}_classPrivateFieldGet(_last,this).set([x0,y0,x1,y1,x2,y2],6);const angle=Math.abs(Math.atan2(y0-y1,x0-x1)-Math.atan2(shiftY,shiftX));if(angle<Math.PI/2){[x1,y1,x2,y2]=_classPrivateFieldGet(_last,this).subarray(2,6);_classPrivateFieldGet(_top,this).push(NaN,NaN,NaN,NaN,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);[x1,y1,x0,y0]=_classPrivateFieldGet(_last,this).subarray(14,18);_classPrivateFieldGet(_bottom,this).push(NaN,NaN,NaN,NaN,((x0+x1)/2-layerX)/layerWidth,((y0+y1)/2-layerY)/layerHeight);return true;}[x0,y0,x1,y1,x2,y2]=_classPrivateFieldGet(_last,this).subarray(0,6);_classPrivateFieldGet(_top,this).push(((x0+5*x1)/6-layerX)/layerWidth,((y0+5*y1)/6-layerY)/layerHeight,((5*x1+x2)/6-layerX)/layerWidth,((5*y1+y2)/6-layerY)/layerHeight,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);[x2,y2,x1,y1,x0,y0]=_classPrivateFieldGet(_last,this).subarray(12,18);_classPrivateFieldGet(_bottom,this).push(((x0+5*x1)/6-layerX)/layerWidth,((y0+5*y1)/6-layerY)/layerHeight,((5*x1+x2)/6-layerX)/layerWidth,((5*y1+y2)/6-layerY)/layerHeight,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);return true;}toSVGPath(){if(this.isEmpty()){return\"\";}const top=_classPrivateFieldGet(_top,this);const bottom=_classPrivateFieldGet(_bottom,this);const lastTop=_classPrivateFieldGet(_last,this).subarray(4,6);const lastBottom=_classPrivateFieldGet(_last,this).subarray(16,18);const[x,y,width,height]=_classPrivateFieldGet(_box3,this);const[lastTopX,lastTopY,lastBottomX,lastBottomY]=_assertClassBrand(_FreeOutliner_brand,this,_getLastCoords).call(this);if(isNaN(_classPrivateFieldGet(_last,this)[6])&&!this.isEmpty()){return`M${(_classPrivateFieldGet(_last,this)[2]-x)/width} ${(_classPrivateFieldGet(_last,this)[3]-y)/height} L${(_classPrivateFieldGet(_last,this)[4]-x)/width} ${(_classPrivateFieldGet(_last,this)[5]-y)/height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(_classPrivateFieldGet(_last,this)[16]-x)/width} ${(_classPrivateFieldGet(_last,this)[17]-y)/height} L${(_classPrivateFieldGet(_last,this)[14]-x)/width} ${(_classPrivateFieldGet(_last,this)[15]-y)/height} Z`;}const buffer=[];buffer.push(`M${top[4]} ${top[5]}`);for(let i=6;i<top.length;i+=6){if(isNaN(top[i])){buffer.push(`L${top[i+4]} ${top[i+5]}`);}else{buffer.push(`C${top[i]} ${top[i+1]} ${top[i+2]} ${top[i+3]} ${top[i+4]} ${top[i+5]}`);}}buffer.push(`L${(lastTop[0]-x)/width} ${(lastTop[1]-y)/height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0]-x)/width} ${(lastBottom[1]-y)/height}`);for(let i=bottom.length-6;i>=6;i-=6){if(isNaN(bottom[i])){buffer.push(`L${bottom[i+4]} ${bottom[i+5]}`);}else{buffer.push(`C${bottom[i]} ${bottom[i+1]} ${bottom[i+2]} ${bottom[i+3]} ${bottom[i+4]} ${bottom[i+5]}`);}}buffer.push(`L${bottom[4]} ${bottom[5]} Z`);return buffer.join(\" \");}getOutlines(){const top=_classPrivateFieldGet(_top,this);const bottom=_classPrivateFieldGet(_bottom,this);const last=_classPrivateFieldGet(_last,this);const lastTop=last.subarray(4,6);const lastBottom=last.subarray(16,18);const[layerX,layerY,layerWidth,layerHeight]=_classPrivateFieldGet(_box3,this);const points=new Float64Array((_classPrivateFieldGet(_points,this)?.length??0)+2);for(let i=0,ii=points.length-2;i<ii;i+=2){points[i]=(_classPrivateFieldGet(_points,this)[i]-layerX)/layerWidth;points[i+1]=(_classPrivateFieldGet(_points,this)[i+1]-layerY)/layerHeight;}points[points.length-2]=(_classPrivateFieldGet(_lastX,this)-layerX)/layerWidth;points[points.length-1]=(_classPrivateFieldGet(_lastY,this)-layerY)/layerHeight;const[lastTopX,lastTopY,lastBottomX,lastBottomY]=_assertClassBrand(_FreeOutliner_brand,this,_getLastCoords).call(this);if(isNaN(last[6])&&!this.isEmpty()){const outline=new Float64Array(36);outline.set([NaN,NaN,NaN,NaN,(last[2]-layerX)/layerWidth,(last[3]-layerY)/layerHeight,NaN,NaN,NaN,NaN,(last[4]-layerX)/layerWidth,(last[5]-layerY)/layerHeight,NaN,NaN,NaN,NaN,lastTopX,lastTopY,NaN,NaN,NaN,NaN,lastBottomX,lastBottomY,NaN,NaN,NaN,NaN,(last[16]-layerX)/layerWidth,(last[17]-layerY)/layerHeight,NaN,NaN,NaN,NaN,(last[14]-layerX)/layerWidth,(last[15]-layerY)/layerHeight],0);return new FreeHighlightOutline(outline,points,_classPrivateFieldGet(_box3,this),_classPrivateFieldGet(_scaleFactor,this),_classPrivateFieldGet(_innerMargin,this),_classPrivateFieldGet(_isLTR,this));}const outline=new Float64Array(_classPrivateFieldGet(_top,this).length+24+_classPrivateFieldGet(_bottom,this).length);let N=top.length;for(let i=0;i<N;i+=2){if(isNaN(top[i])){outline[i]=outline[i+1]=NaN;continue;}outline[i]=top[i];outline[i+1]=top[i+1];}outline.set([NaN,NaN,NaN,NaN,(lastTop[0]-layerX)/layerWidth,(lastTop[1]-layerY)/layerHeight,NaN,NaN,NaN,NaN,lastTopX,lastTopY,NaN,NaN,NaN,NaN,lastBottomX,lastBottomY,NaN,NaN,NaN,NaN,(lastBottom[0]-layerX)/layerWidth,(lastBottom[1]-layerY)/layerHeight],N);N+=24;for(let i=bottom.length-6;i>=6;i-=6){for(let j=0;j<6;j+=2){if(isNaN(bottom[i+j])){outline[N]=outline[N+1]=NaN;N+=2;continue;}outline[N]=bottom[i+j];outline[N+1]=bottom[i+j+1];N+=2;}}outline.set([NaN,NaN,NaN,NaN,bottom[4],bottom[5]],N);return new FreeHighlightOutline(outline,points,_classPrivateFieldGet(_box3,this),_classPrivateFieldGet(_scaleFactor,this),_classPrivateFieldGet(_innerMargin,this),_classPrivateFieldGet(_isLTR,this));}}function _getLastCoords(){const lastTop=_classPrivateFieldGet(_last,this).subarray(4,6);const lastBottom=_classPrivateFieldGet(_last,this).subarray(16,18);const[x,y,width,height]=_classPrivateFieldGet(_box3,this);return[(_classPrivateFieldGet(_lastX,this)+(lastTop[0]-lastBottom[0])/2-x)/width,(_classPrivateFieldGet(_lastY,this)+(lastTop[1]-lastBottom[1])/2-y)/height,(_classPrivateFieldGet(_lastX,this)+(lastBottom[0]-lastTop[0])/2-x)/width,(_classPrivateFieldGet(_lastY,this)+(lastBottom[1]-lastTop[1])/2-y)/height];}var _MIN_DIST={_:8};var _MIN_DIFF={_:2};var _MIN={_:_MIN_DIST._+_MIN_DIFF._};var _box4=/*#__PURE__*/new WeakMap();var _bbox2=/*#__PURE__*/new WeakMap();var _innerMargin2=/*#__PURE__*/new WeakMap();var _isLTR2=/*#__PURE__*/new WeakMap();var _points2=/*#__PURE__*/new WeakMap();var _scaleFactor2=/*#__PURE__*/new WeakMap();var _outline=/*#__PURE__*/new WeakMap();var _FreeHighlightOutline_brand=/*#__PURE__*/new WeakSet();class FreeHighlightOutline extends Outline{constructor(_outline2,points,box,scaleFactor,innerMargin,_isLTR3){super();_classPrivateMethodInitSpec(this,_FreeHighlightOutline_brand);_classPrivateFieldInitSpec(this,_box4,void 0);_classPrivateFieldInitSpec(this,_bbox2,null);_classPrivateFieldInitSpec(this,_innerMargin2,void 0);_classPrivateFieldInitSpec(this,_isLTR2,void 0);_classPrivateFieldInitSpec(this,_points2,void 0);_classPrivateFieldInitSpec(this,_scaleFactor2,void 0);_classPrivateFieldInitSpec(this,_outline,void 0);_classPrivateFieldSet(_outline,this,_outline2);_classPrivateFieldSet(_points2,this,points);_classPrivateFieldSet(_box4,this,box);_classPrivateFieldSet(_scaleFactor2,this,scaleFactor);_classPrivateFieldSet(_innerMargin2,this,innerMargin);_classPrivateFieldSet(_isLTR2,this,_isLTR3);_assertClassBrand(_FreeHighlightOutline_brand,this,_computeMinMax).call(this,_isLTR3);const{x:_x2,y:_y2,width:_width2,height:_height2}=_classPrivateFieldGet(_bbox2,this);for(let i=0,ii=_outline2.length;i<ii;i+=2){_outline2[i]=(_outline2[i]-_x2)/_width2;_outline2[i+1]=(_outline2[i+1]-_y2)/_height2;}for(let i=0,ii=points.length;i<ii;i+=2){points[i]=(points[i]-_x2)/_width2;points[i+1]=(points[i+1]-_y2)/_height2;}}toSVGPath(){const buffer=[`M${_classPrivateFieldGet(_outline,this)[4]} ${_classPrivateFieldGet(_outline,this)[5]}`];for(let i=6,ii=_classPrivateFieldGet(_outline,this).length;i<ii;i+=6){if(isNaN(_classPrivateFieldGet(_outline,this)[i])){buffer.push(`L${_classPrivateFieldGet(_outline,this)[i+4]} ${_classPrivateFieldGet(_outline,this)[i+5]}`);continue;}buffer.push(`C${_classPrivateFieldGet(_outline,this)[i]} ${_classPrivateFieldGet(_outline,this)[i+1]} ${_classPrivateFieldGet(_outline,this)[i+2]} ${_classPrivateFieldGet(_outline,this)[i+3]} ${_classPrivateFieldGet(_outline,this)[i+4]} ${_classPrivateFieldGet(_outline,this)[i+5]}`);}buffer.push(\"Z\");return buffer.join(\" \");}serialize([blX,blY,trX,trY],rotation){const width=trX-blX;const height=trY-blY;let outline;let points;switch(rotation){case 0:outline=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescale).call(this,_classPrivateFieldGet(_outline,this),blX,trY,width,-height);points=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescale).call(this,_classPrivateFieldGet(_points2,this),blX,trY,width,-height);break;case 90:outline=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescaleAndSwap).call(this,_classPrivateFieldGet(_outline,this),blX,blY,width,height);points=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescaleAndSwap).call(this,_classPrivateFieldGet(_points2,this),blX,blY,width,height);break;case 180:outline=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescale).call(this,_classPrivateFieldGet(_outline,this),trX,blY,-width,height);points=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescale).call(this,_classPrivateFieldGet(_points2,this),trX,blY,-width,height);break;case 270:outline=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescaleAndSwap).call(this,_classPrivateFieldGet(_outline,this),trX,trY,-width,-height);points=_assertClassBrand(_FreeHighlightOutline_brand,this,_rescaleAndSwap).call(this,_classPrivateFieldGet(_points2,this),trX,trY,-width,-height);break;}return{outline:Array.from(outline),points:[Array.from(points)]};}get box(){return _classPrivateFieldGet(_bbox2,this);}getNewOutline(thickness,innerMargin){const{x,y,width,height}=_classPrivateFieldGet(_bbox2,this);const[layerX,layerY,layerWidth,layerHeight]=_classPrivateFieldGet(_box4,this);const sx=width*layerWidth;const sy=height*layerHeight;const tx=x*layerWidth+layerX;const ty=y*layerHeight+layerY;const outliner=new FreeOutliner({x:_classPrivateFieldGet(_points2,this)[0]*sx+tx,y:_classPrivateFieldGet(_points2,this)[1]*sy+ty},_classPrivateFieldGet(_box4,this),_classPrivateFieldGet(_scaleFactor2,this),thickness,_classPrivateFieldGet(_isLTR2,this),innerMargin??_classPrivateFieldGet(_innerMargin2,this));for(let i=2;i<_classPrivateFieldGet(_points2,this).length;i+=2){outliner.add({x:_classPrivateFieldGet(_points2,this)[i]*sx+tx,y:_classPrivateFieldGet(_points2,this)[i+1]*sy+ty});}return outliner.getOutlines();}}/***/function _rescale(src,tx,ty,sx,sy){const dest=new Float64Array(src.length);for(let i=0,ii=src.length;i<ii;i+=2){dest[i]=tx+src[i]*sx;dest[i+1]=ty+src[i+1]*sy;}return dest;}function _rescaleAndSwap(src,tx,ty,sx,sy){const dest=new Float64Array(src.length);for(let i=0,ii=src.length;i<ii;i+=2){dest[i]=tx+src[i+1]*sx;dest[i+1]=ty+src[i]*sy;}return dest;}function _computeMinMax(isLTR){const outline=_classPrivateFieldGet(_outline,this);let lastX=outline[4];let lastY=outline[5];let minX=lastX;let minY=lastY;let maxX=lastX;let maxY=lastY;let lastPointX=lastX;let lastPointY=lastY;const ltrCallback=isLTR?Math.max:Math.min;for(let i=6,ii=outline.length;i<ii;i+=6){if(isNaN(outline[i])){minX=Math.min(minX,outline[i+4]);minY=Math.min(minY,outline[i+5]);maxX=Math.max(maxX,outline[i+4]);maxY=Math.max(maxY,outline[i+5]);if(lastPointY<outline[i+5]){lastPointX=outline[i+4];lastPointY=outline[i+5];}else if(lastPointY===outline[i+5]){lastPointX=ltrCallback(lastPointX,outline[i+4]);}}else{const bbox=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util.bezierBoundingBox(lastX,lastY,...outline.slice(i,i+6));minX=Math.min(minX,bbox[0]);minY=Math.min(minY,bbox[1]);maxX=Math.max(maxX,bbox[2]);maxY=Math.max(maxY,bbox[3]);if(lastPointY<bbox[3]){lastPointX=bbox[2];lastPointY=bbox[3];}else if(lastPointY===bbox[3]){lastPointX=ltrCallback(lastPointX,bbox[2]);}}lastX=outline[i+4];lastY=outline[i+5];}const x=minX-_classPrivateFieldGet(_innerMargin2,this),y=minY-_classPrivateFieldGet(_innerMargin2,this),width=maxX-minX+2*_classPrivateFieldGet(_innerMargin2,this),height=maxY-minY+2*_classPrivateFieldGet(_innerMargin2,this);_classPrivateFieldSet(_bbox2,this,{x,y,width,height,lastPoint:[lastPointX,lastPointY]});}}),/***/362:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */EditorToolbar:()=>(/* binding */EditorToolbar),/* harmony export */HighlightToolbar:()=>(/* binding */HighlightToolbar)/* harmony export */});/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(419);var _toolbar=/*#__PURE__*/new WeakMap();var _colorPicker2=/*#__PURE__*/new WeakMap();var _editor3=/*#__PURE__*/new WeakMap();var _buttons=/*#__PURE__*/new WeakMap();var _EditorToolbar_brand=/*#__PURE__*/new WeakSet();class EditorToolbar{constructor(editor){_classPrivateMethodInitSpec(this,_EditorToolbar_brand);_classPrivateFieldInitSpec(this,_toolbar,null);_classPrivateFieldInitSpec(this,_colorPicker2,null);_classPrivateFieldInitSpec(this,_editor3,void 0);_classPrivateFieldInitSpec(this,_buttons,null);_classPrivateFieldSet(_editor3,this,editor);}render(){const editToolbar=_classPrivateFieldSet(_toolbar,this,document.createElement(\"div\"));editToolbar.className=\"editToolbar\";editToolbar.setAttribute(\"role\",\"toolbar\");editToolbar.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_0__.noContextMenu);editToolbar.addEventListener(\"pointerdown\",_pointerDown2);const buttons=_classPrivateFieldSet(_buttons,this,document.createElement(\"div\"));buttons.className=\"buttons\";editToolbar.append(buttons);const position=_classPrivateFieldGet(_editor3,this).toolbarPosition;if(position){const{style}=editToolbar;const x=_classPrivateFieldGet(_editor3,this)._uiManager.direction===\"ltr\"?1-position[0]:position[0];style.insetInlineEnd=`${100*x}%`;style.top=`calc(${100*position[1]}% + var(--editor-toolbar-vert-offset))`;}_assertClassBrand(_EditorToolbar_brand,this,_addDeleteButton).call(this);return editToolbar;}hide(){_classPrivateFieldGet(_toolbar,this).classList.add(\"hidden\");_classPrivateFieldGet(_colorPicker2,this)?.hideDropdown();}show(){_classPrivateFieldGet(_toolbar,this).classList.remove(\"hidden\");}addAltTextButton(button){_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);_classPrivateFieldGet(_buttons,this).prepend(button,_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));}addColorPicker(colorPicker){_classPrivateFieldSet(_colorPicker2,this,colorPicker);const button=colorPicker.renderButton();_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);_classPrivateFieldGet(_buttons,this).prepend(button,_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));}remove(){_classPrivateFieldGet(_toolbar,this).remove();_classPrivateFieldGet(_colorPicker2,this)?.destroy();_classPrivateFieldSet(_colorPicker2,this,null);}}function _pointerDown2(e){e.stopPropagation();}function _focusIn(e){_classPrivateFieldGet(_editor3,this)._focusEventsAllowed=false;e.preventDefault();e.stopPropagation();}function _focusOut(e){_classPrivateFieldGet(_editor3,this)._focusEventsAllowed=true;e.preventDefault();e.stopPropagation();}function _addListenersToElement(element){element.addEventListener(\"focusin\",_assertClassBrand(_EditorToolbar_brand,this,_focusIn).bind(this),{capture:true});element.addEventListener(\"focusout\",_assertClassBrand(_EditorToolbar_brand,this,_focusOut).bind(this),{capture:true});element.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_0__.noContextMenu);}function _addDeleteButton(){const button=document.createElement(\"button\");button.className=\"delete\";button.tabIndex=0;button.setAttribute(\"data-l10n-id\",`pdfjs-editor-remove-${_classPrivateFieldGet(_editor3,this).editorType}-button`);_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);button.addEventListener(\"click\",e=>{_classPrivateFieldGet(_editor3,this)._uiManager.delete();});_classPrivateFieldGet(_buttons,this).append(button);}function _get_divider(_this7){const divider=document.createElement(\"div\");divider.className=\"divider\";return divider;}var _buttons2=/*#__PURE__*/new WeakMap();var _toolbar2=/*#__PURE__*/new WeakMap();var _uiManager4=/*#__PURE__*/new WeakMap();var _HighlightToolbar_brand=/*#__PURE__*/new WeakSet();class HighlightToolbar{constructor(uiManager){_classPrivateMethodInitSpec(this,_HighlightToolbar_brand);_classPrivateFieldInitSpec(this,_buttons2,null);_classPrivateFieldInitSpec(this,_toolbar2,null);_classPrivateFieldInitSpec(this,_uiManager4,void 0);_classPrivateFieldSet(_uiManager4,this,uiManager);}show(parent,boxes,isLTR){const[x,y]=_assertClassBrand(_HighlightToolbar_brand,this,_getLastPoint).call(this,boxes,isLTR);const{style}=_classPrivateFieldGet(_toolbar2,this)||_classPrivateFieldSet(_toolbar2,this,_assertClassBrand(_HighlightToolbar_brand,this,_render).call(this));parent.append(_classPrivateFieldGet(_toolbar2,this));style.insetInlineEnd=`${100*x}%`;style.top=`calc(${100*y}% + var(--editor-toolbar-vert-offset))`;}hide(){_classPrivateFieldGet(_toolbar2,this).remove();}}/***/function _render(){const editToolbar=_classPrivateFieldSet(_toolbar2,this,document.createElement(\"div\"));editToolbar.className=\"editToolbar\";editToolbar.setAttribute(\"role\",\"toolbar\");editToolbar.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_0__.noContextMenu);const buttons=_classPrivateFieldSet(_buttons2,this,document.createElement(\"div\"));buttons.className=\"buttons\";editToolbar.append(buttons);_assertClassBrand(_HighlightToolbar_brand,this,_addHighlightButton).call(this);return editToolbar;}function _getLastPoint(boxes,isLTR){let lastY=0;let lastX=0;for(const box of boxes){const y=box.y+box.height;if(y<lastY){continue;}const x=box.x+(isLTR?box.width:0);if(y>lastY){lastX=x;lastY=y;continue;}if(isLTR){if(x>lastX){lastX=x;}}else if(x<lastX){lastX=x;}}return[isLTR?1-lastX:lastX,lastY];}function _addHighlightButton(){const button=document.createElement(\"button\");button.className=\"highlightButton\";button.tabIndex=0;button.setAttribute(\"data-l10n-id\",`pdfjs-highlight-floating-button1`);const span=document.createElement(\"span\");button.append(span);span.className=\"visuallyHidden\";span.setAttribute(\"data-l10n-id\",\"pdfjs-highlight-floating-button-label\");button.addEventListener(\"contextmenu\",_display_utils_js__WEBPACK_IMPORTED_MODULE_0__.noContextMenu);button.addEventListener(\"click\",()=>{_classPrivateFieldGet(_uiManager4,this).highlightSelection(\"floating_button\");});_classPrivateFieldGet(_buttons2,this).append(button);}}),/***/830:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _ImageManager;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */AnnotationEditorUIManager:()=>(/* binding */AnnotationEditorUIManager),/* harmony export */ColorManager:()=>(/* binding */ColorManager),/* harmony export */KeyboardManager:()=>(/* binding */KeyboardManager),/* harmony export */bindEvents:()=>(/* binding */bindEvents),/* harmony export */opacityToHex:()=>(/* binding */opacityToHex)/* harmony export */});/* unused harmony export CommandManager */ /* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(419);/* harmony import */var _toolbar_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(362);function bindEvents(obj,element,names){for(const name of names){element.addEventListener(name,obj[name].bind(obj));}}function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,\"0\");}var _id4=/*#__PURE__*/new WeakMap();class IdManager{constructor(){_classPrivateFieldInitSpec(this,_id4,0);}get id(){var _this$id7,_this$id8;return`${_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorPrefix}${(_classPrivateFieldSet(_id4,this,(_this$id7=_classPrivateFieldGet(_id4,this),_this$id8=_this$id7++,_this$id7)),_this$id8)}`;}}var _baseId=/*#__PURE__*/new WeakMap();var _id5=/*#__PURE__*/new WeakMap();var _cache2=/*#__PURE__*/new WeakMap();var _ImageManager_brand=/*#__PURE__*/new WeakSet();class ImageManager{constructor(){_classPrivateMethodInitSpec(this,_ImageManager_brand);_classPrivateFieldInitSpec(this,_baseId,(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.getUuid)());_classPrivateFieldInitSpec(this,_id5,0);_classPrivateFieldInitSpec(this,_cache2,null);}static get _isSVGFittingCanvas(){const svg=`data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;const canvas=new OffscreenCanvas(1,3);const ctx=canvas.getContext(\"2d\");const image=new Image();image.src=svg;const promise=image.decode().then(()=>{ctx.drawImage(image,0,0,1,1,0,0,1,3);return new Uint32Array(ctx.getImageData(0,0,1,1).data.buffer)[0]===0;});return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_isSVGFittingCanvas\",promise);}async getFromFile(file){const{lastModified,name,size,type}=file;return _assertClassBrand(_ImageManager_brand,this,_get).call(this,`${lastModified}_${name}_${size}_${type}`,file);}async getFromUrl(url){return _assertClassBrand(_ImageManager_brand,this,_get).call(this,url,url);}async getFromId(id){_classPrivateFieldGet(_cache2,this)||_classPrivateFieldSet(_cache2,this,new Map());const data=_classPrivateFieldGet(_cache2,this).get(id);if(!data){return null;}if(data.bitmap){data.refCounter+=1;return data;}if(data.file){return this.getFromFile(data.file);}return this.getFromUrl(data.url);}getSvgUrl(id){const data=_classPrivateFieldGet(_cache2,this).get(id);if(!data?.isSvg){return null;}return data.svgUrl;}deleteId(id){_classPrivateFieldGet(_cache2,this)||_classPrivateFieldSet(_cache2,this,new Map());const data=_classPrivateFieldGet(_cache2,this).get(id);if(!data){return;}data.refCounter-=1;if(data.refCounter!==0){return;}data.bitmap=null;}isValidId(id){return id.startsWith(`image_${_classPrivateFieldGet(_baseId,this)}_`);}}_ImageManager=ImageManager;async function _get(key,rawData){_classPrivateFieldGet(_cache2,this)||_classPrivateFieldSet(_cache2,this,new Map());let data=_classPrivateFieldGet(_cache2,this).get(key);if(data===null){return null;}if(data?.bitmap){data.refCounter+=1;return data;}try{var _this$id9,_this$id10;data||={bitmap:null,id:`image_${_classPrivateFieldGet(_baseId,this)}_${(_classPrivateFieldSet(_id5,this,(_this$id9=_classPrivateFieldGet(_id5,this),_this$id10=_this$id9++,_this$id9)),_this$id10)}`,refCounter:0,isSvg:false};let image;if(typeof rawData===\"string\"){data.url=rawData;image=await(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.fetchData)(rawData,\"blob\");}else{image=data.file=rawData;}if(image.type===\"image/svg+xml\"){const mustRemoveAspectRatioPromise=_ImageManager._isSVGFittingCanvas;const fileReader=new FileReader();const imageElement=new Image();const imagePromise=new Promise((resolve,reject)=>{imageElement.onload=()=>{data.bitmap=imageElement;data.isSvg=true;resolve();};fileReader.onload=async()=>{const url=data.svgUrl=fileReader.result;imageElement.src=(await mustRemoveAspectRatioPromise)?`${url}#svgView(preserveAspectRatio(none))`:url;};imageElement.onerror=fileReader.onerror=reject;});fileReader.readAsDataURL(image);await imagePromise;}else{data.bitmap=await createImageBitmap(image);}data.refCounter=1;}catch(e){console.error(e);data=null;}_classPrivateFieldGet(_cache2,this).set(key,data);if(data){_classPrivateFieldGet(_cache2,this).set(data.id,data);}return data;}var _commands=/*#__PURE__*/new WeakMap();var _locked=/*#__PURE__*/new WeakMap();var _maxSize=/*#__PURE__*/new WeakMap();var _position=/*#__PURE__*/new WeakMap();class CommandManager{constructor(maxSize=128){_classPrivateFieldInitSpec(this,_commands,[]);_classPrivateFieldInitSpec(this,_locked,false);_classPrivateFieldInitSpec(this,_maxSize,void 0);_classPrivateFieldInitSpec(this,_position,-1);_classPrivateFieldSet(_maxSize,this,maxSize);}add({cmd,undo,post,mustExec,type=NaN,overwriteIfSameType=false,keepUndo=false}){if(mustExec){cmd();}if(_classPrivateFieldGet(_locked,this)){return;}const save={cmd,undo,post,type};if(_classPrivateFieldGet(_position,this)===-1){if(_classPrivateFieldGet(_commands,this).length>0){_classPrivateFieldGet(_commands,this).length=0;}_classPrivateFieldSet(_position,this,0);_classPrivateFieldGet(_commands,this).push(save);return;}if(overwriteIfSameType&&_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)].type===type){if(keepUndo){save.undo=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)].undo;}_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)]=save;return;}const next=_classPrivateFieldGet(_position,this)+1;if(next===_classPrivateFieldGet(_maxSize,this)){_classPrivateFieldGet(_commands,this).splice(0,1);}else{_classPrivateFieldSet(_position,this,next);if(next<_classPrivateFieldGet(_commands,this).length){_classPrivateFieldGet(_commands,this).splice(next);}}_classPrivateFieldGet(_commands,this).push(save);}undo(){if(_classPrivateFieldGet(_position,this)===-1){return;}_classPrivateFieldSet(_locked,this,true);const{undo,post}=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)];undo();post?.();_classPrivateFieldSet(_locked,this,false);_classPrivateFieldSet(_position,this,_classPrivateFieldGet(_position,this)-1);}redo(){if(_classPrivateFieldGet(_position,this)<_classPrivateFieldGet(_commands,this).length-1){_classPrivateFieldSet(_position,this,_classPrivateFieldGet(_position,this)+1);_classPrivateFieldSet(_locked,this,true);const{cmd,post}=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)];cmd();post?.();_classPrivateFieldSet(_locked,this,false);}}hasSomethingToUndo(){return _classPrivateFieldGet(_position,this)!==-1;}hasSomethingToRedo(){return _classPrivateFieldGet(_position,this)<_classPrivateFieldGet(_commands,this).length-1;}destroy(){_classPrivateFieldSet(_commands,this,null);}}var _KeyboardManager_brand=/*#__PURE__*/new WeakSet();class KeyboardManager{constructor(callbacks){_classPrivateMethodInitSpec(this,_KeyboardManager_brand);this.buffer=[];this.callbacks=new Map();this.allKeys=new Set();const{isMac}=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FeatureTest.platform;for(const[keys,callback,options={}]of callbacks){for(const key of keys){const isMacKey=key.startsWith(\"mac+\");if(isMac&&isMacKey){this.callbacks.set(key.slice(4),{callback,options});this.allKeys.add(key.split(\"+\").at(-1));}else if(!isMac&&!isMacKey){this.callbacks.set(key,{callback,options});this.allKeys.add(key.split(\"+\").at(-1));}}}}exec(self,event){if(!this.allKeys.has(event.key)){return;}const info=this.callbacks.get(_assertClassBrand(_KeyboardManager_brand,this,_serialize).call(this,event));if(!info){return;}const{callback,options:{bubbles=false,args=[],checker=null}}=info;if(checker&&!checker(self,event)){return;}callback.bind(self,...args,event)();if(!bubbles){event.stopPropagation();event.preventDefault();}}}function _serialize(event){if(event.altKey){this.buffer.push(\"alt\");}if(event.ctrlKey){this.buffer.push(\"ctrl\");}if(event.metaKey){this.buffer.push(\"meta\");}if(event.shiftKey){this.buffer.push(\"shift\");}this.buffer.push(event.key);const str=this.buffer.join(\"+\");this.buffer.length=0;return str;}class ColorManager{get _colors(){const colors=new Map([[\"CanvasText\",null],[\"Canvas\",null]]);(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.getColorValues)(colors);return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_colors\",colors);}convert(color){const rgb=(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.getRGB)(color);if(!window.matchMedia(\"(forced-colors: active)\").matches){return rgb;}for(const[name,RGB]of this._colors){if(RGB.every((x,i)=>x===rgb[i])){return ColorManager._colorsMapping.get(name);}}return rgb;}getHexCode(name){const rgb=this._colors.get(name);if(!rgb){return name;}return _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util.makeHexColor(...rgb);}}_defineProperty(ColorManager,\"_colorsMapping\",new Map([[\"CanvasText\",[0,0,0]],[\"Canvas\",[255,255,255]]]));var _activeEditor=/*#__PURE__*/new WeakMap();var _allEditors=/*#__PURE__*/new WeakMap();var _allLayers=/*#__PURE__*/new WeakMap();var _altTextManager=/*#__PURE__*/new WeakMap();var _annotationStorage=/*#__PURE__*/new WeakMap();var _changedExistingAnnotations=/*#__PURE__*/new WeakMap();var _commandManager=/*#__PURE__*/new WeakMap();var _currentPageIndex=/*#__PURE__*/new WeakMap();var _deletedAnnotationsElementIds=/*#__PURE__*/new WeakMap();var _draggingEditors=/*#__PURE__*/new WeakMap();var _editorTypes2=/*#__PURE__*/new WeakMap();var _editorsToRescale=/*#__PURE__*/new WeakMap();var _enableHighlightFloatingButton=/*#__PURE__*/new WeakMap();var _filterFactory=/*#__PURE__*/new WeakMap();var _focusMainContainerTimeoutId=/*#__PURE__*/new WeakMap();var _highlightColors=/*#__PURE__*/new WeakMap();var _highlightWhenShiftUp=/*#__PURE__*/new WeakMap();var _highlightToolbar=/*#__PURE__*/new WeakMap();var _idManager=/*#__PURE__*/new WeakMap();var _isEnabled=/*#__PURE__*/new WeakMap();var _isWaiting=/*#__PURE__*/new WeakMap();var _lastActiveElement=/*#__PURE__*/new WeakMap();var _mainHighlightColorPicker=/*#__PURE__*/new WeakMap();var _mlManager=/*#__PURE__*/new WeakMap();var _mode=/*#__PURE__*/new WeakMap();var _selectedEditors=/*#__PURE__*/new WeakMap();var _selectedTextNode=/*#__PURE__*/new WeakMap();var _pageColors=/*#__PURE__*/new WeakMap();var _showAllStates=/*#__PURE__*/new WeakMap();var _boundBlur=/*#__PURE__*/new WeakMap();var _boundFocus=/*#__PURE__*/new WeakMap();var _boundCopy=/*#__PURE__*/new WeakMap();var _boundCut=/*#__PURE__*/new WeakMap();var _boundPaste=/*#__PURE__*/new WeakMap();var _boundKeydown2=/*#__PURE__*/new WeakMap();var _boundKeyup=/*#__PURE__*/new WeakMap();var _boundOnEditingAction=/*#__PURE__*/new WeakMap();var _boundOnPageChanging=/*#__PURE__*/new WeakMap();var _boundOnScaleChanging=/*#__PURE__*/new WeakMap();var _boundSelectionChange=/*#__PURE__*/new WeakMap();var _boundOnRotationChanging=/*#__PURE__*/new WeakMap();var _previousStates=/*#__PURE__*/new WeakMap();var _translation=/*#__PURE__*/new WeakMap();var _translationTimeoutId=/*#__PURE__*/new WeakMap();var _container2=/*#__PURE__*/new WeakMap();var _viewer=/*#__PURE__*/new WeakMap();var _AnnotationEditorUIManager_brand=/*#__PURE__*/new WeakSet();class AnnotationEditorUIManager{static get _keyboardManager(){const proto=AnnotationEditorUIManager.prototype;const arrowChecker=self=>_classPrivateFieldGet(_container2,self).contains(document.activeElement)&&document.activeElement.tagName!==\"BUTTON\"&&self.hasSomethingToControl();const textInputChecker=(_self,{target:el})=>{if(el instanceof HTMLInputElement){const{type}=el;return type!==\"text\"&&type!==\"number\";}return true;};const small=this.TRANSLATE_SMALL;const big=this.TRANSLATE_BIG;return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_keyboardManager\",new KeyboardManager([[[\"ctrl+a\",\"mac+meta+a\"],proto.selectAll,{checker:textInputChecker}],[[\"ctrl+z\",\"mac+meta+z\"],proto.undo,{checker:textInputChecker}],[[\"ctrl+y\",\"ctrl+shift+z\",\"mac+meta+shift+z\",\"ctrl+shift+Z\",\"mac+meta+shift+Z\"],proto.redo,{checker:textInputChecker}],[[\"Backspace\",\"alt+Backspace\",\"ctrl+Backspace\",\"shift+Backspace\",\"mac+Backspace\",\"mac+alt+Backspace\",\"mac+ctrl+Backspace\",\"Delete\",\"ctrl+Delete\",\"shift+Delete\",\"mac+Delete\"],proto.delete,{checker:textInputChecker}],[[\"Enter\",\"mac+Enter\"],proto.addNewEditorFromKeyboard,{checker:(self,{target:el})=>!(el instanceof HTMLButtonElement)&&_classPrivateFieldGet(_container2,self).contains(el)&&!self.isEnterHandled}],[[\" \",\"mac+ \"],proto.addNewEditorFromKeyboard,{checker:(self,{target:el})=>!(el instanceof HTMLButtonElement)&&_classPrivateFieldGet(_container2,self).contains(document.activeElement)}],[[\"Escape\",\"mac+Escape\"],proto.unselectAll],[[\"ArrowLeft\",\"mac+ArrowLeft\"],proto.translateSelectedEditors,{args:[-small,0],checker:arrowChecker}],[[\"ctrl+ArrowLeft\",\"mac+shift+ArrowLeft\"],proto.translateSelectedEditors,{args:[-big,0],checker:arrowChecker}],[[\"ArrowRight\",\"mac+ArrowRight\"],proto.translateSelectedEditors,{args:[small,0],checker:arrowChecker}],[[\"ctrl+ArrowRight\",\"mac+shift+ArrowRight\"],proto.translateSelectedEditors,{args:[big,0],checker:arrowChecker}],[[\"ArrowUp\",\"mac+ArrowUp\"],proto.translateSelectedEditors,{args:[0,-small],checker:arrowChecker}],[[\"ctrl+ArrowUp\",\"mac+shift+ArrowUp\"],proto.translateSelectedEditors,{args:[0,-big],checker:arrowChecker}],[[\"ArrowDown\",\"mac+ArrowDown\"],proto.translateSelectedEditors,{args:[0,small],checker:arrowChecker}],[[\"ctrl+ArrowDown\",\"mac+shift+ArrowDown\"],proto.translateSelectedEditors,{args:[0,big],checker:arrowChecker}]]));}constructor(container,viewer,altTextManager,eventBus,pdfDocument,pageColors,highlightColors,enableHighlightFloatingButton,mlManager){_classPrivateMethodInitSpec(this,_AnnotationEditorUIManager_brand);_classPrivateFieldInitSpec(this,_activeEditor,null);_classPrivateFieldInitSpec(this,_allEditors,new Map());_classPrivateFieldInitSpec(this,_allLayers,new Map());_classPrivateFieldInitSpec(this,_altTextManager,null);_classPrivateFieldInitSpec(this,_annotationStorage,null);_classPrivateFieldInitSpec(this,_changedExistingAnnotations,null);_classPrivateFieldInitSpec(this,_commandManager,new CommandManager());_classPrivateFieldInitSpec(this,_currentPageIndex,0);_classPrivateFieldInitSpec(this,_deletedAnnotationsElementIds,new Set());_classPrivateFieldInitSpec(this,_draggingEditors,null);_classPrivateFieldInitSpec(this,_editorTypes2,null);_classPrivateFieldInitSpec(this,_editorsToRescale,new Set());_classPrivateFieldInitSpec(this,_enableHighlightFloatingButton,false);_classPrivateFieldInitSpec(this,_filterFactory,null);_classPrivateFieldInitSpec(this,_focusMainContainerTimeoutId,null);_classPrivateFieldInitSpec(this,_highlightColors,null);_classPrivateFieldInitSpec(this,_highlightWhenShiftUp,false);_classPrivateFieldInitSpec(this,_highlightToolbar,null);_classPrivateFieldInitSpec(this,_idManager,new IdManager());_classPrivateFieldInitSpec(this,_isEnabled,false);_classPrivateFieldInitSpec(this,_isWaiting,false);_classPrivateFieldInitSpec(this,_lastActiveElement,null);_classPrivateFieldInitSpec(this,_mainHighlightColorPicker,null);_classPrivateFieldInitSpec(this,_mlManager,null);_classPrivateFieldInitSpec(this,_mode,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE);_classPrivateFieldInitSpec(this,_selectedEditors,new Set());_classPrivateFieldInitSpec(this,_selectedTextNode,null);_classPrivateFieldInitSpec(this,_pageColors,null);_classPrivateFieldInitSpec(this,_showAllStates,null);_classPrivateFieldInitSpec(this,_boundBlur,this.blur.bind(this));_classPrivateFieldInitSpec(this,_boundFocus,this.focus.bind(this));_classPrivateFieldInitSpec(this,_boundCopy,this.copy.bind(this));_classPrivateFieldInitSpec(this,_boundCut,this.cut.bind(this));_classPrivateFieldInitSpec(this,_boundPaste,this.paste.bind(this));_classPrivateFieldInitSpec(this,_boundKeydown2,this.keydown.bind(this));_classPrivateFieldInitSpec(this,_boundKeyup,this.keyup.bind(this));_classPrivateFieldInitSpec(this,_boundOnEditingAction,this.onEditingAction.bind(this));_classPrivateFieldInitSpec(this,_boundOnPageChanging,this.onPageChanging.bind(this));_classPrivateFieldInitSpec(this,_boundOnScaleChanging,this.onScaleChanging.bind(this));_classPrivateFieldInitSpec(this,_boundSelectionChange,_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectionChange).bind(this));_classPrivateFieldInitSpec(this,_boundOnRotationChanging,this.onRotationChanging.bind(this));_classPrivateFieldInitSpec(this,_previousStates,{isEditing:false,isEmpty:true,hasSomethingToUndo:false,hasSomethingToRedo:false,hasSelectedEditor:false,hasSelectedText:false});_classPrivateFieldInitSpec(this,_translation,[0,0]);_classPrivateFieldInitSpec(this,_translationTimeoutId,null);_classPrivateFieldInitSpec(this,_container2,null);_classPrivateFieldInitSpec(this,_viewer,null);_classPrivateFieldSet(_container2,this,container);_classPrivateFieldSet(_viewer,this,viewer);_classPrivateFieldSet(_altTextManager,this,altTextManager);this._eventBus=eventBus;this._eventBus._on(\"editingaction\",_classPrivateFieldGet(_boundOnEditingAction,this));this._eventBus._on(\"pagechanging\",_classPrivateFieldGet(_boundOnPageChanging,this));this._eventBus._on(\"scalechanging\",_classPrivateFieldGet(_boundOnScaleChanging,this));this._eventBus._on(\"rotationchanging\",_classPrivateFieldGet(_boundOnRotationChanging,this));_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addSelectionListener).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addKeyboardManager).call(this);_classPrivateFieldSet(_annotationStorage,this,pdfDocument.annotationStorage);_classPrivateFieldSet(_filterFactory,this,pdfDocument.filterFactory);_classPrivateFieldSet(_pageColors,this,pageColors);_classPrivateFieldSet(_highlightColors,this,highlightColors||null);_classPrivateFieldSet(_enableHighlightFloatingButton,this,enableHighlightFloatingButton);_classPrivateFieldSet(_mlManager,this,mlManager||null);this.viewParameters={realScale:_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0};this.isShiftKeyDown=false;}destroy(){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeKeyboardManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeFocusManager).call(this);this._eventBus._off(\"editingaction\",_classPrivateFieldGet(_boundOnEditingAction,this));this._eventBus._off(\"pagechanging\",_classPrivateFieldGet(_boundOnPageChanging,this));this._eventBus._off(\"scalechanging\",_classPrivateFieldGet(_boundOnScaleChanging,this));this._eventBus._off(\"rotationchanging\",_classPrivateFieldGet(_boundOnRotationChanging,this));for(const layer of _classPrivateFieldGet(_allLayers,this).values()){layer.destroy();}_classPrivateFieldGet(_allLayers,this).clear();_classPrivateFieldGet(_allEditors,this).clear();_classPrivateFieldGet(_editorsToRescale,this).clear();_classPrivateFieldSet(_activeEditor,this,null);_classPrivateFieldGet(_selectedEditors,this).clear();_classPrivateFieldGet(_commandManager,this).destroy();_classPrivateFieldGet(_altTextManager,this)?.destroy();_classPrivateFieldGet(_highlightToolbar,this)?.hide();_classPrivateFieldSet(_highlightToolbar,this,null);if(_classPrivateFieldGet(_focusMainContainerTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_focusMainContainerTimeoutId,this));_classPrivateFieldSet(_focusMainContainerTimeoutId,this,null);}if(_classPrivateFieldGet(_translationTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_translationTimeoutId,this));_classPrivateFieldSet(_translationTimeoutId,this,null);}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeSelectionListener).call(this);}async mlGuess(data){return _classPrivateFieldGet(_mlManager,this)?.guess(data)||null;}get hasMLManager(){return!!_classPrivateFieldGet(_mlManager,this);}get hcmFilter(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"hcmFilter\",_classPrivateFieldGet(_pageColors,this)?_classPrivateFieldGet(_filterFactory,this).addHCMFilter(_classPrivateFieldGet(_pageColors,this).foreground,_classPrivateFieldGet(_pageColors,this).background):\"none\");}get direction(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"direction\",getComputedStyle(_classPrivateFieldGet(_container2,this)).direction);}get highlightColors(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"highlightColors\",_classPrivateFieldGet(_highlightColors,this)?new Map(_classPrivateFieldGet(_highlightColors,this).split(\",\").map(pair=>pair.split(\"=\").map(x=>x.trim()))):null);}get highlightColorNames(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"highlightColorNames\",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null);}setMainHighlightColorPicker(colorPicker){_classPrivateFieldSet(_mainHighlightColorPicker,this,colorPicker);}editAltText(editor){_classPrivateFieldGet(_altTextManager,this)?.editAltText(this,editor);}onPageChanging({pageNumber}){_classPrivateFieldSet(_currentPageIndex,this,pageNumber-1);}focusMainContainer(){_classPrivateFieldGet(_container2,this).focus();}findParent(x,y){for(const layer of _classPrivateFieldGet(_allLayers,this).values()){const{x:layerX,y:layerY,width,height}=layer.div.getBoundingClientRect();if(x>=layerX&&x<=layerX+width&&y>=layerY&&y<=layerY+height){return layer;}}return null;}disableUserSelect(value=false){_classPrivateFieldGet(_viewer,this).classList.toggle(\"noUserSelect\",value);}addShouldRescale(editor){_classPrivateFieldGet(_editorsToRescale,this).add(editor);}removeShouldRescale(editor){_classPrivateFieldGet(_editorsToRescale,this).delete(editor);}onScaleChanging({scale}){this.commitOrRemove();this.viewParameters.realScale=scale*_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.PixelsPerInch.PDF_TO_CSS_UNITS;for(const editor of _classPrivateFieldGet(_editorsToRescale,this)){editor.onScaleChanging();}}onRotationChanging({pagesRotation}){this.commitOrRemove();this.viewParameters.rotation=pagesRotation;}highlightSelection(methodOfCreation=\"\"){const selection=document.getSelection();if(!selection||selection.isCollapsed){return;}const{anchorNode,anchorOffset,focusNode,focusOffset}=selection;const text=selection.toString();const anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);const textLayer=anchorElement.closest(\".textLayer\");const boxes=this.getSelectionBoxes(textLayer);if(!boxes){return;}selection.empty();if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE){this._eventBus.dispatch(\"showannotationeditorui\",{source:this,mode:_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT});this.showAllEditors(\"highlight\",true,true);}for(const layer of _classPrivateFieldGet(_allLayers,this).values()){if(layer.hasTextLayer(textLayer)){layer.createAndAddNewEditor({x:0,y:0},false,{methodOfCreation,boxes,anchorNode,anchorOffset,focusNode,focusOffset,text});break;}}}addToAnnotationStorage(editor){if(!editor.isEmpty()&&_classPrivateFieldGet(_annotationStorage,this)&&!_classPrivateFieldGet(_annotationStorage,this).has(editor.id)){_classPrivateFieldGet(_annotationStorage,this).setValue(editor.id,editor);}}blur(){this.isShiftKeyDown=false;if(_classPrivateFieldGet(_highlightWhenShiftUp,this)){_classPrivateFieldSet(_highlightWhenShiftUp,this,false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_onSelectEnd).call(this,\"main_toolbar\");}if(!this.hasSelection){return;}const{activeElement}=document;for(const editor of _classPrivateFieldGet(_selectedEditors,this)){if(editor.div.contains(activeElement)){_classPrivateFieldSet(_lastActiveElement,this,[editor,activeElement]);editor._focusEventsAllowed=false;break;}}}focus(){if(!_classPrivateFieldGet(_lastActiveElement,this)){return;}const[lastEditor,lastActiveElement]=_classPrivateFieldGet(_lastActiveElement,this);_classPrivateFieldSet(_lastActiveElement,this,null);lastActiveElement.addEventListener(\"focusin\",()=>{lastEditor._focusEventsAllowed=true;},{once:true});lastActiveElement.focus();}addEditListeners(){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addKeyboardManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addCopyPasteListeners).call(this);}removeEditListeners(){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeKeyboardManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeCopyPasteListeners).call(this);}copy(event){event.preventDefault();_classPrivateFieldGet(_activeEditor,this)?.commitOrRemove();if(!this.hasSelection){return;}const editors=[];for(const editor of _classPrivateFieldGet(_selectedEditors,this)){const serialized=editor.serialize(true);if(serialized){editors.push(serialized);}}if(editors.length===0){return;}event.clipboardData.setData(\"application/pdfjs\",JSON.stringify(editors));}cut(event){this.copy(event);this.delete();}paste(event){event.preventDefault();const{clipboardData}=event;for(const item of clipboardData.items){for(const editorType of _classPrivateFieldGet(_editorTypes2,this)){if(editorType.isHandlingMimeForPasting(item.type)){editorType.paste(item,this.currentLayer);return;}}}let data=clipboardData.getData(\"application/pdfjs\");if(!data){return;}try{data=JSON.parse(data);}catch(ex){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`paste: \"${ex.message}\".`);return;}if(!Array.isArray(data)){return;}this.unselectAll();const layer=this.currentLayer;try{const newEditors=[];for(const editor of data){const deserializedEditor=layer.deserialize(editor);if(!deserializedEditor){return;}newEditors.push(deserializedEditor);}const cmd=()=>{for(const editor of newEditors){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addEditorToLayer).call(this,editor);}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectEditors).call(this,newEditors);};const undo=()=>{for(const editor of newEditors){editor.remove();}};this.addCommands({cmd,undo,mustExec:true});}catch(ex){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`paste: \"${ex.message}\".`);}}keydown(event){if(!this.isShiftKeyDown&&event.key===\"Shift\"){this.isShiftKeyDown=true;}if(_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard){AnnotationEditorUIManager._keyboardManager.exec(this,event);}}keyup(event){if(this.isShiftKeyDown&&event.key===\"Shift\"){this.isShiftKeyDown=false;if(_classPrivateFieldGet(_highlightWhenShiftUp,this)){_classPrivateFieldSet(_highlightWhenShiftUp,this,false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_onSelectEnd).call(this,\"main_toolbar\");}}}onEditingAction({name}){switch(name){case\"undo\":case\"redo\":case\"delete\":case\"selectAll\":this[name]();break;case\"highlightSelection\":this.highlightSelection(\"context_menu\");break;}}setEditingState(isEditing){if(isEditing){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addFocusManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addCopyPasteListeners).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{isEditing:_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this),hasSomethingToUndo:_classPrivateFieldGet(_commandManager,this).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(_commandManager,this).hasSomethingToRedo(),hasSelectedEditor:false});}else{_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeFocusManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeCopyPasteListeners).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{isEditing:false});this.disableUserSelect(false);}}registerEditorTypes(types){if(_classPrivateFieldGet(_editorTypes2,this)){return;}_classPrivateFieldSet(_editorTypes2,this,types);for(const editorType of _classPrivateFieldGet(_editorTypes2,this)){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editorType.defaultPropertiesToUpdate);}}getId(){return _classPrivateFieldGet(_idManager,this).id;}get currentLayer(){return _classPrivateFieldGet(_allLayers,this).get(_classPrivateFieldGet(_currentPageIndex,this));}getLayer(pageIndex){return _classPrivateFieldGet(_allLayers,this).get(pageIndex);}get currentPageIndex(){return _classPrivateFieldGet(_currentPageIndex,this);}addLayer(layer){_classPrivateFieldGet(_allLayers,this).set(layer.pageIndex,layer);if(_classPrivateFieldGet(_isEnabled,this)){layer.enable();}else{layer.disable();}}removeLayer(layer){_classPrivateFieldGet(_allLayers,this).delete(layer.pageIndex);}updateMode(mode,editId=null,isFromKeyboard=false){if(_classPrivateFieldGet(_mode,this)===mode){return;}_classPrivateFieldSet(_mode,this,mode);if(mode===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE){this.setEditingState(false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_disableAll).call(this);return;}this.setEditingState(true);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_enableAll).call(this);this.unselectAll();for(const layer of _classPrivateFieldGet(_allLayers,this).values()){layer.updateMode(mode);}if(!editId&&isFromKeyboard){this.addNewEditorFromKeyboard();return;}if(!editId){return;}for(const editor of _classPrivateFieldGet(_allEditors,this).values()){if(editor.annotationElementId===editId){this.setSelected(editor);editor.enterInEditMode();break;}}}addNewEditorFromKeyboard(){if(this.currentLayer.canCreateNewEmptyEditor()){this.currentLayer.addNewEditor();}}updateToolbar(mode){if(mode===_classPrivateFieldGet(_mode,this)){return;}this._eventBus.dispatch(\"switchannotationeditormode\",{source:this,mode});}updateParams(type,value){if(!_classPrivateFieldGet(_editorTypes2,this)){return;}switch(type){case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:_classPrivateFieldGet(_mainHighlightColorPicker,this)?.updateColor(value);break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch(\"reporttelemetry\",{source:this,details:{type:\"editing\",data:{type:\"highlight\",action:\"toggle_visibility\"}}});(_classPrivateFieldGet(_showAllStates,this)||_classPrivateFieldSet(_showAllStates,this,new Map())).set(type,value);this.showAllEditors(\"highlight\",value);break;}for(const editor of _classPrivateFieldGet(_selectedEditors,this)){editor.updateParams(type,value);}for(const editorType of _classPrivateFieldGet(_editorTypes2,this)){editorType.updateDefaultParams(type,value);}}showAllEditors(type,visible,updateButton=false){for(const editor of _classPrivateFieldGet(_allEditors,this).values()){if(editor.editorType===type){editor.show(visible);}}const state=_classPrivateFieldGet(_showAllStates,this)?.get(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL)??true;if(state!==visible){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,[[_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,visible]]);}}enableWaiting(mustWait=false){if(_classPrivateFieldGet(_isWaiting,this)===mustWait){return;}_classPrivateFieldSet(_isWaiting,this,mustWait);for(const layer of _classPrivateFieldGet(_allLayers,this).values()){if(mustWait){layer.disableClick();}else{layer.enableClick();}layer.div.classList.toggle(\"waiting\",mustWait);}}getEditors(pageIndex){const editors=[];for(const editor of _classPrivateFieldGet(_allEditors,this).values()){if(editor.pageIndex===pageIndex){editors.push(editor);}}return editors;}getEditor(id){return _classPrivateFieldGet(_allEditors,this).get(id);}addEditor(editor){_classPrivateFieldGet(_allEditors,this).set(editor.id,editor);}removeEditor(editor){if(editor.div.contains(document.activeElement)){if(_classPrivateFieldGet(_focusMainContainerTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_focusMainContainerTimeoutId,this));}_classPrivateFieldSet(_focusMainContainerTimeoutId,this,setTimeout(()=>{this.focusMainContainer();_classPrivateFieldSet(_focusMainContainerTimeoutId,this,null);},0));}_classPrivateFieldGet(_allEditors,this).delete(editor.id);this.unselect(editor);if(!editor.annotationElementId||!_classPrivateFieldGet(_deletedAnnotationsElementIds,this).has(editor.annotationElementId)){_classPrivateFieldGet(_annotationStorage,this)?.remove(editor.id);}}addDeletedAnnotationElement(editor){_classPrivateFieldGet(_deletedAnnotationsElementIds,this).add(editor.annotationElementId);this.addChangedExistingAnnotation(editor);editor.deleted=true;}isDeletedAnnotationElement(annotationElementId){return _classPrivateFieldGet(_deletedAnnotationsElementIds,this).has(annotationElementId);}removeDeletedAnnotationElement(editor){_classPrivateFieldGet(_deletedAnnotationsElementIds,this).delete(editor.annotationElementId);this.removeChangedExistingAnnotation(editor);editor.deleted=false;}setActiveEditor(editor){if(_classPrivateFieldGet(_activeEditor,this)===editor){return;}_classPrivateFieldSet(_activeEditor,this,editor);if(editor){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);}}updateUI(editor){if(_classPrivateGetter(_AnnotationEditorUIManager_brand,this,_get_lastSelectedEditor)===editor){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);}}toggleSelected(editor){if(_classPrivateFieldGet(_selectedEditors,this).has(editor)){_classPrivateFieldGet(_selectedEditors,this).delete(editor);editor.unselect();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});return;}_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}setSelected(editor){for(const ed of _classPrivateFieldGet(_selectedEditors,this)){if(ed!==editor){ed.unselect();}}_classPrivateFieldGet(_selectedEditors,this).clear();_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}isSelected(editor){return _classPrivateFieldGet(_selectedEditors,this).has(editor);}get firstSelectedEditor(){return _classPrivateFieldGet(_selectedEditors,this).values().next().value;}unselect(editor){editor.unselect();_classPrivateFieldGet(_selectedEditors,this).delete(editor);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});}get hasSelection(){return _classPrivateFieldGet(_selectedEditors,this).size!==0;}get isEnterHandled(){return _classPrivateFieldGet(_selectedEditors,this).size===1&&this.firstSelectedEditor.isEnterHandled;}undo(){_classPrivateFieldGet(_commandManager,this).undo();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:_classPrivateFieldGet(_commandManager,this).hasSomethingToUndo(),hasSomethingToRedo:true,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}redo(){_classPrivateFieldGet(_commandManager,this).redo();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:_classPrivateFieldGet(_commandManager,this).hasSomethingToRedo(),isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}addCommands(params){_classPrivateFieldGet(_commandManager,this).add(params);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:false,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}delete(){this.commitOrRemove();if(!this.hasSelection){return;}const editors=[..._classPrivateFieldGet(_selectedEditors,this)];const cmd=()=>{for(const editor of editors){editor.remove();}};const undo=()=>{for(const editor of editors){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addEditorToLayer).call(this,editor);}};this.addCommands({cmd,undo,mustExec:true});}commitOrRemove(){_classPrivateFieldGet(_activeEditor,this)?.commitOrRemove();}hasSomethingToControl(){return _classPrivateFieldGet(_activeEditor,this)||this.hasSelection;}selectAll(){for(const editor of _classPrivateFieldGet(_selectedEditors,this)){editor.commit();}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectEditors).call(this,_classPrivateFieldGet(_allEditors,this).values());}unselectAll(){if(_classPrivateFieldGet(_activeEditor,this)){_classPrivateFieldGet(_activeEditor,this).commitOrRemove();if(_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE){return;}}if(!this.hasSelection){return;}for(const editor of _classPrivateFieldGet(_selectedEditors,this)){editor.unselect();}_classPrivateFieldGet(_selectedEditors,this).clear();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:false});}translateSelectedEditors(x,y,noCommit=false){if(!noCommit){this.commitOrRemove();}if(!this.hasSelection){return;}_classPrivateFieldGet(_translation,this)[0]+=x;_classPrivateFieldGet(_translation,this)[1]+=y;const[totalX,totalY]=_classPrivateFieldGet(_translation,this);const editors=[..._classPrivateFieldGet(_selectedEditors,this)];const TIME_TO_WAIT=1000;if(_classPrivateFieldGet(_translationTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_translationTimeoutId,this));}_classPrivateFieldSet(_translationTimeoutId,this,setTimeout(()=>{_classPrivateFieldSet(_translationTimeoutId,this,null);_classPrivateFieldGet(_translation,this)[0]=_classPrivateFieldGet(_translation,this)[1]=0;this.addCommands({cmd:()=>{for(const editor of editors){if(_classPrivateFieldGet(_allEditors,this).has(editor.id)){editor.translateInPage(totalX,totalY);}}},undo:()=>{for(const editor of editors){if(_classPrivateFieldGet(_allEditors,this).has(editor.id)){editor.translateInPage(-totalX,-totalY);}}},mustExec:false});},TIME_TO_WAIT));for(const editor of editors){editor.translateInPage(x,y);}}setUpDragSession(){if(!this.hasSelection){return;}this.disableUserSelect(true);_classPrivateFieldSet(_draggingEditors,this,new Map());for(const editor of _classPrivateFieldGet(_selectedEditors,this)){_classPrivateFieldGet(_draggingEditors,this).set(editor,{savedX:editor.x,savedY:editor.y,savedPageIndex:editor.pageIndex,newX:0,newY:0,newPageIndex:-1});}}endDragSession(){if(!_classPrivateFieldGet(_draggingEditors,this)){return false;}this.disableUserSelect(false);const map=_classPrivateFieldGet(_draggingEditors,this);_classPrivateFieldSet(_draggingEditors,this,null);let mustBeAddedInUndoStack=false;for(const[{x,y,pageIndex},value]of map){value.newX=x;value.newY=y;value.newPageIndex=pageIndex;mustBeAddedInUndoStack||=x!==value.savedX||y!==value.savedY||pageIndex!==value.savedPageIndex;}if(!mustBeAddedInUndoStack){return false;}const move=(editor,x,y,pageIndex)=>{if(_classPrivateFieldGet(_allEditors,this).has(editor.id)){const parent=_classPrivateFieldGet(_allLayers,this).get(pageIndex);if(parent){editor._setParentAndPosition(parent,x,y);}else{editor.pageIndex=pageIndex;editor.x=x;editor.y=y;}}};this.addCommands({cmd:()=>{for(const[editor,{newX,newY,newPageIndex}]of map){move(editor,newX,newY,newPageIndex);}},undo:()=>{for(const[editor,{savedX,savedY,savedPageIndex}]of map){move(editor,savedX,savedY,savedPageIndex);}},mustExec:true});return true;}dragSelectedEditors(tx,ty){if(!_classPrivateFieldGet(_draggingEditors,this)){return;}for(const editor of _classPrivateFieldGet(_draggingEditors,this).keys()){editor.drag(tx,ty);}}rebuild(editor){if(editor.parent===null){const parent=this.getLayer(editor.pageIndex);if(parent){parent.changeParent(editor);parent.addOrRebuild(editor);}else{this.addEditor(editor);this.addToAnnotationStorage(editor);editor.rebuild();}}else{editor.parent.addOrRebuild(editor);}}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||_classPrivateFieldGet(_selectedEditors,this).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents();}isActive(editor){return _classPrivateFieldGet(_activeEditor,this)===editor;}getActive(){return _classPrivateFieldGet(_activeEditor,this);}getMode(){return _classPrivateFieldGet(_mode,this);}get imageManager(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"imageManager\",new ImageManager());}getSelectionBoxes(textLayer){if(!textLayer){return null;}const selection=document.getSelection();for(let i=0,ii=selection.rangeCount;i<ii;i++){if(!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)){return null;}}const{x:layerX,y:layerY,width:parentWidth,height:parentHeight}=textLayer.getBoundingClientRect();let rotator;switch(textLayer.getAttribute(\"data-main-rotation\")){case\"90\":rotator=(x,y,w,h)=>({x:(y-layerY)/parentHeight,y:1-(x+w-layerX)/parentWidth,width:h/parentHeight,height:w/parentWidth});break;case\"180\":rotator=(x,y,w,h)=>({x:1-(x+w-layerX)/parentWidth,y:1-(y+h-layerY)/parentHeight,width:w/parentWidth,height:h/parentHeight});break;case\"270\":rotator=(x,y,w,h)=>({x:1-(y+h-layerY)/parentHeight,y:(x-layerX)/parentWidth,width:h/parentHeight,height:w/parentWidth});break;default:rotator=(x,y,w,h)=>({x:(x-layerX)/parentWidth,y:(y-layerY)/parentHeight,width:w/parentWidth,height:h/parentHeight});break;}const boxes=[];for(let i=0,ii=selection.rangeCount;i<ii;i++){const range=selection.getRangeAt(i);if(range.collapsed){continue;}for(const{x,y,width,height}of range.getClientRects()){if(width===0||height===0){continue;}boxes.push(rotator(x,y,width,height));}}return boxes.length===0?null:boxes;}addChangedExistingAnnotation({annotationElementId,id}){(_classPrivateFieldGet(_changedExistingAnnotations,this)||_classPrivateFieldSet(_changedExistingAnnotations,this,new Map())).set(annotationElementId,id);}removeChangedExistingAnnotation({annotationElementId}){_classPrivateFieldGet(_changedExistingAnnotations,this)?.delete(annotationElementId);}renderAnnotationElement(annotation){const editorId=_classPrivateFieldGet(_changedExistingAnnotations,this)?.get(annotation.data.id);if(!editorId){return;}const editor=_classPrivateFieldGet(_annotationStorage,this).getRawValue(editorId);if(!editor){return;}if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE&&!editor.hasBeenModified){return;}editor.renderAnnotationElement(annotation);}}/***/function _getAnchorElementForSelection({anchorNode}){return anchorNode.nodeType===Node.TEXT_NODE?anchorNode.parentElement:anchorNode;}function _displayHighlightToolbar(){const selection=document.getSelection();if(!selection||selection.isCollapsed){return;}const anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);const textLayer=anchorElement.closest(\".textLayer\");const boxes=this.getSelectionBoxes(textLayer);if(!boxes){return;}_classPrivateFieldGet(_highlightToolbar,this)||_classPrivateFieldSet(_highlightToolbar,this,new _toolbar_js__WEBPACK_IMPORTED_MODULE_2__.HighlightToolbar(this));_classPrivateFieldGet(_highlightToolbar,this).show(textLayer,boxes,this.direction===\"ltr\");}function _selectionChange(){const selection=document.getSelection();if(!selection||selection.isCollapsed){if(_classPrivateFieldGet(_selectedTextNode,this)){_classPrivateFieldGet(_highlightToolbar,this)?.hide();_classPrivateFieldSet(_selectedTextNode,this,null);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:false});}return;}const{anchorNode}=selection;if(anchorNode===_classPrivateFieldGet(_selectedTextNode,this)){return;}const anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);const textLayer=anchorElement.closest(\".textLayer\");if(!textLayer){if(_classPrivateFieldGet(_selectedTextNode,this)){_classPrivateFieldGet(_highlightToolbar,this)?.hide();_classPrivateFieldSet(_selectedTextNode,this,null);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:false});}return;}_classPrivateFieldGet(_highlightToolbar,this)?.hide();_classPrivateFieldSet(_selectedTextNode,this,anchorNode);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:true});if(_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT&&_classPrivateFieldGet(_mode,this)!==_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE){return;}if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT){this.showAllEditors(\"highlight\",true,true);}_classPrivateFieldSet(_highlightWhenShiftUp,this,this.isShiftKeyDown);if(!this.isShiftKeyDown){const pointerup=e=>{if(e.type===\"pointerup\"&&e.button!==0){return;}window.removeEventListener(\"pointerup\",pointerup);window.removeEventListener(\"blur\",pointerup);if(e.type===\"pointerup\"){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_onSelectEnd).call(this,\"main_toolbar\");}};window.addEventListener(\"pointerup\",pointerup);window.addEventListener(\"blur\",pointerup);}}function _onSelectEnd(methodOfCreation=\"\"){if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT){this.highlightSelection(methodOfCreation);}else if(_classPrivateFieldGet(_enableHighlightFloatingButton,this)){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_displayHighlightToolbar).call(this);}}function _addSelectionListener(){document.addEventListener(\"selectionchange\",_classPrivateFieldGet(_boundSelectionChange,this));}function _removeSelectionListener(){document.removeEventListener(\"selectionchange\",_classPrivateFieldGet(_boundSelectionChange,this));}function _addFocusManager(){window.addEventListener(\"focus\",_classPrivateFieldGet(_boundFocus,this));window.addEventListener(\"blur\",_classPrivateFieldGet(_boundBlur,this));}function _removeFocusManager(){window.removeEventListener(\"focus\",_classPrivateFieldGet(_boundFocus,this));window.removeEventListener(\"blur\",_classPrivateFieldGet(_boundBlur,this));}function _addKeyboardManager(){window.addEventListener(\"keydown\",_classPrivateFieldGet(_boundKeydown2,this));window.addEventListener(\"keyup\",_classPrivateFieldGet(_boundKeyup,this));}function _removeKeyboardManager(){window.removeEventListener(\"keydown\",_classPrivateFieldGet(_boundKeydown2,this));window.removeEventListener(\"keyup\",_classPrivateFieldGet(_boundKeyup,this));}function _addCopyPasteListeners(){document.addEventListener(\"copy\",_classPrivateFieldGet(_boundCopy,this));document.addEventListener(\"cut\",_classPrivateFieldGet(_boundCut,this));document.addEventListener(\"paste\",_classPrivateFieldGet(_boundPaste,this));}function _removeCopyPasteListeners(){document.removeEventListener(\"copy\",_classPrivateFieldGet(_boundCopy,this));document.removeEventListener(\"cut\",_classPrivateFieldGet(_boundCut,this));document.removeEventListener(\"paste\",_classPrivateFieldGet(_boundPaste,this));}function _dispatchUpdateStates(details){const hasChanged=Object.entries(details).some(([key,value])=>_classPrivateFieldGet(_previousStates,this)[key]!==value);if(hasChanged){this._eventBus.dispatch(\"annotationeditorstateschanged\",{source:this,details:Object.assign(_classPrivateFieldGet(_previousStates,this),details)});if(_classPrivateFieldGet(_mode,this)===_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.HIGHLIGHT&&details.hasSelectedEditor===false){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,[[_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType.HIGHLIGHT_FREE,true]]);}}}function _dispatchUpdateUI(details){this._eventBus.dispatch(\"annotationeditorparamschanged\",{source:this,details});}function _enableAll(){if(!_classPrivateFieldGet(_isEnabled,this)){_classPrivateFieldSet(_isEnabled,this,true);for(const layer of _classPrivateFieldGet(_allLayers,this).values()){layer.enable();}for(const editor of _classPrivateFieldGet(_allEditors,this).values()){editor.enable();}}}function _disableAll(){this.unselectAll();if(_classPrivateFieldGet(_isEnabled,this)){_classPrivateFieldSet(_isEnabled,this,false);for(const layer of _classPrivateFieldGet(_allLayers,this).values()){layer.disable();}for(const editor of _classPrivateFieldGet(_allEditors,this).values()){editor.disable();}}}function _addEditorToLayer(editor){const layer=_classPrivateFieldGet(_allLayers,this).get(editor.pageIndex);if(layer){layer.addOrRebuild(editor);}else{this.addEditor(editor);this.addToAnnotationStorage(editor);}}function _get_lastSelectedEditor(_this8){let ed=null;for(ed of _classPrivateFieldGet(_selectedEditors,_this8)){}return ed;}function _isEmpty(){if(_classPrivateFieldGet(_allEditors,this).size===0){return true;}if(_classPrivateFieldGet(_allEditors,this).size===1){for(const editor of _classPrivateFieldGet(_allEditors,this).values()){return editor.isEmpty();}}return false;}function _selectEditors(editors){for(const editor of _classPrivateFieldGet(_selectedEditors,this)){editor.unselect();}_classPrivateFieldGet(_selectedEditors,this).clear();for(const editor of editors){if(editor.isEmpty()){continue;}_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});}_defineProperty(AnnotationEditorUIManager,\"TRANSLATE_SMALL\",1);_defineProperty(AnnotationEditorUIManager,\"TRANSLATE_BIG\",10);}),/***/94:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFFetchStream:()=>(/* binding */PDFFetchStream)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(490);function createFetchOptions(headers,withCredentials,abortController){return{method:\"GET\",headers,signal:abortController.signal,mode:\"cors\",credentials:withCredentials?\"include\":\"same-origin\",redirect:\"follow\"};}function createHeaders(httpHeaders){const headers=new Headers();for(const property in httpHeaders){const value=httpHeaders[property];if(value===undefined){continue;}headers.append(property,value);}return headers;}function getArrayBuffer(val){if(val instanceof Uint8Array){return val.buffer;}if(val instanceof ArrayBuffer){return val;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`getArrayBuffer - unexpected data format: ${val}`);return new Uint8Array(val).buffer;}class PDFFetchStream{constructor(source){this.source=source;this.isHttp=/^https?:/i.test(source.url);this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}getFullReader(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader,\"PDFFetchStream.getFullReader can only be called once.\");this._fullRequestReader=new PDFFetchStreamReader(this);return this._fullRequestReader;}getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}const reader=new PDFFetchStreamRangeReader(this,begin,end);this._rangeRequestReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}class PDFFetchStreamReader{constructor(stream){this._stream=stream;this._reader=null;this._loaded=0;this._filename=null;const source=stream.source;this._withCredentials=source.withCredentials||false;this._contentLength=source.length;this._headersCapability=Promise.withResolvers();this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._abortController=new AbortController();this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._headers=createHeaders(this._stream.httpHeaders);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateResponseStatus)(response.status)){throw(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(response.status,url);}this._reader=response.body.getReader();this._headersCapability.resolve();const getResponseHeader=name=>response.headers.get(name);const{allowRangeRequests,suggestedLength}=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests;this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);if(!this._isStreamingSupported&&this._isRangeSupported){this.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"Streaming is disabled.\"));}}).catch(this._headersCapability.reject);this.onProgress=null;}get headersReady(){return this._headersCapability.promise;}get filename(){return this._filename;}get contentLength(){return this._contentLength;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._headersCapability.promise;const{value,done}=await this._reader.read();if(done){return{value,done};}this._loaded+=value.byteLength;this.onProgress?.({loaded:this._loaded,total:this._contentLength});return{value:getArrayBuffer(value),done:false};}cancel(reason){this._reader?.cancel(reason);this._abortController.abort();}}class PDFFetchStreamRangeReader{constructor(stream,begin,end){this._stream=stream;this._reader=null;this._loaded=0;const source=stream.source;this._withCredentials=source.withCredentials||false;this._readCapability=Promise.withResolvers();this._isStreamingSupported=!source.disableStream;this._abortController=new AbortController();this._headers=createHeaders(this._stream.httpHeaders);this._headers.append(\"Range\",`bytes=${begin}-${end-1}`);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateResponseStatus)(response.status)){throw(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(response.status,url);}this._readCapability.resolve();this._reader=response.body.getReader();}).catch(this._readCapability.reject);this.onProgress=null;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;const{value,done}=await this._reader.read();if(done){return{value,done};}this._loaded+=value.byteLength;this.onProgress?.({loaded:this._loaded});return{value:getArrayBuffer(value),done:false};}cancel(reason){this._reader?.cancel(reason);this._abortController.abort();}}/***/}),/***/10:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */FontFaceObject:()=>(/* binding */FontFaceObject),/* harmony export */FontLoader:()=>(/* binding */FontLoader)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);var _systemFonts=/*#__PURE__*/new WeakMap();class FontLoader{constructor({ownerDocument=globalThis.document,styleElement=null}){_classPrivateFieldInitSpec(this,_systemFonts,new Set());this._document=ownerDocument;this.nativeFontFaces=new Set();this.styleElement=null;this.loadingRequests=[];this.loadTestFontId=0;}addNativeFontFace(nativeFontFace){this.nativeFontFaces.add(nativeFontFace);this._document.fonts.add(nativeFontFace);}removeNativeFontFace(nativeFontFace){this.nativeFontFaces.delete(nativeFontFace);this._document.fonts.delete(nativeFontFace);}insertRule(rule){if(!this.styleElement){this.styleElement=this._document.createElement(\"style\");this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);}const styleSheet=this.styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length);}clear(){for(const nativeFontFace of this.nativeFontFaces){this._document.fonts.delete(nativeFontFace);}this.nativeFontFaces.clear();_classPrivateFieldGet(_systemFonts,this).clear();if(this.styleElement){this.styleElement.remove();this.styleElement=null;}}async loadSystemFont({systemFontInfo:info,_inspectFont}){if(!info||_classPrivateFieldGet(_systemFonts,this).has(info.loadedName)){return;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this.disableFontFace,\"loadSystemFont shouldn't be called when `disableFontFace` is set.\");if(this.isFontLoadingAPISupported){const{loadedName,src,style}=info;const fontFace=new FontFace(loadedName,src,style);this.addNativeFontFace(fontFace);try{await fontFace.load();_classPrivateFieldGet(_systemFonts,this).add(loadedName);_inspectFont?.(info);}catch{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);this.removeNativeFontFace(fontFace);}return;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Not implemented: loadSystemFont without the Font Loading API.\");}async bind(font){if(font.attached||font.missingFile&&!font.systemFontInfo){return;}font.attached=true;if(font.systemFontInfo){await this.loadSystemFont(font);return;}if(this.isFontLoadingAPISupported){const nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);try{await nativeFontFace.loaded;}catch(ex){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);font.disableFontFace=true;throw ex;}}return;}const rule=font.createFontFaceRule();if(rule){this.insertRule(rule);if(this.isSyncFontLoadingSupported){return;}await new Promise(resolve=>{const request=this._queueLoadingCallback(resolve);this._prepareFontLoadEvent(font,request);});}}get isFontLoadingAPISupported(){const hasFonts=!!this._document?.fonts;return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"isFontLoadingAPISupported\",hasFonts);}get isSyncFontLoadingSupported(){let supported=false;if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS){supported=true;}else if(typeof navigator!==\"undefined\"&&typeof navigator?.userAgent===\"string\"&&/Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)){supported=true;}return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"isSyncFontLoadingSupported\",supported);}_queueLoadingCallback(callback){function completeRequest(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!request.done,\"completeRequest() cannot be called twice.\");request.done=true;while(loadingRequests.length>0&&loadingRequests[0].done){const otherRequest=loadingRequests.shift();setTimeout(otherRequest.callback,0);}}const{loadingRequests}=this;const request={done:false,complete:completeRequest,callback};loadingRequests.push(request);return request;}get _loadTestFont(){const testFont=atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\"+\"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\"+\"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\"+\"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\"+\"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\"+\"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\"+\"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\"+\"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\"+\"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\"+\"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\"+\"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\"+\"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\"+\"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\"+\"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\"+\"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\"+\"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\"+\"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,\"_loadTestFont\",testFont);}_prepareFontLoadEvent(font,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&0xff;}function spliceString(s,offset,remove,insert){const chunk1=s.substring(0,offset);const chunk2=s.substring(offset+remove);return chunk1+insert+chunk2;}let i,ii;const canvas=this._document.createElement(\"canvas\");canvas.width=1;canvas.height=1;const ctx=canvas.getContext(\"2d\");let called=0;function isFontReady(name,callback){if(++called>30){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(\"Load test font never loaded.\");callback();return;}ctx.font=\"30px \"+name;ctx.fillText(\".\",0,20);const imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return;}setTimeout(isFontReady.bind(null,name,callback));}const loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`;let data=this._loadTestFont;const COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);const CFF_CHECKSUM_OFFSET=16;const XXXX_VALUE=0x58585858;let checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;}if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+\"XXX\",i)|0;}data=spliceString(data,CFF_CHECKSUM_OFFSET,4,(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.string32)(checksum));const url=`url(data:font/opentype;base64,${btoa(data)});`;const rule=`@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;this.insertRule(rule);const div=this._document.createElement(\"div\");div.style.visibility=\"hidden\";div.style.width=div.style.height=\"10px\";div.style.position=\"absolute\";div.style.top=div.style.left=\"0px\";for(const name of[font.loadedName,loadTestFontId]){const span=this._document.createElement(\"span\");span.textContent=\"Hi\";span.style.fontFamily=name;div.append(span);}this._document.body.append(div);isFontReady(loadTestFontId,()=>{div.remove();request.complete();});}}class FontFaceObject{constructor(translatedData,{disableFontFace=false,ignoreErrors=false,inspectFont=null}){this.compiledGlyphs=Object.create(null);for(const i in translatedData){this[i]=translatedData[i];}this.disableFontFace=disableFontFace===true;this.ignoreErrors=ignoreErrors===true;this._inspectFont=inspectFont;}createNativeFontFace(){if(!this.data||this.disableFontFace){return null;}let nativeFontFace;if(!this.cssFontInfo){nativeFontFace=new FontFace(this.loadedName,this.data,{});}else{const css={weight:this.cssFontInfo.fontWeight};if(this.cssFontInfo.italicAngle){css.style=`oblique ${this.cssFontInfo.italicAngle}deg`;}nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css);}this._inspectFont?.(this);return nativeFontFace;}createFontFaceRule(){if(!this.data||this.disableFontFace){return null;}const data=(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.bytesToString)(this.data);const url=`url(data:${this.mimetype};base64,${btoa(data)});`;let rule;if(!this.cssFontInfo){rule=`@font-face {font-family:\"${this.loadedName}\";src:${url}}`;}else{let css=`font-weight: ${this.cssFontInfo.fontWeight};`;if(this.cssFontInfo.italicAngle){css+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;}rule=`@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;}this._inspectFont?.(this,url);return rule;}getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==undefined){return this.compiledGlyphs[character];}let cmds;try{cmds=objs.get(this.loadedName+\"_path_\"+character);}catch(ex){if(!this.ignoreErrors){throw ex;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`getPathGenerator - ignoring character: \"${ex}\".`);}if(!Array.isArray(cmds)||cmds.length===0){return this.compiledGlyphs[character]=function(c,size){};}const commands=[];for(let i=0,ii=cmds.length;i<ii;){switch(cmds[i++]){case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.BEZIER_CURVE_TO:{const[a,b,c,d,e,f]=cmds.slice(i,i+6);commands.push(ctx=>ctx.bezierCurveTo(a,b,c,d,e,f));i+=6;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.MOVE_TO:{const[a,b]=cmds.slice(i,i+2);commands.push(ctx=>ctx.moveTo(a,b));i+=2;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.LINE_TO:{const[a,b]=cmds.slice(i,i+2);commands.push(ctx=>ctx.lineTo(a,b));i+=2;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.QUADRATIC_CURVE_TO:{const[a,b,c,d]=cmds.slice(i,i+4);commands.push(ctx=>ctx.quadraticCurveTo(a,b,c,d));i+=4;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.RESTORE:commands.push(ctx=>ctx.restore());break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.SAVE:commands.push(ctx=>ctx.save());break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.SCALE:(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(commands.length===2,\"Scale command is only valid at the third position.\");break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.TRANSFORM:{const[a,b,c,d,e,f]=cmds.slice(i,i+6);commands.push(ctx=>ctx.transform(a,b,c,d,e,f));i+=6;}break;case _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FontRenderOps.TRANSLATE:{const[a,b]=cmds.slice(i,i+2);commands.push(ctx=>ctx.translate(a,b));i+=2;}break;}}return this.compiledGlyphs[character]=function glyphDrawer(ctx,size){commands[0](ctx);commands[1](ctx);ctx.scale(size,-size);for(let i=2,ii=commands.length;i<ii;i++){commands[i](ctx);}};}}/***/}),/***/62:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */Metadata:()=>(/* binding */Metadata)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);var _metadataMap=/*#__PURE__*/new WeakMap();var _data=/*#__PURE__*/new WeakMap();class Metadata{constructor({parsedData,rawData}){_classPrivateFieldInitSpec(this,_metadataMap,void 0);_classPrivateFieldInitSpec(this,_data,void 0);_classPrivateFieldSet(_metadataMap,this,parsedData);_classPrivateFieldSet(_data,this,rawData);}getRaw(){return _classPrivateFieldGet(_data,this);}get(name){return _classPrivateFieldGet(_metadataMap,this).get(name)??null;}getAll(){return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(_metadataMap,this));}has(name){return _classPrivateFieldGet(_metadataMap,this).has(name);}}/***/}),/***/457:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFNetworkStream:()=>(/* binding */PDFNetworkStream)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(490);const OK_RESPONSE=200;const PARTIAL_CONTENT_RESPONSE=206;function getArrayBuffer(xhr){const data=xhr.response;if(typeof data!==\"string\"){return data;}return(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.stringToBytes)(data).buffer;}class NetworkManager{constructor(url,args={}){this.url=url;this.isHttp=/^https?:/i.test(url);this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null);this.withCredentials=args.withCredentials||false;this.currXhrId=0;this.pendingRequests=Object.create(null);}requestRange(begin,end,listeners){const args={begin,end};for(const prop in listeners){args[prop]=listeners[prop];}return this.request(args);}requestFull(listeners){return this.request(listeners);}request(args){const xhr=new XMLHttpRequest();const xhrId=this.currXhrId++;const pendingRequest=this.pendingRequests[xhrId]={xhr};xhr.open(\"GET\",this.url);xhr.withCredentials=this.withCredentials;for(const property in this.httpHeaders){const value=this.httpHeaders[property];if(value===undefined){continue;}xhr.setRequestHeader(property,value);}if(this.isHttp&&\"begin\"in args&&\"end\"in args){xhr.setRequestHeader(\"Range\",`bytes=${args.begin}-${args.end-1}`);pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE;}else{pendingRequest.expectedStatus=OK_RESPONSE;}xhr.responseType=\"arraybuffer\";if(args.onError){xhr.onerror=function(evt){args.onError(xhr.status);};}xhr.onreadystatechange=this.onStateChange.bind(this,xhrId);xhr.onprogress=this.onProgress.bind(this,xhrId);pendingRequest.onHeadersReceived=args.onHeadersReceived;pendingRequest.onDone=args.onDone;pendingRequest.onError=args.onError;pendingRequest.onProgress=args.onProgress;xhr.send(null);return xhrId;}onProgress(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}pendingRequest.onProgress?.(evt);}onStateChange(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}const xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived){pendingRequest.onHeadersReceived();delete pendingRequest.onHeadersReceived;}if(xhr.readyState!==4){return;}if(!(xhrId in this.pendingRequests)){return;}delete this.pendingRequests[xhrId];if(xhr.status===0&&this.isHttp){pendingRequest.onError?.(xhr.status);return;}const xhrStatus=xhr.status||OK_RESPONSE;const ok_response_on_range_request=xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE;if(!ok_response_on_range_request&&xhrStatus!==pendingRequest.expectedStatus){pendingRequest.onError?.(xhr.status);return;}const chunk=getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){const rangeHeader=xhr.getResponseHeader(\"Content-Range\");const matches=/bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk});}else if(chunk){pendingRequest.onDone({begin:0,chunk});}else{pendingRequest.onError?.(xhr.status);}}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr;}isPendingRequest(xhrId){return xhrId in this.pendingRequests;}abortRequest(xhrId){const xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId];xhr.abort();}}class PDFNetworkStream{constructor(source){this._source=source;this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials});this._rangeChunkSize=source.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[];}_onRangeRequestReaderClosed(reader){const i=this._rangeRequestReaders.indexOf(reader);if(i>=0){this._rangeRequestReaders.splice(i,1);}}getFullReader(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader,\"PDFNetworkStream.getFullReader can only be called once.\");this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source);return this._fullRequestReader;}getRangeReader(begin,end){const reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);reader.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}class PDFNetworkStreamFullRequestReader{constructor(manager,source){this._manager=manager;const args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url;this._fullRequestId=manager.requestFull(args);this._headersReceivedCapability=Promise.withResolvers();this._disableRange=source.disableRange||false;this._contentLength=source.length;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=false;this._isRangeSupported=false;this._cachedChunks=[];this._requests=[];this._done=false;this._storedError=undefined;this._filename=null;this.onProgress=null;}_onHeadersReceived(){const fullRequestXhrId=this._fullRequestId;const fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId);const getResponseHeader=name=>fullRequestXhr.getResponseHeader(name);const{allowRangeRequests,suggestedLength}=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});if(allowRangeRequests){this._isRangeSupported=true;}this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);if(this._isRangeSupported){this._manager.abortRequest(fullRequestXhrId);}this._headersReceivedCapability.resolve();}_onDone(data){if(data){if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:data.chunk,done:false});}else{this._cachedChunks.push(data.chunk);}}this._done=true;if(this._cachedChunks.length>0){return;}for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}_onError(status){this._storedError=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(status,this._url);this._headersReceivedCapability.reject(this._storedError);for(const requestCapability of this._requests){requestCapability.reject(this._storedError);}this._requests.length=0;this._cachedChunks.length=0;}_onProgress(evt){this.onProgress?.({loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength});}get filename(){return this._filename;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}get contentLength(){return this._contentLength;}get headersReady(){return this._headersReceivedCapability.promise;}async read(){if(this._storedError){throw this._storedError;}if(this._cachedChunks.length>0){const chunk=this._cachedChunks.shift();return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;this._headersReceivedCapability.reject(reason);for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;if(this._manager.isPendingRequest(this._fullRequestId)){this._manager.abortRequest(this._fullRequestId);}this._fullRequestReader=null;}}class PDFNetworkStreamRangeRequestReader{constructor(manager,begin,end){this._manager=manager;const args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url;this._requestId=manager.requestRange(begin,end,args);this._requests=[];this._queuedChunk=null;this._done=false;this._storedError=undefined;this.onProgress=null;this.onClosed=null;}_close(){this.onClosed?.(this);}_onDone(data){const chunk=data.chunk;if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunk=chunk;}this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;this._close();}_onError(status){this._storedError=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.createResponseStatusError)(status,this._url);for(const requestCapability of this._requests){requestCapability.reject(this._storedError);}this._requests.length=0;this._queuedChunk=null;}_onProgress(evt){if(!this.isStreamingSupported){this.onProgress?.({loaded:evt.loaded});}}get isStreamingSupported(){return false;}async read(){if(this._storedError){throw this._storedError;}if(this._queuedChunk!==null){const chunk=this._queuedChunk;this._queuedChunk=null;return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;if(this._manager.isPendingRequest(this._requestId)){this._manager.abortRequest(this._requestId);}this._close();}}/***/}),/***/490:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{// EXPORTS\n__webpack_require__.d(__webpack_exports__,{createResponseStatusError:()=>(/* binding */createResponseStatusError),extractFilenameFromHeader:()=>(/* binding */extractFilenameFromHeader),validateRangeRequestCapabilities:()=>(/* binding */validateRangeRequestCapabilities),validateResponseStatus:()=>(/* binding */validateResponseStatus)});// EXTERNAL MODULE: ./src/shared/util.js\nvar util=__webpack_require__(292);;// CONCATENATED MODULE: ./src/display/content_disposition.js\nfunction getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=true;let tmp=toParamRegExp(\"filename\\\\*\",\"i\").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);filename=unescape(filename);filename=rfc5987decode(filename);filename=rfc2047decode(filename);return fixupEncoding(filename);}tmp=rfc2231getparam(contentDisposition);if(tmp){const filename=rfc2047decode(tmp);return fixupEncoding(filename);}tmp=toParamRegExp(\"filename\",\"i\").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);filename=rfc2047decode(filename);return fixupEncoding(filename);}function toParamRegExp(attributePattern,flags){return new RegExp(\"(?:^|;)\\\\s*\"+attributePattern+\"\\\\s*=\\\\s*\"+\"(\"+'[^\";\\\\s][^;\\\\s]*'+\"|\"+'\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?'+\")\",flags);}function textdecode(encoding,value){if(encoding){if(!/^[\\x00-\\xFF]+$/.test(value)){return value;}try{const decoder=new TextDecoder(encoding,{fatal:true});const buffer=(0,util.stringToBytes)(value);value=decoder.decode(buffer);needsEncodingFixup=false;}catch{}}return value;}function fixupEncoding(value){if(needsEncodingFixup&&/[\\x80-\\xff]/.test(value)){value=textdecode(\"utf-8\",value);if(needsEncodingFixup){value=textdecode(\"iso-8859-1\",value);}}return value;}function rfc2231getparam(contentDispositionStr){const matches=[];let match;const iter=toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\",\"ig\");while((match=iter.exec(contentDispositionStr))!==null){let[,n,quot,part]=match;n=parseInt(n,10);if(n in matches){if(n===0){break;}continue;}matches[n]=[quot,part];}const parts=[];for(let n=0;n<matches.length;++n){if(!(n in matches)){break;}let[quot,part]=matches[n];part=rfc2616unquote(part);if(quot){part=unescape(part);if(n===0){part=rfc5987decode(part);}}parts.push(part);}return parts.join(\"\");}function rfc2616unquote(value){if(value.startsWith('\"')){const parts=value.slice(1).split('\\\\\"');for(let i=0;i<parts.length;++i){const quotindex=parts[i].indexOf('\"');if(quotindex!==-1){parts[i]=parts[i].slice(0,quotindex);parts.length=i+1;}parts[i]=parts[i].replaceAll(/\\\\(.)/g,\"$1\");}value=parts.join('\"');}return value;}function rfc5987decode(extvalue){const encodingend=extvalue.indexOf(\"'\");if(encodingend===-1){return extvalue;}const encoding=extvalue.slice(0,encodingend);const langvalue=extvalue.slice(encodingend+1);const value=langvalue.replace(/^[^']*'/,\"\");return textdecode(encoding,value);}function rfc2047decode(value){if(!value.startsWith(\"=?\")||/[\\x00-\\x19\\x80-\\xff]/.test(value)){return value;}return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,function(matches,charset,encoding,text){if(encoding===\"q\"||encoding===\"Q\"){text=text.replaceAll(\"_\",\" \");text=text.replaceAll(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16));});return textdecode(charset,text);}try{text=atob(text);}catch{}return textdecode(charset,text);});}return\"\";}// EXTERNAL MODULE: ./src/display/display_utils.js\nvar display_utils=__webpack_require__(419);;// CONCATENATED MODULE: ./src/display/network_utils.js\nfunction validateRangeRequestCapabilities({getResponseHeader,isHttp,rangeChunkSize,disableRange}){const returnValues={allowRangeRequests:false,suggestedLength:undefined};const length=parseInt(getResponseHeader(\"Content-Length\"),10);if(!Number.isInteger(length)){return returnValues;}returnValues.suggestedLength=length;if(length<=2*rangeChunkSize){return returnValues;}if(disableRange||!isHttp){return returnValues;}if(getResponseHeader(\"Accept-Ranges\")!==\"bytes\"){return returnValues;}const contentEncoding=getResponseHeader(\"Content-Encoding\")||\"identity\";if(contentEncoding!==\"identity\"){return returnValues;}returnValues.allowRangeRequests=true;return returnValues;}function extractFilenameFromHeader(getResponseHeader){const contentDisposition=getResponseHeader(\"Content-Disposition\");if(contentDisposition){let filename=getFilenameFromContentDispositionHeader(contentDisposition);if(filename.includes(\"%\")){try{filename=decodeURIComponent(filename);}catch{}}if((0,display_utils.isPdfFile)(filename)){return filename;}}return null;}function createResponseStatusError(status,url){if(status===404||status===0&&url.startsWith(\"file:\")){return new util.MissingPDFException('Missing PDF \"'+url+'\".');}return new util.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`,status);}function validateResponseStatus(status){return status===200||status===206;}/***/}),/***/786:(/***/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFNodeStream:()=>(/* binding */PDFNodeStream)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _network_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(490);let fs,http,https,url;if(_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.isNodeJS){fs=await import(/*webpackIgnore: true*/\"fs\");http=await import(/*webpackIgnore: true*/\"http\");https=await import(/*webpackIgnore: true*/\"https\");url=await import(/*webpackIgnore: true*/\"url\");}const fileUriRegex=/^file:\\/\\/\\/[a-zA-Z]:\\//;function parseUrl(sourceUrl){const parsedUrl=url.parse(sourceUrl);if(parsedUrl.protocol===\"file:\"||parsedUrl.host){return parsedUrl;}if(/^[a-z]:[/\\\\]/i.test(sourceUrl)){return url.parse(`file:///${sourceUrl}`);}if(!parsedUrl.host){parsedUrl.protocol=\"file:\";}return parsedUrl;}class PDFNodeStream{constructor(source){this.source=source;this.url=parseUrl(source.url);this.isHttp=this.url.protocol===\"http:\"||this.url.protocol===\"https:\";this.isFsUrl=this.url.protocol===\"file:\";this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}getFullReader(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader,\"PDFNodeStream.getFullReader can only be called once.\");this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this);return this._fullRequestReader;}getRangeReader(start,end){if(end<=this._progressiveDataLength){return null;}const rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);this._rangeRequestReaders.push(rangeReader);return rangeReader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}class BaseFullReader{constructor(stream){this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;const source=stream.source;this._contentLength=source.length;this._loaded=0;this._filename=null;this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._readableStream=null;this._readCapability=Promise.withResolvers();this._headersCapability=Promise.withResolvers();}get headersReady(){return this._headersCapability.promise;}get filename(){return this._filename;}get contentLength(){return this._contentLength;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;if(this._done){return{value:undefined,done:true};}if(this._storedError){throw this._storedError;}const chunk=this._readableStream.read();if(chunk===null){this._readCapability=Promise.withResolvers();return this.read();}this._loaded+=chunk.length;this.onProgress?.({loaded:this._loaded,total:this._contentLength});const buffer=new Uint8Array(chunk).buffer;return{value:buffer,done:false};}cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}_error(reason){this._storedError=reason;this._readCapability.resolve();}_setReadableStream(readableStream){this._readableStream=readableStream;readableStream.on(\"readable\",()=>{this._readCapability.resolve();});readableStream.on(\"end\",()=>{readableStream.destroy();this._done=true;this._readCapability.resolve();});readableStream.on(\"error\",reason=>{this._error(reason);});if(!this._isStreamingSupported&&this._isRangeSupported){this._error(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"streaming is disabled\"));}if(this._storedError){this._readableStream.destroy(this._storedError);}}}class BaseRangeReader{constructor(stream){this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=Promise.withResolvers();const source=stream.source;this._isStreamingSupported=!source.disableStream;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;if(this._done){return{value:undefined,done:true};}if(this._storedError){throw this._storedError;}const chunk=this._readableStream.read();if(chunk===null){this._readCapability=Promise.withResolvers();return this.read();}this._loaded+=chunk.length;this.onProgress?.({loaded:this._loaded});const buffer=new Uint8Array(chunk).buffer;return{value:buffer,done:false};}cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}_error(reason){this._storedError=reason;this._readCapability.resolve();}_setReadableStream(readableStream){this._readableStream=readableStream;readableStream.on(\"readable\",()=>{this._readCapability.resolve();});readableStream.on(\"end\",()=>{readableStream.destroy();this._done=true;this._readCapability.resolve();});readableStream.on(\"error\",reason=>{this._error(reason);});if(this._storedError){this._readableStream.destroy(this._storedError);}}}function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:\"GET\",headers};}class PDFNodeStreamFullReader extends BaseFullReader{constructor(stream){super(stream);const handleResponse=response=>{if(response.statusCode===404){const error=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(`Missing PDF \"${this._url}\".`);this._storedError=error;this._headersCapability.reject(error);return;}this._headersCapability.resolve();this._setReadableStream(response);const getResponseHeader=name=>this._readableStream.headers[name.toLowerCase()];const{allowRangeRequests,suggestedLength}=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.validateRangeRequestCapabilities)({getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests;this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils_js__WEBPACK_IMPORTED_MODULE_1__.extractFilenameFromHeader)(getResponseHeader);};this._request=null;if(this._url.protocol===\"http:\"){this._request=http.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse);}else{this._request=https.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse);}this._request.on(\"error\",reason=>{this._storedError=reason;this._headersCapability.reject(reason);});this._request.end();}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream);this._httpHeaders={};for(const property in stream.httpHeaders){const value=stream.httpHeaders[property];if(value===undefined){continue;}this._httpHeaders[property]=value;}this._httpHeaders.Range=`bytes=${start}-${end-1}`;const handleResponse=response=>{if(response.statusCode===404){const error=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(`Missing PDF \"${this._url}\".`);this._storedError=error;return;}this._setReadableStream(response);};this._request=null;if(this._url.protocol===\"http:\"){this._request=http.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);}else{this._request=https.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);}this._request.on(\"error\",reason=>{this._storedError=reason;});this._request.end();}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);if(fileUriRegex.test(this._url.href)){path=path.replace(/^\\//,\"\");}fs.promises.lstat(path).then(stat=>{this._contentLength=stat.size;this._setReadableStream(fs.createReadStream(path));this._headersCapability.resolve();},error=>{if(error.code===\"ENOENT\"){error=new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(`Missing PDF \"${path}\".`);}this._storedError=error;this._headersCapability.reject(error);});}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream);let path=decodeURIComponent(this._url.path);if(fileUriRegex.test(this._url.href)){path=path.replace(/^\\//,\"\");}this._setReadableStream(fs.createReadStream(path,{start,end:end-1}));}}__webpack_async_result__();}catch(e){__webpack_async_result__(e);}},1);/***/}),/***/573:(/***/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */NodeCMapReaderFactory:()=>(/* binding */NodeCMapReaderFactory),/* harmony export */NodeCanvasFactory:()=>(/* binding */NodeCanvasFactory),/* harmony export */NodeFilterFactory:()=>(/* binding */NodeFilterFactory),/* harmony export */NodeStandardFontDataFactory:()=>(/* binding */NodeStandardFontDataFactory)/* harmony export */});/* harmony import */var _base_factory_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(583);/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(292);let fs,canvas,path2d;if(_shared_util_js__WEBPACK_IMPORTED_MODULE_1__.isNodeJS){fs=await import(/*webpackIgnore: true*/\"fs\");try{canvas=await import(/*webpackIgnore: true*/\"canvas\");}catch{}try{path2d=await import(/*webpackIgnore: true*/\"path2d\");}catch{}}const fetchData=function(url){return fs.promises.readFile(url).then(data=>new Uint8Array(data));};class NodeFilterFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseFilterFactory{}class NodeCanvasFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCanvasFactory{_createCanvas(width,height){return canvas.createCanvas(width,height);}}class NodeCMapReaderFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url).then(data=>({cMapData:data,compressionType}));}}class NodeStandardFontDataFactory extends _base_factory_js__WEBPACK_IMPORTED_MODULE_0__.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url);}}__webpack_async_result__();}catch(e){__webpack_async_result__(e);}},1);/***/}),/***/626:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */OptionalContentConfig:()=>(/* binding */OptionalContentConfig)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(651);const INTERNAL=Symbol(\"INTERNAL\");var _isDisplay=/*#__PURE__*/new WeakMap();var _isPrint=/*#__PURE__*/new WeakMap();var _userSet=/*#__PURE__*/new WeakMap();var _visible=/*#__PURE__*/new WeakMap();class OptionalContentGroup{constructor(renderingIntent,{name,intent,usage}){_classPrivateFieldInitSpec(this,_isDisplay,false);_classPrivateFieldInitSpec(this,_isPrint,false);_classPrivateFieldInitSpec(this,_userSet,false);_classPrivateFieldInitSpec(this,_visible,true);_classPrivateFieldSet(_isDisplay,this,!!(renderingIntent&_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.DISPLAY));_classPrivateFieldSet(_isPrint,this,!!(renderingIntent&_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.PRINT));this.name=name;this.intent=intent;this.usage=usage;}get visible(){if(_classPrivateFieldGet(_userSet,this)){return _classPrivateFieldGet(_visible,this);}if(!_classPrivateFieldGet(_visible,this)){return false;}const{print,view}=this.usage;if(_classPrivateFieldGet(_isDisplay,this)){return view?.viewState!==\"OFF\";}else if(_classPrivateFieldGet(_isPrint,this)){return print?.printState!==\"OFF\";}return true;}_setVisible(internal,visible,userSet=false){if(internal!==INTERNAL){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)(\"Internal method `_setVisible` called.\");}_classPrivateFieldSet(_userSet,this,userSet);_classPrivateFieldSet(_visible,this,visible);}}var _cachedGetHash=/*#__PURE__*/new WeakMap();var _groups=/*#__PURE__*/new WeakMap();var _initialHash=/*#__PURE__*/new WeakMap();var _order=/*#__PURE__*/new WeakMap();var _OptionalContentConfig_brand=/*#__PURE__*/new WeakSet();class OptionalContentConfig{constructor(data,renderingIntent=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.RenderingIntentFlag.DISPLAY){_classPrivateMethodInitSpec(this,_OptionalContentConfig_brand);_classPrivateFieldInitSpec(this,_cachedGetHash,null);_classPrivateFieldInitSpec(this,_groups,new Map());_classPrivateFieldInitSpec(this,_initialHash,null);_classPrivateFieldInitSpec(this,_order,null);this.renderingIntent=renderingIntent;this.name=null;this.creator=null;if(data===null){return;}this.name=data.name;this.creator=data.creator;_classPrivateFieldSet(_order,this,data.order);for(const group of data.groups){_classPrivateFieldGet(_groups,this).set(group.id,new OptionalContentGroup(renderingIntent,group));}if(data.baseState===\"OFF\"){for(const group of _classPrivateFieldGet(_groups,this).values()){group._setVisible(INTERNAL,false);}}for(const on of data.on){_classPrivateFieldGet(_groups,this).get(on)._setVisible(INTERNAL,true);}for(const off of data.off){_classPrivateFieldGet(_groups,this).get(off)._setVisible(INTERNAL,false);}_classPrivateFieldSet(_initialHash,this,this.getHash());}isVisible(group){if(_classPrivateFieldGet(_groups,this).size===0){return true;}if(!group){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.info)(\"Optional content group not defined.\");return true;}if(group.type===\"OCG\"){if(!_classPrivateFieldGet(_groups,this).has(group.id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${group.id}`);return true;}return _classPrivateFieldGet(_groups,this).get(group.id).visible;}else if(group.type===\"OCMD\"){if(group.expression){return _assertClassBrand(_OptionalContentConfig_brand,this,_evaluateVisibilityExpression).call(this,group.expression);}if(!group.policy||group.policy===\"AnyOn\"){for(const id of group.ids){if(!_classPrivateFieldGet(_groups,this).has(id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return true;}if(_classPrivateFieldGet(_groups,this).get(id).visible){return true;}}return false;}else if(group.policy===\"AllOn\"){for(const id of group.ids){if(!_classPrivateFieldGet(_groups,this).has(id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return true;}if(!_classPrivateFieldGet(_groups,this).get(id).visible){return false;}}return true;}else if(group.policy===\"AnyOff\"){for(const id of group.ids){if(!_classPrivateFieldGet(_groups,this).has(id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return true;}if(!_classPrivateFieldGet(_groups,this).get(id).visible){return true;}}return false;}else if(group.policy===\"AllOff\"){for(const id of group.ids){if(!_classPrivateFieldGet(_groups,this).has(id)){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return true;}if(_classPrivateFieldGet(_groups,this).get(id).visible){return false;}}return true;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Unknown optional content policy ${group.policy}.`);return true;}(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Unknown group type ${group.type}.`);return true;}setVisibility(id,visible=true){const group=_classPrivateFieldGet(_groups,this).get(id);if(!group){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${id}`);return;}group._setVisible(INTERNAL,!!visible,true);_classPrivateFieldSet(_cachedGetHash,this,null);}setOCGState({state,preserveRB}){let operator;for(const elem of state){switch(elem){case\"ON\":case\"OFF\":case\"Toggle\":operator=elem;continue;}const group=_classPrivateFieldGet(_groups,this).get(elem);if(!group){continue;}switch(operator){case\"ON\":group._setVisible(INTERNAL,true);break;case\"OFF\":group._setVisible(INTERNAL,false);break;case\"Toggle\":group._setVisible(INTERNAL,!group.visible);break;}}_classPrivateFieldSet(_cachedGetHash,this,null);}get hasInitialVisibility(){return _classPrivateFieldGet(_initialHash,this)===null||this.getHash()===_classPrivateFieldGet(_initialHash,this);}getOrder(){if(!_classPrivateFieldGet(_groups,this).size){return null;}if(_classPrivateFieldGet(_order,this)){return _classPrivateFieldGet(_order,this).slice();}return[..._classPrivateFieldGet(_groups,this).keys()];}getGroups(){return _classPrivateFieldGet(_groups,this).size>0?(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.objectFromMap)(_classPrivateFieldGet(_groups,this)):null;}getGroup(id){return _classPrivateFieldGet(_groups,this).get(id)||null;}getHash(){if(_classPrivateFieldGet(_cachedGetHash,this)!==null){return _classPrivateFieldGet(_cachedGetHash,this);}const hash=new _shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__.MurmurHash3_64();for(const[id,group]of _classPrivateFieldGet(_groups,this)){hash.update(`${id}:${group.visible}`);}return _classPrivateFieldSet(_cachedGetHash,this,hash.hexdigest());}}/***/function _evaluateVisibilityExpression(array){const length=array.length;if(length<2){return true;}const operator=array[0];for(let i=1;i<length;i++){const element=array[i];let state;if(Array.isArray(element)){state=_assertClassBrand(_OptionalContentConfig_brand,this,_evaluateVisibilityExpression).call(this,element);}else if(_classPrivateFieldGet(_groups,this).has(element)){state=_classPrivateFieldGet(_groups,this).get(element).visible;}else{(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.warn)(`Optional content group not found: ${element}`);return true;}switch(operator){case\"And\":if(!state){return false;}break;case\"Or\":if(state){return true;}break;case\"Not\":return!state;default:return true;}}return operator===\"And\";}}),/***/814:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */cleanupTextLayer:()=>(/* binding */cleanupTextLayer),/* harmony export */renderTextLayer:()=>(/* binding */renderTextLayer),/* harmony export */updateTextLayer:()=>(/* binding */updateTextLayer)/* harmony export */});/* unused harmony export TextLayerRenderTask */ /* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(419);const MAX_TEXT_DIVS_TO_RENDER=100000;const DEFAULT_FONT_SIZE=30;const DEFAULT_FONT_ASCENT=0.8;const ascentCache=new Map();let _canvasContext=null;function getCtx(){if(!_canvasContext){const canvas=document.createElement(\"canvas\");canvas.className=\"hiddenCanvasElement\";document.body.append(canvas);_canvasContext=canvas.getContext(\"2d\",{alpha:false});}return _canvasContext;}function cleanupTextLayer(){_canvasContext?.canvas.remove();_canvasContext=null;}function getAscent(fontFamily){const cachedAscent=ascentCache.get(fontFamily);if(cachedAscent){return cachedAscent;}const ctx=getCtx();const savedFont=ctx.font;ctx.canvas.width=ctx.canvas.height=DEFAULT_FONT_SIZE;ctx.font=`${DEFAULT_FONT_SIZE}px ${fontFamily}`;const metrics=ctx.measureText(\"\");let ascent=metrics.fontBoundingBoxAscent;let descent=Math.abs(metrics.fontBoundingBoxDescent);if(ascent){const ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,ratio);ctx.canvas.width=ctx.canvas.height=0;ctx.font=savedFont;return ratio;}ctx.strokeStyle=\"red\";ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText(\"g\",0,0);let pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(let i=pixels.length-1-3;i>=0;i-=4){if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break;}}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText(\"A\",0,DEFAULT_FONT_SIZE);pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;ascent=0;for(let i=0,ii=pixels.length;i<ii;i+=4){if(pixels[i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(i/4/DEFAULT_FONT_SIZE);break;}}ctx.canvas.width=ctx.canvas.height=0;ctx.font=savedFont;if(ascent){const ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,ratio);return ratio;}ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT);return DEFAULT_FONT_ASCENT;}function appendText(task,geom,styles){const textDiv=document.createElement(\"span\");const textDivProperties={angle:0,canvasWidth:0,hasText:geom.str!==\"\",hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);const tx=_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util.transform(task._transform,geom.transform);let angle=Math.atan2(tx[1],tx[0]);const style=styles[geom.fontName];if(style.vertical){angle+=Math.PI/2;}const fontFamily=task._fontInspectorEnabled&&style.fontSubstitution||style.fontFamily;const fontHeight=Math.hypot(tx[2],tx[3]);const fontAscent=fontHeight*getAscent(fontFamily);let left,top;if(angle===0){left=tx[4];top=tx[5]-fontAscent;}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle);}const scaleFactorStr=\"calc(var(--scale-factor)*\";const divStyle=textDiv.style;if(task._container===task._rootContainer){divStyle.left=`${(100*left/task._pageWidth).toFixed(2)}%`;divStyle.top=`${(100*top/task._pageHeight).toFixed(2)}%`;}else{divStyle.left=`${scaleFactorStr}${left.toFixed(2)}px)`;divStyle.top=`${scaleFactorStr}${top.toFixed(2)}px)`;}divStyle.fontSize=`${scaleFactorStr}${fontHeight.toFixed(2)}px)`;divStyle.fontFamily=fontFamily;textDivProperties.fontSize=fontHeight;textDiv.setAttribute(\"role\",\"presentation\");textDiv.textContent=geom.str;textDiv.dir=geom.dir;if(task._fontInspectorEnabled){textDiv.dataset.fontName=style.fontSubstitutionLoadedName||geom.fontName;}if(angle!==0){textDivProperties.angle=angle*(180/Math.PI);}let shouldScaleText=false;if(geom.str.length>1){shouldScaleText=true;}else if(geom.str!==\" \"&&geom.transform[0]!==geom.transform[3]){const absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);if(absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5){shouldScaleText=true;}}if(shouldScaleText){textDivProperties.canvasWidth=style.vertical?geom.height:geom.width;}task._textDivProperties.set(textDiv,textDivProperties);if(task._isReadableStream){task._layoutText(textDiv);}}function layout(params){const{div,scale,properties,ctx,prevFontSize,prevFontFamily}=params;const{style}=div;let transform=\"\";if(properties.canvasWidth!==0&&properties.hasText){const{fontFamily}=style;const{canvasWidth,fontSize}=properties;if(prevFontSize!==fontSize||prevFontFamily!==fontFamily){ctx.font=`${fontSize*scale}px ${fontFamily}`;params.prevFontSize=fontSize;params.prevFontFamily=fontFamily;}const{width}=ctx.measureText(div.textContent);if(width>0){transform=`scaleX(${canvasWidth*scale/width})`;}}if(properties.angle!==0){transform=`rotate(${properties.angle}deg) ${transform}`;}if(transform.length>0){style.transform=transform;}}function render(task){if(task._canceled){return;}const textDivs=task._textDivs;const capability=task._capability;const textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){capability.resolve();return;}if(!task._isReadableStream){for(const textDiv of textDivs){task._layoutText(textDiv);}}capability.resolve();}class TextLayerRenderTask{constructor({textContentSource,container,viewport,textDivs,textDivProperties,textContentItemsStr}){this._textContentSource=textContentSource;this._isReadableStream=textContentSource instanceof ReadableStream;this._container=this._rootContainer=container;this._textDivs=textDivs||[];this._textContentItemsStr=textContentItemsStr||[];this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled;this._reader=null;this._textDivProperties=textDivProperties||new WeakMap();this._canceled=false;this._capability=Promise.withResolvers();this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:getCtx()};const{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;this._transform=[1,0,0,-1,-pageX,pageY+pageHeight];this._pageWidth=pageWidth;this._pageHeight=pageHeight;(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.setLayerDimensions)(container,viewport);this._capability.promise.finally(()=>{this._layoutTextParams=null;}).catch(()=>{});}get promise(){return this._capability.promise;}cancel(){this._canceled=true;if(this._reader){this._reader.cancel(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"TextLayer task cancelled.\")).catch(()=>{});this._reader=null;}this._capability.reject(new _shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(\"TextLayer task cancelled.\"));}_processItems(items,styleCache){for(const item of items){if(item.str===undefined){if(item.type===\"beginMarkedContentProps\"||item.type===\"beginMarkedContent\"){const parent=this._container;this._container=document.createElement(\"span\");this._container.classList.add(\"markedContent\");if(item.id!==null){this._container.setAttribute(\"id\",`${item.id}`);}parent.append(this._container);}else if(item.type===\"endMarkedContent\"){this._container=this._container.parentNode;}continue;}this._textContentItemsStr.push(item.str);appendText(this,item,styleCache);}}_layoutText(textDiv){const textDivProperties=this._layoutTextParams.properties=this._textDivProperties.get(textDiv);this._layoutTextParams.div=textDiv;layout(this._layoutTextParams);if(textDivProperties.hasText){this._container.append(textDiv);}if(textDivProperties.hasEOL){const br=document.createElement(\"br\");br.setAttribute(\"role\",\"presentation\");this._container.append(br);}}_render(){const{promise,resolve,reject}=Promise.withResolvers();let styleCache=Object.create(null);if(this._isReadableStream){const pump=()=>{this._reader.read().then(({value,done})=>{if(done){resolve();return;}Object.assign(styleCache,value.styles);this._processItems(value.items,styleCache);pump();},reject);};this._reader=this._textContentSource.getReader();pump();}else if(this._textContentSource){const{items,styles}=this._textContentSource;this._processItems(items,styles);resolve();}else{throw new Error('No \"textContentSource\" parameter specified.');}promise.then(()=>{styleCache=null;render(this);},this._capability.reject);}}function renderTextLayer(params){const task=new TextLayerRenderTask(params);task._render();return task;}function updateTextLayer({container,viewport,textDivs,textDivProperties,mustRotate=true,mustRescale=true}){if(mustRotate){(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.setLayerDimensions)(container,{rotation:viewport.rotation});}if(mustRescale){const ctx=getCtx();const scale=viewport.scale*(globalThis.devicePixelRatio||1);const params={prevFontSize:null,prevFontFamily:null,div:null,scale,properties:null,ctx};for(const div of textDivs){params.properties=textDivProperties.get(div);params.div=div;layout(params);}}}/***/}),/***/585:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */PDFDataTransportStream:()=>(/* binding */PDFDataTransportStream)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _display_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(419);class PDFDataTransportStream{constructor(pdfDataRangeTransport,{disableRange=false,disableStream=false}){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');const{length,initialData,progressiveDone,contentDispositionFilename}=pdfDataRangeTransport;this._queuedChunks=[];this._progressiveDone=progressiveDone;this._contentDispositionFilename=contentDispositionFilename;if(initialData?.length>0){const buffer=initialData instanceof Uint8Array&&initialData.byteLength===initialData.buffer.byteLength?initialData.buffer:new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer);}this._pdfDataRangeTransport=pdfDataRangeTransport;this._isStreamingSupported=!disableStream;this._isRangeSupported=!disableRange;this._contentLength=length;this._fullRequestReader=null;this._rangeReaders=[];pdfDataRangeTransport.addRangeListener((begin,chunk)=>{this._onReceiveData({begin,chunk});});pdfDataRangeTransport.addProgressListener((loaded,total)=>{this._onProgress({loaded,total});});pdfDataRangeTransport.addProgressiveReadListener(chunk=>{this._onReceiveData({chunk});});pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone();});pdfDataRangeTransport.transportReady();}_onReceiveData({begin,chunk}){const buffer=chunk instanceof Uint8Array&&chunk.byteLength===chunk.buffer.byteLength?chunk.buffer:new Uint8Array(chunk).buffer;if(begin===undefined){if(this._fullRequestReader){this._fullRequestReader._enqueue(buffer);}else{this._queuedChunks.push(buffer);}}else{const found=this._rangeReaders.some(function(rangeReader){if(rangeReader._begin!==begin){return false;}rangeReader._enqueue(buffer);return true;});(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(found,\"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}_onProgress(evt){if(evt.total===undefined){this._rangeReaders[0]?.onProgress?.({loaded:evt.loaded});}else{this._fullRequestReader?.onProgress?.({loaded:evt.loaded,total:evt.total});}}_onProgressiveDone(){this._fullRequestReader?.progressiveDone();this._progressiveDone=true;}_removeRangeReader(reader){const i=this._rangeReaders.indexOf(reader);if(i>=0){this._rangeReaders.splice(i,1);}}getFullReader(){(0,_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(!this._fullRequestReader,\"PDFDataTransportStream.getFullReader can only be called once.\");const queuedChunks=this._queuedChunks;this._queuedChunks=null;return new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename);}getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}const reader=new PDFDataTransportStreamRangeReader(this,begin,end);this._pdfDataRangeTransport.requestDataRange(begin,end);this._rangeReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeReaders.slice(0)){reader.cancel(reason);}this._pdfDataRangeTransport.abort();}}class PDFDataTransportStreamReader{constructor(stream,queuedChunks,progressiveDone=false,contentDispositionFilename=null){this._stream=stream;this._done=progressiveDone||false;this._filename=(0,_display_utils_js__WEBPACK_IMPORTED_MODULE_1__.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null;this._queuedChunks=queuedChunks||[];this._loaded=0;for(const chunk of this._queuedChunks){this._loaded+=chunk.byteLength;}this._requests=[];this._headersReady=Promise.resolve();stream._fullRequestReader=this;this.onProgress=null;}_enqueue(chunk){if(this._done){return;}if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunks.push(chunk);}this._loaded+=chunk.byteLength;}get headersReady(){return this._headersReady;}get filename(){return this._filename;}get isRangeSupported(){return this._stream._isRangeSupported;}get isStreamingSupported(){return this._stream._isStreamingSupported;}get contentLength(){return this._stream._contentLength;}async read(){if(this._queuedChunks.length>0){const chunk=this._queuedChunks.shift();return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}progressiveDone(){if(this._done){return;}this._done=true;}}class PDFDataTransportStreamRangeReader{constructor(stream,begin,end){this._stream=stream;this._begin=begin;this._end=end;this._queuedChunk=null;this._requests=[];this._done=false;this.onProgress=null;}_enqueue(chunk){if(this._done){return;}if(this._requests.length===0){this._queuedChunk=chunk;}else{const requestsCapability=this._requests.shift();requestsCapability.resolve({value:chunk,done:false});for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}this._done=true;this._stream._removeRangeReader(this);}get isStreamingSupported(){return false;}async read(){if(this._queuedChunk){const chunk=this._queuedChunk;this._queuedChunk=null;return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;this._stream._removeRangeReader(this);}}/***/}),/***/164:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */GlobalWorkerOptions:()=>(/* binding */GlobalWorkerOptions)/* harmony export */});class GlobalWorkerOptions{static get workerPort(){return _assertClassBrand(GlobalWorkerOptions,this,_port)._;}static set workerPort(val){if(!(typeof Worker!==\"undefined\"&&val instanceof Worker)&&val!==null){throw new Error(\"Invalid `workerPort` type.\");}_port._=_assertClassBrand(GlobalWorkerOptions,this,val);}static get workerSrc(){return _assertClassBrand(GlobalWorkerOptions,this,_src)._;}static set workerSrc(val){if(typeof val!==\"string\"){throw new Error(\"Invalid `workerSrc` type.\");}_src._=_assertClassBrand(GlobalWorkerOptions,this,val);}}/***/var _port={_:null};var _src={_:\"\"};}),/***/284:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */XfaLayer:()=>(/* binding */XfaLayer)/* harmony export */});/* harmony import */var _xfa_text_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(50);class XfaLayer{static setupStorage(html,id,element,storage,intent){const storedData=storage.getValue(id,{value:null});switch(element.name){case\"textarea\":if(storedData.value!==null){html.textContent=storedData.value;}if(intent===\"print\"){break;}html.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});});break;case\"input\":if(element.attributes.type===\"radio\"||element.attributes.type===\"checkbox\"){if(storedData.value===element.attributes.xfaOn){html.setAttribute(\"checked\",true);}else if(storedData.value===element.attributes.xfaOff){html.removeAttribute(\"checked\");}if(intent===\"print\"){break;}html.addEventListener(\"change\",event=>{storage.setValue(id,{value:event.target.checked?event.target.getAttribute(\"xfaOn\"):event.target.getAttribute(\"xfaOff\")});});}else{if(storedData.value!==null){html.setAttribute(\"value\",storedData.value);}if(intent===\"print\"){break;}html.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});});}break;case\"select\":if(storedData.value!==null){html.setAttribute(\"value\",storedData.value);for(const option of element.children){if(option.attributes.value===storedData.value){option.attributes.selected=true;}else if(option.attributes.hasOwnProperty(\"selected\")){delete option.attributes.selected;}}}html.addEventListener(\"input\",event=>{const options=event.target.options;const value=options.selectedIndex===-1?\"\":options[options.selectedIndex].value;storage.setValue(id,{value});});break;}}static setAttributes({html,element,storage=null,intent,linkService}){const{attributes}=element;const isHTMLAnchorElement=html instanceof HTMLAnchorElement;if(attributes.type===\"radio\"){attributes.name=`${attributes.name}-${intent}`;}for(const[key,value]of Object.entries(attributes)){if(value===null||value===undefined){continue;}switch(key){case\"class\":if(value.length){html.setAttribute(key,value.join(\" \"));}break;case\"dataId\":break;case\"id\":html.setAttribute(\"data-element-id\",value);break;case\"style\":Object.assign(html.style,value);break;case\"textContent\":html.textContent=value;break;default:if(!isHTMLAnchorElement||key!==\"href\"&&key!==\"newWindow\"){html.setAttribute(key,value);}}}if(isHTMLAnchorElement){linkService.addLinkAttributes(html,attributes.href,attributes.newWindow);}if(storage&&attributes.dataId){this.setupStorage(html,attributes.dataId,element,storage);}}static render(parameters){const storage=parameters.annotationStorage;const linkService=parameters.linkService;const root=parameters.xfaHtml;const intent=parameters.intent||\"display\";const rootHtml=document.createElement(root.name);if(root.attributes){this.setAttributes({html:rootHtml,element:root,intent,linkService});}const isNotForRichText=intent!==\"richText\";const rootDiv=parameters.div;rootDiv.append(rootHtml);if(parameters.viewport){const transform=`matrix(${parameters.viewport.transform.join(\",\")})`;rootDiv.style.transform=transform;}if(isNotForRichText){rootDiv.setAttribute(\"class\",\"xfaLayer xfaFont\");}const textDivs=[];if(root.children.length===0){if(root.value){const node=document.createTextNode(root.value);rootHtml.append(node);if(isNotForRichText&&_xfa_text_js__WEBPACK_IMPORTED_MODULE_0__.XfaText.shouldBuildText(root.name)){textDivs.push(node);}}return{textDivs};}const stack=[[root,-1,rootHtml]];while(stack.length>0){const[parent,i,html]=stack.at(-1);if(i+1===parent.children.length){stack.pop();continue;}const child=parent.children[++stack.at(-1)[1]];if(child===null){continue;}const{name}=child;if(name===\"#text\"){const node=document.createTextNode(child.value);textDivs.push(node);html.append(node);continue;}const childHtml=child?.attributes?.xmlns?document.createElementNS(child.attributes.xmlns,name):document.createElement(name);html.append(childHtml);if(child.attributes){this.setAttributes({html:childHtml,element:child,storage,intent,linkService});}if(child.children?.length>0){stack.push([child,-1,childHtml]);}else if(child.value){const node=document.createTextNode(child.value);if(isNotForRichText&&_xfa_text_js__WEBPACK_IMPORTED_MODULE_0__.XfaText.shouldBuildText(name)){textDivs.push(node);}childHtml.append(node);}}for(const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")){el.setAttribute(\"readOnly\",true);}return{textDivs};}static update(parameters){const transform=`matrix(${parameters.viewport.transform.join(\",\")})`;parameters.div.style.transform=transform;parameters.div.hidden=false;}}/***/}),/***/50:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */XfaText:()=>(/* binding */XfaText)/* harmony export */});class XfaText{static textContent(xfa){const items=[];const output={items,styles:Object.create(null)};function walk(node){if(!node){return;}let str=null;const name=node.name;if(name===\"#text\"){str=node.value;}else if(!XfaText.shouldBuildText(name)){return;}else if(node?.attributes?.textContent){str=node.attributes.textContent;}else if(node.value){str=node.value;}if(str!==null){items.push({str});}if(!node.children){return;}for(const child of node.children){walk(child);}}walk(xfa);return output;}static shouldBuildText(name){return!(name===\"textarea\"||name===\"input\"||name===\"option\"||name===\"select\");}}/***/}),/***/228:(/***/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */AbortException:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException),/* harmony export */AnnotationEditorLayer:()=>(/* reexport safe */_display_editor_annotation_editor_layer_js__WEBPACK_IMPORTED_MODULE_4__.AnnotationEditorLayer),/* harmony export */AnnotationEditorParamsType:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType),/* harmony export */AnnotationEditorType:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType),/* harmony export */AnnotationEditorUIManager:()=>(/* reexport safe */_display_editor_tools_js__WEBPACK_IMPORTED_MODULE_5__.AnnotationEditorUIManager),/* harmony export */AnnotationLayer:()=>(/* reexport safe */_display_annotation_layer_js__WEBPACK_IMPORTED_MODULE_6__.AnnotationLayer),/* harmony export */AnnotationMode:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode),/* harmony export */CMapCompressionType:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType),/* harmony export */ColorPicker:()=>(/* reexport safe */_display_editor_color_picker_js__WEBPACK_IMPORTED_MODULE_7__.ColorPicker),/* harmony export */DOMSVGFactory:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.DOMSVGFactory),/* harmony export */DrawLayer:()=>(/* reexport safe */_display_draw_layer_js__WEBPACK_IMPORTED_MODULE_8__.DrawLayer),/* harmony export */FeatureTest:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.FeatureTest),/* harmony export */GlobalWorkerOptions:()=>(/* reexport safe */_display_worker_options_js__WEBPACK_IMPORTED_MODULE_10__.GlobalWorkerOptions),/* harmony export */ImageKind:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.ImageKind),/* harmony export */InvalidPDFException:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.InvalidPDFException),/* harmony export */MissingPDFException:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException),/* harmony export */OPS:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.OPS),/* harmony export */Outliner:()=>(/* reexport safe */_display_editor_outliner_js__WEBPACK_IMPORTED_MODULE_9__.Outliner),/* harmony export */PDFDataRangeTransport:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.PDFDataRangeTransport),/* harmony export */PDFDateString:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PDFDateString),/* harmony export */PDFWorker:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.PDFWorker),/* harmony export */PasswordResponses:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordResponses),/* harmony export */PermissionFlag:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.PermissionFlag),/* harmony export */PixelsPerInch:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.PixelsPerInch),/* harmony export */RenderingCancelledException:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingCancelledException),/* harmony export */UnexpectedResponseException:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException),/* harmony export */Util:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.Util),/* harmony export */VerbosityLevel:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.VerbosityLevel),/* harmony export */XfaLayer:()=>(/* reexport safe */_display_xfa_layer_js__WEBPACK_IMPORTED_MODULE_11__.XfaLayer),/* harmony export */build:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.build),/* harmony export */createValidAbsoluteUrl:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.createValidAbsoluteUrl),/* harmony export */fetchData:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.fetchData),/* harmony export */getDocument:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.getDocument),/* harmony export */getFilenameFromUrl:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getFilenameFromUrl),/* harmony export */getPdfFilenameFromUrl:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getPdfFilenameFromUrl),/* harmony export */getXfaPageViewport:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.getXfaPageViewport),/* harmony export */isDataScheme:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isDataScheme),/* harmony export */isPdfFile:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.isPdfFile),/* harmony export */noContextMenu:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.noContextMenu),/* harmony export */normalizeUnicode:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeUnicode),/* harmony export */renderTextLayer:()=>(/* reexport safe */_display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__.renderTextLayer),/* harmony export */setLayerDimensions:()=>(/* reexport safe */_display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__.setLayerDimensions),/* harmony export */shadow:()=>(/* reexport safe */_shared_util_js__WEBPACK_IMPORTED_MODULE_0__.shadow),/* harmony export */updateTextLayer:()=>(/* reexport safe */_display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__.updateTextLayer),/* harmony export */version:()=>(/* reexport safe */_display_api_js__WEBPACK_IMPORTED_MODULE_1__.version)/* harmony export */});/* harmony import */var _shared_util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);/* harmony import */var _display_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(831);/* harmony import */var _display_display_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(419);/* harmony import */var _display_text_layer_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(814);/* harmony import */var _display_editor_annotation_editor_layer_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(731);/* harmony import */var _display_editor_tools_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(830);/* harmony import */var _display_annotation_layer_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(976);/* harmony import */var _display_editor_color_picker_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(259);/* harmony import */var _display_draw_layer_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(47);/* harmony import */var _display_worker_options_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(164);/* harmony import */var _display_editor_outliner_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(61);/* harmony import */var _display_xfa_layer_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(284);var __webpack_async_dependencies__=__webpack_handle_async_dependencies__([_display_api_js__WEBPACK_IMPORTED_MODULE_1__]);_display_api_js__WEBPACK_IMPORTED_MODULE_1__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];const pdfjsVersion=\"4.2.67\";const pdfjsBuild=\"49b388101\";__webpack_async_result__();}catch(e){__webpack_async_result__(e);}});/***/}),/***/178:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */MessageHandler:()=>(/* binding */MessageHandler)/* harmony export */});/* harmony import */var _util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(292);const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2};const StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){if(!(reason instanceof Error||typeof reason===\"object\"&&reason!==null)){(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.unreachable)('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');}switch(reason.name){case\"AbortException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.AbortException(reason.message);case\"MissingPDFException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException(reason.message);case\"PasswordException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.PasswordException(reason.message,reason.code);case\"UnexpectedResponseException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException(reason.message,reason.status);case\"UnknownErrorException\":return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(reason.message,reason.details);default:return new _util_js__WEBPACK_IMPORTED_MODULE_0__.UnknownErrorException(reason.message,reason.toString());}}var _MessageHandler_brand=/*#__PURE__*/new WeakSet();class MessageHandler{constructor(_sourceName,_targetName,_comObj){_classPrivateMethodInitSpec(this,_MessageHandler_brand);this.sourceName=_sourceName;this.targetName=_targetName;this.comObj=_comObj;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName){return;}if(data.stream){_assertClassBrand(_MessageHandler_brand,this,_processStreamMessage).call(this,data);return;}if(data.callback){const callbackId=data.callbackId;const capability=this.callbackCapabilities[callbackId];if(!capability){throw new Error(`Cannot resolve callback ${callbackId}`);}delete this.callbackCapabilities[callbackId];if(data.callback===CallbackKind.DATA){capability.resolve(data.data);}else if(data.callback===CallbackKind.ERROR){capability.reject(wrapReason(data.reason));}else{throw new Error(\"Unexpected callback case\");}return;}const action=this.actionHandler[data.action];if(!action){throw new Error(`Unknown action from worker: ${data.action}`);}if(data.callbackId){const cbSourceName=this.sourceName;const cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data));}).then(function(result){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result});},function(reason){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)});});return;}if(data.streamId){_assertClassBrand(_MessageHandler_brand,this,_createStreamSink).call(this,data);return;}action(data.data);};_comObj.addEventListener(\"message\",this._onComObjOnMessage);}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName]){throw new Error(`There is already an actionName called \"${actionName}\"`);}ah[actionName]=handler;}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers);}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++;const capability=Promise.withResolvers();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers);}catch(ex){capability.reject(ex);}return capability.promise;}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=Promise.withResolvers();this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:false};comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers);return startCapability.promise;},pull:controller=>{const pullCapability=Promise.withResolvers();this.streamControllers[streamId].pullCall=pullCapability;comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize});return pullCapability.promise;},cancel:reason=>{(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(reason instanceof Error,\"cancel must have a valid reason\");const cancelCapability=Promise.withResolvers();this.streamControllers[streamId].cancelCall=cancelCapability;this.streamControllers[streamId].isClosed=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)});return cancelCapability.promise;}},queueingStrategy);}destroy(){this.comObj.removeEventListener(\"message\",this._onComObjOnMessage);}}/***/function _createStreamSink(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;const self=this,action=this.actionHandler[data.action];const streamSink={enqueue(chunk,size=1,transfers){if(this.isCancelled){return;}const lastDesiredSize=this.desiredSize;this.desiredSize-=size;if(lastDesiredSize>0&&this.desiredSize<=0){this.sinkCapability=Promise.withResolvers();this.ready=this.sinkCapability.promise;}comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers);},close(){if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId});delete self.streamSinks[streamId];},error(reason){(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(reason instanceof Error,\"error must have a valid reason\");if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)});},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:false,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve();streamSink.ready=streamSink.sinkCapability.promise;this.streamSinks[streamId]=streamSink;new Promise(function(resolve){resolve(action(data.data,streamSink));}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)});});}function _processStreamMessage(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;const streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:if(data.success){streamController.startCall.resolve();}else{streamController.startCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL_COMPLETE:if(data.success){streamController.pullCall.resolve();}else{streamController.pullCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:true});break;}if(streamSink.desiredSize<=0&&data.desiredSize>0){streamSink.sinkCapability.resolve();}streamSink.desiredSize=data.desiredSize;new Promise(function(resolve){resolve(streamSink.onPull?.());}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)});});break;case StreamKind.ENQUEUE:(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController,\"enqueue should have stream controller\");if(streamController.isClosed){break;}streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController,\"close should have stream controller\");if(streamController.isClosed){break;}streamController.isClosed=true;streamController.controller.close();_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.ERROR:(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.assert)(streamController,\"error should have stream controller\");streamController.controller.error(wrapReason(data.reason));_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:if(data.success){streamController.cancelCall.resolve();}else{streamController.cancelCall.reject(wrapReason(data.reason));}_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink){break;}new Promise(function(resolve){resolve(streamSink.onCancel?.(wrapReason(data.reason)));}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)});});streamSink.sinkCapability.reject(wrapReason(data.reason));streamSink.isCancelled=true;delete this.streamSinks[streamId];break;default:throw new Error(\"Unexpected stream case\");}}async function _deleteStreamController(streamController,streamId){await Promise.allSettled([streamController.startCall?.promise,streamController.pullCall?.promise,streamController.cancelCall?.promise]);delete this.streamControllers[streamId];}}),/***/651:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */MurmurHash3_64:()=>(/* binding */MurmurHash3_64)/* harmony export */});const SEED=0xc3d2e1f0;const MASK_HIGH=0xffff0000;const MASK_LOW=0xffff;class MurmurHash3_64{constructor(seed){this.h1=seed?seed&0xffffffff:SEED;this.h2=seed?seed&0xffffffff:SEED;}update(input){let data,length;if(typeof input===\"string\"){data=new Uint8Array(input.length*2);length=0;for(let i=0,ii=input.length;i<ii;i++){const code=input.charCodeAt(i);if(code<=0xff){data[length++]=code;}else{data[length++]=code>>>8;data[length++]=code&0xff;}}}else if(ArrayBuffer.isView(input)){data=input.slice();length=data.byteLength;}else{throw new Error(\"Invalid data format, must be a string or TypedArray.\");}const blockCounts=length>>2;const tailLength=length-blockCounts*4;const dataUint32=new Uint32Array(data.buffer,0,blockCounts);let k1=0,k2=0;let h1=this.h1,h2=this.h2;const C1=0xcc9e2d51,C2=0x1b873593;const C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(let i=0;i<blockCounts;i++){if(i&1){k1=dataUint32[i];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;h1^=k1;h1=h1<<13|h1>>>19;h1=h1*5+0xe6546b64;}else{k2=dataUint32[i];k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW;k2=k2<<15|k2>>>17;k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW;h2^=k2;h2=h2<<13|h2>>>19;h2=h2*5+0xe6546b64;}}k1=0;switch(tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;if(blockCounts&1){h1^=k1;}else{h2^=k1;}}this.h1=h1;this.h2=h2;}hexdigest(){let h1=this.h1,h2=this.h2;h1^=h2>>>1;h1=h1*0xed558ccd&MASK_HIGH|h1*0x8ccd&MASK_LOW;h2=h2*0xff51afd7&MASK_HIGH|((h2<<16|h1>>>16)*0xafd7ed55&MASK_HIGH)>>>16;h1^=h2>>>1;h1=h1*0x1a85ec53&MASK_HIGH|h1*0xec53&MASK_LOW;h2=h2*0xc4ceb9fe&MASK_HIGH|((h2<<16|h1>>>16)*0xb9fe1a85&MASK_HIGH)>>>16;h1^=h2>>>1;return(h1>>>0).toString(16).padStart(8,\"0\")+(h2>>>0).toString(16).padStart(8,\"0\");}}/***/}),/***/292:(/***/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var _Util;/* harmony export */__webpack_require__.d(__webpack_exports__,{/* harmony export */AbortException:()=>(/* binding */AbortException),/* harmony export */AnnotationBorderStyleType:()=>(/* binding */AnnotationBorderStyleType),/* harmony export */AnnotationEditorParamsType:()=>(/* binding */AnnotationEditorParamsType),/* harmony export */AnnotationEditorPrefix:()=>(/* binding */AnnotationEditorPrefix),/* harmony export */AnnotationEditorType:()=>(/* binding */AnnotationEditorType),/* harmony export */AnnotationMode:()=>(/* binding */AnnotationMode),/* harmony export */AnnotationPrefix:()=>(/* binding */AnnotationPrefix),/* harmony export */AnnotationType:()=>(/* binding */AnnotationType),/* harmony export */BaseException:()=>(/* binding */BaseException),/* harmony export */CMapCompressionType:()=>(/* binding */CMapCompressionType),/* harmony export */FONT_IDENTITY_MATRIX:()=>(/* binding */FONT_IDENTITY_MATRIX),/* harmony export */FeatureTest:()=>(/* binding */FeatureTest),/* harmony export */FontRenderOps:()=>(/* binding */FontRenderOps),/* harmony export */FormatError:()=>(/* binding */FormatError),/* harmony export */IDENTITY_MATRIX:()=>(/* binding */IDENTITY_MATRIX),/* harmony export */ImageKind:()=>(/* binding */ImageKind),/* harmony export */InvalidPDFException:()=>(/* binding */InvalidPDFException),/* harmony export */LINE_FACTOR:()=>(/* binding */LINE_FACTOR),/* harmony export */MAX_IMAGE_SIZE_TO_CACHE:()=>(/* binding */MAX_IMAGE_SIZE_TO_CACHE),/* harmony export */MissingPDFException:()=>(/* binding */MissingPDFException),/* harmony export */OPS:()=>(/* binding */OPS),/* harmony export */PasswordException:()=>(/* binding */PasswordException),/* harmony export */PasswordResponses:()=>(/* binding */PasswordResponses),/* harmony export */PermissionFlag:()=>(/* binding */PermissionFlag),/* harmony export */RenderingIntentFlag:()=>(/* binding */RenderingIntentFlag),/* harmony export */TextRenderingMode:()=>(/* binding */TextRenderingMode),/* harmony export */UnexpectedResponseException:()=>(/* binding */UnexpectedResponseException),/* harmony export */UnknownErrorException:()=>(/* binding */UnknownErrorException),/* harmony export */Util:()=>(/* binding */Util),/* harmony export */VerbosityLevel:()=>(/* binding */VerbosityLevel),/* harmony export */assert:()=>(/* binding */assert),/* harmony export */bytesToString:()=>(/* binding */bytesToString),/* harmony export */createValidAbsoluteUrl:()=>(/* binding */createValidAbsoluteUrl),/* harmony export */getUuid:()=>(/* binding */getUuid),/* harmony export */getVerbosityLevel:()=>(/* binding */getVerbosityLevel),/* harmony export */info:()=>(/* binding */info),/* harmony export */isNodeJS:()=>(/* binding */isNodeJS),/* harmony export */normalizeUnicode:()=>(/* binding */normalizeUnicode),/* harmony export */objectFromMap:()=>(/* binding */objectFromMap),/* harmony export */setVerbosityLevel:()=>(/* binding */setVerbosityLevel),/* harmony export */shadow:()=>(/* binding */shadow),/* harmony export */string32:()=>(/* binding */string32),/* harmony export */stringToBytes:()=>(/* binding */stringToBytes),/* harmony export */unreachable:()=>(/* binding */unreachable),/* harmony export */warn:()=>(/* binding */warn)/* harmony export */});/* unused harmony exports AnnotationActionEventType, AnnotationFieldFlag, AnnotationFlag, AnnotationReplyType, BASELINE_FACTOR, DocumentActionEventType, getModificationDate, isArrayEqual, LINE_DESCENT_FACTOR, objectSize, PageActionEventType, stringToPDFString, stringToUTF8String, utf8StringToString */const isNodeJS=typeof process===\"object\"&&process+\"\"===\"[object process]\"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!==\"browser\");const IDENTITY_MATRIX=[1,0,0,1,0,0];const FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];const MAX_IMAGE_SIZE_TO_CACHE=10e6;const LINE_FACTOR=1.35;const LINE_DESCENT_FACTOR=0.35;const BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR;const RenderingIntentFlag={ANY:0x01,DISPLAY:0x02,PRINT:0x04,SAVE:0x08,ANNOTATIONS_FORMS:0x10,ANNOTATIONS_STORAGE:0x20,ANNOTATIONS_DISABLE:0x40,OPLIST:0x100};const AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};const AnnotationEditorPrefix=\"pdfjs_internal_editor_\";const AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15};const AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35};const PermissionFlag={PRINT:0x04,MODIFY_CONTENTS:0x08,COPY:0x10,MODIFY_ANNOTATIONS:0x20,FILL_INTERACTIVE_FORMS:0x100,COPY_FOR_ACCESSIBILITY:0x200,ASSEMBLE:0x400,PRINT_HIGH_QUALITY:0x800};const TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};const ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};const AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};const AnnotationReplyType={GROUP:\"Group\",REPLY:\"R\"};const AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};const AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};const AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};const AnnotationActionEventType={E:\"Mouse Enter\",X:\"Mouse Exit\",D:\"Mouse Down\",U:\"Mouse Up\",Fo:\"Focus\",Bl:\"Blur\",PO:\"PageOpen\",PC:\"PageClose\",PV:\"PageVisible\",PI:\"PageInvisible\",K:\"Keystroke\",F:\"Format\",V:\"Validate\",C:\"Calculate\"};const DocumentActionEventType={WC:\"WillClose\",WS:\"WillSave\",DS:\"DidSave\",WP:\"WillPrint\",DP:\"DidPrint\"};const PageActionEventType={O:\"PageOpen\",C:\"PageClose\"};const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};const CMapCompressionType={NONE:0,BINARY:1};const OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){if(Number.isInteger(level)){verbosity=level;}}function getVerbosityLevel(){return verbosity;}function info(msg){if(verbosity>=VerbosityLevel.INFOS){console.log(`Info: ${msg}`);}}function warn(msg){if(verbosity>=VerbosityLevel.WARNINGS){console.log(`Warning: ${msg}`);}}function unreachable(msg){throw new Error(msg);}function assert(cond,msg){if(!cond){unreachable(msg);}}function _isValidProtocol(url){switch(url?.protocol){case\"http:\":case\"https:\":case\"ftp:\":case\"mailto:\":case\"tel:\":return true;default:return false;}}function createValidAbsoluteUrl(url,baseUrl=null,options=null){if(!url){return null;}try{if(options&&typeof url===\"string\"){if(options.addDefaultProtocol&&url.startsWith(\"www.\")){const dots=url.match(/\\./g);if(dots?.length>=2){url=`http://${url}`;}}if(options.tryConvertEncoding){try{url=stringToUTF8String(url);}catch{}}}const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl)){return absoluteUrl;}}catch{}return null;}function shadow(obj,prop,value,nonSerializable=false){Object.defineProperty(obj,prop,{value,enumerable:!nonSerializable,configurable:true,writable:false});return value;}const BaseException=function BaseExceptionClosure(){function BaseException(message,name){if(this.constructor===BaseException){unreachable(\"Cannot initialize BaseException.\");}this.message=message;this.name=name;}BaseException.prototype=new Error();BaseException.constructor=BaseException;return BaseException;}();class PasswordException extends BaseException{constructor(msg,code){super(msg,\"PasswordException\");this.code=code;}}class UnknownErrorException extends BaseException{constructor(msg,details){super(msg,\"UnknownErrorException\");this.details=details;}}class InvalidPDFException extends BaseException{constructor(msg){super(msg,\"InvalidPDFException\");}}class MissingPDFException extends BaseException{constructor(msg){super(msg,\"MissingPDFException\");}}class UnexpectedResponseException extends BaseException{constructor(msg,status){super(msg,\"UnexpectedResponseException\");this.status=status;}}class FormatError extends BaseException{constructor(msg){super(msg,\"FormatError\");}}class AbortException extends BaseException{constructor(msg){super(msg,\"AbortException\");}}function bytesToString(bytes){if(typeof bytes!==\"object\"||bytes?.length===undefined){unreachable(\"Invalid argument for bytesToString\");}const length=bytes.length;const MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}const strBuf=[];for(let i=0;i<length;i+=MAX_ARGUMENT_COUNT){const chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);const chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}return strBuf.join(\"\");}function stringToBytes(str){if(typeof str!==\"string\"){unreachable(\"Invalid argument for stringToBytes\");}const length=str.length;const bytes=new Uint8Array(length);for(let i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xff;}return bytes;}function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}function objectSize(obj){return Object.keys(obj).length;}function objectFromMap(map){const obj=Object.create(null);for(const[key,value]of map){obj[key]=value;}return obj;}function isLittleEndian(){const buffer8=new Uint8Array(4);buffer8[0]=1;const view32=new Uint32Array(buffer8.buffer,0,1);return view32[0]===1;}function isEvalSupported(){try{new Function(\"\");return true;}catch{return false;}}class FeatureTest{static get isLittleEndian(){return shadow(this,\"isLittleEndian\",isLittleEndian());}static get isEvalSupported(){return shadow(this,\"isEvalSupported\",isEvalSupported());}static get isOffscreenCanvasSupported(){return shadow(this,\"isOffscreenCanvasSupported\",typeof OffscreenCanvas!==\"undefined\");}static get platform(){if(typeof navigator!==\"undefined\"&&typeof navigator?.platform===\"string\"){return shadow(this,\"platform\",{isMac:navigator.platform.includes(\"Mac\")});}return shadow(this,\"platform\",{isMac:false});}static get isCSSRoundSupported(){return shadow(this,\"isCSSRoundSupported\",globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));}}const hexNumbers=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,\"0\"));class Util{static makeHexColor(r,g,b){return`#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;}static scaleMinMax(transform,minMax){let temp;if(transform[0]){if(transform[0]<0){temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;}minMax[0]*=transform[0];minMax[2]*=transform[0];if(transform[3]<0){temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;}minMax[1]*=transform[3];minMax[3]*=transform[3];}else{temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;if(transform[1]<0){temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;}minMax[1]*=transform[1];minMax[3]*=transform[1];if(transform[2]<0){temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;}minMax[0]*=transform[2];minMax[2]*=transform[2];}minMax[0]+=transform[4];minMax[1]+=transform[5];minMax[2]+=transform[4];minMax[3]+=transform[5];}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];}static applyTransform(p,m){const xt=p[0]*m[0]+p[1]*m[2]+m[4];const yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2];const xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;const yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt];}static getAxialAlignedBoundingBox(r,m){const p1=this.applyTransform(r,m);const p2=this.applyTransform(r.slice(2,4),m);const p3=this.applyTransform([r[0],r[3]],m);const p4=this.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d];}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]];const a=m[0]*transpose[0]+m[1]*transpose[2];const b=m[0]*transpose[1]+m[1]*transpose[3];const c=m[2]*transpose[0]+m[3]*transpose[2];const d=m[2]*transpose[1]+m[3]*transpose[3];const first=(a+d)/2;const second=Math.sqrt((a+d)**2-4*(a*d-c*b))/2;const sx=first+second||1;const sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];}static normalizeRect(rect){const r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}return r;}static intersect(rect1,rect2){const xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2]));const xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh){return null;}const yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3]));const yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));if(yLow>yHigh){return null;}return[xLow,yLow,xHigh,yHigh];}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3,minMax){if(minMax){minMax[0]=Math.min(minMax[0],x0,x3);minMax[1]=Math.min(minMax[1],y0,y3);minMax[2]=Math.max(minMax[2],x0,x3);minMax[3]=Math.max(minMax[3],y0,y3);}else{minMax=[Math.min(x0,x3),Math.min(y0,y3),Math.max(x0,x3),Math.max(y0,y3)];}_assertClassBrand(Util,this,_getExtremum).call(this,x0,x1,x2,x3,y0,y1,y2,y3,3*(-x0+3*(x1-x2)+x3),6*(x0-2*x1+x2),3*(x1-x0),minMax);_assertClassBrand(Util,this,_getExtremum).call(this,x0,x1,x2,x3,y0,y1,y2,y3,3*(-y0+3*(y1-y2)+y3),6*(y0-2*y1+y2),3*(y1-y0),minMax);return minMax;}}_Util=Util;function _getExtremumOnCurve(x0,x1,x2,x3,y0,y1,y2,y3,t,minMax){if(t<=0||t>=1){return;}const mt=1-t;const tt=t*t;const ttt=tt*t;const x=mt*(mt*(mt*x0+3*t*x1)+3*tt*x2)+ttt*x3;const y=mt*(mt*(mt*y0+3*t*y1)+3*tt*y2)+ttt*y3;minMax[0]=Math.min(minMax[0],x);minMax[1]=Math.min(minMax[1],y);minMax[2]=Math.max(minMax[2],x);minMax[3]=Math.max(minMax[3],y);}function _getExtremum(x0,x1,x2,x3,y0,y1,y2,y3,a,b,c,minMax){if(Math.abs(a)<1e-12){if(Math.abs(b)>=1e-12){_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,-c/b,minMax);}return;}const delta=b**2-4*c*a;if(delta<0){return;}const sqrtDelta=Math.sqrt(delta);const a2=2*a;_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,(-b+sqrtDelta)/a2,minMax);_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,(-b-sqrtDelta)/a2,minMax);}const PDFStringTranslateTable=/* unused pure expression or super */null&&[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2d8,0x2c7,0x2c6,0x2d9,0x2dd,0x2db,0x2da,0x2dc,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2022,0x2020,0x2021,0x2026,0x2014,0x2013,0x192,0x2044,0x2039,0x203a,0x2212,0x2030,0x201e,0x201c,0x201d,0x2018,0x2019,0x201a,0x2122,0xfb01,0xfb02,0x141,0x152,0x160,0x178,0x17d,0x131,0x142,0x153,0x161,0x17e,0,0x20ac];function stringToPDFString(str){if(str[0]>=\"\\xEF\"){let encoding;if(str[0]===\"\\xFE\"&&str[1]===\"\\xFF\"){encoding=\"utf-16be\";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]===\"\\xFF\"&&str[1]===\"\\xFE\"){encoding=\"utf-16le\";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]===\"\\xEF\"&&str[1]===\"\\xBB\"&&str[2]===\"\\xBF\"){encoding=\"utf-8\";}if(encoding){try{const decoder=new TextDecoder(encoding,{fatal:true});const buffer=stringToBytes(str);const decoded=decoder.decode(buffer);if(!decoded.includes(\"\\x1b\")){return decoded;}return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g,\"\");}catch(ex){warn(`stringToPDFString: \"${ex}\".`);}}}const strBuf=[];for(let i=0,ii=str.length;i<ii;i++){const charCode=str.charCodeAt(i);if(charCode===0x1b){while(++i<ii&&str.charCodeAt(i)!==0x1b){}continue;}const code=PDFStringTranslateTable[charCode];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}return strBuf.join(\"\");}function stringToUTF8String(str){return decodeURIComponent(escape(str));}function utf8StringToString(str){return unescape(encodeURIComponent(str));}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length){return false;}for(let i=0,ii=arr1.length;i<ii;i++){if(arr1[i]!==arr2[i]){return false;}}return true;}function getModificationDate(date=new Date()){const buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,\"0\"),date.getUTCDate().toString().padStart(2,\"0\"),date.getUTCHours().toString().padStart(2,\"0\"),date.getUTCMinutes().toString().padStart(2,\"0\"),date.getUTCSeconds().toString().padStart(2,\"0\")];return buffer.join(\"\");}let NormalizeRegex=null;let NormalizationMap=null;function normalizeUnicode(str){if(!NormalizeRegex){NormalizeRegex=/([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;NormalizationMap=new Map([[\"ﬅ\",\"ſt\"]]);}return str.replaceAll(NormalizeRegex,(_,p1,p2)=>p1?p1.normalize(\"NFKC\"):NormalizationMap.get(p2));}function getUuid(){if(typeof crypto!==\"undefined\"&&typeof crypto?.randomUUID===\"function\"){return crypto.randomUUID();}const buf=new Uint8Array(32);if(typeof crypto!==\"undefined\"&&typeof crypto?.getRandomValues===\"function\"){crypto.getRandomValues(buf);}else{for(let i=0;i<32;i++){buf[i]=Math.floor(Math.random()*255);}}return bytesToString(buf);}const AnnotationPrefix=\"pdfjs_internal_id_\";const FontRenderOps={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};/***/})/******/};/************************************************************************/ /******/ // The module cache\n/******/var __webpack_module_cache__={};/******/ /******/ // The require function\n/******/function __webpack_require__(moduleId){/******/ // Check if module is in cache\n/******/var cachedModule=__webpack_module_cache__[moduleId];/******/if(cachedModule!==undefined){/******/return cachedModule.exports;/******/}/******/ // Create a new module (and put it into the cache)\n/******/var module=__webpack_module_cache__[moduleId]={/******/ // no module.id needed\n/******/ // no module.loaded needed\n/******/exports:{}/******/};/******/ /******/ // Execute the module function\n/******/__webpack_modules__[moduleId](module,module.exports,__webpack_require__);/******/ /******/ // Return the exports of the module\n/******/return module.exports;/******/}/******/ /************************************************************************/ /******/ /* webpack/runtime/async module */ /******/(()=>{/******/var webpackQueues=typeof Symbol===\"function\"?Symbol(\"webpack queues\"):\"__webpack_queues__\";/******/var webpackExports=typeof Symbol===\"function\"?Symbol(\"webpack exports\"):\"__webpack_exports__\";/******/var webpackError=typeof Symbol===\"function\"?Symbol(\"webpack error\"):\"__webpack_error__\";/******/var resolveQueue=queue=>{/******/if(queue&&queue.d<1){/******/queue.d=1;/******/queue.forEach(fn=>fn.r--);/******/queue.forEach(fn=>fn.r--?fn.r++:fn());/******/}/******/};/******/var wrapDeps=deps=>deps.map(dep=>{/******/if(dep!==null&&typeof dep===\"object\"){/******/if(dep[webpackQueues])return dep;/******/if(dep.then){/******/var queue=[];/******/queue.d=0;/******/dep.then(r=>{/******/obj[webpackExports]=r;/******/resolveQueue(queue);/******/},e=>{/******/obj[webpackError]=e;/******/resolveQueue(queue);/******/});/******/var obj={};/******/obj[webpackQueues]=fn=>fn(queue);/******/return obj;/******/}/******/}/******/var ret={};/******/ret[webpackQueues]=x=>{};/******/ret[webpackExports]=dep;/******/return ret;/******/});/******/__webpack_require__.a=(module,body,hasAwait)=>{/******/var queue;/******/hasAwait&&((queue=[]).d=-1);/******/var depQueues=new Set();/******/var exports=module.exports;/******/var currentDeps;/******/var outerResolve;/******/var reject;/******/var promise=new Promise((resolve,rej)=>{/******/reject=rej;/******/outerResolve=resolve;/******/});/******/promise[webpackExports]=exports;/******/promise[webpackQueues]=fn=>(queue&&fn(queue),depQueues.forEach(fn),promise[\"catch\"](x=>{}));/******/module.exports=promise;/******/body(deps=>{/******/currentDeps=wrapDeps(deps);/******/var fn;/******/var getResult=()=>currentDeps.map(d=>{/******/if(d[webpackError])throw d[webpackError];/******/return d[webpackExports];/******/});/******/var promise=new Promise(resolve=>{/******/fn=()=>resolve(getResult);/******/fn.r=0;/******/var fnQueue=q=>q!==queue&&!depQueues.has(q)&&(depQueues.add(q),q&&!q.d&&(fn.r++,q.push(fn)));/******/currentDeps.map(dep=>dep[webpackQueues](fnQueue));/******/});/******/return fn.r?promise:getResult();/******/},err=>(err?reject(promise[webpackError]=err):outerResolve(exports),resolveQueue(queue)));/******/queue&&queue.d<0&&(queue.d=0);/******/};/******/})();/******/ /******/ /* webpack/runtime/define property getters */ /******/(()=>{/******/ // define getter functions for harmony exports\n/******/__webpack_require__.d=(exports,definition)=>{/******/for(var key in definition){/******/if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){/******/Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});/******/}/******/}/******/};/******/})();/******/ /******/ /* webpack/runtime/hasOwnProperty shorthand */ /******/(()=>{/******/__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop);/******/})();/******/ /************************************************************************/ /******/ /******/ // startup\n/******/ // Load entry module and return exports\n/******/ // This entry module used 'module' so it can't be inlined\n/******/var __webpack_exports__=__webpack_require__(228);/******/__webpack_exports__=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=__webpack_exports__);/******/var __webpack_exports__AbortException=__webpack_exports__.AbortException;/******/var __webpack_exports__AnnotationEditorLayer=__webpack_exports__.AnnotationEditorLayer;/******/var __webpack_exports__AnnotationEditorParamsType=__webpack_exports__.AnnotationEditorParamsType;/******/var __webpack_exports__AnnotationEditorType=__webpack_exports__.AnnotationEditorType;/******/var __webpack_exports__AnnotationEditorUIManager=__webpack_exports__.AnnotationEditorUIManager;/******/var __webpack_exports__AnnotationLayer=__webpack_exports__.AnnotationLayer;/******/var __webpack_exports__AnnotationMode=__webpack_exports__.AnnotationMode;/******/var __webpack_exports__CMapCompressionType=__webpack_exports__.CMapCompressionType;/******/var __webpack_exports__ColorPicker=__webpack_exports__.ColorPicker;/******/var __webpack_exports__DOMSVGFactory=__webpack_exports__.DOMSVGFactory;/******/var __webpack_exports__DrawLayer=__webpack_exports__.DrawLayer;/******/var __webpack_exports__FeatureTest=__webpack_exports__.FeatureTest;/******/var __webpack_exports__GlobalWorkerOptions=__webpack_exports__.GlobalWorkerOptions;/******/var __webpack_exports__ImageKind=__webpack_exports__.ImageKind;/******/var __webpack_exports__InvalidPDFException=__webpack_exports__.InvalidPDFException;/******/var __webpack_exports__MissingPDFException=__webpack_exports__.MissingPDFException;/******/var __webpack_exports__OPS=__webpack_exports__.OPS;/******/var __webpack_exports__Outliner=__webpack_exports__.Outliner;/******/var __webpack_exports__PDFDataRangeTransport=__webpack_exports__.PDFDataRangeTransport;/******/var __webpack_exports__PDFDateString=__webpack_exports__.PDFDateString;/******/var __webpack_exports__PDFWorker=__webpack_exports__.PDFWorker;/******/var __webpack_exports__PasswordResponses=__webpack_exports__.PasswordResponses;/******/var __webpack_exports__PermissionFlag=__webpack_exports__.PermissionFlag;/******/var __webpack_exports__PixelsPerInch=__webpack_exports__.PixelsPerInch;/******/var __webpack_exports__RenderingCancelledException=__webpack_exports__.RenderingCancelledException;/******/var __webpack_exports__UnexpectedResponseException=__webpack_exports__.UnexpectedResponseException;/******/var __webpack_exports__Util=__webpack_exports__.Util;/******/var __webpack_exports__VerbosityLevel=__webpack_exports__.VerbosityLevel;/******/var __webpack_exports__XfaLayer=__webpack_exports__.XfaLayer;/******/var __webpack_exports__build=__webpack_exports__.build;/******/var __webpack_exports__createValidAbsoluteUrl=__webpack_exports__.createValidAbsoluteUrl;/******/var __webpack_exports__fetchData=__webpack_exports__.fetchData;/******/var __webpack_exports__getDocument=__webpack_exports__.getDocument;/******/var __webpack_exports__getFilenameFromUrl=__webpack_exports__.getFilenameFromUrl;/******/var __webpack_exports__getPdfFilenameFromUrl=__webpack_exports__.getPdfFilenameFromUrl;/******/var __webpack_exports__getXfaPageViewport=__webpack_exports__.getXfaPageViewport;/******/var __webpack_exports__isDataScheme=__webpack_exports__.isDataScheme;/******/var __webpack_exports__isPdfFile=__webpack_exports__.isPdfFile;/******/var __webpack_exports__noContextMenu=__webpack_exports__.noContextMenu;/******/var __webpack_exports__normalizeUnicode=__webpack_exports__.normalizeUnicode;/******/var __webpack_exports__renderTextLayer=__webpack_exports__.renderTextLayer;/******/var __webpack_exports__setLayerDimensions=__webpack_exports__.setLayerDimensions;/******/var __webpack_exports__shadow=__webpack_exports__.shadow;/******/var __webpack_exports__updateTextLayer=__webpack_exports__.updateTextLayer;/******/var __webpack_exports__version=__webpack_exports__.version;/******/export{__webpack_exports__AbortException as AbortException,__webpack_exports__AnnotationEditorLayer as AnnotationEditorLayer,__webpack_exports__AnnotationEditorParamsType as AnnotationEditorParamsType,__webpack_exports__AnnotationEditorType as AnnotationEditorType,__webpack_exports__AnnotationEditorUIManager as AnnotationEditorUIManager,__webpack_exports__AnnotationLayer as AnnotationLayer,__webpack_exports__AnnotationMode as AnnotationMode,__webpack_exports__CMapCompressionType as CMapCompressionType,__webpack_exports__ColorPicker as ColorPicker,__webpack_exports__DOMSVGFactory as DOMSVGFactory,__webpack_exports__DrawLayer as DrawLayer,__webpack_exports__FeatureTest as FeatureTest,__webpack_exports__GlobalWorkerOptions as GlobalWorkerOptions,__webpack_exports__ImageKind as ImageKind,__webpack_exports__InvalidPDFException as InvalidPDFException,__webpack_exports__MissingPDFException as MissingPDFException,__webpack_exports__OPS as OPS,__webpack_exports__Outliner as Outliner,__webpack_exports__PDFDataRangeTransport as PDFDataRangeTransport,__webpack_exports__PDFDateString as PDFDateString,__webpack_exports__PDFWorker as PDFWorker,__webpack_exports__PasswordResponses as PasswordResponses,__webpack_exports__PermissionFlag as PermissionFlag,__webpack_exports__PixelsPerInch as PixelsPerInch,__webpack_exports__RenderingCancelledException as RenderingCancelledException,__webpack_exports__UnexpectedResponseException as UnexpectedResponseException,__webpack_exports__Util as Util,__webpack_exports__VerbosityLevel as VerbosityLevel,__webpack_exports__XfaLayer as XfaLayer,__webpack_exports__build as build,__webpack_exports__createValidAbsoluteUrl as createValidAbsoluteUrl,__webpack_exports__fetchData as fetchData,__webpack_exports__getDocument as getDocument,__webpack_exports__getFilenameFromUrl as getFilenameFromUrl,__webpack_exports__getPdfFilenameFromUrl as getPdfFilenameFromUrl,__webpack_exports__getXfaPageViewport as getXfaPageViewport,__webpack_exports__isDataScheme as isDataScheme,__webpack_exports__isPdfFile as isPdfFile,__webpack_exports__noContextMenu as noContextMenu,__webpack_exports__normalizeUnicode as normalizeUnicode,__webpack_exports__renderTextLayer as renderTextLayer,__webpack_exports__setLayerDimensions as setLayerDimensions,__webpack_exports__shadow as shadow,__webpack_exports__updateTextLayer as updateTextLayer,__webpack_exports__version as version};/******/","map":{"version":3,"names":["makeColorComp","n","Math","floor","max","min","toString","padStart","scaleAndClamp","x","ColorConverters","CMYK_G","c","y","m","k","G_CMYK","g","G_RGB","G_rgb","G_HTML","G","RGB_G","r","b","RGB_rgb","color","map","RGB_HTML","join","T_HTML","T_rgb","CMYK_RGB","CMYK_rgb","CMYK_HTML","components","rgb","slice","RGB_CMYK","DEFAULT_TAB_INDEX","DEFAULT_FONT_SIZE","GetElementsByNameSet","WeakSet","getRectDims","rect","width","height","AnnotationElementFactory","create","parameters","subtype","data","annotationType","util","AnnotationType","LINK","LinkAnnotationElement","TEXT","TextAnnotationElement","WIDGET","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","POPUP","PopupAnnotationElement","FREETEXT","FreeTextAnnotationElement","LINE","LineAnnotationElement","SQUARE","SquareAnnotationElement","CIRCLE","CircleAnnotationElement","POLYLINE","PolylineAnnotationElement","CARET","CaretAnnotationElement","INK","InkAnnotationElement","POLYGON","PolygonAnnotationElement","HIGHLIGHT","HighlightAnnotationElement","UNDERLINE","UnderlineAnnotationElement","SQUIGGLY","SquigglyAnnotationElement","STRIKEOUT","StrikeOutAnnotationElement","STAMP","StampAnnotationElement","FILEATTACHMENT","FileAttachmentAnnotationElement","AnnotationElement","_updates","WeakMap","_hasBorder","_AnnotationElement_brand","constructor","isRenderable","ignoreBorder","createQuadrilaterals","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","layer","linkService","downloadManager","imageResourcesPath","renderForms","svgFactory","annotationStorage","enableScripting","hasJSActions","_fieldObjects","fieldObjects","parent","container","_createContainer","_createQuadrilaterals","_hasPopupData","titleObj","contentsObj","richText","str","hasPopupData","updateEdited","params","_classPrivateFieldGet","_classPrivateFieldSet","_assertClassBrand","_setRectEdited","call","resetEdited","page","viewport","document","createElement","setAttribute","id","tabIndex","style","zIndex","popupRef","alternativeText","title","noRotate","classList","add","rotation","hasOwnCanvas","setRotation","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","warn","INSET","borderBottomStyle","borderColor","Util","makeHexColor","normalizeRect","view","pageWidth","pageHeight","pageX","pageY","rawDims","left","top","angle","elementWidth","elementHeight","_commonActions","setColor","jsName","styleName","event","detail","colorType","colorArray","target","setValue","shadow","display","hidden","visibility","noView","noPrint","print","focus","setTimeout","preventScroll","userName","readonly","disabled","required","_setRequired","bgColor","fillColor","fgColor","textColor","strokeColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","name","Object","keys","action","_setDefaultPropertiesFromJS","element","storedData","getRawValue","actionName","entries","eventProxy","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","length","trX","trY","blX","blY","svgBuffer","svg","defs","append","clipPath","rectWidth","rectHeight","push","backgroundImage","_createPopup","popup","modificationDate","parentRect","elements","div","render","unreachable","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","querySelector","has","getElementsByName","getAttribute","show","maybeShow","hide","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","Array","isArray","_isEditable","_editOnDoubleClick","annotationEditorType","mode","editId","addEventListener","eventBus","dispatch","source","currentRect","splice","_LinkAnnotationElement_brand","options","isTooltipOnly","link","isBound","url","addLinkAttributes","newWindow","_bindNamedAction","attachment","_bindAttachment","attachmentDest","setOCGState","_bindSetOCGState","dest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","href","getDestinationHash","onclick","goToDestination","_setInternalLink","getAnchorUrl","executeNamedAction","Map","get","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","Set","fieldName","values","field","storage","allIds","type","value","defaultValue","dispatchEvent","Event","ids","openOrDownloadData","content","filename","executeSetOCGState","image","src","toLowerCase","JSON","stringify","showElementAndHideCanvas","previousSibling","nodeName","_getKeyModifier","FeatureTest","platform","isMac","metaKey","ctrlKey","_setEventListener","elementData","baseName","eventName","valueGetter","includes","shift","shiftKey","modifier","focused","relatedTarget","_setEventListeners","names","getter","Blur","Focus","_setBackgroundColor","backgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","fontSize","computedFontSize","BORDER_SIZE","roundToOneDecimal","round","multiLine","abs","numberOfLines","LINE_FACTOR","lineHeight","textAlignment","textAlign","isRequired","removeAttribute","hasAppearance","fieldValue","setPropertyOnSiblings","base","key","keyInStorage","getValue","textContent","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","replaceAll","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","undefined","scrollLeft","activeElement","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","match","substring","preventDefault","change","fieldWidth","combWidth","letterSpacing","verticalAlign","checked","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","lastChild","selectElement","addAnEmptyEntry","combo","size","multiSelect","multiple","option","selected","optionElement","displayValue","removeEmptyEntry","noneOptionElement","prepend","remove","removeEventListener","isExport","selectedIndex","prototype","filter","selectedValues","getItems","multipleSelection","index","i","findIndex","items","clear","insert","selectChild","children","before","item","indices","editable","changeEx","keyDown","PopupElement","open","elementIds","AnnotationPrefix","_boundKeyDown","_boundHide","_boundShow","_boundToggle","_color","_container","_contentsObj","_dateObj","_elements","_parent","_parentRect","_pinned","_popup","_rect","_richText","_titleObj","_wasVisible","_PopupElement_brand","_keyDown","bind","_hide","_show","_toggle","display_utils","PDFDateString","toDateObject","trigger","flatMap","e","className","baseColor","outlineColor","CSS","supports","BACKGROUND_ENLIGHT","header","dir","date","toLocaleDateString","time","toLocaleTimeString","xfa_layer","XfaLayer","xfaHtml","html","intent","contents","_formatContents","useParentRect","intersect","normalizedRect","HORIZONTAL_SPACE_AFTER_ANNOTATION","parentWidth","popupLeft","popupTop","p","lines","split","ii","line","createTextNode","isVisible","altKey","parseInt","textPosition","AnnotationEditorType","lineSpan","_line","lineCoordinates","_square","square","_circle","circle","_polyline","containerClassName","svgElementName","points","coordinate","vertices","polyline","_polylines","inkList","inkLists","_trigger","_FileAttachmentAnnotationElement_brand","file","getFilenameFromUrl","fillAlpha","test","_download","evt","_accessibilityManager","_annotationCanvasMap","_editableAnnotations","_AnnotationLayer_brand","AnnotationLayer","accessibilityManager","annotationCanvasMap","annotationEditorUIManager","_annotationEditorUIManager","annotations","setLayerDimensions","popupToElements","elementParams","DOMSVGFactory","annotation_storage","AnnotationStorage","noHTML","isPopupAnnotation","set","rendered","_appendElement","renderAnnotationElement","_setAnnotationCanvasMap","update","getEditableAnnotations","from","getEditableAnnotation","contentElement","firstChild","moveElementInDOM","canvas","replaceWith","contains","after","SerializableEmpty","freeze","hash","transfer","_modified","_storage","_AnnotationStorage_brand","onSetModified","onResetModified","onAnnotationEditor","assign","delete","resetModified","_editor_editor_js__WEBPACK_IMPORTED_MODULE_1__","AnnotationEditor","obj","modified","entry","val","_setModified","_type","getAll","_shared_util_js__WEBPACK_IMPORTED_MODULE_0__","objectFromMap","setAll","PrintAnnotationStorage","serializable","_shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_2__","MurmurHash3_64","context","hasBitmap","serialized","serialize","bitmap","hexdigest","editorStats","stats","typeToEditor","telemetryFinalData","getPrototypeOf","counters","count","editor","computeTelemetryFinalData","_serializable","clone","structuredClone","DEFAULT_RANGE_CHUNK_SIZE","RENDERING_CANCELLED_TIMEOUT","DELAYED_CLEANUP_TIMEOUT","DefaultCanvasFactory","isNodeJS","display_node_utils__WEBPACK_IMPORTED_MODULE_4__","NodeCanvasFactory","_display_utils_js__WEBPACK_IMPORTED_MODULE_2__","DOMCanvasFactory","DefaultCMapReaderFactory","NodeCMapReaderFactory","DOMCMapReaderFactory","DefaultFilterFactory","NodeFilterFactory","DOMFilterFactory","DefaultStandardFontDataFactory","NodeStandardFontDataFactory","DOMStandardFontDataFactory","getDocument","URL","ArrayBuffer","isView","Error","range","task","PDFDocumentLoadingTask","docId","getUrlProp","getDataProp","httpHeaders","withCredentials","password","rangeTransport","PDFDataRangeTransport","rangeChunkSize","Number","isInteger","worker","PDFWorker","verbosity","docBaseUrl","isDataScheme","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","stopAtErrors","maxImageSize","isEvalSupported","isOffscreenCanvasSupported","canvasMaxAreaInBytes","disableFontFace","fontExtraProperties","enableXfa","ownerDocument","globalThis","disableRange","disableStream","disableAutoFetch","pdfBug","NaN","useSystemFonts","useWorkerFetch","isValidFetchUrl","baseURI","canvasFactory","filterFactory","styleElement","setVerbosityLevel","transportFactory","cMapReaderFactory","baseUrl","isCompressed","standardFontDataFactory","workerParams","port","_worker_options_js__WEBPACK_IMPORTED_MODULE_14__","GlobalWorkerOptions","workerPort","fromPort","_worker","fetchDocParams","apiVersion","evaluatorOptions","transportParams","promise","then","destroyed","workerIdPromise","_fetchDocument","networkStreamPromise","Promise","resolve","networkStream","_transport_stream_js__WEBPACK_IMPORTED_MODULE_10__","PDFDataTransportStream","createPDFNetworkStream","isFetchSupported","fetch","Response","display_fetch_stream__WEBPACK_IMPORTED_MODULE_11__","PDFFetchStream","display_node_stream__WEBPACK_IMPORTED_MODULE_13__","PDFNodeStream","display_network__WEBPACK_IMPORTED_MODULE_12__","PDFNetworkStream","all","workerId","messageHandler","_shared_message_handler_js__WEBPACK_IMPORTED_MODULE_7__","MessageHandler","transport","WorkerTransport","_transport","send","catch","_capability","reject","sendWithPromise","buffer","window","location","Buffer","Uint8Array","byteLength","stringToBytes","isNaN","isRefProxy","ref","num","gen","_PDFDocumentLoadingTa","_PDFDocumentLoadingTa2","withResolvers","_docId","_","onPassword","onProgress","destroy","_pendingDestroy","ex","initialData","progressiveDone","contentDispositionFilename","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","addRangeListener","listener","addProgressListener","addProgressiveReadListener","addProgressiveDoneListener","onDataRange","begin","chunk","onDataProgress","loaded","total","onDataProgressiveRead","onDataProgressiveDone","transportReady","requestDataRange","end","abort","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","pageNumber","getPageIndex","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","renderingIntent","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","getData","saveDocument","getDownloadInfo","downloadInfoCapability","cleanup","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","loadingParams","getFieldObjects","getCalculationOrderIds","_delayedCleanupTimeout","_pendingCleanup","_PDFPageProxy_brand","PDFPageProxy","pageIndex","pageInfo","_pageIndex","_pageInfo","_stats","StatTimer","_pdfBug","commonObjs","objs","PDFObjects","_maybeCleanupAfterRender","_intentStates","rotate","userUnit","getViewport","scale","offsetX","offsetY","dontFlip","PageViewport","viewBox","getAnnotations","getPageJSActions","getXfa","canvasContext","annotationMode","AnnotationMode","ENABLE","transform","background","optionalContentConfigPromise","pageColors","printAnnotationStorage","intentArgs","cacheKey","_abortDelayedCleanup","intentState","streamReaderCancelTimeout","clearTimeout","intentPrint","RenderingIntentFlag","PRINT","displayReadyCapability","operatorList","fnArray","argsArray","lastChunk","separateAnnots","_pumpOperatorList","complete","error","renderTasks","internalRenderTask","_tryCleanup","capability","_abortOperatorList","reason","timeEnd","InternalRenderTask","callback","useRequestAnimationFrame","renderTask","transparency","optionalContentConfig","initializeGraphics","operatorListChanged","getOperatorList","opListReadCapability","opListTask","streamTextContent","includeMarkedContent","disableNormalization","TEXT_CONTENT_CHUNK_SIZE","sendWithStream","highWaterMark","getTextContent","xfa","_xfa_text_js__WEBPACK_IMPORTED_MODULE_15__","XfaText","readableStream","pump","reader","read","done","styles","getReader","getStructTree","_destroy","waitOn","force","completed","cancel","resetStats","success","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","RenderingCancelledException","delay","extraDelay","AbortException","message","curCacheKey","curIntentState","delayed","_listeners","_deferred","LoopbackPort","postMessage","terminate","PDFWorkerUtil","isWorkerDisabled","fakeWorkerId","workerSrc","isSameOrigin","otherUrl","origin","other","createCDNWrapper","wrapper","createObjectURL","Blob","getVerbosityLevel","_port","_webWorker","_messageHandler","_workerPorts","_initializeFromPort","_initialize","on","_get_mainThreadWorkerMessageHandler","Worker","terminateEarly","onWorkerError","_setupFakeWorker","sendTest","testObj","info","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","loader","_classPrivateGetter","_this","pdfjsWorker","_methodPromises","_pageCache","_pagePromises","_pageRefCache","_passwordCapability","_WorkerTransport_brand","factory","fontLoader","_font_loader_js__WEBPACK_IMPORTED_MODULE_3__","FontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","_annotation_storage_js__WEBPACK_IMPORTED_MODULE_1__","isOpList","DISPLAY","ANY","DISABLE","ANNOTATIONS_DISABLE","ENABLE_FORMS","ANNOTATIONS_FORMS","ENABLE_STORAGE","ANNOTATIONS_STORAGE","OPLIST","hasOwnProperty","terminated","_text_layer_js__WEBPACK_IMPORTED_MODULE_6__","cleanupTextLayer","cancelAllRequests","sink","assert","getFullReader","onPull","close","enqueue","onCancel","ready","readyReason","headersCapability","fullReader","headersReady","isStreamingSupported","isRangeSupported","contentLength","rangeReader","getRangeReader","_numPages","htmlForXfa","PasswordException","code","InvalidPDFException","MissingPDFException","UnexpectedResponseException","status","UnknownErrorException","details","exception","updatePassword","exportedData","exportedError","inspectFont","FontInspector","enabled","font","fontAdded","FontFaceObject","finally","imageRef","pageProxy","dataLen","imageData","MAX_IMAGE_SIZE_TO_CACHE","cachedPromise","refStr","_cacheSimpleMethod","_optional_content_config_js__WEBPACK_IMPORTED_MODULE_9__","OptionalContentConfig","results","metadata","_metadata_js__WEBPACK_IMPORTED_MODULE_8__","Metadata","cleanupSuccessful","INITIAL_DATA","Symbol","_objs","_PDFObjects_brand","objId","_ensureObj","iterator","_internalRenderTask","RenderTask","onContinue","form","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","_canvasInUse","StepperManager","stepper","init","nextBreakPoint","getNextBreakPoint","gfx","_canvas_js__WEBPACK_IMPORTED_MODULE_5__","CanvasGraphics","beginDrawing","endDrawing","updateOperatorList","requestAnimationFrame","executeOperatorList","version","build","BaseFilterFactory","addFilter","maps","addHCMFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","BaseCanvasFactory","_createCanvas","getContext","reset","canvasAndContext","BaseCMapReaderFactory","compressionType","CMapCompressionType","BINARY","NONE","_fetchData","BaseStandardFontDataFactory","BaseSVGFactory","skipDimensions","_createSVG","PathType","FILL","STROKE","SHADING","applyBoundingBox","ctx","bbox","region","Path2D","clip","BaseShadingPattern","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","matrix","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","getCurrentTransform","ceil","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","translate","baseTransform","fillStyle","fill","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p1","p2","p3","c1","c2","c3","coords","colors","bytes","rowSize","tmp","x1","scaleX","y1","scaleY","x2","y2","x3","y3","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","j","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_colors","_figures","_bounds","_background","_createMeshCanvas","combinedScale","EXPECTED_SCALE","MAX_PATTERN_SIZE","boundsWidth","boundsHeight","paddedWidth","paddedHeight","createImageData","putImageData","singularValueDecompose2dScale","matrixScale","temporaryPatternCanvas","DummyShadingPattern","getShadingPattern","PaintType","COLORED","UNCOLORED","TilingPattern","canvasGraphicsFactory","xstep","ystep","paintType","tilingType","createPatternCanvas","x0","y0","curMatrixScale","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","adjustedX0","adjustedY0","adjustedX1","adjustedY1","save","clipBbox","step","realOutputSize","maxSize","bboxWidth","bboxHeight","updateRectMinMax","endPath","strokeStyle","cssColor","FormatError","_defineProperty","convertToRGBA","kind","ImageKind","GRAYSCALE_1BPP","convertBlackAndWhiteToRGBA","RGB_24BPP","convertRGBToRGBA","srcPos","nonBlackColor","inverseDecode","black","isLittleEndian","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","Uint32Array","destPos","elem","len32","src32","s1","s2","s3","jj","grayToRGBA","MIN_FONT_SIZE","MAX_FONT_SIZE","MAX_GROUP_SIZE","EXECUTION_TIME","EXECUTION_STEPS","MAX_SIZE_TO_COMPILE","FULL_CHUNK_HEIGHT","mirrorContextOperations","destCtx","_removeMirroring","__originalSave","__originalRestore","restore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","moveTo","__originalLineTo","lineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","closePath","__originalBeginPath","ctxSave","ctxRestore","ctxTranslate","ctxScale","ctxTransform","a","d","f","ctxSetTransform","ctxResetTransform","ctxRotate","rule","cp1x","cp1y","cp2x","cp2y","CachedCanvases","cache","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tx","ty","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","drawImage","hypot","compileType3Glyph","imgData","POINT_TO_PROCESS_LIMIT","POINT_TYPES","width1","j0","lineSize","pos","mask","sum","steps","Int32Array","path","p0","pp","drawOutline","CanvasExtraState","alphaIsShape","fontSizeScale","textMatrix","IDENTITY_MATRIX","textMatrixScale","fontMatrix","FONT_IDENTITY_MATRIX","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","TextRenderingMode","textRise","patternFill","strokeAlpha","lineWidth","activeSMask","transferMaps","startNewPathAndClipBox","clipBox","setCurrentPoint","updatePathMinMax","applyTransform","minX","maxX","p4","updateScalingPathMinMax","minMax","scaleMinMax","updateCurvePathMinMax","box","bezierBoundingBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","isEmptyClip","Infinity","putBinaryImageData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","srcByte","RGBA_32BPP","subarray","putBinaryImageMask","copyCtxState","sourceCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","composeSMaskBackdrop","r0","g0","b0","alpha","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","genericComposeSMask","maskCtx","layerCtx","backdrop","layerOffsetX","layerOffsetY","maskOffsetX","maskOffsetY","hasBackdrop","composeFn","PIXELS_TO_PROCESS","chunkSize","row","chunkHeight","getImageData","composeSMask","smask","layerBox","layerWidth","layerHeight","getImageSmoothingEnabled","interpolate","fround","actualScale","devicePixelRatio","PixelsPerInch","PDF_TO_CSS_UNITS","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","_CanvasGraphics_brand","canvasCtx","markedContentStack","stateStack","pendingClip","pendingEOFill","res","xobjs","groupStack","processingType3","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","startsWith","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","argsArrayLen","chunkOperations","endTime","Date","now","fnId","breakIt","OPS","dependency","apply","depObjId","objsPool","_restoreInitialState","HTMLCanvasElement","_drawFilter","_scaleImage","img","inverseTransform","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","newWidth","newHeight","_createMaskCanvas","isPatternFill","currentTransform","scaled","maskCanvas","mainKey","cachedImage","maskToCanvas","getAxialAlignedBoundingBox","drawnWidth","drawnHeight","fillCanvas","fillCtx","getCurrentTransformInverse","imageSmoothingEnabled","setLineWidth","setLineCap","setLineJoin","setMiterLimit","limit","setDash","dashArray","dashPhase","setRenderingIntent","setFlatness","flatness","setGState","states","setFont","checkSMaskState","inSMaskMode","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","compose","dirtyBox","old","pop","constructPath","ops","args","startX","startY","isScalingMatrix","minMaxForBezier","rectangle","xw","yh","curveTo","curveTo2","curveTo3","stroke","consumePath","rescaleAndStroke","closeStroke","needRestore","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","eoClip","beginText","endText","paths","pendingTextPaths","addToPath","setCharSpacing","spacing","setWordSpacing","setHScale","setLeading","fontRefName","fontObj","fontDirection","isType3Font","loadedName","typeface","systemFontInfo","css","fallbackName","bold","italic","browserFontSize","setTextRenderingMode","setTextRise","rise","moveText","setLeadingMoveText","setTextMatrix","nextLine","paintChar","character","patternTransform","fillStrokeMode","FILL_STROKE_MASK","isAddToPathSet","ADD_TO_PATH_FLAG","missingFile","getPathGenerator","FILL_STROKE","fillText","strokeText","isFontSubpixelAAEnabled","showText","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","offset","scaledAccentY","charWidth","isTextInvisible","INVISIBLE","spacingLength","charProcOperatorList","operatorListId","transformed","setCharWidth","xWidth","yWidth","setCharWidthAndBounds","llx","lly","urx","ury","getColorN_Pattern","_getPattern","setStrokeColorN","arguments","setFillColorN","setStrokeRGBColor","setFillRGBColor","shadingFill","inv","beginInlineImage","beginImageData","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","endGroup","currentMtx","beginAnnotation","canvasWidth","canvasHeight","annotationCanvas","savedCtx","endAnnotation","paintImageMaskXObject","compiled","paintImageMaskXObjectRepeat","skewX","skewY","positions","trans","paintImageMaskXObjectGroup","images","paintImageXObject","paintInlineImageXObject","paintImageXObjectRepeat","w","h","paintInlineImageXObjectGroup","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","paintSolidColorImageMask","markPoint","tag","markPointProps","beginMarkedContent","visible","beginMarkedContentProps","isContentVisible","endMarkedContent","beginCompat","endCompat","isEmpty","absDet","normX","normY","getScaleForStroking","getTransform","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","hcmFilterId","foreground","savedFilter","op","SVG_NS","_PixelsPerInch","PDF","_cache","_defs","_docId2","_document","_hcmCache","_id","_DOMFilterFactory_brand","_base_factory_js__WEBPACK_IMPORTED_MODULE_0__","_this$id","_this$id2","_get_cache","tableR","tableG","tableB","mapR","mapG","mapB","bufferR","bufferG","bufferB","_createFilter","_addTransferMapConversion","_get_hcmCache","fgRGB","_getRGB","_shared_util_js__WEBPACK_IMPORTED_MODULE_1__","bgRGB","_get_defs","table","_addGrayConversion","getSteps","start","arr","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","prev","parentNode","_this2","_this3","_this4","contain","position","createElementNS","body","feColorMatrix","_appendFeFunc","feComponentTransfer","func","feFunc","rTable","gTable","bTable","getRGB","getComputedStyle","getPropertyValue","fetchData","response","ok","statusText","arrayBuffer","blob","json","text","request","XMLHttpRequest","responseType","onreadystatechange","readyState","DONE","responseText","cMapData","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","applyInverseTransform","BaseException","msg","trim","isPdfFile","onlyStripPath","lastIndexOf","getPdfFilenameFromUrl","defaultFilename","reURI","reFilename","splitURI","exec","suggestedFilename","decodeURIComponent","started","times","outBuf","longest","padEnd","protocol","noContextMenu","deprecated","console","log","pdfDateStringRegex","input","RegExp","matches","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","UTC","getXfaPageViewport","xfaPage","attributes","colorRGB","getColorValues","span","computedColor","invertSelf","mustFlip","mustRotate","useRound","isCSSRoundSupported","widthStr","heightStr","DrawLayer","_DrawLayer_brand","_parent2","_id2","_mapping","_toUpdate","setParent","root","_svgFactory","_display_utils_js__WEBPACK_IMPORTED_MODULE_0__","highlight","outlines","opacity","isPathUpdatable","_this$id3","_this$id4","free","pathId","toSVGPath","clipPathId","_createClipPath","use","highlightOutline","_this$id5","_this$id6","maskId","use1","use2","cloneNode","finalizeLine","updateBox","updateLine","removeFreeHighlight","updatePath","_setBox","toggle","changeColor","changeOpacity","addClass","removeClass","clipPathUse","EOL_PATTERN","_boundEditorDivBlur","_boundEditorDivFocus","_boundEditorDivInput","_boundEditorDivKeydown","_boundEditorDivPaste","_color2","_content","_editorDivId","_fontSize","_initialData","_FreeTextEditor_brand","FreeTextEditor","editor_editor","_keyboardManager","proto","arrowChecker","self","small","tools","AnnotationEditorUIManager","TRANSLATE_SMALL","big","TRANSLATE_BIG","KeyboardManager","commitOrRemove","bubbles","_translateEmpty","checker","editorDivBlur","editorDivFocus","editorDivInput","editorDivKeydown","editorDivPaste","_defaultColor","_defaultLineColor","_defaultFontSize","initialize","l10n","uiManager","strings","documentElement","_internalPadding","parseFloat","updateDefaultParams","AnnotationEditorParamsType","FREETEXT_SIZE","FREETEXT_COLOR","updateParams","_updateFontSize","_updateColor","defaultPropertiesToUpdate","propertiesToUpdate","_uiManager","translateSelectedEditors","getInitialTranslation","parentScale","rebuild","isAttachedToDOM","enableEditMode","isInEditMode","setEditingState","updateToolbar","overlayDiv","editorDiv","contentEditable","_isDraggable","disableEditMode","isEditing","focusin","_focusEventsAllowed","onceAdded","_initialOptions","isCentered","center","innerText","commit","savedText","newText","_extractText","trimEnd","setText","_setContent","_setEditorDimensions","addCommands","cmd","undo","mustExec","shouldGetKeyboardEvents","enterInEditMode","dblclick","keydown","disableEditing","enableEditing","baseX","baseY","_l10nPromise","bindEvents","parentHeight","parentDimensions","annotationElementId","pageTranslationToScreen","pageDimensions","pageTranslation","posX","posY","setAt","clipboardData","types","paste","_deserializeContent","selection","getSelection","rangeCount","normalize","deleteFromDocument","getRangeAt","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","nodeType","Node","TEXT_NODE","parentElement","nodeValue","child","childNodes","_getNodeContent","newRange","Range","beforeLength","reduce","acc","setStart","setEnd","removeAllRanges","addRange","contentDiv","deserialize","annotation_layer","deleted","isForCopying","padding","getRect","_colorManager","convert","_serializeContent","structTreeParentId","_structTreeParentId","_hasElementChanged","annotation","replaceChildren","resetAnnotationElement","setFontsize","savedFontsize","post","updateUI","overwriteIfSameType","keepUndo","col","savedColor","getBoundingClientRect","currentLayer","savedDisplay","savedVisibility","parentRotation","fixAndSetPosition","node","_hasBeenMoved","some","HighlightEditor","_moveCaret","_HighlightEditor_brand","_anchorNode","_anchorOffset","_boxes","_clipPathId","_colorPicker","_focusOutlines","_focusNode","_focusOffset","_highlightDiv","_highlightOutlines","_id3","_isFreeHighlight","_boundKeydown","_keydown","_lastPoint","_opacity","_outlineId","_text","_thickness","_methodOfCreation","thickness","_defaultThickness","_defaultOpacity","boxes","methodOfCreation","highlightId","_createFreeOutlines","_addToDrawLayer","anchorNode","anchorOffset","focusNode","focusOffset","_createOutlines","telemetryInitialData","highlightColorNames","numberOfColors","highlightColors","next","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","translateInPage","toolbarPosition","HIGHLIGHT_COLOR","_updateColor2","_updateThickness","HIGHLIGHT_FREE","addEditToolbar","toolbar","color_picker","ColorPicker","addColorPicker","_getRotation","getBaseTranslation","addUndoableEditor","_cleanDrawLayer","_reportTelemetry","mustBeSelected","_isVisible","select","drawLayer","_rotateBbox","highlightDiv","setDims","pointerover","pointerleave","direction","unselect","_setCaret","_mustFixPosition","startHighlighting","isLTR","textLayer","layerX","layerY","pointerMove","_highlightMove","pointerDownOptions","capture","passive","pointerDown","stopPropagation","pointerUpCallback","_endHighlight","_freeHighlight","editor_outliner","FreeOutliner","_freeHighlightId","_freeHighlightClipId","_serializeBoxes","_serializeOutlines","canCreateNewEmptyEditor","_HighlightEditor","outliner","Outliner","getOutlines","outlinerForOutline","lastPoint","highlightOutlines","extraThickness","getNewOutline","updateColor","savedThickness","setThickness","th","_changeThickness","INK_THICKNESS","_toSetter","setPosition","sx","sy","createAndAddNewEditor","InkEditor","_InkEditor_brand","_baseHeight","_baseWidth","_boundCanvasPointermove","canvasPointermove","_boundCanvasPointerleave","canvasPointerleave","_boundCanvasPointerup","canvasPointerup","_boundCanvasPointerdown","canvasPointerdown","_canvasContextMenuTimeoutId","_currentPath2D","_disableEditing","_hasSomethingToDraw","_isCanvasInitialized","_observer","_realWidth","_realHeight","_requestFrameCallback","bezierPath2D","allRawPaths","currentPath","scaleFactor","translationX","translationY","_willKeepAspectRatio","INK_COLOR","INK_OPACITY","_updateThickness2","_updateColor3","_updateOpacity","_createObserver","_setCanvasDims","_fitToContent","disconnect","removeShouldRescale","addShouldRescale","onScaleChanging","setDimensions","setInForeground","addInkEditorIfNeeded","moveInDOM","button","_startDrawing","_draw","_endDrawing","isResizable","_getInitialBBox","setAspectRatio","_redraw","roundedWidth","roundedHeight","_setScaleFactor","fixDims","bezier","_fromPDFCoordinates","p10","p11","p20","p21","p30","p31","path2D","_buildPath2D","_getBbox","MIN_SIZE","_serializePaths","_InkEditor","setOpacity","savedOpacity","_setStroke","opacityToHex","_drawPoints","lastX","lastY","at","_makeBezierCurve","_endPath","_stopDrawing","_generateBezierPoints","xy","lastPoints","xMin","xMax","yMin","yMax","prevX","prevY","bezierPoints","control1","control2","_updateTransform","addToAnnotationStorage","setInBackground","ResizeObserver","contentRect","observe","_getPadding","scaleFactorW","scaleFactorH","first","_toPDFCoordinates","s","shiftX","shiftY","p40","p41","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","StampEditor","_StampEditor_brand","_bitmap","_bitmapId","_bitmapPromise","_bitmapUrl","_bitmapFile","_bitmapFileName","_observer2","_resizeTimeoutId","_isSvg","_hasBeenAddedInUndoStack","bitmapUrl","bitmapFile","supportedTypes","supportedTypesStr","isHandlingMimeForPasting","mime","pasteEditor","getAsFile","imageManager","deleteId","_getBitmap","addAltTextButton","_createCanvas2","getImageForAltText","bitmapId","isSvg","accessibilityData","isValidId","altTextData","_serializeBitmap","decorative","altText","alt","stamps","area","prevData","_StampEditor","_getBitmapFetched","fromId","_getBitmapDone","enableWaiting","getFromId","getFromUrl","getFromFile","accept","files","click","MAX_RATIO","factor","_drawBitmap","_createObserver2","_setDimensions","TIME_TO_WAIT","_scaleBitmap","bitmapWidth","bitmapHeight","prevWidth","prevHeight","offscreen","OffscreenCanvas","transferToImageBitmap","hasMLManager","hasAltText","convertToBlob","fileReader","FileReader","onload","result","mlGuess","service","output","readAsDataURL","hcmFilter","toUrl","getSvgUrl","toDataURL","AnnotationEditorLayer","annotationLayer","_AnnotationEditorLayer_brand","_accessibilityManager2","_allowClick","_annotationLayer","_boundPointerup","_boundPointerdown","_boundTextLayerPointerDown","_editorFocusTimeoutId","_editors","_hadPointerDown","_isCleaningUp","_isDisabling","_textLayer","_uiManager2","editorTypes","_editorTypes","_initialized","editorType","registerEditorTypes","addLayer","isInvisible","getMode","updateMode","_cleanup","disableTextSelection","togglePointerEvents","toggleAnnotationLayerPointerEvents","disableClick","enableTextSelection","enableClick","_editorType","hasTextLayer","isCommitting","enable","annotationElementIds","removeChangedExistingAnnotation","editables","isDeletedAnnotationElement","addOrRebuild","disable","changedAnnotations","resetAnnotations","addChangedExistingAnnotation","setActiveEditor","currentActive","getActive","_textLayerPointerDown","pointerdown","pointerup","attach","removeDeletedAnnotationElement","detach","removePointerInTextLayer","addDeletedAnnotationElement","removeEditor","changeParent","deleteAnnotationElement","addEditor","moveEditorInDOM","once","needsToBeRebuilt","getNextId","getId","_get_currentEditorType","_getCenterPoint","_createNewEditor","addNewEditor","setSelected","toggleSelected","isSelected","unselectAll","findNewParent","findParent","removeLayer","getEditors","oldRotation","viewParameters","realScale","showAllEditors","_this5","innerWidth","innerHeight","_tools_js__WEBPACK_IMPORTED_MODULE_1__","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","_ColorPicker_brand","_boundKeyDown2","_keyDown2","_boundPointerDown","_pointerDown","_button","_buttonSwatch","_dropdown","_dropdownWasFromKeyboard","_isMainColorPicker","_editor","_eventBus","_uiManager3","_type2","renderButton","_openDropdown","swatch","renderMainDropdown","dropdown","_getDropdownRoot","_colorSelect","_get_isDropdownVisible","nextSibling","hideDropdown","focusVisible","role","_this6","AltText","_AltText_brand","_altText","_altTextDecorative","_altTextButton","_altTextTooltip","_altTextTooltipTimeout","_altTextWasFromKeyBoard","_editor2","l10nPromise","onClick","editAltText","_setState","finish","tooltip","DELAY_TO_SHOW_TOOLTIP","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","_AnnotationEditor_brand","_allResizerDivs","_altText2","_disabled","_keepAspectRatio","_resizersDiv","_savedDimensions","_boundFocusin","_boundFocusout","focusout","_editToolbar","_focusedResizerName","_hasBeenClicked","_initialPosition","_isEditing","_isInEditMode","_isResizerEnabledForKeyboard","_moveInDOMTimeout","_prevDragX","_prevDragY","_telemetryTimeouts","_zIndex","pageRotation","getHexCode","fakeEditor","FakeEditor","_borderLineWidth","_value","isEnterHandled","_stopResizing","closest","isMultipleSelection","screenToPageTranslation","_translate","scrollIntoView","block","drag","bx","by","toFixed","_rotatePoint","scaledWidth","scaledHeight","widthPercent","endsWith","heightPercent","altTextFinish","EditorToolbar","removeEditToolbar","getClientDimensions","maxWidth","maxHeight","_setUpDragSession","_selectOnPointerEvent","_setParentAndPosition","getRectInCurrentCoords","_angle","hasBeenModified","timeout","makeResizable","_createResizers","savedX","savedY","savedWidth","savedHeight","boundResizerKeydown","_resizerKeydown","boundResizerBlur","_resizerBlur","_resizerFocus","firstPosition","nextFirstPosition","_setResizerTabIndex","stopImmediatePropagation","_resizerPointermove","movementX","movementY","aspectRatio","mustWait","_telemetryTimeout","_AnnotationEditor","_getRotationMatrix","classes","_resizerPointerdown","boundResizerPointermove","savedDraggable","pointerMoveOptions","savedParentCursor","cursor","savedCursor","_addResizeToUndoStack","newX","newY","minWidth","minHeight","rotationMatrix","transf","invRotationMatrix","invTransf","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","oldDiag","setUpDragSession","pointerMoveCallback","clientX","clientY","dragSelectedEditors","endDragSession","ColorManager","innerMargin","_Outliner_brand","_box","_verticalEdges","_intervals","NUMBER_OF_DIGITS","EPSILON","right","shiftedMinX","shiftedMinY","lastEdge","edge","sort","outlineVerticalEdges","_breakEdge","_insert","_remove","_getOutlines","edges","allEdges","edge1","edge2","outline","lastPointX","lastPointY","HighlightOutline","_binarySearch","array","middle","y4","Outline","_rotation","FreeHighlightOutline","_box2","_outlines","polygon","_box3","_bottom","_innerMargin","_isLTR","_top","_last","_lastX","_lastY","_min","_min_dist","_scaleFactor","_thickness2","_points","_FreeOutliner_brand","Float64Array","_MIN_DIST","_MIN","diffX","diffY","diffD","K","nX","nY","thX","thY","atan2","PI","bottom","lastTop","lastBottom","lastTopX","lastTopY","lastBottomX","lastBottomY","_getLastCoords","last","N","_MIN_DIFF","_box4","_bbox2","_innerMargin2","_isLTR2","_points2","_scaleFactor2","_outline","_FreeHighlightOutline_brand","_computeMinMax","_rescale","_rescaleAndSwap","ltrCallback","_EditorToolbar_brand","_toolbar","_colorPicker2","_editor3","_buttons","editToolbar","_pointerDown2","buttons","insetInlineEnd","_addDeleteButton","_addListenersToElement","_get_divider","colorPicker","_focusIn","_focusOut","_this7","divider","_buttons2","_toolbar2","_uiManager4","_HighlightToolbar_brand","HighlightToolbar","_getLastPoint","_render","_addHighlightButton","highlightSelection","_id4","IdManager","_this$id7","_this$id8","AnnotationEditorPrefix","_baseId","_id5","_cache2","_ImageManager_brand","ImageManager","getUuid","_isSVGFittingCanvas","Image","decode","lastModified","_get","refCounter","svgUrl","_ImageManager","rawData","_this$id9","_this$id10","_display_utils_js__WEBPACK_IMPORTED_MODULE_1__","mustRemoveAspectRatioPromise","imageElement","imagePromise","onerror","createImageBitmap","_commands","_locked","_maxSize","_position","CommandManager","redo","hasSomethingToUndo","hasSomethingToRedo","_KeyboardManager_brand","callbacks","allKeys","isMacKey","_serialize","matchMedia","RGB","every","_colorsMapping","_activeEditor","_allEditors","_allLayers","_altTextManager","_annotationStorage","_changedExistingAnnotations","_commandManager","_currentPageIndex","_deletedAnnotationsElementIds","_draggingEditors","_editorTypes2","_editorsToRescale","_enableHighlightFloatingButton","_filterFactory","_focusMainContainerTimeoutId","_highlightColors","_highlightWhenShiftUp","_highlightToolbar","_idManager","_isEnabled","_isWaiting","_lastActiveElement","_mainHighlightColorPicker","_mlManager","_mode","_selectedEditors","_selectedTextNode","_pageColors","_showAllStates","_boundBlur","_boundFocus","_boundCopy","_boundCut","_boundPaste","_boundKeydown2","_boundKeyup","_boundOnEditingAction","_boundOnPageChanging","_boundOnScaleChanging","_boundSelectionChange","_boundOnRotationChanging","_previousStates","_translation","_translationTimeoutId","_container2","_viewer","_AnnotationEditorUIManager_brand","tagName","hasSomethingToControl","textInputChecker","_self","el","HTMLInputElement","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","viewer","altTextManager","pdfDocument","enableHighlightFloatingButton","mlManager","blur","copy","cut","keyup","onEditingAction","onPageChanging","_selectionChange","onRotationChanging","hasSelectedEditor","hasSelectedText","_on","_addSelectionListener","_addKeyboardManager","isShiftKeyDown","_removeKeyboardManager","_removeFocusManager","_off","_removeSelectionListener","guess","pair","reverse","setMainHighlightColorPicker","focusMainContainer","disableUserSelect","pagesRotation","isCollapsed","anchorElement","_getAnchorElementForSelection","getSelectionBoxes","empty","_onSelectEnd","hasSelection","lastEditor","lastActiveElement","addEditListeners","_addCopyPasteListeners","removeEditListeners","_removeCopyPasteListeners","editors","setData","parse","newEditors","deserializedEditor","_addEditorToLayer","_selectEditors","isEditorHandlingKeyboard","_addFocusManager","_dispatchUpdateStates","_isEmpty","_dispatchUpdateUI","getLayer","currentPageIndex","isFromKeyboard","_disableAll","_enableAll","CREATE","HIGHLIGHT_SHOW_ALL","updateButton","state","getEditor","_get_lastSelectedEditor","ed","firstSelectedEditor","noCommit","totalX","totalY","savedPageIndex","newPageIndex","mustBeAddedInUndoStack","move","isActive","commonAncestorContainer","rotator","collapsed","getClientRects","editorId","_displayHighlightToolbar","_toolbar_js__WEBPACK_IMPORTED_MODULE_2__","hasChanged","_this8","createFetchOptions","headers","abortController","method","signal","credentials","redirect","createHeaders","Headers","getArrayBuffer","isHttp","_fullRequestReader","_rangeRequestReaders","_progressiveDataLength","_loaded","PDFFetchStreamReader","PDFFetchStreamRangeReader","stream","_stream","_reader","_filename","_withCredentials","_contentLength","_headersCapability","_disableRange","_rangeChunkSize","_abortController","AbortController","_isStreamingSupported","_isRangeSupported","_headers","_network_utils_js__WEBPACK_IMPORTED_MODULE_1__","validateResponseStatus","createResponseStatusError","getResponseHeader","allowRangeRequests","suggestedLength","validateRangeRequestCapabilities","extractFilenameFromHeader","_readCapability","_systemFonts","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","_inspectFont","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","attached","createNativeFontFace","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","hasFonts","supported","navigator","userAgent","completeRequest","otherRequest","_loadTestFont","testFont","atob","int32","charCodeAt","spliceString","chunk1","chunk2","called","isFontReady","COMMENT_OFFSET","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","string32","btoa","fontFamily","translatedData","compiledGlyphs","cssFontInfo","weight","fontWeight","italicAngle","bytesToString","mimetype","cmds","commands","FontRenderOps","BEZIER_CURVE_TO","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","quadraticCurveTo","RESTORE","SAVE","SCALE","TRANSFORM","TRANSLATE","glyphDrawer","parsedData","_metadataMap","_data","getRaw","OK_RESPONSE","PARTIAL_CONTENT_RESPONSE","xhr","NetworkManager","currXhrId","pendingRequests","requestRange","listeners","prop","requestFull","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","ok_response_on_range_request","rangeHeader","getRequestXhr","isPendingRequest","abortRequest","_source","_manager","_onRangeRequestReaderClosed","indexOf","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_onHeadersReceived","_onDone","_onError","_onProgress","_url","_fullRequestId","_headersReceivedCapability","_cachedChunks","_requests","_done","_storedError","fullRequestXhrId","fullRequestXhr","requestCapability","lengthComputable","_requestId","_queuedChunk","_close","getFilenameFromContentDispositionHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","contentDispositionStr","iter","quot","part","parts","quotindex","extvalue","encodingend","langvalue","replace","charset","hex","String","fromCharCode","returnValues","contentEncoding","fs","http","https","fileUriRegex","parseUrl","sourceUrl","parsedUrl","host","isFsUrl","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","_readableStream","_error","_setReadableStream","BaseRangeReader","createRequestOptions","auth","hostname","handleResponse","statusCode","_request","_httpHeaders","promises","lstat","stat","createReadStream","path2d","readFile","createCanvas","INTERNAL","_isDisplay","_isPrint","_userSet","_visible","OptionalContentGroup","usage","viewState","printState","_setVisible","internal","userSet","_cachedGetHash","_groups","_initialHash","_order","_OptionalContentConfig_brand","creator","order","groups","baseState","off","getHash","expression","_evaluateVisibilityExpression","policy","setVisibility","preserveRB","operator","hasInitialVisibility","getOrder","getGroups","getGroup","_shared_murmurhash3_js__WEBPACK_IMPORTED_MODULE_1__","MAX_TEXT_DIVS_TO_RENDER","DEFAULT_FONT_ASCENT","ascentCache","_canvasContext","getCtx","getAscent","cachedAscent","savedFont","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","pixels","appendText","geom","textDiv","textDivProperties","hasText","hasEOL","_textDivs","_transform","fontName","_fontInspectorEnabled","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","_rootContainer","_pageWidth","_pageHeight","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","_textDivProperties","_isReadableStream","_layoutText","layout","prevFontSize","prevFontFamily","_canceled","textDivs","textDivsLength","TextLayerRenderTask","textContentSource","textContentItemsStr","_textContentSource","ReadableStream","_textContentItemsStr","_layoutTextParams","_processItems","styleCache","br","renderTextLayer","updateTextLayer","mustRescale","pdfDataRangeTransport","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_rangeReaders","_onReceiveData","_onProgressiveDone","_enqueue","found","_begin","_removeRangeReader","queuedChunks","PDFDataTransportStreamReader","PDFDataTransportStreamRangeReader","_headersReady","_end","requestsCapability","_src","setupStorage","xfaOn","xfaOff","setAttributes","isHTMLAnchorElement","HTMLAnchorElement","dataId","rootHtml","isNotForRichText","rootDiv","_xfa_text_js__WEBPACK_IMPORTED_MODULE_0__","shouldBuildText","stack","childHtml","xmlns","querySelectorAll","walk","pdfjsVersion","pdfjsBuild","CallbackKind","UNKNOWN","DATA","ERROR","StreamKind","CANCEL","CANCEL_COMPLETE","CLOSE","ENQUEUE","PULL","PULL_COMPLETE","START_COMPLETE","wrapReason","_util_js__WEBPACK_IMPORTED_MODULE_0__","_MessageHandler_brand","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","_processStreamMessage","cbSourceName","cbTargetName","_createStreamSink","handler","ah","transfers","queueingStrategy","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","isCancelled","lastDesiredSize","sinkCapability","streamController","_deleteStreamController","allSettled","SEED","MASK_HIGH","MASK_LOW","seed","h1","h2","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","process","versions","nw","electron","LINE_DESCENT_FACTOR","BASELINE_FACTOR","RESIZE","FREETEXT_OPACITY","PermissionFlag","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","FILL_ADD_TO_PATH","STROKE_ADD_TO_PATH","FILL_STROKE_ADD_TO_PATH","ADD_TO_PATH","SOUND","MOVIE","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationReplyType","GROUP","REPLY","AnnotationFlag","HIDDEN","NOZOOM","NOROTATE","NOVIEW","READONLY","LOCKED","TOGGLENOVIEW","LOCKEDCONTENTS","AnnotationFieldFlag","REQUIRED","NOEXPORT","MULTILINE","PASSWORD","NOTOGGLETOOFF","RADIO","PUSHBUTTON","COMBO","EDIT","SORT","FILESELECT","MULTISELECT","DONOTSPELLCHECK","DONOTSCROLL","COMB","RICHTEXT","RADIOSINUNISON","COMMITONSELCHANGE","AnnotationActionEventType","E","X","D","U","Fo","Bl","PO","PC","PV","F","V","C","DocumentActionEventType","WC","WS","DS","WP","DP","PageActionEventType","O","VerbosityLevel","ERRORS","WARNINGS","INFOS","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setFillColor","setStrokeGray","setFillGray","setStrokeCMYKColor","setFillCMYKColor","endInlineImage","paintXObject","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","level","cond","_isValidProtocol","createValidAbsoluteUrl","addDefaultProtocol","dots","tryConvertEncoding","stringToUTF8String","absoluteUrl","nonSerializable","defineProperty","enumerable","configurable","writable","BaseExceptionClosure","MAX_ARGUMENT_COUNT","strBuf","chunkEnd","objectSize","buffer8","view32","Function","hexNumbers","temp","m1","m2","xt","yt","transpose","sqrt","rect1","rect2","xLow","xHigh","yLow","yHigh","_getExtremum","_Util","_getExtremumOnCurve","t","mt","tt","ttt","delta","sqrtDelta","a2","PDFStringTranslateTable","stringToPDFString","decoded","charCode","charAt","escape","utf8StringToString","encodeURIComponent","isArrayEqual","arr1","arr2","getModificationDate","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","NormalizeRegex","NormalizationMap","normalizeUnicode","crypto","randomUUID","buf","getRandomValues","random","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","webpackQueues","webpackExports","webpackError","resolveQueue","queue","forEach","fn","wrapDeps","deps","dep","ret","hasAwait","depQueues","currentDeps","outerResolve","rej","getResult","fnQueue","err","definition","o","__webpack_exports__"],"sources":["webpack://pdf.js/src/shared/scripting_utils.js","webpack://pdf.js/src/display/annotation_layer.js","webpack://pdf.js/src/display/annotation_storage.js","webpack://pdf.js/src/display/api.js","webpack://pdf.js/src/display/base_factory.js","webpack://pdf.js/src/display/pattern_helper.js","webpack://pdf.js/src/shared/image_utils.js","webpack://pdf.js/src/display/canvas.js","webpack://pdf.js/src/display/display_utils.js","webpack://pdf.js/src/display/draw_layer.js","webpack://pdf.js/src/display/editor/freetext.js","webpack://pdf.js/src/display/editor/highlight.js","webpack://pdf.js/src/display/editor/ink.js","webpack://pdf.js/src/display/editor/stamp.js","webpack://pdf.js/src/display/editor/annotation_editor_layer.js","webpack://pdf.js/src/display/editor/color_picker.js","webpack://pdf.js/src/display/editor/alt_text.js","webpack://pdf.js/src/display/editor/editor.js","webpack://pdf.js/src/display/editor/outliner.js","webpack://pdf.js/src/display/editor/toolbar.js","webpack://pdf.js/src/display/editor/tools.js","webpack://pdf.js/src/display/fetch_stream.js","webpack://pdf.js/src/display/font_loader.js","webpack://pdf.js/src/display/metadata.js","webpack://pdf.js/src/display/network.js","webpack://pdf.js/src/display/content_disposition.js","webpack://pdf.js/src/display/network_utils.js","webpack://pdf.js/src/display/node_stream.js","webpack://pdf.js/src/display/node_utils.js","webpack://pdf.js/src/display/optional_content_config.js","webpack://pdf.js/src/display/text_layer.js","webpack://pdf.js/src/display/transport_stream.js","webpack://pdf.js/src/display/worker_options.js","webpack://pdf.js/src/display/xfa_layer.js","webpack://pdf.js/src/display/xfa_text.js","webpack://pdf.js/src/pdf.js","webpack://pdf.js/src/shared/message_handler.js","webpack://pdf.js/src/shared/murmurhash3.js","webpack://pdf.js/src/shared/util.js","webpack://pdf.js/webpack/bootstrap","webpack://pdf.js/webpack/runtime/async module","webpack://pdf.js/webpack/runtime/define property getters","webpack://pdf.js/webpack/runtime/hasOwnProperty shorthand","webpack://pdf.js/webpack/before-startup","webpack://pdf.js/webpack/startup","webpack://pdf.js/webpack/after-startup"],"sourcesContent":["/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * PLEASE NOTE: This file is currently imported in both the `../display/` and\n *              `../scripting_api/` folders, hence be EXTREMELY careful about\n *              introducing any dependencies here since that can lead to an\n *              unexpected/unnecessary size increase of the *built* files.\n */\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255)\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\n\n// PDF specifications section 10.3\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n\n  static T_HTML() {\n    return \"#00000000\";\n  }\n\n  static T_rgb() {\n    return [null];\n  }\n\n  static CMYK_RGB([c, y, m, k]) {\n    return [\n      \"RGB\",\n      1 - Math.min(1, c + k),\n      1 - Math.min(1, m + k),\n      1 - Math.min(1, y + k),\n    ];\n  }\n\n  static CMYK_rgb([c, y, m, k]) {\n    return [\n      scaleAndClamp(1 - Math.min(1, c + k)),\n      scaleAndClamp(1 - Math.min(1, m + k)),\n      scaleAndClamp(1 - Math.min(1, y + k)),\n    ];\n  }\n\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\nexport { ColorConverters };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/editor/tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n\nimport {\n  AnnotationBorderStyleType,\n  AnnotationEditorType,\n  AnnotationPrefix,\n  AnnotationType,\n  FeatureTest,\n  LINE_FACTOR,\n  shadow,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  DOMSVGFactory,\n  getFilenameFromUrl,\n  PDFDateString,\n  setLayerDimensions,\n} from \"./display_utils.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\nimport { ColorConverters } from \"../shared/scripting_utils.js\";\nimport { XfaLayer } from \"./xfa_layer.js\";\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\n\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1],\n  };\n}\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} [downloadManager]\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {Object} svgFactory\n * @property {boolean} [enableScripting]\n * @property {boolean} [hasJSActions]\n * @property {Object} [fieldObjects]\n */\n\nclass AnnotationElementFactory {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\n\nclass AnnotationElement {\n  #updates = null;\n\n  #hasBorder = false;\n\n  constructor(\n    parameters,\n    {\n      isRenderable = false,\n      ignoreBorder = false,\n      createQuadrilaterals = false,\n    } = {}\n  ) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n\n  static _hasPopupData({ titleObj, contentsObj, richText }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n\n    this.#updates ||= {\n      rect: this.data.rect.slice(0),\n    };\n\n    const { rect } = params;\n\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n  }\n\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#updates = null;\n  }\n\n  #setRectEdited(rect) {\n    const {\n      container: { style },\n      data: { rect: currentRect, rotation },\n      parent: {\n        viewport: {\n          rawDims: { pageWidth, pageHeight, pageX, pageY },\n        },\n      },\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    const { width, height } = getRectDims(rect);\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (pageHeight - rect[3] + pageY)) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n\n  /**\n   * Create an empty container for the annotation's HTML element.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {HTMLElement} A section element.\n   */\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: { page, viewport },\n    } = this;\n\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const { style } = container;\n\n    // The accessibility manager will move the annotation in the DOM in\n    // order to match the visual ordering.\n    // But if an annotation is above an other one, then we must draw it\n    // after the other one whatever the order is in the DOM, hence the\n    // use of the z-index.\n    style.zIndex = this.parent.zIndex++;\n\n    if (data.popupRef) {\n      container.setAttribute(\"aria-haspopup\", \"dialog\");\n    }\n\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const { rotation } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n\n    const { width, height } = getRectDims(data.rect);\n\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      }\n\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n\n        default:\n          break;\n      }\n\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(\n          borderColor[0] | 0,\n          borderColor[1] | 0,\n          borderColor[2] | 0\n        );\n      } else {\n        // Transparent (invisible) border, so do not draw it at all.\n        style.borderWidth = 0;\n      }\n    }\n\n    // Do *not* modify `data.rect`, since that will corrupt the annotation\n    // position on subsequent calls to `_createContainer` (see issue 6804).\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (rect[1] - pageY)) / pageHeight}%`;\n\n    const { rotation } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n\n    return container;\n  }\n\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const { pageWidth, pageHeight } = this.parent.viewport.rawDims;\n    const { width, height } = getRectDims(this.data.rect);\n\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = (100 * width) / pageWidth;\n      elementHeight = (100 * height) / pageHeight;\n    } else {\n      elementWidth = (100 * height) / pageWidth;\n      elementHeight = (100 * width) / pageHeight;\n    }\n\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] =\n        ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray),\n      });\n    };\n\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const { display } = event.detail;\n        // See scripting/constants.js for the values of `Display`.\n        // 0 = visible, 1 = hidden, 2 = noPrint and 3 = noView.\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2,\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print,\n        });\n      },\n      hidden: event => {\n        const { hidden } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden,\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({ preventScroll: false }), 0);\n      },\n      userName: event => {\n        // tooltip\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle,\n        });\n      },\n    });\n  }\n\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n\n    // Some properties may have been updated thanks to JS.\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail,\n          },\n          target: element,\n        };\n        action(eventProxy);\n        // The action has been consumed: no need to keep it.\n        delete storedData[actionName];\n      }\n    }\n  }\n\n  /**\n   * Create quadrilaterals from the annotation's quadpoints.\n   *\n   * @private\n   * @memberof AnnotationElement\n   */\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const { quadPoints } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect;\n\n    if (quadPoints.length === 1) {\n      const [, { x: trX, y: trY }, { x: blX, y: blY }] = quadPoints[0];\n      if (\n        rectTrX === trX &&\n        rectTrY === trY &&\n        rectBlX === blX &&\n        rectBlY === blY\n      ) {\n        // The quadpoints cover the whole annotation rectangle, so no need to\n        // create a quadrilateral.\n        return;\n      }\n    }\n\n    const { style } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const { borderColor, borderWidth } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\n        \"url('data:image/svg+xml;utf8,\",\n        `<svg xmlns=\"http://www.w3.org/2000/svg\"`,\n        ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`,\n        `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`,\n      ];\n      this.container.classList.add(\"hasBorder\");\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      this.container.classList.add(\"hasClipPath\");\n    }\n\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n\n    const { svgFactory } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n\n    for (const [, { x: trX, y: trY }, { x: blX, y: blY }] of quadPoints) {\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(\n        `<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`\n      );\n    }\n\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n\n  /**\n   * Create a popup for the annotation's HTML element. This is used for\n   * annotations that do not have a Popup entry in the dictionary, but\n   * are of a type that works with popups (such as Highlight annotations).\n   *\n   * @private\n   * @memberof AnnotationElement\n   */\n  _createPopup() {\n    const { container, data } = this;\n    container.setAttribute(\"aria-haspopup\", \"dialog\");\n\n    const popup = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation,\n      },\n      parent: this.parent,\n      elements: [this],\n    });\n    this.parent.div.append(popup.render());\n  }\n\n  /**\n   * Render the annotation's HTML element(s).\n   *\n   * @public\n   * @memberof AnnotationElement\n   */\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n\n  /**\n   * @private\n   * @returns {Array}\n   */\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const { page, id, exportValues } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue =\n            typeof exportValues === \"string\" ? exportValues : null;\n\n          const domElement = document.querySelector(\n            `[data-element-id=\"${id}\"]`\n          );\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({ id, exportValue, domElement });\n        }\n      }\n      return fields;\n    }\n    // Fallback to a regular DOM lookup, to ensure that the standalone\n    // viewer components won't break.\n    for (const domElement of document.getElementsByName(name)) {\n      const { exportValue } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({ id, exportValue, domElement });\n    }\n    return fields;\n  }\n\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n\n  /**\n   * Get the HTML element(s) which can trigger a popup when clicked or hovered.\n   *\n   * @public\n   * @memberof AnnotationElement\n   * @returns {Array<HTMLElement>|HTMLElement} An array of elements or an\n   *          element.\n   */\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n\n  get _isEditable() {\n    return false;\n  }\n\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: { id: editId },\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId,\n      });\n    });\n  }\n}\n\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true,\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n\n  render() {\n    const { data, linkService } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (\n        data.actions &&\n        (data.actions.Action ||\n          data.actions[\"Mouse Up\"] ||\n          data.actions[\"Mouse Down\"]) &&\n        this.enableScripting &&\n        this.hasJSActions\n      ) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n\n    return this.container;\n  }\n\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n\n  /**\n   * Bind internal links to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} destination\n   * @memberof LinkAnnotationElement\n   */\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === /* isTooltipOnly = */ \"\") {\n      this.#setInternalLink();\n    }\n  }\n\n  /**\n   * Bind named actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} action\n   * @memberof LinkAnnotationElement\n   */\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind attachments to the link element.\n   * @param {Object} link\n   * @param {Object} attachment\n   * @param {str} [dest]\n   */\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(\n        attachment.content,\n        attachment.filename,\n        dest\n      );\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind SetOCGState actions to the link element.\n   * @param {Object} link\n   * @param {Object} action\n   */\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind JS actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} data\n   * @memberof LinkAnnotationElement\n   */\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([\n      [\"Action\", \"onclick\"],\n      [\"Mouse Up\", \"onmouseup\"],\n      [\"Mouse Down\", \"onmousedown\"],\n    ]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name,\n          },\n        });\n        return false;\n      };\n    }\n\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n\n    if (!this._fieldObjects) {\n      warn(\n        `_bindResetFormAction - \"resetForm\" action not supported, ` +\n          \"ensure that the `fieldObjects` parameter is provided.\"\n      );\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n\n    link.onclick = () => {\n      otherClickAction?.();\n\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include,\n      } = resetForm;\n\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const { id } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const { id } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"checkbox\":\n          case \"radiobutton\": {\n            const value = field.defaultValue === field.exportValues;\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"combobox\":\n          case \"listbox\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          default:\n            continue;\n        }\n\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n\n      if (this.enableScripting) {\n        // Update the values in the sandbox.\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\",\n          },\n        });\n      }\n\n      return false;\n    };\n  }\n}\n\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n  }\n\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n\n    const image = document.createElement(\"img\");\n    image.src =\n      this.imageResourcesPath +\n      \"annotation-\" +\n      this.data.name.toLowerCase() +\n      \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\n      \"data-l10n-args\",\n      JSON.stringify({ type: this.data.name })\n    );\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.append(image);\n    return this.container;\n  }\n}\n\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    // Show only the container for unsupported field types.\n    return this.container;\n  }\n\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n\n  _getKeyModifier(event) {\n    return FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      // Mouse events\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event),\n          },\n        });\n      });\n    } else {\n      // Non-mouse events\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n\n        if (!valueGetter) {\n          return;\n        }\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n          },\n        });\n      });\n    }\n  }\n\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= { focused: false };\n        }\n        this._setEventListener(\n          element,\n          elementData,\n          baseName,\n          eventName,\n          getter\n        );\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          // Ensure that elementData will have the correct value.\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor =\n      color === null\n        ? \"transparent\"\n        : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n\n  /**\n   * Apply text styles to the text in the element.\n   *\n   * @private\n   * @param {HTMLDivElement} element\n   * @memberof TextWidgetAnnotationElement\n   */\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const { fontColor } = this.data.defaultAppearanceData;\n    const fontSize =\n      this.data.defaultAppearanceData.fontSize || DEFAULT_FONT_SIZE;\n\n    const style = element.style;\n\n    // TODO: If the font-size is zero, calculate it based on the height and\n    //       width of the element.\n    // Not setting `style.fontSize` will use the default font-size for now.\n\n    // We don't use the font, as specified in the PDF document, for the <input>\n    // element. Hence using the original `fontSize` could look bad, which is why\n    // it's instead based on the field height.\n    // If the height is \"big\" then it could lead to a too big font size\n    // so in this case use the one we've in the pdf (hence the min).\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(lineHeight / LINE_FACTOR)\n      );\n    } else {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(height / LINE_FACTOR)\n      );\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\n\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderForms ||\n      parameters.data.hasOwnCanvas ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, { isRenderable });\n  }\n\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(\n      base.name,\n      /* skipId = */ base.id\n    )) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, { [keyInStorage]: value });\n    }\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    this.container.classList.add(\"textWidgetAnnotation\");\n\n    let element = null;\n    if (this.renderForms) {\n      // NOTE: We cannot set the values using `element.value` below, since it\n      //       prevents the AnnotationLayer rasterizer in `test/driver.js`\n      //       from parsing the elements correctly for the reference tests.\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue,\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen,\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n\n      let fieldFormattedValues =\n        storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false,\n      };\n\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n\n      this._setRequired(element, this.data.required);\n\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, { value: event.target.value });\n        this.setPropertyOnSiblings(\n          element,\n          \"value\",\n          event.target.value,\n          \"value\"\n        );\n        elementData.formattedValue = null;\n      });\n\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n\n      let blurListener = event => {\n        const { formattedValue } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        // Reset the cursor position to the start of the field (issue 12359).\n        event.target.scrollLeft = 0;\n      };\n\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const { target } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, { value: elementData.userValue.toString() });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const { formattedValue } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (\n                formattedValue !== null &&\n                formattedValue !== undefined &&\n                event.target !== document.activeElement\n              ) {\n                // Input hasn't the focus so display formatted string\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue,\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const { charLimit } = event.detail;\n              const { target } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, { value });\n\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd,\n                },\n              });\n            },\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n\n        // Even if the field hasn't any actions\n        // leaving it can still trigger some actions with Calculate\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          // If the key is one of Escape, Enter then the data are committed.\n          // If we've a Tab then data will be committed on blur.\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            // When we've a multiline field, \"Enter\" key is a key as the other\n            // hence we don't commit the data (Acrobat behaves the same way)\n            // (see issue #15627).\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const { value } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          // Save the entered value\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd,\n            },\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const { value } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd,\n              },\n            });\n          }\n          _blurListener(event);\n        });\n\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const { data, target } = event;\n            const { value, selectionStart, selectionEnd } = target;\n\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n\n            switch (event.inputType) {\n              // https://rawgit.com/w3c/input-events/v1/index.html#interface-InputEvent-Attributes\n              case \"deleteWordBackward\": {\n                const match = value\n                  .substring(0, selectionStart)\n                  .match(/\\w*[^\\w]*$/);\n                if (match) {\n                  selStart -= match[0].length;\n                }\n                break;\n              }\n              case \"deleteWordForward\": {\n                const match = value\n                  .substring(selectionStart)\n                  .match(/^[^\\w]*\\w*/);\n                if (match) {\n                  selEnd += match[0].length;\n                }\n                break;\n              }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n\n            // We handle the event ourselves.\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd,\n              },\n            });\n          });\n        }\n\n        this._setEventListeners(\n          element,\n          elementData,\n          [\n            [\"focus\", \"Focus\"],\n            [\"blur\", \"Blur\"],\n            [\"mousedown\", \"Mouse Down\"],\n            [\"mouseenter\", \"Mouse Enter\"],\n            [\"mouseleave\", \"Mouse Exit\"],\n            [\"mouseup\", \"Mouse Up\"],\n          ],\n          event => event.target.value\n        );\n      }\n\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: !!parameters.data.hasOwnCanvas });\n  }\n}\n\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== \"Off\";\n      storage.setValue(id, { value });\n    }\n\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const checkbox of this._getElementsByName(name, /* skipId = */ id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, { value: curChecked });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, { value: event.target.checked });\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        null,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== data.buttonValue;\n      storage.setValue(id, { value });\n    }\n\n    if (value) {\n      // It's possible that multiple radio buttons are checked.\n      // So if this one is checked we just reset the other ones.\n      // (see bug 1864136). Then when the other ones will be rendered they will\n      // unchecked (because of their value in the storage).\n      // Consequently, the first checked radio button will be the only checked\n      // one.\n      for (const radio of this._getElementsByName(\n        data.fieldName,\n        /* skipId = */ id\n      )) {\n        storage.setValue(radio.id, { value: false });\n      }\n    }\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const radio of this._getElementsByName(name, /* skipId = */ id)) {\n        storage.setValue(radio.id, { value: false });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked =\n        defaultValue !== null &&\n        defaultValue !== undefined &&\n        defaultValue === data.buttonValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, { value: curChecked });\n            }\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        null,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { ignoreBorder: parameters.data.hasAppearance });\n  }\n\n  render() {\n    // The rendering and functionality of a push button widget annotation is\n    // equal to that of a link annotation, but may have more functionality, such\n    // as performing actions on form fields (resetting, submitting, et cetera).\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n\n    return container;\n  }\n}\n\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue,\n    });\n\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n\n    if (!this.data.combo) {\n      // List boxes have a size and (optionally) multiple selection.\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n\n    // Insert the options into the choice field.\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const { options, multiple } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1\n          ? null\n          : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter\n        .call(options, option => option.selected)\n        .map(option => option[name]);\n    };\n\n    let selectedValues = getValue(/* isExport */ false);\n\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value,\n      }));\n    };\n\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(\n                options,\n                option => option.selected\n              );\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, { value: null, items: [] });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          insert(event) {\n            const { index, displayValue, exportValue } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          items(event) {\n            const { items } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const { displayValue, exportValue } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(/* isExport */ true);\n        const change = getValue(/* isExport */ false);\n        storage.setValue(id, { value: exportValue });\n\n        event.preventDefault();\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false,\n          },\n        });\n      });\n\n      this._setEventListeners(\n        selectElement,\n        null,\n        [\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n          [\"input\", \"Action\"],\n          [\"input\", \"Validate\"],\n        ],\n        event => event.target.value\n      );\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, { value: getValue(/* isExport */ true) });\n      });\n    }\n\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {\n      // Just use the default font size...\n      // it's a bit hard to guess what is a good size.\n    }\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\n\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const { data, elements } = parameters;\n    super(parameters, { isRenderable: AnnotationElement._hasPopupData(data) });\n    this.elements = elements;\n  }\n\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n\n    const popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open,\n    });\n\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n\n    this.container.setAttribute(\n      \"aria-controls\",\n      elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\")\n    );\n\n    return this.container;\n  }\n}\n\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n\n  #boundHide = this.#hide.bind(this);\n\n  #boundShow = this.#show.bind(this);\n\n  #boundToggle = this.#toggle.bind(this);\n\n  #color = null;\n\n  #container = null;\n\n  #contentsObj = null;\n\n  #dateObj = null;\n\n  #elements = null;\n\n  #parent = null;\n\n  #parentRect = null;\n\n  #pinned = false;\n\n  #popup = null;\n\n  #rect = null;\n\n  #richText = null;\n\n  #titleObj = null;\n\n  #wasVisible = false;\n\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open,\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n\n    // The modification date is shown in the popup instead of the creation\n    // date if it is available and can be parsed correctly, which is\n    // consistent with other viewers such as Adobe Acrobat.\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    // Attach the event listeners to the trigger element.\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n\n    // Attach the event listener to toggle the popup with the keyboard.\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      // Since the popup is lazily created, we need to ensure that it'll be\n      // created and displayed during reference tests.\n      this.#parent.popupShow.push(async () => {\n        if (this.#container.hidden) {\n          this.#show();\n        }\n      });\n    }\n  }\n\n  render() {\n    if (this.#popup) {\n      return;\n    }\n\n    const {\n      page: { view },\n      viewport: {\n        rawDims: { pageWidth, pageHeight, pageX, pageY },\n      },\n    } = this.#parent;\n    const popup = (this.#popup = document.createElement(\"div\"));\n    popup.className = \"popup\";\n\n    if (this.#color) {\n      const baseColor = (popup.style.outlineColor = Util.makeHexColor(\n        ...this.#color\n      ));\n      if (\n        (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        CSS.supports(\"background-color\", \"color-mix(in srgb, red 30%, white)\")\n      ) {\n        popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n      } else {\n        // color-mix isn't supported in some browsers hence this version.\n        // See https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix#browser_compatibility\n        // TODO: Use color-mix when it's supported everywhere.\n        // Enlighten the color.\n        const BACKGROUND_ENLIGHT = 0.7;\n        popup.style.backgroundColor = Util.makeHexColor(\n          ...this.#color.map(c =>\n            Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)\n          )\n        );\n      }\n    }\n\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({ dir: title.dir, str: title.textContent } = this.#titleObj);\n    popup.append(header);\n\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\n        \"data-l10n-id\",\n        \"pdfjs-annotation-date-string\"\n      );\n      modificationDate.setAttribute(\n        \"data-l10n-args\",\n        JSON.stringify({\n          date: this.#dateObj.toLocaleDateString(),\n          time: this.#dateObj.toLocaleTimeString(),\n        })\n      );\n      header.append(modificationDate);\n    }\n\n    const contentsObj = this.#contentsObj;\n    const richText = this.#richText;\n    if (\n      richText?.str &&\n      (!contentsObj?.str || contentsObj.str === richText.str)\n    ) {\n      XfaLayer.render({\n        xfaHtml: richText.html,\n        intent: \"richText\",\n        div: popup,\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(contentsObj);\n      popup.append(contents);\n    }\n\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n\n    const normalizedRect = Util.normalizeRect([\n      rect[0],\n      view[3] - rect[1] + view[1],\n      rect[2],\n      view[3] - rect[3] + view[1],\n    ]);\n\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect\n      ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION\n      : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n\n    const { style } = this.#container;\n    style.left = `${(100 * (popupLeft - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (popupTop - pageY)) / pageHeight}%`;\n\n    this.#container.append(popup);\n  }\n\n  /**\n   * Format the contents of the popup by adding newlines where necessary.\n   *\n   * @private\n   * @param {Object<string, string>} contentsObj\n   * @memberof PopupElement\n   * @returns {HTMLParagraphElement}\n   */\n  _formatContents({ str, dir }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n\n    if (event.key === \"Enter\" || (event.key === \"Escape\" && this.#pinned)) {\n      this.#toggle();\n    }\n  }\n\n  /**\n   * Toggle the visibility of the popup.\n   */\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n\n  /**\n   * Show the popup.\n   */\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#container.hidden = false;\n      this.#container.style.zIndex =\n        parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n\n  /**\n   * Hide the popup.\n   */\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex =\n      parseInt(this.#container.style.zIndex) - 1000;\n  }\n\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\n\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this._editOnDoubleClick();\n\n    return this.container;\n  }\n\n  get _isEditable() {\n    return this.data.hasOwnCanvas;\n  }\n}\n\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n\n    // Create an invisible line with the same starting and ending coordinates\n    // that acts as the trigger for the popup. Only the line itself should\n    // trigger the popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // PDF coordinates are calculated from a bottom left origin, so transform\n    // the line coordinates to a top left origin for the SVG element.\n    const line = (this.#line = this.svgFactory.createElement(\"svg:line\"));\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(line);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the line instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n\n    // Create an invisible square with the same rectangle that acts as the\n    // trigger for the popup. Only the square itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the square and half of\n    // the borders outside the square by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const square = (this.#square = this.svgFactory.createElement(\"svg:rect\"));\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(square);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the square instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n\n    // Create an invisible circle with the same ellipse that acts as the\n    // trigger for the popup. Only the circle itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the circle and half of\n    // the borders outside the circle by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const circle = (this.#circle =\n      this.svgFactory.createElement(\"svg:ellipse\"));\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(circle);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the circle instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup. Only the polyline itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // Convert the vertices array to a single points string that the SVG\n    // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n    // calculated from a bottom left origin, so transform the polyline\n    // coordinates to a top left origin for the SVG element.\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + \",\" + y);\n    }\n    points = points.join(\" \");\n\n    const polyline = (this.#polyline = this.svgFactory.createElement(\n      this.svgElementName\n    ));\n    polyline.setAttribute(\"points\", points);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(polyline);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the polyline\n    // instead of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    // Polygons are specific forms of polylines, so reuse their logic.\n    super(parameters);\n\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\n\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\n\nclass InkAnnotationElement extends AnnotationElement {\n  #polylines = [];\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n\n    this.containerClassName = \"inkAnnotation\";\n\n    // Use the polyline SVG element since it allows us to use coordinates\n    // directly and to draw both straight lines and curves.\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = AnnotationEditorType.INK;\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    for (const inkList of data.inkLists) {\n      // Convert the ink list to a single points string that the SVG\n      // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n      // calculated from a bottom left origin, so transform the polyline\n      // coordinates to a top left origin for the SVG element.\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", points);\n      // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n      // won't be possible to open/close the popup (note e.g. issue 11122).\n      polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"transparent\");\n\n      // Create the popup ourselves so that we can bind it to the polyline\n      // instead of to the entire container (which is the default).\n      if (!data.popupRef && this.hasPopupData) {\n        this._createPopup();\n      }\n\n      svg.append(polyline);\n    }\n\n    this.container.append(svg);\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"highlightAnnotation\");\n    return this.container;\n  }\n}\n\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\n\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\n\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\n\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\n\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n\n    const { filename, content } = this.data.file;\n    this.filename = getFilenameFromUrl(filename, /* onlyStripPath = */ true);\n    this.content = content;\n\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      filename,\n      content,\n    });\n  }\n\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n\n    const { container, data } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      // Unfortunately it seems that it's not clearly specified exactly what\n      // names are actually valid, since Table 184 contains:\n      //   Conforming readers shall provide predefined icon appearances for at\n      //   least the following standard names: GraphPushPin, PaperclipTag.\n      //   Additional names may be supported as well. Default value: PushPin.\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${\n        /paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"\n      }.svg`;\n\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(\n          data.fillAlpha * 100\n        )}%);`;\n\n        if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n          this.container.classList.add(\"hasFillAlpha\");\n        }\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n\n    const { isMac } = FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n\n    container.append(trigger);\n    return container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n\n  /**\n   * Download the file attachment associated with this annotation.\n   */\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPageProxy} page\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} [downloadManager]\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {boolean} [enableScripting] - Enable embedded script execution.\n * @property {boolean} [hasJSActions] - Some fields have JS actions.\n *   The default value is `false`.\n * @property {Object<string, Array<Object>> | null} [fieldObjects]\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap]\n * @property {TextAccessibilityManager} [accessibilityManager]\n * @property {AnnotationEditorUIManager} [annotationEditorUIManager]\n */\n\n/**\n * Manage the layer containing all the annotations.\n */\nclass AnnotationLayer {\n  #accessibilityManager = null;\n\n  #annotationCanvasMap = null;\n\n  #editableAnnotations = new Map();\n\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"showPopups\", {\n        value: async () => {\n          for (const show of this.popupShow) {\n            await show();\n          }\n        },\n      });\n      this.popupShow = [];\n    }\n  }\n\n  #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${AnnotationPrefix}${id}`;\n\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      element,\n      contentElement,\n      /* isRemovable = */ false\n    );\n  }\n\n  /**\n   * Render a new annotation layer with all annotation elements.\n   *\n   * @param {AnnotationLayerParameters} params\n   * @memberof AnnotationLayer\n   */\n  async render(params) {\n    const { annotations } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null,\n    };\n\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        const { width, height } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue; // Ignore empty annotations.\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          // Ignore popup annotations without a corresponding annotation.\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n\n      if (!element.isRenderable) {\n        continue;\n      }\n\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      this.#appendElement(rendered, data.id);\n\n      if (element.annotationEditorType > 0) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n\n    this.#setAnnotationCanvasMap();\n  }\n\n  /**\n   * Update the annotation elements on existing annotation layer.\n   *\n   * @param {AnnotationLayerParameters} viewport\n   * @memberof AnnotationLayer\n   */\n  update({ viewport }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, { rotation: viewport.rotation });\n\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n\n      canvas.className = \"annotationContent\";\n      const { firstChild } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n}\n\nexport {\n  AnnotationLayer,\n  FreeTextAnnotationElement,\n  InkAnnotationElement,\n  StampAnnotationElement,\n};\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap, unreachable } from \"../shared/util.js\";\nimport { AnnotationEditor } from \"./editor/editor.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined,\n});\n\n/**\n * Key/value storage for annotation data in forms.\n */\nclass AnnotationStorage {\n  #modified = false;\n\n  #storage = new Map();\n\n  constructor() {\n    // Callbacks to signal when the modification state is set or reset.\n    // This is used by the viewer to only bind on `beforeunload` if forms\n    // are actually edited to prevent doing so unconditionally since that\n    // can have undesirable effects.\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n\n  /**\n   * Get the value for a given key if it exists, or return the default value.\n   * @param {string} key\n   * @param {Object} defaultValue\n   * @returns {Object}\n   */\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n\n    return Object.assign(defaultValue, value);\n  }\n\n  /**\n   * Get the value for a given key.\n   * @param {string} key\n   * @returns {Object}\n   */\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n\n  /**\n   * Remove a value from the storage.\n   * @param {string} key\n   */\n  remove(key) {\n    this.#storage.delete(key);\n\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n\n  /**\n   * Set the value for a given key\n   * @param {string} key\n   * @param {Object} value\n   */\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n\n    if (\n      value instanceof AnnotationEditor &&\n      typeof this.onAnnotationEditor === \"function\"\n    ) {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n\n  /**\n   * Check if the storage contains the given key.\n   * @param {string} key\n   * @returns {boolean}\n   */\n  has(key) {\n    return this.#storage.has(key);\n  }\n\n  /**\n   * @returns {Object | null}\n   */\n  getAll() {\n    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;\n  }\n\n  /**\n   * @param {Object} obj\n   */\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n\n  get size() {\n    return this.#storage.size;\n  }\n\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n\n    for (const [key, val] of this.#storage) {\n      const serialized =\n        val instanceof AnnotationEditor\n          ? val.serialize(/* isForCopying = */ false, context)\n          : val;\n      if (serialized) {\n        map.set(key, serialized);\n\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n\n    if (hasBitmap) {\n      // We must transfer the bitmap data separately, since it can be changed\n      // during serialization with SVG images.\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n\n    return map.size > 0\n      ? { map, hash: hash.hexdigest(), transfer }\n      : SerializableEmpty;\n  }\n\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const { type } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = (stats[type] ||= new Map());\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n}\n\n/**\n * A special `AnnotationStorage` for use during printing, where the serializable\n * data is *frozen* upon initialization, to prevent scripting from modifying its\n * contents. (Necessary since printing is triggered synchronously in browsers.)\n */\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n\n  constructor(parent) {\n    super();\n    const { map, hash, transfer } = parent.serializable;\n    // Create a *copy* of the data, since Objects are passed by reference in JS.\n    const clone = structuredClone(map, transfer ? { transfer } : null);\n\n    this.#serializable = { map: clone, hash, transfer };\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  // eslint-disable-next-line getter-return\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    return this.#serializable;\n  }\n}\n\nexport { AnnotationStorage, PrintAnnotationStorage, SerializableEmpty };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @module pdfjsLib\n */\n\nimport {\n  AbortException,\n  AnnotationMode,\n  assert,\n  getVerbosityLevel,\n  info,\n  InvalidPDFException,\n  isNodeJS,\n  MAX_IMAGE_SIZE_TO_CACHE,\n  MissingPDFException,\n  PasswordException,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  stringToBytes,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  AnnotationStorage,\n  PrintAnnotationStorage,\n  SerializableEmpty,\n} from \"./annotation_storage.js\";\nimport {\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMFilterFactory,\n  DOMStandardFontDataFactory,\n  isDataScheme,\n  isValidFetchUrl,\n  PageViewport,\n  RenderingCancelledException,\n  StatTimer,\n} from \"./display_utils.js\";\nimport { FontFaceObject, FontLoader } from \"./font_loader.js\";\nimport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n} from \"display-node_utils\";\nimport { CanvasGraphics } from \"./canvas.js\";\nimport { cleanupTextLayer } from \"./text_layer.js\";\nimport { GlobalWorkerOptions } from \"./worker_options.js\";\nimport { MessageHandler } from \"../shared/message_handler.js\";\nimport { Metadata } from \"./metadata.js\";\nimport { OptionalContentConfig } from \"./optional_content_config.js\";\nimport { PDFDataTransportStream } from \"./transport_stream.js\";\nimport { PDFFetchStream } from \"display-fetch_stream\";\nimport { PDFNetworkStream } from \"display-network\";\nimport { PDFNodeStream } from \"display-node_stream\";\nimport { XfaText } from \"./xfa_text.js\";\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536; // 2^16 = 65536\nconst RENDERING_CANCELLED_TIMEOUT = 100; // ms\nconst DELAYED_CLEANUP_TIMEOUT = 5000; // ms\n\nconst DefaultCanvasFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeCanvasFactory\n    : DOMCanvasFactory;\nconst DefaultCMapReaderFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeCMapReaderFactory\n    : DOMCMapReaderFactory;\nconst DefaultFilterFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeFilterFactory\n    : DOMFilterFactory;\nconst DefaultStandardFontDataFactory =\n  typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n    ? NodeStandardFontDataFactory\n    : DOMStandardFontDataFactory;\n\n/**\n * @typedef { Int8Array | Uint8Array | Uint8ClampedArray |\n *            Int16Array | Uint16Array |\n *            Int32Array | Uint32Array | Float32Array |\n *            Float64Array\n * } TypedArray\n */\n\n/**\n * @typedef {Object} RefProxy\n * @property {number} num\n * @property {number} gen\n */\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string | URL} [url] - The URL of the PDF.\n * @property {TypedArray | ArrayBuffer | Array<number> | string} [data] -\n *   Binary PDF data.\n *   Use TypedArrays (Uint8Array) to improve the memory usage. If PDF data is\n *   BASE64-encoded, use `atob()` to convert it to a binary string first.\n *\n *   NOTE: If TypedArrays are used they will generally be transferred to the\n *   worker-thread. This will help reduce main-thread memory usage, however\n *   it will take ownership of the TypedArrays.\n * @property {Object} [httpHeaders] - Basic authentication headers.\n * @property {boolean} [withCredentials] - Indicates whether or not\n *   cross-site Access-Control requests should be made using credentials such\n *   as cookies or authorization headers. The default is `false`.\n * @property {string} [password] - For decrypting password-protected PDFs.\n * @property {number} [length] - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} [range] - Allows for using a custom range\n *   transport implementation.\n * @property {number} [rangeChunkSize] - Specify maximum number of bytes fetched\n *   per range request. The default value is {@link DEFAULT_RANGE_CHUNK_SIZE}.\n * @property {PDFWorker} [worker] - The worker that will be used for loading and\n *   parsing the PDF data.\n * @property {number} [verbosity] - Controls the logging level; the constants\n *   from {@link VerbosityLevel} should be used.\n * @property {string} [docBaseUrl] - The base URL of the document, used when\n *   attempting to recover valid absolute URLs for annotations, and outline\n *   items, that (incorrectly) only specify relative URLs.\n * @property {string} [cMapUrl] - The URL where the predefined Adobe CMaps are\n *   located. Include the trailing slash.\n * @property {boolean} [cMapPacked] - Specifies if the Adobe CMaps are binary\n *   packed or not. The default value is `true`.\n * @property {Object} [CMapReaderFactory] - The factory that will be used when\n *   reading built-in CMap files. Providing a custom factory is useful for\n *   environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMCMapReaderFactory}.\n * @property {boolean} [useSystemFonts] - When `true`, fonts that aren't\n *   embedded in the PDF document will fallback to a system font.\n *   The default value is `true` in web environments and `false` in Node.js;\n *   unless `disableFontFace === true` in which case this defaults to `false`\n *   regardless of the environment (to prevent completely broken fonts).\n * @property {string} [standardFontDataUrl] - The URL where the standard font\n *   files are located. Include the trailing slash.\n * @property {Object} [StandardFontDataFactory] - The factory that will be used\n *   when reading the standard font files. Providing a custom factory is useful\n *   for environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMStandardFontDataFactory}.\n * @property {boolean} [useWorkerFetch] - Enable using the Fetch API in the\n *   worker-thread when reading CMap and standard font files. When `true`,\n *   the `CMapReaderFactory` and `StandardFontDataFactory` options are ignored.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {boolean} [stopAtErrors] - Reject certain promises, e.g.\n *   `getOperatorList`, `getTextContent`, and `RenderTask`, when the associated\n *   PDF data cannot be successfully parsed, instead of attempting to recover\n *   whatever possible of the data. The default value is `false`.\n * @property {number} [maxImageSize] - The maximum allowed image size in total\n *   pixels, i.e. width * height. Images above this value will not be rendered.\n *   Use -1 for no limit, which is also the default value.\n * @property {boolean} [isEvalSupported] - Determines if we can evaluate strings\n *   as JavaScript. Primarily used to improve performance of PDF functions.\n *   The default value is `true`.\n * @property {boolean} [isOffscreenCanvasSupported] - Determines if we can use\n *   `OffscreenCanvas` in the worker. Primarily used to improve performance of\n *   image conversion/rendering.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {number} [canvasMaxAreaInBytes] - The integer value is used to\n *   know when an image must be resized (uses `OffscreenCanvas` in the worker).\n *   If it's -1 then a possibly slow algorithm is used to guess the max value.\n * @property {boolean} [disableFontFace] - By default fonts are converted to\n *   OpenType fonts and loaded via the Font Loading API or `@font-face` rules.\n *   If disabled, fonts will be rendered using a built-in font renderer that\n *   constructs the glyphs with primitive path commands.\n *   The default value is `false` in web environments and `true` in Node.js.\n * @property {boolean} [fontExtraProperties] - Include additional properties,\n *   which are unused during rendering of PDF documents, when exporting the\n *   parsed font data from the worker-thread. This may be useful for debugging\n *   purposes (and backwards compatibility), but note that it will lead to\n *   increased memory usage. The default value is `false`.\n * @property {boolean} [enableXfa] - Render Xfa forms if any.\n *   The default value is `false`.\n * @property {HTMLDocument} [ownerDocument] - Specify an explicit document\n *   context to create elements with and to load resources, such as fonts,\n *   into. Defaults to the current document.\n * @property {boolean} [disableRange] - Disable range request loading of PDF\n *   files. When enabled, and if the server supports partial content requests,\n *   then the PDF will be fetched in chunks. The default value is `false`.\n * @property {boolean} [disableStream] - Disable streaming of PDF file data.\n *   By default PDF.js attempts to load PDF files in chunks. The default value\n *   is `false`.\n * @property {boolean} [disableAutoFetch] - Disable pre-fetching of PDF file\n *   data. When range requests are enabled PDF.js will automatically keep\n *   fetching more data even if it isn't needed to display the current page.\n *   The default value is `false`.\n *\n *   NOTE: It is also necessary to disable streaming, see above, in order for\n *   disabling of pre-fetching to work correctly.\n * @property {boolean} [pdfBug] - Enables special hooks for debugging PDF.js\n *   (see `web/debugger.js`). The default value is `false`.\n * @property {Object} [canvasFactory] - The factory instance that will be used\n *   when creating canvases. The default value is {new DOMCanvasFactory()}.\n * @property {Object} [filterFactory] - A factory instance that will be used\n *   to create SVG filters when rendering some images on the main canvas.\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n *\n * NOTE: If a URL is used to fetch the PDF data a standard Fetch API call (or\n * XHR as fallback) is used, which means it must follow same origin rules,\n * e.g. no cross-domain requests without CORS.\n *\n * @param {string | URL | TypedArray | ArrayBuffer | DocumentInitParameters}\n *   src - Can be a URL where a PDF file is located, a typed array (Uint8Array)\n *         already populated with data, or a parameter object.\n * @returns {PDFDocumentLoadingTask}\n */\nfunction getDocument(src) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n    if (typeof src === \"string\" || src instanceof URL) {\n      src = { url: src };\n    } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n      src = { data: src };\n    }\n  }\n  if (typeof src !== \"object\") {\n    throw new Error(\"Invalid parameter in getDocument, need parameter object.\");\n  }\n  if (!src.url && !src.data && !src.range) {\n    throw new Error(\n      \"Invalid parameter object: need either .data, .range or .url\"\n    );\n  }\n  const task = new PDFDocumentLoadingTask();\n  const { docId } = task;\n\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport =\n    src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize =\n    Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0\n      ? src.rangeChunkSize\n      : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  // Ignore \"data:\"-URLs, since they can't be used to recover valid absolute\n  // URLs anyway. We want to avoid sending them to the worker-thread, since\n  // they contain the *entire* PDF document and can thus be arbitrarily long.\n  const docBaseUrl =\n    typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl)\n      ? src.docBaseUrl\n      : null;\n  const cMapUrl = typeof src.cMapUrl === \"string\" ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl =\n    typeof src.standardFontDataUrl === \"string\"\n      ? src.standardFontDataUrl\n      : null;\n  const StandardFontDataFactory =\n    src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize =\n    Number.isInteger(src.maxImageSize) && src.maxImageSize > -1\n      ? src.maxImageSize\n      : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported =\n    typeof src.isOffscreenCanvasSupported === \"boolean\"\n      ? src.isOffscreenCanvasSupported\n      : !isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes)\n    ? src.canvasMaxAreaInBytes\n    : -1;\n  const disableFontFace =\n    typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n\n  // Parameters whose default values depend on other parameters.\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts =\n    typeof src.useSystemFonts === \"boolean\"\n      ? src.useSystemFonts\n      : !isNodeJS && !disableFontFace;\n  const useWorkerFetch =\n    typeof src.useWorkerFetch === \"boolean\"\n      ? src.useWorkerFetch\n      : (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        (CMapReaderFactory === DOMCMapReaderFactory &&\n          StandardFontDataFactory === DOMStandardFontDataFactory &&\n          cMapUrl &&\n          standardFontDataUrl &&\n          isValidFetchUrl(cMapUrl, document.baseURI) &&\n          isValidFetchUrl(standardFontDataUrl, document.baseURI));\n  const canvasFactory =\n    src.canvasFactory || new DefaultCanvasFactory({ ownerDocument });\n  const filterFactory =\n    src.filterFactory || new DefaultFilterFactory({ docId, ownerDocument });\n\n  // Parameters only intended for development/testing purposes.\n  const styleElement =\n    typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n      ? src.styleElement\n      : null;\n\n  // Set the main-thread verbosity level.\n  setVerbosityLevel(verbosity);\n\n  // Ensure that the various factories can be initialized, when necessary,\n  // since the user may provide *custom* ones.\n  const transportFactory = {\n    canvasFactory,\n    filterFactory,\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked,\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl,\n    });\n  }\n\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    };\n    // Worker was not provided -- creating and owning our own. If message port\n    // is specified in global worker options, using it.\n    worker = workerParams.port\n      ? PDFWorker.fromPort(workerParams)\n      : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n\n  const fetchDocParams = {\n    docId,\n    apiVersion:\n      typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"TESTING\")\n        ? PDFJSDev.eval(\"BUNDLE_VERSION\")\n        : null,\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null,\n    },\n  };\n  const transportParams = {\n    ignoreErrors,\n    disableFontFace,\n    fontExtraProperties,\n    enableXfa,\n    ownerDocument,\n    disableAutoFetch,\n    pdfBug,\n    styleElement,\n  };\n\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n\n      const workerIdPromise = _fetchDocument(worker, fetchDocParams);\n      const networkStreamPromise = new Promise(function (resolve) {\n        let networkStream;\n        if (rangeTransport) {\n          networkStream = new PDFDataTransportStream(rangeTransport, {\n            disableRange,\n            disableStream,\n          });\n        } else if (!data) {\n          if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n            throw new Error(\"Not implemented: createPDFNetworkStream\");\n          }\n          const createPDFNetworkStream = params => {\n            if (\n              typeof PDFJSDev !== \"undefined\" &&\n              PDFJSDev.test(\"GENERIC\") &&\n              isNodeJS\n            ) {\n              const isFetchSupported = function () {\n                return (\n                  typeof fetch !== \"undefined\" &&\n                  typeof Response !== \"undefined\" &&\n                  \"body\" in Response.prototype\n                );\n              };\n              return isFetchSupported() && isValidFetchUrl(params.url)\n                ? new PDFFetchStream(params)\n                : new PDFNodeStream(params);\n            }\n            return isValidFetchUrl(params.url)\n              ? new PDFFetchStream(params)\n              : new PDFNetworkStream(params);\n          };\n\n          networkStream = createPDFNetworkStream({\n            url,\n            length,\n            httpHeaders,\n            withCredentials,\n            rangeChunkSize,\n            disableRange,\n            disableStream,\n          });\n        }\n        resolve(networkStream);\n      });\n\n      return Promise.all([workerIdPromise, networkStreamPromise]).then(\n        function ([workerId, networkStream]) {\n          if (task.destroyed) {\n            throw new Error(\"Loading aborted\");\n          }\n\n          const messageHandler = new MessageHandler(\n            docId,\n            workerId,\n            worker.port\n          );\n          const transport = new WorkerTransport(\n            messageHandler,\n            task,\n            networkStream,\n            transportParams,\n            transportFactory\n          );\n          task._transport = transport;\n          messageHandler.send(\"Ready\", null);\n        }\n      );\n    })\n    .catch(task._capability.reject);\n\n  return task;\n}\n\n/**\n * Starts fetching of specified PDF document/data.\n *\n * @param {PDFWorker} worker\n * @param {Object} source\n * @returns {Promise<string>} A promise that is resolved when the worker ID of\n *   the `MessageHandler` is known.\n * @private\n */\nasync function _fetchDocument(worker, source) {\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  const workerId = await worker.messageHandler.sendWithPromise(\n    \"GetDocRequest\",\n    source,\n    source.data ? [source.data.buffer] : null\n  );\n\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  return workerId;\n}\n\nfunction getUrlProp(val) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    return null; // The 'url' is unused with `PDFDataRangeTransport`.\n  }\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    // The full path is required in the 'url' field.\n    return new URL(val, window.location).href;\n  } catch {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"GENERIC\") &&\n      isNodeJS &&\n      typeof val === \"string\"\n    ) {\n      return val; // Use the url as-is in Node.js environments.\n    }\n  }\n  throw new Error(\n    \"Invalid PDF url data: \" +\n      \"either string or URL-object is expected in the url property.\"\n  );\n}\n\nfunction getDataProp(val) {\n  // Converting string or array-like data to Uint8Array.\n  if (\n    typeof PDFJSDev !== \"undefined\" &&\n    PDFJSDev.test(\"GENERIC\") &&\n    isNodeJS &&\n    typeof Buffer !== \"undefined\" && // eslint-disable-line no-undef\n    val instanceof Buffer // eslint-disable-line no-undef\n  ) {\n    throw new Error(\n      \"Please provide binary data as `Uint8Array`, rather than `Buffer`.\"\n    );\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    // Use the data as-is when it's already a Uint8Array that completely\n    // \"utilizes\" its underlying ArrayBuffer, to prevent any possible\n    // issues when transferring it to the worker-thread.\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (\n    val instanceof ArrayBuffer ||\n    ArrayBuffer.isView(val) ||\n    (typeof val === \"object\" && !isNaN(val?.length))\n  ) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\n    \"Invalid PDF binary data: either TypedArray, \" +\n      \"string, or array-like object is expected in the data property.\"\n  );\n}\n\nfunction isRefProxy(ref) {\n  return (\n    typeof ref === \"object\" &&\n    Number.isInteger(ref?.num) &&\n    ref.num >= 0 &&\n    Number.isInteger(ref?.gen) &&\n    ref.gen >= 0\n  );\n}\n\n/**\n * @typedef {Object} OnProgressParameters\n * @property {number} loaded - Currently loaded number of bytes.\n * @property {number} total - Total number of bytes in the PDF file.\n */\n\n/**\n * The loading task controls the operations required to load a PDF document\n * (such as network requests) and provides a way to listen for completion,\n * after which individual pages can be rendered.\n */\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n\n  constructor() {\n    this._capability = Promise.withResolvers();\n    this._transport = null;\n    this._worker = null;\n\n    /**\n     * Unique identifier for the document loading task.\n     * @type {string}\n     */\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n\n    /**\n     * Whether the loading task is destroyed or not.\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Callback to request a password if a wrong or no password was provided.\n     * The callback receives two parameters: a function that should be called\n     * with the new password, and a reason (see {@link PasswordResponses}).\n     * @type {function}\n     */\n    this.onPassword = null;\n\n    /**\n     * Callback to be able to monitor the loading progress of the PDF file\n     * (necessary to implement e.g. a loading bar).\n     * The callback receives an {@link OnProgressParameters} argument.\n     * @type {function}\n     */\n    this.onProgress = null;\n  }\n\n  /**\n   * Promise for document loading task completion.\n   * @type {Promise<PDFDocumentProxy>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Abort all network requests and destroy the worker.\n   * @returns {Promise<void>} A promise that is resolved when destruction is\n   *   completed.\n   */\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\n\n/**\n * Abstract class to support range requests file loading.\n *\n * NOTE: The TypedArrays passed to the constructor and relevant methods below\n * will generally be transferred to the worker-thread. This will help reduce\n * main-thread memory usage, however it will take ownership of the TypedArrays.\n */\nclass PDFDataRangeTransport {\n  /**\n   * @param {number} length\n   * @param {Uint8Array|null} initialData\n   * @param {boolean} [progressiveDone]\n   * @param {string} [contentDispositionFilename]\n   */\n  constructor(\n    length,\n    initialData,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = Promise.withResolvers();\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n\n  /**\n   * @param {number} begin\n   * @param {Uint8Array|null} chunk\n   */\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n\n  /**\n   * @param {number} loaded\n   * @param {number|undefined} total\n   */\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n\n  /**\n   * @param {Uint8Array|null} chunk\n   */\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n\n  /**\n   * @param {number} begin\n   * @param {number} end\n   */\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n\n  abort() {}\n}\n\n/**\n * Proxy to a `PDFDocument` in the worker thread.\n */\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getNetworkStreamName\", {\n        value: () => this._transport.getNetworkStreamName(),\n      });\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () => this._transport.getXFADatasets(),\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () => this._transport.getXRefPrevValue(),\n      });\n      Object.defineProperty(this, \"getStartXRefPos\", {\n        value: () => this._transport.getStartXRefPos(),\n      });\n      Object.defineProperty(this, \"getAnnotArray\", {\n        value: pageIndex => this._transport.getAnnotArray(pageIndex),\n      });\n    }\n  }\n\n  /**\n   * @type {AnnotationStorage} Storage for annotation data in forms.\n   */\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {number} Total number of pages in the PDF file.\n   */\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n\n  /**\n   * @type {Array<string, string|null>} A (not guaranteed to be) unique ID to\n   *   identify the PDF document.\n   *   NOTE: The first element will always be defined for all PDF documents,\n   *   whereas the second element is only defined for *modified* PDF documents.\n   */\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * NOTE: This is (mostly) intended to support printing of XFA forms.\n   *\n   * @type {Object | null} An object representing a HTML tree structure\n   *   to render the XFA, or `null` when no XFA form exists.\n   */\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n\n  /**\n   * @param {number} pageNumber - The page number to get. The first page is 1.\n   * @returns {Promise<PDFPageProxy>} A promise that is resolved with\n   *   a {@link PDFPageProxy} object.\n   */\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {Promise<number>} A promise that is resolved with the page index,\n   *   starting from zero, that is associated with the reference.\n   */\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<any>>>} A promise that is resolved\n   *   with a mapping from named destinations to references.\n   *\n   * This can be slow for large documents. Use `getDestination` instead.\n   */\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n\n  /**\n   * @param {string} id - The named destination to get.\n   * @returns {Promise<Array<any> | null>} A promise that is resolved with all\n   *   information of the given named destination, or `null` when the named\n   *   destination is not present in the PDF file.\n   */\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} containing the page labels that correspond to the page\n   *   indexes, or `null` when no page labels are present in the PDF file.\n   */\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page layout name.\n   */\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page mode name.\n   */\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with an\n   *   {Object} containing the viewer preferences, or `null` when no viewer\n   *   preferences are present in the PDF file.\n   */\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n\n  /**\n   * @returns {Promise<any | null>} A promise that is resolved with an {Array}\n   *   containing the destination, or `null` when no open action is present\n   *   in the PDF.\n   */\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n\n  /**\n   * @returns {Promise<any>} A promise that is resolved with a lookup table\n   *   for mapping named attachments to their content.\n   */\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with the JavaScript actions:\n   *     - from the name tree.\n   *     - from A or AA entries in the catalog dictionary.\n   *   , or `null` if no JavaScript exists.\n   */\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n\n  /**\n   * @typedef {Object} OutlineNode\n   * @property {string} title\n   * @property {boolean} bold\n   * @property {boolean} italic\n   * @property {Uint8ClampedArray} color - The color in RGB format to use for\n   *   display purposes.\n   * @property {string | Array<any> | null} dest\n   * @property {string | null} url\n   * @property {string | undefined} unsafeUrl\n   * @property {boolean | undefined} newWindow\n   * @property {number | undefined} count\n   * @property {Array<OutlineNode>} items\n   */\n\n  /**\n   * @returns {Promise<Array<OutlineNode>>} A promise that is resolved with an\n   *   {Array} that is a tree outline (if it has one) of the PDF file.\n   */\n  getOutline() {\n    return this._transport.getOutline();\n  }\n\n  /**\n   * @typedef {Object} GetOptionalContentConfigParameters\n   * @property {string} [intent] - Determines the optional content groups that\n   *   are visible by default; valid values are:\n   *    - 'display' (viewable groups).\n   *    - 'print' (printable groups).\n   *    - 'any' (all groups).\n   *   The default value is 'display'.\n   */\n\n  /**\n   * @param {GetOptionalContentConfigParameters} [params] - Optional content\n   *   config parameters.\n   * @returns {Promise<OptionalContentConfig>} A promise that is resolved with\n   *   an {@link OptionalContentConfig} that contains all the optional content\n   *   groups (assuming that the document has any).\n   */\n  getOptionalContentConfig({ intent = \"display\" } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n\n  /**\n   * @returns {Promise<Array<number> | null>} A promise that is resolved with\n   *   an {Array} that contains the permission flags for the PDF document, or\n   *   `null` when no permissions are present in the PDF file.\n   */\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n\n  /**\n   * @returns {Promise<{ info: Object, metadata: Metadata }>} A promise that is\n   *   resolved with an {Object} that has `info` and `metadata` properties.\n   *   `info` is an {Object} filled with anything available in the information\n   *   dictionary and similarly `metadata` is a {Metadata} object with\n   *   information from the metadata section of the PDF.\n   */\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n\n  /**\n   * @typedef {Object} MarkInfo\n   * Properties correspond to Table 321 of the PDF 32000-1:2008 spec.\n   * @property {boolean} Marked\n   * @property {boolean} UserProperties\n   * @property {boolean} Suspects\n   */\n\n  /**\n   * @returns {Promise<MarkInfo | null>} A promise that is resolved with\n   *   a {MarkInfo} object that contains the MarkInfo flags for the PDF\n   *   document, or `null` when no MarkInfo values are present in the PDF file.\n   */\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the raw data of the PDF document.\n   */\n  getData() {\n    return this._transport.getData();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the full data of the saved document.\n   */\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n\n  /**\n   * @returns {Promise<{ length: number }>} A promise that is resolved when the\n   *   document's data is loaded. It is resolved with an {Object} that contains\n   *   the `length` property that indicates size of the PDF data in bytes.\n   */\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n\n  /**\n   * Cleans up resources allocated by the document on both the main and worker\n   * threads.\n   *\n   * NOTE: Do not, under any circumstances, call this method when rendering is\n   * currently ongoing since that may lead to rendering errors.\n   *\n   * @param {boolean} [keepLoadedFonts] - Let fonts remain attached to the DOM.\n   *   NOTE: This will increase persistent memory usage, hence don't use this\n   *   option unless absolutely necessary. The default value is `false`.\n   * @returns {Promise} A promise that is resolved when clean-up has finished.\n   */\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n\n  /**\n   * Destroys the current document instance and terminates the worker.\n   */\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {number | null} The page number, if it's cached.\n   */\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n\n  /**\n   * @type {DocumentInitParameters} A subset of the current\n   *   {DocumentInitParameters}, which are needed in the viewer.\n   */\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n\n  /**\n   * @type {PDFDocumentLoadingTask} The loadingTask for the current document.\n   */\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<Object>> | null>} A promise that is\n   *   resolved with an {Object} containing /AcroForm field data for the JS\n   *   sandbox, or `null` when no field data is present in the PDF file.\n   */\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n\n  /**\n   * @returns {Promise<boolean>} A promise that is resolved with `true`\n   *   if some /AcroForm fields have JavaScript actions.\n   */\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with an\n   *   {Array<string>} containing IDs of annotations that have a calculation\n   *   action, or `null` when no such annotations are present in the PDF file.\n   */\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\n\n/**\n * Page getViewport parameters.\n *\n * @typedef {Object} GetViewportParameters\n * @property {number} scale - The desired scale of the viewport.\n * @property {number} [rotation] - The desired rotation, in degrees, of\n *   the viewport. If omitted it defaults to the page rotation.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be\n *   flipped. The default value is `false`.\n */\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @property {boolean} [includeMarkedContent] - When true include marked\n *   content items in the items array of TextContent. The default is `false`.\n * @property {boolean} [disableNormalization] - When true the text is *not*\n *   normalized in the worker-thread. The default is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {Array<TextItem | TextMarkedContent>} items - Array of\n *   {@link TextItem} and {@link TextMarkedContent} objects. TextMarkedContent\n *   items are included when includeMarkedContent is true.\n * @property {Object<string, TextStyle>} styles - {@link TextStyle} objects,\n *   indexed by font name.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - Text content.\n * @property {string} dir - Text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {Array<any>} transform - Transformation matrix.\n * @property {number} width - Width in device space.\n * @property {number} height - Height in device space.\n * @property {string} fontName - Font name used by PDF.js for converted font.\n * @property {boolean} hasEOL - Indicating if the text content is followed by a\n *   line-break.\n */\n\n/**\n * Page text marked content part.\n *\n * @typedef {Object} TextMarkedContent\n * @property {string} type - Either 'beginMarkedContent',\n *   'beginMarkedContentProps', or 'endMarkedContent'.\n * @property {string} id - The marked content identifier. Only used for type\n *   'beginMarkedContentProps'.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - Font ascent.\n * @property {number} descent - Font descent.\n * @property {boolean} vertical - Whether or not the text is in vertical mode.\n * @property {string} fontFamily - The possible font family.\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @property {string} [intent] - Determines the annotations that are fetched,\n *   can be 'display' (viewable annotations), 'print' (printable annotations),\n *   or 'any' (all annotations). The default value is 'display'.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {CanvasRenderingContext2D} canvasContext - A 2D context of a DOM\n *   Canvas object.\n * @property {PageViewport} viewport - Rendering viewport obtained by calling\n *   the `PDFPageProxy.getViewport` method.\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are rendered\n *   onto the canvas, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {Array<any>} [transform] - Additional transform, applied just\n *   before viewport transform.\n * @property {CanvasGradient | CanvasPattern | string} [background] - Background\n *   to use for the canvas.\n *   Any valid `canvas.fillStyle` can be used: a `DOMString` parsed as CSS\n *   <color> value, a `CanvasGradient` object (a linear or radial gradient) or\n *   a `CanvasPattern` object (a repetitive image). The default value is\n *   'rgb(255,255,255)'.\n *\n *   NOTE: This option may be partially, or completely, ignored when the\n *   `pageColors`-option is used.\n * @property {Object} [pageColors] - Overwrites background and foreground colors\n *   with user defined ones in order to improve readability in high contrast\n *   mode.\n * @property {Promise<OptionalContentConfig>} [optionalContentConfigPromise] -\n *   A promise that should resolve with an {@link OptionalContentConfig}\n *   created from `PDFDocumentProxy.getOptionalContentConfig`. If `null`,\n *   the configuration will be fetched automatically with the default visibility\n *   states set.\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap] - Map some\n *   annotation ids with canvases used to render them.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n */\n\n/**\n * Page getOperatorList parameters.\n *\n * @typedef {Object} GetOperatorListParameters\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are included\n *   in the operatorList, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n */\n\n/**\n * Structure tree node. The root node will have a role \"Root\".\n *\n * @typedef {Object} StructTreeNode\n * @property {Array<StructTreeNode | StructTreeContent>} children - Array of\n *   {@link StructTreeNode} and {@link StructTreeContent} objects.\n * @property {string} role - element's role, already mapped if a role map exists\n * in the PDF.\n */\n\n/**\n * Structure tree content.\n *\n * @typedef {Object} StructTreeContent\n * @property {string} type - either \"content\" for page and stream structure\n *   elements or \"object\" for object references.\n * @property {string} id - unique id that will map to the text layer.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array<number>} fnArray - Array containing the operator functions.\n * @property {Array<any>} argsArray - Array containing the arguments of the\n *   functions.\n */\n\n/**\n * Proxy to a `PDFPage` in the worker thread.\n */\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n\n  #pendingCleanup = false;\n\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    /** @type {PDFObjects} */\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n\n  /**\n   * @type {number} Page number of the page. First page is 1.\n   */\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n\n  /**\n   * @type {number} The number of degrees the page is rotated clockwise.\n   */\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n\n  /**\n   * @type {RefProxy | null} The reference that points to this page.\n   */\n  get ref() {\n    return this._pageInfo.ref;\n  }\n\n  /**\n   * @type {number} The default size of units in 1/72nds of an inch.\n   */\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n\n  /**\n   * @type {Array<number>} An array of the visible portion of the PDF page in\n   *   user space units [x1, y1, x2, y2].\n   */\n  get view() {\n    return this._pageInfo.view;\n  }\n\n  /**\n   * @param {GetViewportParameters} params - Viewport parameters.\n   * @returns {PageViewport} Contains 'width' and 'height' properties\n   *   along with transforms required for rendering.\n   */\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * @param {GetAnnotationsParameters} [params] - Annotation parameters.\n   * @returns {Promise<Array<any>>} A promise that is resolved with an\n   *   {Array} of the annotation objects.\n   */\n  getAnnotations({ intent = \"display\" } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n\n  /**\n   * @returns {Promise<Object>} A promise that is resolved with an\n   *   {Object} with JS actions.\n   */\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with a fake DOM object (a tree structure where elements\n   *   are {Object} with a name, attributes (class, style, ...), value and\n   *   children, very similar to a HTML DOM tree), or `null` if no XFA exists.\n   */\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n\n  /**\n   * Begins the process of rendering a page to the desired context.\n   *\n   * @param {RenderParameters} params - Page render parameters.\n   * @returns {RenderTask} An object that contains a promise that is\n   *   resolved when the page finishes rendering.\n   */\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n  }) {\n    this._stats?.time(\"Overall\");\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage\n    );\n    const { renderingIntent, cacheKey } = intentArgs;\n    // If there was a pending destroy, cancel it so no cleanup happens during\n    // this call to render...\n    this.#pendingCleanup = false;\n    // ... and ensure that a delayed cleanup is always aborted.\n    this.#abortDelayedCleanup();\n\n    optionalContentConfigPromise ||=\n      this._transport.getOptionalContentConfig(renderingIntent);\n\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n\n    // If there's no displayReadyCapability yet, then the operatorList\n    // was never requested before. Make the request and create the promise.\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n\n      // Attempt to reduce memory usage during *printing*, by always running\n      // cleanup immediately once rendering has finished.\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(/* delayed = */ !intentPrint);\n\n      if (error) {\n        internalRenderTask.capability.reject(error);\n\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error),\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n\n      this._stats?.timeEnd(\"Rendering\");\n      this._stats?.timeEnd(\"Overall\");\n    };\n\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      // Only include the required properties, and *not* the entire object.\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n    });\n\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n\n    Promise.all([\n      intentState.displayReadyCapability.promise,\n      optionalContentConfigPromise,\n    ])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.destroyed) {\n          complete();\n          return;\n        }\n        this._stats?.time(\"Rendering\");\n\n        if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n          throw new Error(\n            \"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" +\n              \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\"\n          );\n        }\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n\n    return renderTask;\n  }\n\n  /**\n   * @param {GetOperatorListParameters} params - Page getOperatorList\n   *   parameters.\n   * @returns {Promise<PDFOperatorList>} A promise resolved with an\n   *   {@link PDFOperatorList} object that represents the page's operator list.\n   */\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n  } = {}) {\n    if (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"GENERIC\")) {\n      throw new Error(\"Not implemented: getOperatorList\");\n    }\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n      /* isOpList = */ true\n    );\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {ReadableStream} Stream for reading text content chunks.\n   */\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false,\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n\n    return this._transport.messageHandler.sendWithStream(\n      \"GetTextContent\",\n      {\n        pageIndex: this._pageIndex,\n        includeMarkedContent: includeMarkedContent === true,\n        disableNormalization: disableNormalization === true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      }\n    );\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {Promise<TextContent>} A promise that is resolved with a\n   *   {@link TextContent} object that represents the page's text content.\n   */\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      // TODO: We need to revisit this once the XFA foreground patch lands and\n      // only do this for non-foreground XFA.\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n      };\n      pump();\n    });\n  }\n\n  /**\n   * @returns {Promise<StructTreeNode>} A promise that is resolved with a\n   *   {@link StructTreeNode} object that represents the page's structure tree,\n   *   or `null` when no structure tree is present for the current page.\n   */\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n\n  /**\n   * Destroys the page object.\n   * @private\n   */\n  _destroy() {\n    this.destroyed = true;\n\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true,\n      });\n\n      if (intentState.opListReadCapability) {\n        // Avoid errors below, since the renderTasks are just stubs.\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n\n    return Promise.all(waitOn);\n  }\n\n  /**\n   * Cleans up resources allocated by the page.\n   *\n   * @param {boolean} [resetStats] - Reset page stats, if enabled.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(/* delayed = */ false);\n\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n\n  /**\n   * Attempts to clean up if rendering is in a state where that's possible.\n   * @param {boolean} [delayed] - Delay the cleanup, to e.g. improve zooming\n   *   performance in documents with large images.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(/* delayed = */ false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return; // Rendering was cancelled.\n    }\n    this._stats?.timeEnd(\"Page Request\");\n\n    // TODO Refactor RenderPageRequest to separate rendering\n    // and operator list logic\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n\n  /**\n   * @private\n   */\n  _renderPageChunk(operatorListChunk, intentState) {\n    // Add the new chunk to the current operator list.\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n\n    // Notify all the rendering tasks there are more operators to be consumed.\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(/* delayed = */ true);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n  }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        Number.isInteger(renderingIntent) && renderingIntent > 0,\n        '_pumpOperatorList: Expected valid \"renderingIntent\" argument.'\n      );\n    }\n    const { map, transfer } = annotationStorageSerializable;\n\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      \"GetOperatorList\",\n      {\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        cacheKey,\n        annotationStorage: map,\n      },\n      transfer\n    );\n    const reader = readableStream.getReader();\n\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        reason => {\n          intentState.streamReader = null;\n\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          if (intentState.operatorList) {\n            // Mark operator list as complete.\n            intentState.operatorList.lastChunk = true;\n\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            this.#tryCleanup(/* delayed = */ true);\n          }\n\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        }\n      );\n    };\n    pump();\n  }\n\n  /**\n   * @private\n   */\n  _abortOperatorList({ intentState, reason, force = false }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        reason instanceof Error,\n        '_abortOperatorList: Expected valid \"reason\" argument.'\n      );\n    }\n\n    if (!intentState.streamReader) {\n      return;\n    }\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    if (!force) {\n      // Ensure that an Error occurring in *only* one `InternalRenderTask`, e.g.\n      // multiple render() calls on the same canvas, won't break all rendering.\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      // Don't immediately abort parsing on the worker-thread when rendering is\n      // cancelled, since that will unnecessarily delay re-rendering when (for\n      // partially parsed pages) e.g. zooming/rotation occurs in the viewer.\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < /* ms = */ 1000) {\n          // Above, we prevent the total delay from becoming arbitrarily large.\n          delay += reason.extraDelay;\n        }\n\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({ intentState, reason, force: true });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader\n      .cancel(new AbortException(reason.message))\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n    intentState.streamReader = null;\n\n    if (this._transport.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    // Remove the current `intentState`, since a cancelled `getOperatorList`\n    // call on the worker-thread cannot be re-started...\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    // ... and force clean-up to ensure that any old state is always removed.\n    this.cleanup();\n  }\n\n  /**\n   * @type {StatTimer | null} Returns page stats, if enabled; returns `null`\n   *   otherwise.\n   */\n  get stats() {\n    return this._stats;\n  }\n}\n\nclass LoopbackPort {\n  #listeners = new Set();\n\n  #deferred = Promise.resolve();\n\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? { transfer } : null),\n    };\n\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n\n  terminate() {\n    this.#listeners.clear();\n  }\n}\n\n/**\n * @typedef {Object} PDFWorkerParameters\n * @property {string} [name] - The name of the worker.\n * @property {Worker} [port] - The `workerPort` object.\n * @property {number} [verbosity] - Controls the logging level;\n *   the constants from {@link VerbosityLevel} should be used.\n */\n\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fakeWorkerId: 0,\n};\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  if (isNodeJS) {\n    // Workers aren't supported in Node.js, force-disabling them there.\n    PDFWorkerUtil.isWorkerDisabled = true;\n\n    GlobalWorkerOptions.workerSrc ||= PDFJSDev.test(\"LIB\")\n      ? \"../pdf.worker.js\"\n      : \"./pdf.worker.mjs\";\n  }\n\n  // Check if URLs have the same origin. For non-HTTP based URLs, returns false.\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === \"null\") {\n        return false; // non-HTTP url\n      }\n    } catch {\n      return false;\n    }\n\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    // We will rely on blob URL's property to specify origin.\n    // We want this function to fail in case if createObjectURL or Blob do not\n    // exist or fail for some reason -- our Worker creation will fail anyway.\n    const wrapper = `await import(\"${url}\");`;\n    return URL.createObjectURL(\n      new Blob([wrapper], { type: \"text/javascript\" })\n    );\n  };\n}\n\n/**\n * PDF.js web worker abstraction that controls the instantiation of PDF\n * documents. Message handlers are used to pass information from the main\n * thread to the worker thread and vice versa. If the creation of a web\n * worker is not possible, a \"fake\" worker will be used instead.\n *\n * @param {PDFWorkerParameters} params - The worker initialization parameters.\n */\nclass PDFWorker {\n  static #workerPorts;\n\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel(),\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n\n    this._readyCapability = Promise.withResolvers();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n\n    if (\n      (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) &&\n      port\n    ) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n\n  /**\n   * Promise for worker initialization completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._readyCapability.promise;\n  }\n\n  /**\n   * The current `workerPort`, when it exists.\n   * @type {Worker}\n   */\n  get port() {\n    return this._port;\n  }\n\n  /**\n   * The current MessageHandler-instance.\n   * @type {MessageHandler}\n   */\n  get messageHandler() {\n    return this._messageHandler;\n  }\n\n  _initializeFromPort(port) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _initializeFromPort\");\n    }\n    this._port = port;\n    this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {\n      // Ignoring \"ready\" event -- MessageHandler should already be initialized\n      // and ready to accept messages.\n    });\n    this._readyCapability.resolve();\n    // Send global setting, e.g. verbosity level.\n    this._messageHandler.send(\"configure\", {\n      verbosity: this.verbosity,\n    });\n  }\n\n  _initialize() {\n    // If worker support isn't disabled explicit and the browser has worker\n    // support, create a new web worker and test if it/the browser fulfills\n    // all requirements to run parts of pdf.js in a web worker.\n    // Right now, the requirement is, that an Uint8Array is still an\n    // Uint8Array as it arrives on the worker. (Chrome added this with v.15.)\n    if (\n      !PDFWorkerUtil.isWorkerDisabled &&\n      !PDFWorker.#mainThreadWorkerMessageHandler\n    ) {\n      let { workerSrc } = PDFWorker;\n\n      try {\n        // Wraps workerSrc path into blob URL, if the former does not belong\n        // to the same origin.\n        if (\n          typeof PDFJSDev !== \"undefined\" &&\n          PDFJSDev.test(\"GENERIC\") &&\n          !PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)\n        ) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(\n            new URL(workerSrc, window.location).href\n          );\n        }\n\n        const worker = new Worker(workerSrc, { type: \"module\" });\n        const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n        const terminateEarly = () => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          } else {\n            // Fall back to fake worker if the termination is caused by an\n            // error (e.g. NetworkError / SecurityError).\n            this._setupFakeWorker();\n          }\n        };\n\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            // Worker failed to initialize due to an error. Clean up and fall\n            // back to the fake worker.\n            terminateEarly();\n          }\n        };\n        worker.addEventListener(\"error\", onWorkerError);\n\n        messageHandler.on(\"test\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n\n            this._readyCapability.resolve();\n            // Send global setting, e.g. verbosity level.\n            messageHandler.send(\"configure\", {\n              verbosity: this.verbosity,\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n\n        messageHandler.on(\"ready\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          try {\n            sendTest();\n          } catch {\n            // We need fallback to a faked worker.\n            this._setupFakeWorker();\n          }\n        });\n\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          // Ensure that we can use `postMessage` transfers.\n          messageHandler.send(\"test\", testObj, [testObj.buffer]);\n        };\n\n        // It might take time for the worker to initialize. We will try to send\n        // the \"test\" message immediately, and once the \"ready\" message arrives.\n        // The worker shall process only the first received \"test\" message.\n        sendTest();\n        return;\n      } catch {\n        info(\"The worker has been disabled.\");\n      }\n    }\n    // Either workers are disabled, not supported or have thrown an exception.\n    // Thus, we fallback to a faked worker.\n    this._setupFakeWorker();\n  }\n\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n\n    PDFWorker._setupFakeWorkerGlobal\n      .then(WorkerMessageHandler => {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          return;\n        }\n        const port = new LoopbackPort();\n        this._port = port;\n\n        // All fake workers use the same port, making id unique.\n        const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n\n        // If the main thread is our worker, setup the handling for the\n        // messages -- the main thread sends to it self.\n        const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n\n        const messageHandler = new MessageHandler(id, id + \"_worker\", port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n        // Send global setting, e.g. verbosity level.\n        messageHandler.send(\"configure\", {\n          verbosity: this.verbosity,\n        });\n      })\n      .catch(reason => {\n        this._readyCapability.reject(\n          new Error(`Setting up fake worker failed: \"${reason.message}\".`)\n        );\n      });\n  }\n\n  /**\n   * Destroys the worker instance.\n   */\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      // We need to terminate only web worker created resource.\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n\n  /**\n   * @param {PDFWorkerParameters} params - The worker initialization parameters.\n   */\n  static fromPort(params) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: fromPort\");\n    }\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\n          \"PDFWorker.fromPort - the worker is being destroyed.\\n\" +\n            \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\"\n        );\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n\n  /**\n   * The current `workerSrc`, when it exists.\n   * @type {string}\n   */\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n\n  // Loads worker code into the main-thread.\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        // The worker was already loaded using e.g. a `<script>` tag.\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker =\n        typeof PDFJSDev === \"undefined\"\n          ? await import(\"pdfjs/pdf.worker.js\")\n          : await __non_webpack_import__(this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass WorkerTransport {\n  #methodPromises = new Map();\n\n  #pageCache = new Map();\n\n  #pagePromises = new Map();\n\n  #pageRefCache = new Map();\n\n  #passwordCapability = null;\n\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement,\n    });\n    this._params = params;\n\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n\n    this.setupMessageHandler();\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getNetworkStreamName\", {\n        value: () => networkStream?.constructor?.name || null,\n      });\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetXFADatasets\", null),\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetXRefPrevValue\", null),\n      });\n      Object.defineProperty(this, \"getStartXRefPos\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetStartXRefPos\", null),\n      });\n      Object.defineProperty(this, \"getAnnotArray\", {\n        value: pageIndex =>\n          this.messageHandler.sendWithPromise(\"GetAnnotArray\", { pageIndex }),\n      });\n    }\n  }\n\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n\n  getRenderingIntent(\n    intent,\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isOpList = false\n  ) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY; // Default value.\n    let annotationStorageSerializable = SerializableEmpty;\n\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n\n        const annotationStorage =\n          renderingIntent & RenderingIntentFlag.PRINT &&\n          printAnnotationStorage instanceof PrintAnnotationStorage\n            ? printAnnotationStorage\n            : this.annotationStorage;\n\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationStorageSerializable.hash}`,\n      annotationStorageSerializable,\n    };\n  }\n\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n\n    this.#passwordCapability?.reject(\n      new Error(\"Worker was destroyed during onPassword callback\")\n    );\n\n    const waitOn = [];\n    // We need to wait for all renderings to be completed, e.g.\n    // timeout/rAF can take a long time.\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    // Allow `AnnotationStorage`-related clean-up when destroying the document.\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    // We also need to wait for the worker to finish its long running tasks.\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      cleanupTextLayer();\n\n      this._networkStream?.cancelAllRequests(\n        new AbortException(\"Worker was terminated.\")\n      );\n\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetReader - no `IPDFStream` instance available.\"\n      );\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetReader - expected an ArrayBuffer.\"\n            );\n            // Enqueue data chunk into sink, and transfer it\n            // to other side as `Transferable` object.\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = Promise.withResolvers();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        // If stream or range are disabled, it's our only way to report\n        // loading progress.\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total,\n            });\n          };\n        }\n\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength,\n        });\n      }, headersCapability.reject);\n\n      return headersCapability.promise;\n    });\n\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetRangeReader - no `IPDFStream` instance available.\"\n      );\n      const rangeReader = this._networkStream.getRangeReader(\n        data.begin,\n        data.end\n      );\n\n      // When streaming is enabled, it's possible that the data requested here\n      // has already been fetched via the `_fullRequestReader` implementation.\n      // However, given that the PDF data is loaded asynchronously on the\n      // main-thread and then sent via `postMessage` to the worker-thread,\n      // it may not have been available during parsing (hence the attempt to\n      // use range requests here).\n      //\n      // To avoid wasting time and resources here, we'll thus *not* dispatch\n      // range requests if the data was already loaded but has not been sent to\n      // the worker-thread yet (which will happen via the `_fullRequestReader`).\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetRangeReader - expected an ArrayBuffer.\"\n            );\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"GetDoc\", ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable(\"DocException - expected a valid Error.\");\n      }\n      loadingTask._capability.reject(reason);\n    });\n\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this.#passwordCapability = Promise.withResolvers();\n\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({ password });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this.#passwordCapability.reject(ex);\n        }\n      } else {\n        this.#passwordCapability.reject(\n          new PasswordException(exception.message, exception.code)\n        );\n      }\n      return this.#passwordCapability.promise;\n    });\n\n    messageHandler.on(\"DataLoaded\", data => {\n      // For consistency: Ensure that progress is always reported when the\n      // entire PDF file has been loaded, regardless of how it was fetched.\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length,\n      });\n\n      this.downloadInfoCapability.resolve(data);\n    });\n\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null; // Ignore any pending requests if the worker was terminated.\n      }\n\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n\n      switch (type) {\n        case \"Font\":\n          const params = this._params;\n\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n\n          const inspectFont =\n            params.pdfBug && globalThis.FontInspector?.enabled\n              ? (font, url) => globalThis.FontInspector.fontAdded(font, url)\n              : null;\n          const font = new FontFaceObject(exportedData, {\n            disableFontFace: params.disableFontFace,\n            ignoreErrors: params.ignoreErrors,\n            inspectFont,\n          });\n\n          this.fontLoader\n            .bind(font)\n            .catch(() => messageHandler.sendWithPromise(\"FontFallback\", { id }))\n            .finally(() => {\n              if (!params.fontExtraProperties && font.data) {\n                // Immediately release the `font.data` property once the font\n                // has been attached to the DOM, since it's no longer needed,\n                // rather than waiting for a `PDFDocumentProxy.cleanup` call.\n                // Since `font.data` could be very large, e.g. in some cases\n                // multiple megabytes, this will help reduce memory usage.\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case \"CopyLocalImage\":\n          const { imageRef } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n\n      return null;\n    });\n\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        // Ignore any pending requests if the worker was terminated.\n        return;\n      }\n\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      // Don't store data *after* cleanup has successfully run, see bug 1854145.\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close(); // Release any `ImageBitmap` data.\n        return;\n      }\n\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n\n          // Heuristic that will allow us not to store large data.\n          if (imageData?.dataLen > MAX_IMAGE_SIZE_TO_CACHE) {\n            pageProxy._maybeCleanupAfterRender = true;\n          }\n          break;\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total,\n      });\n    });\n\n    messageHandler.on(\"FetchBuiltInCMap\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(\n          new Error(\n            \"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n\n    messageHandler.on(\"FetchStandardFontData\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(\n          new Error(\n            \"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\n        \"saveDocument called while `annotationStorage` is empty, \" +\n          \"please use the getData-method instead.\"\n      );\n    }\n    const { map, transfer } = this.annotationStorage.serializable;\n\n    return this.messageHandler\n      .sendWithPromise(\n        \"SaveDocument\",\n        {\n          isPureXfa: !!this._htmlForXfa,\n          numPages: this._numPages,\n          annotationStorage: map,\n          filename: this._fullReader?.filename ?? null,\n        },\n        transfer\n      )\n      .finally(() => {\n        this.annotationStorage.resetModified();\n      });\n  }\n\n  getPage(pageNumber) {\n    if (\n      !Number.isInteger(pageNumber) ||\n      pageNumber <= 0 ||\n      pageNumber > this._numPages\n    ) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(\"GetPage\", {\n        pageIndex,\n      })\n      .then(pageInfo => {\n        if (this.destroyed) {\n          throw new Error(\"Transport destroyed\");\n        }\n        if (pageInfo.refStr) {\n          this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n        }\n\n        const page = new PDFPageProxy(\n          pageIndex,\n          pageInfo,\n          this,\n          this._params.pdfBug\n        );\n        this.#pageCache.set(pageIndex, page);\n        return page;\n      });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen,\n    });\n  }\n\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent,\n    });\n  }\n\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id,\n    });\n  }\n\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex,\n    });\n  }\n\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex,\n    });\n  }\n\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(\n      data => new OptionalContentConfig(data, renderingIntent)\n    );\n  }\n\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(name, null)\n      .then(results => ({\n        info: results[0],\n        metadata: results[1] ? new Metadata(results[1]) : null,\n        contentDispositionFilename: this._fullReader?.filename ?? null,\n        contentLength: this._fullReader?.contentLength ?? null,\n      }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return; // No need to manually clean-up when destruction has started.\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n\n      if (!cleanupSuccessful) {\n        throw new Error(\n          `startCleanup: Page ${page.pageNumber} is currently rendering.`\n        );\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(/* keepHCM = */ true);\n    cleanupTextLayer();\n  }\n\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n\n  get loadingParams() {\n    const { disableAutoFetch, enableXfa } = this._params;\n    return shadow(this, \"loadingParams\", {\n      disableAutoFetch,\n      enableXfa,\n    });\n  }\n}\n\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects for\n * fonts, images, rendering code, etc. These objects may get processed inside of\n * a worker. This class implements some basic methods to manage these objects.\n */\nclass PDFObjects {\n  #objs = Object.create(null);\n\n  /**\n   * Ensures there is an object defined for `objId`.\n   *\n   * @param {string} objId\n   * @returns {Object}\n   */\n  #ensureObj(objId) {\n    return (this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA,\n    });\n  }\n\n  /**\n   * If called *without* callback, this returns the data of `objId` but the\n   * object needs to be resolved. If it isn't, this method throws.\n   *\n   * If called *with* a callback, the callback is called with the data of the\n   * object once the object is resolved. That means, if you call this method\n   * and the object is already resolved, the callback gets called right away.\n   *\n   * @param {string} objId\n   * @param {function} [callback]\n   * @returns {any}\n   */\n  get(objId, callback = null) {\n    // If there is a callback, then the get can be async and the object is\n    // not required to be resolved right now.\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    // If there isn't a callback, the user expects to get the resolved data\n    // directly.\n    const obj = this.#objs[objId];\n    // If there isn't an object yet or the object isn't resolved, then the\n    // data isn't ready yet!\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n\n  /**\n   * @param {string} objId\n   * @returns {boolean}\n   */\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n\n  /**\n   * Resolves the object `objId` with optional `data`.\n   *\n   * @param {string} objId\n   * @param {any} [data]\n   */\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n\n  clear() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      data?.bitmap?.close(); // Release any `ImageBitmap` data.\n    }\n    this.#objs = Object.create(null);\n  }\n\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n/**\n * Allows controlling of the rendering tasks.\n */\nclass RenderTask {\n  #internalRenderTask = null;\n\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n\n    /**\n     * Callback for incremental rendering -- a function that will be called\n     * each time the rendering is paused.  To continue rendering call the\n     * function that is the first argument to the callback.\n     * @type {function}\n     */\n    this.onContinue = null;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getOperatorList\", {\n        value: () => this.#internalRenderTask.operatorList,\n      });\n    }\n  }\n\n  /**\n   * Promise for rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n\n  /**\n   * Cancels the rendering task. If the task is currently rendering it will\n   * not be cancelled until graphics pauses with a timeout. The promise that\n   * this object extends will be rejected when cancelled.\n   *\n   * @param {number} [extraDelay]\n   */\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(/* error = */ null, extraDelay);\n  }\n\n  /**\n   * Whether form fields are rendered separately from the main operatorList.\n   * @type {boolean}\n   */\n  get separateAnnots() {\n    const { separateAnnots } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const { annotationCanvasMap } = this.#internalRenderTask;\n    return (\n      separateAnnots.form ||\n      (separateAnnots.canvas && annotationCanvasMap?.size > 0)\n    );\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame =\n      useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    // caching this-bound methods\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n\n  get completed() {\n    return this.capability.promise.catch(function () {\n      // Ignoring errors, since we only want to know when rendering is\n      // no longer pending.\n    });\n  }\n\n  initializeGraphics({ transparency = false, optionalContentConfig }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\n          \"Cannot use the same canvas during multiple render() operations. \" +\n            \"Use different canvas or ensure previous operations were \" +\n            \"cancelled or completed.\"\n        );\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const { canvasContext, viewport, transform, background } = this.params;\n\n    this.gfx = new CanvasGraphics(\n      canvasContext,\n      this.commonObjs,\n      this.objs,\n      this.canvasFactory,\n      this.filterFactory,\n      { optionalContentConfig },\n      this.annotationCanvasMap,\n      this.pageColors\n    );\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background,\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n\n    this.callback(\n      error ||\n        new RenderingCancelledException(\n          `Rendering cancelled, page ${this._pageIndex + 1}`,\n          extraDelay\n        )\n    );\n  }\n\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(\n      this.operatorList,\n      this.operatorListIdx,\n      this._continueBound,\n      this.stepper\n    );\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n\n        this.callback();\n      }\n    }\n  }\n}\n\n/** @type {string} */\nconst version =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : null;\n/** @type {string} */\nconst build =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : null;\n\nexport {\n  build,\n  DefaultCanvasFactory,\n  DefaultCMapReaderFactory,\n  DefaultFilterFactory,\n  DefaultStandardFontDataFactory,\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFDocumentLoadingTask,\n  PDFDocumentProxy,\n  PDFPageProxy,\n  PDFWorker,\n  PDFWorkerUtil,\n  RenderTask,\n  version,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CMapCompressionType, unreachable } from \"../shared/util.js\";\n\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      unreachable(\"Cannot initialize BaseFilterFactory.\");\n    }\n  }\n\n  addFilter(maps) {\n    return \"none\";\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n\n  destroy(keepHCM = false) {}\n}\n\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n  }\n\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\"),\n    };\n  }\n\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    // Zeroing the width and height cause Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\n\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = true }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The CMap \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.'\n      );\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed\n      ? CMapCompressionType.BINARY\n      : CMapCompressionType.NONE;\n\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(\n        `Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`\n      );\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseStandardFontDataFactory {\n  constructor({ baseUrl = null }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The standard font \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"standardFontDataUrl\" API parameter is provided.'\n      );\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n\n    return this._fetchData(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n\n    return svg;\n  }\n\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\n\nexport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n};\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FormatError, info, unreachable, Util } from \"../shared/util.js\";\nimport { getCurrentTransform } from \"./display_utils.js\";\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\",\n};\n\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\n\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\n\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(\n        this._p0[0],\n        this._p0[1],\n        this._p1[0],\n        this._p1[1]\n      );\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(\n        this._p0[0],\n        this._p0[1],\n        this._r0,\n        this._p1[0],\n        this._p1[1],\n        this._r1\n      );\n    }\n\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(\n        pathType,\n        getCurrentTransform(ctx)\n      ) || [0, 0, 0, 0];\n      // Create a canvas that is only as big as the current path. This doesn't\n      // allow us to cache the pattern, but it generally creates much smaller\n      // canvases and saves memory use. See bug 1722807 for an example.\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\n        \"pattern\",\n        width,\n        height,\n        true\n      );\n\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      // Non shading fill patterns are positioned relative to the base transform\n      // (usually the page's initial transform), but we may have created a\n      // smaller canvas based on the path, so we must account for the shift.\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [\n        1,\n        0,\n        0,\n        1,\n        ownerBBox[0],\n        ownerBBox[1],\n      ]);\n\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      // Shading fills are applied relative to the current matrix which is also\n      // how canvas gradients work, so there's no need to do anything special\n      // here.\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\n\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  // Very basic Gouraud-shaded triangle rasterization algorithm.\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = (car - (car - cbr) * k) | 0;\n      bytes[j++] = (cag - (cag - cbg) * k) | 0;\n      bytes[j++] = (cab - (cab - cbb) * k) | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\n\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(\n            data,\n            context,\n            ps[q],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n          drawTriangle(\n            data,\n            context,\n            ps[q + verticesPerRow + 1],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q + verticesPerRow + 1],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(\n          data,\n          context,\n          ps[i],\n          ps[i + 1],\n          ps[i + 2],\n          cs[i],\n          cs[i + 1],\n          cs[i + 2]\n        );\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\n\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    const EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    const MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n    // We need to keep transparent border around our pattern for fill():\n    // createPattern with 'no-repeat' will bleed edges across entire area.\n    const BORDER_SIZE = 2;\n\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n\n    const width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n\n    const tmpCanvas = cachedCanvases.getCanvas(\n      \"mesh\",\n      paddedWidth,\n      paddedHeight,\n      false\n    );\n    const tmpCtx = tmpCanvas.context;\n\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));\n    } else {\n      // Obtain scale from matrix and current transformation matrix.\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n\n    // Rasterizing on the main thread since sending/queue large canvases\n    // might cause OOM.\n    const temporaryPatternCanvas = this._createMeshCanvas(\n      scale,\n      pathType === PathType.SHADING ? null : this._background,\n      owner.cachedCanvases\n    );\n\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n\n    ctx.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\n\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\n\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\n\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2,\n};\n\nclass TilingPattern {\n  // 10in @ 300dpi shall be enough.\n  static MAX_PATTERN_SIZE = 3000;\n\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n\n    info(\"TilingType: \" + tilingType);\n\n    // A tiling pattern as defined by PDF spec 8.7.2 is a cell whose size is\n    // described by bbox, and may repeat regularly by shifting the cell by\n    // xstep and ystep.\n    // Because the HTML5 canvas API does not support pattern repetition with\n    // gaps in between, we use the xstep/ystep instead of the bbox's size.\n    //\n    // This has the following consequences (similarly for ystep):\n    //\n    // - If xstep is the same as bbox, then there is no observable difference.\n    //\n    // - If xstep is larger than bbox, then the pattern canvas is partially\n    //   empty: the area bounded by bbox is painted, the outside area is void.\n    //\n    // - If xstep is smaller than bbox, then the pixels between xstep and the\n    //   bbox boundary will be missing. This is INCORRECT behavior.\n    //   \"Figures on adjacent tiles should not overlap\" (PDF spec 8.7.3.1),\n    //   but overlapping cells without common pixels are still valid.\n    //   TODO: Fix the implementation, to allow this scenario to be painted\n    //   correctly.\n\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n\n    // Obtain scale from matrix and current transformation matrix.\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(\n      this.baseTransform\n    );\n    const combinedScale = [\n      matrixScale[0] * curMatrixScale[0],\n      matrixScale[1] * curMatrixScale[1],\n    ];\n\n    // Use width and height values that are as close as possible to the end\n    // result when the pattern is used. Too low value makes the pattern look\n    // blurry. Too large value makes it look too crispy.\n    const dimx = this.getSizeAndScale(\n      xstep,\n      this.ctx.canvas.width,\n      combinedScale[0]\n    );\n    const dimy = this.getSizeAndScale(\n      ystep,\n      this.ctx.canvas.height,\n      combinedScale[1]\n    );\n\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\n      \"pattern\",\n      dimx.size,\n      dimy.size,\n      true\n    );\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    // Some bounding boxes have negative x0/y0 coordinates which will cause the\n    // some of the drawing to be off of the canvas. To avoid this shift the\n    // bounding box over.\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n\n    // To match CanvasGraphics beginDrawing we must save the context here or\n    // else we end up with unbalanced save/restores.\n    tmpCtx.save();\n\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n\n    graphics.executeOperatorList(operatorList);\n\n    graphics.endDrawing();\n\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0,\n    };\n  }\n\n  getSizeAndScale(step, realOutputSize, scale) {\n    // xstep / ystep may be negative -- normalize.\n    step = Math.abs(step);\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    // Use the destination canvas's size if it is bigger than the hard-coded\n    // limit of MAX_PATTERN_SIZE to avoid clipping patterns that cover the\n    // whole canvas.\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return { scale, size };\n  }\n\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [\n      x0,\n      y0,\n      x1,\n      y1,\n    ]);\n    graphics.clip();\n    graphics.endPath();\n  }\n\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        // Set color needed by image masks (fixes issues 3226 and 8741).\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    // PDF spec 8.7.2 NOTE 1: pattern's matrix is relative to initial matrix.\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n    let domMatrix = new DOMMatrix(matrix);\n    // Rescale and so that the ctx.createPattern call generates a pattern with\n    // the desired size.\n    domMatrix = domMatrix.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    domMatrix = domMatrix.scale(\n      1 / temporaryPatternCanvas.scaleX,\n      1 / temporaryPatternCanvas.scaleY\n    );\n\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n\n    return pattern;\n  }\n}\n\nexport { getShadingPattern, PathType, TilingPattern };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FeatureTest, ImageKind } from \"./util.js\";\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n\n  return null;\n}\n\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false,\n}) {\n  const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode\n    ? [nonBlackColor, black]\n    : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & (1 << (7 - j)) ? oneMapping : zeroMapping;\n    }\n  }\n  return { srcPos, destPos };\n}\n\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height,\n}) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n\n  if (FeatureTest.isLittleEndian) {\n    // It's a way faster to do the shuffle manually instead of working\n    // component by component with some Uint8 arrays.\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R2B1G1R1\n      const s2 = src32[i + 1]; // G3R3B2G2\n      const s3 = src32[i + 2]; // B4G4R4B3\n\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = (s1 >>> 24) | (s2 << 8) | 0xff000000;\n      dest[destPos + 2] = (s2 >>> 16) | (s3 << 16) | 0xff000000;\n      dest[destPos + 3] = (s3 >>> 8) | 0xff000000;\n    }\n\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] =\n        src[j] | (src[j + 1] << 8) | (src[j + 2] << 16) | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R1G1B1R2\n      const s2 = src32[i + 1]; // G2B2R3G3\n      const s3 = src32[i + 2]; // B3R4G4B4\n\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = (s1 << 24) | (s2 >>> 8) | 0xff;\n      dest[destPos + 2] = (s2 << 16) | (s3 >>> 16) | 0xff;\n      dest[destPos + 3] = (s3 << 8) | 0xff;\n    }\n\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] =\n        (src[j] << 24) | (src[j + 1] << 16) | (src[j + 2] << 8) | 0xff;\n    }\n  }\n\n  return { srcPos, destPos };\n}\n\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x10101) | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x1010100) | 0x000000ff;\n    }\n  }\n}\n\nexport { convertBlackAndWhiteToRGBA, convertToRGBA, grayToRGBA };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  isNodeJS,\n  OPS,\n  shadow,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  PixelsPerInch,\n} from \"./display_utils.js\";\nimport {\n  getShadingPattern,\n  PathType,\n  TilingPattern,\n} from \"./pattern_helper.js\";\nimport { convertBlackAndWhiteToRGBA } from \"../shared/image_utils.js\";\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n// Minimal font size that would be used during canvas fillText operations.\nconst MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nconst MAX_FONT_SIZE = 100;\nconst MAX_GROUP_SIZE = 4096;\n\n// Defines the time the `executeOperatorList`-method is going to be executing\n// before it stops and schedules a continue of execution.\nconst EXECUTION_TIME = 15; // ms\n// Defines the number of steps before checking the execution time.\nconst EXECUTION_STEPS = 10;\n\n// To disable Type3 compilation, set the value to `-1`.\nconst MAX_SIZE_TO_COMPILE = 1000;\n\nconst FULL_CHUNK_HEIGHT = 16;\n\n/**\n * Overrides certain methods on a 2d ctx so that when they are called they\n * will also call the same method on the destCtx. The methods that are\n * overridden are all the transformation state modifiers, path creation, and\n * save/restore. We only forward these specific methods because they are the\n * only state modifiers that we cannot copy over when we switch contexts.\n *\n * To remove mirroring call `ctx._removeMirroring()`.\n *\n * @param {Object} ctx - The 2d canvas context that will duplicate its calls on\n *   the destCtx.\n * @param {Object} destCtx - The 2d canvas context that will receive the\n *   forwarded calls.\n */\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\n\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n\n  delete(id) {\n    delete this.cache[id];\n  }\n\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\n\nfunction drawImageAtIntegerCoords(\n  ctx,\n  srcImg,\n  srcX,\n  srcY,\n  srcW,\n  srcH,\n  destX,\n  destY,\n  destW,\n  destH\n) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    // top-left corner is at (X, Y) and\n    // bottom-right one is at (X + width, Y + height).\n\n    // If leftX is 4.321 then it's rounded to 4.\n    // If width is 10.432 then it's rounded to 11 because\n    // rightX = leftX + width = 14.753 which is rounded to 15\n    // so after rounding the total width is 11 (15 - 4).\n    // It's why we can't just floor/ceil uniformly, it just depends\n    // on the values we've.\n\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n\n    // Some pdf contains images with 1x1 images so in case of 0-width after\n    // scaling we must fallback on 1 to be sure there is something.\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    // We must apply a transformation in order to apply it on the image itself.\n    // For example if a == 1 && d == -1, it means that the image itself is\n    // mirrored w.r.t. the x-axis.\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rWidth, rHeight];\n  }\n\n  if (a === 0 && d === 0) {\n    // This path is taken in issue9462.pdf (page 3).\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rHeight, rWidth];\n  }\n\n  // Not a scale matrix so let the render handle the case without rounding.\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\n\nfunction compileType3Glyph(imgData) {\n  const { width, height } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([\n    0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0,\n  ]);\n\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n\n  // decodes bit-packed mask data\n  const lineSize = (width + 7) & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n\n  // finding interesting points: every point is located between mask pixels,\n  // so there will be points of the (width + 1)x(height + 1) grid. Every point\n  // will have flags assigned based on neighboring mask pixels:\n  //   4 | 8\n  //   --P--\n  //   2 | 1\n  // We are interested only in points with the flags:\n  //   - outside corners: 1, 2, 4, 8;\n  //   - inside corners: 7, 11, 13, 14;\n  //   - and, intersections: 5, 10.\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    // 'sum' is the position of the current pixel configuration in the 'TYPES'\n    // array (in order 8-1-2-4, so we can use '>>2' to shift the column).\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum =\n        (sum >> 2) +\n        (data[pos + 1] ? 4 : 0) +\n        (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n\n  // building outlines\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        // set new direction\n        type = pp;\n        // delete mark\n        points[p] = 0;\n      } else {\n        // type is 5 or 10, ie, a crossing\n        // set new direction\n        type = pp & ((0x33 * type) >> 4);\n        // set new type for \"future hit\"\n        points[p] &= (type >> 2) | (type << 2);\n      }\n      path.lineTo(p % width1, (p / width1) | 0);\n\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n\n  // Immediately release the, potentially large, `Uint8Array`s after parsing.\n  data = null;\n  points = null;\n\n  const drawOutline = function (c) {\n    c.save();\n    // the path shall be painted in [0..1]x[0..1] space\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n\n  return drawOutline;\n}\n\nclass CanvasExtraState {\n  constructor(width, height) {\n    // Are soft masks and alpha values shapes or opacities?\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    // Default fore and background colors\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    // Note: fill alpha applies to all non-stroking operations\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = \"none\";\n\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    const p3 = Util.applyTransform([rect[0], rect[3]], transform);\n    const p4 = Util.applyTransform([rect[2], rect[1]], transform);\n\n    this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);\n  }\n\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.minY = Math.min(this.minY, minMax[1]);\n    this.maxX = Math.max(this.maxX, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax);\n    if (minMax) {\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      // Stroked paths can be outside of the path bounding box by 1/2 the line\n      // width.\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = (scale[0] * this.lineWidth) / 2;\n      const yStrokePad = (scale[1] * this.lineWidth) / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(\n      this.clipBox,\n      this.getPathBoundingBox(pathType, transform)\n    );\n  }\n}\n\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n\n  // Put the image data to the canvas in chunks, rather than putting the\n  // whole image at once.  This saves JS memory, because the ImageData object\n  // is smaller. It also possibly saves C++ memory within the implementation\n  // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n  // the data passed to putImageData()). |n| shouldn't be too small, however,\n  // because too many putImageData() calls will slow things down.\n  //\n  // Note: as written, if the last chunk is partial, the putImageData() call\n  // will (conceptually) put pixels past the bounds of the canvas.  But\n  // that's ok; any such pixels are ignored.\n\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n\n  // There are multiple forms in which the pixel data can be passed, and\n  // imgData.kind tells us which one this is.\n  if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n    // Grayscale, 1 bit per pixel (i.e. black-and-white).\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = (width + 7) >> 3;\n    const white = 0xffffffff;\n    const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      // We ran out of input. Make all remaining pixels transparent.\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n    // RGBA, 32-bits per pixel.\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === ImageKind.RGB_24BPP) {\n    // RGB, 24-bits per pixel.\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n\n      destPos = 0;\n      for (j = elemsInThisChunk; j--; ) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\n\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    // The bitmap has been created in the worker.\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n\n  // Slow path: OffscreenCanvas isn't available in the worker.\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight =\n      i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n    // Expand the mask so it can be used by the canvas.  Any required\n    // inversion has already been handled.\n\n    ({ srcPos } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0,\n    }));\n\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\n\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\n    \"strokeStyle\",\n    \"fillStyle\",\n    \"fillRule\",\n    \"globalAlpha\",\n    \"lineWidth\",\n    \"lineCap\",\n    \"lineJoin\",\n    \"miterLimit\",\n    \"globalCompositeOperation\",\n    \"font\",\n    \"filter\",\n  ];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\n\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    !isNodeJS\n  ) {\n    const { filter } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n  }\n}\n\nfunction composeSMaskBackdrop(bytes, r0, g0, b0) {\n  const length = bytes.length;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = bytes[i];\n    if (alpha === 0) {\n      bytes[i - 3] = r0;\n      bytes[i - 2] = g0;\n      bytes[i - 1] = b0;\n    } else if (alpha < 255) {\n      const alpha_ = 255 - alpha;\n      bytes[i - 3] = (bytes[i - 3] * alpha + r0 * alpha_) >> 8;\n      bytes[i - 2] = (bytes[i - 2] * alpha + g0 * alpha_) >> 8;\n      bytes[i - 1] = (bytes[i - 1] * alpha + b0 * alpha_) >> 8;\n    }\n  }\n}\n\nfunction composeSMaskAlpha(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  const scale = 1 / 255;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n    layerData[i] = (layerData[i] * alpha * scale) | 0;\n  }\n}\n\nfunction composeSMaskLuminosity(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  for (let i = 3; i < length; i += 4) {\n    const y =\n      maskData[i - 3] * 77 + // * 0.3 / 255 * 0x10000\n      maskData[i - 2] * 152 + // * 0.59 ....\n      maskData[i - 1] * 28; // * 0.11 ....\n    layerData[i] = transferMap\n      ? (layerData[i] * transferMap[y >> 8]) >> 8\n      : (layerData[i] * y) >> 16;\n  }\n}\n\nfunction genericComposeSMask(\n  maskCtx,\n  layerCtx,\n  width,\n  height,\n  subtype,\n  backdrop,\n  transferMap,\n  layerOffsetX,\n  layerOffsetY,\n  maskOffsetX,\n  maskOffsetY\n) {\n  const hasBackdrop = !!backdrop;\n  const r0 = hasBackdrop ? backdrop[0] : 0;\n  const g0 = hasBackdrop ? backdrop[1] : 0;\n  const b0 = hasBackdrop ? backdrop[2] : 0;\n\n  const composeFn =\n    subtype === \"Luminosity\" ? composeSMaskLuminosity : composeSMaskAlpha;\n\n  // processing image in chunks to save memory\n  const PIXELS_TO_PROCESS = 1048576;\n  const chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n  for (let row = 0; row < height; row += chunkSize) {\n    const chunkHeight = Math.min(chunkSize, height - row);\n    const maskData = maskCtx.getImageData(\n      layerOffsetX - maskOffsetX,\n      row + (layerOffsetY - maskOffsetY),\n      width,\n      chunkHeight\n    );\n    const layerData = layerCtx.getImageData(\n      layerOffsetX,\n      row + layerOffsetY,\n      width,\n      chunkHeight\n    );\n\n    if (hasBackdrop) {\n      composeSMaskBackdrop(maskData.data, r0, g0, b0);\n    }\n    composeFn(maskData.data, layerData.data, transferMap);\n\n    layerCtx.putImageData(layerData, layerOffsetX, row + layerOffsetY);\n  }\n}\n\nfunction composeSMask(ctx, smask, layerCtx, layerBox) {\n  const layerOffsetX = layerBox[0];\n  const layerOffsetY = layerBox[1];\n  const layerWidth = layerBox[2] - layerOffsetX;\n  const layerHeight = layerBox[3] - layerOffsetY;\n  if (layerWidth === 0 || layerHeight === 0) {\n    return;\n  }\n  genericComposeSMask(\n    smask.context,\n    layerCtx,\n    layerWidth,\n    layerHeight,\n    smask.subtype,\n    smask.backdrop,\n    smask.transferMap,\n    layerOffsetX,\n    layerOffsetY,\n    smask.offsetX,\n    smask.offsetY\n  );\n  ctx.save();\n  ctx.globalAlpha = 1;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n  ctx.drawImage(layerCtx.canvas, 0, 0);\n  ctx.restore();\n}\n\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  // In section 8.9.5.3 of the PDF spec, it's mentioned that the interpolate\n  // flag should be used when the image is upscaled.\n  // In Firefox, smoothing is always used when downscaling images (bug 1360415).\n\n  if (interpolate) {\n    return true;\n  }\n\n  const scale = Util.singularValueDecompose2dScale(transform);\n  // Round to a 32bit float so that `<=` check below will pass for numbers that\n  // are very close, but not exactly the same 64bit floats.\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround(\n    (globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS\n  );\n  return scale[0] <= actualScale && scale[1] <= actualScale;\n}\n\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\n\nclass CanvasGraphics {\n  constructor(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    filterFactory,\n    { optionalContentConfig, markedContentStack = null },\n    annotationCanvasMap,\n    pageColors\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    // Patterns are painted relative to the initial page/form transform, see\n    // PDF spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\")\n        ? this.commonObjs.get(data)\n        : this.objs.get(data);\n    }\n    return fallback;\n  }\n\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null,\n  }) {\n    // For pdfs that use blend modes we have to clear the canvas else certain\n    // blend modes can look wrong since we'd be blending with a white\n    // backdrop. The problem with a transparent backdrop though is we then\n    // don't get sub pixel anti aliasing on text, creating temporary\n    // transparent canvas when we have blend modes.\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\n        \"transparent\",\n        width,\n        height\n      );\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      // The transform can be applied before rendering, transferring it to\n      // the new canvas.\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n\n  executeOperatorList(\n    operatorList,\n    executionStartIdx,\n    continueCallback,\n    stepper\n  ) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n\n    // Sometimes the OperatorList to execute is empty.\n    if (argsArrayLen === i) {\n      return i;\n    }\n\n    const chunkOperations =\n      argsArrayLen - i > EXECUTION_STEPS &&\n      typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n\n      fnId = fnArray[i];\n\n      if (fnId !== OPS.dependency) {\n        // eslint-disable-next-line prefer-spread\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n\n          // If the promise isn't resolved yet, add the continueCallback\n          // to the promise and bail out.\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n\n      i++;\n\n      // If the entire operatorList was executed, stop as were done.\n      if (i === argsArrayLen) {\n        return i;\n      }\n\n      // If the execution took longer then a certain amount of time and\n      // `continueCallback` is specified, interrupt the execution.\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n\n      // If the operatorList isn't executed completely yet OR the execution\n      // time was short enough, do another execution round.\n    }\n  }\n\n  #restoreInitialState() {\n    // Finishing all opened operations such as SMask group painting.\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n\n    this.ctx.restore();\n\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0); // Avoid apply transform twice\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n\n  endDrawing() {\n    this.#restoreInitialState();\n\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (\n          typeof HTMLCanvasElement !== \"undefined\" &&\n          canvas instanceof HTMLCanvasElement\n        ) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(\n        this.pageColors.foreground,\n        this.pageColors.background\n      );\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n\n  _scaleImage(img, inverseTransform) {\n    // Vertical or horizontal scaling shall not be more than 2 to not lose the\n    // pixels during drawImage operation, painting on the temporary canvas(es)\n    // that are twice smaller in size.\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(\n      Math.hypot(inverseTransform[0], inverseTransform[1]),\n      1\n    );\n    let heightScale = Math.max(\n      Math.hypot(inverseTransform[2], inverseTransform[3]),\n      1\n    );\n\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (\n      (widthScale > 2 && paintWidth > 1) ||\n      (heightScale > 2 && paintHeight > 1)\n    ) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(paintWidth / 2);\n        newWidth =\n          paintWidth >= 16384\n            ? Math.floor(paintWidth / 2) - 1 || 1\n            : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        // TODO: see the comment above.\n        newHeight =\n          paintHeight >= 16384\n            ? Math.floor(paintHeight / 2) - 1 || 1\n            : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(\n        tmpCanvasId,\n        newWidth,\n        newHeight\n      );\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(\n        img,\n        0,\n        0,\n        paintWidth,\n        paintHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight,\n    };\n  }\n\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const { width, height } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      // We're reusing the same image several times, so we can cache it.\n      // In case we've a pattern fill we just keep the scaled version of\n      // the image.\n      // Only the scaling part matters, the translation part is just used\n      // to compute offsets (but not when filling patterns see #15573).\n      // TODO: handle the case of a pattern fill if it's possible.\n      cacheKey = JSON.stringify(\n        isPatternFill\n          ? currentTransform\n          : [currentTransform.slice(0, 4), fillColor]\n      );\n\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(\n          Math.min(currentTransform[0], currentTransform[2]) +\n            currentTransform[4]\n        );\n        const offsetY = Math.round(\n          Math.min(currentTransform[1], currentTransform[3]) +\n            currentTransform[5]\n        );\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY,\n        };\n      }\n      scaled = cachedImage;\n    }\n\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n\n    // Create the mask canvas at the size it will be drawn at and also set\n    // its transform to match the current transform so if there are any\n    // patterns applied they will be applied relative to the correct\n    // transform.\n\n    let maskToCanvas = Util.transform(currentTransform, [\n      1 / width,\n      0,\n      0,\n      -1 / height,\n      0,\n      0,\n    ]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const [minX, minY, maxX, maxY] = Util.getAxialAlignedBoundingBox(\n      [0, 0, width, height],\n      maskToCanvas\n    );\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\n      \"fillCanvas\",\n      drawnWidth,\n      drawnHeight\n    );\n    const fillCtx = fillCanvas.context;\n\n    // The offset will be the top-left cordinate mask.\n    // If objToCanvas is [a,b,c,d,e,f] then:\n    //   - offsetX = min(a, c) + e\n    //   - offsetY = min(b, d) + f\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n\n    if (!scaled) {\n      // Pre-scale if needed to improve image smoothing.\n      scaled = this._scaleImage(\n        maskCanvas.canvas,\n        getCurrentTransformInverse(fillCtx)\n      );\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(fillCtx),\n      img.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      fillCtx,\n      scaled,\n      0,\n      0,\n      scaled.width,\n      scaled.height,\n      0,\n      0,\n      width,\n      height\n    );\n    fillCtx.globalCompositeOperation = \"source-in\";\n\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [\n      1,\n      0,\n      0,\n      1,\n      -offsetX,\n      -offsetY,\n    ]);\n    fillCtx.fillStyle = isPatternFill\n      ? fillColor.getPattern(ctx, this, inverse, PathType.FILL)\n      : fillColor;\n\n    fillCtx.fillRect(0, 0, width, height);\n\n    if (cache && !isPatternFill) {\n      // The fill canvas is put in the cache associated to the mask image\n      // so we must remove from the cached canvas: it mustn't be used again.\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n\n    // Round the offsets to avoid drawing fractional pixels.\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY),\n    };\n  }\n\n  // Graphics state\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n\n  setRenderingIntent(intent) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setFlatness(flatness) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps =\n            this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n    // Else, the state is okay and nothing needs to be done.\n  }\n\n  /**\n   * Soft mask mode takes the current main drawing canvas and replaces it with\n   * a temporary canvas. Any drawing operations that happen on the temporary\n   * canvas need to be composed with the main canvas that was suspended (see\n   * `compose()`). The temporary canvas also duplicates many of its operations\n   * on the suspended canvas to keep them in sync, so that when the soft mask\n   * mode ends any clipping paths or transformations will still be active and in\n   * the right order on the canvas' graphics state stack.\n   */\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...getCurrentTransform(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n  }\n\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    // The soft mask is done, now restore the suspended canvas as the main\n    // drawing canvas.\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n\n    this.suspendedCtx = null;\n  }\n\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n\n    composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    // Whatever was drawn has been moved to the suspended canvas, now clear it\n    // out of the current canvas.\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n\n  save() {\n    if (this.inSMaskMode) {\n      // SMask mode may be turned on/off causing us to lose graphics state.\n      // Copy the temporary canvas state to the main(suspended) canvas to keep\n      // it in sync.\n      copyCtxState(this.ctx, this.suspendedCtx);\n      // Don't bother calling save on the temporary canvas since state is not\n      // saved there.\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        // Graphics state is stored on the main(suspended) canvas. Restore its\n        // state then copy it over to the temporary canvas.\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n\n      // Ensure that the clipping path is reset (fixes issue6413.pdf).\n      this.pendingClip = null;\n\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n\n  // Path\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = getCurrentTransform(ctx);\n\n    // Most of the time the current transform is a scaling matrix\n    // so we don't need to transform points before computing min/max:\n    // we can compute min/max first and then smartly \"apply\" the\n    // transform (see Util.scaleMinMax).\n    // For rectangle, moveTo and lineTo, min/max are computed in the\n    // worker (see evaluator.js).\n    const isScalingMatrix =\n      (currentTransform[0] === 0 && currentTransform[3] === 0) ||\n      (currentTransform[1] === 0 && currentTransform[2] === 0);\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3]\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            minMaxForBezier\n          );\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            x,\n            y,\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n\n    current.setCurrentPoint(x, y);\n  }\n\n  closePath() {\n    this.ctx.closePath();\n  }\n\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    // For stroke we want to temporarily change the global alpha to the\n    // stroking alpha.\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(\n          ctx,\n          this,\n          getCurrentTransformInverse(ctx),\n          PathType.STROKE\n        );\n        this.rescaleAndStroke(/* saveRestore */ false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(/* saveRestore */ true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    // Restore the global alpha to the fill alpha\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      needRestore = true;\n    }\n\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(\"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n\n    this.consumePath();\n  }\n\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n\n  endPath() {\n    this.consumePath();\n  }\n\n  // Clipping\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n\n  // Text\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n\n    // A valid matrix needs all main diagonal elements to be non-zero\n    // This also ensures we bypass FF bugzilla bug #719844.\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n\n    // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n    // and in some docs this can be negative (inverted x-y axes).\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n\n    if (fontObj.isType3Font) {\n      return; // we don't need ctx.font for Type3 fonts\n    }\n\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface =\n      fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n\n    // Some font backends cannot handle fonts below certain size.\n    // Keeping the font at minimal size and using the fontSizeScale to change\n    // the current transformation matrix before the fillText/strokeText.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode =\n      textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(\n      textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG\n    );\n    const patternFill = current.patternFill && !font.missingFile;\n\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fill();\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fillText(character, x, y);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n\n    if (isAddToPathSet) {\n      const paths = (this.pendingTextPaths ||= []);\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath,\n      });\n    }\n  }\n\n  get isFontSubpixelAAEnabled() {\n    // Checks if anti-aliasing is enabled when scaled text is painted.\n    // On Windows GDI scaled fonts looks bad.\n    const { context: ctx } = this.cachedCanvases.getCanvas(\n      \"isFontSubpixelAAEnabled\",\n      10,\n      10\n    );\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n    const simpleFillText =\n      current.textRenderingMode === TextRenderingMode.FILL &&\n      !font.disableFontFace &&\n      !current.patternFill;\n\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      patternTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n\n    ctx.lineWidth = lineWidth;\n\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n\n      return undefined;\n    }\n\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += (spacingDir * glyph * fontSize) / 1000;\n        continue;\n      }\n\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx =\n          -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n\n      if (font.remeasure && width > 0) {\n        // Some standard fonts may not have the exact width: rescale per\n        // character if measured width is greater than expected glyph width\n        // and subpixel-aa is enabled, otherwise just center the glyph.\n        const measuredWidth =\n          ((ctx.measureText(character).width * 1000) / fontSize) *\n          fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX +=\n            (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n        }\n      }\n\n      // Only attempt to draw the glyph if it is actually in the embedded font\n      // file or if there isn't a font file so the fallback font is shown.\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          // common case\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX =\n              scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n            const scaledAccentY =\n              scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n            this.paintChar(\n              accent.fontChar,\n              scaledAccentX,\n              scaledAccentY,\n              patternTransform\n            );\n          }\n        }\n      }\n\n      const charWidth = vertical\n        ? width * widthAdvanceScale - spacing * fontDirection\n        : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n\n    return undefined;\n  }\n\n  showType3Text(glyphs) {\n    // Type3 fonts - each glyph is a \"mini-PDF\"\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible =\n      current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n\n    ctx.scale(textHScale, fontDirection);\n\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = (spacingDir * glyph * fontSize) / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n\n  // Type3 fonts\n  setCharWidth(xWidth, yWidth) {\n    // We can safely ignore this since the width should be the same\n    // as the width in the Widths array.\n  }\n\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n\n  // Color\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx =>\n          new CanvasGraphics(\n            ctx,\n            this.commonObjs,\n            this.objs,\n            this.canvasFactory,\n            this.filterFactory,\n            {\n              optionalContentConfig: this.optionalContentConfig,\n              markedContentStack: this.markedContentStack,\n            }\n          ),\n      };\n      pattern = new TilingPattern(\n        IR,\n        color,\n        this.ctx,\n        canvasGraphicsFactory,\n        baseTransform\n      );\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n\n  setStrokeRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n\n  setFillRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(\n      ctx,\n      this,\n      getCurrentTransformInverse(ctx),\n      PathType.SHADING\n    );\n\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const { width, height } = ctx.canvas;\n      const [x0, y0, x1, y1] = Util.getAxialAlignedBoundingBox(\n        [0, 0, width, height],\n        inv\n      );\n\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      // HACK to draw the gradient onto an infinite rectangle.\n      // PDF gradients are drawn across the entire image while\n      // Canvas only allows gradients to be drawn in a rectangle\n      // The following bug should allow us to remove this.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n\n  // Images\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n\n    if (Array.isArray(matrix) && matrix.length === 6) {\n      this.transform(...matrix);\n    }\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    this.save();\n    // If there's an active soft mask we don't want it enabled for the group, so\n    // clear it out. The mask and suspended canvas will be restored in endGroup.\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n\n    const currentCtx = this.ctx;\n    // TODO non-isolated groups - according to Rik at adobe non-isolated\n    // group results aren't usually that different and they even have tools\n    // that ignore this setting. Notes from Rik on implementing:\n    // - When you encounter an transparency group, create a new canvas with\n    // the dimensions of the bbox\n    // - copy the content from the previous canvas to the new canvas\n    // - draw as usual\n    // - remove the backdrop alpha:\n    // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n    // value of your transparency group and 'alphaBackdrop' the alpha of the\n    // backdrop\n    // - remove background color:\n    // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n\n    // TODO knockout - supposedly possible with the clever use of compositing\n    // modes.\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n\n    // Based on the current transform figure out how big the bounding box\n    // will actually be.\n    let bounds = Util.getAxialAlignedBoundingBox(\n      group.bbox,\n      getCurrentTransform(currentCtx)\n    );\n    // Clip the bounding box to the current canvas.\n    const canvasBounds = [\n      0,\n      0,\n      currentCtx.canvas.width,\n      currentCtx.canvas.height,\n    ];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    // Use ceil in case we're between sizes so we don't create canvas that is\n    // too small and make the canvas at least 1x1 pixels.\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    let drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    let drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    let scaleX = 1,\n      scaleY = 1;\n    if (drawnWidth > MAX_GROUP_SIZE) {\n      scaleX = drawnWidth / MAX_GROUP_SIZE;\n      drawnWidth = MAX_GROUP_SIZE;\n    }\n    if (drawnHeight > MAX_GROUP_SIZE) {\n      scaleY = drawnHeight / MAX_GROUP_SIZE;\n      drawnHeight = MAX_GROUP_SIZE;\n    }\n\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      // Using two cache entries is case if masks are used one after another.\n      cacheId += \"_smask_\" + (this.smaskCounter++ % 2);\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    const groupCtx = scratchCanvas.context;\n\n    // Since we created a new canvas that is just the size of the bounding box\n    // we have to translate the group ctx.\n    groupCtx.scale(1 / scaleX, 1 / scaleY);\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n\n    if (group.smask) {\n      // Saving state and cached mask to be used in setGState.\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        scaleX,\n        scaleY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null, // used during suspend operation\n      });\n    } else {\n      // Setup the current ctx so when the group is popped we draw it at the\n      // right location.\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.scale(scaleX, scaleY);\n      currentCtx.save();\n    }\n    // The transparency group inherits all off the current graphics state\n    // except the blend mode, soft mask, and alpha constants.\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    // Turn off image smoothing to avoid sub pixel interpolation which can\n    // look kind of blurry for some pdfs.\n    this.ctx.imageSmoothingEnabled = false;\n\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox(\n        [0, 0, groupCtx.canvas.width, groupCtx.canvas.height],\n        currentMtx\n      );\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    // The annotations are drawn just after the page content.\n    // The page content drawing can potentially have set a transform,\n    // a clipping path, whatever...\n    // So in order to have something clean, we restore the initial state.\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n\n    this.ctx.save();\n    this.save();\n\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n\n    if (Array.isArray(rect) && rect.length === 4) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(\n          getCurrentTransform(this.ctx)\n        );\n        const { viewportScale } = this;\n        const canvasWidth = Math.ceil(\n          width * this.outputScaleX * viewportScale\n        );\n        const canvasHeight = Math.ceil(\n          height * this.outputScaleY * viewportScale\n        );\n\n        this.annotationCanvas = this.canvasFactory.create(\n          canvasWidth,\n          canvasHeight\n        );\n        const { canvas, context } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n\n    ctx.save();\n    // The mask is drawn with the transform applied. Reset the current\n    // transform to draw to the identity.\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectRepeat(\n    img,\n    scaleX,\n    skewX = 0,\n    skewY = 0,\n    scaleY,\n    positions\n  ) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    img = this.getObject(img.data, img);\n\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n\n    ctx.setTransform(\n      1,\n      0,\n      0,\n      1,\n      mask.offsetX - currentTransform[4],\n      mask.offsetY - currentTransform[5]\n    );\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [\n        scaleX,\n        skewX,\n        skewY,\n        scaleY,\n        positions[i],\n        positions[i + 1],\n      ]);\n\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n\n    for (const image of images) {\n      const { data, width, height, transform } = image;\n\n      const maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height\n      );\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n\n      maskCtx.globalCompositeOperation = \"source-in\";\n\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(\n            maskCtx,\n            this,\n            getCurrentTransformInverse(ctx),\n            PathType.FILL\n          )\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        maskCanvas.canvas,\n        0,\n        0,\n        width,\n        height,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    this.paintInlineImageXObject(imgData);\n  }\n\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height,\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const { bitmap, width, height } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\n      \"inlineImage\",\n      width,\n      height\n    );\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n\n    return tmpCanvas.canvas;\n  }\n\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n\n    this.save();\n\n    if (\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      !isNodeJS\n    ) {\n      // The filter, if any, will be applied in applyTransferMapsToBitmap.\n      // It must be applied to the image before rescaling else some artifacts\n      // could appear.\n      // The final restore will reset it to its value.\n      const { filter } = ctx;\n      if (filter !== \"none\" && filter !== \"\") {\n        ctx.filter = \"none\";\n      }\n    }\n\n    // scale the image to the unit square\n    ctx.scale(1 / width, -1 / height);\n\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (\n      (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement) ||\n      !imgData.data\n    ) {\n      // typeof check is needed due to node.js support, see issue #8489\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\n        \"inlineImage\",\n        width,\n        height\n      );\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    const scaled = this._scaleImage(\n      imgToPaint,\n      getCurrentTransformInverse(ctx)\n    );\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(ctx),\n      imgData.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      ctx,\n      scaled.img,\n      0,\n      0,\n      scaled.paintWidth,\n      scaled.paintHeight,\n      0,\n      -height,\n      width,\n      height\n    );\n    this.compose();\n    this.restore();\n  }\n\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        imgToPaint,\n        entry.x,\n        entry.y,\n        entry.w,\n        entry.h,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n\n  // Marked content\n\n  markPoint(tag) {\n    // TODO Marked content.\n  }\n\n  markPointProps(tag, properties) {\n    // TODO Marked content.\n  }\n\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true,\n    });\n  }\n\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties),\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n\n  // Compatibility\n\n  beginCompat() {\n    // TODO ignore undefined operators (should we do that anyway?)\n  }\n\n  endCompat() {\n    // TODO stop ignoring undefined operators\n  }\n\n  // Helper functions\n\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        // Fast path\n        this._cachedGetSinglePixelWidth =\n          1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n\n  getScaleForStroking() {\n    // A pixel has thicknessX = thicknessY = 1;\n    // A transformed pixel is a parallelogram and the thicknesses\n    // corresponds to the heights.\n    // The goal of this function is to rescale before setting the\n    // lineWidth in order to have both thicknesses greater or equal\n    // to 1 after transform.\n    if (this._cachedScaleForStroking[0] === -1) {\n      const { lineWidth } = this.current;\n      const { a, b, c, d } = this.ctx.getTransform();\n      let scaleX, scaleY;\n\n      if (b === 0 && c === 0) {\n        // Fast path\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        // A pixel (base (x, y)) is transformed by M into a parallelogram:\n        //  - its area is |det(M)|;\n        //  - heightY (orthogonal to Mx) has a length: |det(M)| / norm(Mx);\n        //  - heightX (orthogonal to My) has a length: |det(M)| / norm(My).\n        // heightX and heightY are the thicknesses of the transformed pixel\n        // and they must be both greater or equal to 1.\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n\n  // Rescale before stroking in order to have a final lineWidth\n  // with both thicknesses greater or equal to 1.\n  rescaleAndStroke(saveRestore) {\n    const { ctx } = this;\n    const { lineWidth } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n\n    ctx.lineWidth = lineWidth || 1;\n\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n\n    ctx.scale(scaleX, scaleY);\n\n    // How the dashed line is rendered depends on the current transform...\n    // so we added a rescale to handle too thin lines and consequently\n    // the way the line is dashed will be modified.\n    // If scaleX === scaleY, the dashed lines will be rendered correctly\n    // else we'll have some bugs (but only with too thin lines).\n    // Here we take the max... why not taking the min... or something else.\n    // Anyway, as said it's buggy when scaleX !== scaleY.\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n\n    ctx.stroke();\n\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\nexport { CanvasGraphics };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n} from \"./base_factory.js\";\nimport {\n  BaseException,\n  FeatureTest,\n  shadow,\n  stringToBytes,\n  Util,\n  warn,\n} from \"../shared/util.js\";\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\n\nclass PixelsPerInch {\n  static CSS = 96.0;\n\n  static PDF = 72.0;\n\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\n\n/**\n * FilterFactory aims to create some SVG filters we can use when drawing an\n * image (or whatever) on a canvas.\n * Filters aren't applied with ctx.putImageData because it just overwrites the\n * underlying pixels.\n * With these filters, it's possible for example to apply some transfer maps on\n * an image without the need to apply them on the pixel arrays: the renderer\n * does the magic for us.\n */\nclass DOMFilterFactory extends BaseFilterFactory {\n  #_cache;\n\n  #_defs;\n\n  #docId;\n\n  #document;\n\n  #_hcmCache;\n\n  #id = 0;\n\n  constructor({ docId, ownerDocument = globalThis.document } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n\n  get #cache() {\n    return (this.#_cache ||= new Map());\n  }\n\n  get #hcmCache() {\n    return (this.#_hcmCache ||= new Map());\n  }\n\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const { style } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n\n    // When a page is zoomed the page is re-drawn but the maps are likely\n    // the same.\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n\n    let tableR, tableG, tableB, key;\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      key = tableR = tableG = tableB = buffer.join(\",\");\n    } else {\n      const [mapR, mapG, mapB] = maps;\n      const bufferR = new Array(256);\n      const bufferG = new Array(256);\n      const bufferB = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        bufferR[i] = mapR[i] / 255;\n        bufferG[i] = mapG[i] / 255;\n        bufferB[i] = mapB[i] / 255;\n      }\n      tableR = bufferR.join(\",\");\n      tableG = bufferG.join(\",\");\n      tableB = bufferB.join(\",\");\n      key = `${tableR}${tableG}${tableB}`;\n    }\n\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n\n    // We create a SVG filter: feComponentTransferElement\n    //  https://www.w3.org/TR/SVG11/filters.html#feComponentTransferElement\n\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n\n    return url;\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n\n    if (\n      (fgColor === \"#000000\" && bgColor === \"#ffffff\") ||\n      fgColor === bgColor\n    ) {\n      return info.url;\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_Colors_and_Luminance\n    //\n    // Relative luminance:\n    // https://www.w3.org/TR/WCAG20/#relativeluminancedef\n    //\n    // We compute the rounded luminance of the default background color.\n    // Then for every color in the pdf, if its rounded luminance is the\n    // same as the background one then it's replaced by the new\n    // background color else by the foreground one.\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + (i / n) * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(\n      getSteps(0, 5),\n      getSteps(1, 5),\n      getSteps(2, 5),\n      filter\n    );\n\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(\n      0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]\n    );\n    let bgGray = Math.round(\n      0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]\n    );\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(\n      this.#getRGB.bind(this)\n    );\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [\n        bgGray,\n        fgGray,\n        newBgRGB,\n        newFgRGB,\n      ];\n    }\n    this.#defs.style.color = \"\";\n\n    // Now we can create the filters to highlight some canvas parts.\n    // The colors in the pdf will almost be Canvas and CanvasText, hence we\n    // want to filter them to finally get Highlight and HighlightText.\n    // Since we're in HCM the background color and the foreground color should\n    // be really different when converted to grayscale (if they're not then it\n    // means that we've a poor contrast). Once the canvas colors are converted\n    // to grayscale we can easily map them on their new colors.\n    // The grayscale step is important because if we've something like:\n    //   fgColor = #FF....\n    //   bgColor = #FF....\n    //   then we are enable to map the red component on the new red components\n    //   which can be different.\n\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(\n      getSteps(newFgRGB[0], newBgRGB[0], 5),\n      getSteps(newFgRGB[1], newBgRGB[1], 5),\n      getSteps(newFgRGB[2], newBgRGB[2], 5),\n      filter\n    );\n\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#hcmCache.size !== 0) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(\n      SVG_NS,\n      \"feColorMatrix\"\n    );\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\n      \"values\",\n      \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\"\n    );\n    filter.append(feColorMatrix);\n  }\n\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n\n    return filter;\n  }\n\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(\n      SVG_NS,\n      \"feComponentTransfer\"\n    );\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\nasync function fetchData(url, type = \"text\") {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    isValidFetchUrl(url, document.baseURI)\n  ) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n\n  // The Fetch API is not supported.\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, /* async = */ true);\n    request.responseType = type;\n\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n\n    request.send(null);\n  });\n}\n\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(\n      url,\n      /* type = */ this.isCompressed ? \"arraybuffer\" : \"text\"\n    ).then(data => ({\n      cMapData:\n        data instanceof ArrayBuffer\n          ? new Uint8Array(data)\n          : stringToBytes(data),\n      compressionType,\n    }));\n  }\n}\n\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url, /* type = */ \"arraybuffer\").then(\n      data => new Uint8Array(data)\n    );\n  }\n}\n\nclass DOMSVGFactory extends BaseSVGFactory {\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n/**\n * @typedef {Object} PageViewportParameters\n * @property {Array<number>} viewBox - The xMin, yMin, xMax and\n *   yMax coordinates.\n * @property {number} scale - The scale of the viewport.\n * @property {number} rotation - The rotation, in degrees, of the viewport.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset. The\n *   default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset. The\n *   default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * @typedef {Object} PageViewportCloneParameters\n * @property {number} [scale] - The scale, overriding the one in the cloned\n *   viewport. The default value is `this.scale`.\n * @property {number} [rotation] - The rotation, in degrees, overriding the one\n *   in the cloned viewport. The default value is `this.rotation`.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `this.offsetX`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `this.offsetY`.\n * @property {boolean} [dontFlip] - If true, the x-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n */\nclass PageViewport {\n  /**\n   * @param {PageViewportParameters}\n   */\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    // Normalize the rotation, by clamping it to the [0, 360) range.\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\n          \"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\"\n        );\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * The original, un-scaled, viewport dimensions.\n   * @type {Object}\n   */\n  get rawDims() {\n    const { viewBox } = this;\n    return shadow(this, \"rawDims\", {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1],\n    });\n  }\n\n  /**\n   * Clones viewport, with optional additional properties.\n   * @param {PageViewportCloneParameters} [params]\n   * @returns {PageViewport} Cloned viewport.\n   */\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * Converts PDF point to the viewport coordinates. For examples, useful for\n   * converting PDF location into canvas pixel coordinates.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the viewport coordinate space.\n   * @see {@link convertToPdfPoint}\n   * @see {@link convertToViewportRectangle}\n   */\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n\n  /**\n   * Converts PDF rectangle to the viewport coordinates.\n   * @param {Array} rect - The xMin, yMin, xMax and yMax coordinates.\n   * @returns {Array} Array containing corresponding coordinates of the\n   *   rectangle in the viewport coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n\n  /**\n   * Converts viewport coordinates to the PDF location. For examples, useful\n   * for converting canvas pixel location into PDF one.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the PDF coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\n\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\n\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\n\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\n\n/**\n * Gets the filename from a given URL.\n * @param {string} url\n * @param {boolean} [onlyStripPath]\n * @returns {string}\n */\nfunction getFilenameFromUrl(url, onlyStripPath = false) {\n  if (!onlyStripPath) {\n    [url] = url.split(/[#?]/, 1);\n  }\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\n\n/**\n * Returns the filename or guessed filename from the url (see issue 3455).\n * @param {string} url - The original PDF location.\n * @param {string} defaultFilename - The value returned if the filename is\n *   unknown, or the protocol is unsupported.\n * @returns {string} Guessed PDF filename.\n */\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  //              SCHEME        HOST        1.PATH  2.QUERY   3.REF\n  // Pattern to get last matching NAME.pdf\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename =\n    reFilename.exec(splitURI[1]) ||\n    reFilename.exec(splitURI[2]) ||\n    reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      // URL-encoded %2Fpath%2Fto%2Ffile.pdf should be file.pdf\n      try {\n        suggestedFilename = reFilename.exec(\n          decodeURIComponent(suggestedFilename)\n        )[0];\n      } catch {\n        // Possible (extremely rare) errors:\n        // URIError \"Malformed URI\", e.g. for \"%AA.pdf\"\n        // TypeError \"null has no properties\", e.g. for \"%2F.pdf\"\n      }\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\n\nclass StatTimer {\n  started = Object.create(null);\n\n  times = [];\n\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    // Remove timer from started so it can be called again.\n    delete this.started[name];\n  }\n\n  toString() {\n    // Find the longest name for padding purposes.\n    const outBuf = [];\n    let longest = 0;\n    for (const { name } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const { name, start, end } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\n\nfunction isValidFetchUrl(url, baseUrl) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    throw new Error(\"Not implemented: isValidFetchUrl\");\n  }\n  try {\n    const { protocol } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    // The Fetch API only supports the http/https protocols, and not file/ftp.\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch {\n    return false; // `new URL()` will throw on incorrect data.\n  }\n}\n\n/**\n * Event handler to suppress context menu.\n */\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\n\n// Deprecated API function -- display regardless of the `verbosity` setting.\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\n\nlet pdfDateStringRegex;\n\nclass PDFDateString {\n  /**\n   * Convert a PDF date string to a JavaScript `Date` object.\n   *\n   * The PDF date string format is described in section 7.9.4 of the official\n   * PDF 32000-1:2008 specification. However, in the PDF 1.7 reference (sixth\n   * edition) Adobe describes the same format including a trailing apostrophe.\n   * This syntax in incorrect, but Adobe Acrobat creates PDF files that contain\n   * them. We ignore all apostrophes as they are not necessary for date parsing.\n   *\n   * Moreover, Adobe Acrobat doesn't handle changing the date to universal time\n   * and doesn't use the user's time zone (effectively ignoring the HH' and mm'\n   * parts of the date string).\n   *\n   * @param {string} input\n   * @returns {Date|null}\n   */\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n\n    // Lazily initialize the regular expression.\n    pdfDateStringRegex ||= new RegExp(\n      \"^D:\" + // Prefix (required)\n        \"(\\\\d{4})\" + // Year (required)\n        \"(\\\\d{2})?\" + // Month (optional)\n        \"(\\\\d{2})?\" + // Day (optional)\n        \"(\\\\d{2})?\" + // Hour (optional)\n        \"(\\\\d{2})?\" + // Minute (optional)\n        \"(\\\\d{2})?\" + // Second (optional)\n        \"([Z|+|-])?\" + // Universal time relation (optional)\n        \"(\\\\d{2})?\" + // Offset hour (optional)\n        \"'?\" + // Splitting apostrophe (optional)\n        \"(\\\\d{2})?\" + // Offset minute (optional)\n        \"'?\" // Trailing apostrophe (optional)\n    );\n\n    // Optional fields that don't satisfy the requirements from the regular\n    // expression (such as incorrect digit counts or numbers that are out of\n    // range) will fall back the defaults from the specification.\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n\n    // JavaScript's `Date` object expects the month to be between 0 and 11\n    // instead of 1 and 12, so we have to correct for that.\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n\n    // Universal time relation 'Z' means that the local time is equal to the\n    // universal time, whereas the relations '+'/'-' indicate that the local\n    // time is later respectively earlier than the universal time. Every date\n    // is normalized to universal time.\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\n\n/**\n * NOTE: This is (mostly) intended to support printing of XFA forms.\n */\nfunction getXfaPageViewport(xfaPage, { scale = 1, rotation = 0 }) {\n  const { width, height } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation,\n  });\n}\n\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [\n      (colorRGB & 0xff0000) >> 16,\n      (colorRGB & 0x00ff00) >> 8,\n      colorRGB & 0x0000ff,\n    ];\n  }\n\n  if (color.startsWith(\"rgb(\")) {\n    // getComputedStyle(...).color returns a `rgb(R, G, B)` color.\n    return color\n      .slice(/* \"rgb(\".length */ 4, -1) // Strip out \"rgb(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x));\n  }\n\n  if (color.startsWith(\"rgba(\")) {\n    return color\n      .slice(/* \"rgba(\".length */ 5, -1) // Strip out \"rgba(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x))\n      .slice(0, 3);\n  }\n\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\n\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\n\nfunction getCurrentTransform(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\n\nfunction getCurrentTransformInverse(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\n\n/**\n * @param {HTMLDivElement} div\n * @param {PageViewport} viewport\n * @param {boolean} mustFlip\n * @param {boolean} mustRotate\n */\nfunction setLayerDimensions(\n  div,\n  viewport,\n  mustFlip = false,\n  mustRotate = true\n) {\n  if (viewport instanceof PageViewport) {\n    const { pageWidth, pageHeight } = viewport.rawDims;\n    const { style } = div;\n    const useRound = FeatureTest.isCSSRoundSupported;\n\n    const w = `var(--scale-factor) * ${pageWidth}px`,\n      h = `var(--scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(${w}, 1px)` : `calc(${w})`,\n      heightStr = useRound ? `round(${h}, 1px)` : `calc(${h})`;\n\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\n\nexport {\n  deprecated,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMFilterFactory,\n  DOMStandardFontDataFactory,\n  DOMSVGFactory,\n  fetchData,\n  getColorValues,\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getRGB,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  isValidFetchUrl,\n  noContextMenu,\n  PageViewport,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n  StatTimer,\n};\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DOMSVGFactory } from \"./display_utils.js\";\nimport { shadow } from \"../shared/util.js\";\n\n/**\n * Manage the SVGs drawn on top of the page canvas.\n * It's important to have them directly on top of the canvas because we want to\n * be able to use mix-blend-mode for some of them.\n */\nclass DrawLayer {\n  #parent = null;\n\n  #id = 0;\n\n  #mapping = new Map();\n\n  #toUpdate = new Map();\n\n  constructor({ pageIndex }) {\n    this.pageIndex = pageIndex;\n  }\n\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n\n  static #setBox(element, { x = 0, y = 0, width = 1, height = 1 } = {}) {\n    const { style } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n\n  #createSVG(box) {\n    const svg = DrawLayer._svgFactory.create(1, 1, /* skipDimensions = */ true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    DrawLayer.#setBox(svg, box);\n\n    return svg;\n  }\n\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n\n    return clipPathId;\n  }\n\n  highlight(outlines, color, opacity, isPathUpdatable = false) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add(\"highlight\");\n    if (outlines.free) {\n      root.classList.add(\"free\");\n    }\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"d\", outlines.toSVGPath());\n\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n\n    // Create the clipping path for the editor div.\n    const clipPathId = this.#createClipPath(defs, pathId);\n\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    root.setAttribute(\"fill\", color);\n    root.setAttribute(\"fill-opacity\", opacity);\n    use.setAttribute(\"href\", `#${pathId}`);\n\n    this.#mapping.set(id, root);\n\n    return { id, clipPathId: `url(#${clipPathId})` };\n  }\n\n  highlightOutline(outlines) {\n    // We cannot draw the outline directly in the SVG for highlights because\n    // it composes with its parent with mix-blend-mode: multiply.\n    // But the outline has a different mix-blend-mode, so we need to draw it in\n    // its own SVG.\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add(\"highlightOutline\");\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"d\", outlines.toSVGPath());\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n\n    let maskId;\n    if (outlines.free) {\n      root.classList.add(\"free\");\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n\n    this.#mapping.set(id, root);\n\n    return id;\n  }\n\n  finalizeLine(id, line) {\n    const path = this.#toUpdate.get(id);\n    this.#toUpdate.delete(id);\n    this.updateBox(id, line.box);\n    path.setAttribute(\"d\", line.toSVGPath());\n  }\n\n  updateLine(id, line) {\n    const root = this.#mapping.get(id);\n    const defs = root.firstChild;\n    const path = defs.firstChild;\n    path.setAttribute(\"d\", line.toSVGPath());\n  }\n\n  removeFreeHighlight(id) {\n    this.remove(id);\n    this.#toUpdate.delete(id);\n  }\n\n  updatePath(id, line) {\n    this.#toUpdate.get(id).setAttribute(\"d\", line.toSVGPath());\n  }\n\n  updateBox(id, box) {\n    DrawLayer.#setBox(this.#mapping.get(id), box);\n  }\n\n  show(id, visible) {\n    this.#mapping.get(id).classList.toggle(\"hidden\", !visible);\n  }\n\n  rotate(id, angle) {\n    this.#mapping.get(id).setAttribute(\"data-main-rotation\", angle);\n  }\n\n  changeColor(id, color) {\n    this.#mapping.get(id).setAttribute(\"fill\", color);\n  }\n\n  changeOpacity(id, opacity) {\n    this.#mapping.get(id).setAttribute(\"fill-opacity\", opacity);\n  }\n\n  addClass(id, className) {\n    this.#mapping.get(id).classList.add(className);\n  }\n\n  removeClass(id, className) {\n    this.#mapping.get(id).classList.remove(className);\n  }\n\n  remove(id) {\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n  }\n}\n\nexport { DrawLayer };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  assert,\n  LINE_FACTOR,\n  shadow,\n  Util,\n} from \"../../shared/util.js\";\nimport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  KeyboardManager,\n} from \"./tools.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { FreeTextAnnotationElement } from \"../annotation_layer.js\";\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass FreeTextEditor extends AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n\n  #boundEditorDivPaste = this.editorDivPaste.bind(this);\n\n  #color;\n\n  #content = \"\";\n\n  #editorDivId = `${this.id}-editor`;\n\n  #fontSize;\n\n  #initialData = null;\n\n  static _freeTextDefaultContent = \"\";\n\n  static _internalPadding = 0;\n\n  static _defaultColor = null;\n\n  static _defaultFontSize = 10;\n\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n\n    const arrowChecker = self => self.isEmpty();\n\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          // Commit the text in case the user use ctrl+s to save the document.\n          // The event must bubble in order to be caught by the viewer.\n          // See bug 1831574.\n          [\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"],\n          proto.commitOrRemove,\n          { bubbles: true },\n        ],\n        [\n          [\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"],\n          proto.commitOrRemove,\n        ],\n        [\n          [\"ArrowLeft\", \"mac+ArrowLeft\"],\n          proto._translateEmpty,\n          { args: [-small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          proto._translateEmpty,\n          { args: [-big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowRight\", \"mac+ArrowRight\"],\n          proto._translateEmpty,\n          { args: [small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          proto._translateEmpty,\n          { args: [big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowUp\", \"mac+ArrowUp\"],\n          proto._translateEmpty,\n          { args: [0, -small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"],\n          proto._translateEmpty,\n          { args: [0, -big], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowDown\", \"mac+ArrowDown\"],\n          proto._translateEmpty,\n          { args: [0, small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"],\n          proto._translateEmpty,\n          { args: [0, big], checker: arrowChecker },\n        ],\n      ])\n    );\n  }\n\n  static _type = \"freetext\";\n\n  static _editorType = AnnotationEditorType.FREETEXT;\n\n  constructor(params) {\n    super({ ...params, name: \"freeTextEditor\" });\n    this.#color =\n      params.color ||\n      FreeTextEditor._defaultColor ||\n      AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager, {\n      strings: [\"pdfjs-free-text-default-content\"],\n    });\n    const style = getComputedStyle(document.documentElement);\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      const lineHeight = parseFloat(\n        style.getPropertyValue(\"--freetext-line-height\")\n      );\n      assert(\n        lineHeight === LINE_FACTOR,\n        \"Update the CSS variable to agree with the constant.\"\n      );\n    }\n\n    this._internalPadding = parseFloat(\n      style.getPropertyValue(\"--freetext-padding\")\n    );\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.FREETEXT_SIZE,\n        FreeTextEditor._defaultFontSize,\n      ],\n      [\n        AnnotationEditorParamsType.FREETEXT_COLOR,\n        FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize],\n      [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color],\n    ];\n  }\n\n  /**\n   * Update the font size and make this action as undoable.\n   * @param {number} fontSize\n   */\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Helper to translate the editor with the keyboard when it's empty.\n   * @param {number} x in page units.\n   * @param {number} y in page units.\n   */\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, /* noCommit = */ true);\n  }\n\n  /** @inheritdoc */\n  getInitialTranslation() {\n    // The start of the base line is where the user clicked.\n    const scale = this.parentScale;\n    return [\n      -FreeTextEditor._internalPadding * scale,\n      -(FreeTextEditor._internalPadding + this.#fontSize) * scale,\n    ];\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.editorDiv.addEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.addEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.addEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.addEventListener(\"input\", this.#boundEditorDivInput);\n    this.editorDiv.addEventListener(\"paste\", this.#boundEditorDivPaste);\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.editorDiv.removeEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener(\"input\", this.#boundEditorDivInput);\n    this.editorDiv.removeEventListener(\"paste\", this.#boundEditorDivPaste);\n\n    // On Chrome, the focus is given to <body> when contentEditable is set to\n    // false, hence we focus the div.\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n\n    // In case the blur callback hasn't been called.\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    if (this.width) {\n      // The editor was created in using ctrl+c.\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n\n  /**\n   * Extract the text from this editor.\n   * @returns {string}\n   */\n  #extractText() {\n    // We don't use innerText because there are some bugs with line breaks.\n    const buffer = [];\n    this.editorDiv.normalize();\n    for (const child of this.editorDiv.childNodes) {\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n    }\n    return buffer.join(\"\\n\");\n  }\n\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      // This editor isn't on screen but we need to get its dimensions, so\n      // we just insert it in the DOM, get its bounding box and then remove it.\n      const { currentLayer, div } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n\n    // The dimensions are relative to the rotation of the page, hence we need to\n    // take that into account (see issue #16636).\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Commit the content we have in this editor.\n   * @returns {undefined}\n   */\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = (this.#content = this.#extractText().trimEnd());\n    if (savedText === newText) {\n      return;\n    }\n\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false,\n    });\n    this.#setEditorDimensions();\n  }\n\n  /** @inheritdoc */\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n\n  /** @inheritdoc */\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n\n  /**\n   * ondblclick callback.\n   * @param {MouseEvent} event\n   */\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n\n  /**\n   * onkeydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      // Avoid to add an unwanted new line.\n      event.preventDefault();\n    }\n  }\n\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text\");\n    this.enableEditing();\n\n    AnnotationEditor._l10nPromise\n      .get(\"pdfjs-free-text-default-content\")\n      .then(msg => this.editorDiv?.setAttribute(\"default-content\", msg));\n    this.editorDiv.contentEditable = true;\n\n    const { style } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n\n    this.div.append(this.editorDiv);\n\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n\n    bindEvents(this, this.div, [\"dblclick\", \"keydown\"]);\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        // This stuff is hard to test: if something is changed here, please\n        // test with the following PDF file:\n        //  - freetexts.pdf\n        //  - rotated_freetexts.pdf\n        // Only small variations between the original annotation and its editor\n        // are allowed.\n\n        // position is the position of the first glyph in the annotation\n        // and it's relative to its container.\n        const { position } = this.#initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX =\n              baseX +\n              (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY =\n              baseY +\n              (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this.setAt(\n          baseX * parentWidth,\n          baseY * parentHeight,\n          this.width * parentWidth,\n          this.height * parentHeight\n        );\n      }\n\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      this.div.setAttribute(\"annotation-id\", this.annotationElementId);\n    }\n\n    return this.div;\n  }\n\n  static #getNodeContent(node) {\n    return (\n      node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText\n    ).replaceAll(EOL_PATTERN, \"\");\n  }\n\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const { types } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(\n      clipboardData.getData(\"text\") || \"\"\n    ).replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n\n    // Collect the text before and after the caret.\n    const { startContainer, startOffset } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(\n        startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\")\n      );\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(\n        startContainer.nodeValue\n          .slice(0, startOffset)\n          .replaceAll(EOL_PATTERN, \"\")\n      );\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n\n    // Set the caret at the right position.\n    const newRange = new Range();\n    let beforeLength = bufferBefore.reduce((acc, line) => acc + line.length, 0);\n    for (const { firstChild } of this.editorDiv.childNodes) {\n      // Each child is either a div with a text node or a br element.\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(\n        line ? document.createTextNode(line) : document.createElement(\"br\")\n      );\n      this.editorDiv.append(div);\n    }\n  }\n\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n\n  /** @inheritdoc */\n  get contentDiv() {\n    return this.editorDiv;\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: { fontSize, fontColor },\n          rect,\n          rotation,\n          id,\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      // textContent is supposed to be an array of strings containing each line\n      // of text. However, it can be null or empty.\n      if (!textContent || textContent.length === 0) {\n        // Empty annotation.\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n      };\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor.#initialData = initialData;\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    if (this.deleted) {\n      return {\n        pageIndex: this.pageIndex,\n        id: this.annotationElementId,\n        deleted: true,\n      };\n    }\n\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(\n      this.isAttachedToDOM\n        ? getComputedStyle(this.editorDiv).color\n        : this.#color\n    );\n\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n\n    if (isForCopying) {\n      // Don't add the id when copying because the pasted editor mustn't be\n      // linked to an existing annotation.\n      return serialized;\n    }\n\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n\n    serialized.id = this.annotationElementId;\n\n    return serialized;\n  }\n\n  #hasElementChanged(serialized) {\n    const { value, fontSize, color, pageIndex } = this.#initialData;\n\n    return (\n      this._hasBeenMoved ||\n      serialized.value !== value ||\n      serialized.fontSize !== fontSize ||\n      serialized.color.some((c, i) => c !== color[i]) ||\n      serialized.pageIndex !== pageIndex\n    );\n  }\n\n  /** @inheritdoc */\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const { style } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(\n        line ? document.createTextNode(line) : document.createElement(\"br\")\n      );\n      content.append(div);\n    }\n\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n    });\n\n    return content;\n  }\n\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\nexport { FreeTextEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  shadow,\n  Util,\n} from \"../../shared/util.js\";\nimport { bindEvents, KeyboardManager } from \"./tools.js\";\nimport { FreeOutliner, Outliner } from \"./outliner.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { ColorPicker } from \"./color_picker.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\n/**\n * Basic draw editor in order to generate an Highlight annotation.\n */\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n\n  #anchorOffset = 0;\n\n  #boxes;\n\n  #clipPathId = null;\n\n  #colorPicker = null;\n\n  #focusOutlines = null;\n\n  #focusNode = null;\n\n  #focusOffset = 0;\n\n  #highlightDiv = null;\n\n  #highlightOutlines = null;\n\n  #id = null;\n\n  #isFreeHighlight = false;\n\n  #boundKeydown = this.#keydown.bind(this);\n\n  #lastPoint = null;\n\n  #opacity;\n\n  #outlineId = null;\n\n  #text = \"\";\n\n  #thickness;\n\n  #methodOfCreation = \"\";\n\n  static _defaultColor = null;\n\n  static _defaultOpacity = 1;\n\n  static _defaultThickness = 12;\n\n  static _l10nPromise;\n\n  static _type = \"highlight\";\n\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n\n  static _freeHighlightId = -1;\n\n  static _freeHighlight = null;\n\n  static _freeHighlightClipId = \"\";\n\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, { args: [0] }],\n        [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, { args: [1] }],\n        [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, { args: [2] }],\n        [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, { args: [3] }],\n      ])\n    );\n  }\n\n  constructor(params) {\n    super({ ...params, name: \"highlightEditor\" });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n\n  /** @inheritdoc */\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation,\n    };\n  }\n\n  /** @inheritdoc */\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n    };\n  }\n\n  static computeTelemetryFinalData(data) {\n    // We want to know how many colors have been used.\n    return { numberOfColors: data.get(\"color\").size };\n  }\n\n  #createOutlines() {\n    const outliner = new Outliner(this.#boxes, /* borderWidth = */ 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    ({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    } = this.#highlightOutlines.box);\n\n    const outlinerForOutline = new Outliner(\n      this.#boxes,\n      /* borderWidth = */ 0.0025,\n      /* innerMargin = */ 0.001,\n      this._uiManager.direction === \"ltr\"\n    );\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n\n    // The last point is in the pages coordinate system.\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [\n      (lastPoint[0] - this.x) / this.width,\n      (lastPoint[1] - this.y) / this.height,\n    ];\n  }\n\n  #createFreeOutlines({ highlightOutlines, highlightId, clipPathId }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(\n      /* Slightly bigger than the highlight in order to have a little\n         space between the highlight and the outline. */\n      this.#thickness / 2 + extraThickness,\n      /* innerMargin = */ 0.0025\n    );\n\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      // We need to redraw the highlight because we change the coordinates to be\n      // in the box coordinate system.\n      this.parent.drawLayer.finalizeLine(highlightId, highlightOutlines);\n      this.#outlineId = this.parent.drawLayer.highlightOutline(\n        this.#focusOutlines\n      );\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateLine(this.#id, highlightOutlines);\n      this.parent.drawLayer.updateBox(\n        this.#id,\n        HighlightEditor.#rotateBbox(\n          this.#highlightOutlines.box,\n          (angle - this.rotation + 360) % 360\n        )\n      );\n\n      this.parent.drawLayer.updateLine(this.#outlineId, this.#focusOutlines);\n      this.parent.drawLayer.updateBox(\n        this.#outlineId,\n        HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle)\n      );\n    }\n    const { x, y, width, height } = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = y;\n        this.y = 1 - x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = 1 - y;\n        this.y = x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n    }\n\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||=\n      uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  translateInPage(x, y) {}\n\n  /** @inheritdoc */\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,\n        HighlightEditor._defaultColor,\n      ],\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,\n        HighlightEditor._defaultThickness,\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n        this.color || HighlightEditor._defaultColor,\n      ],\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,\n        this.#thickness || HighlightEditor._defaultThickness,\n      ],\n      [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight],\n    ];\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.parent?.drawLayer.changeColor(this.#id, col);\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n\n    this._reportTelemetry(\n      {\n        action: \"color_changed\",\n        color: this._uiManager.highlightColorNames.get(color),\n      },\n      /* mustWait = */ true\n    );\n  }\n\n  /**\n   * Update the thickness and make this action undoable.\n   * @param {number} thickness\n   */\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n    this._reportTelemetry(\n      { action: \"thickness_changed\", thickness },\n      /* mustWait = */ true\n    );\n  }\n\n  /** @inheritdoc */\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({ editor: this });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n\n  /** @inheritdoc */\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n\n  /** @inheritdoc */\n  getBaseTranslation() {\n    // The editor itself doesn't have any CSS border (we're drawing one\n    // ourselves in using SVG).\n    return [0, 0];\n  }\n\n  /** @inheritdoc */\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this.parent.addUndoableEditor(this);\n    this.div.focus();\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\",\n    });\n    super.remove();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    this.#addToDrawLayer();\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilding it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      // If mustBeSelected is true it means that this editor was selected\n      // when its parent has been destroyed, hence we must select it again.\n      mustBeSelected =\n        !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      // We select it after the parent has been set.\n      this.select();\n    }\n  }\n\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2),\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({ id: this.#id, clipPathId: this.#clipPathId } =\n      parent.drawLayer.highlight(\n        this.#highlightOutlines,\n        this.color,\n        this.#opacity\n      ));\n    this.#outlineId = parent.drawLayer.highlightOutline(this.#focusOutlines);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n\n  static #rotateBbox({ x, y, width, height }, angle) {\n    switch (angle) {\n      case 90:\n        return {\n          x: 1 - y - height,\n          y: x,\n          width: height,\n          height: width,\n        };\n      case 180:\n        return {\n          x: 1 - x - width,\n          y: 1 - y - height,\n          width,\n          height,\n        };\n      case 270:\n        return {\n          x: y,\n          y: 1 - x - width,\n          width: height,\n          height: width,\n        };\n    }\n    return {\n      x,\n      y,\n      width,\n      height,\n    };\n  }\n\n  /** @inheritdoc */\n  rotate(angle) {\n    // We need to rotate the svgs because of the coordinates system.\n    const { drawLayer } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      // An highlight annotation is always drawn horizontally.\n      box = HighlightEditor.#rotateBbox(this, angle);\n    }\n    drawLayer.rotate(this.#id, angle);\n    drawLayer.rotate(this.#outlineId, angle);\n    drawLayer.updateBox(this.#id, box);\n    drawLayer.updateBox(\n      this.#outlineId,\n      HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle)\n    );\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#boundKeydown);\n    }\n    const highlightDiv = (this.#highlightDiv = document.createElement(\"div\"));\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n\n    return div;\n  }\n\n  pointerover() {\n    this.parent.drawLayer.addClass(this.#outlineId, \"hovered\");\n  }\n\n  pointerleave() {\n    this.parent.drawLayer.removeClass(this.#outlineId, \"hovered\");\n  }\n\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0 /* left */:\n      case 2 /* up */:\n        this.#setCaret(/* start = */ true);\n        break;\n      case 1 /* right */:\n      case 3 /* down */:\n        this.#setCaret(/* start = */ false);\n        break;\n    }\n  }\n\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n\n  /** @inheritdoc */\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"hovered\");\n    this.parent?.drawLayer.addClass(this.#outlineId, \"selected\");\n  }\n\n  /** @inheritdoc */\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"selected\");\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(/* start = */ false);\n    }\n  }\n\n  /** @inheritdoc */\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n\n  /** @inheritdoc */\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.show(this.#id, visible);\n      this.parent.drawLayer.show(this.#outlineId, visible);\n    }\n  }\n\n  #getRotation() {\n    // Highlight annotations are always drawn horizontally but if\n    // a free highlight annotation can be rotated.\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const boxes = this.#boxes;\n    const quadPoints = new Array(boxes.length * 8);\n    let i = 0;\n    for (const { x, y, width, height } of boxes) {\n      const sx = x * pageWidth;\n      const sy = (1 - y - height) * pageHeight;\n      // The specifications say that the rectangle should start from the bottom\n      // left corner and go counter-clockwise.\n      // But when opening the file in Adobe Acrobat it appears that this isn't\n      // correct hence the 4th and 6th numbers are just swapped.\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy + height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n\n  static startHighlighting(parent, isLTR, { target: textLayer, x, y }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n    const pointerMove = e => {\n      this.#highlightMove(parent, e);\n    };\n    const pointerDownOptions = { capture: true, passive: false };\n    const pointerDown = e => {\n      // Avoid to have undesired clicks during the drawing.\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    const pointerUpCallback = e => {\n      textLayer.removeEventListener(\"pointermove\", pointerMove);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\n        \"pointerdown\",\n        pointerDown,\n        pointerDownOptions\n      );\n      window.removeEventListener(\"contextmenu\", noContextMenu);\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback);\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    window.addEventListener(\"pointerdown\", pointerDown, pointerDownOptions);\n    window.addEventListener(\"contextmenu\", noContextMenu);\n\n    textLayer.addEventListener(\"pointermove\", pointerMove);\n    this._freeHighlight = new FreeOutliner(\n      { x, y },\n      [layerX, layerY, parentWidth, parentHeight],\n      parent.scale,\n      this._defaultThickness / 2,\n      isLTR,\n      /* innerMargin = */ 0.001\n    );\n    ({ id: this._freeHighlightId, clipPathId: this._freeHighlightClipId } =\n      parent.drawLayer.highlight(\n        this._freeHighlight,\n        this._defaultColor,\n        this._defaultOpacity,\n        /* isPathUpdatable = */ true\n      ));\n  }\n\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      // Redraw only if the point has been added.\n      parent.drawLayer.updatePath(this._freeHighlightId, this._freeHighlight);\n    }\n  }\n\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\",\n      });\n    } else {\n      parent.drawLayer.removeFreeHighlight(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n\n    const {\n      rect: [blX, blY, trX, trY],\n      color,\n      quadPoints,\n    } = data;\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = data.opacity;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    editor.width = (trX - blX) / pageWidth;\n    editor.height = (trY - blY) / pageHeight;\n    const boxes = (editor.#boxes = []);\n    for (let i = 0; i < quadPoints.length; i += 8) {\n      boxes.push({\n        x: (quadPoints[4] - trX) / pageWidth,\n        y: (trY - (1 - quadPoints[i + 5])) / pageHeight,\n        width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n        height: (quadPoints[i + 5] - quadPoints[i + 1]) / pageHeight,\n      });\n    }\n    editor.#createOutlines();\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    // It doesn't make sense to copy/paste a highlight annotation.\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n\n    return {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\nexport { HighlightEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  Util,\n} from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { InkAnnotationElement } from \"../annotation_layer.js\";\nimport { noContextMenu } from \"../display_utils.js\";\nimport { opacityToHex } from \"./tools.js\";\n\n/**\n * Basic draw editor in order to generate an Ink annotation.\n */\nclass InkEditor extends AnnotationEditor {\n  #baseHeight = 0;\n\n  #baseWidth = 0;\n\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n\n  #canvasContextMenuTimeoutId = null;\n\n  #currentPath2D = new Path2D();\n\n  #disableEditing = false;\n\n  #hasSomethingToDraw = false;\n\n  #isCanvasInitialized = false;\n\n  #observer = null;\n\n  #realWidth = 0;\n\n  #realHeight = 0;\n\n  #requestFrameCallback = null;\n\n  static _defaultColor = null;\n\n  static _defaultOpacity = 1;\n\n  static _defaultThickness = 1;\n\n  static _type = \"ink\";\n\n  static _editorType = AnnotationEditorType.INK;\n\n  constructor(params) {\n    super({ ...params, name: \"inkEditor\" });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n    this._willKeepAspectRatio = true;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(InkEditor._defaultOpacity * 100),\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.INK_THICKNESS,\n        this.thickness || InkEditor._defaultThickness,\n      ],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        this.color ||\n          InkEditor._defaultColor ||\n          AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity)),\n      ],\n    ];\n  }\n\n  /**\n   * Update the thickness and make this action undoable.\n   * @param {number} thickness\n   */\n  #updateThickness(thickness) {\n    const setThickness = th => {\n      this.thickness = th;\n      this.#fitToContent();\n    };\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.#redraw();\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the opacity and make this action undoable.\n   * @param {number} opacity\n   */\n  #updateOpacity(opacity) {\n    const setOpacity = op => {\n      this.opacity = op;\n      this.#redraw();\n    };\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: setOpacity.bind(this, opacity),\n      undo: setOpacity.bind(this, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilding it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n\n  /** @inheritdoc */\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n\n    // Destroy the canvas.\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n      this.#canvasContextMenuTimeoutId = null;\n    }\n\n    this.#observer.disconnect();\n    this.#observer = null;\n\n    super.remove();\n  }\n\n  setParent(parent) {\n    if (!this.parent && parent) {\n      // We've a parent hence the rescale will be handled thanks to the\n      // ResizeObserver.\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      // The editor is removed from the DOM, hence we handle the rescale thanks\n      // to the onScaleChanging callback.\n      // This way, it'll be saved/printed correctly.\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n\n    super.enableEditMode();\n    this._isDraggable = false;\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n\n    super.disableEditMode();\n    this._isDraggable = !this.isEmpty();\n    this.div.classList.remove(\"editing\");\n\n    this.canvas.removeEventListener(\n      \"pointerdown\",\n      this.#boundCanvasPointerdown\n    );\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this._isDraggable = !this.isEmpty();\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return (\n      this.paths.length === 0 ||\n      (this.paths.length === 1 && this.paths[0].length === 0)\n    );\n  }\n\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height],\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n\n  /**\n   * Set line styles.\n   */\n  #setStroke() {\n    const { ctx, color, opacity, thickness, parentScale, scaleFactor } = this;\n    ctx.lineWidth = (thickness * parentScale) / scaleFactor;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${opacityToHex(opacity)}`;\n  }\n\n  /**\n   * Start to draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #startDrawing(x, y) {\n    this.canvas.addEventListener(\"contextmenu\", noContextMenu);\n    this.canvas.addEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.addEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.addEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.removeEventListener(\n      \"pointerdown\",\n      this.#boundCanvasPointerdown\n    );\n\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||=\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n\n  /**\n   * Draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n\n    this.#makeBezierCurve(\n      path2D,\n      ...currentPath.at(-3),\n      ...currentPath.at(-2),\n      x,\n      y\n    );\n  }\n\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n\n  /**\n   * Stop to draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n\n    this.#draw(x, y);\n    this.#endPath();\n\n    // Interpolate the path entered by the user with some\n    // Bezier's curves in order to have a smoother path and\n    // to reduce the data size used to draw it in the PDF.\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      // We have only one point finally.\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this._uiManager.rebuild(this);\n    };\n\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map(xy => xy[0]);\n    const y = lastPoints.map(xy => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n\n    const { ctx } = this;\n    ctx.save();\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      // In Chrome, the clip() method doesn't work as expected.\n      ctx.clearRect(xMin, yMin, xMax - xMin, yMax - yMin);\n      ctx.beginPath();\n      ctx.rect(xMin, yMin, xMax - xMin, yMax - yMin);\n      ctx.clip();\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n\n    ctx.restore();\n  }\n\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n\n    path2D.bezierCurveTo(\n      prevX + (2 * (x1 - prevX)) / 3,\n      prevY + (2 * (y1 - prevY)) / 3,\n      x3 + (2 * (x1 - x3)) / 3,\n      y3 + (2 * (y1 - y3)) / 3,\n      x3,\n      y3\n    );\n  }\n\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n\n      // The quadratic is: [[x0, y0], [x1, y1], [x3, y3]].\n      // Convert the quadratic to a cubic\n      // (see https://fontforge.org/docs/techref/bezier.html#converting-truetype-to-postscript)\n      const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n      const control2 = [x3 + (2 * (x1 - x3)) / 3, y3 + (2 * (y1 - y3)) / 3];\n\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n\n      [x0, y0] = [x3, y3];\n    }\n\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n\n    // The quadratic is: [[x0, y0], [x1, y1], [x2, y2]].\n    const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n    const control2 = [x2 + (2 * (x1 - x2)) / 3, y2 + (2 * (y1 - y2)) / 3];\n\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n\n  /**\n   * Redraw all the paths.\n   */\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n\n    const { canvas, ctx } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n\n  /**\n   * Commit the curves we have in this editor.\n   */\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n\n    super.commit();\n\n    this.isEditing = false;\n    this.disableEditMode();\n\n    // This editor must be on top of the main ink editor.\n    this.setInForeground();\n\n    this.#disableEditing = true;\n    this.div.classList.add(\"disabled\");\n\n    this.#fitToContent(/* firstTime = */ true);\n    this.select();\n\n    this.parent.addInkEditorIfNeeded(/* isCommitting = */ true);\n\n    // When committing, the position of this editor is changed, hence we must\n    // move it to the right position in the DOM.\n    this.moveInDOM();\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    this.enableEditMode();\n  }\n\n  /**\n   * onpointerdown callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n\n    // We want to draw on top of any other editors.\n    // Since it's the last child, there's no need to give it a higher z-index.\n    this.setInForeground();\n\n    event.preventDefault();\n\n    if (!this.div.contains(document.activeElement)) {\n      this.div.focus({\n        preventScroll: true /* See issue #17327 */,\n      });\n    }\n\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * onpointermove callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * onpointerup callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n\n  /**\n   * onpointerleave callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n\n  /**\n   * End the drawing.\n   * @param {PointerEvent} event\n   */\n  #endDrawing(event) {\n    this.canvas.removeEventListener(\n      \"pointerleave\",\n      this.#boundCanvasPointerleave\n    );\n    this.canvas.removeEventListener(\n      \"pointermove\",\n      this.#boundCanvasPointermove\n    );\n    this.canvas.removeEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n\n    // Slight delay to avoid the context menu to appear (it can happen on a long\n    // tap with a pen).\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n    }\n    this.#canvasContextMenuTimeoutId = setTimeout(() => {\n      this.#canvasContextMenuTimeoutId = null;\n      this.canvas.removeEventListener(\"contextmenu\", noContextMenu);\n    }, 10);\n\n    this.#stopDrawing(event.offsetX, event.offsetY);\n\n    this.addToAnnotationStorage();\n\n    // Since the ink editor covers all of the page and we want to be able\n    // to select another editor, we just put this one in the background.\n    this.setInBackground();\n  }\n\n  /**\n   * Create the canvas element.\n   */\n  #createCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = \"inkEditorCanvas\";\n    this.canvas.setAttribute(\"data-l10n-id\", \"pdfjs-ink-canvas\");\n\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n\n  /**\n   * Create the resize observer.\n   */\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return !this.isEmpty() && this.#disableEditing;\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n\n    this.div.setAttribute(\"data-l10n-id\", \"pdfjs-ink\");\n\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n\n    this.#createCanvas();\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight\n      );\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.div.classList.add(\"disabled\");\n    } else {\n      this.div.classList.add(\"editing\");\n      this.enableEditMode();\n    }\n\n    this.#createObserver();\n\n    return this.div;\n  }\n\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n\n  /**\n   * When the dimensions of the div change the inner canvas must\n   * renew its dimensions, hence it must redraw its own contents.\n   * @param {number} width - the new width of the div\n   * @param {number} height - the new height of the div\n   * @returns\n   */\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (\n      this.#realWidth === roundedWidth &&\n      this.#realHeight === roundedHeight\n    ) {\n      return;\n    }\n\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n\n    this.canvas.style.visibility = \"hidden\";\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.fixAndSetPosition();\n\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n\n    this.#setCanvasDims();\n    this.#redraw();\n\n    this.canvas.style.visibility = \"visible\";\n\n    // For any reason the dimensions couldn't be in percent but in pixels, hence\n    // we must fix them.\n    this.fixDims();\n  }\n\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n\n  /**\n   * Update the canvas transform.\n   */\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(\n      this.scaleFactor,\n      0,\n      0,\n      this.scaleFactor,\n      this.translationX * this.scaleFactor + padding,\n      this.translationY * this.scaleFactor + padding\n    );\n  }\n\n  /**\n   * Convert into a Path2D.\n   * @param {Array<Array<number>>} bezier\n   * @returns {Path2D}\n   */\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(\n        control1[0],\n        control1[1],\n        control2[0],\n        control2[1],\n        second[0],\n        second[1]\n      );\n    }\n    return path2D;\n  }\n\n  static #toPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] += blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] + blX;\n          points[i + 1] = x + blY;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] += blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trX - points[i + 1];\n          points[i + 1] = trY - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n\n  static #fromPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] -= blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] - blY;\n          points[i + 1] = x - blX;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] -= blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trY - points[i + 1];\n          points[i + 1] = trX - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n\n  /**\n   * Transform and serialize the paths.\n   * @param {number} s - scale factor\n   * @param {number} tx - abscissa of the translation\n   * @param {number} ty - ordinate of the translation\n   * @param {Array<number>} rect - the bounding box of the annotation\n   */\n  #serializePaths(s, tx, ty, rect) {\n    const paths = [];\n    const padding = this.thickness / 2;\n    const shiftX = s * tx + padding;\n    const shiftY = s * ty + padding;\n    for (const bezier of this.paths) {\n      const buffer = [];\n      const points = [];\n      for (let j = 0, jj = bezier.length; j < jj; j++) {\n        const [first, control1, control2, second] = bezier[j];\n        if (first[0] === second[0] && first[1] === second[1] && jj === 1) {\n          // We have only one point.\n          const p0 = s * first[0] + shiftX;\n          const p1 = s * first[1] + shiftY;\n          buffer.push(p0, p1);\n          points.push(p0, p1);\n          break;\n        }\n        const p10 = s * first[0] + shiftX;\n        const p11 = s * first[1] + shiftY;\n        const p20 = s * control1[0] + shiftX;\n        const p21 = s * control1[1] + shiftY;\n        const p30 = s * control2[0] + shiftX;\n        const p31 = s * control2[1] + shiftY;\n        const p40 = s * second[0] + shiftX;\n        const p41 = s * second[1] + shiftY;\n\n        if (j === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        points.push(p20, p21);\n        if (j === jj - 1) {\n          points.push(p40, p41);\n        }\n      }\n      paths.push({\n        bezier: InkEditor.#toPDFCoordinates(buffer, rect, this.rotation),\n        points: InkEditor.#toPDFCoordinates(points, rect, this.rotation),\n      });\n    }\n\n    return paths;\n  }\n\n  /**\n   * Get the bounding box containing all the paths.\n   * @returns {Array<number>}\n   */\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = Util.bezierBoundingBox(\n          ...first,\n          ...control1,\n          ...control2,\n          ...second\n        );\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n\n    return [xMin, yMin, xMax, yMax];\n  }\n\n  /**\n   * The bounding box is computed with null thickness, so we must take\n   * it into account for the display.\n   * It corresponds to the total padding, hence it should be divided by 2\n   * in order to have left/right paddings.\n   * @returns {number}\n   */\n  #getPadding() {\n    return this.#disableEditing\n      ? Math.ceil(this.thickness * this.parentScale)\n      : 0;\n  }\n\n  /**\n   * Set the div position and dimensions in order to fit to\n   * the bounding box of the contents.\n   * @returns {undefined}\n   */\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n\n    this.setAspectRatio(width, height);\n\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n\n    this.#realWidth = width;\n    this.#realHeight = height;\n\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(\n      prevTranslationX - this.translationX - unscaledPadding,\n      prevTranslationY - this.translationY - unscaledPadding\n    );\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof InkAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n\n    editor.thickness = data.thickness;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n\n    const { paths, rect, rotation } = data;\n\n    for (let { bezier } of paths) {\n      bezier = InkEditor.#fromPDFCoordinates(bezier, rect, rotation);\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (bezier[i + 5] - padding);\n        path.push([\n          [p0, p1],\n          [p10, p11],\n          [p20, p21],\n          [p30, p31],\n        ]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n\n    return {\n      annotationType: AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(\n        this.scaleFactor / this.parentScale,\n        this.translationX,\n        this.translationY,\n        rect\n      ),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n}\n\nexport { InkEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorType, shadow } from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { PixelsPerInch } from \"../display_utils.js\";\nimport { StampAnnotationElement } from \"../annotation_layer.js\";\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n\n  #bitmapId = null;\n\n  #bitmapPromise = null;\n\n  #bitmapUrl = null;\n\n  #bitmapFile = null;\n\n  #bitmapFileName = \"\";\n\n  #canvas = null;\n\n  #observer = null;\n\n  #resizeTimeoutId = null;\n\n  #isSvg = false;\n\n  #hasBeenAddedInUndoStack = false;\n\n  static _type = \"stamp\";\n\n  static _editorType = AnnotationEditorType.STAMP;\n\n  constructor(params) {\n    super({ ...params, name: \"stampEditor\" });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n\n  static get supportedTypes() {\n    // See https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types\n    // to know which types are supported by the browser.\n    const types = [\n      \"apng\",\n      \"avif\",\n      \"bmp\",\n      \"gif\",\n      \"jpeg\",\n      \"png\",\n      \"svg+xml\",\n      \"webp\",\n      \"x-icon\",\n    ];\n    return shadow(\n      this,\n      \"supportedTypes\",\n      types.map(type => `image/${type}`)\n    );\n  }\n\n  static get supportedTypesStr() {\n    return shadow(this, \"supportedTypesStr\", this.supportedTypes.join(\",\"));\n  }\n\n  /** @inheritdoc */\n  static isHandlingMimeForPasting(mime) {\n    return this.supportedTypes.includes(mime);\n  }\n\n  /** @inheritdoc */\n  static paste(item, parent) {\n    parent.pasteEditor(AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile(),\n    });\n  }\n\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (this.#canvas) {\n      this.div.focus();\n    }\n  }\n\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager\n        .getFromId(this.#bitmapId)\n        .then(data => this.#getBitmapFetched(data, /* fromId = */ true))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromUrl(url)\n        .then(data => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromFile(file)\n        .then(data => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    const input = document.createElement(\"input\");\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      input.hidden = true;\n      input.id = \"stampEditorFileInput\";\n      document.body.append(input);\n    }\n    input.type = \"file\";\n    input.accept = StampEditor.supportedTypesStr;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(\n            input.files[0]\n          );\n          this.#getBitmapFetched(data);\n        }\n        if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n          input.remove();\n        }\n        resolve();\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      });\n    }).finally(() => this.#getBitmapDone());\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"TESTING\")) {\n      input.click();\n    }\n  }\n\n  /** @inheritdoc */\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      this.#observer?.disconnect();\n      this.#observer = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      // It's possible to have to rebuild an editor which is not on a visible\n      // page.\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this._isDraggable = true;\n    this.div.focus();\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !(\n      this.#bitmapPromise ||\n      this.#bitmap ||\n      this.#bitmapUrl ||\n      this.#bitmapFile ||\n      this.#bitmapId\n    );\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return true;\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.div.hidden = true;\n\n    this.addAltTextButton();\n\n    if (this.#bitmap) {\n      this.#createCanvas();\n    } else {\n      this.#getBitmap();\n    }\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight\n      );\n    }\n\n    return this.div;\n  }\n\n  #createCanvas() {\n    const { div } = this;\n    let { width, height } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (\n      width > MAX_RATIO * pageWidth ||\n      height > MAX_RATIO * pageHeight\n    ) {\n      // If the the image is too big compared to the page dimensions\n      // (more than MAX_RATIO) then we scale it down.\n      const factor = Math.min(\n        (MAX_RATIO * pageWidth) / width,\n        (MAX_RATIO * pageHeight) / height\n      );\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(\n      (width * parentWidth) / pageWidth,\n      (height * parentHeight) / pageHeight\n    );\n\n    this._uiManager.enableWaiting(false);\n    const canvas = (this.#canvas = document.createElement(\"canvas\"));\n    div.append(canvas);\n    div.hidden = false;\n    this.#drawBitmap(width, height);\n    this.#createObserver();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n\n    // There are multiple ways to add an image to the page, so here we just\n    // count the number of times an image is added to the page whatever the way\n    // is.\n    this._reportTelemetry({\n      action: \"inserted_image\",\n    });\n    if (this.#bitmapFileName) {\n      canvas.setAttribute(\"aria-label\", this.#bitmapFileName);\n    }\n  }\n\n  /**\n   * When the dimensions of the div change the inner canvas must\n   * renew its dimensions, hence it must redraw its own contents.\n   * @param {number} width - the new width of the div\n   * @param {number} height - the new height of the div\n   * @returns\n   */\n  #setDimensions(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setDims(width, height);\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    // When the user is resizing the editor we just use CSS to scale the image\n    // to avoid redrawing it too often.\n    // And once the user stops resizing the editor we redraw the image in\n    // rescaling it correctly (see this.#scaleBitmap).\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap(width, height);\n    }, TIME_TO_WAIT);\n  }\n\n  #scaleBitmap(width, height) {\n    const { width: bitmapWidth, height: bitmapHeight } = this.#bitmap;\n\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n\n      if (newWidth > 2 * width) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(newWidth / 2);\n        newWidth =\n          newWidth >= 16384\n            ? Math.floor(newWidth / 2) - 1\n            : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight =\n          newHeight >= 16384\n            ? Math.floor(newHeight / 2) - 1\n            : Math.ceil(newHeight / 2);\n      }\n\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        bitmap,\n        0,\n        0,\n        prevWidth,\n        prevHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      bitmap = offscreen.transferToImageBitmap();\n    }\n\n    return bitmap;\n  }\n\n  #drawBitmap(width, height) {\n    width = Math.ceil(width);\n    height = Math.ceil(height);\n    const canvas = this.#canvas;\n    if (!canvas || (canvas.width === width && canvas.height === height)) {\n      return;\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const bitmap = this.#isSvg\n      ? this.#bitmap\n      : this.#scaleBitmap(width, height);\n\n    if (this._uiManager.hasMLManager && !this.hasAltText()) {\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        bitmap,\n        0,\n        0,\n        bitmap.width,\n        bitmap.height,\n        0,\n        0,\n        width,\n        height\n      );\n      offscreen.convertToBlob().then(blob => {\n        const fileReader = new FileReader();\n        fileReader.onload = () => {\n          const url = fileReader.result;\n          this._uiManager\n            .mlGuess({\n              service: \"image-to-text\",\n              request: {\n                imageData: url,\n              },\n            })\n            .then(response => {\n              const altText = response?.output || \"\";\n              if (this.parent && altText && !this.hasAltText()) {\n                this.altTextData = { altText, decorative: false };\n              }\n            });\n        };\n        fileReader.readAsDataURL(blob);\n      });\n    }\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(\n      bitmap,\n      0,\n      0,\n      bitmap.width,\n      bitmap.height,\n      0,\n      0,\n      width,\n      height\n    );\n  }\n\n  /** @inheritdoc */\n  getImageForAltText() {\n    return this.#canvas;\n  }\n\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      // We convert to a data url because it's sync and the url can live in the\n      // clipboard.\n      const canvas = document.createElement(\"canvas\");\n      ({ width: canvas.width, height: canvas.height } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n\n      return canvas.toDataURL();\n    }\n\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      // Multiply by PixelsPerInch.PDF_TO_CSS_UNITS in order to increase the\n      // image resolution when rasterizing it.\n      const width = Math.round(\n        this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS\n      );\n      const height = Math.round(\n        this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS\n      );\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        this.#bitmap,\n        0,\n        0,\n        this.#bitmap.width,\n        this.#bitmap.height,\n        0,\n        0,\n        width,\n        height\n      );\n      return offscreen.transferToImageBitmap();\n    }\n\n    return structuredClone(this.#bitmap);\n  }\n\n  /**\n   * Create the resize observer.\n   */\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.#setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof StampAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    const { rect, bitmapUrl, bitmapId, isSvg, accessibilityData } = data;\n    if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId,\n    };\n\n    if (isForCopying) {\n      // We don't know what's the final destination (this pdf or another one)\n      // of this annotation and the clipboard doesn't support ImageBitmaps,\n      // hence we serialize the bitmap to a data url.\n      serialized.bitmapUrl = this.#serializeBitmap(/* toUrl = */ true);\n      serialized.accessibilityData = this.altTextData;\n      return serialized;\n    }\n\n    const { decorative, altText } = this.altTextData;\n    if (!decorative && altText) {\n      serialized.accessibilityData = { type: \"Figure\", alt: altText };\n    }\n\n    if (context === null) {\n      return serialized;\n    }\n\n    context.stamps ||= new Map();\n    const area = this.#isSvg\n      ? (serialized.rect[2] - serialized.rect[0]) *\n        (serialized.rect[3] - serialized.rect[1])\n      : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      // We don't want to have multiple copies of the same bitmap in the\n      // annotationMap, hence we only add the bitmap the first time we meet it.\n      context.stamps.set(this.#bitmapId, { area, serialized });\n      serialized.bitmap = this.#serializeBitmap(/* toUrl = */ false);\n    } else if (this.#isSvg) {\n      // If we have multiple copies of the same svg but with different sizes,\n      // then we want to keep the biggest one.\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(/* toUrl = */ false);\n      }\n    }\n    return serialized;\n  }\n}\n\nexport { StampEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n/** @typedef {import(\"../display_utils.js\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n/** @typedef {import(\"../../../web/interfaces\").IL10n} IL10n */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../annotation_layer.js\").AnnotationLayer} AnnotationLayer */\n/** @typedef {import(\"../draw_layer.js\").DrawLayer} DrawLayer */\n\nimport { AnnotationEditorType, FeatureTest } from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { FreeTextEditor } from \"./freetext.js\";\nimport { HighlightEditor } from \"./highlight.js\";\nimport { InkEditor } from \"./ink.js\";\nimport { setLayerDimensions } from \"../display_utils.js\";\nimport { StampEditor } from \"./stamp.js\";\n\n/**\n * @typedef {Object} AnnotationEditorLayerOptions\n * @property {Object} mode\n * @property {HTMLDivElement} div\n * @property {AnnotationEditorUIManager} uiManager\n * @property {boolean} enabled\n * @property {TextAccessibilityManager} [accessibilityManager]\n * @property {number} pageIndex\n * @property {IL10n} l10n\n * @property {AnnotationLayer} [annotationLayer]\n * @property {HTMLDivElement} [textLayer]\n * @property {DrawLayer} drawLayer\n * @property {PageViewport} viewport\n */\n\n/**\n * @typedef {Object} RenderEditorLayerOptions\n * @property {PageViewport} viewport\n */\n\n/**\n * Manage all the different editors on a page.\n */\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n\n  #allowClick = false;\n\n  #annotationLayer = null;\n\n  #boundPointerup = null;\n\n  #boundPointerdown = null;\n\n  #boundTextLayerPointerDown = null;\n\n  #editorFocusTimeoutId = null;\n\n  #editors = new Map();\n\n  #hadPointerDown = false;\n\n  #isCleaningUp = false;\n\n  #isDisabling = false;\n\n  #textLayer = null;\n\n  #uiManager;\n\n  static _initialized = false;\n\n  static #editorTypes = new Map(\n    [FreeTextEditor, InkEditor, StampEditor, HighlightEditor].map(type => [\n      type._editorType,\n      type,\n    ])\n  );\n\n  /**\n   * @param {AnnotationEditorLayerOptions} options\n   */\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n,\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n\n    this.#uiManager.addLayer(this);\n  }\n\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n\n  get isInvisible() {\n    return (\n      this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE\n    );\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {number} mode\n   */\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n\n  /**\n   * The mode has changed: it must be updated.\n   * @param {number} mode\n   */\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        // We always want to have an ink editor ready to draw in.\n        this.addInkEditorIfNeeded(false);\n\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.disableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n\n    this.toggleAnnotationLayerPointerEvents(false);\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(\n        `${editorType._type}Editing`,\n        mode === editorType._editorType\n      );\n    }\n    this.div.hidden = false;\n  }\n\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n\n  addInkEditorIfNeeded(isCommitting) {\n    if (this.#uiManager.getMode() !== AnnotationEditorType.INK) {\n      // We don't want to add an ink editor if we're not in ink mode!\n      return;\n    }\n\n    if (!isCommitting) {\n      // We're removing an editor but an empty one can already exist so in this\n      // case we don't need to create a new one.\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n\n    const editor = this.createAndAddNewEditor(\n      { offsetX: 0, offsetY: 0 },\n      /* isCentered = */ false\n    );\n    editor.setInBackground();\n  }\n\n  /**\n   * Set the editing state.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n\n  /**\n   * Enable pointer events on the main div in order to enable\n   * editor creation.\n   */\n  enable() {\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n\n    if (!this.#annotationLayer) {\n      return;\n    }\n\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      // The element must be hidden whatever its state is.\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n  }\n\n  /**\n   * Disable editor creation.\n   */\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n\n    if (this.#annotationLayer) {\n      // Show the annotations that were hidden in enable().\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const { id } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          editor.renderAnnotationElement(editable);\n          editor.show(false);\n        }\n        editable.show();\n      }\n    }\n\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n\n    this.#isDisabling = false;\n  }\n\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n\n  /**\n   * Set the current editor.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n\n    this.#uiManager.setActiveEditor(editor);\n  }\n\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#boundTextLayerPointerDown) {\n      this.#boundTextLayerPointerDown = this.#textLayerPointerDown.bind(this);\n      this.#textLayer.div.addEventListener(\n        \"pointerdown\",\n        this.#boundTextLayerPointerDown\n      );\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#boundTextLayerPointerDown) {\n      this.#textLayer.div.removeEventListener(\n        \"pointerdown\",\n        this.#boundTextLayerPointerDown\n      );\n      this.#boundTextLayerPointerDown = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n\n  #textLayerPointerDown(event) {\n    // Unselect all the editors in order to let the user select some text\n    // without being annoyed by an editor toolbar.\n    this.#uiManager.unselectAll();\n    if (event.target === this.#textLayer.div) {\n      const { isMac } = FeatureTest.platform;\n      if (event.button !== 0 || (event.ctrlKey && isMac)) {\n        // Do nothing on right click.\n        return;\n      }\n      this.#uiManager.showAllEditors(\n        \"highlight\",\n        true,\n        /* updateButton = */ true\n      );\n      this.#textLayer.div.classList.add(\"free\");\n      HighlightEditor.startHighlighting(\n        this,\n        this.#uiManager.direction === \"ltr\",\n        event\n      );\n      this.#textLayer.div.addEventListener(\n        \"pointerup\",\n        () => {\n          this.#textLayer.div.classList.remove(\"free\");\n        },\n        { once: true }\n      );\n      event.preventDefault();\n    }\n  }\n\n  enableClick() {\n    if (this.#boundPointerdown) {\n      return;\n    }\n    this.#boundPointerdown = this.pointerdown.bind(this);\n    this.#boundPointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.addEventListener(\"pointerup\", this.#boundPointerup);\n  }\n\n  disableClick() {\n    if (!this.#boundPointerdown) {\n      return;\n    }\n    this.div.removeEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.removeEventListener(\"pointerup\", this.#boundPointerup);\n    this.#boundPointerdown = null;\n    this.#boundPointerup = null;\n  }\n\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const { annotationElementId } = editor;\n    if (\n      annotationElementId &&\n      this.#uiManager.isDeletedAnnotationElement(annotationElementId)\n    ) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(/* isCommitting = */ false);\n    }\n  }\n\n  /**\n   * An editor can have a different parent, for example after having\n   * being dragged and droped from a page to another.\n   * @param {AnnotationEditor} editor\n   */\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n\n  /**\n   * Add a new editor in the current view.\n   * @param {AnnotationEditor} editor\n   */\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n\n    // The editor will be correctly moved into the DOM (see fixAndSetPosition).\n    editor.fixAndSetPosition();\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n\n    const { activeElement } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      // When the div is moved in the DOM the focus can move somewhere else,\n      // so we want to be sure that the focus will stay on the editor but we\n      // don't want to call any focus callbacks, hence we disable them and only\n      // re-enable them when the editor has the focus.\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\n            \"focusin\",\n            () => {\n              editor._focusEventsAllowed = true;\n            },\n            { once: true }\n          );\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      editor.div,\n      editor.contentDiv,\n      /* isRemovable = */ true\n    );\n  }\n\n  /**\n   * Add or rebuild depending if it has been removed or not.\n   * @param {AnnotationEditor} editor\n   */\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Add a new editor and make this addition undoable.\n   * @param {AnnotationEditor} editor\n   */\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n\n    this.addCommands({ cmd, undo, mustExec: false });\n  }\n\n  /**\n   * Get an id for an editor.\n   * @returns {string}\n   */\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} params\n   * @returns {AnnotationEditor}\n   */\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n\n  /**\n   * Paste some content into a new editor.\n   * @param {number} mode\n   * @param {Object} params\n   */\n  pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    this.#uiManager.updateMode(mode);\n\n    const { offsetX, offsetY } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} data\n   * @returns {AnnotationEditor | null}\n   */\n  deserialize(data) {\n    return (\n      AnnotationEditorLayer.#editorTypes\n        .get(data.annotationType ?? data.annotationEditorType)\n        ?.deserialize(data, this, this.#uiManager) || null\n    );\n  }\n\n  /**\n   * Create and add a new editor.\n   * @param {PointerEvent} event\n   * @param {boolean} isCentered\n   * @param [Object] data\n   * @returns {AnnotationEditor}\n   */\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n\n    return editor;\n  }\n\n  #getCenterPoint() {\n    const { x, y, width, height } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] =\n      this.viewport.rotation % 180 === 0\n        ? [centerX, centerY]\n        : [centerY, centerX];\n\n    return { offsetX, offsetY };\n  }\n\n  /**\n   * Create and add a new editor.\n   */\n  addNewEditor() {\n    this.createAndAddNewEditor(this.#getCenterPoint(), /* isCentered = */ true);\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n\n  /**\n   * Pointerup callback.\n   * @param {PointerEvent} event\n   */\n  pointerup(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Don't create an editor on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    if (!this.#hadPointerDown) {\n      // It can happen when the user starts a drag inside a text editor\n      // and then releases the mouse button outside of it. In such a case\n      // we don't want to create a new editor, hence we check that a pointerdown\n      // occurred on this div previously.\n      return;\n    }\n    this.#hadPointerDown = false;\n\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n\n    if (this.#uiManager.getMode() === AnnotationEditorType.STAMP) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n\n    this.createAndAddNewEditor(event, /* isCentered = */ false);\n  }\n\n  /**\n   * Pointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      // It's possible to have a second pointerdown event before a pointerup one\n      // when the user puts a finger on a touchscreen and then add a second one\n      // to start a pinch-to-zoom gesture.\n      // That said, in case it's possible to have two pointerdown events with\n      // a mouse, we don't want to create a new editor in such a case either.\n      this.#hadPointerDown = false;\n      return;\n    }\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Do nothing on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    this.#hadPointerDown = true;\n\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n\n  /**\n   *\n   * @param {AnnotationEditor} editor\n   * @param {number} x\n   * @param {number} y\n   * @returns\n   */\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n\n  /**\n   * Destroy the main editor.\n   */\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      // We need to commit the current editor before destroying the layer.\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n\n  #cleanup() {\n    // When we're cleaning up, some editors are removed but we don't want\n    // to add a new one which will induce an addition in this.#editors, hence\n    // an infinite loop.\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n\n  /**\n   * Render the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  render({ viewport }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    // We're maybe rendering a layer which was invisible when we started to edit\n    // so we must set the different callbacks for it.\n    this.updateMode();\n  }\n\n  /**\n   * Update the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  update({ viewport }) {\n    // Editors have their dimensions/positions in percent so to avoid any\n    // issues (see #15582), we must commit the current one before changing\n    // the viewport.\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, { rotation });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n    this.addInkEditorIfNeeded(/* isCommitting = */ false);\n  }\n\n  /**\n   * Get page dimensions.\n   * @returns {Object} dimensions.\n   */\n  get pageDimensions() {\n    const { pageWidth, pageHeight } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\nexport { AnnotationEditorLayer };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorParamsType, shadow } from \"../../shared/util.js\";\nimport { KeyboardManager } from \"./tools.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass ColorPicker {\n  #boundKeyDown = this.#keyDown.bind(this);\n\n  #boundPointerDown = this.#pointerDown.bind(this);\n\n  #button = null;\n\n  #buttonSwatch = null;\n\n  #defaultColor;\n\n  #dropdown = null;\n\n  #dropdownWasFromKeyboard = false;\n\n  #isMainColorPicker = false;\n\n  #editor = null;\n\n  #eventBus;\n\n  #uiManager = null;\n\n  #type;\n\n  static get _keyboardManager() {\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          [\"Escape\", \"mac+Escape\"],\n          ColorPicker.prototype._hideDropdownFromKeyboard,\n        ],\n        [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard],\n        [\n          [\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"],\n          ColorPicker.prototype._moveToNext,\n        ],\n        [\n          [\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"],\n          ColorPicker.prototype._moveToPrevious,\n        ],\n        [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning],\n        [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd],\n      ])\n    );\n  }\n\n  constructor({ editor = null, uiManager = null }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor =\n      editor?.color ||\n      this.#uiManager?.highlightColors.values().next().value ||\n      \"#FFFF98\";\n  }\n\n  renderButton() {\n    const button = (this.#button = document.createElement(\"button\"));\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    button.addEventListener(\"click\", this.#openDropdown.bind(this));\n    button.addEventListener(\"keydown\", this.#boundKeyDown);\n    const swatch = (this.#buttonSwatch = document.createElement(\"span\"));\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n\n  renderMainDropdown() {\n    const dropdown = (this.#dropdown = this.#getDropdownRoot());\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n\n    return dropdown;\n  }\n\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    div.addEventListener(\"contextmenu\", noContextMenu);\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", `pdfjs-editor-colorpicker-${name}`);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color));\n      div.append(button);\n    }\n\n    div.addEventListener(\"keydown\", this.#boundKeyDown);\n\n    return div;\n  }\n\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color,\n    });\n  }\n\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n\n  _moveToPrevious(event) {\n    if (\n      event.target === this.#dropdown?.firstChild ||\n      event.target === this.#button\n    ) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    window.addEventListener(\"pointerdown\", this.#boundPointerDown);\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = (this.#dropdown = this.#getDropdownRoot());\n    this.#button.append(root);\n  }\n\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    window.removeEventListener(\"pointerdown\", this.#boundPointerDown);\n  }\n\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      // The user pressed Escape with no dropdown visible, so we must\n      // unselect it.\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard,\n    });\n  }\n\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\nexport { ColorPicker };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass AltText {\n  #altText = \"\";\n\n  #altTextDecorative = false;\n\n  #altTextButton = null;\n\n  #altTextTooltip = null;\n\n  #altTextTooltipTimeout = null;\n\n  #altTextWasFromKeyBoard = false;\n\n  #editor = null;\n\n  static _l10nPromise = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n  }\n\n  static initialize(l10nPromise) {\n    AltText._l10nPromise ||= l10nPromise;\n  }\n\n  async render() {\n    const altText = (this.#altTextButton = document.createElement(\"button\"));\n    altText.className = \"altText\";\n    const msg = await AltText._l10nPromise.get(\n      \"pdfjs-editor-alt-text-button-label\"\n    );\n    altText.textContent = msg;\n    altText.setAttribute(\"aria-label\", msg);\n    altText.tabIndex = \"0\";\n    altText.addEventListener(\"contextmenu\", noContextMenu);\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation());\n\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n    };\n    altText.addEventListener(\"click\", onClick, { capture: true });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    });\n    await this.#setState();\n\n    return altText;\n  }\n\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({ focusVisible: this.#altTextWasFromKeyBoard });\n    this.#altTextWasFromKeyBoard = false;\n  }\n\n  isEmpty() {\n    return !this.#altText && !this.#altTextDecorative;\n  }\n\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative,\n    };\n  }\n\n  /**\n   * Set the alt text data.\n   */\n  set data({ altText, decorative }) {\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    this.#altText = altText;\n    this.#altTextDecorative = decorative;\n    this.#setState();\n  }\n\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextTooltip = null;\n  }\n\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (!this.#altText && !this.#altTextDecorative) {\n      button.classList.remove(\"done\");\n      this.#altTextTooltip?.remove();\n      return;\n    }\n    button.classList.add(\"done\");\n\n    AltText._l10nPromise\n      .get(\"pdfjs-editor-alt-text-edit-button-label\")\n      .then(msg => {\n        button.setAttribute(\"aria-label\", msg);\n      });\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      const id = (tooltip.id = `alt-text-tooltip-${this.#editor.id}`);\n      button.setAttribute(\"aria-describedby\", id);\n\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\",\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      });\n    }\n    tooltip.innerText = this.#altTextDecorative\n      ? await AltText._l10nPromise.get(\n          \"pdfjs-editor-alt-text-decorative-tooltip\"\n        )\n      : this.#altText;\n\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n\n    const element = this.#editor.getImageForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\nexport { AltText };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  KeyboardManager,\n} from \"./tools.js\";\nimport { FeatureTest, shadow, unreachable } from \"../../shared/util.js\";\nimport { AltText } from \"./alt_text.js\";\nimport { EditorToolbar } from \"./toolbar.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\n/**\n * @typedef {Object} AnnotationEditorParameters\n * @property {AnnotationEditorUIManager} uiManager - the global manager\n * @property {AnnotationEditorLayer} parent - the layer containing this editor\n * @property {string} id - editor id\n * @property {number} x - x-coordinate\n * @property {number} y - y-coordinate\n */\n\n/**\n * Base class for editors.\n */\nclass AnnotationEditor {\n  #allResizerDivs = null;\n\n  #altText = null;\n\n  #disabled = false;\n\n  #keepAspectRatio = false;\n\n  #resizersDiv = null;\n\n  #savedDimensions = null;\n\n  #boundFocusin = this.focusin.bind(this);\n\n  #boundFocusout = this.focusout.bind(this);\n\n  #editToolbar = null;\n\n  #focusedResizerName = \"\";\n\n  #hasBeenClicked = false;\n\n  #initialPosition = null;\n\n  #isEditing = false;\n\n  #isInEditMode = false;\n\n  #isResizerEnabledForKeyboard = false;\n\n  #moveInDOMTimeout = null;\n\n  #prevDragX = 0;\n\n  #prevDragY = 0;\n\n  #telemetryTimeouts = null;\n\n  _initialOptions = Object.create(null);\n\n  _isVisible = true;\n\n  _uiManager = null;\n\n  _focusEventsAllowed = true;\n\n  _l10nPromise = null;\n\n  #isDraggable = false;\n\n  #zIndex = AnnotationEditor._zIndex++;\n\n  static _borderLineWidth = -1;\n\n  static _colorManager = new ColorManager();\n\n  static _zIndex = 1;\n\n  // Time to wait (in ms) before sending the telemetry data.\n  // We wait a bit to avoid sending too many requests when changing something\n  // like the thickness of a line.\n  static _telemetryTimeout = 1000;\n\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_resizerKeyboardManager\",\n      new KeyboardManager([\n        [[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, { args: [-small, 0] }],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          resize,\n          { args: [-big, 0] },\n        ],\n        [[\"ArrowRight\", \"mac+ArrowRight\"], resize, { args: [small, 0] }],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          resize,\n          { args: [big, 0] },\n        ],\n        [[\"ArrowUp\", \"mac+ArrowUp\"], resize, { args: [0, -small] }],\n        [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, { args: [0, -big] }],\n        [[\"ArrowDown\", \"mac+ArrowDown\"], resize, { args: [0, small] }],\n        [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, { args: [0, big] }],\n        [\n          [\"Escape\", \"mac+Escape\"],\n          AnnotationEditor.prototype._stopResizingWithKeyboard,\n        ],\n      ])\n    );\n  }\n\n  /**\n   * @param {AnnotationEditorParameters} parameters\n   */\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      unreachable(\"Cannot initialize AnnotationEditor.\");\n    }\n\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n\n    const {\n      rotation,\n      rawDims: { pageWidth, pageHeight, pageX, pageY },\n    } = this.parent.viewport;\n\n    this.rotation = rotation;\n    this.pageRotation =\n      (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n\n  static get _defaultLineColor() {\n    return shadow(\n      this,\n      \"_defaultLineColor\",\n      this._colorManager.getHexCode(\"CanvasText\")\n    );\n  }\n\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager,\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n\n  /**\n   * Initialize the l10n stuff for this type of editor.\n   * @param {Object} l10n\n   */\n  static initialize(l10n, _uiManager, options) {\n    AnnotationEditor._l10nPromise ||= new Map(\n      [\n        \"pdfjs-editor-alt-text-button-label\",\n        \"pdfjs-editor-alt-text-edit-button-label\",\n        \"pdfjs-editor-alt-text-decorative-tooltip\",\n        \"pdfjs-editor-resizer-label-topLeft\",\n        \"pdfjs-editor-resizer-label-topMiddle\",\n        \"pdfjs-editor-resizer-label-topRight\",\n        \"pdfjs-editor-resizer-label-middleRight\",\n        \"pdfjs-editor-resizer-label-bottomRight\",\n        \"pdfjs-editor-resizer-label-bottomMiddle\",\n        \"pdfjs-editor-resizer-label-bottomLeft\",\n        \"pdfjs-editor-resizer-label-middleLeft\",\n      ].map(str => [\n        str,\n        l10n.get(str.replaceAll(/([A-Z])/g, c => `-${c.toLowerCase()}`)),\n      ])\n    );\n    if (options?.strings) {\n      for (const str of options.strings) {\n        AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n      }\n    }\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth =\n      parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n\n  /**\n   * Update the default parameters for this type of editor.\n   * @param {number} _type\n   * @param {*} _value\n   */\n  static updateDefaultParams(_type, _value) {}\n\n  /**\n   * Get the default properties to set in the UI for this type of editor.\n   * @returns {Array}\n   */\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n\n  /**\n   * Check if this kind of editor is able to handle the given mime type for\n   * pasting.\n   * @param {string} mime\n   * @returns {boolean}\n   */\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n\n  /**\n   * Extract the data from the clipboard item and delegate the creation of the\n   * editor to the parent.\n   * @param {DataTransferItem} item\n   * @param {AnnotationEditorLayer} parent\n   */\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n\n  /**\n   * Get the properties to update in the UI for this editor.\n   * @returns {Array}\n   */\n  get propertiesToUpdate() {\n    return [];\n  }\n\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n\n  /**\n   * @returns {boolean} true if the editor handles the Enter key itself.\n   */\n  get isEnterHandled() {\n    return true;\n  }\n\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= (this.height * pageHeight) / (pageWidth * 2);\n        this.y += (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += (this.height * pageHeight) / (pageWidth * 2);\n        this.y -= (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n\n  /**\n   * This editor will be behind the others.\n   */\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n\n  /**\n   * This editor will be in the foreground.\n   */\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      // The editor is being removed from the DOM, so we need to stop resizing.\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n\n  /**\n   * onfocus callback.\n   */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n\n  /**\n   * onblur callback.\n   * @param {FocusEvent} event\n   */\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n\n    // In case of focusout, the relatedTarget is the element which\n    // is grabbing the focus.\n    // So if the related target is an element under the div for this\n    // editor, then the editor isn't unactive.\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n\n  /**\n   * Commit the data contained in this editor.\n   */\n  commit() {\n    this.addToAnnotationStorage();\n  }\n\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n\n  /**\n   * Set the editor position within its parent.\n   * @param {number} x\n   * @param {number} y\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   */\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n\n    this.fixAndSetPosition();\n  }\n\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n\n    this.x += x / width;\n    this.y += y / height;\n\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Translate the editor position within its parent.\n   * @param {number} x - x-translation in screen coordinates.\n   * @param {number} y - y-translation in screen coordinates.\n   */\n  translate(x, y) {\n    // We don't change the initial position because the move here hasn't been\n    // done by the user.\n    this.#translate(this.parentDimensions, x, y);\n  }\n\n  /**\n   * Translate the editor position within its page and adjust the scroll\n   * in order to have the editor in the view.\n   * @param {number} x - x-translation in page coordinates.\n   * @param {number} y - y-translation in page coordinates.\n   */\n  translateInPage(x, y) {\n    this.#initialPosition ||= [this.x, this.y];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({ block: \"nearest\" });\n  }\n\n  drag(tx, ty) {\n    this.#initialPosition ||= [this.x, this.y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      // It's possible to not have a parent: for example, when the user is\n      // dragging all the selected editors but this one on a page which has been\n      // destroyed.\n      // It's why we need to check for it. In such a situation, it isn't really\n      // a problem to not find a new parent: it's something which is related to\n      // what the user is seeing, hence it depends on how pages are layed out.\n\n      // The element will be outside of its parent so change the parent.\n      const { x, y } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n\n    // The editor can be moved wherever the user wants, so we don't need to fix\n    // the position: it'll be done when the user will release the mouse button.\n\n    let { x, y } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n\n    this.div.style.left = `${(100 * x).toFixed(2)}%`;\n    this.div.style.top = `${(100 * y).toFixed(2)}%`;\n    this.div.scrollIntoView({ block: \"nearest\" });\n  }\n\n  get _hasBeenMoved() {\n    return (\n      !!this.#initialPosition &&\n      (this.#initialPosition[0] !== this.x ||\n        this.#initialPosition[1] !== this.y)\n    );\n  }\n\n  /**\n   * Get the translation to take into account the editor border.\n   * The CSS engine positions the element by taking the border into account so\n   * we must apply the opposite translation to have the editor in the right\n   * position.\n   * @returns {Array<number>}\n   */\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const { _borderLineWidth } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n\n  /**\n   * @returns {boolean} true if position must be fixed (i.e. make the x and y\n   * living in the page).\n   */\n  get _mustFixPosition() {\n    return true;\n  }\n\n  /**\n   * Fix the position of the editor in order to keep it inside its parent page.\n   * @param {number} [rotation] - the rotation of the page.\n   */\n  fixAndSetPosition(rotation = this.rotation) {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    let { x, y, width, height } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = Math.max(0, Math.min(pageWidth - width, x));\n          y = Math.max(0, Math.min(pageHeight - height, y));\n          break;\n        case 90:\n          x = Math.max(0, Math.min(pageWidth - height, x));\n          y = Math.min(pageHeight, Math.max(width, y));\n          break;\n        case 180:\n          x = Math.min(pageWidth, Math.max(width, x));\n          y = Math.min(pageHeight, Math.max(height, y));\n          break;\n        case 270:\n          x = Math.min(pageWidth, Math.max(height, x));\n          y = Math.max(0, Math.min(pageHeight - width, y));\n          break;\n      }\n    }\n\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n\n    const { style } = this.div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n\n    this.moveInDOM();\n  }\n\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n\n  /**\n   * Convert a screen translation into a page one.\n   * @param {number} x\n   * @param {number} y\n   */\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n\n  /**\n   * Convert a page translation into a screen one.\n   * @param {number} x\n   * @param {number} y\n   */\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n      }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n      }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight],\n    } = this;\n    const scaledWidth = pageWidth * parentScale;\n    const scaledHeight = pageHeight * parentScale;\n    return FeatureTest.isCSSRoundSupported\n      ? [Math.round(scaledWidth), Math.round(scaledHeight)]\n      : [scaledWidth, scaledHeight];\n  }\n\n  /**\n   * Set the dimensions of this editor.\n   * @param {number} width\n   * @param {number} height\n   */\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${((100 * width) / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      this.div.style.height = `${((100 * height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n\n  fixDims() {\n    const { style } = this.div;\n    const { height, width } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${((100 * parseFloat(width)) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${((100 * parseFloat(height)) / parentHeight).toFixed(\n        2\n      )}%`;\n    }\n  }\n\n  /**\n   * Get the translation used to position this editor when it's created.\n   * @returns {Array<number>}\n   */\n  getInitialTranslation() {\n    return [0, 0];\n  }\n\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    // When the resizers are used with the keyboard, they're focusable, hence\n    // we want to have them in this order (top left, top middle, top right, ...)\n    // in the DOM to have the focus order correct.\n    const classes = this._willKeepAspectRatio\n      ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"]\n      : [\n          \"topLeft\",\n          \"topMiddle\",\n          \"topRight\",\n          \"middleRight\",\n          \"bottomRight\",\n          \"bottomMiddle\",\n          \"bottomLeft\",\n          \"middleLeft\",\n        ];\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\n        \"pointerdown\",\n        this.#resizerPointerdown.bind(this, name)\n      );\n      div.addEventListener(\"contextmenu\", noContextMenu);\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n\n    this.#altText?.toggle(false);\n\n    const boundResizerPointermove = this.#resizerPointermove.bind(this, name);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    const pointerMoveOptions = { passive: true, capture: true };\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\n      \"pointermove\",\n      boundResizerPointermove,\n      pointerMoveOptions\n    );\n    window.addEventListener(\"contextmenu\", noContextMenu);\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor =\n      window.getComputedStyle(event.target).cursor;\n\n    const pointerUpCallback = () => {\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\n        \"pointermove\",\n        boundResizerPointermove,\n        pointerMoveOptions\n      );\n      window.removeEventListener(\"contextmenu\", noContextMenu);\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    // If the user switches to another window (with alt+tab), then we end the\n    // resize session.\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n\n  #addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight) {\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (\n      newX === savedX &&\n      newY === savedY &&\n      newWidth === savedWidth &&\n      newHeight === savedHeight\n    ) {\n      return;\n    }\n\n    this.addCommands({\n      cmd: () => {\n        this.width = newWidth;\n        this.height = newHeight;\n        this.x = newX;\n        this.y = newY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n        this.fixAndSetPosition();\n      },\n      undo: () => {\n        this.width = savedWidth;\n        this.height = savedHeight;\n        this.x = savedX;\n        this.y = savedY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n        this.fixAndSetPosition();\n      },\n      mustExec: true,\n    });\n  }\n\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n\n    // 10000 because we multiply by 100 and use toFixed(2) in fixAndSetPosition.\n    // Without rounding, the positions of the corners other than the top left\n    // one can be slightly wrong.\n    const round = x => Math.round(x * 10000) / 10000;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [\n      rotationMatrix[0] * x + rotationMatrix[2] * y,\n      rotationMatrix[1] * x + rotationMatrix[3] * y,\n    ];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [\n      invRotationMatrix[0] * x + invRotationMatrix[2] * y,\n      invRotationMatrix[1] * x + invRotationMatrix[3] * y,\n    ];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = round(savedX + transfOppositePoint[0]);\n    const oppositeY = round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n\n    let [deltaX, deltaY] = this.screenToPageTranslation(\n      event.movementX,\n      event.movementY\n    );\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(\n        Math.min(\n          Math.hypot(\n            oppositePoint[0] - point[0] - deltaX,\n            oppositePoint[1] - point[1] - deltaY\n          ) / oldDiag,\n          // Avoid the editor to be larger than the page.\n          1 / savedWidth,\n          1 / savedHeight\n        ),\n        // Avoid the editor to be smaller than the minimum size.\n        minWidth / savedWidth,\n        minHeight / savedHeight\n      );\n    } else if (isHorizontal) {\n      ratioX =\n        Math.max(\n          minWidth,\n          Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))\n        ) / savedWidth;\n    } else {\n      ratioY =\n        Math.max(\n          minHeight,\n          Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))\n        ) / savedHeight;\n    }\n\n    const newWidth = round(savedWidth * ratioX);\n    const newHeight = round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n  }\n\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n\n  /**\n   * Add a toolbar for this editor.\n   * @returns {Promise<EditorToolbar|null>}\n   */\n  async addEditToolbar() {\n    if (this.#editToolbar || this.#isInEditMode) {\n      return this.#editToolbar;\n    }\n    this.#editToolbar = new EditorToolbar(this);\n    this.div.append(this.#editToolbar.render());\n    if (this.#altText) {\n      this.#editToolbar.addAltTextButton(await this.#altText.render());\n    }\n\n    return this.#editToolbar;\n  }\n\n  removeEditToolbar() {\n    if (!this.#editToolbar) {\n      return;\n    }\n    this.#editToolbar.remove();\n    this.#editToolbar = null;\n\n    // We destroy the alt text but we don't null it because we want to be able\n    // to restore it in case the user undoes the deletion.\n    this.#altText?.destroy();\n  }\n\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10nPromise);\n    this.#altText = new AltText(this);\n    await this.addEditToolbar();\n  }\n\n  get altTextData() {\n    return this.#altText?.data;\n  }\n\n  /**\n   * Set the alt text data.\n   */\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n\n  hasAltText() {\n    return !this.#altText?.isEmpty();\n  }\n\n  /**\n   * Render this editor in a div.\n   * @returns {HTMLDivElement | null}\n   */\n  render() {\n    this.div = document.createElement(\"div\");\n    this.div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute(\"id\", this.id);\n    this.div.tabIndex = this.#disabled ? -1 : 0;\n    if (!this._isVisible) {\n      this.div.classList.add(\"hidden\");\n    }\n\n    this.setInForeground();\n\n    this.div.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div.addEventListener(\"focusout\", this.#boundFocusout);\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      this.div.style.maxWidth = `${((100 * parentHeight) / parentWidth).toFixed(\n        2\n      )}%`;\n      this.div.style.maxHeight = `${(\n        (100 * parentWidth) /\n        parentHeight\n      ).toFixed(2)}%`;\n    }\n\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n\n    bindEvents(this, this.div, [\"pointerdown\"]);\n\n    return this.div;\n  }\n\n  /**\n   * Onpointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Avoid to focus this editor because of a non-left click.\n      event.preventDefault();\n      return;\n    }\n\n    this.#hasBeenClicked = true;\n\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n\n    this.#selectOnPointerEvent(event);\n  }\n\n  #selectOnPointerEvent(event) {\n    const { isMac } = FeatureTest.platform;\n    if (\n      (event.ctrlKey && !isMac) ||\n      event.shiftKey ||\n      (event.metaKey && isMac)\n    ) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n\n  #setUpDragSession(event) {\n    const isSelected = this._uiManager.isSelected(this);\n    this._uiManager.setUpDragSession();\n\n    let pointerMoveOptions, pointerMoveCallback;\n    if (isSelected) {\n      this.div.classList.add(\"moving\");\n      pointerMoveOptions = { passive: true, capture: true };\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      pointerMoveCallback = e => {\n        const { clientX: x, clientY: y } = e;\n        const [tx, ty] = this.screenToPageTranslation(\n          x - this.#prevDragX,\n          y - this.#prevDragY\n        );\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      };\n      window.addEventListener(\n        \"pointermove\",\n        pointerMoveCallback,\n        pointerMoveOptions\n      );\n    }\n\n    const pointerUpCallback = () => {\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      if (isSelected) {\n        this.div.classList.remove(\"moving\");\n        window.removeEventListener(\n          \"pointermove\",\n          pointerMoveCallback,\n          pointerMoveOptions\n        );\n      }\n\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(event);\n      }\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    // If the user is using alt+tab during the dragging session, the pointerup\n    // event could be not fired, but a blur event is fired so we can use it in\n    // order to interrupt the dragging session.\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n\n  moveInDOM() {\n    // Moving the editor in the DOM can be expensive, so we wait a bit before.\n    // It's important to not block the UI (for example when changing the font\n    // size in a FreeText).\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Convert the current rect into a page one.\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   * @param {number} [rotation] - the rotation of the page.\n   */\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n\n    switch (rotation) {\n      case 0:\n        return [\n          x + shiftX + pageX,\n          pageHeight - y - shiftY - height + pageY,\n          x + shiftX + width + pageX,\n          pageHeight - y - shiftY + pageY,\n        ];\n      case 90:\n        return [\n          x + shiftY + pageX,\n          pageHeight - y + shiftX + pageY,\n          x + shiftY + height + pageX,\n          pageHeight - y + shiftX + width + pageY,\n        ];\n      case 180:\n        return [\n          x - shiftX - width + pageX,\n          pageHeight - y + shiftY + pageY,\n          x - shiftX + pageX,\n          pageHeight - y + shiftY + height + pageY,\n        ];\n      case 270:\n        return [\n          x - shiftY - height + pageX,\n          pageHeight - y - shiftX - width + pageY,\n          x - shiftY + pageX,\n          pageHeight - y - shiftX + pageY,\n        ];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n\n    const width = x2 - x1;\n    const height = y2 - y1;\n\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  /**\n   * Executed once this editor has been rendered.\n   */\n  onceAdded() {}\n\n  /**\n   * Check if the editor contains something.\n   * @returns {boolean}\n   */\n  isEmpty() {\n    return false;\n  }\n\n  /**\n   * Enable edit mode.\n   */\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n\n  /**\n   * Disable edit mode.\n   */\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n\n  /**\n   * Check if the editor is edited.\n   * @returns {boolean}\n   */\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n\n  /**\n   * If it returns true, then this editor handles the keyboard\n   * events itself.\n   * @returns {boolean}\n   */\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n\n  /**\n   * Check if this editor needs to be rebuilt or not.\n   * @returns {boolean}\n   */\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n\n  /**\n   * Rebuild the editor in case it has been removed on undo.\n   *\n   * To implement in subclasses.\n   */\n  rebuild() {\n    this.div?.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div?.addEventListener(\"focusout\", this.#boundFocusout);\n  }\n\n  /**\n   * Rotate the editor.\n   * @param {number} angle\n   */\n  rotate(_angle) {}\n\n  /**\n   * Serialize the editor.\n   * The result of the serialization will be used to construct a\n   * new annotation to add to the pdf document.\n   *\n   * To implement in subclasses.\n   * @param {boolean} [isForCopying]\n   * @param {Object | null} [context]\n   * @returns {Object | null}\n   */\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n\n  /**\n   * Deserialize the editor.\n   * The result of the deserialization is a new editor.\n   *\n   * @param {Object} data\n   * @param {AnnotationEditorLayer} parent\n   * @param {AnnotationEditorUIManager} uiManager\n   * @returns {AnnotationEditor | null}\n   */\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n    });\n    editor.rotation = data.rotation;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(\n      data.rect,\n      pageHeight\n    );\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n\n    return editor;\n  }\n\n  /**\n   * Check if an existing annotation associated with this editor has been\n   * modified.\n   * @returns {boolean}\n   */\n  get hasBeenModified() {\n    return (\n      !!this.annotationElementId && (this.deleted || this.serialize() !== null)\n    );\n  }\n\n  /**\n   * Remove this editor.\n   * It's used on ctrl+backspace action.\n   */\n  remove() {\n    this.div.removeEventListener(\"focusin\", this.#boundFocusin);\n    this.div.removeEventListener(\"focusout\", this.#boundFocusout);\n\n    if (!this.isEmpty()) {\n      // The editor is removed but it can be back at some point thanks to\n      // undo/redo so we must commit it before.\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n  }\n\n  /**\n   * @returns {boolean} true if this editor can be resized.\n   */\n  get isResizable() {\n    return false;\n  }\n\n  /**\n   * Add the resizers to this editor.\n   */\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n      bindEvents(this, this.div, [\"keydown\"]);\n    }\n  }\n\n  get toolbarPosition() {\n    return null;\n  }\n\n  /**\n   * onkeydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (\n      !this.isResizable ||\n      event.target !== this.div ||\n      event.key !== \"Enter\"\n    ) {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height,\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown);\n        div.addEventListener(\"blur\", boundResizerBlur);\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name));\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then(msg => div.setAttribute(\"aria-label\", msg));\n      }\n    }\n\n    // We want to have the resizers in the visual order, so we move the first\n    // (top-left) to the right place.\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition =\n      (((360 - this.rotation + this.parentRotation) % 360) / 90) *\n      (this.#allResizerDivs.length / 4);\n\n    if (nextFirstPosition !== firstPosition) {\n      // We need to reorder the resizers in the DOM in order to have the focus\n      // on the top-left one.\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then(msg => child.setAttribute(\"aria-label\", msg));\n      }\n    }\n\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({ focusVisible: true });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n\n  #resizerBlur(event) {\n    if (\n      this.#isResizerEnabledForKeyboard &&\n      event.relatedTarget?.parentNode !== this.#resizersDiv\n    ) {\n      this.#stopResizing();\n    }\n  }\n\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      movementX: x,\n      movementY: y,\n    });\n  }\n\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    if (this.#savedDimensions) {\n      const { savedX, savedY, savedWidth, savedHeight } = this.#savedDimensions;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n      this.#savedDimensions = null;\n    }\n  }\n\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n\n  /**\n   * Select this editor.\n   */\n  select() {\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this.#editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          // The editor can have been unselected while we were waiting for the\n          // edit toolbar to be created, hence we want to be sure that this\n          // editor is still selected.\n          this.#editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this.#editToolbar?.show();\n  }\n\n  /**\n   * Unselect this editor.\n   */\n  unselect() {\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      // Don't use this.div.blur() because we don't know where the focus will\n      // go.\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true,\n      });\n    }\n    this.#editToolbar?.hide();\n  }\n\n  /**\n   * Update some parameters which have been changed through the UI.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {}\n\n  /**\n   * When the user disables the editing mode some editors can change some of\n   * their properties.\n   */\n  disableEditing() {}\n\n  /**\n   * When the user enables the editing mode some editors can change some of\n   * their properties.\n   */\n  enableEditing() {}\n\n  /**\n   * The editor is about to be edited.\n   */\n  enterInEditMode() {}\n\n  /**\n   * @returns {HTMLElement | null} the element requiring an alt text.\n   */\n  getImageForAltText() {\n    return null;\n  }\n\n  /**\n   * Get the div which really contains the displayed content.\n   * @returns {HTMLDivElement | undefined}\n   */\n  get contentDiv() {\n    return this.div;\n  }\n\n  /**\n   * If true then the editor is currently edited.\n   * @type {boolean}\n   */\n  get isEditing() {\n    return this.#isEditing;\n  }\n\n  /**\n   * When set to true, it means that this editor is currently edited.\n   * @param {boolean} value\n   */\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n\n  /**\n   * Set the aspect ratio to use when resizing.\n   * @param {number} width\n   * @param {number} height\n   */\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const { style } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n\n  static get MIN_SIZE() {\n    return 16;\n  }\n\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n\n  /**\n   * Get the data to report to the telemetry when the editor is added.\n   * @returns {Object}\n   */\n  get telemetryInitialData() {\n    return { action: \"added\" };\n  }\n\n  /**\n   * The telemetry data to use when saving/printing.\n   * @returns {Object|null}\n   */\n  get telemetryFinalData() {\n    return null;\n  }\n\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const { action } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data,\n      },\n    });\n  }\n\n  /**\n   * Show or hide this editor.\n   * @param {boolean|undefined} visible\n   */\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n\n  /**\n   * Render an annotation in the annotation layer.\n   * @param {Object} annotation\n   * @returns {HTMLElement}\n   */\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n\n    return content;\n  }\n\n  resetAnnotationElement(annotation) {\n    const { firstChild } = annotation.container;\n    if (\n      firstChild.nodeName === \"DIV\" &&\n      firstChild.classList.contains(\"annotationContent\")\n    ) {\n      firstChild.remove();\n    }\n  }\n}\n\n// This class is used to fake an editor which has been deleted.\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n\n  serialize() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n    };\n  }\n}\n\nexport { AnnotationEditor };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Util } from \"../../shared/util.js\";\n\nclass Outliner {\n  #box;\n\n  #verticalEdges = [];\n\n  #intervals = [];\n\n  /**\n   * Construct an outliner.\n   * @param {Array<Object>} boxes - An array of axis-aligned rectangles.\n   * @param {number} borderWidth - The width of the border of the boxes, it\n   *   allows to make the boxes bigger (or smaller).\n   * @param {number} innerMargin - The margin between the boxes and the\n   *   outlines. It's important to not have a null innerMargin when we want to\n   *   draw the outline else the stroked outline could be clipped because of its\n   *   width.\n   * @param {boolean} isLTR - true if we're in LTR mode. It's used to determine\n   *   the last point of the boxes.\n   */\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n\n    // We round the coordinates to slightly reduce the number of edges in the\n    // final outlines.\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n\n    // The coordinates of the boxes are in the page coordinate system.\n    for (const { x, y, width, height } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n\n      minX = Math.min(minX, x1);\n      maxX = Math.max(maxX, x2);\n      minY = Math.min(minY, y1);\n      maxY = Math.max(maxY, y2);\n    }\n\n    const bboxWidth = maxX - minX + 2 * innerMargin;\n    const bboxHeight = maxY - minY + 2 * innerMargin;\n    const shiftedMinX = minX - innerMargin;\n    const shiftedMinY = minY - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n\n    // Convert the coordinates of the edges into box coordinates.\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n\n    this.#box = {\n      x: shiftedMinX,\n      y: shiftedMinY,\n      width: bboxWidth,\n      height: bboxHeight,\n      lastPoint,\n    };\n  }\n\n  getOutlines() {\n    // We begin to sort lexicographically the vertical edges by their abscissa,\n    // and then by their ordinate.\n    this.#verticalEdges.sort(\n      (a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]\n    );\n\n    // We're now using a sweep line algorithm to find the outlines.\n    // We start with the leftmost vertical edge, and we're going to iterate\n    // over all the vertical edges from left to right.\n    // Each time we encounter a left edge, we're going to insert the interval\n    // [y1, y2] in the set of intervals.\n    // This set of intervals is used to break the vertical edges into chunks:\n    // we only take the part of the vertical edge that isn't in the union of\n    // the intervals.\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        // Left edge.\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        // Right edge.\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n\n    // We sort lexicographically the vertices of each edge by their ordinate and\n    // by their abscissa.\n    // Every pair (v_2i, v_{2i + 1}) of vertices defines a horizontal edge.\n    // So for every vertical edge, we're going to add the two vertical edges\n    // which are connected to it through a horizontal edge.\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n\n      outline = [x, y2];\n      outlines.push(outline);\n\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box);\n  }\n\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n\n    while (start <= end) {\n      const middle = (start + end) >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          // There is no intersection between the interval and the edge, hence\n          // we keep it as is.\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            // The edge is included in the interval, hence we remove it.\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\n\nclass Outline {\n  /**\n   * @returns {string} The SVG path of the outline.\n   */\n  toSVGPath() {\n    throw new Error(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n\n  /**\n   * @type {Object|null} The bounding box of the outline.\n   */\n  get box() {\n    throw new Error(\"Abstract getter `box` must be implemented.\");\n  }\n\n  serialize(_bbox, _rotation) {\n    throw new Error(\"Abstract method `serialize` must be implemented.\");\n  }\n\n  get free() {\n    return this instanceof FreeHighlightOutline;\n  }\n}\n\nclass HighlightOutline extends Outline {\n  #box;\n\n  #outlines;\n\n  constructor(outlines, box) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n  }\n\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n\n  /**\n   * Serialize the outlines into the PDF page coordinate system.\n   * @param {Array<number>} _bbox - the bounding box of the annotation.\n   * @param {number} _rotation - the rotation of the annotation.\n   * @returns {Array<Array<number>>}\n   */\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n\n  get box() {\n    return this.#box;\n  }\n}\n\nclass FreeOutliner {\n  #box;\n\n  #bottom = [];\n\n  #innerMargin;\n\n  #isLTR;\n\n  #top = [];\n\n  // The first 6 elements are the last 3 points of the top part of the outline.\n  // The next 6 elements are the last 3 points of the line.\n  // The next 6 elements are the last 3 points of the bottom part of the\n  // outline.\n  // We track the last 3 points in order to be able to:\n  //  - compute the normal of the line,\n  //  - compute the control points of the quadratic Bézier curve.\n  #last = new Float64Array(18);\n\n  #lastX;\n\n  #lastY;\n\n  #min;\n\n  #min_dist;\n\n  #scaleFactor;\n\n  #thickness;\n\n  #points = [];\n\n  static #MIN_DIST = 8;\n\n  static #MIN_DIFF = 2;\n\n  static #MIN = FreeOutliner.#MIN_DIST + FreeOutliner.#MIN_DIFF;\n\n  constructor({ x, y }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n\n  get free() {\n    return true;\n  }\n\n  isEmpty() {\n    // When we add a second point then this.#last.slice(6) will be something\n    // like [NaN, NaN, firstX, firstY, secondX, secondY,...] so having a NaN\n    // at index 8 means that we've only one point.\n    return isNaN(this.#last[8]);\n  }\n\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n\n    return [\n      (this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width,\n      (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height,\n      (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width,\n      (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height,\n    ];\n  }\n\n  add({ x, y }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      // The idea is to avoid garbage points around the last point.\n      // When the points are too close, it just leads to bad normal vectors and\n      // control points.\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n\n    // We update the last 3 points of the line.\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n\n    // We keep track of the points in order to be able to compute the focus\n    // outline.\n    this.#points?.push(x, y);\n\n    // Create the normal unit vector.\n    // |(shiftX, shiftY)| = |K| * |(diffX, diffY)| = |K| * d = diffD.\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 + thX - layerX) / layerWidth,\n          (y1 + thY - layerY) / layerHeight\n        );\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 - thX - layerX) / layerWidth,\n          (y1 - thY - layerY) / layerHeight\n        );\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n\n    const angle = Math.abs(\n      Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX)\n    );\n    if (angle < Math.PI / 2) {\n      // In order to avoid some possible artifacts, we're going to use the a\n      // straight line instead of a quadratic Bézier curve.\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x1 + x2) / 2 - layerX) / layerWidth,\n        ((y1 + y2) / 2 - layerY) / layerHeight\n      );\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x0 + x1) / 2 - layerX) / layerWidth,\n        ((y0 + y1) / 2 - layerY) / layerHeight\n      );\n      return true;\n    }\n\n    // Control points and the final point for the quadratic Bézier curve.\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight\n    );\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight\n    );\n    return true;\n  }\n\n  toSVGPath() {\n    if (this.isEmpty()) {\n      // We've only one point.\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] =\n      this.#getLastCoords();\n\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      // We've only two points.\n      return `M${(this.#last[2] - x) / width} ${\n        (this.#last[3] - y) / height\n      } L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${\n        (this.#last[16] - x) / width\n      } ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${\n        (this.#last[15] - y) / height\n      } Z`;\n    }\n\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${\n            top[i + 5]\n          }`\n        );\n      }\n    }\n\n    buffer.push(\n      `L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${\n        (lastBottom[0] - x) / width\n      } ${(lastBottom[1] - y) / height}`\n    );\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${\n            bottom[i + 4]\n          } ${bottom[i + 5]}`\n        );\n      }\n    }\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n\n    return buffer.join(\" \");\n  }\n\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const lastTop = last.subarray(4, 6);\n    const lastBottom = last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n\n    const points = new Float64Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] =\n      this.#getLastCoords();\n\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      // We've only two points.\n      const outline = new Float64Array(36);\n      outline.set(\n        [\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[2] - layerX) / layerWidth,\n          (last[3] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[4] - layerX) / layerWidth,\n          (last[5] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          lastTopX,\n          lastTopY,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          lastBottomX,\n          lastBottomY,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[16] - layerX) / layerWidth,\n          (last[17] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[14] - layerX) / layerWidth,\n          (last[15] - layerY) / layerHeight,\n        ],\n        0\n      );\n      return new FreeHighlightOutline(\n        outline,\n        points,\n        this.#box,\n        this.#scaleFactor,\n        this.#innerMargin,\n        this.#isLTR\n      );\n    }\n\n    const outline = new Float64Array(\n      this.#top.length + 24 + this.#bottom.length\n    );\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n\n    outline.set(\n      [\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastTop[0] - layerX) / layerWidth,\n        (lastTop[1] - layerY) / layerHeight,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastTopX,\n        lastTopY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastBottomX,\n        lastBottomY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastBottom[0] - layerX) / layerWidth,\n        (lastBottom[1] - layerY) / layerHeight,\n      ],\n      N\n    );\n    N += 24;\n\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], N);\n    return new FreeHighlightOutline(\n      outline,\n      points,\n      this.#box,\n      this.#scaleFactor,\n      this.#innerMargin,\n      this.#isLTR\n    );\n  }\n}\n\nclass FreeHighlightOutline extends Outline {\n  #box;\n\n  #bbox = null;\n\n  #innerMargin;\n\n  #isLTR;\n\n  #points;\n\n  #scaleFactor;\n\n  #outline;\n\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.#computeMinMax(isLTR);\n\n    const { x, y, width, height } = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(\n        `C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${\n          this.#outline[i + 3]\n        } ${this.#outline[i + 4]} ${this.#outline[i + 5]}`\n      );\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = this.#rescale(this.#outline, blX, trY, width, -height);\n        points = this.#rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = this.#rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = this.#rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = this.#rescale(this.#outline, trX, blY, -width, height);\n        points = this.#rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = this.#rescaleAndSwap(\n          this.#outline,\n          trX,\n          trY,\n          -width,\n          -height\n        );\n        points = this.#rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return { outline: Array.from(outline), points: [Array.from(points)] };\n  }\n\n  #rescale(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n\n  #rescaleAndSwap(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    let minX = lastX;\n    let minY = lastY;\n    let maxX = lastX;\n    let maxY = lastY;\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      if (isNaN(outline[i])) {\n        minX = Math.min(minX, outline[i + 4]);\n        minY = Math.min(minY, outline[i + 5]);\n        maxX = Math.max(maxX, outline[i + 4]);\n        maxY = Math.max(maxY, outline[i + 5]);\n        if (lastPointY < outline[i + 5]) {\n          lastPointX = outline[i + 4];\n          lastPointY = outline[i + 5];\n        } else if (lastPointY === outline[i + 5]) {\n          lastPointX = ltrCallback(lastPointX, outline[i + 4]);\n        }\n      } else {\n        const bbox = Util.bezierBoundingBox(\n          lastX,\n          lastY,\n          ...outline.slice(i, i + 6)\n        );\n        minX = Math.min(minX, bbox[0]);\n        minY = Math.min(minY, bbox[1]);\n        maxX = Math.max(maxX, bbox[2]);\n        maxY = Math.max(maxY, bbox[3]);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = outline[i + 4];\n      lastY = outline[i + 5];\n    }\n\n    const x = minX - this.#innerMargin,\n      y = minY - this.#innerMargin,\n      width = maxX - minX + 2 * this.#innerMargin,\n      height = maxY - minY + 2 * this.#innerMargin;\n    this.#bbox = { x, y, width, height, lastPoint: [lastPointX, lastPointY] };\n  }\n\n  get box() {\n    return this.#bbox;\n  }\n\n  getNewOutline(thickness, innerMargin) {\n    // Build the outline of the highlight to use as the focus outline.\n    const { x, y, width, height } = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = new FreeOutliner(\n      {\n        x: this.#points[0] * sx + tx,\n        y: this.#points[1] * sy + ty,\n      },\n      this.#box,\n      this.#scaleFactor,\n      thickness,\n      this.#isLTR,\n      innerMargin ?? this.#innerMargin\n    );\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty,\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\nexport { FreeOutliner, Outliner };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass EditorToolbar {\n  #toolbar = null;\n\n  #colorPicker = null;\n\n  #editor;\n\n  #buttons = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n  }\n\n  render() {\n    const editToolbar = (this.#toolbar = document.createElement(\"div\"));\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu);\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown);\n\n    const buttons = (this.#buttons = document.createElement(\"div\"));\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const { style } = editToolbar;\n      const x =\n        this.#editor._uiManager.direction === \"ltr\"\n          ? 1 - position[0]\n          : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${\n        100 * position[1]\n      }% + var(--editor-toolbar-vert-offset))`;\n    }\n\n    this.#addDeleteButton();\n\n    return editToolbar;\n  }\n\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  #addListenersToElement(element) {\n    // If we're clicking on a button with the keyboard or with\n    // the mouse, we don't want to trigger any focus events on\n    // the editor.\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu);\n  }\n\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n  }\n\n  #addDeleteButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\n      \"data-l10n-id\",\n      `pdfjs-editor-remove-${this.#editor.editorType}-button`\n    );\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      this.#editor._uiManager.delete();\n    });\n    this.#buttons.append(button);\n  }\n\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n\n  addAltTextButton(button) {\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\n\nclass HighlightToolbar {\n  #buttons = null;\n\n  #toolbar = null;\n\n  #uiManager;\n\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n\n  #render() {\n    const editToolbar = (this.#toolbar = document.createElement(\"div\"));\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu);\n\n    const buttons = (this.#buttons = document.createElement(\"div\"));\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n\n    this.#addHighlightButton();\n\n    return editToolbar;\n  }\n\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const { style } = (this.#toolbar ||= this.#render());\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n\n  hide() {\n    this.#toolbar.remove();\n  }\n\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    button.addEventListener(\"contextmenu\", noContextMenu);\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    });\n    this.#buttons.append(button);\n  }\n}\n\nexport { EditorToolbar, HighlightToolbar };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./editor.js\").AnnotationEditor} AnnotationEditor */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  FeatureTest,\n  getUuid,\n  shadow,\n  Util,\n  warn,\n} from \"../../shared/util.js\";\nimport {\n  fetchData,\n  getColorValues,\n  getRGB,\n  PixelsPerInch,\n} from \"../display_utils.js\";\nimport { HighlightToolbar } from \"./toolbar.js\";\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\n\n/**\n * Convert a number between 0 and 100 into an hex number between 0 and 255.\n * @param {number} opacity\n * @return {string}\n */\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity)))\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\n/**\n * Class to create some unique ids for the different editors.\n */\nclass IdManager {\n  #id = 0;\n\n  constructor() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      Object.defineProperty(this, \"reset\", {\n        value: () => (this.#id = 0),\n      });\n    }\n  }\n\n  /**\n   * Get a unique id.\n   * @returns {string}\n   */\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\n\n/**\n * Class to manage the images used by the editors.\n * The main idea is to try to minimize the memory used by the images.\n * The images are cached and reused when possible\n * We use a refCounter to know when an image is not used anymore but we need to\n * be able to restore an image after a remove+undo, so we keep a file reference\n * or an url one.\n */\nclass ImageManager {\n  #baseId = getUuid();\n\n  #id = 0;\n\n  #cache = null;\n\n  static get _isSVGFittingCanvas() {\n    // By default, Firefox doesn't rescale without preserving the aspect ratio\n    // when drawing an SVG image on a canvas, see https://bugzilla.mozilla.org/1547776.\n    // The \"workaround\" is to append \"svgView(preserveAspectRatio(none))\" to the\n    // url, but according to comment #15, it seems that it leads to unexpected\n    // behavior in Safari.\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      // We already tried to load the image but it failed.\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false,\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else {\n        image = data.file = rawData;\n      }\n\n      if (image.type === \"image/svg+xml\") {\n        // Unfortunately, createImageBitmap doesn't work with SVG images.\n        // (see https://bugzilla.mozilla.org/1841972).\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = (data.svgUrl = fileReader.result);\n            // We need to set the preserveAspectRatio to none in order to let\n            // the image fits the canvas when resizing.\n            imageElement.src = (await mustRemoveAspectRatioPromise)\n              ? `${url}#svgView(preserveAspectRatio(none))`\n              : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      console.error(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n\n  async getFromFile(file) {\n    const { lastModified, name, size, type } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    return this.getFromUrl(data.url);\n  }\n\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    data.bitmap = null;\n  }\n\n  // We can use the id only if it belongs this manager.\n  // We must take care of having the right manager because we can copy/paste\n  // some images from other documents, hence it'd be a pity to use an id from an\n  // other manager.\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\n\n/**\n * Class to handle undo/redo.\n * Commands are just saved in a buffer.\n * If we hit some memory issues we could likely use a circular buffer.\n * It has to be used as a singleton.\n */\nclass CommandManager {\n  #commands = [];\n\n  #locked = false;\n\n  #maxSize;\n\n  #position = -1;\n\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n\n  /**\n   * @typedef {Object} addOptions\n   * @property {function} cmd\n   * @property {function} undo\n   * @property {function} [post]\n   * @property {boolean} mustExec\n   * @property {number} type\n   * @property {boolean} overwriteIfSameType\n   * @property {boolean} keepUndo\n   */\n\n  /**\n   * Add a new couple of commands to be used in case of redo/undo.\n   * @param {addOptions} options\n   */\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false,\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n\n    if (this.#locked) {\n      return;\n    }\n\n    const save = { cmd, undo, post, type };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        // All the commands have been undone and then a new one is added\n        // hence we clear the queue.\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      // For example when we change a color we don't want to\n      // be able to undo all the steps, hence we only want to\n      // keep the last undoable action in this sequence of actions.\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n\n    this.#commands.push(save);\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    if (this.#position === -1) {\n      // Nothing to undo.\n      return;\n    }\n\n    // Avoid to insert something during the undo execution.\n    this.#locked = true;\n    const { undo, post } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n\n    this.#position -= 1;\n  }\n\n  /**\n   * Redo the last command.\n   */\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n\n      // Avoid to insert something during the redo execution.\n      this.#locked = true;\n      const { cmd, post } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n\n  /**\n   * Check if there is something to undo.\n   * @returns {boolean}\n   */\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n\n  /**\n   * Check if there is something to redo.\n   * @returns {boolean}\n   */\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n\n  destroy() {\n    this.#commands = null;\n  }\n}\n\n/**\n * Class to handle the different keyboards shortcuts we can have on mac or\n * non-mac OSes.\n */\nclass KeyboardManager {\n  /**\n   * Create a new keyboard manager class.\n   * @param {Array<Array>} callbacks - an array containing an array of shortcuts\n   * and a callback to call.\n   * A shortcut is a string like `ctrl+c` or `mac+ctrl+c` for mac OS.\n   */\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n\n    const { isMac } = FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), { callback, options });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, { callback, options });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n\n  /**\n   * Serialize an event into a string in order to match a\n   * potential key for a callback.\n   * @param {KeyboardEvent} event\n   * @returns {string}\n   */\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n\n    return str;\n  }\n\n  /**\n   * Execute a callback, if any, for a given keyboard event.\n   * The self is used as `this` in the callback.\n   * @param {Object} self\n   * @param {KeyboardEvent} event\n   * @returns\n   */\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: { bubbles = false, args = [], checker = null },\n    } = info;\n\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n\n    // For example, ctrl+s in a FreeText must be handled by the viewer, hence\n    // the event must bubble.\n    if (!bubbles) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n}\n\nclass ColorManager {\n  static _colorsMapping = new Map([\n    [\"CanvasText\", [0, 0, 0]],\n    [\"Canvas\", [255, 255, 255]],\n  ]);\n\n  get _colors() {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"LIB\") &&\n      typeof document === \"undefined\"\n    ) {\n      return shadow(this, \"_colors\", ColorManager._colorsMapping);\n    }\n\n    const colors = new Map([\n      [\"CanvasText\", null],\n      [\"Canvas\", null],\n    ]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n\n  /**\n   * In High Contrast Mode, the color on the screen is not always the\n   * real color used in the pdf.\n   * For example in some cases white can appear to be black but when saving\n   * we want to have white.\n   * @param {string} color\n   * @returns {Array<number>}\n   */\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n\n  /**\n   * An input element must have its color value as a hex string\n   * and not as color name.\n   * So this function converts a name into an hex string.\n   * @param {string} name\n   * @returns {string}\n   */\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\n\n/**\n * A pdf has several pages and each of them when it will rendered\n * will have an AnnotationEditorLayer which will contain the some\n * new Annotations associated to an editor in order to modify them.\n *\n * This class is used to manage all the different layers, editors and\n * some action like copy/paste, undo/redo, ...\n */\nclass AnnotationEditorUIManager {\n  #activeEditor = null;\n\n  #allEditors = new Map();\n\n  #allLayers = new Map();\n\n  #altTextManager = null;\n\n  #annotationStorage = null;\n\n  #changedExistingAnnotations = null;\n\n  #commandManager = new CommandManager();\n\n  #currentPageIndex = 0;\n\n  #deletedAnnotationsElementIds = new Set();\n\n  #draggingEditors = null;\n\n  #editorTypes = null;\n\n  #editorsToRescale = new Set();\n\n  #enableHighlightFloatingButton = false;\n\n  #filterFactory = null;\n\n  #focusMainContainerTimeoutId = null;\n\n  #highlightColors = null;\n\n  #highlightWhenShiftUp = false;\n\n  #highlightToolbar = null;\n\n  #idManager = new IdManager();\n\n  #isEnabled = false;\n\n  #isWaiting = false;\n\n  #lastActiveElement = null;\n\n  #mainHighlightColorPicker = null;\n\n  #mlManager = null;\n\n  #mode = AnnotationEditorType.NONE;\n\n  #selectedEditors = new Set();\n\n  #selectedTextNode = null;\n\n  #pageColors = null;\n\n  #showAllStates = null;\n\n  #boundBlur = this.blur.bind(this);\n\n  #boundFocus = this.focus.bind(this);\n\n  #boundCopy = this.copy.bind(this);\n\n  #boundCut = this.cut.bind(this);\n\n  #boundPaste = this.paste.bind(this);\n\n  #boundKeydown = this.keydown.bind(this);\n\n  #boundKeyup = this.keyup.bind(this);\n\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n\n  #boundSelectionChange = this.#selectionChange.bind(this);\n\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false,\n  };\n\n  #translation = [0, 0];\n\n  #translationTimeoutId = null;\n\n  #container = null;\n\n  #viewer = null;\n\n  static TRANSLATE_SMALL = 1; // page units.\n\n  static TRANSLATE_BIG = 10; // page units.\n\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n\n    /**\n     * If the focused element is an input, we don't want to handle the arrow.\n     * For example, sliders can be controlled with the arrow keys.\n     */\n    const arrowChecker = self =>\n      self.#container.contains(document.activeElement) &&\n      document.activeElement.tagName !== \"BUTTON\" &&\n      self.hasSomethingToControl();\n\n    const textInputChecker = (_self, { target: el }) => {\n      if (el instanceof HTMLInputElement) {\n        const { type } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          [\"ctrl+a\", \"mac+meta+a\"],\n          proto.selectAll,\n          { checker: textInputChecker },\n        ],\n        [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, { checker: textInputChecker }],\n        [\n          // On mac, depending of the OS version, the event.key is either \"z\" or\n          // \"Z\" when the user presses \"meta+shift+z\".\n          [\n            \"ctrl+y\",\n            \"ctrl+shift+z\",\n            \"mac+meta+shift+z\",\n            \"ctrl+shift+Z\",\n            \"mac+meta+shift+Z\",\n          ],\n          proto.redo,\n          { checker: textInputChecker },\n        ],\n        [\n          [\n            \"Backspace\",\n            \"alt+Backspace\",\n            \"ctrl+Backspace\",\n            \"shift+Backspace\",\n            \"mac+Backspace\",\n            \"mac+alt+Backspace\",\n            \"mac+ctrl+Backspace\",\n            \"Delete\",\n            \"ctrl+Delete\",\n            \"shift+Delete\",\n            \"mac+Delete\",\n          ],\n          proto.delete,\n          { checker: textInputChecker },\n        ],\n        [\n          [\"Enter\", \"mac+Enter\"],\n          proto.addNewEditorFromKeyboard,\n          {\n            // Those shortcuts can be used in the toolbar for some other actions\n            // like zooming, hence we need to check if the container has the\n            // focus.\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(el) &&\n              !self.isEnterHandled,\n          },\n        ],\n        [\n          [\" \", \"mac+ \"],\n          proto.addNewEditorFromKeyboard,\n          {\n            // Those shortcuts can be used in the toolbar for some other actions\n            // like zooming, hence we need to check if the container has the\n            // focus.\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(document.activeElement),\n          },\n        ],\n        [[\"Escape\", \"mac+Escape\"], proto.unselectAll],\n        [\n          [\"ArrowLeft\", \"mac+ArrowLeft\"],\n          proto.translateSelectedEditors,\n          { args: [-small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          proto.translateSelectedEditors,\n          { args: [-big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowRight\", \"mac+ArrowRight\"],\n          proto.translateSelectedEditors,\n          { args: [small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          proto.translateSelectedEditors,\n          { args: [big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowUp\", \"mac+ArrowUp\"],\n          proto.translateSelectedEditors,\n          { args: [0, -small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"],\n          proto.translateSelectedEditors,\n          { args: [0, -big], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowDown\", \"mac+ArrowDown\"],\n          proto.translateSelectedEditors,\n          { args: [0, small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"],\n          proto.translateSelectedEditors,\n          { args: [0, big], checker: arrowChecker },\n        ],\n      ])\n    );\n  }\n\n  constructor(\n    container,\n    viewer,\n    altTextManager,\n    eventBus,\n    pdfDocument,\n    pageColors,\n    highlightColors,\n    enableHighlightFloatingButton,\n    mlManager\n  ) {\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this._eventBus = eventBus;\n    this._eventBus._on(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._on(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._on(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._on(\"rotationchanging\", this.#boundOnRotationChanging);\n    this.#addSelectionListener();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0,\n    };\n    this.isShiftKeyDown = false;\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      Object.defineProperty(this, \"reset\", {\n        value: () => {\n          this.selectAll();\n          this.delete();\n          this.#idManager.reset();\n        },\n      });\n    }\n  }\n\n  destroy() {\n    this.#removeKeyboardManager();\n    this.#removeFocusManager();\n    this._eventBus._off(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._off(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._off(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._off(\"rotationchanging\", this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this.#removeSelectionListener();\n  }\n\n  async mlGuess(data) {\n    return this.#mlManager?.guess(data) || null;\n  }\n\n  get hasMLManager() {\n    return !!this.#mlManager;\n  }\n\n  get hcmFilter() {\n    return shadow(\n      this,\n      \"hcmFilter\",\n      this.#pageColors\n        ? this.#filterFactory.addHCMFilter(\n            this.#pageColors.foreground,\n            this.#pageColors.background\n          )\n        : \"none\"\n    );\n  }\n\n  get direction() {\n    return shadow(\n      this,\n      \"direction\",\n      getComputedStyle(this.#container).direction\n    );\n  }\n\n  get highlightColors() {\n    return shadow(\n      this,\n      \"highlightColors\",\n      this.#highlightColors\n        ? new Map(\n            this.#highlightColors\n              .split(\",\")\n              .map(pair => pair.split(\"=\").map(x => x.trim()))\n          )\n        : null\n    );\n  }\n\n  get highlightColorNames() {\n    return shadow(\n      this,\n      \"highlightColorNames\",\n      this.highlightColors\n        ? new Map(Array.from(this.highlightColors, e => e.reverse()))\n        : null\n    );\n  }\n\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n\n  editAltText(editor) {\n    this.#altTextManager?.editAltText(this, editor);\n  }\n\n  onPageChanging({ pageNumber }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n\n  focusMainContainer() {\n    this.#container.focus();\n  }\n\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height,\n      } = layer.div.getBoundingClientRect();\n      if (\n        x >= layerX &&\n        x <= layerX + width &&\n        y >= layerY &&\n        y <= layerY + height\n      ) {\n        return layer;\n      }\n    }\n    return null;\n  }\n\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n\n  onScaleChanging({ scale }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n\n  onRotationChanging({ pagesRotation }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n\n  #getAnchorElementForSelection({ anchorNode }) {\n    return anchorNode.nodeType === Node.TEXT_NODE\n      ? anchorNode.parentElement\n      : anchorNode;\n  }\n\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const { anchorNode, anchorOffset, focusNode, focusOffset } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    if (this.#mode === AnnotationEditorType.NONE) {\n      this._eventBus.dispatch(\"showannotationeditorui\", {\n        source: this,\n        mode: AnnotationEditorType.HIGHLIGHT,\n      });\n      this.showAllEditors(\"highlight\", true, /* updateButton = */ true);\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        layer.createAndAddNewEditor({ x: 0, y: 0 }, false, {\n          methodOfCreation,\n          boxes,\n          anchorNode,\n          anchorOffset,\n          focusNode,\n          focusOffset,\n          text,\n        });\n        break;\n      }\n    }\n  }\n\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n\n  /**\n   * Add an editor in the annotation storage.\n   * @param {AnnotationEditor} editor\n   */\n  addToAnnotationStorage(editor) {\n    if (\n      !editor.isEmpty() &&\n      this.#annotationStorage &&\n      !this.#annotationStorage.has(editor.id)\n    ) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    const { anchorNode } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true,\n    });\n\n    if (\n      this.#mode !== AnnotationEditorType.HIGHLIGHT &&\n      this.#mode !== AnnotationEditorType.NONE\n    ) {\n      return;\n    }\n\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, /* updateButton = */ true);\n    }\n\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          // Do nothing on right click.\n          return;\n        }\n        window.removeEventListener(\"pointerup\", pointerup);\n        window.removeEventListener(\"blur\", pointerup);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup);\n      window.addEventListener(\"blur\", pointerup);\n    }\n  }\n\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#boundSelectionChange);\n  }\n\n  #removeSelectionListener() {\n    document.removeEventListener(\"selectionchange\", this.#boundSelectionChange);\n  }\n\n  #addFocusManager() {\n    window.addEventListener(\"focus\", this.#boundFocus);\n    window.addEventListener(\"blur\", this.#boundBlur);\n  }\n\n  #removeFocusManager() {\n    window.removeEventListener(\"focus\", this.#boundFocus);\n    window.removeEventListener(\"blur\", this.#boundBlur);\n  }\n\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    // When several editors are selected and the window loses focus, we want to\n    // keep the last active element in order to be able to focus it again when\n    // the window gets the focus back but we don't want to trigger any focus\n    // callbacks else only one editor will be selected.\n    const { activeElement } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\n      \"focusin\",\n      () => {\n        lastEditor._focusEventsAllowed = true;\n      },\n      { once: true }\n    );\n    lastActiveElement.focus();\n  }\n\n  #addKeyboardManager() {\n    // The keyboard events are caught at the container level in order to be able\n    // to execute some callbacks even if the current page doesn't have focus.\n    window.addEventListener(\"keydown\", this.#boundKeydown);\n    window.addEventListener(\"keyup\", this.#boundKeyup);\n  }\n\n  #removeKeyboardManager() {\n    window.removeEventListener(\"keydown\", this.#boundKeydown);\n    window.removeEventListener(\"keyup\", this.#boundKeyup);\n  }\n\n  #addCopyPasteListeners() {\n    document.addEventListener(\"copy\", this.#boundCopy);\n    document.addEventListener(\"cut\", this.#boundCut);\n    document.addEventListener(\"paste\", this.#boundPaste);\n  }\n\n  #removeCopyPasteListeners() {\n    document.removeEventListener(\"copy\", this.#boundCopy);\n    document.removeEventListener(\"cut\", this.#boundCut);\n    document.removeEventListener(\"paste\", this.#boundPaste);\n  }\n\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n\n  /**\n   * Copy callback.\n   * @param {ClipboardEvent} event\n   */\n  copy(event) {\n    event.preventDefault();\n\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(/* isForCopying = */ true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n\n  /**\n   * Cut callback.\n   * @param {ClipboardEvent} event\n   */\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n\n  /**\n   * Paste callback.\n   * @param {ClipboardEvent} event\n   */\n  paste(event) {\n    event.preventDefault();\n    const { clipboardData } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n\n    if (!Array.isArray(data)) {\n      return;\n    }\n\n    this.unselectAll();\n    const layer = this.currentLayer;\n\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({ cmd, undo, mustExec: true });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n\n  /**\n   * Keydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (\n      this.#mode !== AnnotationEditorType.NONE &&\n      !this.isEditorHandlingKeyboard\n    ) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n\n  /**\n   * Keyup callback.\n   * @param {KeyboardEvent} event\n   */\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n\n  /**\n   * Execute an action for a given name.\n   * For example, the user can click on the \"Undo\" entry in the context menu\n   * and it'll trigger the undo action.\n   */\n  onEditingAction({ name }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n\n  /**\n   * Update the different possible states of this manager, e.g. is there\n   * something to undo, redo, ...\n   * @param {Object} details\n   */\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(\n      ([key, value]) => this.#previousStates[key] !== value\n    );\n\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details),\n      });\n      // We could listen on our own event but it sounds like a bit weird and\n      // it's a way to simpler to handle that stuff here instead of having to\n      // add something in every place where an editor can be unselected.\n      if (\n        this.#mode === AnnotationEditorType.HIGHLIGHT &&\n        details.hasSelectedEditor === false\n      ) {\n        this.#dispatchUpdateUI([\n          [AnnotationEditorParamsType.HIGHLIGHT_FREE, true],\n        ]);\n      }\n    }\n  }\n\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details,\n    });\n  }\n\n  /**\n   * Set the editing state.\n   * It can be useful to temporarily disable it when the user is editing a\n   * FreeText annotation.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false,\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false,\n      });\n      this.disableUserSelect(false);\n    }\n  }\n\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n\n  /**\n   * Get an id.\n   * @returns {string}\n   */\n  getId() {\n    return this.#idManager.id;\n  }\n\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n\n  /**\n   * Add a new layer for a page which will contains the editors.\n   * @param {AnnotationEditorLayer} layer\n   */\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n\n  /**\n   * Remove a layer.\n   * @param {AnnotationEditorLayer} layer\n   */\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n\n  /**\n   * Change the editor mode (None, FreeText, Ink, ...)\n   * @param {number} mode\n   * @param {string|null} editId\n   * @param {boolean} [isFromKeyboard] - true if the mode change is due to a\n   *   keyboard action.\n   */\n  updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      return;\n    }\n    this.setEditingState(true);\n    this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId && isFromKeyboard) {\n      this.addNewEditorFromKeyboard();\n      return;\n    }\n\n    if (!editId) {\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n        break;\n      }\n    }\n  }\n\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {number} mode\n   * @returns {undefined}\n   */\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      mode,\n    });\n  }\n\n  /**\n   * Update a parameter in the current editor or globally.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor();\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\",\n            },\n          },\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state =\n      this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ??\n      true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([\n        [AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible],\n      ]);\n    }\n  }\n\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n\n  /**\n   * Enable all the layers.\n   */\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n\n  /**\n   * Disable all the layers.\n   */\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n\n  /**\n   * Get all the editors belonging to a given page.\n   * @param {number} pageIndex\n   * @returns {Array<AnnotationEditor>}\n   */\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n\n  /**\n   * Get an editor with the given id.\n   * @param {string} id\n   * @returns {AnnotationEditor}\n   */\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n\n  /**\n   * Add a new editor.\n   * @param {AnnotationEditor} editor\n   */\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        // When the div is removed from DOM the focus can move on the\n        // document.body, so we need to move it back to the main container.\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    if (\n      !editor.annotationElementId ||\n      !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)\n    ) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n\n  /**\n   * The annotation element with the given id has been deleted.\n   * @param {AnnotationEditor} editor\n   */\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n\n  /**\n   * Check if the annotation element with the given id has been deleted.\n   * @param {string} annotationElementId\n   * @returns {boolean}\n   */\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n\n  /**\n   * The annotation element with the given id have been restored.\n   * @param {AnnotationEditor} editor\n   */\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n\n  /**\n   * Add an editor to the layer it belongs to or add it to the global map.\n   * @param {AnnotationEditor} editor\n   */\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n\n  /**\n   * Set the given editor as the active one.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {\n      // Iterate to get the last element.\n    }\n    return ed;\n  }\n\n  /**\n   * Update the UI of the active editor.\n   * @param {AnnotationEditor} editor\n   */\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection,\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n\n  get isEnterHandled() {\n    return (\n      this.#selectedEditors.size === 1 &&\n      this.firstSelectedEditor.isEnterHandled\n    );\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Redo the last undoed command.\n   */\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Add a command to execute (cmd) and another one to undo it.\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Delete the current editor or all.\n   */\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  commitOrRemove() {\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n  }\n\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n\n  /**\n   * Select the editors.\n   * @param {Array<AnnotationEditor>} editors\n   */\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({ hasSelectedEditor: this.hasSelection });\n  }\n\n  /**\n   * Select all the editors.\n   */\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n\n  /**\n   * Unselect all the selected editors.\n   */\n  unselectAll() {\n    if (this.#activeEditor) {\n      // An editor is being edited so just commit it.\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        // If the mode is NONE, we want to really unselect the editor, hence we\n        // mustn't return here.\n        return;\n      }\n    }\n\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false,\n    });\n  }\n\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n\n    // We don't want to have an undo/redo for each translation so we wait a bit\n    // before adding the command to the command manager.\n    const TIME_TO_WAIT = 1000;\n\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n            }\n          }\n        },\n        mustExec: false,\n      });\n    }, TIME_TO_WAIT);\n\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n    }\n  }\n\n  /**\n   * Set up the drag session for moving the selected editors.\n   */\n  setUpDragSession() {\n    // Note: don't use any references to the editor's parent which can be null\n    // if the editor belongs to a destroyed page.\n    if (!this.hasSelection) {\n      return;\n    }\n    // Avoid to have spurious text selection in the text layer when dragging.\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1,\n      });\n    }\n  }\n\n  /**\n   * Ends the drag session.\n   * @returns {boolean} true if at least one editor has been moved.\n   */\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n\n    for (const [{ x, y, pageIndex }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||=\n        x !== value.savedX ||\n        y !== value.savedY ||\n        pageIndex !== value.savedPageIndex;\n    }\n\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        // The editor can be undone/redone on a page which is not visible (and\n        // which potentially has no annotation editor layer), hence we need to\n        // use the pageIndex instead of the parent.\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, { newX, newY, newPageIndex }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, { savedX, savedY, savedPageIndex }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true,\n    });\n\n    return true;\n  }\n\n  /**\n   * Drag the set of selected editors.\n   * @param {number} tx\n   * @param {number} ty\n   */\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n\n  /**\n   * Rebuild the editor (usually on undo/redo actions) on a potentially\n   * non-rendered page.\n   * @param {AnnotationEditor} editor\n   */\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n\n  get isEditorHandlingKeyboard() {\n    return (\n      this.getActive()?.shouldGetKeyboardEvents() ||\n      (this.#selectedEditors.size === 1 &&\n        this.firstSelectedEditor.shouldGetKeyboardEvents())\n    );\n  }\n\n  /**\n   * Is the current editor the one passed as argument?\n   * @param {AnnotationEditor} editor\n   * @returns\n   */\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n\n  /**\n   * Get the current active editor.\n   * @returns {AnnotationEditor|null}\n   */\n  getActive() {\n    return this.#activeEditor;\n  }\n\n  /**\n   * Get the current editor mode.\n   * @returns {number}\n   */\n  getMode() {\n    return this.#mode;\n  }\n\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (\n        !textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)\n      ) {\n        return null;\n      }\n    }\n\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n\n    // We must rotate the boxes because we want to have them in the non-rotated\n    // page coordinates.\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n    }\n\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const { x, y, width, height } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n\n  addChangedExistingAnnotation({ annotationElementId, id }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(\n      annotationElementId,\n      id\n    );\n  }\n\n  removeChangedExistingAnnotation({ annotationElementId }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n}\n\nexport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  CommandManager,\n  KeyboardManager,\n  opacityToHex,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AbortException, assert, warn } from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./fetch_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\",\n  };\n}\n\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\n\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\n\n/** @implements {IPDFStream} */\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFFetchStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._headers = createHeaders(this._stream.httpHeaders);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n\n        const getResponseHeader = name => response.headers.get(name);\n\n        const { allowRangeRequests, suggestedLength } =\n          validateRangeRequestCapabilities({\n            getResponseHeader,\n            isHttp: this._stream.isHttp,\n            rangeChunkSize: this._rangeChunkSize,\n            disableRange: this._disableRange,\n          });\n\n        this._isRangeSupported = allowRangeRequests;\n        // Setting right content length.\n        this._contentLength = suggestedLength || this._contentLength;\n\n        this._filename = extractFilenameFromHeader(getResponseHeader);\n\n        // We need to stop reading when range is supported and streaming is\n        // disabled.\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException(\"Streaming is disabled.\"));\n        }\n      })\n      .catch(this._headersCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(this._readCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({ loaded: this._loaded });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\nexport { PDFFetchStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  bytesToString,\n  FontRenderOps,\n  isNodeJS,\n  shadow,\n  string32,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\n\nclass FontLoader {\n  #systemFonts = new Set();\n\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null, // For testing only.\n  }) {\n    this._document = ownerDocument;\n\n    this.nativeFontFaces = new Set();\n    this.styleElement =\n      typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n        ? styleElement\n        : null;\n\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n      this.loadingRequests = [];\n      this.loadTestFontId = 0;\n    }\n  }\n\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement\n        .getElementsByTagName(\"head\")[0]\n        .append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n\n    if (this.styleElement) {\n      // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n\n  async loadSystemFont({ systemFontInfo: info, _inspectFont }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(\n      !this.disableFontFace,\n      \"loadSystemFont shouldn't be called when `disableFontFace` is set.\"\n    );\n\n    if (this.isFontLoadingAPISupported) {\n      const { loadedName, src, style } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(\n          `Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`\n        );\n\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n\n    unreachable(\n      \"Not implemented: loadSystemFont without the Font Loading API.\"\n    );\n  }\n\n  async bind(font) {\n    // Add the font to the DOM only once; skip if the font is already loaded.\n    if (font.attached || (font.missingFile && !font.systemFontInfo)) {\n      return;\n    }\n    font.attached = true;\n\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n\n          // When font loading failed, fall back to the built-in font renderer.\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return; // The font was, asynchronously, loaded.\n    }\n\n    // !this.isFontLoadingAPISupported\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n\n      if (this.isSyncFontLoadingSupported) {\n        return; // The font was, synchronously, loaded.\n      }\n      if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n        throw new Error(\"Not implemented: async font loading\");\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n      // The font was, asynchronously, loaded.\n    }\n  }\n\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      return shadow(\n        this,\n        \"isFontLoadingAPISupported\",\n        hasFonts && !this.styleElement\n      );\n    }\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n\n  get isSyncFontLoadingSupported() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      return shadow(this, \"isSyncFontLoadingSupported\", true);\n    }\n\n    let supported = false;\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"CHROME\")) {\n      if (isNodeJS) {\n        // Node.js - we can pretend that sync font loading is supported.\n        supported = true;\n      } else if (\n        typeof navigator !== \"undefined\" &&\n        typeof navigator?.userAgent === \"string\" &&\n        // User agent string sniffing is bad, but there is no reliable way to\n        // tell if the font is fully loaded and ready to be used with canvas.\n        /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)\n      ) {\n        // Firefox, from version 14, supports synchronous font loading.\n        supported = true;\n      }\n    }\n    return shadow(this, \"isSyncFontLoadingSupported\", supported);\n  }\n\n  _queueLoadingCallback(callback) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _queueLoadingCallback\");\n    }\n\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n\n      // Sending all completed requests in order of how they were queued.\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n\n    const { loadingRequests } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback,\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n\n  get _loadTestFont() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _loadTestFont\");\n    }\n\n    // This is a CFF font with 1 glyph for '.' that fills its entire width\n    // and height.\n    const testFont = atob(\n      \"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" +\n        \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" +\n        \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" +\n        \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" +\n        \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" +\n        \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" +\n        \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" +\n        \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" +\n        \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" +\n        \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" +\n        \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" +\n        \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" +\n        \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" +\n        \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" +\n        \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" +\n        \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" +\n        \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\"\n    );\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n\n  _prepareFontLoadEvent(font, request) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _prepareFontLoadEvent\");\n    }\n\n    /** Hack begin */\n    // There's currently no event when a font has finished downloading so the\n    // following code is a dirty hack to 'guess' when a font is ready.\n    // It's assumed fonts are loaded in order, so add a known test font after\n    // the desired fonts and then test for the loading of that test font.\n\n    function int32(data, offset) {\n      return (\n        (data.charCodeAt(offset) << 24) |\n        (data.charCodeAt(offset + 1) << 16) |\n        (data.charCodeAt(offset + 2) << 8) |\n        (data.charCodeAt(offset + 3) & 0xff)\n      );\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n\n    // The temporary canvas is used to determine if fonts are loaded.\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n\n    let called = 0;\n    function isFontReady(name, callback) {\n      // With setTimeout clamping this gives the font ~100ms to load.\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    // Chromium seems to cache fonts based on a hash of the actual font data,\n    // so the font must be modified for each load test else it will appear to\n    // be loaded already.\n    // TODO: This could maybe be made faster by avoiding the btoa of the full\n    // font by splitting it in chunks before hand and padding the font id.\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n    data = spliceString(\n      data,\n      COMMENT_OFFSET,\n      loadTestFontId.length,\n      loadTestFontId\n    );\n    // CFF checksum is important for IE, adjusting it\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      // align to 4 bytes boundary\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i)) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n    /** Hack end */\n  }\n}\n\nclass FontFaceObject {\n  constructor(\n    translatedData,\n    { disableFontFace = false, ignoreErrors = false, inspectFont = null }\n  ) {\n    this.compiledGlyphs = Object.create(null);\n    // importing translated data\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.disableFontFace = disableFontFace === true;\n    this.ignoreErrors = ignoreErrors === true;\n    this._inspectFont = inspectFont;\n  }\n\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight,\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(\n        this.cssFontInfo.fontFamily,\n        this.data,\n        css\n      );\n    }\n\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    // Add the @font-face rule to the document.\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      if (!this.ignoreErrors) {\n        throw ex;\n      }\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n\n    if (!Array.isArray(cmds) || cmds.length === 0) {\n      return (this.compiledGlyphs[character] = function (c, size) {\n        // No-op function, to allow rendering to continue.\n      });\n    }\n\n    const commands = [];\n    for (let i = 0, ii = cmds.length; i < ii; ) {\n      switch (cmds[i++]) {\n        case FontRenderOps.BEZIER_CURVE_TO:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push(ctx => ctx.bezierCurveTo(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.MOVE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.moveTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.LINE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.lineTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.QUADRATIC_CURVE_TO:\n          {\n            const [a, b, c, d] = cmds.slice(i, i + 4);\n            commands.push(ctx => ctx.quadraticCurveTo(a, b, c, d));\n            i += 4;\n          }\n          break;\n        case FontRenderOps.RESTORE:\n          commands.push(ctx => ctx.restore());\n          break;\n        case FontRenderOps.SAVE:\n          commands.push(ctx => ctx.save());\n          break;\n        case FontRenderOps.SCALE:\n          // The scale command must be at the third position, after save and\n          // transform (for the font matrix) commands (see also\n          // font_renderer.js).\n          // The goal is to just scale the canvas and then run the commands loop\n          // without the need to pass the size parameter to each command.\n          assert(\n            commands.length === 2,\n            \"Scale command is only valid at the third position.\"\n          );\n          break;\n        case FontRenderOps.TRANSFORM:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push(ctx => ctx.transform(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.TRANSLATE:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.translate(a, b));\n            i += 2;\n          }\n          break;\n      }\n    }\n\n    return (this.compiledGlyphs[character] = function glyphDrawer(ctx, size) {\n      commands[0](ctx);\n      commands[1](ctx);\n      ctx.scale(size, -size);\n      for (let i = 2, ii = commands.length; i < ii; i++) {\n        commands[i](ctx);\n      }\n    });\n  }\n}\n\nexport { FontFaceObject, FontLoader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap } from \"../shared/util.js\";\n\nclass Metadata {\n  #metadataMap;\n\n  #data;\n\n  constructor({ parsedData, rawData }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n\n  getRaw() {\n    return this.#data;\n  }\n\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n}\n\nexport { Metadata };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, stringToBytes } from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./network.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\n\nfunction getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\n\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = (this.isHttp && args.httpHeaders) || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end,\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = { xhr });\n\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n\n    xhr.send(null);\n\n    return xhrId;\n  }\n\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n\n    if (xhr.readyState !== 4) {\n      return;\n    }\n\n    if (!(xhrId in this.pendingRequests)) {\n      // The XHR request might have been aborted in onHeadersReceived()\n      // callback, in which case we should abort request.\n      return;\n    }\n\n    delete this.pendingRequests[xhrId];\n\n    // Success status == 0 can be on ftp, file and other protocols.\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n\n    // From http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2:\n    // \"A server MAY ignore the Range header\". This means it's possible to\n    // get a 200 rather than a 206 response from a range request.\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE &&\n      pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n\n    if (\n      !ok_response_on_range_request &&\n      xhrStatus !== pendingRequest.expectedStatus\n    ) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n\n    const chunk = getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk,\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\n\n/** @implements {IPDFStream} */\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials,\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNetworkStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(\n      this._manager,\n      this._source\n    );\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(\n      this._manager,\n      begin,\n      end\n    );\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length; // Optional\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n\n    this.onProgress = null;\n  }\n\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n\n    const getResponseHeader = name => fullRequestXhr.getResponseHeader(name);\n\n    const { allowRangeRequests, suggestedLength } =\n      validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: this._manager.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    // Setting right content length.\n    this._contentLength = suggestedLength || this._contentLength;\n\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n\n    if (this._isRangeSupported) {\n      // NOTE: by cancelling the full request, and then issuing range\n      // requests, there will be an issue for sites where you can only\n      // request the pdf once. However, if this is the case, then the\n      // server should not be returning that it can support range requests.\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n\n    this._headersReceivedCapability.resolve();\n  }\n\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({ value: data.chunk, done: false });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength,\n    });\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n\n  _close() {\n    this.onClosed?.(this);\n  }\n\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({ loaded: evt.loaded });\n    }\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\nexport { PDFNetworkStream };\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringToBytes } from \"../shared/util.js\";\n\n// This getFilenameFromContentDispositionHeader function is adapted from\n// https://github.com/Rob--W/open-in-browser/blob/7e2e35a38b8b4e981b11da7b2f01df0149049e92/extension/content-disposition.js\n// with the following changes:\n// - Modified to conform to PDF.js's coding style.\n// - Move return to the end of the function to prevent Babel from dropping the\n//   function declarations.\n\n/**\n * Extract file name from the Content-Disposition HTTP response header.\n *\n * @param {string} contentDisposition\n * @returns {string} Filename, if found in the Content-Disposition header.\n */\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n\n  // filename*=ext-value (\"ext-value\" from RFC 5987, referenced by RFC 6266).\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // Continuations (RFC 2231 section 3, referenced by RFC 5987 section 3.1).\n  // filename*n*=part\n  // filename*n=part\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    // RFC 2047, section\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n\n  // filename=value (RFC 5987, section 4.1).\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // After this line there are only function declarations. We cannot put\n  // \"return\" here for readability because babel would then drop the function\n  // declarations...\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      \"(?:^|;)\\\\s*\" +\n        attributePattern +\n        \"\\\\s*=\\\\s*\" +\n        // Captures: value = token | quoted-string\n        // (RFC 2616, section 3.6 and referenced by RFC 6266 4.1)\n        \"(\" +\n        '[^\";\\\\s][^;\\\\s]*' +\n        \"|\" +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        \")\",\n      flags\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {\n        // TextDecoder constructor threw - unrecognized encoding.\n      }\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      // Maybe multi-byte UTF-8.\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        // Try iso-8859-1 encoding.\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    // Iterate over all filename*n= and filename*n*= with n being an integer\n    // of at least zero. Any non-zero number must not start with '0'.\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match; // eslint-disable-line prefer-const\n      n = parseInt(n, 10);\n      if (n in matches) {\n        // Ignore anything after the invalid second filename*0.\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        // Numbers must be consecutive. Truncate when there is a hole.\n        break;\n      }\n      let [quot, part] = matches[n]; // eslint-disable-line prefer-const\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      // Find the first unescaped \" and terminate there.\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1; // Truncates and stop the iteration.\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    // Decodes \"ext-value\" from RFC 5987.\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      // Some servers send \"filename*=\" without encoding 'language' prefix,\n      // e.g. in https://github.com/Rob--W/open-in-browser/issues/26\n      // Let's accept the value like Firefox (57) (Chrome 62 rejects it).\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    // Ignore language (RFC 5987 section 3.2.1, and RFC 6266 section 4.1 ).\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    // RFC 2047-decode the result. Firefox tried to drop support for it, but\n    // backed out because some servers use it - https://bugzil.la/875615\n    // Firefox's condition for decoding is here: https://searchfox.org/mozilla-central/rev/4a590a5a15e35d88a3b23dd6ac3c471cf85b04a8/netwerk/mime/nsMIMEHeaderParamImpl.cpp#742-748\n\n    // We are more strict and only recognize RFC 2047-encoding if the value\n    // starts with \"=?\", since then it is likely that the full value is\n    // RFC 2047-encoded.\n\n    // Firefox also decodes words even where RFC 2047 section 5 states:\n    // \"An 'encoded-word' MUST NOT appear within a 'quoted-string'.\"\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    // RFC 2047, section 2.4\n    // encoded-word = \"=?\" charset \"?\" encoding \"?\" encoded-text \"?=\"\n    // charset = token (but let's restrict to characters that denote a\n    //       possibly valid encoding).\n    // encoding = q or b\n    // encoded-text = any printable ASCII character other than ? or space.\n    //        ... but Firefox permits ? and space.\n    return value.replaceAll(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === \"q\" || encoding === \"Q\") {\n          // RFC 2047 section 4.2.\n          text = text.replaceAll(\"_\", \" \");\n          text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        } // else encoding is b or B - base64 (RFC 2047 section 4.1)\n        try {\n          text = atob(text);\n        } catch {}\n        return textdecode(charset, text);\n      }\n    );\n  }\n\n  return \"\";\n}\n\nexport { getFilenameFromContentDispositionHeader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  MissingPDFException,\n  UnexpectedResponseException,\n} from \"../shared/util.js\";\nimport { getFilenameFromContentDispositionHeader } from \"./content_disposition.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      Number.isInteger(rangeChunkSize) && rangeChunkSize > 0,\n      \"rangeChunkSize must be an integer larger than zero.\"\n    );\n  }\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n\n  returnValues.suggestedLength = length;\n\n  if (length <= 2 * rangeChunkSize) {\n    // The file size is smaller than the size of two chunks, so it does not\n    // make any sense to abort the request and retry with a range request.\n    return returnValues;\n  }\n\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\n\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\n\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || (status === 0 && url.startsWith(\"file:\"))) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(\n    `Unexpected server response (${status}) while retrieving PDF \"${url}\".`,\n    status\n  );\n}\n\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\nexport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  isNodeJS,\n  MissingPDFException,\n} from \"../shared/util.js\";\nimport {\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nlet fs, http, https, url;\nif (isNodeJS) {\n  // Native packages.\n  fs = await __non_webpack_import__(\"fs\");\n  http = await __non_webpack_import__(\"http\");\n  https = await __non_webpack_import__(\"https\");\n  url = await __non_webpack_import__(\"url\");\n}\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\n\nfunction parseUrl(sourceUrl) {\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  // Prepending 'file:///' to Windows absolute path.\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  // Changes protocol to 'file:' if url refers to filesystem.\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\n\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp =\n      this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    // Check if url refers to filesystem.\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNodeStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = this.isFsUrl\n      ? new PDFNodeStreamFsFullReader(this)\n      : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl\n      ? new PDFNodeStreamFsRangeReader(this, start, end)\n      : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length; // optional\n    this._loaded = 0;\n    this._filename = null;\n\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readable to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // We need to stop reading when range is supported and streaming is\n    // disabled.\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n\n    // Destroy ReadableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({ loaded: this._loaded });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readableStream to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // Destroy readableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers,\n  };\n}\n\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n\n      // Make sure that headers name are in lower case, as mentioned\n      // here: https://nodejs.org/api/http.html#http_message_headers.\n      const getResponseHeader = name =>\n        this._readableStream.headers[name.toLowerCase()];\n\n      const { allowRangeRequests, suggestedLength } =\n        validateRangeRequestCapabilities({\n          getResponseHeader,\n          isHttp: stream.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange,\n        });\n\n      this._isRangeSupported = allowRangeRequests;\n      // Setting right content length.\n      this._contentLength = suggestedLength || this._contentLength;\n\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    // Note: `request.end(data)` is used to write `data` to request body\n    // and notify end of request. But one should always call `request.end()`\n    // even if there is no data to write -- (to notify the end of request).\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    fs.promises.lstat(path).then(\n      stat => {\n        // Setting right content length.\n        this._contentLength = stat.size;\n\n        this._setReadableStream(fs.createReadStream(path));\n        this._headersCapability.resolve();\n      },\n      error => {\n        if (error.code === \"ENOENT\") {\n          error = new MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n      }\n    );\n  }\n}\n\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    this._setReadableStream(fs.createReadStream(path, { start, end: end - 1 }));\n  }\n}\n\nexport { PDFNodeStream };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n} from \"./base_factory.js\";\nimport { isNodeJS, warn } from \"../shared/util.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_utils.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nlet fs, canvas, path2d;\nif (isNodeJS) {\n  // Native packages.\n  fs = await __non_webpack_import__(\"fs\");\n  // Optional, third-party, packages.\n  try {\n    canvas = await __non_webpack_import__(\"canvas\");\n  } catch {}\n  try {\n    path2d = await __non_webpack_import__(\"path2d\");\n  } catch {}\n}\n\nif (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"SKIP_BABEL\")) {\n  (function checkDOMMatrix() {\n    if (globalThis.DOMMatrix || !isNodeJS) {\n      return;\n    }\n    const DOMMatrix = canvas?.DOMMatrix;\n\n    if (DOMMatrix) {\n      globalThis.DOMMatrix = DOMMatrix;\n    } else {\n      warn(\"Cannot polyfill `DOMMatrix`, rendering may be broken.\");\n    }\n  })();\n\n  (function checkPath2D() {\n    if (globalThis.Path2D || !isNodeJS) {\n      return;\n    }\n    const CanvasRenderingContext2D = canvas?.CanvasRenderingContext2D;\n    const applyPath2DToCanvasRenderingContext =\n      path2d?.applyPath2DToCanvasRenderingContext;\n    const Path2D = path2d?.Path2D;\n\n    if (\n      CanvasRenderingContext2D &&\n      applyPath2DToCanvasRenderingContext &&\n      Path2D\n    ) {\n      applyPath2DToCanvasRenderingContext(CanvasRenderingContext2D);\n      globalThis.Path2D = Path2D;\n    } else {\n      warn(\"Cannot polyfill `Path2D`, rendering may be broken.\");\n    }\n  })();\n}\n\nconst fetchData = function (url) {\n  return fs.promises.readFile(url).then(data => new Uint8Array(data));\n};\n\nclass NodeFilterFactory extends BaseFilterFactory {}\n\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    return canvas.createCanvas(width, height);\n  }\n}\n\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(url).then(data => ({ cMapData: data, compressionType }));\n  }\n}\n\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url);\n  }\n}\n\nexport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n};\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  info,\n  objectFromMap,\n  RenderingIntentFlag,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst INTERNAL = Symbol(\"INTERNAL\");\n\nclass OptionalContentGroup {\n  #isDisplay = false;\n\n  #isPrint = false;\n\n  #userSet = false;\n\n  #visible = true;\n\n  constructor(renderingIntent, { name, intent, usage }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const { print, view } = this.usage;\n\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n\n  /**\n   * @ignore\n   */\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\n\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n\n  #groups = new Map();\n\n  #initialHash = null;\n\n  #order = null;\n\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n\n    this.name = null;\n    this.creator = null;\n\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(\n        group.id,\n        new OptionalContentGroup(renderingIntent, group)\n      );\n    }\n\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n\n    // The following code must always run *last* in the constructor.\n    this.#initialHash = this.getHash();\n  }\n\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      // Per the spec, the expression should be preferred if available.\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        // Default\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n\n  setVisibility(id, visible = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    group._setVisible(INTERNAL, !!visible, /* userSet = */ true);\n\n    this.#cachedGetHash = null;\n  }\n\n  setOCGState({ state, preserveRB }) {\n    let operator;\n\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          group._setVisible(INTERNAL, true);\n          break;\n        case \"OFF\":\n          group._setVisible(INTERNAL, false);\n          break;\n        case \"Toggle\":\n          group._setVisible(INTERNAL, !group.visible);\n          break;\n      }\n    }\n\n    this.#cachedGetHash = null;\n  }\n\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n\n  getGroups() {\n    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;\n  }\n\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return (this.#cachedGetHash = hash.hexdigest());\n  }\n}\n\nexport { OptionalContentConfig };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nimport { AbortException, Util } from \"../shared/util.js\";\nimport { setLayerDimensions } from \"./display_utils.js\";\n\n/**\n * Text layer render parameters.\n *\n * @typedef {Object} TextLayerRenderParameters\n * @property {ReadableStream | TextContent} textContentSource - Text content to\n *   render, i.e. the value returned by the page's `streamTextContent` or\n *   `getTextContent` method.\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {WeakMap<HTMLElement,Object>} [textDivProperties] - Some properties\n *   weakly mapped to the HTML elements used to render the text.\n * @property {Array<string>} [textContentItemsStr] - Strings that correspond to\n *   the `str` property of the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n */\n\n/**\n * Text layer update parameters.\n *\n * @typedef {Object} TextLayerUpdateParameters\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {WeakMap<HTMLElement,Object>} [textDivProperties] - Some properties\n *   weakly mapped to the HTML elements used to render the text.\n * @property {boolean} [mustRotate] true if the text layer must be rotated.\n * @property {boolean} [mustRescale] true if the text layer contents must be\n *   rescaled.\n */\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nconst ascentCache = new Map();\nlet _canvasContext = null;\n\nfunction getCtx() {\n  if (!_canvasContext) {\n    // We don't use an OffscreenCanvas here because we use serif/sans serif\n    // fonts with it and they depends on the locale.\n    // In Firefox, the <html> element get a lang attribute that depends on what\n    // Fluent returns for the locale and the OffscreenCanvas uses the OS locale.\n    // Those two locales can be different and consequently the used fonts will\n    // be different (see bug 1869001).\n    // Ideally, we should use in the text layer the fonts we've in the pdf (or\n    // their replacements when they aren't embedded) and then we can use an\n    // OffscreenCanvas.\n    const canvas = document.createElement(\"canvas\");\n    canvas.className = \"hiddenCanvasElement\";\n    document.body.append(canvas);\n    _canvasContext = canvas.getContext(\"2d\", { alpha: false });\n  }\n\n  return _canvasContext;\n}\n\nfunction cleanupTextLayer() {\n  _canvasContext?.canvas.remove();\n  _canvasContext = null;\n}\n\nfunction getAscent(fontFamily) {\n  const cachedAscent = ascentCache.get(fontFamily);\n  if (cachedAscent) {\n    return cachedAscent;\n  }\n\n  const ctx = getCtx();\n\n  const savedFont = ctx.font;\n  ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n  ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n  const metrics = ctx.measureText(\"\");\n\n  // Both properties aren't available by default in Firefox.\n  let ascent = metrics.fontBoundingBoxAscent;\n  let descent = Math.abs(metrics.fontBoundingBoxDescent);\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n\n    ctx.canvas.width = ctx.canvas.height = 0;\n    ctx.font = savedFont;\n    return ratio;\n  }\n\n  // Try basic heuristic to guess ascent/descent.\n  // Draw a g with baseline at 0,0 and then get the line\n  // number where a pixel has non-null red component (starting\n  // from bottom).\n  ctx.strokeStyle = \"red\";\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"g\", 0, 0);\n  let pixels = ctx.getImageData(\n    0,\n    0,\n    DEFAULT_FONT_SIZE,\n    DEFAULT_FONT_SIZE\n  ).data;\n  descent = 0;\n  for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n    if (pixels[i] > 0) {\n      descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  // Draw an A with baseline at 0,DEFAULT_FONT_SIZE and then get the line\n  // number where a pixel has non-null red component (starting\n  // from top).\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n  pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n  ascent = 0;\n  for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n    if (pixels[i] > 0) {\n      ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  ctx.canvas.width = ctx.canvas.height = 0;\n  ctx.font = savedFont;\n\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n\n  ascentCache.set(fontFamily, DEFAULT_FONT_ASCENT);\n  return DEFAULT_FONT_ASCENT;\n}\n\nfunction appendText(task, geom, styles) {\n  // Initialize all used properties to keep the caches monomorphic.\n  const textDiv = document.createElement(\"span\");\n  const textDivProperties = {\n    angle: 0,\n    canvasWidth: 0,\n    hasText: geom.str !== \"\",\n    hasEOL: geom.hasEOL,\n    fontSize: 0,\n  };\n  task._textDivs.push(textDiv);\n\n  const tx = Util.transform(task._transform, geom.transform);\n  let angle = Math.atan2(tx[1], tx[0]);\n  const style = styles[geom.fontName];\n  if (style.vertical) {\n    angle += Math.PI / 2;\n  }\n\n  const fontFamily =\n    (task._fontInspectorEnabled && style.fontSubstitution) || style.fontFamily;\n  const fontHeight = Math.hypot(tx[2], tx[3]);\n  const fontAscent = fontHeight * getAscent(fontFamily);\n\n  let left, top;\n  if (angle === 0) {\n    left = tx[4];\n    top = tx[5] - fontAscent;\n  } else {\n    left = tx[4] + fontAscent * Math.sin(angle);\n    top = tx[5] - fontAscent * Math.cos(angle);\n  }\n\n  const scaleFactorStr = \"calc(var(--scale-factor)*\";\n  const divStyle = textDiv.style;\n  // Setting the style properties individually, rather than all at once,\n  // should be OK since the `textDiv` isn't appended to the document yet.\n  if (task._container === task._rootContainer) {\n    divStyle.left = `${((100 * left) / task._pageWidth).toFixed(2)}%`;\n    divStyle.top = `${((100 * top) / task._pageHeight).toFixed(2)}%`;\n  } else {\n    // We're in a marked content span, hence we can't use percents.\n    divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n    divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n  }\n  divStyle.fontSize = `${scaleFactorStr}${fontHeight.toFixed(2)}px)`;\n  divStyle.fontFamily = fontFamily;\n\n  textDivProperties.fontSize = fontHeight;\n\n  // Keeps screen readers from pausing on every new text span.\n  textDiv.setAttribute(\"role\", \"presentation\");\n\n  textDiv.textContent = geom.str;\n  // geom.dir may be 'ttb' for vertical texts.\n  textDiv.dir = geom.dir;\n\n  // `fontName` is only used by the FontInspector, and we only use `dataset`\n  // here to make the font name available in the debugger.\n  if (task._fontInspectorEnabled) {\n    textDiv.dataset.fontName =\n      style.fontSubstitutionLoadedName || geom.fontName;\n  }\n  if (angle !== 0) {\n    textDivProperties.angle = angle * (180 / Math.PI);\n  }\n  // We don't bother scaling single-char text divs, because it has very\n  // little effect on text highlighting. This makes scrolling on docs with\n  // lots of such divs a lot faster.\n  let shouldScaleText = false;\n  if (geom.str.length > 1) {\n    shouldScaleText = true;\n  } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n    const absScaleX = Math.abs(geom.transform[0]),\n      absScaleY = Math.abs(geom.transform[3]);\n    // When the horizontal/vertical scaling differs significantly, also scale\n    // even single-char text to improve highlighting (fixes issue11713.pdf).\n    if (\n      absScaleX !== absScaleY &&\n      Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n    ) {\n      shouldScaleText = true;\n    }\n  }\n  if (shouldScaleText) {\n    textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n  }\n  task._textDivProperties.set(textDiv, textDivProperties);\n  if (task._isReadableStream) {\n    task._layoutText(textDiv);\n  }\n}\n\nfunction layout(params) {\n  const { div, scale, properties, ctx, prevFontSize, prevFontFamily } = params;\n  const { style } = div;\n  let transform = \"\";\n  if (properties.canvasWidth !== 0 && properties.hasText) {\n    const { fontFamily } = style;\n    const { canvasWidth, fontSize } = properties;\n\n    if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n      ctx.font = `${fontSize * scale}px ${fontFamily}`;\n      params.prevFontSize = fontSize;\n      params.prevFontFamily = fontFamily;\n    }\n\n    // Only measure the width for multi-char text divs, see `appendText`.\n    const { width } = ctx.measureText(div.textContent);\n\n    if (width > 0) {\n      transform = `scaleX(${(canvasWidth * scale) / width})`;\n    }\n  }\n  if (properties.angle !== 0) {\n    transform = `rotate(${properties.angle}deg) ${transform}`;\n  }\n  if (transform.length > 0) {\n    style.transform = transform;\n  }\n}\n\nfunction render(task) {\n  if (task._canceled) {\n    return;\n  }\n  const textDivs = task._textDivs;\n  const capability = task._capability;\n  const textDivsLength = textDivs.length;\n\n  // No point in rendering many divs as it would make the browser\n  // unusable even after the divs are rendered.\n  if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n    capability.resolve();\n    return;\n  }\n\n  if (!task._isReadableStream) {\n    for (const textDiv of textDivs) {\n      task._layoutText(textDiv);\n    }\n  }\n  capability.resolve();\n}\n\nclass TextLayerRenderTask {\n  constructor({\n    textContentSource,\n    container,\n    viewport,\n    textDivs,\n    textDivProperties,\n    textContentItemsStr,\n  }) {\n    this._textContentSource = textContentSource;\n    this._isReadableStream = textContentSource instanceof ReadableStream;\n    this._container = this._rootContainer = container;\n    this._textDivs = textDivs || [];\n    this._textContentItemsStr = textContentItemsStr || [];\n    this._fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n\n    this._reader = null;\n    this._textDivProperties = textDivProperties || new WeakMap();\n    this._canceled = false;\n    this._capability = Promise.withResolvers();\n    this._layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale: viewport.scale * (globalThis.devicePixelRatio || 1),\n      properties: null,\n      ctx: getCtx(),\n    };\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    this._transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this._pageWidth = pageWidth;\n    this._pageHeight = pageHeight;\n\n    setLayerDimensions(container, viewport);\n\n    // Always clean-up the temporary canvas once rendering is no longer pending.\n    this._capability.promise\n      .finally(() => {\n        this._layoutTextParams = null;\n      })\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n  }\n\n  /**\n   * Promise for textLayer rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Cancel rendering of the textLayer.\n   */\n  cancel() {\n    this._canceled = true;\n    if (this._reader) {\n      this._reader\n        .cancel(new AbortException(\"TextLayer task cancelled.\"))\n        .catch(() => {\n          // Avoid \"Uncaught promise\" messages in the console.\n        });\n      this._reader = null;\n    }\n    this._capability.reject(new AbortException(\"TextLayer task cancelled.\"));\n  }\n\n  /**\n   * @private\n   */\n  _processItems(items, styleCache) {\n    for (const item of items) {\n      if (item.str === undefined) {\n        if (\n          item.type === \"beginMarkedContentProps\" ||\n          item.type === \"beginMarkedContent\"\n        ) {\n          const parent = this._container;\n          this._container = document.createElement(\"span\");\n          this._container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this._container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this._container);\n        } else if (item.type === \"endMarkedContent\") {\n          this._container = this._container.parentNode;\n        }\n        continue;\n      }\n      this._textContentItemsStr.push(item.str);\n      appendText(this, item, styleCache);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _layoutText(textDiv) {\n    const textDivProperties = (this._layoutTextParams.properties =\n      this._textDivProperties.get(textDiv));\n    this._layoutTextParams.div = textDiv;\n    layout(this._layoutTextParams);\n\n    if (textDivProperties.hasText) {\n      this._container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this._container.append(br);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _render() {\n    const { promise, resolve, reject } = Promise.withResolvers();\n    let styleCache = Object.create(null);\n\n    if (this._isReadableStream) {\n      const pump = () => {\n        this._reader.read().then(({ value, done }) => {\n          if (done) {\n            resolve();\n            return;\n          }\n\n          Object.assign(styleCache, value.styles);\n          this._processItems(value.items, styleCache);\n          pump();\n        }, reject);\n      };\n\n      this._reader = this._textContentSource.getReader();\n      pump();\n    } else if (this._textContentSource) {\n      const { items, styles } = this._textContentSource;\n      this._processItems(items, styles);\n      resolve();\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n\n    promise.then(() => {\n      styleCache = null;\n      render(this);\n    }, this._capability.reject);\n  }\n}\n\n/**\n * @param {TextLayerRenderParameters} params\n * @returns {TextLayerRenderTask}\n */\nfunction renderTextLayer(params) {\n  const task = new TextLayerRenderTask(params);\n  task._render();\n  return task;\n}\n\n/**\n * @param {TextLayerUpdateParameters} params\n * @returns {undefined}\n */\nfunction updateTextLayer({\n  container,\n  viewport,\n  textDivs,\n  textDivProperties,\n  mustRotate = true,\n  mustRescale = true,\n}) {\n  if (mustRotate) {\n    setLayerDimensions(container, { rotation: viewport.rotation });\n  }\n\n  if (mustRescale) {\n    const ctx = getCtx();\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const params = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale,\n      properties: null,\n      ctx,\n    };\n    for (const div of textDivs) {\n      params.properties = textDivProperties.get(div);\n      params.div = div;\n      layout(params);\n    }\n  }\n}\n\nexport {\n  cleanupTextLayer,\n  renderTextLayer,\n  TextLayerRenderTask,\n  updateTextLayer,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../interfaces\").IPDFStream} IPDFStream */\n/** @typedef {import(\"../interfaces\").IPDFStreamReader} IPDFStreamReader */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../interfaces\").IPDFStreamRangeReader} IPDFStreamRangeReader */\n\nimport { assert } from \"../shared/util.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\n/** @implements {IPDFStream} */\nclass PDFDataTransportStream {\n  constructor(\n    pdfDataRangeTransport,\n    { disableRange = false, disableStream = false }\n  ) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.'\n    );\n    const { length, initialData, progressiveDone, contentDispositionFilename } =\n      pdfDataRangeTransport;\n\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n\n    if (initialData?.length > 0) {\n      // Prevent any possible issues by only transferring a Uint8Array that\n      // completely \"utilizes\" its underlying ArrayBuffer.\n      const buffer =\n        initialData instanceof Uint8Array &&\n        initialData.byteLength === initialData.buffer.byteLength\n          ? initialData.buffer\n          : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({ begin, chunk });\n    });\n\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({ loaded, total });\n    });\n\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({ chunk });\n    });\n\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n\n    pdfDataRangeTransport.transportReady();\n  }\n\n  _onReceiveData({ begin, chunk }) {\n    // Prevent any possible issues by only transferring a Uint8Array that\n    // completely \"utilizes\" its underlying ArrayBuffer.\n    const buffer =\n      chunk instanceof Uint8Array &&\n      chunk.byteLength === chunk.buffer.byteLength\n        ? chunk.buffer\n        : new Uint8Array(chunk).buffer;\n\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(\n        found,\n        \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\"\n      );\n    }\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      // Reporting to first range reader, if it exists.\n      this._rangeReaders[0]?.onProgress?.({ loaded: evt.loaded });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total,\n      });\n    }\n  }\n\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFDataTransportStream.getFullReader can only be called once.\"\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone,\n      this._contentDispositionFilename\n    );\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFDataTransportStreamReader {\n  constructor(\n    stream,\n    queuedChunks,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename)\n      ? contentDispositionFilename\n      : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // Ignore new data.\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n\n  get headersReady() {\n    return this._headersReady;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // ignore new data\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({ value: chunk, done: false });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({ value: undefined, done: true });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\nexport { PDFDataTransportStream };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass GlobalWorkerOptions {\n  static #port = null;\n\n  static #src = \"\";\n\n  /**\n   * @type {Worker | null}\n   */\n  static get workerPort() {\n    return this.#port;\n  }\n\n  /**\n   * @param {Worker | null} workerPort - Defines global port for worker process.\n   *   Overrides the `workerSrc` option.\n   */\n  static set workerPort(val) {\n    if (\n      !(typeof Worker !== \"undefined\" && val instanceof Worker) &&\n      val !== null\n    ) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n\n  /**\n   * @type {string}\n   */\n  static get workerSrc() {\n    return this.#src;\n  }\n\n  /**\n   * @param {string} workerSrc - A string containing the path and filename of\n   *   the worker file.\n   *\n   *   NOTE: The `workerSrc` option should always be set, in order to prevent\n   *         any issues when using the PDF.js library.\n   */\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\nexport { GlobalWorkerOptions };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_storage\").AnnotationStorage} AnnotationStorage */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { XfaText } from \"./xfa_text.js\";\n\n/**\n * @typedef {Object} XfaLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Object} xfaHtml\n * @property {AnnotationStorage} [annotationStorage]\n * @property {IPDFLinkService} linkService\n * @property {string} [intent] - (default value is 'display').\n */\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, { value: null });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, { value: event.target.value });\n        });\n        break;\n      case \"input\":\n        if (\n          element.attributes.type === \"radio\" ||\n          element.attributes.type === \"checkbox\"\n        ) {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            // The checked attribute may have been set when opening the file,\n            // unset through the UI and we're here because of printing.\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked\n                ? event.target.getAttribute(\"xfaOn\")\n                : event.target.getAttribute(\"xfaOff\"),\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, { value: event.target.value });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value =\n            options.selectedIndex === -1\n              ? \"\"\n              : options[options.selectedIndex].value;\n          storage.setValue(id, { value });\n        });\n        break;\n    }\n  }\n\n  static setAttributes({ html, element, storage = null, intent, linkService }) {\n    const { attributes } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n\n    if (attributes.type === \"radio\") {\n      // Avoid to have a radio group when printing with the same as one\n      // already displayed.\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          // We don't need to add dataId in the html object but it can\n          // be useful to know its value when writing printing tests:\n          // in this case, don't skip dataId to have its value.\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || (key !== \"href\" && key !== \"newWindow\")) {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(\n        html,\n        attributes.href,\n        attributes.newWindow\n      );\n    }\n\n    // Set the value after the others to be sure to overwrite any other values.\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n\n  /**\n   * Render the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService,\n      });\n    }\n\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n\n    // Set defaults.\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n\n    // Text nodes used for the text highlighter.\n    const textDivs = [];\n\n    // In the rich text context, it's possible to just have a text node without\n    // a root element, so we handle this case here (see issue 17215).\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return { textDivs };\n    }\n\n    const stack = [[root, -1, rootHtml]];\n\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n\n      const { name } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n\n      const childHtml = child?.attributes?.xmlns\n        ? document.createElementNS(child.attributes.xmlns, name)\n        : document.createElement(name);\n\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService,\n        });\n      }\n\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n\n    /**\n     * TODO: re-enable that stuff once we've JS implementation.\n     * See https://bugzilla.mozilla.org/show_bug.cgi?id=1719465.\n     *\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaDisabled input, .xfaDisabled textarea\"\n     * )) {\n     * el.setAttribute(\"disabled\", true);\n     * }\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaReadOnly input, .xfaReadOnly textarea\"\n     * )) {\n     * el.setAttribute(\"readOnly\", true);\n     * }\n     */\n\n    for (const el of rootDiv.querySelectorAll(\n      \".xfaNonInteractive input, .xfaNonInteractive textarea\"\n    )) {\n      el.setAttribute(\"readOnly\", true);\n    }\n\n    return {\n      textDivs,\n    };\n  }\n\n  /**\n   * Update the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\nexport { XfaLayer };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nclass XfaText {\n  /**\n   * Walk an XFA tree and create an array of text nodes that is compatible\n   * with a regular PDFs TextContent. Currently, only TextItem.str is supported,\n   * all other fields and styles haven't been implemented.\n   *\n   * @param {Object} xfa - An XFA fake DOM object.\n   *\n   * @returns {TextContent}\n   */\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null),\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str,\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n\n  /**\n   * @param {string} name - DOM node name. (lower case)\n   *\n   * @returns {boolean} true if the DOM node should have a corresponding text\n   * node.\n   */\n  static shouldBuildText(name) {\n    return !(\n      name === \"textarea\" ||\n      name === \"input\" ||\n      name === \"option\" ||\n      name === \"select\"\n    );\n  }\n}\n\nexport { XfaText };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").OnProgressParameters} OnProgressParameters */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").PDFDocumentLoadingTask} PDFDocumentLoadingTask */\n/** @typedef {import(\"./display/api\").PDFDocumentProxy} PDFDocumentProxy */\n/** @typedef {import(\"./display/api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display/api\").RenderTask} RenderTask */\n/** @typedef {import(\"./display/display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/text_layer\").TextLayerRenderTask} TextLayerRenderTask */\n\nimport {\n  AbortException,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationMode,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  FeatureTest,\n  ImageKind,\n  InvalidPDFException,\n  MissingPDFException,\n  normalizeUnicode,\n  OPS,\n  PasswordResponses,\n  PermissionFlag,\n  shadow,\n  UnexpectedResponseException,\n  Util,\n  VerbosityLevel,\n} from \"./shared/util.js\";\nimport {\n  build,\n  getDocument,\n  PDFDataRangeTransport,\n  PDFWorker,\n  version,\n} from \"./display/api.js\";\nimport {\n  DOMSVGFactory,\n  fetchData,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  noContextMenu,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n} from \"./display/display_utils.js\";\nimport { renderTextLayer, updateTextLayer } from \"./display/text_layer.js\";\nimport { AnnotationEditorLayer } from \"./display/editor/annotation_editor_layer.js\";\nimport { AnnotationEditorUIManager } from \"./display/editor/tools.js\";\nimport { AnnotationLayer } from \"./display/annotation_layer.js\";\nimport { ColorPicker } from \"./display/editor/color_picker.js\";\nimport { DrawLayer } from \"./display/draw_layer.js\";\nimport { GlobalWorkerOptions } from \"./display/worker_options.js\";\nimport { Outliner } from \"./display/editor/outliner.js\";\nimport { XfaLayer } from \"./display/xfa_layer.js\";\n\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsVersion =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : void 0;\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsBuild =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : void 0;\n\nexport {\n  AbortException,\n  AnnotationEditorLayer,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationEditorUIManager,\n  AnnotationLayer,\n  AnnotationMode,\n  build,\n  CMapCompressionType,\n  ColorPicker,\n  createValidAbsoluteUrl,\n  DOMSVGFactory,\n  DrawLayer,\n  FeatureTest,\n  fetchData,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  ImageKind,\n  InvalidPDFException,\n  isDataScheme,\n  isPdfFile,\n  MissingPDFException,\n  noContextMenu,\n  normalizeUnicode,\n  OPS,\n  Outliner,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  RenderingCancelledException,\n  renderTextLayer,\n  setLayerDimensions,\n  shadow,\n  UnexpectedResponseException,\n  updateTextLayer,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer,\n};\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  MissingPDFException,\n  PasswordException,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n} from \"./util.js\";\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2,\n};\n\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\n\nfunction wrapReason(reason) {\n  if (\n    !(\n      reason instanceof Error ||\n      (typeof reason === \"object\" && reason !== null)\n    )\n  ) {\n    unreachable(\n      'wrapReason: Expected \"reason\" to be a (possibly cloned) Error.'\n    );\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new MissingPDFException(reason.message);\n    case \"PasswordException\":\n      return new PasswordException(reason.message, reason.code);\n    case \"UnexpectedResponseException\":\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\n\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(\n          function (result) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.DATA,\n              callbackId: data.callbackId,\n              data: result,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.ERROR,\n              callbackId: data.callbackId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n\n  on(actionName, handler) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        typeof handler === \"function\",\n        'MessageHandler.on: Expected \"handler\" to be a function.'\n      );\n    }\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   */\n  send(actionName, data, transfers) {\n    this.comObj.postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers\n    );\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that the other side will callback with the response.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expect that the other side will callback to signal 'start_complete'.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Object} queueingStrategy - Strategy to signal backpressure based on\n   *                 internal queue.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {ReadableStream} ReadableStream to read data in chunks.\n   */\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n\n    return new ReadableStream(\n      {\n        start: controller => {\n          const startCapability = Promise.withResolvers();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          comObj.postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers\n          );\n          // Return Promise for Async process, to signal success/failure.\n          return startCapability.promise;\n        },\n\n        pull: controller => {\n          const pullCapability = Promise.withResolvers();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          // Returning Promise will not call \"pull\"\n          // again until current pull is resolved.\n          return pullCapability.promise;\n        },\n\n        cancel: reason => {\n          assert(reason instanceof Error, \"cancel must have a valid reason\");\n          const cancelCapability = Promise.withResolvers();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          // Return Promise to signal success or failure.\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy\n    );\n  }\n\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        // Enqueue decreases the desiredSize property of sink,\n        // so when it changes from positive to negative,\n        // set ready as unresolved promise.\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers\n        );\n      },\n\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      }\n    );\n  }\n\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        // Ignore any pull after close is called.\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        // Pull increases the desiredSize property of sink, so when it changes\n        // from negative to positive, set ready property as resolved promise.\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        // Reset desiredSize property of sink on every pull.\n        streamSink.desiredSize = data.desiredSize;\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n\n  async #deleteStreamController(streamController, streamId) {\n    // Delete the `streamController` only when the start, pull, and cancel\n    // capabilities have settled, to prevent `TypeError`s.\n    await Promise.allSettled([\n      streamController.startCall?.promise,\n      streamController.pullCall?.promise,\n      streamController.cancelCall?.promise,\n    ]);\n    delete this.streamControllers[streamId];\n  }\n\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\n\nexport { MessageHandler };\n","/* Copyright 2014 Opera Software ASA\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n *\n * Based on https://code.google.com/p/smhasher/wiki/MurmurHash3.\n * Hashes roughly 100 KB per millisecond on i7 3.4 GHz.\n */\n\nconst SEED = 0xc3d2e1f0;\n// Workaround for missing math precision in JS.\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\n\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    // We don't care about endianness here.\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        h1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = ((k2 * C1) & MASK_HIGH) | ((k2 * C1_LOW) & MASK_LOW);\n        k2 = (k2 << 15) | (k2 >>> 17);\n        k2 = ((k2 * C2) & MASK_HIGH) | ((k2 * C2_LOW) & MASK_LOW);\n        h2 ^= k2;\n        h2 = (h2 << 13) | (h2 >>> 19);\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n\n    k1 = 0;\n\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      /* falls through */\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      /* falls through */\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        /* falls through */\n\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0xed558ccd) & MASK_HIGH) | ((h1 * 0x8ccd) & MASK_LOW);\n    h2 =\n      ((h2 * 0xff51afd7) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xafd7ed55) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0x1a85ec53) & MASK_HIGH) | ((h1 * 0xec53) & MASK_LOW);\n    h2 =\n      ((h2 * 0xc4ceb9fe) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xb9fe1a85) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n\n    return (\n      (h1 >>> 0).toString(16).padStart(8, \"0\") +\n      (h2 >>> 0).toString(16).padStart(8, \"0\")\n    );\n  }\n}\n\nexport { MurmurHash3_64 };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\n// NW.js / Electron is a browser context, but copies some Node.js objects; see\n// http://docs.nwjs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/#access-nodejs-and-nwjs-api-in-browser-context\n// https://www.electronjs.org/docs/api/process#processversionselectron-readonly\n// https://www.electronjs.org/docs/api/process#processtype-readonly\nconst isNodeJS =\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n  typeof process === \"object\" &&\n  process + \"\" === \"[object process]\" &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== \"browser\");\n\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6; // Ten megabytes.\n\n// Represent the percentage of the height of a single-line field over\n// the font size. Acrobat seems to use this value.\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\n\n/**\n * Refer to the `WorkerTransport.getRenderingIntent`-method in the API, to see\n * how these flags are being used:\n *  - ANY, DISPLAY, and PRINT are the normal rendering intents, note the\n *    `PDFPageProxy.{render, getOperatorList, getAnnotations}`-methods.\n *  - ANNOTATIONS_FORMS, ANNOTATIONS_STORAGE, ANNOTATIONS_DISABLE control which\n *    annotations are rendered onto the canvas (i.e. by being included in the\n *    operatorList), note the `PDFPageProxy.{render, getOperatorList}`-methods\n *    and their `annotationMode`-option.\n *  - OPLIST is used with the `PDFPageProxy.getOperatorList`-method, note the\n *    `OperatorList`-constructor (on the worker-thread).\n */\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100,\n};\n\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3,\n};\n\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\n\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n};\n\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n};\n\n// Permission flags from Table 22, Section 7.6.3.2 of the PDF specification.\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\n\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\n\nconst ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\n\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\n\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\",\n};\n\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\n\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\n\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\",\n};\n\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\",\n};\n\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\",\n};\n\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\n\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n};\n\n// All the possible operations for an operator list.\nconst OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  // PLEASE NOTE: We purposely keep any removed operators commented out, since\n  //              re-numbering the list would risk breaking third-party users.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  // beginAnnotations: 78,\n  // endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  // paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n};\n\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\n\nlet verbosity = VerbosityLevel.WARNINGS;\n\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\n\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\n\n// Checks if URLs use one of the allowed protocols, e.g. to avoid XSS.\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL.\n *\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} [baseUrl] - An absolute URL.\n * @param {Object} [options]\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === \"string\") {\n      // Let URLs beginning with \"www.\" default to using the \"http://\" protocol.\n      if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n        const dots = url.match(/\\./g);\n        // Avoid accidentally matching a *relative* URL pointing to a file named\n        // e.g. \"www.pdf\" or similar.\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n\n      // According to ISO 32000-1:2008, section 12.6.4.7, URIs should be encoded\n      // in 7-bit ASCII. Some bad PDFs use UTF-8 encoding; see bug 1122280.\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch {}\n      }\n    }\n\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch {\n    /* `new URL()` will throw on incorrect data. */\n  }\n  return null;\n}\n\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      prop in obj,\n      `shadow: Property \"${prop && prop.toString()}\" not found in object.`\n    );\n  }\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\n\n/**\n * @type {any}\n */\nconst BaseException = (function BaseExceptionClosure() {\n  // eslint-disable-next-line no-shadow\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n\n  return BaseException;\n})();\n\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\n\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\n\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\n\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"MissingPDFException\");\n  }\n}\n\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, \"UnexpectedResponseException\");\n    this.status = status;\n  }\n}\n\n/**\n * Error caused during parsing PDF data.\n */\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\n\n/**\n * Error used to indicate task cancellation.\n */\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\n\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\n\nfunction string32(value) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      typeof value === \"number\" && Math.abs(value) < 2 ** 32,\n      `string32: Unexpected input \"${value}\".`\n    );\n  }\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff\n  );\n}\n\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\n\n// Ensure that the returned Object has a `null` prototype; hence why\n// `Object.fromEntries(...)` is not used.\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n// Checks the endianness of the platform.\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(\"\"); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nclass FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n\n  static get isOffscreenCanvasSupported() {\n    return shadow(\n      this,\n      \"isOffscreenCanvasSupported\",\n      typeof OffscreenCanvas !== \"undefined\"\n    );\n  }\n\n  static get platform() {\n    if (\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      (typeof navigator !== \"undefined\" &&\n        typeof navigator?.platform === \"string\")\n    ) {\n      return shadow(this, \"platform\", {\n        isMac: navigator.platform.includes(\"Mac\"),\n      });\n    }\n    return shadow(this, \"platform\", { isMac: false });\n  }\n\n  static get isCSSRoundSupported() {\n    return shadow(\n      this,\n      \"isCSSRoundSupported\",\n      globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\")\n    );\n  }\n}\n\nconst hexNumbers = Array.from(Array(256).keys(), n =>\n  n.toString(16).padStart(2, \"0\")\n);\n\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n\n  // Apply a scaling matrix to some min/max values.\n  // If a scaling factor is negative then min and max must be\n  // swapped.\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n\n  // Concatenates two transformation matrices together and returns the result.\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n\n  // For 2d affine transforms\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = this.applyTransform(r, m);\n    const p2 = this.applyTransform(r.slice(2, 4), m);\n    const p3 = this.applyTransform([r[0], r[3]], m);\n    const p4 = this.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\n    ];\n  }\n\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  static normalizeRect(rect) {\n    const r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'null'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(\n      Math.min(rect1[0], rect1[2]),\n      Math.min(rect2[0], rect2[2])\n    );\n    const xHigh = Math.min(\n      Math.max(rect1[0], rect1[2]),\n      Math.max(rect2[0], rect2[2])\n    );\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(\n      Math.min(rect1[1], rect1[3]),\n      Math.min(rect2[1], rect2[3])\n    );\n    const yHigh = Math.min(\n      Math.max(rect1[1], rect1[3]),\n      Math.max(rect2[1], rect2[3])\n    );\n    if (yLow > yHigh) {\n      return null;\n    }\n\n    return [xLow, yLow, xHigh, yHigh];\n  }\n\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(\n          x0,\n          x1,\n          x2,\n          x3,\n          y0,\n          y1,\n          y2,\n          y3,\n          -c / b,\n          minMax\n        );\n      }\n      return;\n    }\n\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      (-b + sqrtDelta) / a2,\n      minMax\n    );\n    this.#getExtremumOnCurve(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      (-b - sqrtDelta) / a2,\n      minMax\n    );\n  }\n\n  // From https://github.com/adobe-webplatform/Snap.svg/blob/b365287722a72526000ac4bfcf0ce4cac2faa015/src/path.js#L852\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], x0, x3);\n      minMax[1] = Math.min(minMax[1], y0, y3);\n      minMax[2] = Math.max(minMax[2], x0, x3);\n      minMax[3] = Math.max(minMax[3], y0, y3);\n    } else {\n      minMax = [\n        Math.min(x0, x3),\n        Math.min(y0, y3),\n        Math.max(x0, x3),\n        Math.max(y0, y3),\n      ];\n    }\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-x0 + 3 * (x1 - x2) + x3),\n      6 * (x0 - 2 * x1 + x2),\n      3 * (x1 - x0),\n      minMax\n    );\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-y0 + 3 * (y1 - y2) + y3),\n      6 * (y0 - 2 * y1 + y2),\n      3 * (y1 - y0),\n      minMax\n    );\n    return minMax;\n  }\n}\n\nconst PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8,\n  0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192,\n  0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018,\n  0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d,\n  0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac,\n];\n\nfunction stringToPDFString(str) {\n  // See section 7.9.2.2 Text String Type.\n  // The string can contain some language codes bracketed with 0x0b,\n  // so we must remove them.\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (!decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  // ISO Latin 1\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (charCode === 0x1b) {\n      // eslint-disable-next-line no-empty\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getModificationDate(date = new Date()) {\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, \"0\"),\n    date.getUTCDate().toString().padStart(2, \"0\"),\n    date.getUTCHours().toString().padStart(2, \"0\"),\n    date.getUTCMinutes().toString().padStart(2, \"0\"),\n    date.getUTCSeconds().toString().padStart(2, \"0\"),\n  ];\n\n  return buffer.join(\"\");\n}\n\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    // In order to generate the following regex:\n    //  - create a PDF containing all the chars in the range 0000-FFFF with\n    //    a NFKC which is different of the char.\n    //  - copy and paste all those chars and get the ones where NFKC is\n    //    required.\n    // It appears that most the chars here contain some ligatures.\n    NormalizeRegex =\n      /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) =>\n    p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2)\n  );\n}\n\nfunction getUuid() {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    (typeof crypto !== \"undefined\" && typeof crypto?.randomUUID === \"function\")\n  ) {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  if (\n    typeof crypto !== \"undefined\" &&\n    typeof crypto?.getRandomValues === \"function\"\n  ) {\n    crypto.getRandomValues(buf);\n  } else {\n    for (let i = 0; i < 32; i++) {\n      buf[i] = Math.floor(Math.random() * 255);\n    }\n  }\n  return bytesToString(buf);\n}\n\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\n\nconst FontRenderOps = {\n  BEZIER_CURVE_TO: 0,\n  MOVE_TO: 1,\n  LINE_TO: 2,\n  QUADRATIC_CURVE_TO: 3,\n  RESTORE: 4,\n  SAVE: 5,\n  SCALE: 6,\n  TRANSFORM: 7,\n  TRANSLATE: 8,\n};\n\nexport {\n  AbortException,\n  AnnotationActionEventType,\n  AnnotationBorderStyleType,\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationMode,\n  AnnotationPrefix,\n  AnnotationReplyType,\n  AnnotationType,\n  assert,\n  BaseException,\n  BASELINE_FACTOR,\n  bytesToString,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  DocumentActionEventType,\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  FontRenderOps,\n  FormatError,\n  getModificationDate,\n  getUuid,\n  getVerbosityLevel,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  InvalidPDFException,\n  isArrayEqual,\n  isNodeJS,\n  LINE_DESCENT_FACTOR,\n  LINE_FACTOR,\n  MAX_IMAGE_SIZE_TO_CACHE,\n  MissingPDFException,\n  normalizeUnicode,\n  objectFromMap,\n  objectSize,\n  OPS,\n  PageActionEventType,\n  PasswordException,\n  PasswordResponses,\n  PermissionFlag,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF8String,\n  TextRenderingMode,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  utf8StringToString,\n  Util,\n  VerbosityLevel,\n  warn,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(228);\n",""],"mappings":"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C,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,KAAK,CAC7E,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC7E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC5E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC5E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC5E,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}